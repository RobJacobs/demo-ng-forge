{"version":3,"file":"6243.216106657fffc033.js","mappings":"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","names":["e","constructor","a","t","s","this","_hasNoDataValues","_minValue","_maxValue","values","pixelData","width","height","noDataValue","hasNoDataValues","includes","minValue","_ensureBounds","maxValue","i","h","_mainMethod","_transferLists","_listeners","_promise","o","schedule","then","_thread","hasInitialize","broadcast","_connectListener","close","catch","r","error","on","removed","eventName","callback","threadHandle","push","remove","destroy","invoke","invokeMethod","transferList","signal","Promise","reject","all","promise","super","_decode","buffer","strategy","ref","decode","byteLength","options","resolve","release","forEach","delete","Map","w","m","u","v","f","copyright","heightModelInfo","path","minScale","maxScale","opacity","operationalLayerType","sourceJSON","type","url","version","_lercDecoder","n","get","immediate","set","S","normalizeCtorArgs","readVersion","currentVersion","load","addResolvingPromise","loadFromPortal","supportedTypes","supportsData","validateItem","typeKeywords","length","toLowerCase","expectedType","_fetchImageService","fetchTile","AbortController","l","responseType","p","returnFileInfo","_fetchTileAvailability","getTileUrl","data","j","parsedUrl","query","blankTile","tilemapCache","supportsBlankTile","queryElevation","_this","_asyncToGenerator","ElevationQuery","__webpack_require__","bind","createElevationSampler","_this2","createSampler","fetchAvailability","_this3","ssl","replace","read","origin","hasOverriddenFetchTile","__isDefault__","json","source","prototype","readOnly","y","String","origins","write","service","value","g","c","d","T"],"sourceRoot":"webpack:///","sources":["./node_modules/@arcgis/core/layers/support/ElevationTileData.js","./node_modules/@arcgis/core/core/workers/WorkerHandle.js","./node_modules/@arcgis/core/layers/support/LercDecoder.js","./node_modules/@arcgis/core/layers/ElevationLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isNone as a,unwrap as t,isSome as s}from\"../../core/maybe.js\";class e{constructor(a,t,s,e){this._hasNoDataValues=null,this._minValue=null,this._maxValue=null,\"pixelData\"in a?(this.values=a.pixelData,this.width=a.width,this.height=a.height,this.noDataValue=a.noDataValue):(this.values=a,this.width=t,this.height=s,this.noDataValue=e)}get hasNoDataValues(){if(a(this._hasNoDataValues)){const a=this.noDataValue;this._hasNoDataValues=this.values.includes(a)}return this._hasNoDataValues}get minValue(){return this._ensureBounds(),t(this._minValue)}get maxValue(){return this._ensureBounds(),t(this._maxValue)}_ensureBounds(){if(s(this._minValue))return;const{noDataValue:a,values:t}=this;let e=1/0,i=-1/0,h=!0;for(const s of t)s===a?this._hasNoDataValues=!0:(e=s<e?s:e,i=s>i?s:i,h=!1);h?(this._minValue=0,this._maxValue=0):(this._minValue=e,this._maxValue=i>-3e38?i:0)}}export{e as ElevationTileData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{remove as e}from\"../arrayUtils.js\";import{makeHandle as t}from\"../handleUtils.js\";import r from\"../Logger.js\";import{isSome as s}from\"../maybe.js\";import{throwIfAborted as i}from\"../promiseUtils.js\";import{open as o}from\"./workers.js\";class h{constructor(e,t,s,i,h={}){this._mainMethod=t,this._transferLists=s,this._listeners=[],this._promise=o(e,{...h,schedule:i}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,h.hasInitialize&&this.broadcast({},\"initialize\");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>r.getLogger(\"esri.core.workers.WorkerHandle\").error(`Failed to initialize ${e} worker: ${t}`)))}on(r,i){const o={removed:!1,eventName:r,callback:i,threadHandle:null};return this._listeners.push(o),this._connectListener(o),t((()=>{o.removed=!0,e(this._listeners,o),this._thread&&s(o.threadHandle)&&o.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,r){if(this._thread){const s=this._transferLists[e],i=s?s(t):[];return this._thread.invoke(e,t,{transferList:i,signal:r})}return this._promise?this._promise.then((()=>(i(r),this.invokeMethod(e,t,r)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}export{h as WorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{unwrap as e,isSome as r}from\"../../core/maybe.js\";import{WorkerHandle as t}from\"../../core/workers/WorkerHandle.js\";class s extends t{constructor(e=null){super(\"LercWorker\",\"_decode\",{_decode:e=>[e.buffer]},e,{strategy:\"dedicated\"}),this.schedule=e,this.ref=0}decode(e,r,t){return e&&0!==e.byteLength?this.invoke({buffer:e,options:r},t):Promise.resolve(null)}release(){--this.ref<=0&&(o.forEach(((e,r)=>{e===this&&o.delete(r)})),this.destroy())}}const o=new Map;function n(t=null){let n=o.get(e(t));return n||(r(t)?(n=new s((e=>t.immediate.schedule(e))),o.set(t,n)):(n=new s,o.set(null,n))),++n.ref,n}export{n as acquireDecoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../core/Error.js\";import{releaseMaybe as o,isSome as i}from\"../core/maybe.js\";import{MultiOriginJSONMixin as s}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as a,throwIfAborted as l}from\"../core/promiseUtils.js\";import{objectToQuery as p}from\"../core/urlUtils.js\";import{property as n}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import{reader as c}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as d}from\"../core/accessorSupport/decorators/subclass.js\";import y from\"../geometry/HeightModelInfo.js\";import h from\"./Layer.js\";import{ArcGISCachedService as m}from\"./mixins/ArcGISCachedService.js\";import{ArcGISService as u}from\"./mixins/ArcGISService.js\";import{OperationalLayer as v}from\"./mixins/OperationalLayer.js\";import{PortalLayer as f}from\"./mixins/PortalLayer.js\";import{url as g}from\"./support/commonProperties.js\";import{ElevationTileData as j}from\"./support/ElevationTileData.js\";import{acquireDecoder as S}from\"./support/LercDecoder.js\";let w=class extends(m(u(v(f(s(h)))))){constructor(...e){super(...e),this.copyright=null,this.heightModelInfo=null,this.path=null,this.minScale=void 0,this.maxScale=void 0,this.opacity=1,this.operationalLayerType=\"ArcGISTiledElevationServiceLayer\",this.sourceJSON=null,this.type=\"elevation\",this.url=null,this.version=null,this._lercDecoder=S()}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}destroy(){this._lercDecoder=o(this._lercDecoder)}readVersion(e,r){let t=r.currentVersion;return t||(t=9.3),t}load(e){const r=i(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Image Service\"],supportsData:!1,validateItem:e=>{for(let r=0;r<e.typeKeywords.length;r++)if(\"elevation 3d layer\"===e.typeKeywords[r].toLowerCase())return!0;throw new t(\"portal:invalid-layer-item-type\",\"Invalid layer item type '${type}', expected '${expectedType}' \",{type:\"Image Service\",expectedType:\"Image Service Elevation 3D Layer\"})}},e).catch(a).then((()=>this._fetchImageService(r)))),Promise.resolve(this)}fetchTile(e,t,o,s){const a=i((s=s||{signal:null}).signal)?s.signal:s.signal=(new AbortController).signal,l={responseType:\"array-buffer\",signal:a},p={noDataValue:s.noDataValue,returnFileInfo:!0};return this.load().then((()=>this._fetchTileAvailability(e,t,o,s))).then((()=>r(this.getTileUrl(e,t,o),l))).then((e=>this._lercDecoder.decode(e.data,p,a))).then((e=>new j(e)))}getTileUrl(e,r,t){const o=!this.tilemapCache&&this.supportsBlankTile,i=p({...this.parsedUrl.query,blankTile:!o&&null});return`${this.parsedUrl.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}async queryElevation(e,r){const{ElevationQuery:t}=await import(\"./support/ElevationQuery.js\");l(r);return(new t).query(this,e,r)}async createElevationSampler(e,r){const{ElevationQuery:t}=await import(\"./support/ElevationQuery.js\");l(r);return(new t).createSampler(this,e,r)}_fetchTileAvailability(e,r,t,o){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,r,t,o):Promise.resolve(\"unknown\")}async _fetchImageService(e){if(this.sourceJSON)return this.sourceJSON;const t={query:{f:\"json\",...this.parsedUrl.query},responseType:\"json\",signal:e},o=await r(this.parsedUrl.path,t);o.ssl&&(this.url=this.url?.replace(/^http:/i,\"https:\")),this.sourceJSON=o.data,this.read(o.data,{origin:\"service\",url:this.parsedUrl})}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};e([n({json:{read:{source:\"copyrightText\"}}})],w.prototype,\"copyright\",void 0),e([n({readOnly:!0,type:y})],w.prototype,\"heightModelInfo\",void 0),e([n({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],w.prototype,\"path\",void 0),e([n({type:[\"show\",\"hide\"]})],w.prototype,\"listMode\",void 0),e([n({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}},readOnly:!0})],w.prototype,\"minScale\",void 0),e([n({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}},readOnly:!0})],w.prototype,\"maxScale\",void 0),e([n({json:{read:!1,write:!1,origins:{\"web-document\":{read:!1,write:!1}}}})],w.prototype,\"opacity\",void 0),e([n({type:[\"ArcGISTiledElevationServiceLayer\"]})],w.prototype,\"operationalLayerType\",void 0),e([n()],w.prototype,\"sourceJSON\",void 0),e([n({json:{read:!1},value:\"elevation\",readOnly:!0})],w.prototype,\"type\",void 0),e([n(g)],w.prototype,\"url\",void 0),e([n()],w.prototype,\"version\",void 0),e([c(\"version\",[\"currentVersion\"])],w.prototype,\"readVersion\",null),w=e([d(\"esri.layers.ElevationLayer\")],w),w.prototype.fetchTile.__isDefault__=!0;const T=w;export{T as default};\n"],"x_google_ignoreList":[0,1,2,3]}