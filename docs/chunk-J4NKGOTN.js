import{a as we,b as x,c as De,d as ye,e as ke,g as Me,h as Ee,j as Se,l as Pe}from"./chunk-W32NNM5Z.js";import"./chunk-BH5H2EMI.js";import{a as xe}from"./chunk-EVXKES5N.js";import{m as ve}from"./chunk-MKNTLGGJ.js";import"./chunk-S3XPI6ZB.js";import{a as Ce}from"./chunk-FTN2CJFM.js";import{a as be}from"./chunk-Z32YY6GL.js";import"./chunk-S5EE6QWY.js";import"./chunk-IJTEU5B7.js";import"./chunk-PSWJZLWW.js";import"./chunk-IKTHGKQP.js";import"./chunk-U63DCZL6.js";import"./chunk-BA35PLXE.js";import{Ac as se,Ad as _e,B as oe,Bd as ue,Fc as ce,Gc as pe,Hc as me,Ic as ge,Kb as z,Tc as he,Vc as fe,c as ee,gc as re,h as te,ib as C,tc as ie,uc as ne,xc as ae,yc as le,zc as de}from"./chunk-GBRF7Z4C.js";import{$ as T,Cb as G,Db as L,E as w,Eb as I,Fb as y,Gb as k,H as j,Hb as M,Hc as F,Ib as g,Jb as s,Kb as c,Lb as _,Pb as J,Qb as K,R as D,Sb as E,Vb as b,Wb as m,Xa as a,_ as O,bc as S,cc as W,ec as $,g as Q,hc as u,ia as V,ic as A,jc as B,kb as X,na as h,oa as f,pb as Y,ra as U,rc as Z,tc as P,ua as H,vc as R}from"./chunk-YJ3NK6DP.js";import"./chunk-OY7QI42D.js";var Fe=["table"],ze=["columnHeaderPopover"],Oe=n=>({"forge-table-row--expanded":n});function Te(n,l){if(n&1&&(s(0,"forge-list-item",6),_(1,"forge-icon",20),s(2,"button",8),u(3),c()()),n&2){let r=l.$implicit;g("value",r),a(),g("name",r.hidden?"check_box_outline_blank":"check_box"),a(2),A(r.header)}}function Ve(n,l){if(n&1&&_(0,"forge-icon",24),n&2){let r=m().$implicit;g("name",r.sortDirection==="DESC"?"arrow_downward":r.sortDirection==="ASC"?"arrow_upward":"")}}function He(n,l){if(n&1){let r=E();s(0,"th",21),b("cdkDragStarted",function(){h(r);let o=m();return f(o.onColumnHeaderDragStart())})("click",function(o){let t=h(r).$implicit,i=m();return f(i.onTableSort(o,t))})("contextmenu",function(o){let t=h(r).$index,i=m();return f(i.onColumnHeaderRightClick(o,t))}),s(1,"div",22)(2,"span",23),u(3),c(),L(4,Ve,1,1,"forge-icon",24),c(),s(5,"div",25),_(6,"div",26),s(7,"div",27),b("mousedown",function(o){let t=h(r),i=t.$implicit,d=t.$index,p=m();return f(p.onColumnHeaderResize(o,d+1,i))}),c()()()}if(n&2){let r=l.$implicit,e=l.$index,o=m();$("--table-column-width",r.width),g("id","th-"+e+"-"+o.id),a(3),A(r.header),a(),I(r.sortDirection!=null&&r.sortDirection.length?4:-1)}}function Le(n,l){if(n&1&&(s(0,"td",32)(1,"div",34),u(2),c()()),n&2){let r=l.$implicit,e=m().$implicit;a(2),B(" ",e[r.property]," ")}}function Ie(n,l){if(n&1&&(s(0,"tr",33)(1,"td",35),P(2,"appCallback"),_(3,"app-table-detail",36),c()()),n&2){let r=m().index,e=m();a(),G("colspan",R(2,3,e.tableColumns,e.visibleColumns).length+1),a(2),g("data",e.expandedRows[r])("rowIndex",r)}}function $e(n,l){if(n&1){let r=E();J(0),s(1,"tr",28)(2,"td",29)(3,"forge-icon-button",30),b("click",function(){let o=h(r),t=o.$implicit,i=o.index,d=m();return f(d.onExpandRow(i,t))}),_(4,"forge-icon",31),c()(),k(5,Le,3,1,"td",32,y),P(7,"appCallback"),c(),L(8,Ie,4,6,"tr",33),K()}if(n&2){let r=l.index,e=m();a(),g("ngClass",Z(6,Oe,e.expandedRows[r])),a(3),g("name",e.expandedRows[r]?"expand_less":"expand_more"),a(),M(R(7,3,e.tableColumns,e.visibleColumns)),a(3),I(e.expandedRows[r]?8:-1)}}var nt=(()=>{let l=class l{constructor(){this.destroyRef=V(U),this.appDataService=V(Ce),this.tableElementRef=F("table"),this.columnHeaderPopover=F("columnHeaderPopover"),this.virtualScrollViewport=F(x),this.tableColumnResize$=new Q,this.isColumnResizing=!1,this.isBusy=!1,this.filterCache={sort:{property:"lastName",direction:C.Ascending},filters:[],skip:0,take:25},this.recordset=H([]),this.tableColumns=[{header:"Id",property:"id",width:48},{header:"First",property:"firstName"},{header:"Last",property:"lastName"},{header:"Gender",property:"gender"},{header:"Occupation",property:"occupation"}],this.tableHeaderOffset=H(0),this.tableRowHeight=56,this.expandedRows=[],this.id=be.elementId("app-"),this.visibleColumns=e=>e.filter(o=>o.hidden!==!0),this.recordsetTrackBy=(e,o)=>o.id}ngOnInit(){this.getRecords(),this.virtualScrollViewport().checkViewportSize()}ngAfterViewInit(){this.virtualScrollViewport()?.renderedRangeStream.pipe(z(this.destroyRef)).subscribe({next:e=>{this.tableHeaderOffset.set(e.start),!this.isBusy&&e.start>0&&e.end+20>this.recordset().length&&(this.isBusy=!0,this.appDataService.getPeople({sort:this.filterCache.sort}).pipe(z(this.destroyRef),D(()=>this.isBusy=!1)).subscribe({next:o=>{let t=this.recordset().length+1;this.recordset.update(i=>[...i,...o.data.map((d,p)=>(d.id=t+d.id,d))])}}))}})}ngOnDestroy(){this.tableColumnResize$.next(),this.tableColumnResize$.complete()}onColumnHeaderDragStart(){this.virtualScrollViewport()?.scrollToOffset(0)}onColumnHeaderDragDrop(e){ke(this.tableColumns,e.previousIndex,e.currentIndex),this.tableColumns=[...this.tableColumns]}onColumnHeaderResize(e,o,t){e.stopPropagation(),e.preventDefault(),this.tableColumnResize$.next();let i=this.tableElementRef(),d=(i?.nativeElement).querySelectorAll("thead tr th")[o],p=(i?.nativeElement).querySelectorAll(`tbody tr td:nth-child(${o+1})`),q=e.clientX;if(d){this.isColumnResizing=!0,i?.nativeElement.querySelector(".forge-table-head__row")?.classList.add("forge-table-head__row--resizing"),d.classList.add("forge-table-head__cell--resizing"),p.forEach(v=>v.classList.add("forge-table-body__cell--resizing")),w(document.body,"mousemove").pipe(O(this.tableColumnResize$),T(v=>{t.width=d.offsetWidth+(v.clientX-q),q=v.clientX})).subscribe();let N=i?.nativeElement.querySelector("thead");j(w(N,"mouseup"),w(N,"mouseleave")).pipe(D(()=>requestAnimationFrame(()=>{this.isColumnResizing=!1,d=void 0,p=void 0})),O(this.tableColumnResize$),T(v=>{this.tableColumnResize$.next(),this.tableElementRef()?.nativeElement.querySelector(".forge-table-head__row")?.classList.remove("forge-table-head__row--resizing"),d.classList.remove("forge-table-head__cell--resizing"),p.forEach(Re=>Re.classList.remove("forge-table-body__cell--resizing"))})).subscribe()}}onColumnHeaderRightClick(e,o){e.preventDefault();let t=this.columnHeaderPopover();t.nativeElement.open?(t.nativeElement.open=!1,requestAnimationFrame(()=>{this.columnHeaderPopover().nativeElement.anchor=""})):(t.nativeElement.anchor=`th-${o}-${this.id}`,requestAnimationFrame(()=>{this.columnHeaderPopover().nativeElement.open=!0}))}onColumnPopoverItemSelected(e){switch(e){case"reset-column-width":this.tableColumns.forEach(t=>t.width=void 0);break;case"freeze-column":{let t=this.tableElementRef(),i=(t?.nativeElement).querySelectorAll("thead tr th")[0],d=(t?.nativeElement).querySelectorAll("tbody tr td:nth-child(1)");i.classList.add("forge-table-head__cell--frozen"),d.forEach(p=>p.classList.add("forge-table-body__cell--frozen"));break}default:{let t=this.tableColumns.find(i=>i.property===e.property);t&&this.tableColumns.filter(i=>!i.hidden).length&&(t.hidden=oe(t.hidden)?!t.hidden:!0,t.sortDirection=void 0,this.tableColumns=[...this.tableColumns]);break}}let o=this.columnHeaderPopover();o.nativeElement.open=!1,o.nativeElement.anchor=""}onTableSort(e,o){e.stopPropagation();let t=this.columnHeaderPopover();t.nativeElement.open=!1,t.nativeElement.anchor="",this.isColumnResizing||(this.tableColumns.filter(i=>i.property!==o.property).forEach(i=>i.sortDirection=void 0),o.sortDirection===C.Ascending?o.sortDirection=C.Descending:o.sortDirection===C.Descending?o.sortDirection=void 0:o.sortDirection=C.Ascending,this.filterCache.sort=o.sortDirection?{property:o.property,direction:o.sortDirection}:void 0,this.filterCache.skip=0,this.virtualScrollViewport()?.scrollToOffset(0),this.expandedRows.length=0,this.getRecords())}onTablePaginatorChange(e){this.filterCache.skip=e.pageIndex*e.pageSize,this.filterCache.take=e.pageSize,this.expandedRows.length=0,this.getRecords()}onExpandRow(e,o){this.expandedRows[e]?this.expandedRows[e]=void 0:this.expandedRows[e]=o}getRecords(){this.isBusy=!0,this.appDataService.getPeople({sort:this.filterCache.sort}).pipe(z(this.destroyRef),D(()=>this.isBusy=!1)).subscribe({next:e=>{this.recordset.set(e.data)}})}};l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=X({type:l,selectors:[["app-table-demo"]],viewQuery:function(o,t){o&1&&(S(t.tableElementRef,Fe,5),S(t.columnHeaderPopover,ze,5),S(t.virtualScrollViewport,x,5)),o&2&&W(3)},decls:31,vars:11,consts:[["columnHeaderPopover",""],["table",""],[1,"header"],["slot","start",1,"forge-typography--subheading4"],["placement","right-end","animation-type","none","open","false"],[1,"column-popover",3,"forge-list-item-select"],[3,"value"],["value","reset-column-width"],["type","button"],["value","freeze-column"],[1,"body"],[1,"body__table"],[3,"itemSize"],[1,"forge-table","forge-table--fixed"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"forge-table-row","forge-table-head__row",3,"cdkDropListDropped"],[1,"forge-table-cell","forge-table-head__cell","forge-table-row__expander"],["scope","col","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",1,"forge-table-cell","forge-table-head__cell","forge-table-head__cell--sortable",3,"--table-column-width","id"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["inverted","true"],["slot","end",1,"forge-typography--label1"],["slot","start",3,"name"],["scope","col","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",1,"forge-table-cell","forge-table-head__cell","forge-table-head__cell--sortable",3,"cdkDragStarted","click","contextmenu","id"],[1,"forge-table-head__cell-container"],[1,"forge-table-head__cell-text"],["aria-hidden","true",1,"forge-table-head__cell-sort-icon",3,"name"],[1,"forge-table-head__cell-actions"],["cdkDragHandle","",1,"forge-table-head__cell-dragger"],[1,"forge-table-head__cell-resizer",3,"mousedown"],[1,"forge-table-row","forge-table-body__row",3,"ngClass"],[1,"forge-table-cell","forge-table-body__cell","forge-table-row__expander"],["aria-label","Toggle details",3,"click"],[3,"name"],[1,"forge-table-cell","forge-table-body__cell"],[1,"forge-table-row","forge-table-body__row","forge-table-row__expandable-content"],[1,"forge-table-cell__container"],[1,"forge-table-row__expandable-content-cell"],[3,"data","rowIndex"]],template:function(o,t){if(o&1){let i=E();s(0,"forge-toolbar",2)(1,"h2",3),u(2,"Table demo"),c()(),s(3,"forge-popover",4,0)(5,"forge-list",5),b("forge-list-item-select",function(p){return h(i),f(t.onColumnPopoverItemSelected(p.detail.value))}),k(6,Te,4,3,"forge-list-item",6,y),_(8,"forge-divider"),s(9,"forge-list-item",7)(10,"button",8),u(11,"Reset column widths"),c()(),s(12,"forge-list-item",9)(13,"button",8),u(14,"Freeze column"),c()()()(),s(15,"div",10)(16,"div",11)(17,"cdk-virtual-scroll-viewport",12)(18,"table",13,1)(20,"thead")(21,"tr",14),b("cdkDropListDropped",function(p){return h(i),f(t.onColumnHeaderDragDrop(p))}),_(22,"th",15),k(23,He,8,5,"th",16,y),P(25,"appCallback"),c()(),s(26,"tbody"),Y(27,$e,9,8,"ng-container",17),c()()()(),s(28,"forge-toolbar",18)(29,"span",19),u(30),c()()()}o&2&&(a(6),M(t.tableColumns),a(11),g("itemSize",t.tableRowHeight),a(3),$("--table-header-offset",t.tableHeaderOffset())("--table-header-translate-y",t.tableHeaderOffset()*-t.tableRowHeight+"px"),a(3),M(R(25,8,t.tableColumns,t.visibleColumns)),a(4),g("cdkVirtualForOf",t.recordset())("cdkVirtualForTrackBy",t.recordsetTrackBy),a(3),B("Records: ",t.recordset().length))},dependencies:[te,ee,Pe,Se,Ee,Me,ye,we,De,x,re,ne,ie,se,de,ae,le,me,pe,ge,ce,fe,he,ue,_e,ve,xe],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;background-color:var(--forge-theme-surface)}[_nghost-%COMP%]     .forge-table{--table-row-height: 56px;min-width:100%;width:max-content;position:relative}[_nghost-%COMP%]     .forge-table-head__row{height:var(--table-row-height)}[_nghost-%COMP%]     .forge-table-head__row--resizing .forge-table-head__cell:not(.forge-table-head__cell--resizing) .forge-table-head__cell-actions{display:none}[_nghost-%COMP%]     .forge-table-head__cell{padding-left:12px;padding-right:12px;border-right:1px solid transparent;width:calc(var(--table-column-width, 200) * 1px);top:calc(var(--table-header-offset, 0) * var(--table-row-height) * -1)}[_nghost-%COMP%]     .forge-table-head__cell:hover .forge-table-head__cell-actions{transition-delay:.5s;width:48px}[_nghost-%COMP%]     .forge-table-head__cell-sort-icon{display:inline!important}[_nghost-%COMP%]     .forge-table-head__cell-actions{position:absolute;top:4px;bottom:4px;right:8px;display:flex;width:0;overflow:hidden;transition:width .25s;height:calc(var(--table-row-height) - 8)}[_nghost-%COMP%]     .forge-table-head__cell--resizing{border-right-color:var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-head__cell--resizing .forge-table-head__cell-actions{transition-delay:0;width:24px}[_nghost-%COMP%]     .forge-table-head__cell--resizing .forge-table-head__cell-dragger{display:none}[_nghost-%COMP%]     .forge-table-head__cell--frozen{position:sticky;left:0;z-index:2!important;background-color:var(--forge-theme-surface);border-right-color:var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-head__cell-dragger, [_nghost-%COMP%]     .forge-table-head__cell-resizer{height:100%;min-width:24px;margin-left:auto;border:1px solid var(--forge-theme-outline);background-color:var(--forge-theme-surface-container-minimum)}[_nghost-%COMP%]     .forge-table-head__cell-dragger{background-image:url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3Csvg%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20id%3D%22Edit%20%2F%20Move%22%3E%3Cpath%20id%3D%22Vector%22%20d%3D%22M12%2021V12M12%2021L15%2018M12%2021L9%2018M12%2012V3M12%2012H3M12%2012H21M12%203L9%206M12%203L15%206M3%2012L6%2015M3%2012L6%209M21%2012L18%209M21%2012L18%2015%22%20stroke%3D%22%23000000%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-position:center}[_nghost-%COMP%]     .forge-table-head__cell-resizer{background-image:url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3Csvg%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20id%3D%22Edit%20%2F%20Move_Horizontal%22%3E%3Cpath%20id%3D%22Vector%22%20d%3D%22M3%2012H21M3%2012L6%2015M3%2012L6%209M21%2012L18%209M21%2012L18%2015%22%20stroke%3D%22%23000000%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-position:center}[_nghost-%COMP%]     .forge-table-body__row{height:var(--table-row-height)}[_nghost-%COMP%]     .forge-table-body__cell{padding-left:12px;padding-right:12px;border-right:1px solid transparent}[_nghost-%COMP%]     .forge-table-body__cell--resizing{border-right-color:var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-body__cell--frozen{position:sticky;left:0;z-index:2!important;background-color:var(--forge-theme-surface);border-right-color:var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-row__expander{width:48px;padding-left:0!important;padding-right:0!important}[_nghost-%COMP%]     .forge-table-row__expandable-content{background-color:#e8eaf6!important;border-bottom:1px solid var(--forge-theme-outline)}  .column-popover{min-width:280px;--forge-list-padding: 0}  .column-popover forge-list-item{cursor:pointer}.body[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr auto;overflow:hidden;height:100%}.body[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:100%}.cdk-drag-preview[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline);border:solid 2px #3f51b5;display:flex;padding:0 24px}.cdk-drag-preview[_ngcontent-%COMP%]   forge-button[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#e8eaf6}.cdk-drag-placeholder[_ngcontent-%COMP%]   .forge-table-head__cell-container[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}






/*# sourceMappingURL=table-demo.component-KYYPJHAR.css.map */`]});let n=l;return n})();export{nt as TableDemoComponent};
//# sourceMappingURL=chunk-J4NKGOTN.js.map
