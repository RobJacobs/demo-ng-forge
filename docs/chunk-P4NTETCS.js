import{a as l}from"./chunk-6VOI2BBA.js";import{a as m}from"./chunk-3WV5GJ3R.js";import{B as x,D as c,n as p,o as w}from"./chunk-LBARSMJT.js";import{E as h,H as d,K as f,N as S,O as k,ca as b,d as i,g as u,ha as C,v as g,w as a}from"./chunk-UQ3J2UFU.js";var P=(()=>{let n=class n{constructor(){this.httpClient=C(w)}getProfile(){return this.httpClient.get("mock-data/profile.json")}getPeople(e){return this.httpClient.get("mock-data/people.json").pipe(k(1e3),a(t=>{let o=t.length;return e&&(e.filters?.length&&(t=l.filterData(t,e.filters.map(r=>({key:r.property,value:r.value,strict:r.strict}))),o=t.length),e.sort&&(t=l.sortData(t,e.sort.property,"string",e.sort.direction)),c(e.skip)&&c(e.take)&&(t=t.slice(e.skip,e.skip+e.take))),{count:o,data:t}}))}getPerson(e){return this.httpClient.get("mock-data/people.json").pipe(a(t=>t.find(o=>o.id.toString()===e.toString())))}getSearches(e){return new i(t=>{let o=localStorage.getItem(e);x(o)&&(o=JSON.parse(o)),t.next(o),t.complete()})}saveSearches(e,t){return new i(o=>{localStorage.setItem(e,JSON.stringify(t)),o.next(!0),o.complete()})}getLongRequest(){return this.httpClient.get("http://localhost:5000/long-request",{context:new p().set(m,!0)})}getFile(e){return this.httpClient.get(`mock-data/${e}`,{context:new p().set(m,!0),responseType:"blob"})}pollingRequest(e){let t=new u,o=new Date;return o.setSeconds(o.getSeconds()+e),h(0,100).pipe(f(()=>this.getLongRequest()),d(r=>new Date(r.data)>o),S(1),g(6e4)).subscribe({next:r=>{t.next(r.data),t.complete()},error:r=>{t.error(r),t.complete()}}),t}};n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"});let s=n;return s})();export{P as a};
//# sourceMappingURL=chunk-P4NTETCS.js.map
