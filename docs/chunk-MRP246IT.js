import{a as x,b as oe}from"./chunk-G23G7C43.js";import{p as C}from"./chunk-25LYXCFV.js";import{h as b}from"./chunk-PSWJZLWW.js";import{Ab as p,C as h,Cd as ee,Db as z,Dd as te,Id as ae,Jd as ne,Lb as Q,Mb as J,Pb as U,Vc as X,Wc as Z,cc as j,dc as H,f as D,fb as E,gb as i,hb as y,i as T,ib as G,jb as L,jd as K,kd as W,ld as Y,rb as A,vb as $,wb as B,yb as q}from"./chunk-WGIND62E.js";import{Bb as w,Cb as I,Db as O,Eb as d,Fb as r,Fc as N,Gb as n,Hb as g,Ob as P,Rb as M,Va as l,Zb as S,_b as R,dc as o,ec as u,ha as k,ia as f,lb as v,sc as V,tc as F}from"./chunk-UXY6XTJ4.js";import"./chunk-NCBA65HR.js";var c=class extends L{constructor(s){s.format=e=>h(e)?e.toString():"",super(s)}append(s,e,a){return super.append(h(s)?s.toString():"",e,a)}get typedValue(){return this.unmaskedValue!==""?super.typedValue:null}set typedValue(s){super.typedValue=s??""}};var se=["imaskRef"];function me(m,s){if(m&1&&(r(0,"forge-option",13),o(1),n()),m&2){let e=s.$implicit;d("value",e.value),l(),u(e.label)}}var ve=(()=>{class m{constructor(){this.imaskRef=N("imaskRef"),this.formGroup=new q({format:new p(""),input:new p(null),maskType:new p("number")}),this.unmask=!1,this.maskOptions=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"number-search",label:"Number search"},{value:"date",label:"Date"},{value:"date-search",label:"Date search"},{value:"datetime",label:"Date time"}],this.helpText=""}ngAfterViewInit(){console.log(this.imaskRef())}onReset(){this.formGroup.controls.input.setValue(null)}onApply(){this.imaskRef()?.destroyMask(),this.formGroup.controls.input.setValue(null),requestAnimationFrame(()=>{switch(this.helpText="",this.unmask=!1,this.formGroup.value.maskType){case"string":this.mask=this.buildStringMask(this.formGroup.value.format);break;case"number":this.formGroup.value?.format?.length?this.mask=this.buildNumberFormatMask(this.formGroup.value.format):this.mask=this.buildNumberMask();break;case"number-search":this.mask=this.buildNumberSearchMask();break;case"date":this.mask=this.buildDateMask();break;case"date-search":this.mask=this.buildDateSearchMask();break;case"datetime":this.mask=this.buildDateTimeMask();break}})}buildStringMask(e){if(!e?.length)return{mask:/./};let a=e.replace(/([0a*]*)/g,t=>t.length?`\`${t}`:"");return new E({mask:a,lazy:!1,placeholderChar:" "})}buildNumberMask(){return{mask:/^-?\d*\.{0,1}\d*\s*$/}}buildNumberFormatMask(e){if(!e?.length)return{mask:/^-?[\d]*\.*[\d]*\s*$/};this.unmask="typed";let a=parseFloat(e.replace(/[#&-]/g,"9").replace(/,/g,"")),t=e.includes("&")?e.includes("-")?a*-1:0:NaN;return new c({mask:Number,thousandsSeparator:e.includes(",")?",":"",radix:".",padFractionalZeros:!!e.includes("."),scale:e.split(".")[1]?.length||0,signed:!!e.includes("-"),max:isFinite(a)?a:void 0,min:isFinite(t)?t:void 0})}buildNumberSearchMask(){return{mask:/^\s*[!\-.\d:<>=|\s+]*\s*$/}}buildDateMask(){return this.unmask="typed",this.helpText="MM/dd/yyyy",new y({mask:Date,pattern:"MM/`dd/`yyyy",placeholderChar:" ",blocks:{MM:{mask:i,from:1,to:12,maxLength:2},dd:{mask:i,from:1,to:31,maxLength:2},yyyy:{mask:i,from:1900,to:9999,maxLength:4}},autofix:!1,lazy:!1,overwrite:!1,format:e=>b(e)?C(e,"MM/dd/yyyy"):"",parse:e=>x(e,"MM/dd/yyyy",new Date)})}buildDateTimeMask(){return this.unmask="typed",this.helpText="MM/dd/yyyy hh:mm:ss aa",new y({mask:Date,pattern:"MM/`dd/`yyyy `hh:`mm:`ss `aa",placeholderChar:" ",blocks:{MM:{mask:i,from:1,to:12,maxLength:2},dd:{mask:i,from:1,to:31,maxLength:2},yyyy:{mask:i,from:1900,to:9999,maxLength:4},hh:{mask:i,from:1,to:12,maxLength:2},mm:{mask:i,from:0,to:59,maxLength:2},ss:{mask:i,from:0,to:59,maxLength:2},aa:{mask:G,enum:["am","pm"]}},autofix:!1,lazy:!1,overwrite:!1,format:e=>b(e)?C(e,"MM/dd/yyyy hh:mm:ss aaa"):"",parse:e=>x(e,"MM/dd/yyyy hh:mm:ss aaa",new Date)})}buildDateSearchMask(){return{mask:/^\s*[!\-.\d:<>=|\s/]*\s*$/}}static{this.\u0275fac=function(a){return new(a||m)}}static{this.\u0275cmp=v({type:m,selectors:[["app-imask"]],viewQuery:function(a,t){a&1&&S(t.imaskRef,se,5),a&2&&R()},decls:37,vars:7,consts:[["input","","imaskRef","imask"],["input",""],[1,"header"],["slot","start",1,"forge-typography--subheading4"],[1,"body"],["novalidate","","autocomplete","off",3,"formGroup"],["slot","label","for","imask--input"],["id","imask--input","type","text","formControlName","input",3,"imask","unmask"],["slot","support-text"],[2,"width","600px"],["slot","label","for","imask--format"],["id","imask--format","type","text","formControlName","format"],["formControlName","maskType","label","Mask type"],[3,"value"],["variant","filled",3,"click"],["variant","outlined",3,"click"]],template:function(a,t){if(a&1){let _=P();r(0,"forge-toolbar",2)(1,"h2",3),o(2,"IMask"),n()(),r(3,"div",4)(4,"form",5)(5,"forge-text-field")(6,"label",6),o(7,"Input"),n(),g(8,"input",7,0),r(11,"span",8),o(12),n()(),r(13,"div",9)(14,"div")(15,"b"),o(16,"string mask"),n(),o(17,": (0) any digit, (a) any letter, (*) any char"),n(),r(18,"div")(19,"b"),o(20,"number mask"),n(),o(21,": (#) required digit, (&) optional digit, (-) sign, (.) decimal, (,) separator"),n()(),r(22,"forge-text-field")(23,"label",10),o(24,"Format"),n(),g(25,"input",11,1),n(),r(27,"forge-select",12),I(28,me,2,2,"forge-option",13,w),n(),r(30,"forge-button",14),M("click",function(){return k(_),f(t.onApply())}),o(31,"Apply mask"),n(),r(32,"forge-button",15),M("click",function(){return k(_),f(t.onReset())}),o(33,"Reset value"),n()(),r(34,"p"),o(35),V(36,"json"),n()()}a&2&&(l(4),d("formGroup",t.formGroup),l(4),d("imask",t.mask)("unmask",t.unmask),l(4),u(t.helpText),l(16),O(t.maskOptions),l(7),u(F(36,5,t.formGroup.getRawValue())))},dependencies:[T,U,z,A,$,B,J,Q,oe,H,j,Z,X,Y,W,K,te,ee,ne,ae,D],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px}.body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:16px;background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline);display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.body[_ngcontent-%COMP%]   form--row-break[_ngcontent-%COMP%]{grid-column-start:1}.body[_ngcontent-%COMP%]   form--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.body[_ngcontent-%COMP%]   form--col-span.body[_ngcontent-%COMP%]   form--col-span[_ngcontent-%COMP%]{width:auto}.body[_ngcontent-%COMP%]   form--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.body[_ngcontent-%COMP%]   form--col-span2.body[_ngcontent-%COMP%]   form--col-span2[_ngcontent-%COMP%]{width:656px}.body[_ngcontent-%COMP%]   form--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.body[_ngcontent-%COMP%]   form--col-span3.body[_ngcontent-%COMP%]   form--col-span3[_ngcontent-%COMP%]{width:992px}.body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{grid-template-columns:320px}






/*# sourceMappingURL=imask.component-NPJUNXNH.css.map */`]})}}return m})();export{ve as ImaskComponent};
//# sourceMappingURL=chunk-MRP246IT.js.map
