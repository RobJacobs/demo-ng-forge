"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[3110],{13110:(It,pt,G)=>{G.d(pt,{Hq:()=>ft,Mk:()=>F,P_:()=>bt,Qp:()=>Nt,VO:()=>H,_D:()=>Pt,kZ:()=>vt,kr:()=>Ot,nF:()=>Q,tB:()=>q,ut:()=>v,vF:()=>Wt,zD:()=>Rt});var K,t,gt=G(71670),yt=(G(6010),G(32995)),P=G(53661),D=G(82769),E=G(48323),T=G(21789),I=G(10465),b=G(35787),_t=G(55733),Mt=G(68230);function F(t,n,i){return!(0,T.Up)(t,n,i)}function j(t,n,i){const r=F(t,n,i);if(r&&!(0,T.kR)())throw new yt.Z("rasterprojectionhelper-project","projection engine is not loaded");return r}(t=K||(K={}))[t.None=0]="None",t[t.North=1]="North",t[t.South=2]="South",t[t.Both=3]="Both";const it=(t,n,i,r=0)=>{if(1===i[0])return[0,0];let s=1,e=-1,o=1,u=-1;for(let l=0;l<t.length;l+=2)isNaN(t[l])||(s=s>t[l]?t[l]:s,e=e>t[l]?e:t[l],o=o>t[l+1]?t[l+1]:o,u=u>t[l+1]?u:t[l+1]);const{cols:f,rows:c}=n,a=(e-s)/f/i[0],_=(u-o)/c/i[1],p=2*r;let h=0,m=!1,x=[0,0];for(let l=0;l<f-3;l++){for(let d=0;d<c-3;d++){const y=l*c*2+2*d,M=(t[y+1]+t[y+5]+t[y+4*c+1]+t[y+4*c+5])/4,R=Math.abs(((t[y]+t[y+4]+t[y+4*c]+t[y+4*c+4])/4-t[y+2*c+2])/a),w=Math.abs((M-t[y+2*c+3])/_);if(R+w>h&&(h=R+w,x=[R,w]),p&&h>p){m=!0;break}}if(m)break}return x},dt={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},Z=32,z=4,Y=z,V=new Map,J=new Map,A=500;function Rt(){return X.apply(this,arguments)}function X(){return(X=(0,gt.Z)(function*(){(0,T.kR)()||(yield(0,T.zD)())})).apply(this,arguments)}function Pt(t,n,i){return j(t.spatialReference,n)?i?(0,T.rS)(n,t.spatialReference,t):(0,T.rS)(t.spatialReference,n,t):null}function H(t,n,i,r=null){const s=t.spatialReference;if(s.equals(n))return t;j(s,n,r);const e=i.center,o=new I.Z({xmin:e.x-t.x/2,xmax:e.x+t.x/2,ymin:e.y-t.y/2,ymax:e.y+t.y/2,spatialReference:s}),u=(0,T.iV)(o,n,r),f=v(n);let c;if((0,P.Wi)(u)||(0,P.pC)(f)&&u.width>=f){const a=(0,D.c9)(s)/(0,D.c9)(n);c={x:t.x*a,y:t.y*a}}else c={x:u.width,y:u.height};return c}function N(t,n=.01){return(0,D.c9)(t)?n/(0,D.c9)(t):0}function Q(t,n,i=null,r=!0){const s=t.spatialReference;if(s.equals(n))return t;j(s,n,i);const e=(0,T.iV)(t,n,i);return r&&e&&ot([t],[e],s,n),e}function ot(t,n,i,r){const s=U(i,!0),e=U(r,!0),o=N(i,A),u=N(r,A);if(o&&(0,P.pC)(s)&&(0,P.pC)(e))for(let f=0;f<t.length;f++){const c=n[f];if(!c)continue;const{x:a}=t[f],{x:_}=c;_>=e[1]-u&&Math.abs(a-s[0])<o?c.x-=e[1]-e[0]:_<=e[0]+u&&Math.abs(a-s[1])<o&&(c.x+=e[1]-e[0])}}function st(t){const{inSR:n,outSR:i,datumTransformation:r}=t,s=k(n),{points:e,mask:o}=$(t,s);if(!n.isGeographic){const f=n.wkid?E.e.coordsys(n.wkid):E.e.fromString(n.isGeographic?E.f.PE_TYPE_GEOGCS:E.f.PE_TYPE_PROJCS,n.wkt);E.g.projToGeog(f,e.length,e)}if((0,P.pC)(r)&&r.steps.length){let f;if(i.isGeographic&&(f=e.map(([a])=>a>179.9955?1:a<-179.9955?-1:0)),r.steps.forEach(a=>{const _=a.wkid?E.e.geogtran(a.wkid):E.e.fromString(E.f.PE_TYPE_GEOGTRAN,a.wkt);E.h.geogToGeog(_,e.length,e,null,a.isInverse?E.f.PE_TRANSFORM_2_TO_1:E.f.PE_TRANSFORM_1_TO_2)}),f)for(let a=0;a<e.length;a++){const _=f[a],p=e[a][0],h=p>179.9955?1:p<-179.9955?-1:0;_&&h&&_!==h&&(e[a][0]=_>0?p+360:p-360)}}if(!i.isGeographic){const f=k(i,!0),c=(0,P.pC)(f)&&f.isEnvelope?[f.bbox[1],f.bbox[3]]:[-90,90];!function St(t,n){const[i,r]=n;for(let s=0;s<t.length;s++){const e=t[s][1];(e<i||e>r)&&(t[s]=[NaN,NaN])}}(e,c);const a=i.wkid?E.e.coordsys(i.wkid):E.e.fromString(i.isGeographic?E.f.PE_TYPE_GEOGCS:E.f.PE_TYPE_PROJCS,i.wkt);E.g.geogToProj(a,e.length,e)}let u=e;if(o&&e.length!==o.length){u=[];for(let f=0,c=0;f<o.length;f++)u.push(o[f]?e[c++]:[NaN,NaN])}return u}function k(t,n=!1){let i=t.wkid||t.wkt;if(!i||t.isGeographic)return null;if(i=String(i),V.has(i)){const o=V.get(i);return n?o?.gcs:o?.pcs}const r=t.wkid?E.e.coordsys(t.wkid):E.e.fromString(t.isGeographic?E.f.PE_TYPE_GEOGCS:E.f.PE_TYPE_PROJCS,t.wkt),s=rt(r,N(t,1e-4)),e=rt(r,0,!0);return V.set(i,{pcs:s,gcs:e}),n?e:s}function rt(t,n=0,i=!1){const r=E.j.generate(t),s=i?t.horizonGcsGenerate():t.horizonPcsGenerate();if(!r||!s?.length)return null;let e=!1,o=s.find(l=>1===l.getInclusive()&&1===l.getKind());if(!o){if(o=s.find(l=>1===l.getInclusive()&&0===l.getKind()),!o)return null;e=!0}const u=i?0:(2===r.getNorthPoleLocation()?1:0)|(2===r.getSouthPoleLocation()?2:0),f=r.isPannableRectangle(),c=o.getCoord();if(e)return{isEnvelope:e,isPannable:f,vertices:c,coef:null,bbox:[c[0][0]-n,c[0][1]-n,c[1][0]+n,c[1][1]+n],poleLocation:u};let a=0;const _=[];let[p,h]=c[0],[m,x]=c[0];for(let l=0,d=c.length;l<d;l++){a++,a===d&&(a=0);const[y,g]=c[l],[M,R]=c[a];if(R===g)_.push([y,M,g,R,2]);else{const w=(M-y)/(R-g||1e-4),C=y-w*g;_.push(g<R?[w,C,g,R,0]:[w,C,R,g,1])}p=p<y?p:y,h=h<g?h:g,m=m>y?m:y,x=x>g?x:g}return{isEnvelope:!1,isPannable:f,vertices:c,coef:_,bbox:[p,h,m,x],poleLocation:u}}function $(t,n){const i=[],{cols:r,rows:s,xres:e,yres:o,usePixelCenter:u}=t;let{xmin:f,ymax:c}=t;if(u&&(f+=e/2,c-=o/2),(0,P.Wi)(n)){for(let h=0;h<r;h++)for(let m=0;m<s;m++)i.push([f+e*h,c-o*m]);return{points:i}}const a=new Uint8Array(r*s);if(n.isEnvelope){const{bbox:[h,m,x,l]}=n;for(let d=0,y=0;d<r;d++){const g=f+e*d,M=n.isPannable||g>=h&&g<=x;for(let R=0;R<s;R++,y++){const w=c-o*R;M&&w>=m&&w<=l&&(i.push([g,w]),a[y]=1)}}return{points:i,mask:a}}const _=n.coef,p=[];for(let h=0;h<s;h++){const m=c-o*h,x=[],l=[];for(let y=0;y<_.length;y++){const[g,M,R,w,C]=_[y];m===R&&R===w?(x.push(g),x.push(M),l.push(2),l.push(2)):m>=R&&m<=w&&(x.push(g*m+M),l.push(C))}let d=x;if(x.length>2){let y=2===l[0]?0:l[0],g=x[0];d=[];for(let M=1;M<l.length;M++)2===l[M]&&M!==l.length-1||(l[M]!==y&&(d.push(0===y?Math.min(g,x[M-1]):Math.max(g,x[M-1])),y=l[M],g=x[M]),M===l.length-1&&d.push(0===l[M]?Math.min(g,x[M]):Math.max(g,x[M])));d.sort((M,R)=>M-R)}else x[0]>x[1]&&(d=[x[1],x[0]]);p.push(d)}for(let h=0,m=0;h<r;h++){const x=f+e*h;for(let l=0;l<s;l++,m++){const d=c-o*l,y=p[l];if(2===y.length)x>=y[0]&&x<=y[1]&&(i.push([x,d]),a[m]=1);else if(y.length>2){let g=!1;for(let M=0;M<y.length;M+=2)if(x>=y[M]&&x<=y[M+1]){g=!0;break}g&&(i.push([x,d]),a[m]=1)}}}return{points:i,mask:a}}function at(t){const n=v(t[0].spatialReference);if(t.length<2||(0,P.Wi)(n))return t[0];let{xmin:i,xmax:r,ymin:s,ymax:e}=t[0];for(let o=1;o<t.length;o++){const u=t[o];r=u.xmax+n*o,s=Math.min(s,u.ymin),e=Math.max(e,u.ymax)}return new I.Z({xmin:i,xmax:r,ymin:s,ymax:e,spatialReference:t[0].spatialReference})}function q(t,n,i=null,r=!0){const s=t.spatialReference;if(s.equals(n))return t;const e=ft(t),o=v(s,!0),u=v(n);if(0===e||(0,P.Wi)(o)||(0,P.Wi)(u)){const c=lt(t,n,i,r);if((0,P.Wi)(o)&&(0,P.pC)(u)&&Math.abs(c.width-u)<N(n)&&(0,T.kR)()){const a=k(s);if((0,P.pC)(a)&&a.poleLocation===K.None&&t.width<(a.bbox[2]-a.bbox[0])/2)return function Tt(t,n){const i=v(n);if((0,P.Wi)(i))return null;let{xmin:r,ymin:s,xmax:e,ymax:o}=t;const u=t.spatialReference,f=new _t.Z({spatialReference:u,rings:[[[r,s],[e,s],[e,o],[r,o],[r,s]]]}),c=(0,T.iV)(f,n);if(2!==c.rings.length||!c.rings[0].length||!c.rings[1].length)return null;const{rings:a}=c,_=N(u),p=new I.Z({spatialReference:n});for(let h=0;h<2;h++){r=e=a[h][0][0],s=o=a[h][0][1];for(let m=0;m<a[h].length;m++)r=r>a[h][m][0]?a[h][m][0]:r,e=e<a[h][m][0]?a[h][m][0]:e,s=s>a[h][m][1]?a[h][m][1]:s,o=o<a[h][m][1]?a[h][m][1]:o;if(0===h)p.ymin=s,p.ymax=o,p.xmin=r,p.xmax=e;else if(p.ymin=Math.min(p.ymin,s),p.ymax=Math.max(p.ymax,o),Math.abs(e-i/2)<_)p.xmin=r,p.xmax=p.xmax+i;else{if(!(Math.abs(r+i/2)<_))return null;p.xmax=e+i}}return p}(t,n)||c}return c}const f=t.clone().normalize();if(1===f.length&&t.xmax<o&&t.xmax-o/2>N(s)){const{xmin:c,xmax:a}=t;for(let _=0;_<=e;_++)f[_]=new I.Z({xmin:0===_?c:-o/2,xmax:_===e?a-o*_:o/2,ymin:t.ymin,ymax:t.ymax,spatialReference:s})}return at(f.map(c=>lt(c,n,i,r)).filter(P.pC))}function lt(t,n,i=null,r=!0,s=!0){const e=t.spatialReference;if(e.equals(n)||!n)return t;j(e,n,i);const o=(0,T.iV)(t,n,i);if(s&&n.isWebMercator&&o&&(o.ymax=Math.min(20037508.342787,o.ymax),o.ymin=Math.max(-20037508.342787,o.ymin),o.ymin>=o.ymax))return null;if(!r||!o)return o;const u=U(e,!0),f=U(n,!0);if((0,P.Wi)(u)||(0,P.Wi)(f))return o;const c=N(e,.001),a=N(e,A),_=N(n,.001);if(Math.abs(o.xmin-f[0])<_&&Math.abs(o.xmax-f[1])<_){const p=Math.abs(t.xmin-u[0]),h=Math.abs(u[1]-t.xmax);if(p<c&&h>a){o.xmin=f[0];const m=[];m.push(new b.Z(t.xmax,t.ymin,e)),m.push(new b.Z(t.xmax,(t.ymin+t.ymax)/2,e)),m.push(new b.Z(t.xmax,t.ymax,e));const x=m.map(l=>Q(l,n,i)).filter(l=>!isNaN(l?.x)).map(l=>l.x);o.xmax=Math.max.apply(null,x)}if(h<c&&p>a){o.xmax=f[1];const m=[];m.push(new b.Z(t.xmin,t.ymin,e)),m.push(new b.Z(t.xmin,(t.ymin+t.ymax)/2,e)),m.push(new b.Z(t.xmin,t.ymax,e));const x=m.map(l=>Q(l,n,i)).filter(l=>!isNaN(l?.x)).map(l=>l.x);o.xmin=Math.min.apply(null,x)}}else{const p=N(n,.001);Math.abs(o.xmin-f[0])<p&&(o.xmin=f[0]),Math.abs(o.xmax-f[1])<p&&(o.xmax=f[1])}return o}function v(t,n=!1){return t?t.isWebMercator?2*(n?20037508.342787:20037508.342788905):t.wkid&&t.isGeographic?360:2*dt[t.wkid]||null:null}function U(t,n=!1){if(t.isGeographic)return[-180,180];const i=v(t,n);return(0,P.pC)(i)?[-i/2,i/2]:null}function ct(t,n,i,r){let s=(t-n)/i;return s-Math.floor(s)!=0?s=Math.floor(s):r&&(s-=1),s}function ft(t,n=!1){const i=v(t.spatialReference);if((0,P.Wi)(i))return 0;const r=n?0:-i/2,s=N(t.spatialReference),e=!n&&Math.abs(t.xmax-i/2)<s?i/2:t.xmax,o=!n&&Math.abs(t.xmin+i/2)<s?-i/2:t.xmin;return ct(e,r,i,!0)-ct(o,r,i,!1)}function bt(t){const n=t.storageInfo.origin.x,i=v(t.spatialReference,!0);if((0,P.Wi)(i))return{originX:n,halfWorldWidth:null,pyramidsInfo:null};const r=i/2,{nativePixelSize:s,storageInfo:e,extent:o}=t,{maximumPyramidLevel:u,blockWidth:f,pyramidScalingFactor:c}=e;let a=s.x;const _=[],p=(0,P.pC)(t.transform)&&"gcs-shift"===t.transform.type,h=n+(p?0:r),m=p?i-n:r-n;for(let x=0;x<=u;x++){const l=(o.xmax-n)/a/f,d=l-Math.floor(l)==0?l:Math.ceil(l),y=m/a/f,g=y-Math.floor(y)==0?y:Math.ceil(y),M=Math.floor(h/a/f),R=Math.round(h/a)%f,w=(f-Math.round(m/a)%f)%f;_.push({resolutionX:a,blockWidth:f,datsetColumnCount:d,worldColumnCountFromOrigin:g,leftMargin:R,rightPadding:w,originColumnOffset:M}),a*=c}return{originX:n,halfWorldWidth:r,pyramidsInfo:_,hasGCSSShiftTransform:p}}function Nt(t){const n=t.isAdaptive&&null==t.spacing;let i=t.spacing||[Z,Z],r=tt(t),s={cols:r.size[0]+1,rows:r.size[1]+1};const e=r.outofBoundPointCount>0&&r.outofBoundPointCount<r.offsets.length/2;let o=r.outofBoundPointCount===r.offsets.length/2||n&&e?[0,0]:it(r.offsets,s,i,Y);const f=t.projectedExtent.spatialReference,c=t.srcBufferExtent.spatialReference;if(n&&(e||(o[0]+o[1])/2>Y)&&(F(f,c,t.datumTransformation)&&(f.isGeographic||(0,P.pC)(k(f))),i=[z,z],r=tt({...t,spacing:i}),s={cols:r.size[0]+1,rows:r.size[1]+1},o=it(r.offsets,s,i,Y)),r.error=o,i[0]>1&&(r.coefficients=ut(r.offsets,s,e)),t.includeGCSGrid&&!f.isGeographic&&!f.isWebMercator)if(c.isGeographic)r.gcsGrid={offsets:r.offsets,coefficients:r.coefficients,spacing:i};else{const a=k(f);if((0,P.pC)(a)&&!a.isEnvelope){const _=function Gt(t){if(!t||t.isGeographic)return t;const n=String(t.wkid||t.wkt);let i;return J.has(n)?i=J.get(n):(i=(t.wkid?E.e.coordsys(t.wkid):E.e.fromString(E.f.PE_TYPE_PROJCS,t.wkt)).getGeogcs().getCode(),J.set(n,i)),new Mt.Z({wkid:i})}(f),p=q(t.projectedExtent,_),{offsets:h}=tt({...t,srcBufferExtent:p,spacing:i}),m=ut(h,s,e);r.gcsGrid={offsets:h,coefficients:m,spacing:i}}}return r}function tt(t){const{projectedExtent:n,srcBufferExtent:i,pixelSize:r,datumTransformation:s,rasterTransform:e}=t,o=n.spatialReference,u=i.spatialReference,f=j(o,u),{xmin:c,ymin:a,xmax:_,ymax:p}=n,h=v(u),m=(0,P.pC)(h)&&(t.hasWrapAround||"gcs-shift"===e?.type),x=t.spacing||[Z,Z],l=x[0]*r.x,d=x[1]*r.y,y=1===x[0],g=Math.ceil((_-c)/l-.1/x[0])+(y?0:1),M=Math.ceil((p-a)/d-.1/x[1])+(y?0:1),R=function Et(t){const{inSR:n,outSR:i,datumTransformation:r,preferPE:s}=t;if(n.equals(i)){const{points:e}=$(t,null);return e}if(n.isWebMercator&&i.isWGS84||n.isWGS84&&i.isWebMercator)return function Ct(t){const{cols:n,rows:i,xres:r,yres:s,usePixelCenter:e,inSR:o,outSR:u}=t;let{xmin:f,ymax:c}=t;e&&(f+=r/2,c-=s/2);const a=[],_=[],p=Math.max(n,i);for(let m=0;m<p;m++){const x=f+r*Math.min(n,m),l=c-s*Math.min(i,m),d=(0,T.iV)(new b.Z({x,y:l,spatialReference:o}),u);m<=n&&a.push(d.x),m<=i&&_.push(d.y)}const h=[];for(let m=0;m<n;m++)for(let x=0;x<i;x++)h.push([a[m],_[x]]);return h}(t);if(j(n,i,r)&&s){if(n.isGeographic)return st(t);const e=k(n);if((0,P.pC)(e))return st(t)}return function wt(t){const{points:n}=$(t,null),{inSR:i,outSR:r,datumTransformation:s}=t,e=n.map(u=>new b.Z(u[0],u[1],i)),o=(0,T.iV)(e,r,s);return s&&ot(e,o,i,r),o.map(u=>u?[u.x,u.y]:[NaN,NaN])}(t)}({cols:g,rows:M,xmin:c,ymax:p,xres:l,yres:d,inSR:o,outSR:u,datumTransformation:s,preferPE:x[0]<=z,usePixelCenter:y}),w=[];let C,O=0;const L=y?-1:NaN,{xmin:ht,xmax:nt,ymax:kt,width:Lt,height:Dt}=i,jt=N(u,A),Bt=(0,P.pC)(h)&&ht>0&&nt>h/2;let mt=!1;if(f){const W=k(o);mt=(0,P.pC)(W)&&W.poleLocation>0}for(let W=0;W<g;W++){const et=[];for(let B=0;B<M;B++){let S=R[W*M+B];if(m&&S[0]>nt&&S[0]>h/2-jt?S[0]-=h:m&&0===W&&S[0]<0&&Bt&&!e&&(S[0]+=h),!S||isNaN(S[0])||isNaN(S[1]))w.push(L),w.push(L),et.push(null),O++;else{if(e){const xt=e.inverseTransform(new b.Z({x:S[0],y:S[1],spatialReference:u}));S=[xt.x,xt.y]}et.push(S),W>0&&m&&C[B]&&S[0]<C[B][0]&&(S[0]+=h,mt&&S[0]>nt&&S[0]>h&&(S[0]-=h)),w.push((S[0]-ht)/Lt),w.push((kt-S[1])/Dt)}}C=et}return{offsets:w,error:null,coefficients:null,outofBoundPointCount:O,spacing:x,size:y?[g,M]:[g-1,M-1]}}function ut(t,n,i){const{cols:r,rows:s}=n,e=new Float32Array((r-1)*(s-1)*2*6),o=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),u=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let f=0;f<r-1;f++){for(let c=0;c<s-1;c++){let a=f*s*2+2*c;const _=t[a],p=t[a+1],h=t[a+2],m=t[a+3];a+=2*s;const x=t[a],l=t[a+1],d=t[a+2],y=t[a+3];let g=0,M=12*(c*(r-1)+f);for(let R=0;R<3;R++)e[M++]=o[g++]*_+o[g++]*h+o[g++]*d;g=0;for(let R=0;R<3;R++)e[M++]=o[g++]*p+o[g++]*m+o[g++]*y;g=0;for(let R=0;R<3;R++)e[M++]=u[g++]*_+u[g++]*x+u[g++]*d;g=0;for(let R=0;R<3;R++)e[M++]=u[g++]*p+u[g++]*l+u[g++]*y}if(i)for(let c=0;c<e.length;c++)isNaN(e[c])&&(e[c]=-1)}return e}function vt(t){const n=t.clone().normalize();return 1===n.length?n[0]:at(n)}function Ot(t,n,i){const{storageInfo:r,pixelSize:s}=n;let e=0,o=!1;const{pyramidResolutions:u}=r;if((0,P.pC)(u)&&u.length){const p=(t.x+t.y)/2,h=u[u.length-1],m=(h.x+h.y)/2,x=(s.x+s.y)/2;if(p<=x)e=0;else if(p>=m)e=u.length,o=p/m>8;else{let d,y=x;for(let g=1;g<=u.length;g++){if(d=(u[g-1].x+u[g-1].y)/2,p<=d){p===d?e=g:"down"===i?(e=g-1,o=p/y>8):e="up"===i||p-y>d-p||p/y>2?g:g-1;break}y=d}}const l=0===e?s:u[e-1];return o&&Math.min(l.x,l.y)*(0,D.c9)(n.spatialReference)>19567&&(o=!1),{pyramidLevel:e,pyramidResolution:new b.Z({x:l.x,y:l.y,spatialReference:n.spatialReference}),excessiveReading:o}}const f=Math.log(t.x/s.x)/Math.LN2,c=Math.log(t.y/s.y)/Math.LN2,a=n.storageInfo.maximumPyramidLevel||0;e="down"===i?Math.floor(Math.min(f,c)):"up"===i?Math.ceil(Math.max(f,c)):Math.round((f+c)/2),e<0?e=0:e>a&&(o=e>a+3,e=a);const _=2**e;return{pyramidLevel:e,pyramidResolution:new b.Z({x:_*n.nativePixelSize.x,y:_*n.nativePixelSize.y,spatialReference:n.spatialReference}),excessiveReading:o}}function Wt(t,n,i=512,r=!0){const{extent:s,spatialReference:e,pixelSize:o}=t,u=H(new b.Z({x:o.x,y:o.y,spatialReference:e}),n,s);if(null==u)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const f=(u.x+u.y)/2,c=(0,D.c9)(n),a=f*c*96*39.37,_=n.isGeographic?256/i*295828763.7958547:256/i*591657527.591555;let p="vector-magdir"===t.dataType||"vector-uv"===t.dataType;const h=q(s,n),m=Math.min(Math.ceil(Math.log(Math.min(t.width,t.height)/32)/Math.LN2),Math.ceil(Math.log(_/2/a)/Math.LN2));if(!p&&r&&(n.isGeographic||n.isWebMercator)&&(p=h.xmin*h.xmax<0,!p&&m<3)){const C=v(n);if((0,P.pC)(C)){const O=2**m*f*i,L=Math.ceil(C/O);p=1===L||2===L&&C/2-h.xmax<O}}let x,l=a;const d=1.001,y=Math.min(2,Math.max(1.414,t.storageInfo?.pyramidScalingFactor||2));if(p){l=_;const C=n.isGeographic?1341104507446289e-21:.29858214164761665,O=C*(96*c*39.37);x=H(new b.Z({x:C,y:C,spatialReference:{wkid:n.isGeographic?4326:3857}}),e,h),x.x*=l/O,x.y*=l/O}else{x={x:o.x,y:o.y};let C=0;for(;l<_*(d/2)&&C<m;)C++,l*=y,x.x*=y,x.y*=y;Math.max(l,_)/Math.min(l,_)<=d&&(l=_)}const g=[l],M=[{x:x.x,y:x.y}],w=Math.min(70.5310735,a)/d;for(;l>=w;)l/=y,x.x/=y,x.y/=y,g.push(l),M.push({x:x.x,y:x.y});return{projectedPixelSize:u,scales:g,srcResolutions:M,isCustomTilingScheme:!p}}}}]);
//# sourceMappingURL=3110.b1b19e28da17bf25.js.map