import{a as T}from"./chunk-WPAM5E2U.js";import{Ac as de,Bc as ce,C as K,D as I,Db as te,F as u,Fb as ne,Lb as ie,Nb as oe,i as z,ib as J,kb as X,mc as re,nc as ae,nd as he,ob as Y,od as fe,qc as le,rc as se,sc as ge,tb as ee,tc as pe,yc as ue,zc as me}from"./chunk-LAD3HRCK.js";import{$b as h,Ab as N,Bb as W,Cb as q,Db as Q,Eb as a,Fb as o,Gb as c,Kb as C,Nb as _,Ob as p,Vb as v,Wa as s,Wb as U,ac as E,ba as B,bc as Z,cb as V,dc as O,ec as b,fc as A,gb as P,ha as M,hc as G,lb as D,ma as m,na as d,nb as L,ob as k,qa as S,qc as j,wc as R,xb as f,xc as w,yb as H,zb as $}from"./chunk-BPFPFXGP.js";var _e=["rangeAutocomplete"],xe=["rangeTemplate"],Me=["filterInput"];function Ce(r,l){if(r&1&&(a(0,"div",14),h(1),o()),r&2){let i=p(2);s(),E(i.rangeMessage)}}function ve(r,l){if(r&1){let i=C();a(0,"forge-list-item")(1,"forge-icon-button",16),_("click",function(){let t=m(i).$implicit,e=p(2);return d(e.onDeleteRangeOption(t))}),c(2,"forge-icon",17),o(),h(3),o()}if(r&2){let i=l.$implicit;s(3),Z(" ",i.label," ")}}function Re(r,l){if(r&1){let i=C();a(0,"div",6)(1,"div",7)(2,"span",8),h(3,"Enter a search range"),o(),a(4,"div",9)(5,"forge-text-field")(6,"input",10),A("ngModelChange",function(t){m(i);let e=p();return b(e.rangeMin,t)||(e.rangeMin=t),d(t)}),o()(),a(7,"span"),h(8,"to"),o(),a(9,"forge-text-field")(10,"input",11),A("ngModelChange",function(t){m(i);let e=p();return b(e.rangeMax,t)||(e.rangeMax=t),d(t)}),o()(),a(11,"forge-icon-button",12),_("click",function(){m(i);let t=p();return d(t.onAddRangeOption())}),c(12,"forge-icon",13),o()(),H(13,Ce,2,1,"div",14),o(),a(14,"forge-list",15),W(15,ve,4,1,"forge-list-item",null,N),o(),c(17,"forge-divider"),o()}if(r&2){let i=p();s(6),O("ngModel",i.rangeMin),f("maxlength",i.maxlength()),s(4),O("ngModel",i.rangeMax),f("maxlength",i.maxlength()),s(3),$(i.rangeMessage?13:-1),s(2),q(i.rangeOptions)}}var Le=(()=>{let l=class l{constructor(){this.ngZone=M(k),this.viewContainerRef=M(V),this.destroyRef=M(S),this.autocompleteRef=w("rangeAutocomplete"),this.rangeTemplateRef=w("rangeTemplate"),this.filterInputRef=w("filterInput"),this.optionFilter=R(),this.valueChange=new L,this.label=R(),this.maxlength=R(null),this.rangeOptions=[],this.elementId=T.uniqueId(),this.filter="",this.onChange=n=>{},this.onTouched=()=>{},this.onFilter=n=>(this.filter=n,new Promise((t,e)=>{let g=this.optionFilter();g&&g(this.filter).pipe(ne(this.destroyRef)).subscribe({next:x=>{let F=[];x.forEach(y=>u(y.value)?this.rangeOptions.push(y):F.push(y)),t(F)},error:()=>e()})})),this.optionHeaderBuilder=()=>(this.ngZone.run(()=>{this.rangeMin=void 0,this.rangeMax=void 0,this.rangeMessage=void 0}),this.rangeRef?.rootNodes[0]),this.selectedTextBuilder=n=>{if(this.autocompleteRef()?.nativeElement.open&&this.filter.length)return this.filter;let t=n?.length,e=this.rangeOptions?.length;return t>0&&e>0?`${t} option(s) selected, ${e} range(s)`:t>0?`${t} option(s) selected`:e>0?`${e} range(s)`:""}}autocompleteBlur(){this.onTouched()}set value(n){this.writeValue(n)}writeValue(n){let t=[];this.rangeOptions.length=0,u(n)&&n.forEach(e=>{if(u(e)||u(e.value)){let g=K(e.value)?e.value:e;this.rangeOptions.push({label:`${g[0]} to ${g[1]}`,value:g})}else t.push(e)}),window.requestAnimationFrame(()=>{this.autocompleteRef().nativeElement.value=t})}ngAfterViewInit(){window.requestAnimationFrame(()=>{this.rangeRef=this.viewContainerRef.createEmbeddedView(this.rangeTemplateRef()),this.rangeRef.rootNodes[0].remove()})}ngOnDestroy(){this.rangeRef?.destroy()}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}onAutocompleteChange(){this.emitChangeEvents()}onAddRangeOption(){if(!this.rangeMin?.length&&!this.rangeMax?.length){this.rangeMessage="A min or max value is required.";return}if(this.rangeMin=I(this.rangeMin)?this.rangeMin?.trim():this.rangeMin,this.rangeMax=I(this.rangeMax)?this.rangeMax?.trim():this.rangeMax,this.rangeMin?.length&&this.rangeMax?.length){let e=T.comparator(this.rangeMin,this.rangeMax,"string");if(e===0){this.rangeMessage="Min and Max cannot be the same value.";return}if(e===1){this.rangeMessage="Min value cannot be greater than Max value.";return}}if(this.rangeOptions.findIndex(e=>e.value[0]===this.rangeMin&&e.value[1]===this.rangeMax)!==-1){this.rangeMessage="This range is already defined.";return}this.rangeMessage=void 0;let t=this.rangeMin?.length&&this.rangeMax?.length?`${this.rangeMin} to ${this.rangeMax}`:this.rangeMin?.length?`Greater than ${this.rangeMin}`:`Less than ${this.rangeMax}`;this.rangeOptions.push({label:t,value:[this.rangeMin,this.rangeMax]}),this.emitChangeEvents(),this.rangeMin=void 0,this.rangeMax=void 0,this.filterInputRef().nativeElement.value=this.selectedTextBuilder(this.autocompleteRef()?.nativeElement.value)}onDeleteRangeOption(n){(this.rangeRef?.rootNodes[0]).focus();let t=this.rangeOptions.findIndex(e=>e.value===n.value);t!==-1&&(this.rangeOptions.splice(t,1),this.filterInputRef().nativeElement.value=this.selectedTextBuilder(this.autocompleteRef()?.nativeElement.value),this.emitChangeEvents())}emitChangeEvents(){let n=[];u(this.rangeOptions)&&this.rangeOptions.length&&n.push(...this.rangeOptions.map(e=>e.value));let t=this.autocompleteRef()?.nativeElement.value;u(t)&&t.length&&n.push(...t),this.onChange(n),this.valueChange.emit(n)}};l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=P({type:l,selectors:[["app-autocomplete-range"]],viewQuery:function(t,e){t&1&&(v(e.autocompleteRef,_e,5),v(e.rangeTemplateRef,xe,5),v(e.filterInputRef,Me,5)),t&2&&U(3)},hostBindings:function(t,e){t&1&&_("focusout",function(x){return e.autocompleteBlur(x)})},inputs:{optionFilter:[1,"optionFilter"],value:"value",label:[1,"label"],maxlength:[1,"maxlength"]},outputs:{valueChange:"valueChange"},features:[G([{provide:J,useExisting:B(()=>l),multi:!0}])],decls:10,vars:6,consts:[["rangeAutocomplete",""],["filterInput",""],["rangeTemplate",""],["multiple","",3,"forge-autocomplete-change","filter","selectedTextBuilder","popupHeaderBuilder"],["type","text"],["slot","end","name","arrow_drop_down",1,"forge-dropdown-icon"],["tabindex","-1",1,"range"],[1,"range__input"],[1,"forge-typography--subheading2","range__input__header"],[1,"range__input__body"],["type","text","placeholder","min",3,"ngModelChange","ngModel"],["type","text","placeholder","max",3,"ngModelChange","ngModel"],["aria-label","Add search range",3,"click"],["name","add"],[1,"forge-typography--label1"],[1,"range__options"],["slot","start","aria-label","Delete search range",3,"click"],["name","delete"]],template:function(t,e){if(t&1){let g=C();a(0,"forge-autocomplete",3,0),_("forge-autocomplete-change",function(){return m(g),d(e.onAutocompleteChange())}),a(2,"forge-text-field"),c(3,"input",4,1),a(5,"label"),h(6),o(),c(7,"forge-icon",5),o()(),D(8,Re,18,5,"ng-template",null,2,j)}t&2&&(Q("filter",e.onFilter)("selectedTextBuilder",e.selectedTextBuilder)("popupHeaderBuilder",e.optionHeaderBuilder),s(3),f("id",e.elementId),s(2),f("for",e.elementId),s(),E(e.label()))},dependencies:[z,te,X,Y,ee,oe,ie,ae,re,pe,ge,le,se,de,me,ce,ue,fe,he],styles:[`[_nghost-%COMP%]{display:block}.range[_ngcontent-%COMP%]{outline:none}.range__input[_ngcontent-%COMP%]{padding-left:16px;padding-bottom:8px;--forge-field-height: 2.5rem}.range__input__header[_ngcontent-%COMP%]{font-size:14px}.range__input__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr auto;column-gap:8px;align-items:center}.range__input[_ngcontent-%COMP%]   .forge-typography--label1[_ngcontent-%COMP%]{color:var(--forge-theme-error)}.range__options[_ngcontent-%COMP%]{--forge-list-item-padding: 0 16px 0 4px;--forge-list-item-leading-margin-right: 4px}






/*# sourceMappingURL=autocomplete-range.component-MZKIMPW7.css.map */`]});let r=l;return r})();export{Le as a};
//# sourceMappingURL=chunk-BMCF6H6E.js.map
