import{a as Lr,f as Ee,g as Uo,p as Zn}from"./chunk-SWINKNK2.js";import{f as Re,g as ot}from"./chunk-PSWJZLWW.js";import{Bb as Xt,Cc as No,Dc as Io,E as at,H as yt,L as _o,Ob as Co,Pb as Mo,Sc as Ro,Tc as Eo,Uc as Oo,dd as $o,ed as Po,fd as Fo,gd as zo,j as Ie,kb as bo,pb as wo,pd as Ho,qd as Lo,uc as ko,vc as Ao,wc as So,xc as Do,zb as To}from"./chunk-T54VJELX.js";import{$b as Ne,Ab as pt,Bb as fo,C as Ut,Eb as Hr,F as lo,Fb as ho,Gb as po,Hb as mo,Ib as Q,J as $r,Jb as j,Kb as Qt,Rb as De,Sb as Ke,_a as et,_b as le,ba as co,bc as nt,cc as Wn,d as uo,fc as go,gc as xo,ha as Pr,hb as Se,hc as yo,ic as vo,ub as ue,xa as Fr,yb as zr}from"./chunk-5VCAQWVT.js";import{a as Lt,b as Gt}from"./chunk-NCBA65HR.js";var vt="app-chart",Fl={CHART_PREFIX:vt,CHART_ROOT:`${vt}__root`,CHART_YAXIS:`${vt}__yaxis`,CHART_XAXIS:`${vt}__xaxis`,CHART_NODE:`${vt}__node`,CHART_TEXT:`${vt}__text`,CHART_LEGEND:`${vt}__legend`,CHART_METER:`${vt}__meter`,CHART_POPOVER:`${vt}__popover`,CHART_CLIP:`${vt}__clip`,CHART_TEXT_LABEL:`${vt}__text-label`,CHART_TEXT_VALUE:`${vt}__text-value`,LEGEND_TEXT:`${vt}__legend-text`,LEGEND_TEXT_LABEL:`${vt}__legend-text-label`,LEGEND_TEXT_VALUE:`${vt}__legend-text-value`},zl={TRANSITION_DURATION:500},Hl={FONT_FAMILY:"Roboto",FONT_SIZE_SMALL:"10px",FONT_SIZE:"16px"},Ll={amber600:"#ffb300",cyan400:"#26c6da",purple300:"#ba68c8",indigoA200:"#536dfe",green400:"#66bb6a",deepOrangeA200:"#ff6e40",amberA200:"#ffd740",purple200:"#ce93d8",indigo200:"#9fa8da",lightBlue200:"#81d4fa",green200:"#a5d6a7",lime200:"#e6ee9c",amber200:"#ffe082",deepOrange200:"#ffab91",grey400:"#bdbdbd"},Ul={textHigh:"var(--forge-theme-text-high, rgba(0, 0, 0, 0.87))",textMedium:"var(--forge-theme-text-medium, rgba(0, 0, 0, 0.6))",textInverse:"var(--forge-theme-on-surface-inverse, #ffffff)",outline:"var(--forge-theme-outline, #e0e0e0)",outlineMedium:"var(--forge-theme-outline-medium, #757575)",surface:"var(--forge-theme-surface, #ffffff)",surfaceDim:"var(--forge-theme-surface-dim, #f5f5f5)"},_={classes:Fl,numbers:zl,strings:Hl,chartPalette:Ll,chartTheme:Ul};function ce(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gn(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fe(t){let e,r,n;t.length!==2?(e=ce,r=(s,l)=>ce(t(s),l),n=(s,l)=>t(s)-l):(e=t===ce||t===Gn?t:Xl,r=t,n=t);function a(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{let h=u+f>>>1;r(s[h],l)<0?u=h+1:f=h}while(u<f)}return u}function o(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{let h=u+f>>>1;r(s[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function i(s,l,u=0,f=s.length){let h=a(s,l,u,f-1);return h>u&&n(s[h-1],l)>-n(s[h],l)?h-1:h}return{left:a,center:i,right:o}}function Xl(){return 0}function Qn(t){return t===null?NaN:+t}var Xo=fe(ce),Yo=Xo.right,Yl=Xo.left,Vl=fe(Qn).center,jn=Yo;function he(t,e){let r,n;if(e===void 0)for(let a of t)a!=null&&(r===void 0?a>=a&&(r=n=a):(r>a&&(r=a),n<a&&(n=a)));else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&(r===void 0?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)))}return[r,n]}var Oe=class extends Map{constructor(e,r=Wl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let[n,a]of e)this.set(n,a)}get(e){return super.get(Vo(this,e))}has(e){return super.has(Vo(this,e))}set(e,r){return super.set(ql(this,e),r)}delete(e){return super.delete(Bl(this,e))}};function Vo({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):r}function ql({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Bl({_intern:t,_key:e},r){let n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Wl(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Zl=Math.sqrt(50),Gl=Math.sqrt(10),Ql=Math.sqrt(2);function Ur(t,e,r){let n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),o=n/Math.pow(10,a),i=o>=Zl?10:o>=Gl?5:o>=Ql?2:1,s,l,u;return a<0?(u=Math.pow(10,-a)/i,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,a)*i,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=r&&r<2?Ur(t,e,r*2):[s,l,u]}function Xr(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[a,o,i]=n?Ur(e,t,r):Ur(t,e,r);if(!(o>=a))return[];let s=o-a+1,l=new Array(s);if(n)if(i<0)for(let u=0;u<s;++u)l[u]=(o-u)/-i;else for(let u=0;u<s;++u)l[u]=(o-u)*i;else if(i<0)for(let u=0;u<s;++u)l[u]=(a+u)/-i;else for(let u=0;u<s;++u)l[u]=(a+u)*i;return l}function Je(t,e,r){return e=+e,t=+t,r=+r,Ur(t,e,r)[2]}function $e(t,e,r){e=+e,t=+t,r=+r;let n=e<t,a=n?Je(e,t,r):Je(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function Yr(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(a);++n<a;)o[n]=t+n*r;return o}function qo(t){return t}var Vr=1,Kn=2,Jn=3,tr=4,Bo=1e-6;function jl(t){return"translate("+t+",0)"}function Kl(t){return"translate(0,"+t+")"}function Jl(t){return e=>+t(e)}function tc(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function ec(){return!this.__axis}function ta(t,e){var r=[],n=null,a=null,o=6,i=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Vr||t===tr?-1:1,f=t===tr||t===Kn?"x":"y",h=t===Vr||t===Jn?jl:Kl;function c(p){var x=n??(e.ticks?e.ticks.apply(e,r):e.domain()),v=a??(e.tickFormat?e.tickFormat.apply(e,r):qo),m=Math.max(o,0)+s,d=e.range(),M=+d[0]+l,S=+d[d.length-1]+l,b=(e.bandwidth?tc:Jl)(e.copy(),l),A=p.selection?p.selection():p,C=A.selectAll(".domain").data([null]),F=A.selectAll(".tick").data(x,e).order(),E=F.exit(),I=F.enter().append("g").attr("class","tick"),O=F.select("line"),y=F.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(I),O=O.merge(I.append("line").attr("stroke","currentColor").attr(f+"2",u*o)),y=y.merge(I.append("text").attr("fill","currentColor").attr(f,u*m).attr("dy",t===Vr?"0em":t===Jn?"0.71em":"0.32em")),p!==A&&(C=C.transition(p),F=F.transition(p),O=O.transition(p),y=y.transition(p),E=E.transition(p).attr("opacity",Bo).attr("transform",function(N){return isFinite(N=b(N))?h(N+l):this.getAttribute("transform")}),I.attr("opacity",Bo).attr("transform",function(N){var w=this.parentNode.__axis;return h((w&&isFinite(w=w(N))?w:b(N))+l)})),E.remove(),C.attr("d",t===tr||t===Kn?i?"M"+u*i+","+M+"H"+l+"V"+S+"H"+u*i:"M"+l+","+M+"V"+S:i?"M"+M+","+u*i+"V"+l+"H"+S+"V"+u*i:"M"+M+","+l+"H"+S),F.attr("opacity",1).attr("transform",function(N){return h(b(N)+l)}),O.attr(f+"2",u*o),y.attr(f,u*m).text(v),A.filter(ec).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Kn?"start":t===tr?"end":"middle"),A.each(function(){this.__axis=b})}return c.scale=function(p){return arguments.length?(e=p,c):e},c.ticks=function(){return r=Array.from(arguments),c},c.tickArguments=function(p){return arguments.length?(r=p==null?[]:Array.from(p),c):r.slice()},c.tickValues=function(p){return arguments.length?(n=p==null?null:Array.from(p),c):n&&n.slice()},c.tickFormat=function(p){return arguments.length?(a=p,c):a},c.tickSize=function(p){return arguments.length?(o=i=+p,c):o},c.tickSizeInner=function(p){return arguments.length?(o=+p,c):o},c.tickSizeOuter=function(p){return arguments.length?(i=+p,c):i},c.tickPadding=function(p){return arguments.length?(s=+p,c):s},c.offset=function(p){return arguments.length?(l=+p,c):l},c}function ea(t){return ta(Vr,t)}function er(t){return ta(Jn,t)}function rr(t){return ta(tr,t)}var rc={value:()=>{}};function Zo(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new qr(r)}function qr(t){this._=t}function nc(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}qr.prototype=Zo.prototype={constructor:qr,on:function(t,e){var r=this._,n=nc(t+"",r),a,o=-1,i=n.length;if(arguments.length<2){for(;++o<i;)if((a=(t=n[o]).type)&&(a=ac(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<i;)if(a=(t=n[o]).type)r[a]=Wo(r[a],t.name,e);else if(e==null)for(a in r)r[a]=Wo(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new qr(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,o;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,a=o.length;n<a;++n)o[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,o=n.length;a<o;++a)n[a].value.apply(e,r)}};function ac(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function Wo(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=rc,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var nr=Zo;var Br="http://www.w3.org/1999/xhtml",ra={svg:"http://www.w3.org/2000/svg",xhtml:Br,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),ra.hasOwnProperty(e)?{space:ra[e],local:t}:t}function oc(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Br&&e.documentElement.namespaceURI===Br?e.createElement(t):e.createElementNS(r,t)}}function ic(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Wr(t){var e=Yt(t);return(e.local?ic:oc)(e)}function sc(){}function pe(t){return t==null?sc:function(){return this.querySelector(t)}}function Go(t){typeof t!="function"&&(t=pe(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=new Array(i),l,u,f=0;f<i;++f)(l=o[f])&&(u=t.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new rt(n,this._parents)}function na(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function uc(){return[]}function ar(t){return t==null?uc:function(){return this.querySelectorAll(t)}}function lc(t){return function(){return na(t.apply(this,arguments))}}function Qo(t){typeof t=="function"?t=lc(t):t=ar(t);for(var e=this._groups,r=e.length,n=[],a=[],o=0;o<r;++o)for(var i=e[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&(n.push(t.call(l,l.__data__,u,i)),a.push(l));return new rt(n,a)}function or(t){return function(){return this.matches(t)}}function Zr(t){return function(e){return e.matches(t)}}var cc=Array.prototype.find;function fc(t){return function(){return cc.call(this.children,t)}}function hc(){return this.firstElementChild}function jo(t){return this.select(t==null?hc:fc(typeof t=="function"?t:Zr(t)))}var pc=Array.prototype.filter;function mc(){return Array.from(this.children)}function dc(t){return function(){return pc.call(this.children,t)}}function Ko(t){return this.selectAll(t==null?mc:dc(typeof t=="function"?t:Zr(t)))}function Jo(t){typeof t!="function"&&(t=or(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],l,u=0;u<i;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new rt(n,this._parents)}function Gr(t){return new Array(t.length)}function ti(){return new rt(this._enter||this._groups.map(Gr),this._parents)}function ir(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ir.prototype={constructor:ir,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ei(t){return function(){return t}}function gc(t,e,r,n,a,o){for(var i=0,s,l=e.length,u=o.length;i<u;++i)(s=e[i])?(s.__data__=o[i],n[i]=s):r[i]=new ir(t,o[i]);for(;i<l;++i)(s=e[i])&&(a[i]=s)}function xc(t,e,r,n,a,o,i){var s,l,u=new Map,f=e.length,h=o.length,c=new Array(f),p;for(s=0;s<f;++s)(l=e[s])&&(c[s]=p=i.call(l,l.__data__,s,e)+"",u.has(p)?a[s]=l:u.set(p,l));for(s=0;s<h;++s)p=i.call(t,o[s],s,o)+"",(l=u.get(p))?(n[s]=l,l.__data__=o[s],u.delete(p)):r[s]=new ir(t,o[s]);for(s=0;s<f;++s)(l=e[s])&&u.get(c[s])===l&&(a[s]=l)}function yc(t){return t.__data__}function ri(t,e){if(!arguments.length)return Array.from(this,yc);var r=e?xc:gc,n=this._parents,a=this._groups;typeof t!="function"&&(t=ei(t));for(var o=a.length,i=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var f=n[u],h=a[u],c=h.length,p=vc(t.call(f,f&&f.__data__,u,n)),x=p.length,v=s[u]=new Array(x),m=i[u]=new Array(x),d=l[u]=new Array(c);r(f,h,v,m,d,p,e);for(var M=0,S=0,b,A;M<x;++M)if(b=v[M]){for(M>=S&&(S=M+1);!(A=m[S])&&++S<x;);b._next=A||null}}return i=new rt(i,n),i._enter=s,i._exit=l,i}function vc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ni(){return new rt(this._exit||this._groups.map(Gr),this._parents)}function ai(t,e,r){var n=this.enter(),a=this,o=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?o.remove():r(o),n&&a?n.merge(a).order():a}function oi(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,o=n.length,i=Math.min(a,o),s=new Array(a),l=0;l<i;++l)for(var u=r[l],f=n[l],h=u.length,c=s[l]=new Array(h),p,x=0;x<h;++x)(p=u[x]||f[x])&&(c[x]=p);for(;l<a;++l)s[l]=r[l];return new rt(s,this._parents)}function ii(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,o=n[a],i;--a>=0;)(i=n[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function si(t){t||(t=_c);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o){for(var i=r[o],s=i.length,l=a[o]=new Array(s),u,f=0;f<s;++f)(u=i[f])&&(l[f]=u);l.sort(e)}return new rt(a,this._parents).order()}function _c(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ui(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function li(){return Array.from(this)}function ci(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length;a<o;++a){var i=n[a];if(i)return i}return null}function fi(){let t=0;for(let e of this)++t;return t}function hi(){return!this.node()}function pi(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],o=0,i=a.length,s;o<i;++o)(s=a[o])&&t.call(s,s.__data__,o,a);return this}function bc(t){return function(){this.removeAttribute(t)}}function wc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tc(t,e){return function(){this.setAttribute(t,e)}}function Cc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Mc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function kc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function mi(t,e){var r=Yt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?wc:bc:typeof e=="function"?r.local?kc:Mc:r.local?Cc:Tc)(r,e))}function Qr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ac(t){return function(){this.style.removeProperty(t)}}function Sc(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Dc(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function di(t,e,r){return arguments.length>1?this.each((e==null?Ac:typeof e=="function"?Dc:Sc)(t,e,r??"")):jt(this.node(),t)}function jt(t,e){return t.style.getPropertyValue(e)||Qr(t).getComputedStyle(t,null).getPropertyValue(e)}function Nc(t){return function(){delete this[t]}}function Ic(t,e){return function(){this[t]=e}}function Rc(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function gi(t,e){return arguments.length>1?this.each((e==null?Nc:typeof e=="function"?Rc:Ic)(t,e)):this.node()[t]}function xi(t){return t.trim().split(/^|\s+/)}function aa(t){return t.classList||new yi(t)}function yi(t){this._node=t,this._names=xi(t.getAttribute("class")||"")}yi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function vi(t,e){for(var r=aa(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function _i(t,e){for(var r=aa(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function Ec(t){return function(){vi(this,t)}}function Oc(t){return function(){_i(this,t)}}function $c(t,e){return function(){(e.apply(this,arguments)?vi:_i)(this,t)}}function bi(t,e){var r=xi(t+"");if(arguments.length<2){for(var n=aa(this.node()),a=-1,o=r.length;++a<o;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?$c:e?Ec:Oc)(r,e))}function Pc(){this.textContent=""}function Fc(t){return function(){this.textContent=t}}function zc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function wi(t){return arguments.length?this.each(t==null?Pc:(typeof t=="function"?zc:Fc)(t)):this.node().textContent}function Hc(){this.innerHTML=""}function Lc(t){return function(){this.innerHTML=t}}function Uc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ti(t){return arguments.length?this.each(t==null?Hc:(typeof t=="function"?Uc:Lc)(t)):this.node().innerHTML}function Xc(){this.nextSibling&&this.parentNode.appendChild(this)}function Ci(){return this.each(Xc)}function Yc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Mi(){return this.each(Yc)}function ki(t){var e=typeof t=="function"?t:Wr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Vc(){return null}function Ai(t,e){var r=typeof t=="function"?t:Wr(t),n=e==null?Vc:typeof e=="function"?e:pe(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function qc(){var t=this.parentNode;t&&t.removeChild(this)}function Si(){return this.each(qc)}function Bc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Di(t){return this.select(t?Wc:Bc)}function Ni(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Zc(t){return function(e){t.call(this,e,this.__data__)}}function Gc(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Qc(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,o;r<a;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++n]=o;++n?e.length=n:delete this.__on}}}function jc(t,e,r){return function(){var n=this.__on,a,o=Zc(e);if(n){for(var i=0,s=n.length;i<s;++i)if((a=n[i]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=r),a.value=e;return}}this.addEventListener(t.type,o,r),a={type:t.type,name:t.name,value:e,listener:o,options:r},n?n.push(a):this.__on=[a]}}function Ii(t,e,r){var n=Gc(t+""),a,o=n.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(a=0,f=s[l];a<o;++a)if((i=n[a]).type===f.type&&i.name===f.name)return f.value}return}for(s=e?jc:Qc,a=0;a<o;++a)this.each(s(n[a],e,r));return this}function Ri(t,e,r){var n=Qr(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Kc(t,e){return function(){return Ri(this,t,e)}}function Jc(t,e){return function(){return Ri(this,t,e.apply(this,arguments))}}function Ei(t,e){return this.each((typeof e=="function"?Jc:Kc)(t,e))}function*Oi(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length,i;a<o;++a)(i=n[a])&&(yield i)}var oa=[null];function rt(t,e){this._groups=t,this._parents=e}function $i(){return new rt([[document.documentElement]],oa)}function tf(){return this}rt.prototype=$i.prototype={constructor:rt,select:Go,selectAll:Qo,selectChild:jo,selectChildren:Ko,filter:Jo,data:ri,enter:ti,exit:ni,join:ai,merge:oi,selection:tf,order:ii,sort:si,call:ui,nodes:li,node:ci,size:fi,empty:hi,each:pi,attr:mi,style:di,property:gi,classed:bi,text:wi,html:Ti,raise:Ci,lower:Mi,append:ki,insert:Ai,remove:Si,clone:Di,datum:Ni,on:Ii,dispatch:Ei,[Symbol.iterator]:Oi};var Vt=$i;function W(t){return typeof t=="string"?new rt([[document.querySelector(t)]],[document.documentElement]):new rt([[t]],oa)}function Pi(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qt(t,e){if(t=Pi(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}var jr={capture:!0,passive:!1};function Kr(t){t.preventDefault(),t.stopImmediatePropagation()}function ia(t){var e=t.document.documentElement,r=W(t).on("dragstart.drag",Kr,jr);"onselectstart"in e?r.on("selectstart.drag",Kr,jr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function sa(t,e){var r=t.document.documentElement,n=W(t).on("dragstart.drag",null);e&&(n.on("click.drag",Kr,jr),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function Jr(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ua(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function lr(){}var sr=.7,rn=1/sr,Pe="\\s*([+-]?\\d+)\\s*",ur="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ef=/^#([0-9a-f]{3,8})$/,rf=new RegExp(`^rgb\\(${Pe},${Pe},${Pe}\\)$`),nf=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),af=new RegExp(`^rgba\\(${Pe},${Pe},${Pe},${ur}\\)$`),of=new RegExp(`^rgba\\(${$t},${$t},${$t},${ur}\\)$`),sf=new RegExp(`^hsl\\(${ur},${$t},${$t}\\)$`),uf=new RegExp(`^hsla\\(${ur},${$t},${$t},${ur}\\)$`),Fi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jr(lr,Dt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zi,formatHex:zi,formatHex8:lf,formatHsl:cf,formatRgb:Hi,toString:Hi});function zi(){return this.rgb().formatHex()}function lf(){return this.rgb().formatHex8()}function cf(){return qi(this).formatHsl()}function Hi(){return this.rgb().formatRgb()}function Dt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=ef.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Li(e):r===3?new Ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?tn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?tn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=rf.exec(t))?new Ct(e[1],e[2],e[3],1):(e=nf.exec(t))?new Ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=af.exec(t))?tn(e[1],e[2],e[3],e[4]):(e=of.exec(t))?tn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=sf.exec(t))?Yi(e[1],e[2]/100,e[3]/100,1):(e=uf.exec(t))?Yi(e[1],e[2]/100,e[3]/100,e[4]):Fi.hasOwnProperty(t)?Li(Fi[t]):t==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Li(t){return new Ct(t>>16&255,t>>8&255,t&255,1)}function tn(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ct(t,e,r,n)}function ff(t){return t instanceof lr||(t=Dt(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function Fe(t,e,r,n){return arguments.length===1?ff(t):new Ct(t,e,r,n??1)}function Ct(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Jr(Ct,Fe,ua(lr,{brighter(t){return t=t==null?rn:Math.pow(rn,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?sr:Math.pow(sr,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ct(de(this.r),de(this.g),de(this.b),nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ui,formatHex:Ui,formatHex8:hf,formatRgb:Xi,toString:Xi}));function Ui(){return`#${me(this.r)}${me(this.g)}${me(this.b)}`}function hf(){return`#${me(this.r)}${me(this.g)}${me(this.b)}${me((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xi(){let t=nn(this.opacity);return`${t===1?"rgb(":"rgba("}${de(this.r)}, ${de(this.g)}, ${de(this.b)}${t===1?")":`, ${t})`}`}function nn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function de(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function me(t){return t=de(t),(t<16?"0":"")+t.toString(16)}function Yi(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new St(t,e,r,n)}function qi(t){if(t instanceof St)return new St(t.h,t.s,t.l,t.opacity);if(t instanceof lr||(t=Dt(t)),!t)return new St;if(t instanceof St)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),o=Math.max(e,r,n),i=NaN,s=o-a,l=(o+a)/2;return s?(e===o?i=(r-n)/s+(r<n)*6:r===o?i=(n-e)/s+2:i=(e-r)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new St(i,s,l,t.opacity)}function Bi(t,e,r,n){return arguments.length===1?qi(t):new St(t,e,r,n??1)}function St(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Jr(St,Bi,ua(lr,{brighter(t){return t=t==null?rn:Math.pow(rn,t),new St(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?sr:Math.pow(sr,t),new St(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Ct(la(t>=240?t-240:t+120,a,n),la(t,a,n),la(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new St(Vi(this.h),en(this.s),en(this.l),nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=nn(this.opacity);return`${t===1?"hsl(":"hsla("}${Vi(this.h)}, ${en(this.s)*100}%, ${en(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Vi(t){return t=(t||0)%360,t<0?t+360:t}function en(t){return Math.max(0,Math.min(1,t||0))}function la(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function ca(t,e,r,n,a){var o=t*t,i=o*t;return((1-3*t+3*o-i)*e+(4-6*o+3*i)*r+(1+3*t+3*o-3*i)*n+i*a)/6}function Wi(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),a=t[n],o=t[n+1],i=n>0?t[n-1]:2*a-o,s=n<e-1?t[n+2]:2*o-a;return ca((r-n/e)*e,i,a,o,s)}}function Zi(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),a=t[(n+e-1)%e],o=t[n%e],i=t[(n+1)%e],s=t[(n+2)%e];return ca((r-n/e)*e,a,o,i,s)}}var cr=t=>()=>t;function pf(t,e){return function(r){return t+r*e}}function mf(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Gi(t){return(t=+t)==1?an:function(e,r){return r-e?mf(e,r,t):cr(isNaN(e)?r:e)}}function an(t,e){var r=e-t;return r?pf(t,r):cr(isNaN(t)?e:t)}var ge=function t(e){var r=Gi(e);function n(a,o){var i=r((a=Fe(a)).r,(o=Fe(o)).r),s=r(a.g,o.g),l=r(a.b,o.b),u=an(a.opacity,o.opacity);return function(f){return a.r=i(f),a.g=s(f),a.b=l(f),a.opacity=u(f),a+""}}return n.gamma=t,n}(1);function Qi(t){return function(e){var r=e.length,n=new Array(r),a=new Array(r),o=new Array(r),i,s;for(i=0;i<r;++i)s=Fe(e[i]),n[i]=s.r||0,a[i]=s.g||0,o[i]=s.b||0;return n=t(n),a=t(a),o=t(o),s.opacity=1,function(l){return s.r=n(l),s.g=a(l),s.b=o(l),s+""}}}var df=Qi(Wi),gf=Qi(Zi);function ji(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(o){for(a=0;a<r;++a)n[a]=t[a]*(1-o)+e[a]*o;return n}}function Ki(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ji(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),o=new Array(r),i;for(i=0;i<n;++i)a[i]=Bt(t[i],e[i]);for(;i<r;++i)o[i]=e[i];return function(s){for(i=0;i<n;++i)o[i]=a[i](s);return o}}function ts(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function lt(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function es(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Bt(t[a],e[a]):n[a]=e[a];return function(o){for(a in r)n[a]=r[a](o);return n}}var ha=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fa=new RegExp(ha.source,"g");function xf(t){return function(){return t}}function yf(t){return function(e){return t(e)+""}}function fr(t,e){var r=ha.lastIndex=fa.lastIndex=0,n,a,o,i=-1,s=[],l=[];for(t=t+"",e=e+"";(n=ha.exec(t))&&(a=fa.exec(e));)(o=a.index)>r&&(o=e.slice(r,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(a=a[0])?s[i]?s[i]+=a:s[++i]=a:(s[++i]=null,l.push({i,x:lt(n,a)})),r=fa.lastIndex;return r<e.length&&(o=e.slice(r),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?yf(l[0].x):xf(e):(e=l.length,function(u){for(var f=0,h;f<e;++f)s[(h=l[f]).i]=h.x(u);return s.join("")})}function Bt(t,e){var r=typeof e,n;return e==null||r==="boolean"?cr(e):(r==="number"?lt:r==="string"?(n=Dt(e))?(e=n,ge):fr:e instanceof Dt?ge:e instanceof Date?ts:Ki(e)?ji:Array.isArray(e)?Ji:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?es:lt)(t,e)}function pa(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var rs=180/Math.PI,on={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ma(t,e,r,n,a,o){var i,s,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),t*n<e*r&&(t=-t,e=-e,l=-l,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(e,t)*rs,skewX:Math.atan(l)*rs,scaleX:i,scaleY:s}}var sn;function ns(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?on:ma(e.a,e.b,e.c,e.d,e.e,e.f)}function as(t){return t==null?on:(sn||(sn=document.createElementNS("http://www.w3.org/2000/svg","g")),sn.setAttribute("transform",t),(t=sn.transform.baseVal.consolidate())?(t=t.matrix,ma(t.a,t.b,t.c,t.d,t.e,t.f)):on)}function os(t,e,r,n){function a(u){return u.length?u.pop()+" ":""}function o(u,f,h,c,p,x){if(u!==h||f!==c){var v=p.push("translate(",null,e,null,r);x.push({i:v-4,x:lt(u,h)},{i:v-2,x:lt(f,c)})}else(h||c)&&p.push("translate("+h+e+c+r)}function i(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(a(h)+"rotate(",null,n)-2,x:lt(u,f)})):f&&h.push(a(h)+"rotate("+f+n)}function s(u,f,h,c){u!==f?c.push({i:h.push(a(h)+"skewX(",null,n)-2,x:lt(u,f)}):f&&h.push(a(h)+"skewX("+f+n)}function l(u,f,h,c,p,x){if(u!==h||f!==c){var v=p.push(a(p)+"scale(",null,",",null,")");x.push({i:v-4,x:lt(u,h)},{i:v-2,x:lt(f,c)})}else(h!==1||c!==1)&&p.push(a(p)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,c),i(u.rotate,f.rotate,h,c),s(u.skewX,f.skewX,h,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(p){for(var x=-1,v=c.length,m;++x<v;)h[(m=c[x]).i]=m.x(p);return h.join("")}}}var da=os(ns,"px, ","px)","deg)"),ga=os(as,", ",")",")");var vf=1e-12;function is(t){return((t=Math.exp(t))+1/t)/2}function _f(t){return((t=Math.exp(t))-1/t)/2}function bf(t){return((t=Math.exp(2*t))-1)/(t+1)}var xa=function t(e,r,n){function a(o,i){var s=o[0],l=o[1],u=o[2],f=i[0],h=i[1],c=i[2],p=f-s,x=h-l,v=p*p+x*x,m,d;if(v<vf)d=Math.log(c/u)/e,m=function(F){return[s+F*p,l+F*x,u*Math.exp(e*F*d)]};else{var M=Math.sqrt(v),S=(c*c-u*u+n*v)/(2*u*r*M),b=(c*c-u*u-n*v)/(2*c*r*M),A=Math.log(Math.sqrt(S*S+1)-S),C=Math.log(Math.sqrt(b*b+1)-b);d=(C-A)/e,m=function(F){var E=F*d,I=is(A),O=u/(r*M)*(I*bf(e*E+A)-_f(A));return[s+O*p,l+O*x,u*I/is(e*E+A)]}}return m.duration=d*1e3*e/Math.SQRT2,m}return a.rho=function(o){var i=Math.max(.001,+o),s=i*i,l=s*s;return t(i,s,l)},a}(Math.SQRT2,2,4);var ze=0,pr=0,hr=0,us=1e3,un,mr,ln=0,xe=0,cn=0,dr=typeof performance=="object"&&performance.now?performance:Date,ls=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function xr(){return xe||(ls(wf),xe=dr.now()+cn)}function wf(){xe=0}function gr(){this._call=this._time=this._next=null}gr.prototype=fn.prototype={constructor:gr,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?xr():+r)+(e==null?0:+e),!this._next&&mr!==this&&(mr?mr._next=this:un=this,mr=this),this._call=t,this._time=r,ya()},stop:function(){this._call&&(this._call=null,this._time=1/0,ya())}};function fn(t,e,r){var n=new gr;return n.restart(t,e,r),n}function cs(){xr(),++ze;for(var t=un,e;t;)(e=xe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ze}function ss(){xe=(ln=dr.now())+cn,ze=pr=0;try{cs()}finally{ze=0,Cf(),xe=0}}function Tf(){var t=dr.now(),e=t-ln;e>us&&(cn-=e,ln=t)}function Cf(){for(var t,e=un,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:un=r);mr=t,ya(n)}function ya(t){if(!ze){pr&&(pr=clearTimeout(pr));var e=t-xe;e>24?(t<1/0&&(pr=setTimeout(ss,t-dr.now()-cn)),hr&&(hr=clearInterval(hr))):(hr||(ln=dr.now(),hr=setInterval(Tf,us)),ze=1,ls(ss))}}function hn(t,e,r){var n=new gr;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var Mf=nr("start","end","cancel","interrupt"),kf=[],ps=0,fs=1,mn=2,pn=3,hs=4,dn=5,yr=6;function Kt(t,e,r,n,a,o){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;Af(t,r,{name:e,index:n,group:a,on:Mf,tween:kf,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ps})}function vr(t,e){var r=it(t,e);if(r.state>ps)throw new Error("too late; already scheduled");return r}function ct(t,e){var r=it(t,e);if(r.state>pn)throw new Error("too late; already running");return r}function it(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Af(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=fn(o,0,r.time);function o(u){r.state=fs,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var f,h,c,p;if(r.state!==fs)return l();for(f in n)if(p=n[f],p.name===r.name){if(p.state===pn)return hn(i);p.state===hs?(p.state=yr,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete n[f]):+f<e&&(p.state=yr,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete n[f])}if(hn(function(){r.state===pn&&(r.state=hs,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=mn,r.on.call("start",t,t.__data__,r.index,r.group),r.state===mn){for(r.state=pn,a=new Array(c=r.tween.length),f=0,h=-1;f<c;++f)(p=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(a[++h]=p);a.length=h+1}}function s(u){for(var f=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=dn,1),h=-1,c=a.length;++h<c;)a[h].call(t,f);r.state===dn&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=yr,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function Jt(t,e){var r=t.__transition,n,a,o=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){o=!1;continue}a=n.state>mn&&n.state<dn,n.state=yr,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}o&&delete t.__transition}}function ms(t){return this.each(function(){Jt(this,t)})}function Sf(t,e){var r,n;return function(){var a=ct(this,t),o=a.tween;if(o!==r){n=r=o;for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function Df(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var o=ct(this,t),i=o.tween;if(i!==n){a=(n=i).slice();for(var s={name:e,value:r},l=0,u=a.length;l<u;++l)if(a[l].name===e){a[l]=s;break}l===u&&a.push(s)}o.tween=a}}function ds(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=it(this.node(),r).tween,a=0,o=n.length,i;a<o;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((e==null?Sf:Df)(r,t,e))}function He(t,e,r){var n=t._id;return t.each(function(){var a=ct(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return it(a,n).value[e]}}function gn(t,e){var r;return(typeof e=="number"?lt:e instanceof Dt?ge:(r=Dt(e))?(e=r,ge):fr)(t,e)}function Nf(t){return function(){this.removeAttribute(t)}}function If(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rf(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttribute(t);return i===a?null:i===n?o:o=e(n=i,r)}}function Ef(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttributeNS(t.space,t.local);return i===a?null:i===n?o:o=e(n=i,r)}}function Of(t,e,r){var n,a,o;return function(){var i,s=r(this),l;return s==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=s+"",i===l?null:i===n&&l===a?o:(a=l,o=e(n=i,s)))}}function $f(t,e,r){var n,a,o;return function(){var i,s=r(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=s+"",i===l?null:i===n&&l===a?o:(a=l,o=e(n=i,s)))}}function gs(t,e){var r=Yt(t),n=r==="transform"?ga:gn;return this.attrTween(t,typeof e=="function"?(r.local?$f:Of)(r,n,He(this,"attr."+t,e)):e==null?(r.local?If:Nf)(r):(r.local?Ef:Rf)(r,n,e))}function Pf(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Ff(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function zf(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&Ff(t,o)),r}return a._value=e,a}function Hf(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&Pf(t,o)),r}return a._value=e,a}function xs(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Yt(t);return this.tween(r,(n.local?zf:Hf)(n,e))}function Lf(t,e){return function(){vr(this,t).delay=+e.apply(this,arguments)}}function Uf(t,e){return e=+e,function(){vr(this,t).delay=e}}function ys(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Lf:Uf)(e,t)):it(this.node(),e).delay}function Xf(t,e){return function(){ct(this,t).duration=+e.apply(this,arguments)}}function Yf(t,e){return e=+e,function(){ct(this,t).duration=e}}function vs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Xf:Yf)(e,t)):it(this.node(),e).duration}function Vf(t,e){if(typeof e!="function")throw new Error;return function(){ct(this,t).ease=e}}function _s(t){var e=this._id;return arguments.length?this.each(Vf(e,t)):it(this.node(),e).ease}function qf(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;ct(this,t).ease=r}}function bs(t){if(typeof t!="function")throw new Error;return this.each(qf(this._id,t))}function ws(t){typeof t!="function"&&(t=or(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],l,u=0;u<i;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new _t(n,this._parents,this._name,this._id)}function Ts(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,o=Math.min(n,a),i=new Array(n),s=0;s<o;++s)for(var l=e[s],u=r[s],f=l.length,h=i[s]=new Array(f),c,p=0;p<f;++p)(c=l[p]||u[p])&&(h[p]=c);for(;s<n;++s)i[s]=e[s];return new _t(i,this._parents,this._name,this._id)}function Bf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Wf(t,e,r){var n,a,o=Bf(e)?vr:ct;return function(){var i=o(this,t),s=i.on;s!==n&&(a=(n=s).copy()).on(e,r),i.on=a}}function Cs(t,e){var r=this._id;return arguments.length<2?it(this.node(),r).on.on(t):this.each(Wf(r,t,e))}function Zf(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Ms(){return this.on("end.remove",Zf(this._id))}function ks(t){var e=this._name,r=this._id;typeof t!="function"&&(t=pe(t));for(var n=this._groups,a=n.length,o=new Array(a),i=0;i<a;++i)for(var s=n[i],l=s.length,u=o[i]=new Array(l),f,h,c=0;c<l;++c)(f=s[c])&&(h=t.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,Kt(u[c],e,r,c,u,it(f,r)));return new _t(o,this._parents,e,r)}function As(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ar(t));for(var n=this._groups,a=n.length,o=[],i=[],s=0;s<a;++s)for(var l=n[s],u=l.length,f,h=0;h<u;++h)if(f=l[h]){for(var c=t.call(f,f.__data__,h,l),p,x=it(f,r),v=0,m=c.length;v<m;++v)(p=c[v])&&Kt(p,e,r,v,c,x);o.push(c),i.push(f)}return new _t(o,i,e,r)}var Gf=Vt.prototype.constructor;function Ss(){return new Gf(this._groups,this._parents)}function Qf(t,e){var r,n,a;return function(){var o=jt(this,t),i=(this.style.removeProperty(t),jt(this,t));return o===i?null:o===r&&i===n?a:a=e(r=o,n=i)}}function Ds(t){return function(){this.style.removeProperty(t)}}function jf(t,e,r){var n,a=r+"",o;return function(){var i=jt(this,t);return i===a?null:i===n?o:o=e(n=i,r)}}function Kf(t,e,r){var n,a,o;return function(){var i=jt(this,t),s=r(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),jt(this,t))),i===l?null:i===n&&l===a?o:(a=l,o=e(n=i,s))}}function Jf(t,e){var r,n,a,o="style."+e,i="end."+o,s;return function(){var l=ct(this,t),u=l.on,f=l.value[o]==null?s||(s=Ds(e)):void 0;(u!==r||a!==f)&&(n=(r=u).copy()).on(i,a=f),l.on=n}}function Ns(t,e,r){var n=(t+="")=="transform"?da:gn;return e==null?this.styleTween(t,Qf(t,n)).on("end.style."+t,Ds(t)):typeof e=="function"?this.styleTween(t,Kf(t,n,He(this,"style."+t,e))).each(Jf(this._id,t)):this.styleTween(t,jf(t,n,e),r).on("end.style."+t,null)}function th(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function eh(t,e,r){var n,a;function o(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&th(t,i,r)),n}return o._value=e,o}function Is(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,eh(t,e,r??""))}function rh(t){return function(){this.textContent=t}}function nh(t){return function(){var e=t(this);this.textContent=e??""}}function Rs(t){return this.tween("text",typeof t=="function"?nh(He(this,"text",t)):rh(t==null?"":t+""))}function ah(t){return function(e){this.textContent=t.call(this,e)}}function oh(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&ah(a)),e}return n._value=t,n}function Es(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,oh(t))}function Os(){for(var t=this._name,e=this._id,r=xn(),n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,l,u=0;u<s;++u)if(l=i[u]){var f=it(l,e);Kt(l,t,r,u,i,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new _t(n,this._parents,t,r)}function $s(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(o,i){var s={value:i},l={value:function(){--a===0&&o()}};r.each(function(){var u=ct(this,n),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),a===0&&o()})}var ih=0;function _t(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Ps(t){return Vt().transition(t)}function xn(){return++ih}var Wt=Vt.prototype;_t.prototype=Ps.prototype={constructor:_t,select:ks,selectAll:As,selectChild:Wt.selectChild,selectChildren:Wt.selectChildren,filter:ws,merge:Ts,selection:Ss,transition:Os,call:Wt.call,nodes:Wt.nodes,node:Wt.node,size:Wt.size,empty:Wt.empty,each:Wt.each,on:Cs,attr:gs,attrTween:xs,style:Ns,styleTween:Is,text:Rs,textTween:Es,remove:Ms,tween:ds,delay:ys,duration:vs,ease:_s,easeVarying:bs,end:$s,[Symbol.iterator]:Wt[Symbol.iterator]};function yn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var sh={time:null,delay:0,duration:250,ease:yn};function uh(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Fs(t){var e,r;t instanceof _t?(e=t._id,t=t._name):(e=xn(),(r=sh).time=xr(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&Kt(l,t,e,u,i,r||uh(l,e));return new _t(n,this._parents,t,e)}Vt.prototype.interrupt=ms;Vt.prototype.transition=Fs;var{abs:Hv,max:Lv,min:Uv}=Math;function zs(t){return[+t[0],+t[1]]}function lh(t){return[zs(t[0]),zs(t[1])]}var Xv={name:"x",handles:["w","e"].map(va),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Yv={name:"y",handles:["n","s"].map(va),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Vv={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(va),input:function(t){return t==null?null:lh(t)},output:function(t){return t}};function va(t){return{type:t}}var _a=Math.PI,ba=2*_a,ye=1e-6,ch=ba-ye;function Hs(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function fh(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Hs;let r=10**e;return function(n){this._+=n[0];for(let a=1,o=n.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}var ve=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Hs:fh(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,o,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+o},${this._y1=+i}`}arcTo(e,r,n,a,o){if(e=+e,r=+r,n=+n,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,s=this._y1,l=n-e,u=a-r,f=i-e,h=s-r,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(c>ye)if(!(Math.abs(h*l-u*f)>ye)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-i,x=a-s,v=l*l+u*u,m=p*p+x*x,d=Math.sqrt(v),M=Math.sqrt(c),S=o*Math.tan((_a-Math.acos((v+c-m)/(2*d*M)))/2),b=S/M,A=S/d;Math.abs(b-1)>ye&&this._append`L${e+b*f},${r+b*h}`,this._append`A${o},${o},0,0,${+(h*p>f*x)},${this._x1=e+A*l},${this._y1=r+A*u}`}}arc(e,r,n,a,o,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=e+s,f=r+l,h=1^i,c=i?a-o:o-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>ye||Math.abs(this._y1-f)>ye)&&this._append`L${u},${f}`,n&&(c<0&&(c=c%ba+ba),c>ch?this._append`A${n},${n},0,1,${h},${e-s},${r-l}A${n},${n},0,1,${h},${this._x1=u},${this._y1=f}`:c>ye&&this._append`A${n},${n},0,${+(c>=_a)},${h},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}};function Ls(){return new ve}Ls.prototype=ve.prototype;function Us(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _e(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Pt(t){return t=_e(Math.abs(t)),t?t[1]:NaN}function Xs(t,e){return function(r,n){for(var a=r.length,o=[],i=0,s=t[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),o.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=t[i=(i+1)%t.length];return o.reverse().join(e)}}function Ys(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var hh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function te(t){if(!(e=hh.exec(t)))throw new Error("invalid format: "+t);var e;return new vn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}te.prototype=vn.prototype;function vn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}vn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vs(t){t:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var wa;function qs(t,e){var r=_e(t,e);if(!r)return t+"";var n=r[0],a=r[1],o=a-(wa=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+_e(t,Math.max(0,e+o-1))[0]}function Ta(t,e){var r=_e(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}var Ca={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Us,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ta(t*100,e),r:Ta,s:qs,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ma(t){return t}var Bs=Array.prototype.map,Ws=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Zs(t){var e=t.grouping===void 0||t.thousands===void 0?Ma:Xs(Bs.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Ma:Ys(Bs.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=te(h);var c=h.fill,p=h.align,x=h.sign,v=h.symbol,m=h.zero,d=h.width,M=h.comma,S=h.precision,b=h.trim,A=h.type;A==="n"?(M=!0,A="g"):Ca[A]||(S===void 0&&(S=12),b=!0,A="g"),(m||c==="0"&&p==="=")&&(m=!0,c="0",p="=");var C=v==="$"?r:v==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",F=v==="$"?n:/[%p]/.test(A)?i:"",E=Ca[A],I=/[defgprs%]/.test(A);S=S===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function O(y){var N=C,w=F,g,k,T;if(A==="c")w=E(y)+w,y="";else{y=+y;var R=y<0||1/y<0;if(y=isNaN(y)?l:E(Math.abs(y),S),b&&(y=Vs(y)),R&&+y==0&&x!=="+"&&(R=!1),N=(R?x==="("?x:s:x==="-"||x==="("?"":x)+N,w=(A==="s"?Ws[8+wa/3]:"")+w+(R&&x==="("?")":""),I){for(g=-1,k=y.length;++g<k;)if(T=y.charCodeAt(g),48>T||T>57){w=(T===46?a+y.slice(g+1):y.slice(g))+w,y=y.slice(0,g);break}}}M&&!m&&(y=e(y,1/0));var z=N.length+y.length+w.length,H=z<d?new Array(d-z+1).join(c):"";switch(M&&m&&(y=e(H+y,H.length?d-w.length:1/0),H=""),p){case"<":y=N+y+w+H;break;case"=":y=N+H+y+w;break;case"^":y=H.slice(0,z=H.length>>1)+N+y+w+H.slice(z);break;default:y=H+N+y+w;break}return o(y)}return O.toString=function(){return h+""},O}function f(h,c){var p=u((h=te(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Pt(c)/3)))*3,v=Math.pow(10,-x),m=Ws[8+x/3];return function(d){return p(v*d)+m}}return{format:u,formatPrefix:f}}var _n,mt,bn;ka({thousands:",",grouping:[3],currency:["$",""]});function ka(t){return _n=Zs(t),mt=_n.format,bn=_n.formatPrefix,_n}function Aa(t){return Math.max(0,-Pt(Math.abs(t)))}function Sa(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pt(e)/3)))*3-Pt(Math.abs(t)))}function Da(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Pt(e)-Pt(t))+1}function ph(t){var e=0,r=t.children,n=r&&r.length;if(!n)e=1;else for(;--n>=0;)e+=r[n].value;t.value=e}function Gs(){return this.eachAfter(ph)}function Qs(t,e){let r=-1;for(let n of this)t.call(e,n,++r,this);return this}function js(t,e){for(var r=this,n=[r],a,o,i=-1;r=n.pop();)if(t.call(e,r,++i,this),a=r.children)for(o=a.length-1;o>=0;--o)n.push(a[o]);return this}function Ks(t,e){for(var r=this,n=[r],a=[],o,i,s,l=-1;r=n.pop();)if(a.push(r),o=r.children)for(i=0,s=o.length;i<s;++i)n.push(o[i]);for(;r=a.pop();)t.call(e,r,++l,this);return this}function Js(t,e){let r=-1;for(let n of this)if(t.call(e,n,++r,this))return n}function tu(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,n=e.children,a=n&&n.length;--a>=0;)r+=n[a].value;e.value=r})}function eu(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ru(t){for(var e=this,r=mh(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var a=n.length;t!==r;)n.splice(a,0,t),t=t.parent;return n}function mh(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),a=null;for(t=r.pop(),e=n.pop();t===e;)a=t,t=r.pop(),e=n.pop();return a}function nu(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function au(){return Array.from(this)}function ou(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function iu(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*su(){var t=this,e,r=[t],n,a,o;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,n=t.children)for(a=0,o=n.length;a<o;++a)r.push(n[a]);while(r.length)}function Ft(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=xh)):e===void 0&&(e=gh);for(var r=new be(t),n,a=[r],o,i,s,l;n=a.pop();)if((i=e(n.data))&&(l=(i=Array.from(i)).length))for(n.children=i,s=l-1;s>=0;--s)a.push(o=i[s]=new be(i[s])),o.parent=n,o.depth=n.depth+1;return r.eachBefore(vh)}function dh(){return Ft(this).eachBefore(yh)}function gh(t){return t.children}function xh(t){return Array.isArray(t)?t[1]:null}function yh(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function vh(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function be(t){this.data=t,this.depth=this.height=0,this.parent=null}be.prototype=Ft.prototype={constructor:be,count:Gs,each:Qs,eachAfter:Ks,eachBefore:js,find:Js,sum:tu,sort:eu,path:ru,ancestors:nu,descendants:au,leaves:ou,links:iu,copy:dh,[Symbol.iterator]:su};function uu(t){return t==null?null:Na(t)}function Na(t){if(typeof t!="function")throw new Error;return t}function Zt(){return 0}function ee(t){return function(){return t}}function lu(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function cu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fu(t,e){let r=t.length,n,a;for(;r;)a=e()*r--|0,n=t[r],t[r]=t[a],t[a]=n;return t}function hu(t,e){for(var r=0,n=(t=fu(Array.from(t),e)).length,a=[],o,i;r<n;)o=t[r],i&&pu(i,o)?++r:(i=bh(a=_h(a,o)),r=0);return i}function _h(t,e){var r,n;if(Ia(e,t))return[e];for(r=0;r<t.length;++r)if(wn(e,t[r])&&Ia(_r(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(wn(_r(t[r],t[n]),e)&&wn(_r(t[r],e),t[n])&&wn(_r(t[n],e),t[r])&&Ia(mu(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error}function wn(t,e){var r=t.r-e.r,n=e.x-t.x,a=e.y-t.y;return r<0||r*r<n*n+a*a}function pu(t,e){var r=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function Ia(t,e){for(var r=0;r<e.length;++r)if(!pu(t,e[r]))return!1;return!0}function bh(t){switch(t.length){case 1:return wh(t[0]);case 2:return _r(t[0],t[1]);case 3:return mu(t[0],t[1],t[2])}}function wh(t){return{x:t.x,y:t.y,r:t.r}}function _r(t,e){var r=t.x,n=t.y,a=t.r,o=e.x,i=e.y,s=e.r,l=o-r,u=i-n,f=s-a,h=Math.sqrt(l*l+u*u);return{x:(r+o+l/h*f)/2,y:(n+i+u/h*f)/2,r:(h+a+s)/2}}function mu(t,e,r){var n=t.x,a=t.y,o=t.r,i=e.x,s=e.y,l=e.r,u=r.x,f=r.y,h=r.r,c=n-i,p=n-u,x=a-s,v=a-f,m=l-o,d=h-o,M=n*n+a*a-o*o,S=M-i*i-s*s+l*l,b=M-u*u-f*f+h*h,A=p*x-c*v,C=(x*b-v*S)/(A*2)-n,F=(v*m-x*d)/A,E=(p*S-c*b)/(A*2)-a,I=(c*d-p*m)/A,O=F*F+I*I-1,y=2*(o+C*F+E*I),N=C*C+E*E-o*o,w=-(Math.abs(O)>1e-6?(y+Math.sqrt(y*y-4*O*N))/(2*O):N/y);return{x:n+C+F*w,y:a+E+I*w,r:w}}function du(t,e,r){var n=t.x-e.x,a,o,i=t.y-e.y,s,l,u=n*n+i*i;u?(o=e.r+r.r,o*=o,l=t.r+r.r,l*=l,o>l?(a=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-a*a)),r.x=t.x-a*n-s*i,r.y=t.y-a*i+s*n):(a=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-a*a)),r.x=e.x+a*n-s*i,r.y=e.y+a*i+s*n)):(r.x=e.x+r.r,r.y=e.y)}function gu(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function xu(t){var e=t._,r=t.next._,n=e.r+r.r,a=(e.x*r.r+r.x*e.r)/n,o=(e.y*r.r+r.y*e.r)/n;return a*a+o*o}function Tn(t){this._=t,this.next=null,this.previous=null}function yu(t,e){if(!(o=(t=cu(t)).length))return 0;var r,n,a,o,i,s,l,u,f,h,c;if(r=t[0],r.x=0,r.y=0,!(o>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(o>2))return r.r+n.r;du(n,r,a=t[2]),r=new Tn(r),n=new Tn(n),a=new Tn(a),r.next=a.previous=n,n.next=r.previous=a,a.next=n.previous=r;t:for(l=3;l<o;++l){du(r._,n._,a=t[l]),a=new Tn(a),u=n.next,f=r.previous,h=n._.r,c=r._.r;do if(h<=c){if(gu(u._,a._)){n=u,r.next=n,n.previous=r,--l;continue t}h+=u._.r,u=u.next}else{if(gu(f._,a._)){r=f,r.next=n,n.previous=r,--l;continue t}c+=f._.r,f=f.previous}while(u!==f.next);for(a.previous=r,a.next=n,r.next=n.previous=n=a,i=xu(r);(a=a.next)!==n;)(s=xu(a))<i&&(r=a,i=s);n=r.next}for(r=[n._],a=n;(a=a.next)!==n;)r.push(a._);for(a=hu(r,e),l=0;l<o;++l)r=t[l],r.x-=a.x,r.y-=a.y;return a.r}function Th(t){return Math.sqrt(t.value)}function Ea(){var t=null,e=1,r=1,n=Zt;function a(o){let i=lu();return o.x=e/2,o.y=r/2,t?o.eachBefore(vu(t)).eachAfter(Ra(n,.5,i)).eachBefore(_u(1)):o.eachBefore(vu(Th)).eachAfter(Ra(Zt,1,i)).eachAfter(Ra(n,o.r/Math.min(e,r),i)).eachBefore(_u(Math.min(e,r)/(2*o.r))),o}return a.radius=function(o){return arguments.length?(t=uu(o),a):t},a.size=function(o){return arguments.length?(e=+o[0],r=+o[1],a):[e,r]},a.padding=function(o){return arguments.length?(n=typeof o=="function"?o:ee(+o),a):n},a}function vu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Ra(t,e,r){return function(n){if(a=n.children){var a,o,i=a.length,s=t(n)*e||0,l;if(s)for(o=0;o<i;++o)a[o].r+=s;if(l=yu(a,r),s)for(o=0;o<i;++o)a[o].r-=s;n.r=l+s}}}function _u(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function bu(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function wu(t,e,r,n,a){for(var o=t.children,i,s=-1,l=o.length,u=t.value&&(n-e)/t.value;++s<l;)i=o[s],i.y0=r,i.y1=a,i.x0=e,i.x1=e+=i.value*u}function Ch(t,e){return t.parent===e.parent?1:2}function Oa(t){var e=t.children;return e?e[0]:t.t}function $a(t){var e=t.children;return e?e[e.length-1]:t.t}function Mh(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function kh(t){for(var e=0,r=0,n=t.children,a=n.length,o;--a>=0;)o=n[a],o.z+=e,o.m+=e,e+=o.s+(r+=o.c)}function Ah(t,e,r){return t.a.parent===e.parent?t.a:r}function Cn(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Cn.prototype=Object.create(be.prototype);function Sh(t){for(var e=new Cn(t,0),r,n=[e],a,o,i,s;r=n.pop();)if(o=r._.children)for(r.children=new Array(s=o.length),i=s-1;i>=0;--i)n.push(a=r.children[i]=new Cn(o[i],i)),a.parent=r;return(e.parent=new Cn(null,0)).children=[e],e}function Pa(){var t=Ch,e=1,r=1,n=null;function a(u){var f=Sh(u);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(i),n)u.eachBefore(l);else{var h=u,c=u,p=u;u.eachBefore(function(M){M.x<h.x&&(h=M),M.x>c.x&&(c=M),M.depth>p.depth&&(p=M)});var x=h===c?1:t(h,c)/2,v=x-h.x,m=e/(c.x+x+v),d=r/(p.depth||1);u.eachBefore(function(M){M.x=(M.x+v)*m,M.y=M.depth*d})}return u}function o(u){var f=u.children,h=u.parent.children,c=u.i?h[u.i-1]:null;if(f){kh(u);var p=(f[0].z+f[f.length-1].z)/2;c?(u.z=c.z+t(u._,c._),u.m=u.z-p):u.z=p}else c&&(u.z=c.z+t(u._,c._));u.parent.A=s(u,c,u.parent.A||h[0])}function i(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,f,h){if(f){for(var c=u,p=u,x=f,v=c.parent.children[0],m=c.m,d=p.m,M=x.m,S=v.m,b;x=$a(x),c=Oa(c),x&&c;)v=Oa(v),p=$a(p),p.a=u,b=x.z+M-c.z-m+t(x._,c._),b>0&&(Mh(Ah(x,u,h),u,b),m+=b,d+=b),M+=x.m,m+=c.m,S+=v.m,d+=p.m;x&&!$a(p)&&(p.t=x,p.m+=M-d),c&&!Oa(v)&&(v.t=c,v.m+=m-S,h=u)}return h}function l(u){u.x*=e,u.y=u.depth*r}return a.separation=function(u){return arguments.length?(t=u,a):t},a.size=function(u){return arguments.length?(n=!1,e=+u[0],r=+u[1],a):n?null:[e,r]},a.nodeSize=function(u){return arguments.length?(n=!0,e=+u[0],r=+u[1],a):n?[e,r]:null},a}function Tu(t,e,r,n,a){for(var o=t.children,i,s=-1,l=o.length,u=t.value&&(a-r)/t.value;++s<l;)i=o[s],i.x0=e,i.x1=n,i.y0=r,i.y1=r+=i.value*u}var Dh=(1+Math.sqrt(5))/2;function Nh(t,e,r,n,a,o){for(var i=[],s=e.children,l,u,f=0,h=0,c=s.length,p,x,v=e.value,m,d,M,S,b,A,C;f<c;){p=a-r,x=o-n;do m=s[h++].value;while(!m&&h<c);for(d=M=m,A=Math.max(x/p,p/x)/(v*t),C=m*m*A,b=Math.max(M/C,C/d);h<c;++h){if(m+=u=s[h].value,u<d&&(d=u),u>M&&(M=u),C=m*m*A,S=Math.max(M/C,C/d),S>b){m-=u;break}b=S}i.push(l={value:m,dice:p<x,children:s.slice(f,h)}),l.dice?wu(l,r,n,a,v?n+=x*m/v:o):Tu(l,r,n,v?r+=p*m/v:a,o),v-=m,f=h}return i}var Cu=function t(e){function r(n,a,o,i,s){Nh(e,n,a,o,i,s)}return r.ratio=function(n){return t((n=+n)>1?n:1)},r}(Dh);function Fa(){var t=Cu,e=!1,r=1,n=1,a=[0],o=Zt,i=Zt,s=Zt,l=Zt,u=Zt;function f(c){return c.x0=c.y0=0,c.x1=r,c.y1=n,c.eachBefore(h),a=[0],e&&c.eachBefore(bu),c}function h(c){var p=a[c.depth],x=c.x0+p,v=c.y0+p,m=c.x1-p,d=c.y1-p;m<x&&(x=m=(x+m)/2),d<v&&(v=d=(v+d)/2),c.x0=x,c.y0=v,c.x1=m,c.y1=d,c.children&&(p=a[c.depth+1]=o(c)/2,x+=u(c)-p,v+=i(c)-p,m-=s(c)-p,d-=l(c)-p,m<x&&(x=m=(x+m)/2),d<v&&(v=d=(v+d)/2),t(c,x,v,m,d))}return f.round=function(c){return arguments.length?(e=!!c,f):e},f.size=function(c){return arguments.length?(r=+c[0],n=+c[1],f):[r,n]},f.tile=function(c){return arguments.length?(t=Na(c),f):t},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(o=typeof c=="function"?c:ee(+c),f):o},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(i=typeof c=="function"?c:ee(+c),f):i},f.paddingRight=function(c){return arguments.length?(s=typeof c=="function"?c:ee(+c),f):s},f.paddingBottom=function(c){return arguments.length?(l=typeof c=="function"?c:ee(+c),f):l},f.paddingLeft=function(c){return arguments.length?(u=typeof c=="function"?c:ee(+c),f):u},f}function re(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var Mu=Symbol("implicit");function Mn(){var t=new Oe,e=[],r=[],n=Mu;function a(o){let i=t.get(o);if(i===void 0){if(n!==Mu)return n;t.set(o,i=e.push(o)-1)}return r[i%r.length]}return a.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Oe;for(let i of o)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(o){return arguments.length?(r=Array.from(o),a):r.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return Mn(e,r).unknown(n)},re.apply(a,arguments),a}function br(){var t=Mn().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,o,i,s=!1,l=0,u=0,f=.5;delete t.unknown;function h(){var c=e().length,p=a<n,x=p?a:n,v=p?n:a;o=(v-x)/Math.max(1,c-l+u*2),s&&(o=Math.floor(o)),x+=(v-x-o*(c-l))*f,i=o*(1-l),s&&(x=Math.round(x),i=Math.round(i));var m=Yr(c).map(function(d){return x+o*d});return r(p?m.reverse():m)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([n,a]=c,n=+n,a=+a,h()):[n,a]},t.rangeRound=function(c){return[n,a]=c,n=+n,a=+a,s=!0,h()},t.bandwidth=function(){return i},t.step=function(){return o},t.round=function(c){return arguments.length?(s=!!c,h()):s},t.padding=function(c){return arguments.length?(l=Math.min(1,u=+c),h()):l},t.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),h()):l},t.paddingOuter=function(c){return arguments.length?(u=+c,h()):u},t.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},t.copy=function(){return br(e(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(f)},re.apply(h(),arguments)}function za(t){return function(){return t}}function Ha(t){return+t}var ku=[0,1];function Le(t){return t}function La(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:za(isNaN(e)?NaN:.5)}function Ih(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Rh(t,e,r){var n=t[0],a=t[1],o=e[0],i=e[1];return a<n?(n=La(a,n),o=r(i,o)):(n=La(n,a),o=r(o,i)),function(s){return o(n(s))}}function Eh(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),o=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=La(t[i],t[i+1]),o[i]=r(e[i],e[i+1]);return function(s){var l=jn(t,s,1,n)-1;return o[l](a[l](s))}}function kn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Oh(){var t=ku,e=ku,r=Bt,n,a,o,i=Le,s,l,u;function f(){var c=Math.min(t.length,e.length);return i!==Le&&(i=Ih(t[0],t[c-1])),s=c>2?Eh:Rh,l=u=null,h}function h(c){return c==null||isNaN(c=+c)?o:(l||(l=s(t.map(n),e,r)))(n(i(c)))}return h.invert=function(c){return i(a((u||(u=s(e,t.map(n),lt)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,Ha),f()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),f()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),r=pa,f()},h.clamp=function(c){return arguments.length?(i=c?!0:Le,f()):i!==Le},h.interpolate=function(c){return arguments.length?(r=c,f()):r},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,p){return n=c,a=p,f()}}function wr(){return Oh()(Le,Le)}function Ua(t,e,r,n){var a=$e(t,e,r),o;switch(n=te(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=Sa(a,i))&&(n.precision=o),bn(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=Da(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=Aa(a))&&(n.precision=o-(n.type==="%")*2);break}}return mt(n)}function $h(t){var e=t.domain;return t.ticks=function(r){var n=e();return Xr(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return Ua(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,o=n.length-1,i=n[a],s=n[o],l,u,f=10;for(s<i&&(u=i,i=s,s=u,u=a,a=o,o=u);f-- >0;){if(u=Je(i,s,r),u===l)return n[a]=i,n[o]=s,e(n);if(u>0)i=Math.floor(i/u)*u,s=Math.ceil(s/u)*u;else if(u<0)i=Math.ceil(i*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function At(){var t=wr();return t.copy=function(){return kn(t,At())},re.apply(t,arguments),$h(t)}function Xa(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],o=t[n],i;return o<a&&(i=r,r=n,n=i,i=a,a=o,o=i),t[r]=e.floor(a),t[n]=e.ceil(o),t}var Ya=new Date,Va=new Date;function Z(t,e,r,n){function a(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(t(o=new Date(+o)),o),a.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),a.round=o=>{let i=a(o),s=a.ceil(o);return o-i<s-o?i:s},a.offset=(o,i)=>(e(o=new Date(+o),i==null?1:Math.floor(i)),o),a.range=(o,i,s)=>{let l=[];if(o=a.ceil(o),s=s==null?1:Math.floor(s),!(o<i)||!(s>0))return l;let u;do l.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<i);return l},a.filter=o=>Z(i=>{if(i>=i)for(;t(i),!o(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;e(i,-1),!o(i););else for(;--s>=0;)for(;e(i,1),!o(i););}),r&&(a.count=(o,i)=>(Ya.setTime(+o),Va.setTime(+i),t(Ya),t(Va),Math.floor(r(Ya,Va))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(n?i=>n(i)%o===0:i=>a.count(0,i)%o===0):a)),a}var Tr=Z(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Tr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Z(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Tr);var yb=Tr.range;var zt=Z(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*1e3)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),Au=zt.range;var Ue=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getMinutes()),Ph=Ue.range,An=Z(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes()),Fh=An.range;var Xe=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getHours()),zh=Xe.range,Sn=Z(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours()),Hh=Sn.range;var Nt=Z(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Lh=Nt.range,Mr=Z(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>t.getUTCDate()-1),Uh=Mr.range,Dn=Z(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>Math.floor(t/864e5)),Xh=Dn.range;function Ce(t){return Z(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}var It=Ce(0),Ye=Ce(1),Du=Ce(2),Nu=Ce(3),ne=Ce(4),Iu=Ce(5),Ru=Ce(6),Eu=It.range,Yh=Ye.range,Vh=Du.range,qh=Nu.range,Bh=ne.range,Wh=Iu.range,Zh=Ru.range;function Me(t){return Z(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/6048e5)}var ke=Me(0),Ve=Me(1),Ou=Me(2),$u=Me(3),ae=Me(4),Pu=Me(5),Fu=Me(6),zu=ke.range,Gh=Ve.range,Qh=Ou.range,jh=$u.range,Kh=ae.range,Jh=Pu.range,tp=Fu.range;var oe=Z(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),ep=oe.range,Nn=Z(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),rp=Nn.range;var bt=Z(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});var np=bt.range,Rt=Z(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});var ap=Rt.range;function Lu(t,e,r,n,a,o){let i=[[zt,1,1e3],[zt,5,5*1e3],[zt,15,15*1e3],[zt,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[a,1,36e5],[a,3,3*36e5],[a,6,6*36e5],[a,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[e,1,2592e6],[e,3,3*2592e6],[t,1,31536e6]];function s(u,f,h){let c=f<u;c&&([u,f]=[f,u]);let p=h&&typeof h.range=="function"?h:l(u,f,h),x=p?p.range(u,+f+1):[];return c?x.reverse():x}function l(u,f,h){let c=Math.abs(f-u)/h,p=fe(([,,m])=>m).right(i,c);if(p===i.length)return t.every($e(u/31536e6,f/31536e6,h));if(p===0)return Tr.every(Math.max($e(u,f,h),1));let[x,v]=i[c/i[p-1][2]<i[p][2]/c?p-1:p];return x.every(v)}return[s,l]}var[ip,sp]=Lu(Rt,Nn,ke,Dn,Sn,An),[qa,Ba]=Lu(bt,oe,It,Nt,Xe,Ue);function Wa(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Za(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kr(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Ga(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,o=t.days,i=t.shortDays,s=t.months,l=t.shortMonths,u=Ar(a),f=Sr(a),h=Ar(o),c=Sr(o),p=Ar(i),x=Sr(i),v=Ar(s),m=Sr(s),d=Ar(l),M=Sr(l),S={a:R,A:z,b:H,B:L,c:null,d:Bu,e:Bu,f:Np,g:Lp,G:Xp,H:Ap,I:Sp,j:Dp,L:ju,m:Ip,M:Rp,p:V,q:B,Q:Gu,s:Qu,S:Ep,u:Op,U:$p,V:Pp,w:Fp,W:zp,x:null,X:null,y:Hp,Y:Up,Z:Yp,"%":Zu},b={a:ht,A:J,b:tt,B:gt,c:null,d:Wu,e:Wu,f:Wp,g:nm,G:om,H:Vp,I:qp,j:Bp,L:Ju,m:Zp,M:Gp,p:ut,q:xt,Q:Gu,s:Qu,S:Qp,u:jp,U:Kp,V:Jp,w:tm,W:em,x:null,X:null,y:rm,Y:am,Z:im,"%":Zu},A={a:O,A:y,b:N,B:w,c:g,d:Vu,e:Vu,f:Tp,g:Yu,G:Xu,H:qu,I:qu,j:vp,L:wp,m:yp,M:_p,p:I,q:xp,Q:Mp,s:kp,S:bp,u:hp,U:pp,V:mp,w:fp,W:dp,x:k,X:T,y:Yu,Y:Xu,Z:gp,"%":Cp};S.x=C(r,S),S.X=C(n,S),S.c=C(e,S),b.x=C(r,b),b.X=C(n,b),b.c=C(e,b);function C($,U){return function(Y){var D=[],Tt=-1,G=0,Mt=$.length,kt,se,so;for(Y instanceof Date||(Y=new Date(+Y));++Tt<Mt;)$.charCodeAt(Tt)===37&&(D.push($.slice(G,Tt)),(se=Uu[kt=$.charAt(++Tt)])!=null?kt=$.charAt(++Tt):se=kt==="e"?" ":"0",(so=U[kt])&&(kt=so(Y,se)),D.push(kt),G=Tt+1);return D.push($.slice(G,Tt)),D.join("")}}function F($,U){return function(Y){var D=kr(1900,void 0,1),Tt=E(D,$,Y+="",0),G,Mt;if(Tt!=Y.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(U&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(G=Za(kr(D.y,0,1)),Mt=G.getUTCDay(),G=Mt>4||Mt===0?Ve.ceil(G):Ve(G),G=Mr.offset(G,(D.V-1)*7),D.y=G.getUTCFullYear(),D.m=G.getUTCMonth(),D.d=G.getUTCDate()+(D.w+6)%7):(G=Wa(kr(D.y,0,1)),Mt=G.getDay(),G=Mt>4||Mt===0?Ye.ceil(G):Ye(G),G=Nt.offset(G,(D.V-1)*7),D.y=G.getFullYear(),D.m=G.getMonth(),D.d=G.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),Mt="Z"in D?Za(kr(D.y,0,1)).getUTCDay():Wa(kr(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(Mt+5)%7:D.w+D.U*7-(Mt+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,Za(D)):Wa(D)}}function E($,U,Y,D){for(var Tt=0,G=U.length,Mt=Y.length,kt,se;Tt<G;){if(D>=Mt)return-1;if(kt=U.charCodeAt(Tt++),kt===37){if(kt=U.charAt(Tt++),se=A[kt in Uu?U.charAt(Tt++):kt],!se||(D=se($,Y,D))<0)return-1}else if(kt!=Y.charCodeAt(D++))return-1}return D}function I($,U,Y){var D=u.exec(U.slice(Y));return D?($.p=f.get(D[0].toLowerCase()),Y+D[0].length):-1}function O($,U,Y){var D=p.exec(U.slice(Y));return D?($.w=x.get(D[0].toLowerCase()),Y+D[0].length):-1}function y($,U,Y){var D=h.exec(U.slice(Y));return D?($.w=c.get(D[0].toLowerCase()),Y+D[0].length):-1}function N($,U,Y){var D=d.exec(U.slice(Y));return D?($.m=M.get(D[0].toLowerCase()),Y+D[0].length):-1}function w($,U,Y){var D=v.exec(U.slice(Y));return D?($.m=m.get(D[0].toLowerCase()),Y+D[0].length):-1}function g($,U,Y){return E($,e,U,Y)}function k($,U,Y){return E($,r,U,Y)}function T($,U,Y){return E($,n,U,Y)}function R($){return i[$.getDay()]}function z($){return o[$.getDay()]}function H($){return l[$.getMonth()]}function L($){return s[$.getMonth()]}function V($){return a[+($.getHours()>=12)]}function B($){return 1+~~($.getMonth()/3)}function ht($){return i[$.getUTCDay()]}function J($){return o[$.getUTCDay()]}function tt($){return l[$.getUTCMonth()]}function gt($){return s[$.getUTCMonth()]}function ut($){return a[+($.getUTCHours()>=12)]}function xt($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var U=C($+="",S);return U.toString=function(){return $},U},parse:function($){var U=F($+="",!1);return U.toString=function(){return $},U},utcFormat:function($){var U=C($+="",b);return U.toString=function(){return $},U},utcParse:function($){var U=F($+="",!0);return U.toString=function(){return $},U}}}var Uu={"-":"",_:" ",0:"0"},st=/^\s*\d+/,up=/^%/,lp=/[\\^$*+?|[\]().{}]/g;function q(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",o=a.length;return n+(o<r?new Array(r-o+1).join(e)+a:a)}function cp(t){return t.replace(lp,"\\$&")}function Ar(t){return new RegExp("^(?:"+t.map(cp).join("|")+")","i")}function Sr(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function fp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function hp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function pp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function mp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function dp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Xu(t,e,r){var n=st.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Yu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function gp(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function xp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function yp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Vu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function vp(t,e,r){var n=st.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function qu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function _p(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function bp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function wp(t,e,r){var n=st.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Tp(t,e,r){var n=st.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Cp(t,e,r){var n=up.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Mp(t,e,r){var n=st.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function kp(t,e,r){var n=st.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Bu(t,e){return q(t.getDate(),e,2)}function Ap(t,e){return q(t.getHours(),e,2)}function Sp(t,e){return q(t.getHours()%12||12,e,2)}function Dp(t,e){return q(1+Nt.count(bt(t),t),e,3)}function ju(t,e){return q(t.getMilliseconds(),e,3)}function Np(t,e){return ju(t,e)+"000"}function Ip(t,e){return q(t.getMonth()+1,e,2)}function Rp(t,e){return q(t.getMinutes(),e,2)}function Ep(t,e){return q(t.getSeconds(),e,2)}function Op(t){var e=t.getDay();return e===0?7:e}function $p(t,e){return q(It.count(bt(t)-1,t),e,2)}function Ku(t){var e=t.getDay();return e>=4||e===0?ne(t):ne.ceil(t)}function Pp(t,e){return t=Ku(t),q(ne.count(bt(t),t)+(bt(t).getDay()===4),e,2)}function Fp(t){return t.getDay()}function zp(t,e){return q(Ye.count(bt(t)-1,t),e,2)}function Hp(t,e){return q(t.getFullYear()%100,e,2)}function Lp(t,e){return t=Ku(t),q(t.getFullYear()%100,e,2)}function Up(t,e){return q(t.getFullYear()%1e4,e,4)}function Xp(t,e){var r=t.getDay();return t=r>=4||r===0?ne(t):ne.ceil(t),q(t.getFullYear()%1e4,e,4)}function Yp(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+q(e/60|0,"0",2)+q(e%60,"0",2)}function Wu(t,e){return q(t.getUTCDate(),e,2)}function Vp(t,e){return q(t.getUTCHours(),e,2)}function qp(t,e){return q(t.getUTCHours()%12||12,e,2)}function Bp(t,e){return q(1+Mr.count(Rt(t),t),e,3)}function Ju(t,e){return q(t.getUTCMilliseconds(),e,3)}function Wp(t,e){return Ju(t,e)+"000"}function Zp(t,e){return q(t.getUTCMonth()+1,e,2)}function Gp(t,e){return q(t.getUTCMinutes(),e,2)}function Qp(t,e){return q(t.getUTCSeconds(),e,2)}function jp(t){var e=t.getUTCDay();return e===0?7:e}function Kp(t,e){return q(ke.count(Rt(t)-1,t),e,2)}function tl(t){var e=t.getUTCDay();return e>=4||e===0?ae(t):ae.ceil(t)}function Jp(t,e){return t=tl(t),q(ae.count(Rt(t),t)+(Rt(t).getUTCDay()===4),e,2)}function tm(t){return t.getUTCDay()}function em(t,e){return q(Ve.count(Rt(t)-1,t),e,2)}function rm(t,e){return q(t.getUTCFullYear()%100,e,2)}function nm(t,e){return t=tl(t),q(t.getUTCFullYear()%100,e,2)}function am(t,e){return q(t.getUTCFullYear()%1e4,e,4)}function om(t,e){var r=t.getUTCDay();return t=r>=4||r===0?ae(t):ae.ceil(t),q(t.getUTCFullYear()%1e4,e,4)}function im(){return"+0000"}function Zu(){return"%"}function Gu(t){return+t}function Qu(t){return Math.floor(+t/1e3)}var qe,dt,el,rl,nl;Qa({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qa(t){return qe=Ga(t),dt=qe.format,el=qe.parse,rl=qe.utcFormat,nl=qe.utcParse,qe}function sm(t){return new Date(t)}function um(t){return t instanceof Date?+t:+new Date(+t)}function al(t,e,r,n,a,o,i,s,l,u){var f=wr(),h=f.invert,c=f.domain,p=u(".%L"),x=u(":%S"),v=u("%I:%M"),m=u("%I %p"),d=u("%a %d"),M=u("%b %d"),S=u("%B"),b=u("%Y");function A(C){return(l(C)<C?p:s(C)<C?x:i(C)<C?v:o(C)<C?m:n(C)<C?a(C)<C?d:M:r(C)<C?S:b)(C)}return f.invert=function(C){return new Date(h(C))},f.domain=function(C){return arguments.length?c(Array.from(C,um)):c().map(sm)},f.ticks=function(C){var F=c();return t(F[0],F[F.length-1],C??10)},f.tickFormat=function(C,F){return F==null?A:u(F)},f.nice=function(C){var F=c();return(!C||typeof C.range!="function")&&(C=e(F[0],F[F.length-1],C??10)),C?c(Xa(F,C)):f},f.copy=function(){return kn(f,al(t,e,r,n,a,o,i,s,l,u))},f}function Dr(){return re.apply(al(qa,Ba,bt,oe,It,Nt,Xe,Ue,zt,dt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function K(t){return function(){return t}}var ja=Math.abs,ft=Math.atan2,ie=Math.cos,ol=Math.max,In=Math.min,Et=Math.sin,Ae=Math.sqrt,wt=1e-12,Be=Math.PI,Nr=Be/2,We=2*Be;function il(t){return t>1?0:t<-1?Be:Math.acos(t)}function Ka(t){return t>=1?Nr:t<=-1?-Nr:Math.asin(t)}function Rn(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new ve(e)}function lm(t){return t.innerRadius}function cm(t){return t.outerRadius}function fm(t){return t.startAngle}function hm(t){return t.endAngle}function pm(t){return t&&t.padAngle}function mm(t,e,r,n,a,o,i,s){var l=r-t,u=n-e,f=i-a,h=s-o,c=h*l-f*u;if(!(c*c<wt))return c=(f*(e-o)-h*(t-a))/c,[t+c*l,e+c*u]}function En(t,e,r,n,a,o,i){var s=t-r,l=e-n,u=(i?o:-o)/Ae(s*s+l*l),f=u*l,h=-u*s,c=t+f,p=e+h,x=r+f,v=n+h,m=(c+x)/2,d=(p+v)/2,M=x-c,S=v-p,b=M*M+S*S,A=a-o,C=c*v-x*p,F=(S<0?-1:1)*Ae(ol(0,A*A*b-C*C)),E=(C*S-M*F)/b,I=(-C*M-S*F)/b,O=(C*S+M*F)/b,y=(-C*M+S*F)/b,N=E-m,w=I-d,g=O-m,k=y-d;return N*N+w*w>g*g+k*k&&(E=O,I=y),{cx:E,cy:I,x01:-f,y01:-h,x11:E*(a/A-1),y11:I*(a/A-1)}}function Ja(){var t=lm,e=cm,r=K(0),n=null,a=fm,o=hm,i=pm,s=null,l=Rn(u);function u(){var f,h,c=+t.apply(this,arguments),p=+e.apply(this,arguments),x=a.apply(this,arguments)-Nr,v=o.apply(this,arguments)-Nr,m=ja(v-x),d=v>x;if(s||(s=f=l()),p<c&&(h=p,p=c,c=h),!(p>wt))s.moveTo(0,0);else if(m>We-wt)s.moveTo(p*ie(x),p*Et(x)),s.arc(0,0,p,x,v,!d),c>wt&&(s.moveTo(c*ie(v),c*Et(v)),s.arc(0,0,c,v,x,d));else{var M=x,S=v,b=x,A=v,C=m,F=m,E=i.apply(this,arguments)/2,I=E>wt&&(n?+n.apply(this,arguments):Ae(c*c+p*p)),O=In(ja(p-c)/2,+r.apply(this,arguments)),y=O,N=O,w,g;if(I>wt){var k=Ka(I/c*Et(E)),T=Ka(I/p*Et(E));(C-=k*2)>wt?(k*=d?1:-1,b+=k,A-=k):(C=0,b=A=(x+v)/2),(F-=T*2)>wt?(T*=d?1:-1,M+=T,S-=T):(F=0,M=S=(x+v)/2)}var R=p*ie(M),z=p*Et(M),H=c*ie(A),L=c*Et(A);if(O>wt){var V=p*ie(S),B=p*Et(S),ht=c*ie(b),J=c*Et(b),tt;if(m<Be)if(tt=mm(R,z,ht,J,V,B,H,L)){var gt=R-tt[0],ut=z-tt[1],xt=V-tt[0],$=B-tt[1],U=1/Et(il((gt*xt+ut*$)/(Ae(gt*gt+ut*ut)*Ae(xt*xt+$*$)))/2),Y=Ae(tt[0]*tt[0]+tt[1]*tt[1]);y=In(O,(c-Y)/(U-1)),N=In(O,(p-Y)/(U+1))}else y=N=0}F>wt?N>wt?(w=En(ht,J,R,z,p,N,d),g=En(V,B,H,L,p,N,d),s.moveTo(w.cx+w.x01,w.cy+w.y01),N<O?s.arc(w.cx,w.cy,N,ft(w.y01,w.x01),ft(g.y01,g.x01),!d):(s.arc(w.cx,w.cy,N,ft(w.y01,w.x01),ft(w.y11,w.x11),!d),s.arc(0,0,p,ft(w.cy+w.y11,w.cx+w.x11),ft(g.cy+g.y11,g.cx+g.x11),!d),s.arc(g.cx,g.cy,N,ft(g.y11,g.x11),ft(g.y01,g.x01),!d))):(s.moveTo(R,z),s.arc(0,0,p,M,S,!d)):s.moveTo(R,z),!(c>wt)||!(C>wt)?s.lineTo(H,L):y>wt?(w=En(H,L,V,B,c,-y,d),g=En(R,z,ht,J,c,-y,d),s.lineTo(w.cx+w.x01,w.cy+w.y01),y<O?s.arc(w.cx,w.cy,y,ft(w.y01,w.x01),ft(g.y01,g.x01),!d):(s.arc(w.cx,w.cy,y,ft(w.y01,w.x01),ft(w.y11,w.x11),!d),s.arc(0,0,c,ft(w.cy+w.y11,w.cx+w.x11),ft(g.cy+g.y11,g.cx+g.x11),d),s.arc(g.cx,g.cy,y,ft(g.y11,g.x11),ft(g.y01,g.x01),!d))):s.arc(0,0,c,A,b,d)}if(s.closePath(),f)return s=null,f+""||null}return u.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-Be/2;return[ie(h)*f,Et(h)*f]},u.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:K(+f),u):t},u.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:K(+f),u):e},u.cornerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:K(+f),u):r},u.padRadius=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:K(+f),u):n},u.startAngle=function(f){return arguments.length?(a=typeof f=="function"?f:K(+f),u):a},u.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:K(+f),u):o},u.padAngle=function(f){return arguments.length?(i=typeof f=="function"?f:K(+f),u):i},u.context=function(f){return arguments.length?(s=f??null,u):s},u}var Cw=Array.prototype.slice;function On(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function sl(t){this._context=t}sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ul(t){return new sl(t)}function ll(t){return t[0]}function cl(t){return t[1]}function Ze(t,e){var r=K(!0),n=null,a=ul,o=null,i=Rn(s);t=typeof t=="function"?t:t===void 0?ll:K(t),e=typeof e=="function"?e:e===void 0?cl:K(e);function s(l){var u,f=(l=On(l)).length,h,c=!1,p;for(n==null&&(o=a(p=i())),u=0;u<=f;++u)!(u<f&&r(h=l[u],u,l))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,u,l),+e(h,u,l));if(p)return o=null,p+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:K(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:K(+l),s):e},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:K(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(o=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=o=null:o=a(n=l),s):n},s}function fl(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function hl(t){return t}function to(){var t=hl,e=fl,r=null,n=K(0),a=K(We),o=K(0);function i(s){var l,u=(s=On(s)).length,f,h,c=0,p=new Array(u),x=new Array(u),v=+n.apply(this,arguments),m=Math.min(We,Math.max(-We,a.apply(this,arguments)-v)),d,M=Math.min(Math.abs(m)/u,o.apply(this,arguments)),S=M*(m<0?-1:1),b;for(l=0;l<u;++l)(b=x[p[l]=l]=+t(s[l],l,s))>0&&(c+=b);for(e!=null?p.sort(function(A,C){return e(x[A],x[C])}):r!=null&&p.sort(function(A,C){return r(s[A],s[C])}),l=0,h=c?(m-u*S)/c:0;l<u;++l,v=d)f=p[l],b=x[f],d=v+(b>0?b*h:0)+S,x[f]={data:s[f],index:l,value:b,startAngle:v,endAngle:d,padAngle:M};return x}return i.value=function(s){return arguments.length?(t=typeof s=="function"?s:K(+s),i):t},i.sortValues=function(s){return arguments.length?(e=s,r=null,i):e},i.sort=function(s){return arguments.length?(r=s,e=null,i):r},i.startAngle=function(s){return arguments.length?(n=typeof s=="function"?s:K(+s),i):n},i.endAngle=function(s){return arguments.length?(a=typeof s=="function"?s:K(+s),i):a},i.padAngle=function(s){return arguments.length?(o=typeof s=="function"?s:K(+s),i):o},i}var Ir=t=>()=>t;function eo(t,{sourceEvent:e,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Ot(t,e,r){this.k=t,this.x=e,this.y=r}Ot.prototype={constructor:Ot,scale:function(t){return t===1?this:new Ot(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ot(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rr=new Ot(1,0,0);ro.prototype=Ot.prototype;function ro(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Rr;return t.__zoom}function $n(t){t.stopImmediatePropagation()}function Ge(t){t.preventDefault(),t.stopImmediatePropagation()}function dm(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function gm(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function pl(){return this.__zoom||Rr}function xm(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ym(){return navigator.maxTouchPoints||"ontouchstart"in this}function vm(t,e,r){var n=t.invertX(e[0][0])-r[0][0],a=t.invertX(e[1][0])-r[1][0],o=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function no(){var t=dm,e=gm,r=vm,n=xm,a=ym,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=xa,u=nr("start","zoom","end"),f,h,c,p=500,x=150,v=0,m=10;function d(g){g.property("__zoom",pl).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",O).filter(a).on("touchstart.zoom",y).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",w).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.transform=function(g,k,T,R){var z=g.selection?g.selection():g;z.property("__zoom",pl),g!==z?A(g,k,T,R):z.interrupt().each(function(){C(this,arguments).event(R).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},d.scaleBy=function(g,k,T,R){d.scaleTo(g,function(){var z=this.__zoom.k,H=typeof k=="function"?k.apply(this,arguments):k;return z*H},T,R)},d.scaleTo=function(g,k,T,R){d.transform(g,function(){var z=e.apply(this,arguments),H=this.__zoom,L=T==null?b(z):typeof T=="function"?T.apply(this,arguments):T,V=H.invert(L),B=typeof k=="function"?k.apply(this,arguments):k;return r(S(M(H,B),L,V),z,i)},T,R)},d.translateBy=function(g,k,T,R){d.transform(g,function(){return r(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof T=="function"?T.apply(this,arguments):T),e.apply(this,arguments),i)},null,R)},d.translateTo=function(g,k,T,R,z){d.transform(g,function(){var H=e.apply(this,arguments),L=this.__zoom,V=R==null?b(H):typeof R=="function"?R.apply(this,arguments):R;return r(Rr.translate(V[0],V[1]).scale(L.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof T=="function"?-T.apply(this,arguments):-T),H,i)},R,z)};function M(g,k){return k=Math.max(o[0],Math.min(o[1],k)),k===g.k?g:new Ot(k,g.x,g.y)}function S(g,k,T){var R=k[0]-T[0]*g.k,z=k[1]-T[1]*g.k;return R===g.x&&z===g.y?g:new Ot(g.k,R,z)}function b(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function A(g,k,T,R){g.on("start.zoom",function(){C(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(R).end()}).tween("zoom",function(){var z=this,H=arguments,L=C(z,H).event(R),V=e.apply(z,H),B=T==null?b(V):typeof T=="function"?T.apply(z,H):T,ht=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),J=z.__zoom,tt=typeof k=="function"?k.apply(z,H):k,gt=l(J.invert(B).concat(ht/J.k),tt.invert(B).concat(ht/tt.k));return function(ut){if(ut===1)ut=tt;else{var xt=gt(ut),$=ht/xt[2];ut=new Ot($,B[0]-xt[0]*$,B[1]-xt[1]*$)}L.zoom(null,ut)}})}function C(g,k,T){return!T&&g.__zooming||new F(g,k)}function F(g,k){this.that=g,this.args=k,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,k),this.taps=0}F.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,k){return this.mouse&&g!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var k=W(this.that).datum();u.call(g,this.that,new eo(g,{sourceEvent:this.sourceEvent,target:d,type:g,transform:this.that.__zoom,dispatch:u}),k)}};function E(g,...k){if(!t.apply(this,arguments))return;var T=C(this,k).event(g),R=this.__zoom,z=Math.max(o[0],Math.min(o[1],R.k*Math.pow(2,n.apply(this,arguments)))),H=qt(g);if(T.wheel)(T.mouse[0][0]!==H[0]||T.mouse[0][1]!==H[1])&&(T.mouse[1]=R.invert(T.mouse[0]=H)),clearTimeout(T.wheel);else{if(R.k===z)return;T.mouse=[H,R.invert(H)],Jt(this),T.start()}Ge(g),T.wheel=setTimeout(L,x),T.zoom("mouse",r(S(M(R,z),T.mouse[0],T.mouse[1]),T.extent,i));function L(){T.wheel=null,T.end()}}function I(g,...k){if(c||!t.apply(this,arguments))return;var T=g.currentTarget,R=C(this,k,!0).event(g),z=W(g.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",ht,!0),H=qt(g,T),L=g.clientX,V=g.clientY;ia(g.view),$n(g),R.mouse=[H,this.__zoom.invert(H)],Jt(this),R.start();function B(J){if(Ge(J),!R.moved){var tt=J.clientX-L,gt=J.clientY-V;R.moved=tt*tt+gt*gt>v}R.event(J).zoom("mouse",r(S(R.that.__zoom,R.mouse[0]=qt(J,T),R.mouse[1]),R.extent,i))}function ht(J){z.on("mousemove.zoom mouseup.zoom",null),sa(J.view,R.moved),Ge(J),R.event(J).end()}}function O(g,...k){if(t.apply(this,arguments)){var T=this.__zoom,R=qt(g.changedTouches?g.changedTouches[0]:g,this),z=T.invert(R),H=T.k*(g.shiftKey?.5:2),L=r(S(M(T,H),R,z),e.apply(this,k),i);Ge(g),s>0?W(this).transition().duration(s).call(A,L,R,g):W(this).call(d.transform,L,R,g)}}function y(g,...k){if(t.apply(this,arguments)){var T=g.touches,R=T.length,z=C(this,k,g.changedTouches.length===R).event(g),H,L,V,B;for($n(g),L=0;L<R;++L)V=T[L],B=qt(V,this),B=[B,this.__zoom.invert(B),V.identifier],z.touch0?!z.touch1&&z.touch0[2]!==B[2]&&(z.touch1=B,z.taps=0):(z.touch0=B,H=!0,z.taps=1+!!f);f&&(f=clearTimeout(f)),H&&(z.taps<2&&(h=B[0],f=setTimeout(function(){f=null},p)),Jt(this),z.start())}}function N(g,...k){if(this.__zooming){var T=C(this,k).event(g),R=g.changedTouches,z=R.length,H,L,V,B;for(Ge(g),H=0;H<z;++H)L=R[H],V=qt(L,this),T.touch0&&T.touch0[2]===L.identifier?T.touch0[0]=V:T.touch1&&T.touch1[2]===L.identifier&&(T.touch1[0]=V);if(L=T.that.__zoom,T.touch1){var ht=T.touch0[0],J=T.touch0[1],tt=T.touch1[0],gt=T.touch1[1],ut=(ut=tt[0]-ht[0])*ut+(ut=tt[1]-ht[1])*ut,xt=(xt=gt[0]-J[0])*xt+(xt=gt[1]-J[1])*xt;L=M(L,Math.sqrt(ut/xt)),V=[(ht[0]+tt[0])/2,(ht[1]+tt[1])/2],B=[(J[0]+gt[0])/2,(J[1]+gt[1])/2]}else if(T.touch0)V=T.touch0[0],B=T.touch0[1];else return;T.zoom("touch",r(S(L,V,B),T.extent,i))}}function w(g,...k){if(this.__zooming){var T=C(this,k).event(g),R=g.changedTouches,z=R.length,H,L;for($n(g),c&&clearTimeout(c),c=setTimeout(function(){c=null},p),H=0;H<z;++H)L=R[H],T.touch0&&T.touch0[2]===L.identifier?delete T.touch0:T.touch1&&T.touch1[2]===L.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(L=qt(L,this),Math.hypot(h[0]-L[0],h[1]-L[1])<m)){var V=W(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return d.wheelDelta=function(g){return arguments.length?(n=typeof g=="function"?g:Ir(+g),d):n},d.filter=function(g){return arguments.length?(t=typeof g=="function"?g:Ir(!!g),d):t},d.touchable=function(g){return arguments.length?(a=typeof g=="function"?g:Ir(!!g),d):a},d.extent=function(g){return arguments.length?(e=typeof g=="function"?g:Ir([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),d):e},d.scaleExtent=function(g){return arguments.length?(o[0]=+g[0],o[1]=+g[1],d):[o[0],o[1]]},d.translateExtent=function(g){return arguments.length?(i[0][0]=+g[0][0],i[1][0]=+g[1][0],i[0][1]=+g[0][1],i[1][1]=+g[1][1],d):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},d.constrain=function(g){return arguments.length?(r=g,d):r},d.duration=function(g){return arguments.length?(s=+g,d):s},d.interpolate=function(g){return arguments.length?(l=g,d):l},d.on=function(){var g=u.on.apply(u,arguments);return g===u?d:g},d.clickDistance=function(g){return arguments.length?(v=(g=+g)*g,d):Math.sqrt(v)},d.tapDistance=function(g){return arguments.length?(m=+g,d):m},d}var X=(()=>{class t{static{this.svgNS="http://www.w3.org/2000/svg"}static get bodyFont(){if(!this._bodyFont){let r=getComputedStyle(document.body);this._bodyFont=`${r.fontSize} ${r.fontFamily}`}return this._bodyFont}static chartSize(r){if(!r)return{width:0,height:0};let n=r.parentNode;if(!n)return{width:0,height:0};let a=getComputedStyle(n);return{height:Math.round(n.clientHeight-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)),width:Math.round(n.clientWidth-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight))}}static xScale(r,n,a=!0,o=!1){let i;return o?i=Dr().domain(he(r)):i=At().domain(he(r)),a?i.rangeRound([0,n]):i.range([0,n]),i}static yScale(r,n,a=!0,o=!1){let i;return o?i=Dr().domain([0,Math.max(...r)]):i=At().domain([0,Math.max(...r)]),a?i.rangeRound([n,0]):i.range([n,0]),i}static colorScale(r,n){return n instanceof Array?At().domain(he(r)).range([n[0],n[1]]):At().domain(he(r)).rangeRound([0,n-1])}static arcTween(r,n,a){let o=Bt({startAngle:r.startAngle,endAngle:r.endAngle},{startAngle:n.startAngle,endAngle:n.endAngle});return i=>a(o(i))}static transitionsComplete(r,n){let a=0;r.each(()=>{a++}).on("end",()=>{a--,a===0&&n()})}static convertData(r,n){return r.map(a=>{let o=typeof a[n.value.toString()]=="number"?a[n.value.toString()]:a[n.value.toString()]instanceof Date?a[n.value.toString()].valueOf():parseInt(a[n.value.toString()],10);return{id:a[n.id],value:o,category:at(n.category)?a[n.category]:void 0,label:at(n.label)?a[n.label]:void 0,color:at(n.color)?a[n.color]:void 0}})}static getTextWidth(r,n=this.bodyFont){if(!at(r)||!r.length)return 0;let o=document.createElement("canvas").getContext("2d");return o.font=n,Math.ceil(o.measureText(r).width)}static getMaxTextWidth(r,n){if(!at(r)||!r.length)return 0;let a=0;return r.forEach(o=>{let i=this.getTextWidth(o,n);i>a&&(a=i)}),a}static trimText(r,n,a=!0,o=this.bodyFont){if(!at(r)||!r.length)return r;let s=document.createElement("canvas").getContext("2d");s.font=o;let l=Math.ceil(s.measureText(r).width);for(;l>n;)a?r=`${r.substring(0,r.length-4)}...`:r=r.slice(0,-1),l=Math.ceil(s.measureText(r).width);return r}static wrapText(r,n,a=this.bodyFont){if(!at(r)||!r.length)return r;let o=[],s=document.createElement("canvas").getContext("2d");s.font=a;let l=Math.ceil(s.measureText(r).width);if(l<n)return[r];let u="";for(let f of r)u+=f,l=Math.ceil(s.measureText(u).width),l>n&&(o.push(u.slice(0,-1)),u=f);return u.length&&o.push(u),o}}return t})();var Pn=class{static buildBarChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.valueTicks=e.valueTicks||5;let a=0,o=Math.max(...e.data.map(b=>b.value))||0,i=W(e.container),s=e.palette&&e.palette.length?X.colorScale(e.data.map(b=>b.value),e.palette.length===2?e.palette:e.palette.length):void 0,l=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,u=yt(e.valueTickValues)?e.valueTickValues:e.data.map(b=>at(l)?l(b.value):b.value.toString()),f=at(e.barPadding)?e.barPadding:20,h=at(e.barWidth)?e.barWidth:20,c={top:16,bottom:16,left:16+X.getMaxTextWidth(u,`${_.strings.FONT_SIZE_SMALL} ${_.strings.FONT_FAMILY}`),right:16},p=X.chartSize(e.container);p.width=e.data.length*(h+f);let x=X.yScale(e.data.map(b=>b.value),p.height-c.top-c.bottom).nice(),v=rr(x).ticks(e.valueTicks).tickSize(-p.width);if(yt(e.valueTickValues)){let b=At().domain([0,e.valueTickValues.length-1]).range([a,o]);e.valueTicks=[],e.valueTickValues?.forEach((A,C)=>{e.valueTicks.push(b(C))}),v.tickFormat((A,C)=>e.valueTickValues[C]||"")}yt(e.valueTicks)?v.tickValues(e.valueTicks):v.ticks(e.valueTicks),e.valueFormat?.length&&v.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&v.tickFormat(dt(e.valueDateFormat));let m=i.select(`g.${_.classes.CHART_ROOT}`);if(m.node()||(m=i.append("g").classed(_.classes.CHART_ROOT,!0),m.append("g").classed(_.classes.CHART_YAXIS,!0),m.append("g").classed(_.classes.CHART_XAXIS,!0),m.append("g").classed(`${_.classes.CHART_PREFIX}__chart`,!0).classed(`${_.classes.CHART_PREFIX}__bar`,!0)),i.attr("width",p.width+c.left),i.attr("height",p.height),i.select(`g.${_.classes.CHART_YAXIS}`).attr("transform",`translate(${c.left}, ${c.top})`).call(v),i.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${c.left}, ${p.height-c.bottom})`),yt(e.categoryTickValues)&&e.categoryTickValues?.length){let b=er(br().domain(e.categoryTickValues).range([0,p.width]));i.select(`g.${_.classes.CHART_XAXIS}`).call(b)}let d=m.select(`g.${_.classes.CHART_PREFIX}__bar`);d.attr("transform",`translate(${c.left}, -${c.bottom-c.top})`);let M=d.selectAll("rect").data(e.data,b=>b.id);M.exit().transition().duration(_.numbers.TRANSITION_DURATION).attr("y",b=>p.height-c.top).attr("height",0),M.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let S=M.enter();S.append("rect").attr("x",(b,A)=>A*(h+f)+f/2).attr("y",p.height-c.top).attr("width",b=>h).attr("height",0).merge(M).attr("id",b=>`${_.classes.CHART_PREFIX}__node-${b.id}`).transition().call(X.transitionsComplete,()=>{r()}).duration(_.numbers.TRANSITION_DURATION).attr("y",b=>b.value?x(b.value)+c.bottom:0).attr("height",b=>b.value?p.height-c.top-c.bottom-x(b.value):0).attr("fill",b=>b.color?b.color:s&&b.value&&e.palette?e.palette.length===2?s(b.value):e.palette[s(b.value)]:"#fff"),e.selectedCallback&&S.selectAll("rect").on("click",(b,A)=>e.selectedCallback(A,b.target)),e.hoverCallback&&(S.selectAll("rect").on("mouseenter",(b,A)=>e.hoverCallback(!0,A,b.target)),S.selectAll("rect").on("mouseleave",(b,A)=>e.hoverCallback(!1,A,b.target)))})}};var Fn=class{static buildBubbleChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=W(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(m=>m.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=10,l=X.chartSize(e.container),u=Ft({children:e.data}).sum(m=>m.value).sort((m,d)=>d.value-m.value);Ea().size([Math.min(l.width,l.height),Math.min(l.width,l.height)])(u);let h=a.select(`g.${_.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(_.classes.CHART_ROOT,!0),h.append("g").classed(`${_.classes.CHART_PREFIX}__chart`,!0).classed(`${_.classes.CHART_PREFIX}__bubble`,!0)),a.attr("width",l.width),a.attr("height",l.height);let p=h.select(`g.${_.classes.CHART_PREFIX}__bubble`).selectAll("g").data(u.leaves(),m=>m.data.id);p.exit().select("text").remove(),p.exit().select("circle").transition().duration(_.numbers.TRANSITION_DURATION).attr("r",0),p.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("circle"),x.append("clipPath").attr("id",m=>`${_.classes.CHART_CLIP}-${m.data.id}`).append("circle"),x.append("text").classed(_.classes.CHART_TEXT,!0).attr("clip-path",m=>`url(#${_.classes.CHART_CLIP}-${m.data.id})`).style("text-anchor","middle"),e.selectedCallback&&x.on("click",(m,d)=>e.selectedCallback(d.data,m.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(m,d)=>e.hoverCallback(!0,d.data,m.target)),x.on("mouseleave",(m,d)=>e.hoverCallback(!1,d.data,m.target)));let v=x.merge(p);v.select("text").style("display","none").attr("y",".35em").text(m=>i?i(m.data.value):m.data.value),v.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",m=>"translate("+m.x+","+m.y+")"),v.select("g > circle").attr("fill",m=>m.data.color?m.data.color:o&&m.value&&e.palette?e.palette.length===2?o(m.value):e.palette[o(m.value)]:"#fff").attr("id",m=>`${_.classes.CHART_PREFIX}__node-${m.data.id}`).transition().call(X.transitionsComplete,()=>{v.select("clipPath > circle").attr("r",m=>m.r>s/2?m.r-s/2:0),v.select("text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).attr("r",m=>m.r)})}};function ml(t,e){return ot(t,e?.in).getDay()===0}function dl(t,e){let r,n=e?.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=Re.bind(null,a));let o=ot(a,n);(!r||r<o||isNaN(+o))&&(r=o)}),Re(n,r||NaN)}function gl(t,e){let r,n=e?.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=Re.bind(null,a));let o=ot(a,n);(!r||r>o||isNaN(+o))&&(r=o)}),Re(n,r||NaN)}function zn(t,e){let r=+ot(t)-+ot(e);return r<0?-1:r>0?1:r}function xl(t,e,r){let[n,a]=Ee(r?.in,t,e),o=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return o*12+i}function Hn(t,e,r){let[n,a]=Ee(r?.in,t,e),o=yl(n,a),i=Math.abs(Uo(n,a));n.setDate(n.getDate()-o*i);let s=+(yl(n,a)===-o),l=o*(i-s);return l===0?0:l}function yl(t,e){let r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function vl(t){return e=>{let n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function _l(t,e){let r=ot(t,e?.in);return r.setHours(23,59,59,999),r}function bl(t,e){let r=ot(t,e?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function wl(t,e){let r=ot(t,e?.in);return+_l(r,e)==+bl(r,e)}function Tl(t,e,r){let[n,a,o]=Ee(r?.in,t,t,e),i=zn(a,o),s=Math.abs(xl(a,o));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*s);let l=zn(a,o)===-i;wl(n)&&s===1&&zn(n,o)===1&&(l=!1);let u=i*(s-+l);return u===0?0:u}function Cl(t,e,r){let n=Hn(t,e,r)/7;return vl(r?.roundingMethod)(n)}function Ln(t,e){return ot(t,e?.in).getDay()}function Ml(t,e){return ot(t,e?.in).getDay()===1}function kl(t,e,r){return Lr(t,-e,r)}function Al(t,e,r){let n=e-Ln(t,r);return n<=0&&(n+=7),Lr(t,n,r)}function Sl(t,e){return Al(t,0,e)}function Dl(t,e,r){let n=Ln(t,r)-e;return n<=0&&(n+=7),kl(t,n,r)}function Nl(t,e){return Dl(t,1,e)}var Un=class{static buildGanttChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=gl(e.data.map(I=>I.startDate));Ml(a)||(a=Nl(a));let o=dl(e.data.map(I=>I.endDate));ml(o)||(o=Sl(o));let i=W(e.container),s,l=16,u=40,f={top:16,bottom:16,left:16,right:16},h=X.chartSize(e.container);h.height=e.data.length*(u+l);let c=8,p={x:8,y:16},x=oe,v="",m=0;switch(e.categoryTimeSpan){case"year":x=bt,v="%Y";break;case"week":x=It,v="%m/%d",m=Cl(o,a);break;case"day":x=Nt,v="%m/%d",m=Hn(o,a);break;default:v="%m/%y",m=Tl(o,a);break}h.width<m*48&&(h.width=m*48);let d=X.xScale([a,o],h.width-f.left-f.right,!1,!0).nice(),M=ea(d).ticks(x,v).tickSize(-h.height),S=i.select(`g.${_.classes.CHART_ROOT}`);S.node()||(S=i.append("g").classed(_.classes.CHART_ROOT,!0),S.append("g").classed(_.classes.CHART_XAXIS,!0),S.append("g").classed(`${_.classes.CHART_PREFIX}__gantt`,!0),s=W(e.container.parentElement).append("div").classed(`${_.classes.CHART_POPOVER}`,!0)),i.attr("width",h.width),i.attr("height",h.height+f.bottom),i.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${f.left}, ${f.top})`).call(M);let b=S.select(`g.${_.classes.CHART_PREFIX}__gantt`);b.attr("transform",`translate(${f.left}, -${f.bottom-f.top})`);let A=b.selectAll("g").data(e.data,I=>I.id);A.exit().transition().duration(_.numbers.TRANSITION_DURATION).attr("width",0),A.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let C=A.enter().append("g").attr("id",I=>`${_.classes.CHART_PREFIX}__node-${I.id}`).on("mouseenter",(I,O)=>{let y=`
            <span style="grid-column: 1 / -1; font-weight: 700">${O.label}</span>
            <span>Start</span>
            <span style="justify-self: end">${Zn(O.startDate,"MM/dd/yyyy")}</span>
            <span>End</span>
            <span style="justify-self: end">${Zn(O.endDate,"MM/dd/yyyy")}</span>
            <span>Progress</span>
            <span style="justify-self: end">${O.progress||0}%</span>
          `;O.description?.length&&(y+=`<span style="grid-column: 1 / -1; font-size: .75rem;">${O.description}</span>`),s.html(y).style("top",`${I.layerY}px`).style("left",`${I.layerX}px`).style("visibility","visible"),e.hoverCallback&&e.hoverCallback(!0,O,I.target)}).on("mouseleave",(I,O)=>{s.style("visibility",null),e.hoverCallback&&e.hoverCallback(!1,O,I.target)});e.selectedCallback&&C.on("click",(I,O)=>e.selectedCallback(O,I.target.parentElement));let F=C.append("defs").append("linearGradient").attr("id",(I,O)=>`meter-gradient--${O}`);F.append("stop").attr("offset","0%").attr("stop-color",_.chartPalette.indigoA200),F.append("stop").attr("offset",I=>`${I.progress||0}%`).attr("stop-color",_.chartPalette.indigoA200),F.append("stop").attr("offset",I=>`${I.progress||0}%`).attr("stop-color",_.chartPalette.indigo200),F.append("stop").attr("offset","100%").attr("stop-color",_.chartPalette.indigo200),C.append("rect").classed(_.classes.CHART_NODE,!0).attr("width",0).attr("height",u).attr("rx",4).style("stroke",I=>I.color?.length?I.color:_.chartTheme.outlineMedium).style("fill",_.chartTheme.surfaceDim),C.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",p.x).attr("y",p.y).style("font-size",".85rem").style("stroke",_.chartTheme.surfaceDim).style("stroke-width",".5rem").style("fill",_.chartTheme.textHigh).style("paint-order","stroke").style("stroke-linejoin","round").style("display","none"),C.append("rect").classed(_.classes.CHART_METER,!0).attr("x",p.x).attr("y",u-c-p.x).attr("width",0).attr("height",c).style("fill",(I,O)=>`url(#meter-gradient--${O})`);let E=C.merge(A);E.attr("transform",(I,O)=>`translate(${d(I.startDate)}, ${O*(u+l)+f.top+l/2})`),E.select(`g > .${_.classes.CHART_NODE}`).transition().duration(_.numbers.TRANSITION_DURATION).attr("width",I=>{let O=d(I.endDate)-d(I.startDate);return O>0?O:0}),E.select(`g > .${_.classes.CHART_METER}`).transition().duration(_.numbers.TRANSITION_DURATION).attr("width",I=>{let O=d(I.endDate)-d(I.startDate)-p.x*2;return O>0?O:0}),E.select("g > text").transition().call(X.transitionsComplete,()=>{E.select("g > text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).text((I,O,y)=>`${I.label}`)})}};function Il(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _m(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Il(Object(r),!0).forEach(function(n){bm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Il(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Er(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Er=function(e){return typeof e}:Er=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(t)}function bm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xn(){return Xn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xn.apply(this,arguments)}function wm(t,e){if(t){if(typeof t=="string")return Rl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rl(t,e)}}function Rl(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $l(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=wm(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,i=!1,s;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){i=!0,s=l},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(i)throw s}}}}function Tm(t,e){var r=[],n=[];function a(o,i){if(o.length===1)r.push(o[0]),n.push(o[0]);else{for(var s=Array(o.length-1),l=0;l<s.length;l++)l===0&&r.push(o[0]),l===s.length-1&&n.push(o[l+1]),s[l]=[(1-i)*o[l][0]+i*o[l+1][0],(1-i)*o[l][1]+i*o[l+1][1]];a(s,i)}}return t.length&&a(t,e),{left:r,right:n.reverse()}}function Cm(t){var e={};return t.length===4&&(e.x2=t[2][0],e.y2=t[2][1]),t.length>=3&&(e.x1=t[1][0],e.y1=t[1][1]),e.x=t[t.length-1][0],e.y=t[t.length-1][1],t.length===4?e.type="C":t.length===3?e.type="Q":e.type="L",e}function Mm(t,e){e=e||2;for(var r=[],n=t,a=1/e,o=0;o<e-1;o++){var i=a/(1-a*o),s=Tm(n,i);r.push(s.left),n=s.right}return r.push(n),r}function km(t,e,r){var n=[[t.x,t.y]];return e.x1!=null&&n.push([e.x1,e.y1]),e.x2!=null&&n.push([e.x2,e.y2]),n.push([e.x,e.y]),Mm(n,r).map(Cm)}var Am=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,Qe={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(Qe).forEach(function(t){Qe[t.toLowerCase()]=Qe[t]});function ao(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=e;return r}function Sm(t){return"".concat(t.type).concat(Qe[t.type].map(function(e){return t[e]}).join(","))}function Dm(t,e){var r={x1:"x",y1:"y",x2:"x",y2:"y"},n=["xAxisRotation","largeArcFlag","sweepFlag"];if(t.type!==e.type&&e.type.toUpperCase()!=="M"){var a={};Object.keys(e).forEach(function(o){var i=e[o],s=t[o];s===void 0&&(n.includes(o)?s=i:(s===void 0&&r[o]&&(s=t[r[o]]),s===void 0&&(s=0))),a[o]=s}),a.type=e.type,t=a}return t}function Nm(t,e,r){var n=[];if(e.type==="L"||e.type==="Q"||e.type==="C")n=n.concat(km(t,e,r));else{var a=Xn({},t);a.type==="M"&&(a.type="L"),n=n.concat(ao(r-1).map(function(){return a})),n.push(e)}return n}function El(t,e,r){var n=t.length-1,a=e.length-1,o=n/a,i=ao(a).reduce(function(l,u,f){var h=Math.floor(o*f);if(r&&h<t.length-1&&r(t[h],t[h+1])){var c=o*f%1<.5;l[h]&&(c?h>0?h-=1:h<t.length-1&&(h+=1):h<t.length-1?h+=1:h>0&&(h-=1))}return l[h]=(l[h]||0)+1,l},[]),s=i.reduce(function(l,u,f){if(f===t.length-1){var h=ao(u,Xn({},t[t.length-1]));return h[0].type==="M"&&h.forEach(function(c){c.type="L"}),l.concat(h)}return l.concat(Nm(t[f],t[f+1],u))},[]);return s.unshift(t[0]),s}function Ol(t){for(var e=(t||"").match(Am)||[],r=[],n,a,o=0;o<e.length;++o)if(n=Qe[e[o]],n){a={type:e[o]};for(var i=0;i<n.length;++i)a[n[i]]=+e[o+i+1];o+=n.length,r.push(a)}return r}function Im(t,e,r){var n=t==null?[]:t.slice(),a=e==null?[]:e.slice(),o=Er(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return[]};var l=(n.length===0||n[n.length-1].type==="Z")&&(a.length===0||a[a.length-1].type==="Z");n.length>0&&n[n.length-1].type==="Z"&&n.pop(),a.length>0&&a[a.length-1].type==="Z"&&a.pop(),n.length?a.length||a.push(n[0]):n.push(a[0]);var u=Math.abs(a.length-n.length);u!==0&&(a.length>n.length?n=El(n,a,i):a.length<n.length&&(a=El(a,n,i))),n=n.map(function(h,c){return Dm(h,a[c])});var f=n.map(function(h){return _m({},h)});return l&&(f.push({type:"Z"}),n.push({type:"Z"})),function(c){if(c===1&&s)return e??[];if(c===0)return n;for(var p=0;p<f.length;++p){var x=n[p],v=a[p],m=f[p],d=$l(Qe[m.type]),M;try{for(d.s();!(M=d.n()).done;){var S=M.value;m[S]=(1-c)*x[S]+c*v[S],(S==="largeArcFlag"||S==="sweepFlag")&&(m[S]=Math.round(m[S]))}}catch(b){d.e(b)}finally{d.f()}}return f}}function Or(t,e,r){var n=Ol(t),a=Ol(e),o=Er(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return""};var l=Im(n,a,{excludeSegment:i,snapEndsToInput:s});return function(f){if(f===1&&s)return e??"";var h=l(f),c="",p=$l(h),x;try{for(p.s();!(x=p.n()).done;){var v=x.value;c+=Sm(v)}}catch(m){p.e(m)}finally{p.f()}return c}}var Yn=class{static buildLineChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.categoryTicks=e.categoryTicks||10,e.valueTicks=e.valueTicks||5;let a=e.data.map(E=>E.data).reduce((E,I)=>E.concat(I),[]),o=a.map(E=>E.value),i=a.map(E=>parseFloat(E.category)).filter((E,I,O)=>O.indexOf(E)===I).sort((E,I)=>E-I),s=Math.min(...o)||0,l=Math.max(...o)||0,u=Math.min(...i)||0,f=Math.max(...i)||0,h=W(e.container),c=2,p={top:16,bottom:16,left:16+X.getTextWidth(l.toString(),`${_.strings.FONT_SIZE_SMALL} ${_.strings.FONT_FAMILY}`),right:16},x=X.chartSize(e.container),v=X.xScale([u,f],x.width-p.left-p.right),m=er(v);if(yt(e.categoryTickValues)){let E=At().domain([0,e.categoryTickValues.length-1]).range([u,f]);e.categoryTicks=[],e.categoryTickValues?.forEach((I,O)=>{e.categoryTicks.push(E(O))}),m.tickFormat((I,O)=>e.categoryTickValues[O]||"")}yt(e.categoryTicks)?m.tickValues(e.categoryTicks):m.ticks(e.categoryTicks),e.categoryFormat&&m.tickFormat(mt(e.categoryFormat)),e.categoryDateFormat&&m.tickFormat(dt(e.categoryDateFormat));let d=X.yScale([s,l],x.height-p.top-p.bottom),M=rr(d).tickSize(-(x.width-p.left-p.right));if(yt(e.valueTickValues)){let E=At().domain([0,e.valueTickValues.length-1]).range([s,l]);e.valueTicks=[],e.valueTickValues?.forEach((I,O)=>{e.valueTicks.push(E(O))}),M.tickFormat((I,O)=>e.valueTickValues[O]||"")}yt(e.valueTicks)?M.tickValues(e.valueTicks):M.ticks(e.valueTicks),e.valueFormat&&M.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&M.tickFormat(dt(e.valueDateFormat));let S=Ze().x(E=>v(E.category)).y(E=>d(E.value)),b=Ze().x(E=>v(E.category)).y(x.height-p.top),A=h.select(`g.${_.classes.CHART_ROOT}`);A.node()||(A=h.append("g").classed(_.classes.CHART_ROOT,!0),A.append("g").classed(_.classes.CHART_XAXIS,!0),yt(e.categoryTickValues)&&A.select(`g.${_.classes.CHART_XAXIS}`).classed(`${_.classes.CHART_PREFIX}__xaxis--align-boundry-ticks`,!0),A.append("g").classed(_.classes.CHART_YAXIS,!0),A.append("g").classed(`${_.classes.CHART_PREFIX}__line`,!0)),h.attr("width",x.width),h.attr("height",x.height),h.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${p.left}, ${x.height-p.bottom})`).call(m),h.select(`g.${_.classes.CHART_YAXIS}`).attr("transform",`translate(${p.left}, ${p.top})`).call(M);let C=A.select(`g.${_.classes.CHART_PREFIX}__line`);C.attr("transform",`translate(${p.left+c}, ${p.top})`),e.data.forEach((E,I)=>{let O=C.selectAll(`path.path-${E.id}`).data([E],N=>N.id);O.exit().remove(),O.enter().append("path").classed(`path-${E.id}`,!0).style("fill","none").style("stroke-linejoin","round").style("stroke-linecap","round").attr("d",N=>b(N.data)).merge(O).attr("stroke",N=>N.color).transition().duration(_.numbers.TRANSITION_DURATION).call(X.transitionsComplete,()=>{I===e.data.length-1&&r()}).attrTween("d",(N,w,g)=>{let k=g[0].getAttribute("d"),T=S(N.data);return Or(k,T)})});let F=C.selectAll("path").nodes();if(F.length>e.data.length)for(let E=F.length;E>e.data.length;E--)F[E-1]?.remove()})}};var je=class{static buildPieChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=[],o=W(e.container),i=e.palette&&e.palette.length?X.colorScale(e.data.map(d=>d.value),e.palette.length===2?e.palette:e.palette.length):void 0,s=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,l=X.chartSize(e.container),u={outer:Math.min(l.width,l.height)/2,inner:0};(e.type==="donut"||e.type==="donut-meter")&&(u.inner=u.outer-u.outer*.35);let f=Ja().outerRadius(u.outer).innerRadius(u.inner),h=to().value(d=>d.value).sort(null),c=o.select(`g.${_.classes.CHART_ROOT}`);c.node()||(c=o.append("g").classed(_.classes.CHART_ROOT,!0),c.append("g").classed(`${_.classes.CHART_PREFIX}__${e.type}`,!0)),o.attr("width",l.width),o.attr("height",l.height);let p=c.select(`g.${_.classes.CHART_PREFIX}__${e.type}`);p.attr("transform",`translate(${u.outer}, ${u.outer})`),p.selectAll("g").select("path").each(d=>{a[d.data.id]={startAngle:d.startAngle,endAngle:d.endAngle}});let x=p.selectAll("g").data(h(e.data),d=>d.data.id);x.exit().select("path").transition().duration(_.numbers.TRANSITION_DURATION).attrTween("d",d=>X.arcTween(d,{startAngle:0,endAngle:0},f)),x.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let v=x.enter().append("g");v.append("path"),e.selectedCallback&&v.on("click",(d,M)=>e.selectedCallback(M.data,d.target.parentElement)),e.hoverCallback&&(v.on("mouseenter",(d,M)=>e.hoverCallback(!0,M.data,d.target)),v.on("mouseleave",(d,M)=>e.hoverCallback(!1,M.data,d.target))),v.merge(x).select("g > path").attr("fill",d=>d.data.color?d.data.color:i&&d.value&&e.palette?e.palette.length===2?i(d.value):e.palette[i(d.value)]:"#fff").attr("id",d=>`${_.classes.CHART_PREFIX}__node-${d.data.id}`).transition().call(X.transitionsComplete,()=>{switch(e.type){case"donut-meter":if(!e.hideLabel){let d=p.select("."+_.classes.CHART_TEXT);d.node()||(d=p.append("text").style("fill",_.chartTheme.textHigh).style("text-anchor","middle").classed(_.classes.CHART_TEXT,!0),d.append("tspan").style("font-size","2rem").classed(_.classes.CHART_TEXT_VALUE,!0),d.append("tspan").attr("x",0).attr("y",0).attr("dy","1.25em").classed(_.classes.CHART_TEXT_LABEL,!0));let M="";e.centerValue?M=e.centerValue:s?M=s(e.data[0].value):M=e.data[0].value.toString(),d.select(`tspan.${_.classes.CHART_TEXT_VALUE}`).text(M),d.select(`tspan.${_.classes.CHART_TEXT_LABEL}`).text(at(e.data[0].label)?e.data[0].label:"");break}}r()}).duration(_.numbers.TRANSITION_DURATION).style("stroke","#fff").attrTween("d",d=>X.arcTween(a[d.data.id]||{startAngle:0,endAngle:0},d,f))})}};var Pl=(()=>{class t{static{this.hasChildren=r=>r.data.children===!0||yt(r.data.children)&&r.data.children.length>0}static{this.getParentIds=r=>{let n=[],a=r.parent;for(;a;)n.push(a.data.id),a=a.parent;return n.reverse().slice(1)}}static{this.getParentDepths=r=>{let n=[],a=r.parent;for(;a;)n.push(a.depth),a=a.parent;return n.reverse().slice(1)}}static{this.nodeCenterHorizontal=(r,n,a=r.x)=>Math.round(a-n/2)}static buildTreeChart(r){return new Promise((n,a)=>{if(!r.container||r.container.tagName!=="svg"){a();return}let o=W(r.container),i={width:0,height:0},s=[],l=8,u="#212121",f={width:o.attr("width")?parseInt(o.attr("width"),10):0,height:o.attr("height")?parseInt(o.attr("height"),10):0},h=Ft(r.data),p=Pa().nodeSize([r.node.size.width+24,r.node.size.height+r.node.margin]).separation((y,N)=>y.parent===N.parent?1:1.25)(h),x=0,v=0;p.descendants().filter(y=>y.depth>0).forEach(y=>{if(!at(y.data.nodeId)){let N=this.getParentDepths(y),w=[];this.getParentIds(y).forEach((g,k)=>{w.push(`${N[k]}-${g}`)}),w.push(`${y.depth}-${y.data.id}`),y.data.nodeId=w.join("--")}y.y=(y.depth-1)*(r.node.size.height+r.node.margin),y.y>i.height&&(i.height=y.y),y.x>v?v=y.x:y.x<x&&(x=y.x)});let m=o.select(`g.${_.classes.CHART_ROOT}`);m.node()||(m=o.append("g").classed(_.classes.CHART_ROOT,!0),m.append("g").classed(`${_.classes.CHART_PREFIX}__tree`,!0));let d=m.node().getCTM().a;if(i.width=(Math.abs(x)+v+r.node.size.width)*d+l*2,i.height=(i.height+r.node.size.height)*d+l*2,f.width<i.width&&o.attr("width",i.width),f.height<i.height&&o.attr("height",i.height),r.zoomScale){let y=_o(o.node().parentElement,!0),N={left:0,top:0,x:0,y:0};o.style("cursor","grab"),o.call(no().scaleExtent([r.zoomScale.min,r.zoomScale.max]).on("zoom",w=>{if(w.sourceEvent.type==="mousemove")y&&(y.scrollTop=N.top+(N.y-w.sourceEvent.clientY),y.scrollLeft=N.left+(N.x-w.sourceEvent.clientX));else if(w.sourceEvent.type==="wheel"){m.attr("transform",`scale(${w.transform.k},${w.transform.k})`);let g=m.node().getBBox();i.width=g.width*w.transform.k+l*2,i.height=g.height*w.transform.k+l*2,o.attr("width",i.width),o.attr("height",i.height)}}).on("start",w=>{w.sourceEvent.type==="mousedown"&&(N={left:y.scrollLeft,top:y.scrollTop,x:w.sourceEvent.clientX,y:w.sourceEvent.clientY})}))}let M=m.select(`g.${_.classes.CHART_PREFIX}__tree`);M.attr("transform",`translate(${Math.abs(x)+Math.round(r.node.size.width/2)+l}, ${l})`);let S=M.selectAll(`.${_.classes.CHART_PREFIX}__tree__node`).data(h.descendants().filter(y=>y.depth>0),y=>y.data.nodeId),b=S.exit();b.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",y=>y.parent?`translate(${this.nodeCenterHorizontal(y,r.node.size.width,y.parent.x)}, ${y.parent.y})`:`translate(${this.nodeCenterHorizontal(y,r.node.size.width)}, ${y.y})`).remove();let A=S.enter().append("g").classed(`${_.classes.CHART_PREFIX}__tree__node`,!0).attr("transform",y=>y.parent?`translate(${this.nodeCenterHorizontal(y,r.node.size.width,y.parent.x)}, ${y.parent.y})`:`translate(${this.nodeCenterHorizontal(y,r.node.size.width)}, ${y.y})`).attr("cursor",y=>y.data.children===!0||yt(y.data.children)&&y.data.children.length?"pointer":"default");A.append("rect").attr("width",r.node.size.width).attr("height",r.node.size.height).attr("rx",4).style("stroke",_.chartTheme.outlineMedium).style("fill",y=>r.palette[y.depth-Math.trunc(y.depth/r.palette.length)*r.palette.length]),r.nodeBuilder?r.nodeBuilder(A):A.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",r.node.padding).attr("y",r.node.size.height/2).style("pointer-events","none").style("dominant-baseline","middle").text((y,N)=>{if(!at(y.data.label))return null;let w=r.node.size.width-r.node.padding*2;return r.popoverCallback&&(w=w-24),this.hasChildren(y)&&(w=w-24),X.trimText(y.data.label,w)}),r.selectedCallback&&A.on("click",(y,N)=>r.selectedCallback(N.data,this.getParentIds(N),y.target.parentElement)),r.hoverCallback&&(A.on("mouseenter",(y,N)=>r.hoverCallback(!0,N.data,this.getParentIds(N),y.target)),A.on("mouseleave",(y,N)=>r.hoverCallback(!1,N.data,this.getParentIds(N),y.target)));let C=A.merge(S);C.transition().call(X.transitionsComplete,()=>{f.width>i.width&&o.attr("width",i.width),f.height>i.height&&o.attr("height",i.height);let y=A.nodes().length?A.data()[0].parent:b.nodes().length?b.data().sort((N,w)=>N.depth<w.depth)[0].parent:null;if(at(y)&&y.depth>0){let N=S.filter(w=>w.data.nodeId===y.data.nodeId).node();N&&N.scrollIntoView({behavior:"smooth"})}n()}).duration(_.numbers.TRANSITION_DURATION).attr("transform",y=>`translate(${this.nodeCenterHorizontal(y,r.node.size.width)}, ${y.y})`);let F=(y,N)=>{let w=(y.y-N.y)/2;return Ze()([[y.x,y.y],[y.x,y.y-w],[N.x,N.y+w],[N.x,N.y]])},E=M.selectAll(`.${_.classes.CHART_PREFIX}__tree__path`).data(h.descendants().filter(y=>y.depth>1),y=>y.data.nodeId);if(E.exit().transition().duration(_.numbers.TRANSITION_DURATION).attrTween("d",(y,N,w)=>{let g=w[N].getAttribute("d"),k=F({x:Math.round(y.parent.x),y:Math.round(y.parent.y+r.node.size.height)},{x:Math.round(y.parent.x),y:Math.round(y.parent.y+r.node.size.height)});return Or(g,k)}).remove(),E.enter().insert("path").classed(`${_.classes.CHART_PREFIX}__tree__path`,!0).style("fill","none").style("stroke",_.chartTheme.outlineMedium).style("shape-rendering","crispEdges").style("stroke-width","2").merge(E).transition().call(X.transitionsComplete,()=>{M.selectAll(`.${_.classes.CHART_PREFIX}__tree__path-label`).raise()}).duration(_.numbers.TRANSITION_DURATION).attrTween("d",(y,N,w)=>{let g=w[N].getAttribute("d"),k=F({x:Math.round(y.parent.x),y:Math.round(y.parent.y+r.node.size.height)},{x:Math.round(y.x),y:Math.round(y.y)});return Or(g,k)}),r.levelLabels.length){let y=M.selectAll(`.${_.classes.CHART_PREFIX}__tree__path-label`).data(h.descendants().filter(k=>k.depth>0&&yt(k.data.children)&&k.data.children.length),k=>k.data.nodeId),N=24,w=y.enter().insert("g").classed(`${_.classes.CHART_PREFIX}__tree__path-label`,!0).attr("visibility","hidden").attr("transform",k=>`translate(${this.nodeCenterHorizontal(k,r.node.size.width)}, ${k.y+r.node.size.height+r.node.padding})`);w.append("rect").attr("width",k=>{let T=k.depth-1,R=r.levelLabels[T];return!at(R)||!R.length?(s[T]=0,0):(s[T]||(s[T]=X.getTextWidth(R,"14px Roboto, sans-serif")+N),s[T])}).attr("transform",k=>`translate(${r.node.size.width/2-s[k.depth-1]/2}, 0)`).attr("height",N).attr("rx",N/2).style("fill",_.chartTheme.outlineMedium),w.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",Math.round(r.node.size.width/2)).attr("y",N/2).style("pointer-events","none").style("dominant-baseline","middle").style("text-anchor","middle").style("font-size","14px").style("fill",_.chartTheme.textInverse).text(k=>r.levelLabels[k.depth-1]),y.exit().remove(),w.merge(y).transition().call(X.transitionsComplete,()=>{w.attr("visibility",null),n()}).duration(_.numbers.TRANSITION_DURATION).attr("transform",k=>`translate(${this.nodeCenterHorizontal(k,r.node.size.width)}, ${k.y+r.node.size.height+(r.node.margin-N)/2})`)}C.each((y,N)=>{let w=W(C.nodes()[N]),g=W(w.node()?.querySelector(`.${_.classes.CHART_PREFIX}__tree__node__children-icon`));if(this.hasChildren(y)?g.node()||w.append("path").classed(`${_.classes.CHART_PREFIX}__tree__node__children-icon`,!0).attr("d","M0,0L12,0L6,6,L0,0").attr("transform",`translate(${r.node.size.width-20}, ${r.node.size.height/2-4})`).style("fill",u):g.node()&&g.remove(),r.popoverCallback){let k=W(w.node()?.querySelector(`.${_.classes.CHART_PREFIX}__tree__node__info-icon`));if(!k.node()){let T=this.hasChildren(y)?r.node.size.width-54:r.node.size.width-32;k=w.append("path").classed(`${_.classes.CHART_PREFIX}__tree__node__info-icon`,!0).attr("d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z").attr("transform",`translate(${T}, ${r.node.size.height/2-12})`).style("fill",u).attr("cursor","pointer").on("click",R=>{R.stopPropagation();let z=JSON.parse(JSON.stringify(y.data));delete z.children,delete z.nodeId,r.popoverCallback(z,this.getParentIds(y),k.node())})}}})})}}return t})();var Vn=class{static buildTreemapChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=W(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(m=>m.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=8,l=X.chartSize(e.container),u=Ft({children:e.data}).sum(m=>m.value).sort((m,d)=>d.value-m.value);Fa().size([l.width,l.height])(u);let h=a.select(`g.${_.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(_.classes.CHART_ROOT,!0),h.append("g").classed(`${_.classes.CHART_PREFIX}__treemap`,!0)),a.attr("width",l.width),a.attr("height",l.height);let p=h.select(`g.${_.classes.CHART_PREFIX}__treemap`).selectAll("g").data(u.leaves(),m=>m.data.id);p.exit().select("text").remove(),p.exit().select("rect").transition().duration(_.numbers.TRANSITION_DURATION).attr("width",0).attr("height",0),p.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("rect"),x.append("clipPath").attr("id",m=>`${_.classes.CHART_CLIP}-${m.data.id}`).append("rect"),x.append("text").classed(_.classes.CHART_TEXT,!0).attr("clip-path",m=>`url(#${_.classes.CHART_CLIP}-${m.data.id})`).attr("dx",5).attr("dy",20),e.selectedCallback&&x.on("click",(m,d)=>e.selectedCallback(d.data,m.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(m,d)=>e.hoverCallback(!0,d.data,m.target)),x.on("mouseleave",(m,d)=>e.hoverCallback(!1,d.data,m.target)));let v=x.merge(p);v.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",m=>`translate(${m.x0}, ${m.y0})`),v.select("text").style("display","none").text(m=>i?i(m.data.value):m.data.value),v.select("rect").attr("fill",m=>m.color?m.color:o&&m.value&&e.palette?e.palette.length===2?o(m.value):e.palette[o(m.value)]:"#fff").style("stroke","#fff").attr("id",m=>`${_.classes.CHART_PREFIX}__node-${m.data.id}`).transition().call(X.transitionsComplete,()=>{v.select("clipPath > rect").attr("x",m=>s/2).attr("y",m=>s/2).attr("width",m=>m.x1-m.x0>s?m.x1-m.x0-s:0).attr("height",m=>m.y1-m.y0>s?m.y1-m.y0-s:0),v.select("text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).attr("width",m=>m.x1-m.x0).attr("height",m=>m.y1-m.y0)})}};var Em=["chartContainer"];function Om(t,e){if(t&1&&(Q(0,"forge-list-item"),Qt(1,"div",5),Q(2,"span"),nt(3),j(),Q(4,"span",6),nt(5),j()()),t&2){let r=e.$implicit;et(),fo("--item-color",r.color),et(2),Wn(r.label),et(2),Wn(r.value)}}function $m(t,e){if(t&1&&(Q(0,"div",3)(1,"forge-list",4),po(2,Om,6,4,"forge-list-item",null,ho),j()()),t&2){let r=Ke();et(2),mo(r.legendData)}}var qn=(()=>{class t{constructor(){this.destroyRef=Pr(Fr),this.chartContainer=ue("chartContainer"),this.chartPalette=Object.keys(_.chartPalette).map(r=>_.chartPalette[r]),this.#t=P.bar,this.donutMeterChartData=0,this.showLegend=!1}#t;set chartType(r){this.#t=r,this.setChartData("create"),this.initializeChartContainer(),setTimeout(()=>{this.drawChart()},100),this.#t===P.donutMeter||this.#t===P.gantt||this.#t===P.treemap||this.#t===P.tree?this.showLegend=!1:this.showLegend=!0}get chartType(){return this.#t}ngOnInit(){Ut(window,"resize").pipe(Xt(this.destroyRef),$r(100)).subscribe(()=>this.drawChart())}onAction(r){this.setChartData(r),this.drawChart()}initializeChartContainer(){let r=this.chartContainer();(r?.nativeElement).querySelector("svg")?.remove();let n=document.createElementNS("http://www.w3.org/2000/svg","svg");(r?.nativeElement).appendChild(n)}setChartData(r){if(this.chartType===P.donutMeter){this.donutMeterChartData=this.randomNumber(20,80);return}switch(r){case"create":{this.chartType===P.line?this.lineChartData=[this.getData(10)]:this.chartType===P.tree?this.treeChartData={id:"0",children:[{id:"0-1",label:"Item 0-1",children:!0},{id:"0-2",label:"Item 0-2",children:!0}]}:this.chartData=this.getData(10);break}case"update":{this.chartType===P.line?this.lineChartData?.forEach((n,a)=>{this.getData(n.length).forEach((o,i)=>{n[i].value=o.value})}):this.getData(this.chartData.length).forEach((n,a)=>{this.chartData[a].value=n.value});break}case"add":{if(this.chartType===P.line)this.lineChartData?.push(this.getData(10));else{let n=Math.max(...this.chartData.map(a=>a.id))||0;n++,this.chartData=this.chartData?.concat(this.getData(10,n))}break}case"delete":{this.chartType===P.line?this.lineChartData?.pop():this.chartData.length>10&&(this.chartData=this.chartData?.slice(0,this.chartData.length-10));break}}(this.chartType===P.bubble||this.chartType===P.donut||this.chartType===P.pie||this.chartType===P.treemap)&&(this.chartData=this.chartData?.sort((n,a)=>n.category-a.category))}getData(r,n=0){let a=[],o=Date.now();for(let i=0;i<r;i++)a.push({id:i+n,value:this.randomNumber(0,1e3),label:`Item ${i+n}`,category:this.randomNumber(0,100)});return console.log(a.sort((i,s)=>i.category-s.category)),a.sort((i,s)=>i.category-s.category)}drawChart(){this.legendData=this.chartData?.map((n,a)=>({id:n.id,label:n.label,value:n.value,color:this.chartPalette[a%this.chartPalette.length]}));let r={container:this.chartContainer()?.nativeElement.querySelector("svg"),data:this.chartData?.map((n,a)=>Gt(Lt({},n),{color:this.chartPalette[a%this.chartPalette.length]})),palette:this.chartPalette,selectedCallback:this.selectedCallback,hoverCallback:this.hoverCallback};switch(r.container.setAttribute("width","0"),r.container.setAttribute("height","0"),this.chartType){case P.bar:{let n=Lt({},r);Pn.buildBarChart(n);break}case P.bubble:{Fn.buildBubbleChart(r);break}case P.donut:{let n=Gt(Lt({},r),{type:"donut"});je.buildPieChart(n);break}case P.donutMeter:{let n=Gt(Lt({},r),{type:"donut-meter",data:[{id:0,value:this.donutMeterChartData,label:"percent",color:_.chartPalette.indigoA200},{id:1,value:100-this.donutMeterChartData,color:_.chartPalette.grey400}]});je.buildPieChart(n);break}case P.line:{let n=this.lineChartData?.map((o,i)=>({id:i,label:`Item ${i}`,data:o,color:this.chartPalette[i%this.chartPalette.length]})),a=Gt(Lt({},r),{data:n});Yn.buildLineChart(a),this.legendData=n?.map((o,i)=>({id:o.id,color:o.color,value:null,label:o.data[0].label}));break}case P.pie:{let n=Gt(Lt({},r),{type:"pie"});je.buildPieChart(n);break}case P.treemap:{Vn.buildTreemapChart(r);break}case P.tree:{let n=Gt(Lt({},r),{data:this.treeChartData,node:{size:{width:200,height:48},padding:8,margin:48},palette:["#6f74dd","#8e99f3","#d1d9ff","#ede7f6","#e3f2fd","#e0f2f1","#f1f8e9","#eceff1","#f5f5f5"],levelLabels:["Level one","Level two","Level three"],zoomScale:{min:.5,max:1},selectedCallback:(a,o,i)=>{if(console.log(`selectedCallback: ${a.id}`),a.children){if(Array.isArray(a.children))a.children=!0;else{let s=this.randomNumber(5,10);a.children=[];for(let l=0;l<s;l++)a.children.push({id:`${o.length+1}-${l}`,label:`Item ${o.length+1} - ${l}`,children:!!this.randomNumber(0,10)})}this.drawChart()}}});Pl.buildTreeChart(n);break}case P.gantt:{let n=Gt(Lt({},r),{data:[{id:0,label:"Item 01",startDate:new Date(2024,0,1),endDate:new Date(2024,0,31),progress:10},{id:1,label:"Item 02",startDate:new Date(2024,1,1),endDate:new Date(2024,1,10),progress:20},{id:2,label:"Item 03",startDate:new Date(2024,1,1),endDate:new Date(2024,1,20),progress:30},{id:3,label:"Item 04",startDate:new Date(2024,3,15),endDate:new Date(2024,8,20),progress:40,color:"red"},{id:4,label:"Item 05",description:"Item 05 description goes here, blah blah blah.  This description should wrap at 320px",startDate:new Date(2024,10,1),endDate:new Date(2025,10,30),progress:90}]});Un.buildGanttChart(n);break}}}randomNumber(r,n){return Math.floor(Math.random()*(n-r+1))+r}selectedCallback(r,n){console.log(r),console.log(n)}hoverCallback(r,n,a){console.log(n),console.log(a)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Se({type:t,selectors:[["app-charts-d3-chart"]],viewQuery:function(n,a){n&1&&le(a.chartContainer,Em,5),n&2&&Ne()},inputs:{chartType:"chartType"},decls:4,vars:1,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container","app-chart"],[1,"legend-container"],[1,"chart-legend"],["slot","start"],["slot","secondary-text"]],template:function(n,a){n&1&&(Q(0,"div",1),Qt(1,"div",2,0),j(),zr(3,$m,4,0,"div",3)),n&2&&(et(3),Hr(a.showLegend?3:-1))},dependencies:[Ie,So,Ao,Do,ko],styles:[`[_nghost-%COMP%]{overflow-x:auto;overflow-y:hidden;height:100%;width:100%;display:grid;grid-template-columns:1fr auto;column-gap:16px}[_nghost-%COMP%]     .app-chart{--app-chart-text-high: var(--forge-theme-text-high, rgba(0, 0, 0, .87));--app-chart-text-medium: var(--forge-theme-text-medium, rgba(0, 0, 0, .6));--app-chart-text-inverse: var(--forge-theme-on-surface-inverse, #ffffff);--app-chart-outline: var(--forge-theme-outline, #e0e0e0);--app-chart-outline-medium: var(--forge-theme-outline-medium, #757575);--app-chart-surface: var(--forge-theme-surface, #ffffff);--app-chart-surface-dim: var(--forge-theme-surface-dim, #f5f5f5)}[_nghost-%COMP%]     .app-chart__xaxis, [_nghost-%COMP%]     .app-chart__yaxis{font-family:Roboto,sans-serif;font-size:10px}[_nghost-%COMP%]     .app-chart__xaxis .domain, [_nghost-%COMP%]     .app-chart__yaxis .domain{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis .tick line, [_nghost-%COMP%]     .app-chart__yaxis .tick line{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:first-of-type>text{text-anchor:start}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:last-of-type>text{text-anchor:end}[_nghost-%COMP%]     .app-chart__popover{position:absolute;border:1px solid var(--app-chart-outline);border-radius:4px;background-color:var(--app-chart-surface);padding:4px 8px;font-size:.85rem;display:grid;grid-template-columns:auto 1fr;column-gap:8px;pointer-events:none;visibility:hidden;min-width:176px;max-width:320px;word-break:break-word}.chart-card[_ngcontent-%COMP%]{padding:8px;margin:24px;background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border-color:var(--forge-theme-outline);box-shadow:var(--forge-elevation-1)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.legend-container[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;min-width:280px;max-height:100%;background-color:var(--forge-theme-surface);border-left:1px solid var(--forge-theme-outline);--forge-list-item-padding: 0;padding:16px}.legend-container[_ngcontent-%COMP%]   forge-list-item[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{background-color:var(--item-color);width:24px;height:24px}  .chart-legend [slot=leading]{width:16px;height:16px;background-color:var(--item-color)}






/*# sourceMappingURL=d3-chart.component-BIDKBRTW.css.map */`]})}}return t})();var io=(()=>{class t{static loadGoogleChartService(){return new uo(r=>{let n=document.querySelector('script[src="https://www.gstatic.com/charts/loader.js"]');n?(r.next(),r.complete()):(n=document.createElement("script"),n.type="text/javascript",n.src="https://www.gstatic.com/charts/loader.js",n.onload=()=>{r.next(),r.complete()},document.body.appendChild(n))})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=co({token:t,factory:t.\u0275fac})}}return t})();var Pm=["chartContainer"],Bn=(()=>{class t{constructor(){this.destroyRef=Pr(Fr),this.chartContainer=ue("chartContainer"),this.chartAnimation={startup:!0,duration:500},this.chartScale=1,this.googleChartsLoaded=!1,this.chartIsPanning=!1,this.#t=P.bar}#t;set chartType(r){this.#t=r,this.googleChartsLoaded&&this.drawChart("create")}get chartType(){return this.#t}ngOnInit(){io.loadGoogleChartService().subscribe(()=>{google.charts.load("current",{packages:["corechart","treemap","orgchart","gantt"]}).then(()=>{this.googleChartsLoaded=!0,this.drawChart("create")})}),Ut(window,"resize").pipe(Xt(this.destroyRef),$r(100)).subscribe(()=>this.drawChart("redraw")),Ut(this.chartContainer()?.nativeElement,"wheel").pipe(Xt(this.destroyRef)).subscribe(r=>{let n=(this.chartContainer()?.nativeElement).firstElementChild;r.deltaY>0&&this.chartScale<5.05?(this.chartScale+=.05,n.style.transform=`scale(${this.chartScale})`):r.deltaY<0&&this.chartScale>.1&&(this.chartScale-=.05,n.style.transform=`scale(${this.chartScale})`)})}ngOnDestroy(){this.chart?.clearChart()}onAction(r){this.drawChart(r)}drawChart(r){r!=="redraw"&&this.setChartData(r);let n=this.chartContainer(),a=n?.nativeElement.clientWidth,o=n?.nativeElement.clientHeight;switch(this.chartType){case P.bar:{r==="create"&&(this.chart=new google.visualization.ColumnChart(n?.nativeElement),this.addChartEvents());let i={title:"Bar Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,i);break}case P.bubble:{r==="create"&&(this.chart=new google.visualization.BubbleChart(n?.nativeElement),this.addChartEvents());let i={title:"Bubble Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,i);break}case P.donut:{r==="create"&&(this.chart=new google.visualization.PieChart(n?.nativeElement),this.addChartEvents());let i={title:"Donut Chart",pieHole:.5};this.chart.draw(this.chartData,i);break}case P.pie:{r==="create"&&(this.chart=new google.visualization.PieChart(n?.nativeElement),this.addChartEvents());let i={title:"Pie Chart"};this.chart.draw(this.chartData,i);break}case P.line:{r==="create"&&(this.chart=new google.visualization.LineChart(n?.nativeElement),this.addChartEvents());let i={title:"Line Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,i);break}case P.treemap:{r==="create"&&(this.chart=new google.visualization.TreeMap(n?.nativeElement),this.addChartEvents());let i={title:"Treemap Chart"};this.chart.draw(this.chartData,i);break}case P.tree:{r==="create"&&(this.chart=new google.visualization.OrgChart(n?.nativeElement),this.addChartEvents());let i={allowCollapse:!0,allowHtml:!0,nodeClass:"app--chart--tree-node",selectedNodeClass:"app--chart--tree-node--selected"};this.chart.draw(this.chartData,i);break}case P.gantt:{r==="create"&&(this.chart=new google.visualization.Gantt(n?.nativeElement),this.addChartEvents());let i={};this.chart.draw(this.chartData,i)}}}setChartData(r){let n=this.chartData?.getNumberOfRows()||0,a=this.chartData?.getNumberOfColumns()||0;switch(r){case"create":{switch(this.chartData=new google.visualization.DataTable,this.chartType){case P.bar:case P.donut:case P.pie:this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Value","value"),this.chartData.addRows(this.getData(10,0).map(o=>[o.label,o.value]));break;case P.bubble:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Size","size");let o=[];for(let i=0;i<10;i++)o.push([i.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${i}`,this.randomNumber(0,1e3)]);this.chartData.addRows(o);break}case P.line:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Line 1","line1"),this.chartData.addColumn("number","Line 2","line2"),this.chartData.addColumn("number","Line 3","line3");let o=[];for(let i=0;i<10;i++)o.push([`Item ${i}`,this.randomNumber(0,1e3),this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);this.chartData.addRows(o);break}case P.treemap:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("string","Parent","parent"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addRow(["Root",null,0,0]),this.chartData.addRows(this.getData(20,0).map(o=>[o.label,"Root",o.value,o.category]));break}case P.tree:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","ParentId","parentId"),this.chartData.addRow([{v:"0",f:"Item 0"},null]),this.chartData.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}case P.gantt:this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","Name","name"),this.chartData.addColumn("string","Resource","resource"),this.chartData.addColumn("date","Start Date","startDate"),this.chartData.addColumn("date","End Date","endDate"),this.chartData.addColumn("number","Duration","duration"),this.chartData.addColumn("number","Progress","progress"),this.chartData.addColumn("string","Dependencies","dependencies"),this.chartData.addRows([["0","Item 01","",new Date(2024,0,1),new Date(2024,0,31),null,10,null],["1","Item 02","",new Date(2024,1,1),new Date(2024,1,10),null,20,null],["2","Item 03","",new Date(2024,1,1),new Date(2024,1,20),null,30,null],["3","Item 04","",new Date(2024,3,15),new Date(2024,8,20),null,40,null],["4","Item 05","",new Date(2024,10,1),new Date(2025,10,30),null,90,null]])}break}case"update":{switch(this.chartType){case P.bar:case P.donut:case P.pie:{this.getData(n).forEach((i,s)=>{this.chartData?.setValue(s,1,i.value)});break}case P.bubble:{for(let o=0;o<n;o++)this.chartData?.setValue(o,1,this.randomNumber(0,1e3)),this.chartData?.setValue(o,2,this.randomNumber(0,1e3)),this.chartData?.setValue(o,4,this.randomNumber(0,1e3));break}case P.line:{for(let o=0;o<n;o++)for(let i=1;i<a;i++)this.chartData?.setValue(o,i,this.randomNumber(0,1e3));break}case P.treemap:{for(let o=1;o<n;o++)this.chartData?.setValue(o,2,this.randomNumber(0,1e3)),this.chartData?.setValue(o,3,this.randomNumber(0,1e3));break}case P.tree:{this.chartData?.removeRows(0,this.chartData.getNumberOfRows()),this.chartData?.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}}break}case"add":{switch(this.chartType){case P.bar:case P.donut:case P.pie:{this.chartData?.addRows(this.getData(1,n).map(o=>[o.label,o.value]));break}case P.bubble:{this.chartData?.addRow([n.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${n}`,this.randomNumber(0,1e3)]);break}case P.line:{this.chartData?.addColumn("number",`Line ${a}`,`line${a}`);for(let o=0;o<10;o++)this.chartData?.setValue(o,a,this.randomNumber(0,1e3));break}case P.treemap:{this.chartData?.addRow([`Item ${n}`,"Root",this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);break}}break}case"delete":{if(n>1)switch(this.chartType){case P.bar:case P.bubble:case P.donut:case P.pie:case P.treemap:{this.chartData?.removeRow(n-1);break}case P.line:{this.chartData?.removeColumn(a-1);break}}break}}}getData(r,n=0){let a=[];for(let o=0;o<r;o++)a.push({id:o+n,value:this.randomNumber(0,1e3),label:`Item ${o+n}`,category:this.randomNumber(0,100)});return a}randomNumber(r,n){return Math.floor(Math.random()*(n-r+1))+r}addChartEvents(){google.visualization.events.addListener(this.chart,"ready",()=>{console.log("chart ready"),this.chartScale=1,this.addZoomPanEvents()}),google.visualization.events.addListener(this.chart,"select",()=>{console.log("chart item selected"),console.log(this.chart?.getSelection())}),google.visualization.events.addListener(this.chart,"mousedown",()=>{console.log("mousedown")})}buildTreeNodeData(r,n=1){let a=[],o=this.randomNumber(0,5);for(let i=0;i<o;i++)a.push([{v:`${r}-${i}`,f:`Item ${r}-${i}`},r]),n>1&&a.push(...this.buildTreeNodeData(`${r}-${i}`,n-1));return a}addZoomPanEvents(){let r=(this.chartContainer()?.nativeElement).firstElementChild;Ut(r,"mousedown").pipe(Xt(this.destroyRef)).subscribe(n=>{this.chartIsPanning=!0,(this.chartContainer()?.nativeElement).classList.add("app--chart--panning")}),Ut(r,"mousemove").pipe(Xt(this.destroyRef),lo(()=>this.chartIsPanning)).subscribe(n=>{(this.chartContainer()?.nativeElement).scrollBy(n.movementX*-1,n.movementY*-1)}),Ut(r,"mouseup").pipe(Xt(this.destroyRef)).subscribe(()=>{this.chartIsPanning=!1,(this.chartContainer()?.nativeElement).classList.remove("app--chart--panning")}),Ut(r,"mouseout").pipe(Xt(this.destroyRef)).subscribe(()=>{this.chartIsPanning=!1,(this.chartContainer()?.nativeElement).classList.remove("app--chart--panning")})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Se({type:t,selectors:[["app-charts-google-chart"]],viewQuery:function(n,a){n&1&&le(a.chartContainer,Pm,5),n&2&&Ne()},inputs:{chartType:"chartType"},features:[vo([io])],decls:3,vars:0,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container"]],template:function(n,a){n&1&&(Q(0,"div",1),Qt(1,"div",2,0),j())},dependencies:[Ie],styles:[`[_nghost-%COMP%]{display:block;height:100%;width:100%}  .app--chart--tree-node{border:1px solid var(--forge-theme-outline);white-space:nowrap;background-color:#e8eaf6}  .app--chart--tree-node--selected{background-color:#3f51b5;color:#fff}  .app--chart--panning{-webkit-user-select:none;user-select:none}.chart-card[_ngcontent-%COMP%]{margin:24px;height:calc(100% - 48px);background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border-color:var(--forge-theme-outline);box-shadow:var(--forge-elevation-1)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%}






/*# sourceMappingURL=google-chart.component-ZSMKEAYU.css.map */`]})}}return t})();function Fm(t,e){if(t&1&&Qt(0,"app-charts-d3-chart",9),t&2){let r=Ke();pt("chartType",r.chartType)}}function zm(t,e){if(t&1&&Qt(0,"app-charts-google-chart",9),t&2){let r=Ke();pt("chartType",r.chartType)}}var P=function(t){return t[t.bar=0]="bar",t[t.bubble=1]="bubble",t[t.donut=2]="donut",t[t.donutMeter=3]="donutMeter",t[t.gantt=4]="gantt",t[t.line=5]="line",t[t.pie=6]="pie",t[t.treemap=7]="treemap",t[t.tree=8]="tree",t}(P||{}),t2=(()=>{class t{constructor(){this.d3Chart=ue(qn),this.googleChart=ue(Bn),this.chartTypesEnum=P,this.chartType=P.bar,this.activeTab=0}onAction(r){this.activeTab===0?this.d3Chart()?.onAction(r):this.activeTab===1&&this.googleChart()?.onAction(r)}onTabSelected(r){this.activeTab=r}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=Se({type:t,selectors:[["app-charts"]],viewQuery:function(n,a){n&1&&(le(a.d3Chart,qn,5),le(a.googleChart,Bn,5)),n&2&&Ne(2)},decls:37,vars:15,consts:[[1,"header"],["slot","start"],[1,"forge-typography--subheading4"],["aria-label","Change chart type",3,"ngModelChange","ngModel"],[3,"value"],["variant","outlined",3,"click","disabled"],["secondary","",3,"activeTab"],[3,"forge-tab-select"],[1,"body"],[3,"chartType"]],template:function(n,a){n&1&&(Q(0,"forge-toolbar",0)(1,"div",1)(2,"h2",2),nt(3,"Charts"),j(),Q(4,"forge-select",3),yo("ngModelChange",function(i){return xo(a.chartType,i)||(a.chartType=i),i}),Q(5,"forge-option",4),nt(6,"Bar"),j(),Q(7,"forge-option",4),nt(8,"Bubble"),j(),Q(9,"forge-option",4),nt(10,"Donut"),j(),Q(11,"forge-option",4),nt(12,"Donut Meter"),j(),Q(13,"forge-option",4),nt(14,"Gantt"),j(),Q(15,"forge-option",4),nt(16,"Line"),j(),Q(17,"forge-option",4),nt(18,"Pie"),j(),Q(19,"forge-option",4),nt(20,"Treemap"),j(),Q(21,"forge-option",4),nt(22,"Tree"),j()(),Q(23,"forge-button",5),De("click",function(){return a.onAction("update")}),nt(24,"Update"),j(),Q(25,"forge-button",5),De("click",function(){return a.onAction("add")}),nt(26,"Add"),j(),Q(27,"forge-button",5),De("click",function(){return a.onAction("delete")}),nt(28,"Delete"),j()()(),Q(29,"forge-tab-bar",6)(30,"forge-tab",7),De("forge-tab-select",function(){return a.onTabSelected(0)}),nt(31,"D3"),j(),Q(32,"forge-tab",7),De("forge-tab-select",function(){return a.onTabSelected(1)}),nt(33,"Google"),j()(),Q(34,"div",8),zr(35,Fm,1,1,"app-charts-d3-chart",9)(36,zm,1,1,"app-charts-google-chart",9),j()),n&2&&(et(4),go("ngModel",a.chartType),et(),pt("value",a.chartTypesEnum.bar),et(2),pt("value",a.chartTypesEnum.bubble),et(2),pt("value",a.chartTypesEnum.donut),et(2),pt("value",a.chartTypesEnum.donutMeter),et(2),pt("value",a.chartTypesEnum.gantt),et(2),pt("value",a.chartTypesEnum.line),et(2),pt("value",a.chartTypesEnum.pie),et(2),pt("value",a.chartTypesEnum.treemap),et(2),pt("value",a.chartTypesEnum.tree),et(2),pt("disabled",a.activeTab===0&&a.chartType===a.chartTypesEnum.tree||a.chartType===a.chartTypesEnum.gantt),et(2),pt("disabled",a.chartType===a.chartTypesEnum.donutMeter||a.chartType===a.chartTypesEnum.tree||a.chartType===a.chartTypesEnum.gantt),et(2),pt("disabled",a.chartType===a.chartTypesEnum.donutMeter||a.chartType===a.chartTypesEnum.tree||a.chartType===a.chartTypesEnum.gantt),et(2),pt("activeTab",a.activeTab),et(6),Hr(a.activeTab===0?35:a.activeTab===1?36:-1))},dependencies:[Ie,To,bo,wo,Mo,Co,Io,No,Oo,Eo,Ro,zo,Fo,$o,Po,Lo,Ho,qn,Bn],styles:[`[_nghost-%COMP%]{overflow:hidden;height:100%;display:grid;grid-template-rows:auto auto 1fr}.header[_ngcontent-%COMP%]{overflow:hidden}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:16px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]{width:320px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]::part(label){display:none}forge-tab-bar[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface)}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]{min-width:240px}.body[_ngcontent-%COMP%]{overflow:hidden;height:100%}






/*# sourceMappingURL=charts.component-KI2BNKLH.css.map */`]})}}return t})();export{P as ChartTypes,t2 as ChartsComponent};
//# sourceMappingURL=chunk-ROJESOJF.js.map
