import{a as wt,c as Dt,d as St,f as Ce,h as Tt}from"./chunk-K4Q5BRSN.js";import{a as mt}from"./chunk-YUIA3MWJ.js";import"./chunk-UKB2LCWT.js";import{a as yt}from"./chunk-6TJZ6S64.js";import{b as gt,d as ut,e as Ct,j as xt,m as Ee,n as vt,o as Ft}from"./chunk-PYFWCTE6.js";import{a as ft,c as ht,e as bt}from"./chunk-UFWFQKUV.js";import{a as _t}from"./chunk-N3266UGA.js";import{a as N}from"./chunk-Y7CHZVJS.js";import"./chunk-NHB7KX5I.js";import"./chunk-IJTEU5B7.js";import"./chunk-PSWJZLWW.js";import"./chunk-RMJVRB77.js";import"./chunk-RMWZT7WV.js";import{a as pt}from"./chunk-KGLI3JET.js";import{Ab as M,Ad as fe,B as He,Cc as le,Db as W,Dc as ae,Ec as ce,Fc as se,Fd as st,Gb as Z,Gd as dt,Hb as Qe,Hd as he,Ib as Xe,Id as be,Jb as Y,Kc as de,Lc as pe,Mc as me,Nc as _e,Ob as ee,Pb as Je,Sc as Ye,Wc as et,Xc as tt,Yc as it,Zc as ot,_c as ge,ac as te,bc as ie,c as U,d as qe,gd as nt,h as H,hd as rt,id as lt,lc as je,ld as at,mb as K,md as ct,nb as G,rb as Q,tb as X,vb as J,vc as We,w as Ue,wb as j,wc as Ze,xc as oe,yb as Ke,yc as ne,zc as re,zd as ue}from"./chunk-ESNYTCU3.js";import{$a as Ae,$b as Ne,Bb as k,Cb as b,D as $,Db as C,Eb as w,Fb as D,G as Ve,Gb as S,Gc as ke,Hb as p,Ib as a,Jb as l,Kb as _,Ob as P,Pb as O,Q as ve,Qb as L,Rb as x,Ub as h,Va as s,Vb as c,Y as Fe,Z as ye,Zb as ze,_b as Ge,ac as we,bc as $e,cc as R,dc as De,g as Re,gc as m,ha as v,hc as E,ic as Se,ma as u,na as f,ob as B,pc as V,qa as Ie,qc as q,rc as z,sc as Be,tb as A,tc as y,vc as T,wc as Le,yc as Te}from"./chunk-UQ3J2UFU.js";import"./chunk-OY7QI42D.js";var Rt=()=>({name:"firstName"}),Vt=()=>({name:"lastName"}),It=()=>({name:"occupation"}),At=o=>({"operator__addon--selected":o});function zt(o,r){if(o&1&&(a(0,"forge-option",20),m(1),l()),o&2){let e=r.$implicit;p("value",e.id),s(),E(e.name)}}function Gt(o,r){if(o&1&&(a(0,"span",21),m(1),l()),o&2){let e=c(2);s(),E(e.userFilter==null?null:e.userFilter.description)}}function Nt(o,r){if(o&1){let e=x();a(0,"forge-select",19),h("change",function(i){u(e);let n=c();return f(n.onFilterChange(i))}),D(1,zt,2,2,"forge-option",20,w),b(3,Gt,2,1,"span",21),a(4,"forge-icon-button",22),h("click",function(){u(e);let i=c();return f(i.onFilterDelete())}),_(5,"forge-icon",23),l(),a(6,"forge-tooltip",24),m(7,"Delete filter"),l()(),_(8,"forge-divider")}if(o&2){let e=c();p("value",e.userFilter==null?null:e.userFilter.id),s(),S(e.cache.userFilters),s(2),C(!(e.userFilter==null||e.userFilter.description==null)&&e.userFilter.description.length?3:-1),s(),p("disabled",!e.userFilter)}}function $t(o,r){o&1&&L(0)}function Bt(o,r){o&1&&L(0)}function Lt(o,r){o&1&&L(0)}function qt(o,r){if(o&1){let e=x();a(0,"forge-icon-button",25,2),h("click",function(i){let n=u(e).name,d=R(1),g=c();return f(g.onOperatorPopoverOpen(i,d,n))}),_(2,"forge-icon",26),l(),a(3,"forge-tooltip"),m(4,"Filter operators"),l()}if(o&2){let e,t=r.name,i=c(),n=R(32);p("ngClass",q(2,At,(e=i.cache.recordsetFilterFormGroup.get(t))==null||e.value==null?null:e.value.operator))("forgePopover",n)}}function Ut(o,r){if(o&1&&_(0,"forge-icon",30),o&2){let e=c().$implicit;k("aria-label",e.label+" selected")}}function Ht(o,r){if(o&1&&(a(0,"forge-list-item",28)(1,"button",29),m(2),l(),b(3,Ut,1,1,"forge-icon",30),l()),o&2){let e=r.$implicit,t=c(2);p("value",e.value)("selected",(t.operatorPopoverFormGroup==null?null:t.operatorPopoverFormGroup.value.operator)===e.value),s(2),E(e.label),s(),C((t.operatorPopoverFormGroup==null?null:t.operatorPopoverFormGroup.value.operator)===e.value?3:-1)}}function Kt(o,r){if(o&1){let e=x();a(0,"forge-list",27),h("forge-list-item-select",function(i){u(e);let n=c();return f(n.onOperatorSelected(i.detail.value))}),D(1,Ht,4,4,"forge-list-item",28,w),l()}if(o&2){let e=c();s(),S(e.operatorOptions)}}var kt=(()=>{let r=class r{constructor(){this.dialogService=v(oe),this.dialogData=v(We),this.dialogRef=v(Ze),this.genderOptions=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Unknown",value:"U"}],this.operatorOptions=[{value:null,label:"None"},{value:0,label:"Equal"},{value:1,label:"Not equal"},{value:2,label:"Greater than"},{value:3,label:"Less than"},{value:4,label:"Greater than equal to"},{value:5,label:"Less than equal to"},{value:6,label:"Range"},{value:7,label:"Contains"},{value:8,label:"Not contains"},{value:9,label:"Empty"}]}ngOnInit(){this.cache=this.dialogData.cache,this.userFilter=this.cache.activeUserFilter,this.userFilter&&this.cache.recordsetFilterFormGroup.patchValue(this.userFilter.filters)}onFilterChange(t){this.userFilter=this.cache.userFilters?.find(i=>i.id===t.detail),this.cache.recordsetFilterFormGroup.patchValue(this.userFilter.filters)}onFilterDelete(){let t=this.cache.userFilters.findIndex(i=>i.id===this.userFilter.id);t!==-1&&this.cache.userFilters.splice(t,1),this.cache.activeUserFilter=void 0,this.userFilter=void 0,this.dialogData.saveCallback()}onApply(){this.cache.activeUserFilter=this.userFilter,this.dialogRef.close(!0)}onClear(){this.userFilter=void 0,this.cache.recordsetFilterFormGroup.reset(),this.cache.recordsetFilterFormGroup.markAsPristine()}onSave(){let t={description:this.userFilter?.description,isDefault:this.userFilter?.isDefault,name:this.userFilter?.name};this.dialogService.open(xt,{data:t,options:{persistent:!0}}).afterClosed.subscribe({next:i=>{if(i){let n={filters:this.cache.recordsetFilterFormGroup.value,description:i.description,id:this.userFilter?.id||N.uniqueId(),isDefault:i.isDefault,name:i.name},d=this.cache.userFilters.findIndex(g=>g.id===n.id);d!==-1?this.cache.userFilters[d]=n:this.cache.userFilters.push(n),n.isDefault&&this.cache.userFilters.filter(g=>g.id!==n.id).forEach(g=>g.isDefault=!1),this.userFilter=this.dialogData.cache.userFilters?.find(g=>g.id===n.id)}this.dialogData.saveCallback()}})}onCancel(){this.dialogRef.close(!1)}onOperatorPopoverOpen(t,i,n){t.stopPropagation(),this.operatorPopoverFormGroup=this.cache.recordsetFilterFormGroup.get(n),this.operatorPopover=i,this.operatorPopover.open()}onOperatorSelected(t){t=parseInt(t,10),this.operatorPopoverFormGroup?.get("operator")?.setValue(t),this.operatorPopover?.close()}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=B({type:r,selectors:[["app-filter-dialog"]],decls:33,vars:12,consts:[["opertatorAddonTemplate",""],["operatorPopoverTemplate",""],["operatorPopover","forgePopover"],["dialogTitle","Filter records","dialogLabel","Filter records",3,"dialogClose"],["novalidate","","autocomplete","off",1,"form-grid",3,"keydown.enter","formGroup"],["formGroupName","firstName"],["for","filter-dialog--first-name","slot","label"],["type","text","id","filter-dialog--first-name","formControlName","value","appAutoFocus",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["formGroupName","lastName"],["for","filter-dialog--last-name","slot","label"],["type","text","id","filter-dialog--last-name","formControlName","value"],["label","Gender","formControlName","gender","multiple","true",3,"options"],["formGroupName","occupation"],["for","filter-dialog--occupation","slot","label"],["type","text","id","filter-dialog--occupation","formControlName","value"],["app-dialog-footer",""],["slot","end","variant","outlined",3,"click"],["slot","end","variant","filled",3,"click"],["slot","center","label","Saved filters",3,"change","value"],[3,"value"],["slot","support-text",1,"forge-typography--label2"],["slot","addon-end","density","medium","aria-label","Delete filter",3,"click","disabled"],["name","delete","aria-hidden","true"],["slot","addon-end"],["slot","addon-end","density","medium","aria-label","Filter operators",1,"operator__addon",3,"click","ngClass","forgePopover"],["name","bolt","aria-hidden","true"],[1,"operator-popover",3,"forge-list-item-select"],[3,"value","selected"],["type","button"],["name","check","slot","end"]],template:function(i,n){if(i&1){let d=x();a(0,"app-dialog-template",3),h("dialogClose",function(){return u(d),f(n.onCancel())}),a(1,"form",4),h("keydown.enter",function(){return u(d),f(n.onApply())}),b(2,Nt,9,3),P(3,5),a(4,"forge-text-field")(5,"label",6),m(6,"First name"),l(),_(7,"input",7),A(8,$t,1,0,"ng-container",8),l(),O(),P(9,9),a(10,"forge-text-field")(11,"label",10),m(12,"Last name"),l(),_(13,"input",11),A(14,Bt,1,0,"ng-container",8),l(),O(),_(15,"forge-select",12),P(16,13),a(17,"forge-text-field")(18,"label",14),m(19,"Occupation"),l(),_(20,"input",15),A(21,Lt,1,0,"ng-container",8),l(),O(),l(),P(22,16),a(23,"forge-button",17),h("click",function(){return u(d),f(n.onSave())}),m(24,"Save"),l(),a(25,"forge-button",17),h("click",function(){return u(d),f(n.onClear())}),m(26,"Clear"),l(),a(27,"forge-button",18),h("click",function(){return u(d),f(n.onApply())}),m(28,"Apply"),l(),O(),l(),A(29,qt,5,4,"ng-template",null,0,Te)(31,Kt,3,0,"ng-template",null,1,Te)}if(i&2){let d=R(30);s(),p("formGroup",n.cache.recordsetFilterFormGroup),s(),C(n.cache.userFilters!=null&&n.cache.userFilters.length?2:-1),s(6),p("ngTemplateOutlet",d)("ngTemplateOutletContext",V(9,Rt)),s(6),p("ngTemplateOutlet",d)("ngTemplateOutletContext",V(10,Vt)),s(),p("options",n.genderOptions),s(6),p("ngTemplateOutlet",d)("ngTemplateOutletContext",V(11,It))}},dependencies:[H,U,qe,ee,W,Q,J,j,Z,Y,Qe,ie,te,re,ne,se,ce,le,ae,me,pe,_e,de,ge,ot,lt,rt,nt,Ye,fe,ue,be,he,ut,ft],styles:[`[_nghost-%COMP%]{display:contents}  .operator-popover{min-width:200px}  .operator-popover forge-list-item{cursor:pointer}.form-grid[_ngcontent-%COMP%]{padding:16px;display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.form-grid--row-break[_ngcontent-%COMP%]{grid-column-start:1}.form-grid--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid--col-span.form-grid--col-span[_ngcontent-%COMP%]{width:auto}.form-grid--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.form-grid--col-span2.form-grid--col-span2[_ngcontent-%COMP%]{width:656px}.form-grid--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.form-grid--col-span3.form-grid--col-span3[_ngcontent-%COMP%]{width:992px}.form-grid[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.operator__addon--selected[_ngcontent-%COMP%]{color:var(--forge-theme-warning)}






/*# sourceMappingURL=filter-dialog.component-MUKSRP5O.css.map */`]});let o=r;return o})();var Qt=["bodyTable"],Xt=["table"],Jt=(o,r,e)=>({"forge-table-head__cell--sortable":o,"forge-table-cell--frozen-left":r,"forge-table-cell--frozen-right":e}),Me=(o,r)=>({"forge-table-cell--center":o,"forge-table-cell--right":r}),jt=()=>[1,2,3],Wt=o=>({"forge-table-row--expanded":o}),Zt=(o,r)=>({"forge-table-cell--frozen-left":o,"forge-table-cell--frozen-right":r});function Yt(o,r){if(o&1){let e=x();a(0,"forge-button",13),h("click",function(i){u(e);let n=c();return f(n.onEdit(i,!1))}),_(1,"forge-icon",14),m(2," Cancel "),l(),a(3,"forge-button",15),h("click",function(i){u(e);let n=c();return f(n.onSubmit(i))}),_(4,"forge-icon",16),m(5," Submit "),l()}if(o&2){let e=c();s(3),p("disabled",!e.cache.recordsetFormGroup.dirty||e.cache.recordsetFormGroup.invalid)}}function ei(o,r){if(o&1&&(a(0,"span",17),m(1),l()),o&2){let e=c(2);s(),E(e.cache.activeUserFilter.description)}}function ti(o,r){if(o&1&&(a(0,"forge-list-item",27),_(1,"forge-icon",31),a(2,"button",29),m(3),l()()),o&2){let e=r.$implicit;p("value",e),s(),p("name",e.hidden?"check_box_outline_blank":"check_box"),s(),k("aria-label",e.header+e.hidden?+" hidden":" visible"),s(),E(e.header)}}function ii(o,r){if(o&1){let e=x();b(0,ei,2,1,"span",17),a(1,"forge-icon-button",18),h("click",function(i){u(e);let n=c();return f(n.onFilter(i))}),_(2,"forge-icon",19),l(),a(3,"forge-tooltip",20),m(4,"Filter records"),l(),a(5,"forge-icon-button",21),h("click",function(i){u(e);let n=c();return f(n.onEdit(i,!0))}),_(6,"forge-icon",22),l(),a(7,"forge-tooltip",20),m(8,"Edit records"),l(),a(9,"forge-icon-button",23),h("click",function(i){u(e);let n=c();return f(n.onColumnsEdit(i))}),_(10,"forge-icon",24),l(),a(11,"forge-tooltip",20),m(12,"Edit columns"),l(),a(13,"forge-popover",25,1)(15,"forge-list",26),h("forge-list-item-select",function(i){u(e);let n=c();return f(n.onColumnsEditPopoverSelected(i.detail.value))}),D(16,ti,4,4,"forge-list-item",27,w),y(18,"appCallback"),_(19,"forge-divider"),a(20,"forge-list-item",28)(21,"button",29),m(22,"Reset column widths"),l()(),_(23,"forge-divider"),a(24,"forge-list-item",30)(25,"button",29),m(26,"Delete table cache"),l()()()()}if(o&2){let e=c();C(!(e.cache.activeUserFilter==null||e.cache.activeUserFilter.description==null)&&e.cache.activeUserFilter.description.length?0:-1),s(),p("disabled",e.isBusy)("theme",!(e.cache.filter==null||e.cache.filter.filters==null)&&e.cache.filter.filters.length?"warning":""),s(4),p("disabled",e.isBusy),s(4),p("disabled",e.isBusy),s(7),S(T(18,5,e.tableColumns,e.optionalColumns))}}function oi(o,r){if(o&1&&(_(0,"app-table-mobile",8),y(1,"appCallback")),o&2){let e=c();p("data",e.cache.recordsetFormGroup.controls.recordsetFormArray.getRawValue())("formArray",e.cache.recordsetFormGroup.controls.recordsetFormArray)("columnConfigurations",T(1,4,e.tableColumns,e.visibleColumns))("isEditing",e.isEditing)}}function ni(o,r){if(o&1){let e=x();a(0,"th",34)(1,"forge-icon-button",38),h("click",function(){u(e);let i=c(2);return f(i.onSelectHeader())}),_(2,"forge-icon",39),y(3,"appCallback"),l()()}if(o&2){let e=c(2);s(),p("disabled",e.isBusy),s(),p("name",T(3,2,e.cache.selectedRows,e.headerSelectedIcon))}}function ri(o,r){if(o&1&&_(0,"forge-icon",43),o&2){let e=c().$implicit;p("name",e.sortDirection==="DESC"?"arrow_downward":e.sortDirection==="ASC"?"arrow_upward":"")}}function li(o,r){o&1&&(a(0,"forge-icon-button",45),_(1,"forge-icon",46),l(),a(2,"forge-tooltip"),m(3,"Move column"),l())}function ai(o,r){if(o&1){let e=x();a(0,"forge-icon-button",47),h("mousedown",function(i){u(e);let n=c(2),d=n.$implicit,g=n.$index,F=c(2);return f(F.onColumnHeaderResize(i,g+2,d))}),_(1,"forge-icon",48),l(),a(2,"forge-tooltip"),m(3,"Resize column"),l()}}function ci(o,r){if(o&1&&(a(0,"div",44),b(1,li,4,0),b(2,ai,4,0),l()),o&2){let e=c().$implicit;s(),C(e.moveable!==!1?1:-1),s(),C(e.resizable!==!1?2:-1)}}function si(o,r){if(o&1){let e=x();a(0,"th",40),h("cdkDragStarted",function(){u(e);let i=c(2);return f(i.onColumnHeaderDragStart())})("click",function(i){let n=u(e).$implicit,d=c(2);return f(d.onColumnSort(i,n))}),a(1,"div",41)(2,"span",42),m(3),l(),b(4,ri,1,1,"forge-icon",43),b(5,ci,3,2,"div",44),l()()}if(o&2){let e=r.$implicit,t=c(2);De("--table-column-width",e.width),p("ngClass",Be(7,Jt,e.sortable!==!1,e.frozen==="left",e.frozen==="right")),s(),p("ngClass",z(11,Me,e.align===t.cellAlignEnum.Center,e.align===t.cellAlignEnum.Right)),s(2),E(e.header),s(),C(e.sortDirection!=null&&e.sortDirection.length?4:-1),s(),C(!t.isBusy&&!t.isEditing&&(e.moveable!==!1||e.resizable!==!1)?5:-1)}}function di(o,r){if(o&1&&(a(0,"tr",49)(1,"td",50),y(2,"appCallback"),_(3,"forge-skeleton",51),l()()),o&2){let e=c(3);s(),k("colspan",T(2,1,e.tableColumns,e.visibleColumns).length+2)}}function pi(o,r){o&1&&D(0,di,4,4,"tr",49,w),o&2&&S(V(0,jt))}function mi(o,r){if(o&1){let e=x();a(0,"td",53)(1,"forge-icon-button",58),h("click",function(){u(e);let i=c().$implicit,n=c(3);return f(n.onSelectRow(i.value.id))}),_(2,"forge-icon",39),y(3,"appCallback"),l()()}if(o&2){let e=c().$implicit,t=c(3);s(2),p("name",Le(3,1,t.cache.selectedRows,t.isRowSelected,e.value.id)?"check_box":"check_box_outline_blank")}}function _i(o,r){if(o&1){let e=x();a(0,"div",61,3),h("loaded",function(){u(e);let i=R(1),n=c().$implicit,d=c(),g=d.$implicit,F=d.$index;return f(n.template(F,i,g.getRawValue()))}),l()}if(o&2){let e=c().$implicit,t=c(4);p("ngClass",z(1,Me,e.align===t.cellAlignEnum.Center,e.align===t.cellAlignEnum.Right))}}function gi(o,r){if(o&1&&(a(0,"forge-text-field",62),_(1,"input",63),l()),o&2){let e=c(2).$implicit,t=c(),i=t.$implicit,n=t.$index;p("appFormControlInvalid",i.get(e.property)),s(),p("id","app-table-demo--"+e.property+"--"+n)("formControlName",e.property),k("aria-label",e.property+" "+n)}}function ui(o,r){if(o&1&&m(0),o&2){let e=c(3).$implicit,t=c().$implicit;Se(" ",e.transform(t.get(e.property).value)," ")}}function fi(o,r){if(o&1&&m(0),o&2){let e=c(3).$implicit,t=c().$implicit;Se(" ",t.get(e.property).value," ")}}function hi(o,r){if(o&1&&b(0,ui,1,1)(1,fi,1,1),o&2){let e=c(2).$implicit;C(e.transform?0:1)}}function bi(o,r){if(o&1&&(a(0,"div",60),b(1,gi,2,4,"forge-text-field",62)(2,hi,2,1),l()),o&2){let e=c().$implicit,t=c(4);p("ngClass",z(2,Me,e.align===t.cellAlignEnum.Center,e.align===t.cellAlignEnum.Right)),s(),C(t.isEditing&&e.editable!==!1?1:2)}}function Ci(o,r){if(o&1&&(a(0,"td",56),b(1,_i,2,4,"div",59)(2,bi,3,5,"div",60),l()),o&2){let e=r.$implicit;p("ngClass",z(2,Zt,e.frozen==="left",e.frozen==="right")),s(),C(e.template?1:2)}}function xi(o,r){if(o&1&&(a(0,"tr",57)(1,"td",64),y(2,"appCallback"),_(3,"app-table-detail",65),l()()),o&2){let e=c().$index,t=c(3);s(),k("colspan",T(2,3,t.tableColumns,t.visibleColumns).length+2),s(2),p("data",t.cache.recordsetFormGroup.controls.recordsetFormArray.at(e).getRawValue())("rowIndex",e)}}function vi(o,r){if(o&1){let e=x();a(0,"tr",52),b(1,mi,4,5,"td",53),a(2,"td",54)(3,"forge-icon-button",55),h("click",function(){let i=u(e).$implicit,n=c(3);return f(n.onExpandRow(i.value.id))}),_(4,"forge-icon",39),l(),a(5,"forge-tooltip"),m(6,"View person details"),l()(),D(7,Ci,3,5,"td",56,w),y(9,"appCallback"),l(),b(10,xi,4,6,"tr",57)}if(o&2){let e=r.$implicit,t=r.$index,i=c(3);p("formGroup",e)("ngClass",q(8,Wt,i.cache.expandedRows[t])),s(),C(i.isEditing?-1:1),s(3),p("name",i.cache.expandedRows[t]?"expand_less":"expand_more"),s(3),S(T(9,5,i.tableColumns,i.visibleColumns)),s(3),C(i.cache.expandedRows[t]?10:-1)}}function Fi(o,r){if(o&1&&(P(0,37),D(1,vi,11,10,null,null,w),O()),o&2){let e=c(2);s(),S(e.cache.recordsetFormGroup.controls.recordsetFormArray.controls)}}function yi(o,r){if(o&1&&(a(0,"tfoot")(1,"tr",66)(2,"td",67),y(3,"appCallback"),a(4,"div",68),m(5,"Footer row"),l()()()()),o&2){let e=c(2);s(2),k("colspan",T(3,1,e.tableColumns,e.visibleColumns).length+2)}}function wi(o,r){if(o&1){let e=x();a(0,"table",32,2)(2,"thead")(3,"tr",33),h("cdkDropListDropped",function(i){u(e);let n=c();return f(n.onColumnHeaderDragDrop(i))}),b(4,ni,4,5,"th",34),_(5,"th",35),D(6,si,6,14,"th",36,w),y(8,"appCallback"),l()(),a(9,"tbody"),b(10,pi,2,1)(11,Fi,3,0,"ng-container",37),l(),b(12,yi,6,4,"tfoot"),l()}if(o&2){let e=c();De("--table-cell-inline-padding",e.isEditing?"4px":"8px"),p("formGroup",e.cache.recordsetFormGroup),s(4),C(e.isEditing?-1:4),s(2),S(T(8,6,e.tableColumns,e.visibleColumns)),s(4),C(e.isBusy?10:11),s(2),C(!e.isBusy&&(e.cache.recordsetFormGroup.controls.recordsetFormArray.controls!=null&&e.cache.recordsetFormGroup.controls.recordsetFormArray.controls.length)?12:-1)}}function Di(o,r){o&1&&(a(0,"div",10),_(1,"img",69),a(2,"div"),m(3,"No records found."),l()())}var io=(()=>{let r=class r{constructor(){this.destroyRef=v(Ie),this.ngZone=v(Ae),this.router=v(Ue),this.dialogService=v(oe),this.appDataService=v(_t),this.busyIndicatorService=v(gt),this.appCache=v(pt),this.cache=v(mt),this.bodyTableElementRef=ke("bodyTable"),this.tableElementRef=ke("table"),this.tableColumnResize$=new Re,this.isColumnResizing=!1,this.tableStateStorageKey="app--table-demo--table-state",this.filtersStateStorageKey="app--table-demo--filters-state",this.isBusy=!1,this.isFiltering=!1,this.isEditing=!1,this.cellAlignEnum=K,this.tableColumns=[{property:"image",editable:!1,sortable:!1,resizable:!1,moveable:!1,optional:!1,align:K.Center,width:48,template:(t,i,n)=>{let d=document.createElement("img");return d.src=`mock-data/${N.formatNumber(n.id,"2.0-0")}-small.png`,d.setAttribute("alt",""),d.classList.add("forge-table-cell__image"),i.appendChild(d),null}},{header:"Id",property:"id",width:48},{header:"First",property:"firstName",moveable:!1},{header:"Last",property:"lastName",resizable:!1},{header:"Gender",property:"gender"},{header:"Occupation",property:"occupation"},{header:"Actions",property:"actions",editable:!1,sortable:!1,resizable:!1,moveable:!1,optional:!1,align:K.Center,width:120,frozen:"right",template:(t,i,n)=>(this.ngZone.run(()=>{i.classList.add("forge-table-body__cell__actions"),i.appendChild(Ee.createIconButton("delete",d=>{this.dialogService.open(Ct,{options:{persistent:!0},data:{title:"Delete record",message:"Are you sure you want to delete this record?"}}).afterClosed.subscribe({next:g=>{if(g){let F={message:"Deleting...",progress:"circular"};this.busyIndicatorService.show(F),setTimeout(()=>{this.busyIndicatorService.hide(),this.cache.recordsetFormGroup.controls.recordsetFormArray.removeAt(t)},2e3)}}})},"Delete person")),i.appendChild(Ee.createIconButton("keyboard_arrow_right",d=>{this.router.navigate([`people/detail/${n.id}`])},"View person details"))}),null)}],this.visibleColumns=t=>N.sortData(t.filter(i=>i.hidden!==!0),"order","number","ASC"),this.optionalColumns=t=>t.filter(i=>i.optional!==!1),this.headerSelectedIcon=t=>this.cache.selectedRows?.length&&this.cache.selectedRows?.length===this.cache.recordsetFormGroup.value.recordsetFormArray?.length?"check_box":this.cache.selectedRows?.length?"indeterminate_check_box":"check_box_outline_blank",this.isRowSelected=(t,i)=>t?.findIndex(n=>n===i)!==-1}ngOnInit(){this.loadTableState(),this.loadFiltersState(),this.getRecords()}ngOnDestroy(){this.tableColumnResize$.next(),this.tableColumnResize$.complete()}onFilter(t){t.preventDefault(),this.isFiltering=!this.isFiltering;let i={cache:this.cache,saveCallback:()=>this.saveFiltersState()};this.dialogService.open(kt,{data:i,options:{preset:"right-sheet"}}).afterClosed.subscribe({next:n=>{n&&(this.cache.filter.skip=0,this.cache.filter.filters=this.cache.convertRecordsetFilterFormGroup(),this.getRecords()),this.cache.filter.filters.length||this.cache.recordsetFilterFormGroup.markAsPristine()}})}onEdit(t,i){t.preventDefault(),this.isEditing=i,this.cdkDropList.disabled=this.isEditing,this.tableColumns.find(n=>n.header==="Actions").hidden=this.isEditing,this.tableColumns=[...this.tableColumns]}onSubmit(t){t.preventDefault();let i={message:"Submitting...",progress:"circular"};this.busyIndicatorService.show(i),setTimeout(()=>{this.busyIndicatorService.hide(),this.isEditing=!1},2e3)}onColumnHeaderDragStart(){this.bodyTableElementRef().nativeElement.scrollTo(0,0)}onColumnHeaderDragDrop(t){this.tableColumns[t.currentIndex]?.moveable!==!1&&(wt(this.tableColumns,t.previousIndex,t.currentIndex),this.saveTableState(),this.tableColumns.forEach((i,n)=>i.order=n),this.tableColumns=[...this.tableColumns])}onColumnHeaderResize(t,i,n){t.stopPropagation(),t.preventDefault(),this.tableColumnResize$.next();let d=this.tableElementRef(),g=(d?.nativeElement).querySelectorAll("thead tr th")[i],F=(d?.nativeElement).querySelectorAll(`tbody tr td:nth-child(${i+1})`),Pe=t.clientX;if(g){this.isColumnResizing=!0,d?.nativeElement.querySelector(".forge-table-head__row")?.classList.add("forge-table-row--resizing"),g.classList.add("forge-table-cell--resizing"),F.forEach(I=>I.classList.add("forge-table-cell--resizing")),$(document.body,"mousemove").pipe(Fe(this.tableColumnResize$),ye(I=>{n.width=g.offsetWidth+(I.clientX-Pe),Pe=I.clientX})).subscribe();let Oe=d?.nativeElement.querySelector("thead");Ve($(Oe,"mouseup"),$(Oe,"mouseleave")).pipe(ve(()=>requestAnimationFrame(()=>{this.isColumnResizing=!1,g=void 0,F=void 0,this.saveTableState()})),Fe(this.tableColumnResize$),ye(I=>{this.tableColumnResize$.next(),this.tableElementRef()?.nativeElement.querySelectorAll(".forge-table-row--resizing").forEach(xe=>xe.classList.remove("forge-table-row--resizing")),this.tableElementRef()?.nativeElement.querySelectorAll(".forge-table-cell--resizing").forEach(xe=>xe.classList.remove("forge-table-cell--resizing"))})).subscribe()}}onColumnsEdit(t){t.preventDefault()}onColumnsEditPopoverSelected(t){switch(t){case"reset-column-width":this.tableColumnDefaultWidths.forEach((i,n)=>{this.tableColumns[n].width=i}),this.saveTableState();break;case"delete-table-cache":this.deleteTableState();break;default:{let i=this.tableColumns.find(n=>n.property===t.property);i&&(this.tableColumns.filter(n=>!n.hidden).length&&(i.hidden=He(i.hidden)?!i.hidden:!0,i.sortDirection=void 0,this.tableColumns=[...this.tableColumns]),this.saveTableState());break}}}onColumnSort(t,i){t.stopPropagation(),!(t.target.classList.contains("forge-table-head__cell-dragger")||t.target.classList.contains("forge-table-head__cell-resizer")||this.isColumnResizing||this.isBusy||this.isEditing||i.sortable===!1)&&(this.tableColumns.filter(n=>n.property!==i.property).forEach(n=>n.sortDirection=void 0),i.sortDirection===G.Ascending?i.sortDirection=G.Descending:i.sortDirection===G.Descending?i.sortDirection=void 0:i.sortDirection=G.Ascending,this.cache.filter.sort=i.sortDirection?{property:i.property,direction:i.sortDirection}:void 0,this.cache.filter.skip=0,this.saveTableState(),this.getRecords())}onPaginatorChange(t){this.cache.filter.skip=t.pageIndex*t.pageSize,this.cache.filter.take=t.pageSize,this.getRecords()}onSelectHeader(){this.cache.selectedRows?.length===this.cache.recordsetFormGroup.value.recordsetFormArray?.length?this.cache.selectedRows=[]:this.cache.selectedRows=this.cache.recordsetFormGroup.value.recordsetFormArray?.map(t=>t.id),this.cache.selectedRows=[...this.cache.selectedRows]}onSelectRow(t){let i=this.cache.selectedRows.findIndex(n=>n===t);i!==-1?this.cache.selectedRows.splice(i,1):this.cache.selectedRows.push(t),this.cache.selectedRows=[...this.cache.selectedRows]}onExpandRow(t){let i=this.cache.expandedRows.findIndex(n=>n===t);if(i!==-1)this.cache.expandedRows[i]=void 0;else{let n=this.cache.recordsetFormGroup.value.recordsetFormArray.findIndex(d=>d.id===t);n!==-1&&(this.cache.expandedRows[n]=t)}}getRecords(){this.isBusy||(this.isBusy=!0,this.cache.recordsetFormGroup.controls.recordsetFormArray.clear(),this.cache.expandedRows=[],this.cache.selectedRows=[],this.appDataService.getPeople({sort:this.cache.filter.sort,skip:this.cache.filter.skip,take:this.cache.filter.take,filters:this.cache.filter.filters}).pipe(Je(this.destroyRef),ve(()=>this.isBusy=!1)).subscribe({next:t=>{this.cache.totalRecords=t.count,t.data.forEach(i=>{this.cache.recordsetFormGroup.controls.recordsetFormArray.push(this.buildRecordForm(i),{emitEvent:!1})})}}))}buildRecordForm(t){return new Ke({id:new M(t.id,{validators:[X.required]}),firstName:new M(t.firstName,{validators:[X.required]}),lastName:new M(t.lastName,{validators:[X.required]}),gender:new M(t.gender),occupation:new M(t.occupation),quote:new M(t.quote),url:new M(t.url)})}loadTableState(){this.tableColumnDefaultWidths=this.tableColumns.map(i=>i.width);let t=localStorage.getItem(this.tableStateStorageKey);if(t?.length){let i=JSON.parse(t);i.columns.forEach(n=>{let d=this.tableColumns.find(g=>g.property===n.property);d&&(d.order=n.order,d.width=n.width,d.hidden=n.hidden,i.sort?.property===d.property&&(d.sortDirection=i.sort.direction))}),this.tableColumns=[...this.tableColumns],this.cache.filter.sort=i.sort,this.cache.filter.take=i.take}}saveTableState(){localStorage.setItem(this.tableStateStorageKey,JSON.stringify({columns:this.tableColumns.map((t,i)=>({property:t.property,order:i,width:t.width,hidden:t.hidden})),sort:this.cache.filter.sort,take:this.cache.filter.take}))}deleteTableState(){localStorage.removeItem(this.tableStateStorageKey)}loadFiltersState(){let t=localStorage.getItem(this.filtersStateStorageKey);if(t?.length){this.cache.userFilters=JSON.parse(t);let i=this.cache.userFilters?.find(n=>n.isDefault);i&&(this.cache.recordsetFilterFormGroup.patchValue(i.filters),this.cache.recordsetFilterFormGroup.markAsDirty(),this.cache.filter.filters=this.cache.convertRecordsetFilterFormGroup(),this.cache.activeUserFilter=i)}}saveFiltersState(){localStorage.setItem(this.filtersStateStorageKey,JSON.stringify(this.cache.userFilters))}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=B({type:r,selectors:[["app-table-demo"]],viewQuery:function(i,n){if(i&1&&(we(n.bodyTableElementRef,Qt,5),we(n.tableElementRef,Xt,5),ze(Ce,5)),i&2){$e(2);let d;Ge(d=Ne())&&(n.cdkDropList=d.first)}},decls:13,vars:7,consts:[["bodyTable",""],["columnsEditPopover",""],["table",""],["elementRef",""],[1,"header"],["slot","start",1,"forge-typography--subheading4"],[1,"body"],["novalidate","","autocomplete","off",1,"body__table"],[3,"data","formArray","columnConfigurations","isEditing"],[1,"forge-table",3,"formGroup","--table-cell-inline-padding"],[1,"empty-state"],["inverted","true",1,"footer"],["slot","end",3,"forge-paginator-change","pageIndex","pageSize","total","disabled"],["slot","end","variant","outlined",3,"click"],["name","cancel","aria-hidden","true"],["slot","end","variant","filled",3,"click","disabled"],["name","check","aria-hidden","true"],["slot","end",1,"forge-typography--subheading1"],["variant","tonal","slot","end","aria-label","Filter records",3,"click","disabled","theme"],["name","filter_list","aria-hidden","true"],["slot","end"],["variant","tonal","slot","end","aria-label","Edit records",3,"click","disabled"],["name","edit","aria-hidden","true"],["id","table-demo--btn--edit-columns","variant","tonal","slot","end","aria-label","Edit columns",3,"click","disabled"],["name","list_alt","aria-hidden","true"],["slot","end","anchor","table-demo--btn--edit-columns","placement","right-end","animation-type","none","open","false"],[1,"column-popover",3,"forge-list-item-select"],[3,"value"],["value","reset-column-width"],["type","button"],["value","delete-table-cache"],["slot","start","aria-hidden","true",3,"name"],[1,"forge-table",3,"formGroup"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"forge-table-row","forge-table-head__row",3,"cdkDropListDropped"],[1,"forge-table-cell","forge-table-head__cell","forge-table-row__selector"],[1,"forge-table-cell","forge-table-head__cell","forge-table-row__expander"],["scope","col","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",1,"forge-table-cell","forge-table-head__cell",3,"ngClass","--table-column-width"],["formArrayName","recordsetFormArray"],[3,"click","disabled"],["aria-hidden","true",3,"name"],["scope","col","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",1,"forge-table-cell","forge-table-head__cell",3,"cdkDragStarted","click","ngClass"],[1,"forge-table-head__cell-container",3,"ngClass"],[1,"forge-table-head__cell-text"],["aria-hidden","true",1,"forge-table-head__cell-sort-icon",3,"name"],["aria-hidden","true",1,"forge-table-head__cell-actions"],["variant","tonal","cdkDragHandle","","density","small",1,"forge-table-head__cell-dragger"],["name","cursor_move","aria-hidden","true"],["variant","tonal","cdkDragHandle","","density","small",1,"forge-table-head__cell-resizer",3,"mousedown"],["name","arrow_expand_horizontal","aria-hidden","true"],[1,"forge-table-row","forge-table-body__row"],[1,"forge-table-cell","forge-table-body__cell"],["list-item",""],[1,"forge-table-row","forge-table-body__row",3,"formGroup","ngClass"],[1,"forge-table-cell","forge-table-body__cell","forge-table-row__selector"],[1,"forge-table-cell","forge-table-body__cell","forge-table-row__expander"],["aria-label","Toggle details",3,"click"],[1,"forge-table-cell","forge-table-body__cell",3,"ngClass"],[1,"forge-table-row","forge-table-body__row","forge-table-row__expandable-content"],["aria-label","Toggle selection",3,"click"],["appOnLoad","",1,"forge-table-cell__container",3,"ngClass"],[1,"forge-table-cell__container",3,"ngClass"],["appOnLoad","",1,"forge-table-cell__container",3,"loaded","ngClass"],[3,"appFormControlInvalid"],["type","text",3,"id","formControlName"],[1,"forge-table-row__expandable-content-cell"],[3,"data","rowIndex"],[1,"forge-table-row","forge-table-foot__row"],[1,"forge-table-cell","forge-table-foot__cell"],[1,"forge-table-cell__container"],["src","https://cdn.forge.tylertech.com/v1/images/spot-hero/general-empty-state-spot-hero.svg","alt",""]],template:function(i,n){if(i&1){let d=x();a(0,"forge-toolbar",4)(1,"h2",5),m(2,"Table demo"),l(),b(3,Yt,6,1)(4,ii,27,8),l(),a(5,"div",6)(6,"form",7,0),b(8,oi,2,7,"app-table-mobile",8)(9,wi,13,9,"table",9),b(10,Di,4,0,"div",10),l(),a(11,"forge-toolbar",11)(12,"forge-paginator",12),h("forge-paginator-change",function(F){return u(d),f(n.onPaginatorChange(F.detail))}),l()()()}i&2&&(s(3),C(n.isEditing?3:4),s(5),C(n.appCache.layoutMode==="sm"?8:9),s(2),C(!n.isBusy&&!(n.cache.recordsetFormGroup.controls.recordsetFormArray.controls!=null&&n.cache.recordsetFormGroup.controls.recordsetFormArray.controls.length)?10:-1),s(2),p("pageIndex",n.cache.filter.skip/n.cache.filter.take)("pageSize",n.cache.filter.take)("total",n.cache.totalRecords)("disabled",n.isEditing||n.isBusy))},dependencies:[H,U,ee,W,Q,J,j,Z,Y,Xe,Tt,Ce,St,Dt,ie,te,je,re,ne,se,ce,le,ae,me,pe,_e,de,tt,et,ge,it,ct,at,fe,ue,dt,st,be,he,vt,Ft,ht,bt,yt],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%;background-color:var(--forge-theme-surface)}[_nghost-%COMP%]     .forge-table{--table-row-height: 48px;--table-cell-inline-padding: 8px;min-width:100%;width:max-content;position:relative}[_nghost-%COMP%]     .forge-table thead, [_nghost-%COMP%]     .forge-table tfoot{position:sticky;background-color:var(--forge-theme-surface);z-index:calc(var(--forge-z-index-surface) + 2)}[_nghost-%COMP%]     .forge-table thead{inset-block-start:0}[_nghost-%COMP%]     .forge-table tfoot{inset-block-end:0}[_nghost-%COMP%]     .forge-table-head__cell{padding-left:var(--table-cell-inline-padding);padding-right:var(--table-cell-inline-padding);min-width:calc(var(--table-column-width, 200) * 1px);max-width:calc(var(--table-column-width, 200) * 1px)}[_nghost-%COMP%]     .forge-table-head__cell:first-child, [_nghost-%COMP%]     .forge-table-head__cell:last-child{padding-left:var(--table-cell-inline-padding)!important;padding-right:var(--table-cell-inline-padding)!important}[_nghost-%COMP%]     .forge-table-head__cell:hover .forge-table-head__cell-actions{transition-delay:.5s;max-width:72px}[_nghost-%COMP%]     .forge-table-head__cell-container{position:relative}[_nghost-%COMP%]     .forge-table-head__cell-sort-icon{display:inline!important}[_nghost-%COMP%]     .forge-table-head__cell-actions{position:absolute;right:4px;margin-block:auto;overflow:hidden;display:flex;align-items:center;max-width:0;transition:max-width .25s}[_nghost-%COMP%]     .forge-table-body__cell{padding-left:var(--table-cell-inline-padding);padding-right:var(--table-cell-inline-padding)}[_nghost-%COMP%]     .forge-table-body__cell:first-child, [_nghost-%COMP%]     .forge-table-body__cell:last-child{padding-left:var(--table-cell-inline-padding)!important;padding-right:var(--table-cell-inline-padding)!important}[_nghost-%COMP%]     .forge-table-body__cell forge-text-field{width:100%;--forge-field-background: var(--forge-theme-surface)}[_nghost-%COMP%]     .forge-table-body__cell forge-text-field::part(label){display:none}[_nghost-%COMP%]     .forge-table-body__cell forge-skeleton{margin:4px 0}[_nghost-%COMP%]     .forge-table-body__cell__actions{display:flex;flex-direction:row}[_nghost-%COMP%]     .forge-table-foot__row{height:48px}[_nghost-%COMP%]     .forge-table-foot__cell{color:var(--forge-theme-text-medium, rgba(0, 0, 0, .6));font-weight:700;text-align:left;font-size:calc(var(--forge-typography-font-size, 1rem) * .75);box-sizing:border-box;padding-left:var(--table-cell-inline-padding);padding-right:var(--table-cell-inline-padding);border-top:var(--forge-border-thin) solid var(--forge-theme-outline)}[_nghost-%COMP%]     .forge-table-foot__cell:first-child, [_nghost-%COMP%]     .forge-table-foot__cell:last-child{padding-left:var(--table-cell-inline-padding)!important;padding-right:var(--table-cell-inline-padding)!important}[_nghost-%COMP%]     .forge-table-row__selector, [_nghost-%COMP%]     .forge-table-row__expander{min-width:48px;max-width:48px;--table-cell-inline-padding: 0;text-align:center}[_nghost-%COMP%]     .forge-table-row__expandable-content{background-color:#e8eaf6!important;border-bottom:1px solid var(--forge-theme-outline)}[_nghost-%COMP%]     .forge-table-cell--frozen-left{position:sticky;left:0;background-color:var(--forge-theme-surface);z-index:calc(var(--forge-z-index-surface) + 0);border-right:var(--forge-border-medium) solid var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-cell--frozen-right{position:sticky;right:0;background-color:var(--forge-theme-surface);z-index:calc(var(--forge-z-index-surface) + 0);border-left:var(--forge-border-medium) solid var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-cell--resizing .forge-table-head__cell-dragger{display:none}[_nghost-%COMP%]     .forge-table-cell__image{width:48px;height:48px;border-radius:50%}  .column-popover{min-width:280px;--forge-list-padding: 0}  .column-popover forge-list-item{cursor:pointer}.header[_ngcontent-%COMP%]::part(section-start), .header[_ngcontent-%COMP%]::part(section-center), .header[_ngcontent-%COMP%]::part(section-end){column-gap:16px}.body[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr auto;overflow:hidden;height:100%}.body__table[_ngcontent-%COMP%]{overflow:auto}.footer[_ngcontent-%COMP%]::part(section-start), .footer[_ngcontent-%COMP%]::part(section-center), .footer[_ngcontent-%COMP%]::part(section-end){column-gap:16px}.cdk-drag-preview[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline);border:solid 2px #3f51b5;display:flex;padding:0 24px}.cdk-drag-preview[_ngcontent-%COMP%]   .forge-table-head__cell-actions[_ngcontent-%COMP%]{display:none}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#e8eaf6}.cdk-drag-placeholder[_ngcontent-%COMP%]   .forge-table-head__cell-container[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;align-items:center;padding:24px}.empty-state[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:256px}






/*# sourceMappingURL=table-demo.component-FCAYXPTT.css.map */`]});let o=r;return o})();export{io as TableDemoComponent};
//# sourceMappingURL=chunk-4SSV4HCD.js.map
