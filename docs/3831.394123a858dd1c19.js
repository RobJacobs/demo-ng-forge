"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[3831],{13831:(ie,H,g)=>{g.d(H,{y:()=>D,r:()=>C});var E=g(71670),w=g(53661),j=g(78127),K=g(84572),L=g(6099),N=g(53492),z=g(96290),A=g(48067);class Z{constructor(t,e,i){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues??!1,this.fieldsIndex=i,this.featureAdapter=e;const a=t.outFields;if(a&&!a.includes("*")){this.outFields=a;let n=0;for(const r of a){const o=(0,z.hr)(r),l=this.fieldsIndex.get(o),d=l?null:(0,z.Jc)(o,i),v=l?l.name:(0,z.nu)(r)||"FIELD_EXP_"+n++;this._fieldDataCache.set(r,{alias:v,clause:d})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach(e=>this.getAttributes(e)),this._returnDistinctMap.size):t.length}getAttributes(t){const e=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(e)}getFieldValue(t,e,i){const a=i?i.name:e;let n=null;return this._fieldDataCache.has(a)?n=this._fieldDataCache.get(a)?.clause:i||(n=(0,z.Jc)(e,this.fieldsIndex),this._fieldDataCache.set(a,{alias:a,clause:n})),i?this.featureAdapter.getAttribute(t,a):n?.calculateValue(t,this.featureAdapter)}getDataValue(t,e){const i=e.normalizationType,a=e.normalizationTotal;let n=e.field&&this.getFieldValue(t,e.field,this.fieldsIndex.get(e.field));if(e.field2&&(n=`${(0,A.wk)(n)}${e.fieldDelimiter}${(0,A.wk)(this.getFieldValue(t,e.field2,this.fieldsIndex.get(e.field2)))}`,e.field3&&(n=`${n}${e.fieldDelimiter}${(0,A.wk)(this.getFieldValue(t,e.field3,this.fieldsIndex.get(e.field3)))}`)),i&&Number.isFinite(n)){const r="field"===i&&e.normalizationField?this.getFieldValue(t,e.normalizationField,this.fieldsIndex.get(e.normalizationField)):null;n=(0,A.fk)(n,i,r,a)}return n}getExpressionValue(t,e,i,a){const n={attributes:this.featureAdapter.getAttributes(t),layer:{fields:this.fieldsIndex.fields}},r=a.createExecContext(n,i);return a.executeFunction(e,r)}getExpressionValues(t,e,i,a){const n={fields:this.fieldsIndex.fields};return t.map(r=>{const o={attributes:this.featureAdapter.getAttributes(r),layer:n},l=a.createExecContext(o,i);return a.executeFunction(e,l)})}validateItem(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:(0,z.Jc)(e,this.fieldsIndex)}),this._fieldDataCache.get(e)?.clause?.testFeature(t,this.featureAdapter)??!1}validateItems(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:(0,z.Jc)(e,this.fieldsIndex)}),this._fieldDataCache.get(e)?.clause?.testSet(t,this.featureAdapter)??!1}_processAttributesForOutFields(t){const e=this.outFields;if(!e||!e.length)return this.featureAdapter.getAttributes(t);const i={};for(const a of e){const{alias:n,clause:r}=this._fieldDataCache.get(a);i[n]=r?r.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,n)}return i}_processAttributesForDistinctValues(t){if((0,w.Wi)(t)||!this.returnDistinctValues)return t;const e=this.outFields,i=[];if(e)for(const r of e){const{alias:o}=this._fieldDataCache.get(r);i.push(t[o])}else for(const r in t)i.push(t[r]);const a=`${(e||["*"]).join(",")}=${i.join(",")}`;let n=this._returnDistinctMap.get(a)||0;return this._returnDistinctMap.set(a,++n),n>1?null:t}}var M=g(19482);function W(F,t,e){return{objectId:F,target:t,distance:e,type:"vertex"}}function G(F,t,e,i,a,n=!1){return{objectId:F,target:t,distance:e,type:"edge",start:i,end:a,draped:n}}var C,F,b=g(21272),Q=g(21230),$=g(77238);class D{constructor(t,e,i){this.items=t,this.query=e,this.geometryType=i.geometryType,this.hasM=i.hasM,this.hasZ=i.hasZ,this.fieldsIndex=i.fieldsIndex,this.objectIdField=i.objectIdField,this.spatialReference=i.spatialReference,this.featureAdapter=i.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const t=new Z(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:e,having:i,outStatistics:a}=this.query;if(!e?.length)return 1;const r=new Map,o=new Map,l=new Set;for(const d of a){const{statisticType:v}=d,I="exceedslimit"!==v?d.onStatisticField:void 0;if(!o.has(I)){const s=[];for(const c of e){const u=this._getAttributeValues(t,c,r);s.push(u)}o.set(I,this._calculateUniqueValues(s,t.returnDistinctValues))}const S=o.get(I);for(const s in S){const{data:c,items:u}=S[s],m=c.join(",");i&&!t.validateItems(u,i)||l.add(m)}}return l.size}createQueryResponse(){var t=this;return(0,E.Z)(function*(){let e;if(e=t.query.outStatistics?t.query.outStatistics.some(i=>"exceedslimit"===i.statisticType)?t._createExceedsLimitQueryResponse(t.query):yield t._createStatisticsQueryResponse(t.query):t._createFeatureQueryResponse(t.query),t.query.returnQueryGeometry){const i=t.query.geometry;e.queryGeometry=(0,N.JY)(t.query.outSR)&&!(0,N.fS)(i.spatialReference,t.query.outSR)?(0,b.S2)({spatialReference:t.query.outSR,...(0,M.iV)(i,i.spatialReference,t.query.outSR)}):(0,b.S2)({spatialReference:t.query.outSR,...i})}return e})()}createSnappingResponse(t,e){const i=this.featureAdapter,a=V(this.hasZ,this.hasM),{point:n,mode:r}=t,o="number"==typeof t.distance?t.distance:t.distance.x,l="number"==typeof t.distance?t.distance:t.distance.y,d={candidates:[]},v="esriGeometryPolygon"===this.geometryType,I=this._getPointCreator(r,this.spatialReference,e),S=new O(null,0),s=new O(null,0),c={x:0,y:0,z:0};for(const u of this.items){const m=i.getGeometry(u);if((0,w.Wi)(m))continue;const{coords:h,lengths:_}=m;if(S.coords=h,s.coords=h,t.types&C.EDGE){let y=0;for(let f=0;f<_.length;f++){const x=_[f];for(let p=0;p<x;p++,y+=a){const R=S;if(R.coordsIndex=y,p!==x-1){const P=s;P.coordsIndex=y+a;const Y=c;T(c,n,R,P);const k=(n.x-Y.x)/o,U=(n.y-Y.y)/l,B=k*k+U*U;B<=1&&d.candidates.push(G(i.getObjectId(u),I(Y),Math.sqrt(B),I(R),I(P)))}}}}if(t.types&C.VERTEX){const y=v?h.length-a:h.length;for(let f=0;f<y;f+=a){const x=S;x.coordsIndex=f;const p=(n.x-x.x)/o,R=(n.y-x.y)/l,P=p*p+R*R;P<=1&&d.candidates.push(W(i.getObjectId(u),I(x),Math.sqrt(P)))}}}return d.candidates.sort((u,m)=>u.distance-m.distance),d}_getPointCreator(t,e,i){const a=(0,w.pC)(i)&&!(0,N.fS)(e,i)?o=>(0,M.iV)(o,e,i):o=>o,{hasZ:n}=this;return"3d"===t?n?({x:o,y:l,z:d})=>a({x:o,y:l,z:d}):({x:o,y:l})=>a({x:o,y:l,z:0}):({x:o,y:l})=>a({x:o,y:l})}createSummaryStatisticsResponse(t){var e=this;return(0,E.Z)(function*(){const{field:i,valueExpression:a,normalizationField:n,normalizationType:r,normalizationTotal:o,minValue:l,maxValue:d,scale:v}=t,I=e.fieldsIndex.isDateField(i),S=yield e._getDataValues({field:i,valueExpression:a,normalizationField:n,normalizationType:r,normalizationTotal:o,scale:v}),s=(0,A.S5)({normalizationType:r,normalizationField:n,minValue:l,maxValue:d}),c=e.fieldsIndex.get(i),u={value:.5,fieldType:c?.type},m=(0,Q.qN)(c)?(0,A.H0)({values:S,supportsNullCount:s,percentileParams:u}):(0,A.i5)({values:S,minValue:l,maxValue:d,useSampleStdDev:!r,supportsNullCount:s,percentileParams:u});return(0,A.F_)(m,I)})()}createUniqueValuesResponse(t){var e=this;return(0,E.Z)(function*(){const{field:i,valueExpression:a,domains:n,returnAllCodedValues:r,scale:o}=t,l=yield e._getDataValues({field:i,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,valueExpression:a,scale:o}),d=(0,A.eT)(l);return(0,A.Qm)(d,n,r,t.fieldDelimiter)})()}createClassBreaksResponse(t){var e=this;return(0,E.Z)(function*(){const{field:i,valueExpression:a,normalizationField:n,normalizationType:r,normalizationTotal:o,classificationMethod:l,standardDeviationInterval:d,minValue:v,maxValue:I,numClasses:S,scale:s}=t,c=yield e._getDataValues({field:i,valueExpression:a,normalizationField:n,normalizationType:r,normalizationTotal:o,scale:s}),u=(0,A.G2)(c,{field:i,normalizationField:n,normalizationType:r,normalizationTotal:o,classificationMethod:l,standardDeviationInterval:d,minValue:v,maxValue:I,numClasses:S});return(0,A.DL)(u,l)})()}createHistogramResponse(t){var e=this;return(0,E.Z)(function*(){const{field:i,valueExpression:a,normalizationField:n,normalizationType:r,normalizationTotal:o,classificationMethod:l,standardDeviationInterval:d,minValue:v,maxValue:I,numBins:S,scale:s}=t,c=yield e._getDataValues({field:i,valueExpression:a,normalizationField:n,normalizationType:r,normalizationTotal:o,scale:s});return(0,A.oF)(c,{field:i,normalizationField:n,normalizationType:r,normalizationTotal:o,classificationMethod:l,standardDeviationInterval:d,minValue:v,maxValue:I,numBins:S})})()}_sortFeatures(t,e,i){if(t.length>1&&e&&e.length)for(const a of e.reverse()){const n=a.split(" "),r=n[0],o=this.fieldsIndex.get(r),l=!!n[1]&&"desc"===n[1].toLowerCase(),d=(0,A.Lq)(o?.type,l);t.sort((v,I)=>{const S=i(v,r,o),s=i(I,r,o);return d(S,s)})}}_createFeatureQueryResponse(t){const e=this.items,{geometryType:i,hasM:a,hasZ:n,objectIdField:r,spatialReference:o}=this,{outFields:l,outSR:d,quantizationParameters:v,resultRecordCount:I,resultOffset:S,returnZ:s,returnM:c}=t,u=null!=I&&e.length>(S||0)+I,m=l&&(l.includes("*")?[...this.fieldsIndex.fields]:l.map(h=>this.fieldsIndex.get(h)));return{exceededTransferLimit:u,features:this._createFeatures(t,e),fields:m,geometryType:i,hasM:a&&c,hasZ:n&&s,objectIdFieldName:r,spatialReference:(0,b.S2)(d||o),transform:v&&(0,L.vY)(v)||null}}_createFeatures(t,e){const i=new Z(t,this.featureAdapter,this.fieldsIndex),{hasM:a,hasZ:n}=this,{orderByFields:r,quantizationParameters:o,returnGeometry:l,returnCentroid:d,maxAllowableOffset:v,resultOffset:I,resultRecordCount:S,returnZ:s=!1,returnM:c=!1}=t,u=n&&s,m=a&&c;let h=[],_=0;const y=[...e];if(this._sortFeatures(y,r,(x,p,R)=>i.getFieldValue(x,p,R)),l||d){const x=(0,L.vY)(o)??void 0;if(l&&!d)for(const p of y)h[_++]={attributes:i.getAttributes(p),geometry:(0,b.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(p),v,x,u,m)};else if(!l&&d)for(const p of y)h[_++]={attributes:i.getAttributes(p),centroid:(0,b.EG)(this,this.featureAdapter.getCentroid(p,this),x)};else for(const p of y)h[_++]={attributes:i.getAttributes(p),centroid:(0,b.EG)(this,this.featureAdapter.getCentroid(p,this),x),geometry:(0,b.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(p),v,x,u,m)}}else for(const x of y){const p=i.getAttributes(x);p&&(h[_++]={attributes:p})}const f=I||0;return null!=S&&(h=h.slice(f,Math.min(h.length,f+S))),h}_createExceedsLimitQueryResponse(t){let e=!1,i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY;for(const r of t.outStatistics??[])if("exceedslimit"===r.statisticType){i=null!=r.maxPointCount?r.maxPointCount:Number.POSITIVE_INFINITY,a=null!=r.maxRecordCount?r.maxRecordCount:Number.POSITIVE_INFINITY,n=null!=r.maxVertexCount?r.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)e=this.items.length>i;else if(this.items.length>a)e=!0;else{const r=V(this.hasZ,this.hasM),o=this.featureAdapter;e=this.items.reduce((l,d)=>{const v=o.getGeometry(d);return l+((0,w.pC)(v)&&v.coords.length||0)},0)/r>n}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(e)}}]}}_createStatisticsQueryResponse(t){var e=this;return(0,E.Z)(function*(){const i={attributes:{}},a=[],n=new Map,r=new Map,o=new Map,l=new Map,d=new Z(t,e.featureAdapter,e.fieldsIndex),v=t.outStatistics,{groupByFieldsForStatistics:I,having:S,orderByFields:s}=t,c=I&&I.length,u=!!c,m=u?I[0]:null,h=u&&!e.fieldsIndex.get(m);for(const y of v??[]){const{outStatisticFieldName:f,statisticType:x}=y,p=y,R="exceedslimit"!==x?y.onStatisticField:void 0,P="percentile_disc"===x||"percentile_cont"===x,Y="EnvelopeAggregate"===x||"CentroidAggregate"===x||"ConvexHullAggregate"===x,k=u&&1===c&&(R===m||h)&&"count"===x;if(u){if(!o.has(R)){const B=[];for(const te of I){const ee=e._getAttributeValues(d,te,n);B.push(ee)}o.set(R,e._calculateUniqueValues(B,!Y&&d.returnDistinctValues))}const U=o.get(R);for(const B in U){const{count:te,data:ee,items:se,itemPositions:re}=U[B],ne=ee.join(",");if(!S||d.validateItems(se,S)){const X=l.get(ne)||{attributes:{}};if(Y){X.aggregateGeometries||(X.aggregateGeometries={});const{aggregateGeometries:J,outStatisticFieldName:q}=yield e._getAggregateGeometry(p,se);X.aggregateGeometries[q]=J}else{let J=null;if(k)J=te;else{const q=e._getAttributeValues(d,R,n),ae=re.map(le=>q[le]);J=P&&"statisticParameters"in p?e._getPercentileValue(p,ae):e._getStatisticValue(p,ae,null,d.returnDistinctValues)}X.attributes[f]=J}let oe=0;I.forEach((J,q)=>X.attributes[e.fieldsIndex.get(J)?J:"EXPR_"+ ++oe]=ee[q]),l.set(ne,X)}}}else if(Y){i.aggregateGeometries||(i.aggregateGeometries={});const{aggregateGeometries:U,outStatisticFieldName:B}=yield e._getAggregateGeometry(p,e.items);i.aggregateGeometries[B]=U}else{const U=e._getAttributeValues(d,R,n);i.attributes[f]=P&&"statisticParameters"in p?e._getPercentileValue(p,U):e._getStatisticValue(p,U,r,d.returnDistinctValues)}a.push({name:f,alias:f,type:"esriFieldTypeDouble"})}const _=u?Array.from(l.values()):[i];return e._sortFeatures(_,s,(y,f)=>y.attributes[f]),{fields:a,features:_}})()}_getAggregateGeometry(t,e){var i=this;return(0,E.Z)(function*(){const a=yield Promise.all([g.e(7640),g.e(8592)]).then(g.bind(g,15390)),{statisticType:n,outStatisticFieldName:r}=t,{featureAdapter:o,spatialReference:l,geometryType:d,hasZ:v,hasM:I}=i,S=e.map(u=>(0,b.Op)(d,v,I,o.getGeometry(u))),s=a.convexHull(l,S,!0)[0],c={aggregateGeometries:null,outStatisticFieldName:null};if("EnvelopeAggregate"===n){const u=s?(0,K._w)(s):(0,K.aO)(a.union(l,S));c.aggregateGeometries={...u,spatialReference:l},c.outStatisticFieldName=r||"extent"}else if("CentroidAggregate"===n){const u=s?(0,j.tO)(s):(0,j.$G)((0,K.aO)(a.union(l,S)));c.aggregateGeometries={x:u[0],y:u[1],spatialReference:l},c.outStatisticFieldName=r||"centroid"}else"ConvexHullAggregate"===n&&(c.aggregateGeometries=s,c.outStatisticFieldName=r||"convexHull");return c})()}_getStatisticValue(t,e,i,a){const{onStatisticField:n,statisticType:r}=t;let o=null;return o=i?.has(n)?i.get(n):(0,Q.qN)(this.fieldsIndex.get(n))?(0,A.H0)({values:e,returnDistinct:a}):(0,A.i5)({values:a?[...new Set(e)]:e,minValue:null,maxValue:null,useSampleStdDev:!0}),i&&i.set(n,o),o["var"===r?"variance":r]}_getPercentileValue(t,e){const{onStatisticField:i,statisticParameters:a,statisticType:n}=t,{value:r,orderBy:o}=a,l=this.fieldsIndex.get(i);return(0,A.XL)(e,{value:r,orderBy:o,fieldType:l?.type,isDiscrete:"percentile_disc"===n})}_getAttributeValues(t,e,i){if(i.has(e))return i.get(e);const a=this.fieldsIndex.get(e),n=this.items.map(r=>t.getFieldValue(r,e,a));return i.set(e,n),n}_getAttributeDataValues(t,e){return this.items.map(i=>t.getDataValue(i,{field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,normalizationField:e.normalizationField,normalizationType:e.normalizationType,normalizationTotal:e.normalizationTotal}))}_getAttributeExpressionValues(t,e,i){var a=this;return(0,E.Z)(function*(){const{arcadeUtils:n}=yield(0,$.LC)(),r=n.createFunction(e),o=i&&n.getViewInfo(i);return t.getExpressionValues(a.items,r,o,n)})()}_calculateUniqueValues(t,e){const i={},a=this.items,n=a.length;for(let r=0;r<n;r++){const o=a[r],l=[];for(const v of t)l.push(v[r]);const d=l.join(",");null==i[d]?i[d]={count:1,data:l,items:[o],itemPositions:[r]}:(e||i[d].count++,i[d].items.push(o),i[d].itemPositions.push(r))}return i}_getDataValues(t){var e=this;return(0,E.Z)(function*(){const i=new Z(e.query,e.featureAdapter,e.fieldsIndex),{valueExpression:a,field:n,normalizationField:r,normalizationType:o,normalizationTotal:l,scale:d}=t;return a?e._getAttributeExpressionValues(i,a,a?{viewingMode:"map",scale:d,spatialReference:e.query.outSR||e.spatialReference}:null):e._getAttributeDataValues(i,{field:n,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,normalizationField:r,normalizationType:o,normalizationTotal:l})})()}}function T(F,t,e,i){const a=i.x-e.x,n=i.y-e.y,l=Math.min(1,Math.max(0,((t.x-e.x)*a+(t.y-e.y)*n)/(a*a+n*n)));F.x=e.x+a*l,F.y=e.y+n*l}function V(F,t){return F?t?4:3:t?3:2}(F=C||(C={}))[F.NONE=0]="NONE",F[F.EDGE=1]="EDGE",F[F.VERTEX=2]="VERTEX";class O{constructor(t,e){this.coords=t,this.coordsIndex=e}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}},96290:(ie,H,g)=>{g.d(H,{nu:()=>Q,hr:()=>b,Jc:()=>W,G3:()=>$,Of:()=>G,z4:()=>M,hO:()=>Z});var E=g(32995),w=g(29583),j=g(30753);const L=new class K{constructor(T,V){this._cache=new w.Z(T),this._invalidCache=new w.Z(V)}get(T,V){const C=`${V.uid}:${T}`,O=this._cache.get(C);if(O)return O;if(void 0!==this._invalidCache.get(C))return null;try{const F=j.WhereClause.create(T,V);return this._cache.put(C,F),F}catch{return this._invalidCache.put(C,null),null}}}(50,500),N="feature-store:unsupported-query",z=" as ",A=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function Z(D,T){if(!T)return!0;const V=L.get(T,D);if(!V)throw new E.Z(N,"invalid SQL expression",{where:T});if(!V.isStandardized)throw new E.Z(N,"where clause is not standard",{where:T});return G(D,V.fieldNames,"where clause contains missing fields"),!0}function M(D,T,V){if(!T)return!0;const C=L.get(T,D);if(!C)throw new E.Z(N,"invalid SQL expression",{having:T});if(!C.isAggregate)throw new E.Z(N,"having does not contain a valid aggregate function",{having:T});if(G(D,C.fieldNames,"having contains missing fields"),!C.getExpressions().every(F=>{const{aggregateType:t,field:e}=F,i=D.get(e)?.name;return V.some(a=>{const{onStatisticField:n,statisticType:r}=a;return D.get(n)?.name===i&&r.toLowerCase().trim()===t})}))throw new E.Z(N,"expressions in having should also exist in outStatistics",{having:T});return!0}function W(D,T){return D?L.get(D,T):null}function G(D,T,V,C=!0){const O=[];for(const F of T)if("*"!==F&&!D.has(F))if(C){const t=b(F);try{const e=W(t,D);if(!e)throw new E.Z(N,"invalid SQL expression",{where:t});if(!e.isStandardized)throw new E.Z(N,"expression is not standard",{clause:e});G(D,e.fieldNames,"expression contains missing fields")}catch(e){const i=e&&e.details;if(i&&(i.clause||i.where))throw e;i&&i.missingFields?O.push(...i.missingFields):O.push(F)}}else O.push(F);if(O.length)throw new E.Z(N,V,{missingFields:O})}function b(D){return D.split(z)[0]}function Q(D){return D.split(z)[1]}function $(D,T){const V=T.get(D);return!!V&&!A.has(V.type)}},21272:(ie,H,g)=>{g.d(H,{EG:()=>C,Op:()=>O,S2:()=>v,Up:()=>F,j6:()=>e,vF:()=>Q});var E=g(71670),w=g(63321),j=g(53661),K=g(82769),L=g(21789),N=g(84572),z=g(71182),A=g(42758),Z=g(53492),M=g(50805),W=g(93846),G=g(19482);const b=new w.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),Q=Object.freeze({}),$=new W.Z,D=new W.Z,T=new W.Z,V={esriGeometryPoint:M.fQ,esriGeometryPolyline:M.J6,esriGeometryPolygon:M.eG,esriGeometryMultipoint:M.Iv};function C(s,c,u,m=s.hasZ,h=s.hasM){if((0,j.Wi)(c))return null;const _=s.hasZ&&m,y=s.hasM&&h;if(u){const f=(0,M.Nh)(T,c,s.hasZ,s.hasM,"esriGeometryPoint",u,m,h);return(0,M.fQ)(f,_,y)}return(0,M.fQ)(c,_,y)}function O(s,c,u,m,h,_,y=c,f=u){const x=c&&y,p=u&&f,R=(0,j.pC)(m)?"coords"in m?m:m.geometry:null;if((0,j.Wi)(R))return null;if(h){let P=(0,M.zj)(D,R,c,u,s,h,y,f);return _&&(P=(0,M.Nh)(T,P,x,p,s,_)),V[s]?.(P,x,p)??null}if(_){const P=(0,M.Nh)(T,R,c,u,s,_,y,f);return V[s]?.(P,x,p)??null}return(0,M.hY)($,R,c,u,y,f),V[s]?.($,x,p)??null}function F(s,c,u){return t.apply(this,arguments)}function t(){return(t=(0,E.Z)(function*(s,c,u){const{outFields:m,orderByFields:h,groupByFieldsForStatistics:_,outStatistics:y}=s;if(m)for(let f=0;f<m.length;f++)m[f]=m[f].trim();if(h)for(let f=0;f<h.length;f++)h[f]=h[f].trim();if(_)for(let f=0;f<_.length;f++)_[f]=_[f].trim();if(y)for(let f=0;f<y.length;f++)y[f].onStatisticField&&(y[f].onStatisticField=y[f].onStatisticField.trim());return s.geometry&&!s.outSR&&(s.outSR=s.geometry.spatialReference),e(s,c,u)})).apply(this,arguments)}function e(s,c,u){return i.apply(this,arguments)}function i(){return i=(0,E.Z)(function*(s,c,u){if(!s)return null;let{where:m}=s;if(s.where=m=m&&m.trim(),(!m||/^1 *= *1$/.test(m)||c&&c===m)&&(s.where=null),!s.geometry)return s;let h=yield function r(s){return o.apply(this,arguments)}(s);if(s.distance=0,s.units=null,"esriSpatialRelEnvelopeIntersects"===s.spatialRel){const{spatialReference:_}=s.geometry;h=(0,N.aO)(h),h.spatialReference=_}if(h){yield(0,G._W)(h.spatialReference,u),h=function n(s,c){const u=s.spatialReference;return a(s,c)&&(0,z.YX)(s)?{spatialReference:u,rings:[[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]]]}:s}(h,u);const _=(yield(0,A.aX)((0,z.im)(h)))[0];if((0,j.Wi)(_))throw Q;const y="quantizationParameters"in s&&s.quantizationParameters?.tolerance||"maxAllowableOffset"in s&&s.maxAllowableOffset||0,f=y&&a(h,u)?{densificationStep:8*y}:void 0,x=_.toJSON(),p=yield(0,G.iV)(x,x.spatialReference,u,f);if(!p)throw Q;p.spatialReference=u,s.geometry=p}return s}),i.apply(this,arguments)}function a(s,c){if(!s)return!1;const u=s.spatialReference;return((0,z.YX)(s)||(0,z.oU)(s)||(0,z.l9)(s))&&!(0,Z.fS)(u,c)&&!(0,L.Up)(u,c)}function o(){return o=(0,E.Z)(function*(s){const{distance:c,units:u}=s,m=s.geometry;if(null==c||"vertexAttributes"in m)return m;const h=m.spatialReference,_=u?b.fromJSON(u):(0,K.qE)(h),y=h&&((0,Z.sT)(h)||(0,Z.sS)(h))?m:yield(0,G._W)(h,Z.Zn).then(()=>(0,G.iV)(m,Z.Zn));return(yield function l(){return d.apply(this,arguments)}())(y.spatialReference,y,c,_)}),o.apply(this,arguments)}function d(){return(d=(0,E.Z)(function*(){return(yield Promise.all([g.e(7640),g.e(8592)]).then(g.bind(g,15390))).geodesicBuffer})).apply(this,arguments)}function v(s){return s&&I in s?JSON.parse(JSON.stringify(s,S)):s}const I="_geVersion",S=(s,c)=>s!==I?c:void 0}}]);
//# sourceMappingURL=3831.394123a858dd1c19.js.map