import{a as b,b as ne,c as s,d as x,e as oe,f as re,g as ie}from"./chunk-EXAQ3WUA.js";import{s as y}from"./chunk-MQ3GSWWI.js";import{b as M}from"./chunk-3RMJ5DR6.js";import{Ab as j,Cc as U,Dc as W,F as h,Ob as H,Pb as J,Sc as Z,Tc as K,Uc as X,gb as L,i as E,jd as Y,k as G,kb as A,kd as ee,lb as Q,nb as B,ob as k,pd as te,qb as $,qd as ae,tb as q,wb as z}from"./chunk-AWYXD4HD.js";import{$b as T,Cb as I,Fb as P,Lb as F,Mb as D,Nb as N,Pb as i,Qb as f,Xb as R,Ya as d,ac as V,ja as C,ob as c,tb as w,ua as v,ub as S,va as _,vb as O,wb as o,xb as r,yb as g}from"./chunk-CFL2K3XP.js";import"./chunk-O62F43XY.js";var p=class extends re{constructor(t){t.format=l=>h(l)?l.toString():"",super(t)}append(t,l,e){return super.append(h(t)?t.toString():"",l,e)}get typedValue(){return this.unmaskedValue!==""?super.typedValue:null}set typedValue(t){super.typedValue=t??""}};var me=["imaskRef"];function le(m,t){if(m&1&&(o(0,"forge-option",14),i(1),r()),m&2){let l=t.$implicit;c("value",l.value),d(),f(l.label)}}var ve=(()=>{let t=class t{constructor(){this.formGroup=new B({format:new k("000-aa-****"),input:new k(null),maskType:new k("string")}),this.unmask=!1,this.maskOptions=[{value:"string",label:"String"},{value:"number",label:"Number"},{value:"number-search",label:"Number search"},{value:"date",label:"Date"},{value:"date-search",label:"Date search"},{value:"datetime",label:"Date time"}],this.helpText="",this.mask=this.buildStringMask(this.formGroup.value.format)}ngAfterViewInit(){console.log(this.imaskRef)}onApply(){this.imaskRef?.destroyMask(),this.formGroup.controls.input.setValue(null),requestAnimationFrame(()=>{switch(this.helpText="",this.unmask=!1,this.formGroup.value.maskType){case"string":this.mask=this.buildStringMask(this.formGroup.value.format);break;case"number":this.mask=this.buildNumberMask(this.formGroup.value.format);break;case"number-search":this.mask=this.buildNumberSearchMask();break;case"date":this.mask=this.buildDateMask();break;case"date-search":this.mask=this.buildDateSearchMask();break;case"datetime":this.mask=this.buildDateTimeMask();break}})}buildStringMask(e){if(!e?.length)return{mask:/./};let n=e.replace(/([0a*]*)/g,a=>a.length?`\`${a}`:"");return new ne({mask:n,lazy:!1,placeholderChar:" "})}buildNumberMask(e){if(this.unmask="typed",!e?.length)return new p({mask:Number,scale:0,signed:!0});let n=parseFloat(e.replace(/[#&-]/g,"9").replace(/,/g,"")),a=e.includes("&")?e.includes("-")?n*-1:0:NaN;return new p({mask:Number,thousandsSeparator:e.includes(",")?",":"",radix:".",padFractionalZeros:!!e.includes("."),scale:e.split(".")[1]?.length||0,signed:!!e.includes("-"),max:isFinite(n)?n:void 0,min:isFinite(a)?a:void 0})}buildNumberSearchMask(){return{mask:/^\s*[!\-.\d:<>=|\s+]*\s*$/}}buildDateMask(){return this.unmask="typed",this.helpText="MM/dd/yyyy",new x({mask:Date,pattern:"MM/`dd/`yyyy",placeholderChar:" ",blocks:{MM:{mask:s,from:1,to:12,maxLength:2},dd:{mask:s,from:1,to:31,maxLength:2},yyyy:{mask:s,from:1900,to:9999,maxLength:4}},autofix:!1,lazy:!1,overwrite:!1,format:e=>M(e)?y(e,"MM/dd/yyyy"):"",parse:e=>b(e,"MM/dd/yyyy",new Date)})}buildDateTimeMask(){return this.unmask="typed",this.helpText="MM/dd/yyyy hh:mm:ss aa",new x({mask:Date,pattern:"MM/`dd/`yyyy `hh:`mm:`ss `aa",placeholderChar:" ",blocks:{MM:{mask:s,from:1,to:12,maxLength:2},dd:{mask:s,from:1,to:31,maxLength:2},yyyy:{mask:s,from:1900,to:9999,maxLength:4},hh:{mask:s,from:1,to:12,maxLength:2},mm:{mask:s,from:0,to:59,maxLength:2},ss:{mask:s,from:0,to:59,maxLength:2},aa:{mask:oe,enum:["am","pm"]}},autofix:!1,lazy:!1,overwrite:!1,format:e=>M(e)?y(e,"MM/dd/yyyy hh:mm:ss aaa"):"",parse:e=>b(e,"MM/dd/yyyy hh:mm:ss aaa",new Date)})}buildDateSearchMask(){return{mask:/^\s*[!\-.\d:<>=|\s/]*\s*$/}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=C({type:t,selectors:[["app-imask"]],viewQuery:function(n,a){if(n&1&&F(me,5),n&2){let u;D(u=N())&&(a.imaskRef=u.first)}},standalone:!0,features:[R],decls:36,vars:7,consts:[["input","","imaskRef","imask"],["input",""],[1,"header"],["slot","start",1,"forge-typography--subheading4"],[1,"body"],["novalidate","","autocomplete","off",3,"formGroup"],["id","imask--input","type","text","formControlName","input",3,"imask","unmask"],["for","imask--input","slot","label"],["slot","support-text"],[2,"width","600px"],["id","imask--format","type","text","formControlName","format"],["for","imask--format","slot","label"],[2,"display","flex","column-gap","8px","align-items","center"],["formControlName","maskType","label","Mask type",2,"flex-grow","1"],[3,"value"],["variant","outlined",3,"click"]],template:function(n,a){if(n&1){let u=I();o(0,"forge-toolbar",2)(1,"h2",3),i(2,"IMask"),r()(),o(3,"div",4)(4,"form",5)(5,"forge-text-field"),g(6,"input",6,0),o(9,"label",7),i(10,"Input"),r(),o(11,"span",8),i(12),r()(),o(13,"div",9)(14,"div")(15,"b"),i(16,"string mask"),r(),i(17,": (0) any digit, (a) any letter, (*) any char"),r(),o(18,"div")(19,"b"),i(20,"number mask"),r(),i(21,": (#) required digit, (&) optional digit, (-) sign, (.) decimal, (,) separator"),r()(),o(22,"forge-text-field"),g(23,"input",10,1),o(25,"label",11),i(26,"Format"),r()(),o(27,"div",12)(28,"forge-select",13),S(29,le,2,2,"forge-option",14,w),r(),o(31,"forge-button",15),P("click",function(){return v(u),_(a.onApply())}),i(32," Apply "),r()()(),o(33,"p"),i(34),T(35,"json"),r()()}n&2&&(d(4),c("formGroup",a.formGroup),d(2),c("imask",a.mask)("unmask",a.unmask),d(6),f(a.helpText),d(17),O(a.maskOptions),d(5),f(V(35,5,a.formGroup.getRawValue())))},dependencies:[G,E,j,$,L,A,Q,q,z,ie,J,H,W,U,X,K,Z,ee,Y,ae,te],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px}.body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:16px;background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border-color:var(--forge-theme-outline);box-shadow:var(--forge-elevation-1);display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px;grid-template-columns:320px}.body[_ngcontent-%COMP%]   form--row-break[_ngcontent-%COMP%]{grid-column-start:1}.body[_ngcontent-%COMP%]   form--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.body[_ngcontent-%COMP%]   form--col-span.body[_ngcontent-%COMP%]   form--col-span[_ngcontent-%COMP%]{width:auto}.body[_ngcontent-%COMP%]   form--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.body[_ngcontent-%COMP%]   form--col-span2.body[_ngcontent-%COMP%]   form--col-span2[_ngcontent-%COMP%]{width:656px}.body[_ngcontent-%COMP%]   form--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.body[_ngcontent-%COMP%]   form--col-span3.body[_ngcontent-%COMP%]   form--col-span3[_ngcontent-%COMP%]{width:992px}.body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}






/*# sourceMappingURL=imask.component-QHLW73SO.css.map */`]});let m=t;return m})();export{ve as ImaskComponent};
//# sourceMappingURL=chunk-DDRUHR7H.js.map
