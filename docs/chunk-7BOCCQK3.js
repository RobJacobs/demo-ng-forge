import{a as l}from"./chunk-CRNSR3XA.js";import{b as m}from"./chunk-O75Y6YHR.js";import{B as w,D as c,n as a,o as C}from"./chunk-VBRQHIHF.js";import{F as h,I as d,L as f,O as S,P as k,d as i,da as b,g as u,ia as y,w as g,x as p}from"./chunk-MOKV6GK3.js";var P=(()=>{let n=class n{constructor(){this.httpClient=y(C)}getProfile(){return this.httpClient.get("mock-data/profile.json")}getPeople(e){return this.httpClient.get("mock-data/people.json").pipe(k(1e3),p(t=>{let r=t.length;return e&&(e.filters?.length&&(t=l.filterData(t,e.filters.map(o=>({key:o.property,value:o.value,strict:o.property==="gender"||o.property==="id"}))),r=t.length),e.sort&&(t=l.sortData(t,e.sort.property,"string",e.sort.direction)),c(e.skip)&&c(e.take)&&(t=t.slice(e.skip,e.skip+e.take))),{count:r,data:t}}))}getPerson(e){return this.httpClient.get("mock-data/people.json").pipe(p(t=>t.find(r=>r.id.toString()===e.toString())))}getSearches(e){return new i(t=>{let r=localStorage.getItem(e);w(r)&&(r=JSON.parse(r)),t.next(r),t.complete()})}saveSearches(e,t){return new i(r=>{localStorage.setItem(e,JSON.stringify(t)),r.next(!0),r.complete()})}getLongRequest(){return this.httpClient.get("http://localhost:5000/long-request",{context:new a().set(m,!0)})}getFile(e){return this.httpClient.get(`mock-data/${e}`,{context:new a().set(m,!0),responseType:"blob"})}pollingRequest(e){let t=new u,r=new Date;return r.setSeconds(r.getSeconds()+e),h(0,100).pipe(f(()=>this.getLongRequest()),d(o=>new Date(o.data)>r),S(1),g(6e4)).subscribe({next:o=>{t.next(o.data),t.complete()},error:o=>{t.error(o),t.complete()}}),t}};n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"});let s=n;return s})();export{P as a};
//# sourceMappingURL=chunk-7BOCCQK3.js.map
