import{a as vt,c as Ft,d as yt,f as wt,h as Dt}from"./chunk-BHPJTIX6.js";import{a as st}from"./chunk-VZYJZLBM.js";import"./chunk-RIJLVLGM.js";import{a as xt}from"./chunk-LS7JJXJ2.js";import{b as pt,d as mt,e as ut,t as ht,w as Se,x as bt,y as Ct}from"./chunk-IURIFBWO.js";import"./chunk-G23G7C43.js";import"./chunk-25LYXCFV.js";import{a as _t,c as gt,e as ft}from"./chunk-OHW3R4WQ.js";import"./chunk-PSWJZLWW.js";import{a as dt}from"./chunk-VT5BBUOX.js";import{a as B}from"./chunk-WTEGRGZ6.js";import"./chunk-MZMUE3P7.js";import"./chunk-Y5FC5JZC.js";import{a as ct}from"./chunk-OSFEDCAA.js";import{$c as Ye,Ab as E,Ac as ie,Bc as oe,C as Be,Cc as ne,Cd as ge,Db as Q,Dd as fe,Fb as Ne,Fc as re,Gc as le,Hb as Le,Hc as ae,Ib as qe,Ic as ce,Id as lt,Jb as Ue,Jd as at,Kd as ue,Lb as He,Ld as he,Mb as Z,Nc as se,Oc as de,Pb as Y,Pc as pe,Qb as Ke,Qc as me,Vc as je,Zc as Qe,_c as Ze,ad as et,bd as _e,c as U,cc as ee,d as Ge,dc as te,i as H,jd as tt,kd as it,ld as ot,mb as K,nb as $,nc as Je,od as nt,pd as rt,rb as J,tb as W,vb as X,wb as j,x as $e,yb as De,yc as We,zc as Xe}from"./chunk-WGIND62E.js";import{$b as M,Ab as b,B as N,Bb as T,Cb as y,Db as w,E as Pe,Eb as d,Fb as l,Fc as Ae,Gb as r,Hb as _,Lb as I,Mb as z,N as Ce,Nb as q,Ob as C,Rb as u,Sb as a,T as xe,U as ve,Va as c,Zb as Re,_b as Ve,ac as Fe,ca as x,dc as m,e as Ee,ec as k,fc as ye,ha as g,ia as f,la as Me,lb as L,mc as O,nc as A,oa as Oe,oc as G,pc as Ie,qb as V,sc as F,uc as D,vc as ze,xc as we,yb as S,zb as h}from"./chunk-UXY6XTJ4.js";import"./chunk-NCBA65HR.js";var Mt=()=>({name:"firstName"}),Ot=()=>({name:"lastName"}),Rt=()=>({name:"occupation"}),Vt=i=>({"operator__addon--selected":i});function It(i,s){if(i&1&&(l(0,"forge-option",20),m(1),r()),i&2){let e=s.$implicit;d("value",e.id),c(),k(e.name)}}function zt(i,s){if(i&1&&(l(0,"span",21),m(1),r()),i&2){let e=a(2);c(),k(e.userFilter==null?null:e.userFilter.description)}}function At(i,s){if(i&1){let e=C();l(0,"forge-select",19),u("change",function(o){g(e);let n=a();return f(n.onFilterChange(o))}),y(1,It,2,2,"forge-option",20,T),h(3,zt,2,1,"span",21),l(4,"forge-icon-button",22),u("click",function(){g(e);let o=a();return f(o.onFilterDelete())}),_(5,"forge-icon",23),r(),l(6,"forge-tooltip",24),m(7,"Delete filter"),r()(),_(8,"forge-divider")}if(i&2){let e=a();d("value",e.userFilter==null?null:e.userFilter.id),c(),w(e.cache.userFilters),c(2),b(!(e.userFilter==null||e.userFilter.description==null)&&e.userFilter.description.length?3:-1),c(),d("disabled",!e.userFilter)}}function Gt(i,s){i&1&&q(0)}function $t(i,s){i&1&&q(0)}function Bt(i,s){i&1&&q(0)}function Nt(i,s){if(i&1){let e=C();l(0,"forge-icon-button",25,2),u("click",function(o){let n=g(e).name,p=M(1),v=a();return f(v.onOperatorPopoverOpen(o,p,n))}),_(2,"forge-icon",26),r(),l(3,"forge-tooltip"),m(4,"Filter operators"),r()}if(i&2){let e,t=s.name,o=a(),n=M(32);d("ngClass",A(2,Vt,(e=o.cache.recordsetFilterFormGroup.get(t))==null||e.value==null?null:e.value.operator))("forgePopover",n)}}function Lt(i,s){if(i&1&&_(0,"forge-icon",30),i&2){let e=a().$implicit;S("aria-label",e.label+" selected")}}function qt(i,s){if(i&1&&(l(0,"forge-list-item",28)(1,"button",29),m(2),r(),h(3,Lt,1,1,"forge-icon",30),r()),i&2){let e=s.$implicit,t=a(2);d("value",e.value)("selected",(t.operatorPopoverFormGroup==null?null:t.operatorPopoverFormGroup.value.operator)===e.value),c(2),k(e.label),c(),b((t.operatorPopoverFormGroup==null?null:t.operatorPopoverFormGroup.value.operator)===e.value?3:-1)}}function Ut(i,s){if(i&1){let e=C();l(0,"forge-list",27),u("forge-list-item-select",function(o){g(e);let n=a();return f(n.onOperatorSelected(o.detail.value))}),y(1,qt,4,4,"forge-list-item",28,T),r()}if(i&2){let e=a();c(),w(e.operatorOptions)}}var St=(()=>{class i{constructor(){this.dialogService=x(ie),this.dialogData=x(We),this.dialogRef=x(Xe),this.genderOptions=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Unknown",value:"U"}],this.operatorOptions=[{value:null,label:"None"},{value:0,label:"Equal"},{value:1,label:"Not equal"},{value:2,label:"Greater than"},{value:3,label:"Less than"},{value:4,label:"Greater than equal to"},{value:5,label:"Less than equal to"},{value:6,label:"Range"},{value:7,label:"Contains"},{value:8,label:"Not contains"},{value:9,label:"Empty"}]}ngOnInit(){this.cache=this.dialogData.cache,this.userFilter=this.cache.activeUserFilter,this.userFilter&&this.cache.recordsetFilterFormGroup.patchValue(this.userFilter.filters)}onFilterChange(e){this.userFilter=this.cache.userFilters?.find(t=>t.id===e.detail),this.cache.recordsetFilterFormGroup.patchValue(this.userFilter.filters)}onFilterDelete(){let e=this.cache.userFilters.findIndex(t=>t.id===this.userFilter.id);e!==-1&&this.cache.userFilters.splice(e,1),this.cache.activeUserFilter=void 0,this.userFilter=void 0,this.dialogData.saveCallback()}onApply(){this.cache.activeUserFilter=this.userFilter,this.dialogRef.close(!0)}onClear(){this.userFilter=void 0,this.cache.recordsetFilterFormGroup.reset(),this.cache.recordsetFilterFormGroup.markAsPristine()}onSave(){let e={description:this.userFilter?.description,isDefault:this.userFilter?.isDefault,name:this.userFilter?.name};this.dialogService.open(ht,{data:e,options:{persistent:!0}}).afterClosed.subscribe({next:t=>{if(t){let o={filters:this.cache.recordsetFilterFormGroup.value,description:t.description,id:this.userFilter?.id||B.uniqueId(),isDefault:t.isDefault,name:t.name},n=this.cache.userFilters.findIndex(p=>p.id===o.id);n!==-1?this.cache.userFilters[n]=o:this.cache.userFilters.push(o),o.isDefault&&this.cache.userFilters.filter(p=>p.id!==o.id).forEach(p=>p.isDefault=!1),this.userFilter=this.dialogData.cache.userFilters?.find(p=>p.id===o.id)}this.dialogData.saveCallback()}})}onCancel(){this.dialogRef.close(!1)}onOperatorPopoverOpen(e,t,o){e.stopPropagation(),this.operatorPopoverFormGroup=this.cache.recordsetFilterFormGroup.get(o),this.operatorPopover=t,this.operatorPopover.open()}onOperatorSelected(e){e=parseInt(e,10),this.operatorPopoverFormGroup?.get("operator")?.setValue(e),this.operatorPopover?.close()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=L({type:i,selectors:[["app-filter-dialog"]],hostAttrs:["component-id","table-demo"],decls:33,vars:12,consts:[["opertatorAddonTemplate",""],["operatorPopoverTemplate",""],["operatorPopover","forgePopover"],["dialogTitle","Filter records","dialogLabel","Filter records",3,"dialogClose"],["novalidate","","autocomplete","off",1,"form-grid",3,"keydown.enter","formGroup"],["formGroupName","firstName"],["slot","label","for","filter-dialog--first-name"],["type","text","id","filter-dialog--first-name","formControlName","value","appAutoFocus",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["formGroupName","lastName"],["slot","label","for","filter-dialog--last-name"],["type","text","id","filter-dialog--last-name","formControlName","value"],["label","Gender","formControlName","gender","multiple","true",3,"options"],["formGroupName","occupation"],["slot","label","for","filter-dialog--occupation"],["type","text","id","filter-dialog--occupation","formControlName","value"],["app-dialog-footer",""],["slot","end","variant","outlined",3,"click"],["slot","end","variant","filled",3,"click"],["slot","center","label","Saved filters",3,"change","value"],[3,"value"],["slot","support-text",1,"forge-typography--label2"],["slot","addon-end","density","medium","aria-label","Delete filter",3,"click","disabled"],["name","delete","aria-hidden","true"],["slot","addon-end"],["slot","addon-end","density","medium","aria-label","Filter operators",1,"operator__addon",3,"click","ngClass","forgePopover"],["name","bolt","aria-hidden","true"],[1,"operator-popover",3,"forge-list-item-select"],[3,"value","selected"],["type","button"],["name","check","slot","end"]],template:function(t,o){if(t&1){let n=C();l(0,"app-dialog-template",3),u("dialogClose",function(){return g(n),f(o.onCancel())}),l(1,"form",4),u("keydown.enter",function(){return g(n),f(o.onApply())}),h(2,At,9,3),I(3,5),l(4,"forge-text-field")(5,"label",6),m(6,"First name"),r(),_(7,"input",7),V(8,Gt,1,0,"ng-container",8),r(),z(),I(9,9),l(10,"forge-text-field")(11,"label",10),m(12,"Last name"),r(),_(13,"input",11),V(14,$t,1,0,"ng-container",8),r(),z(),_(15,"forge-select",12),I(16,13),l(17,"forge-text-field")(18,"label",14),m(19,"Occupation"),r(),_(20,"input",15),V(21,Bt,1,0,"ng-container",8),r(),z(),r(),I(22,16),l(23,"forge-button",17),u("click",function(){return g(n),f(o.onSave())}),m(24,"Save"),r(),l(25,"forge-button",17),u("click",function(){return g(n),f(o.onClear())}),m(26,"Clear"),r(),l(27,"forge-button",18),u("click",function(){return g(n),f(o.onApply())}),m(28,"Apply"),r(),z(),r(),V(29,Nt,5,4,"ng-template",null,0,we)(31,Ut,3,0,"ng-template",null,1,we)}if(t&2){let n=M(30);c(),d("formGroup",o.cache.recordsetFilterFormGroup),c(),b(o.cache.userFilters!=null&&o.cache.userFilters.length?2:-1),c(6),d("ngTemplateOutlet",n)("ngTemplateOutletContext",O(9,Mt)),c(6),d("ngTemplateOutlet",n)("ngTemplateOutletContext",O(10,Ot)),c(),d("options",o.genderOptions),c(6),d("ngTemplateOutlet",n)("ngTemplateOutletContext",O(11,Rt))}},dependencies:[H,U,Ge,Y,Q,J,X,j,Z,He,Ue,te,ee,ne,oe,ce,ae,re,le,pe,de,me,se,_e,et,ot,it,tt,je,fe,ge,he,ue,mt,_t],styles:[`[_nghost-%COMP%]{display:contents}  .operator-popover{min-width:200px}  .operator-popover forge-list-item{cursor:pointer}.form-grid[_ngcontent-%COMP%]{padding:16px;display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.form-grid--row-break[_ngcontent-%COMP%]{grid-column-start:1}.form-grid--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid--col-span.form-grid--col-span[_ngcontent-%COMP%]{width:auto}.form-grid--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.form-grid--col-span2.form-grid--col-span2[_ngcontent-%COMP%]{width:656px}.form-grid--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.form-grid--col-span3.form-grid--col-span3[_ngcontent-%COMP%]{width:992px}.form-grid[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.operator__addon--selected[_ngcontent-%COMP%]{color:var(--forge-theme-warning)}






/*# sourceMappingURL=filter-dialog.component-MUKSRP5O.css.map */`]})}}return i})();var Ht=["table"],Kt=i=>({"forge-table--editing":i}),Jt=(i,s,e)=>({"forge-table-head__cell--sortable":i,"forge-table-cell--frozen-left":s,"forge-table-cell--frozen-right":e}),Te=(i,s)=>({"forge-table-cell--center":i,"forge-table-cell--right":s}),Wt=()=>[1,2,3],Xt=i=>({"forge-table-row--expanded":i}),jt=(i,s)=>({"forge-table-cell--frozen-left":i,"forge-table-cell--frozen-right":s}),Qt=(i,s)=>s.id;function Zt(i,s){if(i&1){let e=C();l(0,"forge-button",14),u("click",function(){g(e);let o=a();return f(o.onEdit(!1))}),_(1,"forge-icon",15),m(2," Cancel "),r(),l(3,"forge-button",16),u("click",function(){g(e);let o=a();return f(o.onSubmit())}),_(4,"forge-icon",17),m(5," Submit "),r()}if(i&2){let e=a();c(3),d("disabled",!e.recordsetFormGroup.dirty||e.recordsetFormGroup.invalid)}}function Yt(i,s){if(i&1&&(l(0,"span",18),m(1),r()),i&2){let e=a(2);c(),k(e.cache.activeUserFilter.description)}}function ei(i,s){if(i&1&&(l(0,"forge-list-item",28),_(1,"forge-icon",32),l(2,"button",30),m(3),r()()),i&2){let e=s.$implicit;d("value",e),c(),d("name",e.hidden?"check_box_outline_blank":"check_box"),c(),S("aria-label",e.header+e.hidden?+" hidden":" visible"),c(),k(e.header)}}function ti(i,s){if(i&1){let e=C();h(0,Yt,2,1,"span",18),l(1,"forge-icon-button",19),u("click",function(){g(e);let o=a();return f(o.onFilter())}),_(2,"forge-icon",20),r(),l(3,"forge-tooltip",21),m(4,"Filter records"),r(),l(5,"forge-icon-button",22),u("click",function(){g(e);let o=a();return f(o.onEdit(!0))}),_(6,"forge-icon",23),r(),l(7,"forge-tooltip",21),m(8,"Edit records"),r(),l(9,"forge-icon-button",24),_(10,"forge-icon",25),r(),l(11,"forge-tooltip",21),m(12,"Edit columns"),r(),l(13,"forge-popover",26,1)(15,"forge-list",27),u("forge-list-item-select",function(o){g(e);let n=a();return f(n.onColumnsEditPopoverSelected(o.detail.value))}),y(16,ei,4,4,"forge-list-item",28,T),F(18,"appCallback"),_(19,"forge-divider"),l(20,"forge-list-item",29)(21,"button",30),m(22,"Reset column widths"),r()(),_(23,"forge-divider"),l(24,"forge-list-item",31)(25,"button",30),m(26,"Delete table cache"),r()()()()}if(i&2){let e=a();b(!(e.cache.activeUserFilter==null||e.cache.activeUserFilter.description==null)&&e.cache.activeUserFilter.description.length?0:-1),c(),d("disabled",e.isBusy)("theme",!(e.cache.filter==null||e.cache.filter.filters==null)&&e.cache.filter.filters.length?"warning":""),c(4),d("disabled",e.isBusy),c(4),d("disabled",e.isBusy),c(7),w(D(18,5,e.tableColumns,e.optionalColumns))}}function ii(i,s){if(i&1&&(_(0,"app-table-mobile",8),F(1,"appCallback")),i&2){let e=a();d("data",e.cache.recordset())("formArray",e.recordsetFormGroup.controls.recordsetFormArray)("columnConfigurations",D(1,4,e.tableColumns,e.visibleColumns))("isEditing",e.isEditing)}}function oi(i,s){if(i&1){let e=C();l(0,"th",35)(1,"forge-icon-button",38),u("click",function(){g(e);let o=a(2);return f(o.onRowSelectHeader())}),_(2,"forge-icon",39),F(3,"appCallback"),r()()}if(i&2){let e=a(2);c(),d("disabled",e.isBusy),c(),d("name",D(3,2,e.cache.selectedRows,e.headerSelectedIcon))}}function ni(i,s){if(i&1&&_(0,"forge-icon",43),i&2){let e=a().$implicit;d("name",e.sortDirection==="DESC"?"arrow_downward":e.sortDirection==="ASC"?"arrow_upward":"")}}function ri(i,s){i&1&&(l(0,"forge-icon-button",45),_(1,"forge-icon",46),r(),l(2,"forge-tooltip"),m(3,"Move column"),r())}function li(i,s){if(i&1){let e=C();l(0,"forge-icon-button",47),u("mousedown",function(o){g(e);let n=a(2),p=n.$implicit,v=n.$index,P=a(2);return f(P.onColumnHeaderResize(o,v+2,p))}),_(1,"forge-icon",48),r(),l(2,"forge-tooltip"),m(3,"Resize column"),r()}}function ai(i,s){if(i&1&&(l(0,"div",44),h(1,ri,4,0),h(2,li,4,0),r()),i&2){let e=a().$implicit;c(),b(e.orderable!==!1?1:-1),c(),b(e.resizable!==!1?2:-1)}}function ci(i,s){if(i&1){let e=C();l(0,"th",40),u("click",function(o){let n=g(e).$implicit,p=a(2);return f(p.onColumnSort(o,n))}),l(1,"div",41)(2,"span",42),m(3),r(),h(4,ni,1,1,"forge-icon",43),h(5,ai,3,2,"div",44),r()()}if(i&2){let e=s.$implicit,t=a(2);Fe("--table-column-width",e.width),d("ngClass",Ie(8,Jt,e.sortable!==!1,e.frozen==="left",e.frozen==="right"))("cdkDragData",e),c(),d("ngClass",G(12,Te,e.align===t.cellAlignEnum.Center,e.align===t.cellAlignEnum.Right)),c(2),k(e.header),c(),b(e.sortDirection!=null&&e.sortDirection.length?4:-1),c(),b(!t.isBusy&&!t.isEditing&&(e.orderable!==!1||e.resizable!==!1)?5:-1)}}function si(i,s){if(i&1&&(l(0,"tr",49)(1,"td",50),F(2,"appCallback"),_(3,"forge-skeleton",51),r()()),i&2){let e=a(3);c(),S("colspan",D(2,1,e.tableColumns,e.visibleColumns).length+2)}}function di(i,s){i&1&&y(0,si,4,4,"tr",49,T),i&2&&w(O(0,Wt))}function pi(i,s){if(i&1){let e=C();l(0,"td",53)(1,"forge-icon-button",58),u("click",function(){g(e);let o=a().$implicit,n=a(3);return f(n.onRowSelect(o.id))}),_(2,"forge-icon",39),F(3,"appCallback"),r()()}if(i&2){let e=a().$implicit,t=a(3);c(2),d("name",ze(3,1,t.cache.selectedRows,t.isRowSelected,e.id)?"check_box":"check_box_outline_blank")}}function mi(i,s){if(i&1){let e=C();l(0,"div",61,3),u("loaded",function(){g(e);let o=M(1),n=a().$implicit,p=a(),v=p.$implicit,P=p.$index;return f(n.template(P,o,v))}),r()}if(i&2){let e=a().$implicit,t=a(4);d("ngClass",G(1,Te,e.align===t.cellAlignEnum.Center,e.align===t.cellAlignEnum.Right))}}function _i(i,s){if(i&1&&(l(0,"forge-text-field",62),_(1,"input",63),r()),i&2){let e=a(2).$implicit,t=a().$index,o=a(3);d("appFormControlInvalid",o.recordsetFormGroup.controls.recordsetFormArray.at(t).get(e.property)),c(),d("id","app-table-demo--"+e.property+"--"+t)("formControl",o.recordsetFormGroup.controls.recordsetFormArray.at(t).get(e.property)),S("aria-label",e.property+" "+t)}}function gi(i,s){if(i&1&&m(0),i&2){let e=a(3).$implicit,t=a().$implicit;ye(" ",e.transform(t[e.property])," ")}}function fi(i,s){if(i&1&&m(0),i&2){let e=a(3).$implicit,t=a().$implicit;ye(" ",t[e.property]," ")}}function ui(i,s){if(i&1&&h(0,gi,1,1)(1,fi,1,1),i&2){let e=a(2).$implicit;b(e.transform?0:1)}}function hi(i,s){if(i&1&&(l(0,"div",60),h(1,_i,2,4,"forge-text-field",62)(2,ui,2,1),r()),i&2){let e=a().$implicit,t=a(4);d("ngClass",G(2,Te,e.align===t.cellAlignEnum.Center,e.align===t.cellAlignEnum.Right)),c(),b(t.isEditing&&e.editable!==!1?1:2)}}function bi(i,s){if(i&1&&(l(0,"td",56),h(1,mi,2,4,"div",59)(2,hi,3,5,"div",60),r()),i&2){let e=s.$implicit;d("ngClass",G(2,jt,e.frozen==="left",e.frozen==="right")),c(),b(e.template?1:2)}}function Ci(i,s){if(i&1&&(l(0,"tr",57)(1,"td",64),F(2,"appCallback"),_(3,"app-table-detail",65),r()()),i&2){let e=a().$index,t=a(3);c(),S("colspan",D(2,3,t.tableColumns,t.visibleColumns).length+2),c(2),d("data",t.cache.recordset()[e])("rowIndex",e)}}function xi(i,s){if(i&1){let e=C();l(0,"tr",52),h(1,pi,4,5,"td",53),l(2,"td",54)(3,"forge-icon-button",55),u("click",function(){let o=g(e).$implicit,n=a(3);return f(n.onRowExpand(o.id))}),_(4,"forge-icon",39),r(),l(5,"forge-tooltip"),m(6,"View person details"),r()(),y(7,bi,3,5,"td",56,T),F(9,"appCallback"),r(),h(10,Ci,4,6,"tr",57)}if(i&2){let e=s.$index,t=a(3);d("ngClass",A(7,Xt,t.cache.expandedRows[e])),c(),b(t.isEditing?-1:1),c(3),d("name",t.cache.expandedRows[e]?"expand_less":"expand_more"),c(3),w(D(9,4,t.tableColumns,t.visibleColumns)),c(3),b(t.cache.expandedRows[e]?10:-1)}}function vi(i,s){if(i&1&&y(0,xi,11,9,null,null,Qt),i&2){let e=a(2);w(e.cache.recordset())}}function Fi(i,s){if(i&1&&(l(0,"tfoot")(1,"tr",66)(2,"th",67),F(3,"appCallback"),l(4,"div",68),m(5,"Footer row"),r()()()()),i&2){let e=a(2);c(2),S("colspan",D(3,1,e.tableColumns,e.visibleColumns).length+2)}}function yi(i,s){if(i&1){let e=C();l(0,"table",33,2)(2,"thead")(3,"tr",34),u("cdkDropListDropped",function(o){g(e);let n=a();return f(n.onColumnHeaderDragDrop(o))}),h(4,oi,4,5,"th",35),_(5,"th",36),y(6,ci,6,15,"th",37,T),F(8,"appCallback"),r()(),l(9,"tbody"),h(10,di,2,1)(11,vi,2,0),r(),h(12,Fi,6,4,"tfoot"),r()}if(i&2){let e,t=a();Fe("--table-cell-inline-padding",t.isEditing?"4px":"8px"),d("formGroup",t.recordsetFormGroup)("ngClass",A(12,Kt,t.isEditing)),c(3),d("cdkDropListDisabled",t.isEditing)("cdkDropListSortPredicate",t.columnHeaderSortPredicate),c(),b(t.isEditing?-1:4),c(2),w(D(8,9,t.tableColumns,t.visibleColumns)),c(4),b(t.isBusy?10:11),c(2),b(!t.isBusy&&((e=t.cache.recordset())!=null&&e.length)?12:-1)}}function wi(i,s){i&1&&(l(0,"div",10),_(1,"img",69),l(2,"div"),m(3,"No records found."),r()())}var eo=(()=>{class i{constructor(){this.destroyRef=x(Me),this.ngZone=x(Oe),this.router=x($e),this.dialogService=x(ie),this.appDataService=x(dt),this.busyIndicatorService=x(pt),this.appCache=x(ct),this.cache=x(st),this.tableElementRef=Ae("table"),this.tableColumnResize$=new Ee,this.isColumnResizing=!1,this.tableStateStorageKey="app--table-demo--table-state",this.filtersStateStorageKey="app--table-demo--filters-state",this.isBusy=!1,this.isFiltering=!1,this.isEditing=!1,this.cellAlignEnum=K,this.tableColumns=[{property:"image",editable:!1,sortable:!1,resizable:!1,orderable:!1,optional:!1,align:K.Center,width:48,template:(e,t,o)=>{let n=document.createElement("img");return n.src=`mock-data/${B.formatNumber(o.id,"2.0-0")}-small.png`,n.setAttribute("alt",""),n.classList.add("forge-table-cell__image"),t.appendChild(n),null}},{header:"Id",property:"id",width:48},{header:"First",property:"firstName",orderable:!1},{header:"Last",property:"lastName",resizable:!1},{header:"Gender",property:"gender"},{header:"Occupation",property:"occupation"},{header:"Actions",property:"actions",editable:!1,sortable:!1,resizable:!1,orderable:!1,optional:!1,align:K.Center,width:120,frozen:"right",template:(e,t,o)=>(t.classList.add("forge-table-body__cell__actions"),t.appendChild(Se.createIconButton("delete",n=>{this.onDelete(o.id)},"Delete person")),t.appendChild(Se.createIconButton("keyboard_arrow_right",n=>{this.onViewDetail(o.id)},"View person details")),null)}],this.recordsetFormGroup=new De({recordsetFormArray:new Ne([])}),this.visibleColumns=e=>B.sortData(e.filter(t=>t.hidden!==!0),"order","number","ASC"),this.optionalColumns=e=>e.filter(t=>t.optional!==!1),this.headerSelectedIcon=e=>this.cache.selectedRows?.length&&this.cache.selectedRows?.length===this.cache.recordset().length?"check_box":this.cache.selectedRows?.length?"indeterminate_check_box":"check_box_outline_blank",this.isRowSelected=(e,t)=>e?.findIndex(o=>o===t)!==-1,this.columnHeaderSortPredicate=e=>this.tableColumns[e].orderable!==!1}ngOnInit(){this.loadTableState(),this.loadFiltersState(),this.getRecords()}ngOnDestroy(){this.tableColumnResize$.next(),this.tableColumnResize$.complete()}onFilter(){this.isFiltering=!this.isFiltering;let e={cache:this.cache,saveCallback:()=>this.saveFiltersState()};this.dialogService.open(St,{data:e,options:{preset:"right-sheet"}}).afterClosed.subscribe({next:t=>{t&&(this.cache.filter.skip=0,this.cache.filter.filters=this.cache.convertRecordsetFilterFormGroup(),this.getRecords())}})}onEdit(e){this.isEditing=e,this.tableColumns.find(t=>t.header==="Actions").hidden=this.isEditing,this.tableColumns=[...this.tableColumns],this.recordsetFormGroup.controls.recordsetFormArray.clear(),this.isEditing&&this.cache.recordset().forEach(t=>{this.recordsetFormGroup.controls.recordsetFormArray.push(this.buildRecordForm(t),{emitEvent:!1})})}onSubmit(){let e={message:"Submitting...",progress:"circular"};this.busyIndicatorService.show(e),setTimeout(()=>{this.busyIndicatorService.hide(),this.isEditing=!1,this.cache.recordset.set(this.recordsetFormGroup.controls.recordsetFormArray.getRawValue()),this.recordsetFormGroup.controls.recordsetFormArray.clear()},1e3)}onDelete(e){this.dialogService.open(ut,{options:{persistent:!0},data:{title:"Delete record",message:"Are you sure you want to delete this record?"}}).afterClosed.subscribe({next:t=>{if(t){let o={message:"Deleting...",progress:"circular"};this.busyIndicatorService.show(o),setTimeout(()=>{this.ngZone.run(()=>{this.cache.totalRecords--;let n=this.cache.recordset().findIndex(p=>p.id===e);this.cache.recordset.set(this.cache.recordset().toSpliced(n,1)),this.busyIndicatorService.hide()})},1e3)}}})}onViewDetail(e){this.router.navigate([`people/detail/${e}`])}onColumnHeaderDragDrop(e){e.item.data.moveable!==!1&&(vt(this.tableColumns,e.previousIndex,e.currentIndex),this.saveTableState(),this.tableColumns.forEach((t,o)=>t.order=o),this.tableColumns=[...this.tableColumns])}onColumnHeaderResize(e,t,o){e.stopPropagation(),e.preventDefault(),this.tableColumnResize$.next();let n=this.tableElementRef(),p=(n?.nativeElement).querySelectorAll("thead tr th")[t],v=(n?.nativeElement).querySelectorAll(`tbody tr td:nth-child(${t+1})`),P=e.clientX;if(p){this.isColumnResizing=!0,n?.nativeElement.querySelector(".forge-table-head__row")?.classList.add("forge-table-row--resizing"),p.classList.add("forge-table-cell--resizing"),v.forEach(R=>R.classList.add("forge-table-cell--resizing")),N(document.body,"mousemove").pipe(xe(this.tableColumnResize$),ve(R=>{o.width=p.offsetWidth+(R.clientX-P),P=R.clientX})).subscribe();let ke=n?.nativeElement.querySelector("thead");Pe(N(ke,"mouseup"),N(ke,"mouseleave")).pipe(Ce(()=>requestAnimationFrame(()=>{this.isColumnResizing=!1,p=void 0,v=void 0,this.saveTableState()})),xe(this.tableColumnResize$),ve(R=>{this.tableColumnResize$.next(),this.tableElementRef()?.nativeElement.querySelectorAll(".forge-table-row--resizing").forEach(be=>be.classList.remove("forge-table-row--resizing")),this.tableElementRef()?.nativeElement.querySelectorAll(".forge-table-cell--resizing").forEach(be=>be.classList.remove("forge-table-cell--resizing"))})).subscribe()}}onColumnsEditPopoverSelected(e){switch(e){case"reset-column-width":this.tableColumnDefaultWidths.forEach((t,o)=>{this.tableColumns[o].width=t}),this.saveTableState();break;case"delete-table-cache":this.deleteTableState();break;default:{let t=this.tableColumns.find(o=>o.property===e.property);t&&(this.tableColumns.filter(o=>!o.hidden).length&&(t.hidden=Be(t.hidden)?!t.hidden:!0,t.sortDirection=void 0,this.tableColumns=[...this.tableColumns]),this.saveTableState());break}}}onColumnSort(e,t){e.stopPropagation(),!(e.target.classList.contains("forge-table-head__cell-dragger")||e.target.classList.contains("forge-table-head__cell-resizer")||this.isColumnResizing||this.isBusy||this.isEditing||t.sortable===!1)&&(this.tableColumns.filter(o=>o.property!==t.property).forEach(o=>o.sortDirection=void 0),t.sortDirection===$.Ascending?t.sortDirection=$.Descending:t.sortDirection===$.Descending?t.sortDirection=void 0:t.sortDirection=$.Ascending,this.cache.filter.sort=t.sortDirection?{property:t.property,direction:t.sortDirection}:void 0,this.cache.filter.skip=0,this.saveTableState(),this.getRecords())}onPaginatorChange(e){this.cache.filter.skip=e.pageIndex*e.pageSize,this.cache.filter.take=e.pageSize,e.type==="page-size"&&this.saveTableState(),this.getRecords()}onRowExpand(e){let t=this.cache.expandedRows.findIndex(o=>o===e);if(t!==-1)this.cache.expandedRows[t]=void 0;else{let o=this.cache.recordset().findIndex(n=>n.id===e);o!==-1&&(this.cache.expandedRows[o]=e)}}onRowSelectHeader(){this.cache.selectedRows?.length===this.cache.recordset().length?this.cache.selectedRows=[]:this.cache.selectedRows=this.cache.recordset().map(e=>e.id),this.cache.selectedRows=[...this.cache.selectedRows]}onRowSelect(e){let t=this.cache.selectedRows.findIndex(o=>o===e);t!==-1?this.cache.selectedRows.splice(t,1):this.cache.selectedRows.push(e),this.cache.selectedRows=[...this.cache.selectedRows]}getRecords(){this.isBusy||(this.isBusy=!0,this.cache.recordset.set([]),this.recordsetFormGroup.controls.recordsetFormArray.clear(),this.cache.expandedRows=[],this.cache.selectedRows=[],this.appDataService.getPeople({sort:this.cache.filter.sort,skip:this.cache.filter.skip,take:this.cache.filter.take,filters:this.cache.filter.filters}).pipe(Ke(this.destroyRef),Ce(()=>this.isBusy=!1)).subscribe({next:e=>{this.cache.totalRecords=e.count,this.cache.recordset.set(e.data)}}))}buildRecordForm(e){return new De({id:new E(e.id,{validators:[W.required]}),firstName:new E(e.firstName,{validators:[W.required]}),lastName:new E(e.lastName,{validators:[W.required]}),gender:new E(e.gender),occupation:new E(e.occupation),quote:new E(e.quote),url:new E(e.url)})}loadTableState(){this.tableColumnDefaultWidths=this.tableColumns.map(t=>t.width);let e=localStorage.getItem(this.tableStateStorageKey);if(e?.length){let t=JSON.parse(e);t.columns.forEach(o=>{let n=this.tableColumns.find(p=>p.property===o.property);n&&(n.order=o.order,n.width=o.width,n.hidden=o.hidden,t.sort?.property===n.property&&(n.sortDirection=t.sort.direction))}),this.cache.filter.sort=t.sort,this.cache.filter.take=t.take}else{let t=this.tableColumns.find(o=>o.property===this.cache.filter?.sort?.property);t&&(t.sortDirection=this.cache.filter.sort.direction)}}saveTableState(){localStorage.setItem(this.tableStateStorageKey,JSON.stringify({columns:this.tableColumns.map((e,t)=>({property:e.property,order:t,width:e.width,hidden:e.hidden})),sort:this.cache.filter.sort,take:this.cache.filter.take}))}deleteTableState(){localStorage.removeItem(this.tableStateStorageKey)}loadFiltersState(){let e=localStorage.getItem(this.filtersStateStorageKey);if(e?.length){this.cache.userFilters=JSON.parse(e);let t=this.cache.userFilters?.find(o=>o.isDefault);t&&(this.cache.recordsetFilterFormGroup.patchValue(t.filters),this.cache.filter.filters=this.cache.convertRecordsetFilterFormGroup(),this.cache.activeUserFilter=t)}}saveFiltersState(){localStorage.setItem(this.filtersStateStorageKey,JSON.stringify(this.cache.userFilters))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=L({type:i,selectors:[["app-table-demo"]],viewQuery:function(t,o){t&1&&Re(o.tableElementRef,Ht,5),t&2&&Ve()},decls:14,vars:7,consts:[["bodyTable",""],["columnsEditPopover",""],["table",""],["elementRef",""],[1,"header"],["slot","start",1,"forge-typography--subheading4"],[1,"body"],["novalidate","","autocomplete","off",1,"body__table"],[3,"data","formArray","columnConfigurations","isEditing"],[1,"forge-table",3,"formGroup","ngClass","--table-cell-inline-padding"],[1,"empty-state"],["inverted","true",1,"footer"],["slot","end","aria-label","pagination"],[3,"forge-paginator-change","pageIndex","pageSize","total","disabled"],["slot","end","variant","outlined",3,"click"],["name","cancel","aria-hidden","true"],["slot","end","variant","filled",3,"click","disabled"],["name","check","aria-hidden","true"],["slot","end",1,"forge-typography--subheading1"],["variant","tonal","slot","end","aria-label","Filter records",3,"click","disabled","theme"],["name","filter_list","aria-hidden","true"],["slot","end"],["variant","tonal","slot","end","aria-label","Edit records",3,"click","disabled"],["name","edit","aria-hidden","true"],["id","table-demo--btn--edit-columns","variant","tonal","slot","end","aria-label","Edit columns",3,"disabled"],["name","list_alt","aria-hidden","true"],["slot","end","anchor","table-demo--btn--edit-columns","placement","right-end","animation-type","none","open","false"],[1,"column-popover",3,"forge-list-item-select"],[3,"value"],["value","reset-column-width"],["type","button"],["value","delete-table-cache"],["slot","start","aria-hidden","true",3,"name"],[1,"forge-table",3,"formGroup","ngClass"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"forge-table-row","forge-table-head__row",3,"cdkDropListDropped","cdkDropListDisabled","cdkDropListSortPredicate"],[1,"forge-table-cell","forge-table-head__cell","forge-table-row__selector","forge-table-cell--frozen-left"],[1,"forge-table-cell","forge-table-head__cell","forge-table-row__expander"],["scope","col","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",1,"forge-table-cell","forge-table-head__cell",3,"ngClass","cdkDragData","--table-column-width"],[3,"click","disabled"],["aria-hidden","true",3,"name"],["scope","col","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",1,"forge-table-cell","forge-table-head__cell",3,"click","ngClass","cdkDragData"],[1,"forge-table-head__cell-container",3,"ngClass"],[1,"forge-table-head__cell-text"],["aria-hidden","true",1,"forge-table-head__cell-sort-icon",3,"name"],["aria-hidden","true",1,"forge-table-head__cell-actions"],["variant","tonal","cdkDragHandle","","density","small",1,"forge-table-head__cell-dragger"],["name","cursor_move","aria-hidden","true"],["variant","tonal","cdkDragHandle","","density","small",1,"forge-table-head__cell-resizer",3,"mousedown"],["name","arrow_expand_horizontal","aria-hidden","true"],[1,"forge-table-row","forge-table-body__row"],[1,"forge-table-cell","forge-table-body__cell"],["list-item",""],[1,"forge-table-row","forge-table-body__row",3,"ngClass"],[1,"forge-table-cell","forge-table-body__cell","forge-table-row__selector","forge-table-cell--frozen-left"],[1,"forge-table-cell","forge-table-body__cell","forge-table-row__expander"],["aria-label","Toggle details",3,"click"],[1,"forge-table-cell","forge-table-body__cell",3,"ngClass"],[1,"forge-table-row","forge-table-body__row","forge-table-row__expandable-content"],["aria-label","Toggle selection",3,"click"],["appOnLoad","",1,"forge-table-cell__container",3,"ngClass"],[1,"forge-table-cell__container",3,"ngClass"],["appOnLoad","",1,"forge-table-cell__container",3,"loaded","ngClass"],[3,"appFormControlInvalid"],["type","text",3,"id","formControl"],[1,"forge-table-row__expandable-content-cell"],[3,"data","rowIndex"],[1,"forge-table-row","forge-table-foot__row"],[1,"forge-table-cell","forge-table-foot__cell"],[1,"forge-table-cell__container",2,"height","48px"],["src","https://cdn.forge.tylertech.com/v1/images/spot-hero/general-empty-state-spot-hero.svg","alt",""]],template:function(t,o){if(t&1){let n=C();l(0,"forge-toolbar",4)(1,"h2",5),m(2,"Table demo"),r(),h(3,Zt,6,1)(4,ti,27,8),r(),l(5,"div",6)(6,"form",7,0),h(8,ii,2,7,"app-table-mobile",8)(9,yi,13,14,"table",9),h(10,wi,4,0,"div",10),r(),l(11,"forge-toolbar",11)(12,"nav",12)(13,"forge-paginator",13),u("forge-paginator-change",function(v){return g(n),f(o.onPaginatorChange(v.detail))}),r()()()()}if(t&2){let n;c(3),b(o.isEditing?3:4),c(5),b(o.appCache.layoutMode==="sm"?8:9),c(2),b(!o.isBusy&&!((n=o.cache.recordset())!=null&&n.length)?10:-1),c(3),d("pageIndex",o.cache.filter.skip/o.cache.filter.take)("pageSize",o.cache.filter.take)("total",o.cache.totalRecords)("disabled",o.isEditing||o.isBusy)}},dependencies:[H,U,Y,Q,J,X,j,qe,Z,Le,Dt,wt,yt,Ft,te,ee,Je,ne,oe,ce,ae,re,le,pe,de,me,se,Ze,Qe,_e,Ye,rt,nt,fe,ge,at,lt,he,ue,bt,Ct,gt,ft,xt],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%;background-color:var(--forge-theme-surface)}[_nghost-%COMP%]     .forge-table{--table-row-height: $table-row-height;--table-cell-inline-padding: $table-cell-inline-padding;min-width:100%;width:max-content;position:relative}[_nghost-%COMP%]     .forge-table--editing th{pointer-events:none}[_nghost-%COMP%]     .forge-table thead, [_nghost-%COMP%]     .forge-table tfoot{position:sticky;background-color:var(--forge-theme-surface);z-index:calc(var(--forge-z-index-surface) + 2)}[_nghost-%COMP%]     .forge-table thead{inset-block-start:0}[_nghost-%COMP%]     .forge-table tfoot{inset-block-end:0}[_nghost-%COMP%]     .forge-table-head__cell{padding-left:var(--table-cell-inline-padding);padding-right:var(--table-cell-inline-padding)}[_nghost-%COMP%]     .forge-table-head__cell:first-child, [_nghost-%COMP%]     .forge-table-head__cell:last-child{padding-left:var(--table-cell-inline-padding)!important;padding-right:var(--table-cell-inline-padding)!important}[_nghost-%COMP%]     .forge-table-head__cell{width:calc(var(--table-column-width) * 1px)}[_nghost-%COMP%]     .forge-table-head__cell:hover .forge-table-head__cell-actions{transition-delay:.5s;max-width:72px}[_nghost-%COMP%]     .forge-table-head__cell-container{position:relative}[_nghost-%COMP%]     .forge-table-head__cell-sort-icon{display:inline!important}[_nghost-%COMP%]     .forge-table-head__cell-actions{position:absolute;right:4px;margin-block:auto;overflow:hidden;display:flex;align-items:center;max-width:0;transition:max-width .25s}[_nghost-%COMP%]     .forge-table-body__cell{padding-left:var(--table-cell-inline-padding);padding-right:var(--table-cell-inline-padding)}[_nghost-%COMP%]     .forge-table-body__cell:first-child, [_nghost-%COMP%]     .forge-table-body__cell:last-child{padding-left:var(--table-cell-inline-padding)!important;padding-right:var(--table-cell-inline-padding)!important}[_nghost-%COMP%]     .forge-table-body__cell forge-text-field{width:100%;--forge-field-background: var(--forge-theme-surface)}[_nghost-%COMP%]     .forge-table-body__cell forge-text-field::part(label){display:none}[_nghost-%COMP%]     .forge-table-body__cell forge-skeleton{margin:4px 0}[_nghost-%COMP%]     .forge-table-body__cell__actions{display:flex;flex-direction:row}[_nghost-%COMP%]     .forge-table-foot__row{height:48px;height:auto}[_nghost-%COMP%]     .forge-table-foot__cell{color:var(--forge-theme-text-medium, rgba(0, 0, 0, .6));font-weight:700;text-align:left;font-size:calc(var(--forge-typography-font-size, 1rem) * .75);box-sizing:border-box;padding-left:var(--table-cell-inline-padding);padding-right:var(--table-cell-inline-padding)}[_nghost-%COMP%]     .forge-table-foot__cell:first-child, [_nghost-%COMP%]     .forge-table-foot__cell:last-child{padding-left:var(--table-cell-inline-padding)!important;padding-right:var(--table-cell-inline-padding)!important}[_nghost-%COMP%]     .forge-table-foot__cell{border-top:var(--forge-border-thin) solid var(--forge-theme-outline)}[_nghost-%COMP%]     .forge-table-row__selector, [_nghost-%COMP%]     .forge-table-row__expander{width:52px;--table-cell-inline-padding: 0;text-align:center}[_nghost-%COMP%]     .forge-table-row__expandable-content{background-color:#e8eaf6!important;border-bottom:1px solid var(--forge-theme-outline)}[_nghost-%COMP%]     .forge-table-cell--frozen-left{position:sticky;left:0;background-color:var(--forge-theme-surface);z-index:calc(var(--forge-z-index-surface) + 0)}[_nghost-%COMP%]     .forge-table-cell--frozen-left:nth-last-child(1 of.forge-table-cell--frozen-left){border-right:var(--forge-border-medium) solid var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-cell--frozen-right{position:sticky;right:0;background-color:var(--forge-theme-surface);z-index:calc(var(--forge-z-index-surface) + 0)}[_nghost-%COMP%]     .forge-table-cell--frozen-right:nth-child(1 of.forge-table-cell--frozen-right){border-left:var(--forge-border-medium) solid var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-cell--resizing .forge-table-head__cell-dragger{display:none}[_nghost-%COMP%]     .forge-table-cell__image{width:48px;height:48px;border-radius:50%}  .column-popover{min-width:280px;--forge-list-padding: 0}  .column-popover forge-list-item{cursor:pointer}.header[_ngcontent-%COMP%]::part(section-start), .header[_ngcontent-%COMP%]::part(section-center), .header[_ngcontent-%COMP%]::part(section-end){column-gap:16px}.body[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr auto;overflow:hidden;height:100%}.body__table[_ngcontent-%COMP%]{overflow:auto}.footer[_ngcontent-%COMP%]::part(section-start), .footer[_ngcontent-%COMP%]::part(section-center), .footer[_ngcontent-%COMP%]::part(section-end){column-gap:16px}.cdk-drag-preview[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline);border:solid 2px #3f51b5;display:flex;padding-inline:8px}.cdk-drag-preview[_ngcontent-%COMP%]   .forge-table-head__cell-actions[_ngcontent-%COMP%]{display:none}.cdk-drag-placeholder[_ngcontent-%COMP%]   .forge-table-head__cell-container[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#e8eaf6}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{pointer-events:none}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;align-items:center;padding:24px}.empty-state[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:256px}






/*# sourceMappingURL=table-demo.component-B2NWYB66.css.map */`]})}}return i})();export{eo as TableDemoComponent};
//# sourceMappingURL=chunk-ME3VPMUG.js.map
