import{a as F}from"./chunk-DA33O62B.js";import{F as G,G as I,Hb as Y,I as p,Jb as ee,eb as j,gb as z,ic as te,jc as ne,jd as pe,k as Z,kb as J,kd as me,mc as ie,nc as oe,oc as re,pb as K,pc as ae,uc as le,vc as se,wc as ge,xc as ue,zb as X}from"./chunk-AWYXD4HD.js";import{Cb as M,Ea as S,Fb as x,Gb as u,Lb as C,Mb as v,Nb as w,Pb as c,Qb as O,Rb as $,Tb as b,Ub as A,Vb as T,Wb as q,Xb as W,Ya as g,Z as V,db as P,ea as R,ec as U,gb as D,ja as B,mb as E,nb as _,ob as L,sb as k,tb as H,ua as m,ub as N,va as d,vb as Q,wb as l,xb as r,yb as h}from"./chunk-CFL2K3XP.js";var de=["rangeAutocomplete"],he=["rangeTemplate"],ce=["filterInput"];function fe(a,s){if(a&1&&(l(0,"div",14),c(1),r()),a&2){let i=u(2);g(),O(i.rangeMessage)}}function _e(a,s){if(a&1){let i=M();l(0,"forge-list-item")(1,"forge-icon-button",16),x("click",function(){let t=m(i).$implicit,e=u(2);return d(e.onDeleteRangeOption(t))}),h(2,"forge-icon",17),r(),c(3),r()}if(a&2){let i=s.$implicit;g(3),$(" ",i.label," ")}}function xe(a,s){if(a&1){let i=M();l(0,"div",6)(1,"div",7)(2,"span",8),c(3,"Enter a search range"),r(),l(4,"div",9)(5,"forge-text-field")(6,"input",10),T("ngModelChange",function(t){m(i);let e=u();return A(e.rangeMin,t)||(e.rangeMin=t),d(t)}),r()(),l(7,"span"),c(8,"to"),r(),l(9,"forge-text-field")(10,"input",11),T("ngModelChange",function(t){m(i);let e=u();return A(e.rangeMax,t)||(e.rangeMax=t),d(t)}),r()(),l(11,"forge-icon-button",12),x("click",function(){m(i);let t=u();return d(t.onAddRangeOption())}),h(12,"forge-icon",13),r()(),E(13,fe,2,1,"div",14),r(),l(14,"forge-list",15),N(15,_e,4,1,"forge-list-item",null,H),r(),h(17,"forge-divider"),r()}if(a&2){let i=u();g(6),b("ngModel",i.rangeMin),_("maxlength",i.maxlength),g(4),b("ngModel",i.rangeMax),_("maxlength",i.maxlength),g(3),k(i.rangeMessage?13:-1),g(2),Q(i.rangeOptions)}}var Be=(()=>{let s=class s{constructor(){this.ngZone=R(P),this.viewContainerRef=R(D),this.valueChange=new S,this.maxlength=null,this.rangeOptions=[],this.elementId=F.uniqueId(),this.filter="",this.onChange=n=>{},this.onTouched=()=>{},this.onFilter=n=>(this.filter=n,new Promise((t,e)=>{this.optionFilter&&this.optionFilter(this.filter).subscribe({next:o=>{let f=[];o.forEach(y=>p(y.value)?this.rangeOptions.push(y):f.push(y)),t(f)},error:()=>e()})})),this.optionHeaderBuilder=()=>(this.ngZone.run(()=>{this.rangeMin=void 0,this.rangeMax=void 0,this.rangeMessage=void 0}),this.rangeRef?.rootNodes[0]),this.selectedTextBuilder=n=>{if(this.autocompleteRef?.nativeElement.open&&this.filter.length)return this.filter;let t=n?.length,e=this.rangeOptions?.length;return t>0&&e>0?`${t} option(s) selected, ${e} range(s)`:t>0?`${t} option(s) selected`:e>0?`${e} range(s)`:""}}autocompleteBlur(){this.onTouched()}set value(n){this.writeValue(n)}writeValue(n){let t=[];this.rangeOptions.length=0,p(n)&&n.forEach(e=>{if(p(e)||p(e.value)){let o=G(e.value)?e.value:e;this.rangeOptions.push({label:`${o[0]} to ${o[1]}`,value:o})}else t.push(e)}),window.requestAnimationFrame(()=>{this.autocompleteRef.nativeElement.value=t})}ngAfterViewInit(){window.requestAnimationFrame(()=>{this.rangeRef=this.viewContainerRef.createEmbeddedView(this.rangeTemplateRef),this.rangeRef.rootNodes[0].remove()})}ngOnDestroy(){this.rangeRef?.destroy()}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}onAutocompleteChange(){this.emitChangeEvents()}onAddRangeOption(){if(!this.rangeMin?.length&&!this.rangeMax?.length){this.rangeMessage="A min or max value is required.";return}if(this.rangeMin=I(this.rangeMin)?this.rangeMin?.trim():this.rangeMin,this.rangeMax=I(this.rangeMax)?this.rangeMax?.trim():this.rangeMax,this.rangeMin?.length&&this.rangeMax?.length){let e=F.comparator(this.rangeMin,this.rangeMax,"string");if(e===0){this.rangeMessage="Min and Max cannot be the same value.";return}if(e===1){this.rangeMessage="Min value cannot be greater than Max value.";return}}if(this.rangeOptions.findIndex(e=>e.value[0]===this.rangeMin&&e.value[1]===this.rangeMax)!==-1){this.rangeMessage="This range is already defined.";return}this.rangeMessage=void 0;let t=this.rangeMin?.length&&this.rangeMax?.length?`${this.rangeMin} to ${this.rangeMax}`:this.rangeMin?.length?`Greater than ${this.rangeMin}`:`Less than ${this.rangeMax}`;this.rangeOptions.push({label:t,value:[this.rangeMin,this.rangeMax]}),this.emitChangeEvents(),this.rangeMin=void 0,this.rangeMax=void 0,this.filterInputRef.nativeElement.value=this.selectedTextBuilder(this.autocompleteRef?.nativeElement.value)}onDeleteRangeOption(n){(this.rangeRef?.rootNodes[0]).focus();let t=this.rangeOptions.findIndex(e=>e.value===n.value);t!==-1&&(this.rangeOptions.splice(t,1),this.filterInputRef.nativeElement.value=this.selectedTextBuilder(this.autocompleteRef?.nativeElement.value),this.emitChangeEvents())}emitChangeEvents(){let n=[];p(this.rangeOptions)&&this.rangeOptions.length&&n.push(...this.rangeOptions.map(e=>e.value));let t=this.autocompleteRef?.nativeElement.value;p(t)&&t.length&&n.push(...t),this.onChange(n),this.valueChange.emit(n)}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=B({type:s,selectors:[["app-autocomplete-range"]],viewQuery:function(t,e){if(t&1&&(C(de,5),C(he,5),C(ce,5)),t&2){let o;v(o=w())&&(e.autocompleteRef=o.first),v(o=w())&&(e.rangeTemplateRef=o.first),v(o=w())&&(e.filterInputRef=o.first)}},hostBindings:function(t,e){t&1&&x("focusout",function(f){return e.autocompleteBlur(f)})},inputs:{optionFilter:"optionFilter",value:"value",label:"label",maxlength:"maxlength"},outputs:{valueChange:"valueChange"},standalone:!0,features:[q([{provide:j,useExisting:V(()=>s),multi:!0}]),W],decls:10,vars:6,consts:[["rangeAutocomplete",""],["filterInput",""],["rangeTemplate",""],["multiple","",3,"forge-autocomplete-change","filter","selectedTextBuilder","popupHeaderBuilder"],["type","text"],["slot","end","name","arrow_drop_down",1,"forge-dropdown-icon"],["tabindex","-1",1,"range"],[1,"range__input"],[1,"forge-typography--subheading2","range__input__header"],[1,"range__input__body"],["type","text","placeholder","min",3,"ngModelChange","ngModel"],["type","text","placeholder","max",3,"ngModelChange","ngModel"],["aria-label","Add search range",3,"click"],["name","add"],[1,"forge-typography--label1"],[1,"range__options"],["slot","start","aria-label","Delete search range",3,"click"],["name","delete"]],template:function(t,e){if(t&1){let o=M();l(0,"forge-autocomplete",3,0),x("forge-autocomplete-change",function(){return m(o),d(e.onAutocompleteChange())}),l(2,"forge-text-field"),h(3,"input",4,1),l(5,"label"),c(6),r(),h(7,"forge-icon",5),r()(),E(8,xe,18,5,"ng-template",null,2,U)}t&2&&(L("filter",e.onFilter)("selectedTextBuilder",e.selectedTextBuilder)("popupHeaderBuilder",e.optionHeaderBuilder),g(3),_("id",e.elementId),g(2),_("for",e.elementId),g(),O(e.label))},dependencies:[Z,X,z,J,K,ee,Y,ne,te,ae,re,ie,oe,ge,se,ue,le,me,pe],styles:[`[_nghost-%COMP%]{display:block}.range[_ngcontent-%COMP%]{outline:none}.range__input[_ngcontent-%COMP%]{padding-left:16px;padding-bottom:8px;--forge-field-height: 2.5rem}.range__input__header[_ngcontent-%COMP%]{font-size:14px}.range__input__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr auto;column-gap:8px;align-items:center}.range__input[_ngcontent-%COMP%]   .forge-typography--label1[_ngcontent-%COMP%]{color:var(--forge-theme-error)}.range__options[_ngcontent-%COMP%]{--forge-list-item-padding: 0 16px 0 4px;--forge-list-item-leading-margin-right: 4px}






/*# sourceMappingURL=autocomplete-range.component-C3U53UNJ.css.map */`]});let a=s;return a})();export{Be as a};
//# sourceMappingURL=chunk-6E2GCE6K.js.map
