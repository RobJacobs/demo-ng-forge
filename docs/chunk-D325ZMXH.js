import{a as Lr,f as Re,g as Yo,p as Zn}from"./chunk-25LYXCFV.js";import{f as Ie,g as ot}from"./chunk-PSWJZLWW.js";import{C as at,Cb as Co,F as yt,Id as Uo,J as wo,Jd as Xo,Nc as So,Ob as Mo,Oc as Do,Pc as No,Qb as $t,Qc as Io,Vc as Ro,Wc as Eo,cc as ko,dc as Ao,jd as Oo,kd as $o,ld as Po,vb as To,wd as Fo,xd as zo,yd as Ho,zd as Lo}from"./chunk-WGIND62E.js";import{Ab as Hr,B as Xt,Bb as co,Cb as fo,Db as ho,Eb as pt,F as uo,Fb as Q,Fc as se,Gb as et,Hb as Ae,Ib as po,J as $r,Jb as mo,Kb as go,Rb as Se,Sb as je,Va as tt,Z as lo,Zb as De,_b as Ne,ac as xo,ca as Pr,d as so,dc as nt,ec as Wn,hc as yo,ic as vo,jc as _o,la as Fr,lb as ke,lc as bo,zb as zr}from"./chunk-UXY6XTJ4.js";import{a as Ut,b as Gt}from"./chunk-NCBA65HR.js";var vt="app-chart",Hl={CHART_PREFIX:vt,CHART_ROOT:`${vt}__root`,CHART_YAXIS:`${vt}__yaxis`,CHART_XAXIS:`${vt}__xaxis`,CHART_NODE:`${vt}__node`,CHART_TEXT:`${vt}__text`,CHART_LEGEND:`${vt}__legend`,CHART_METER:`${vt}__meter`,CHART_POPOVER:`${vt}__popover`,CHART_CLIP:`${vt}__clip`,CHART_TEXT_LABEL:`${vt}__text-label`,CHART_TEXT_VALUE:`${vt}__text-value`,LEGEND_TEXT:`${vt}__legend-text`,LEGEND_TEXT_LABEL:`${vt}__legend-text-label`,LEGEND_TEXT_VALUE:`${vt}__legend-text-value`},Ll={TRANSITION_DURATION:500},Ul={FONT_FAMILY:"Roboto",FONT_SIZE_SMALL:"10px",FONT_SIZE:"16px"},Xl={amber600:"#ffb300",cyan400:"#26c6da",purple300:"#ba68c8",indigoA200:"#536dfe",green400:"#66bb6a",deepOrangeA200:"#ff6e40",amberA200:"#ffd740",purple200:"#ce93d8",indigo200:"#9fa8da",lightBlue200:"#81d4fa",green200:"#a5d6a7",lime200:"#e6ee9c",amber200:"#ffe082",deepOrange200:"#ffab91",grey400:"#bdbdbd"},Yl={textHigh:"var(--forge-theme-text-high, rgba(0, 0, 0, 0.87))",textMedium:"var(--forge-theme-text-medium, rgba(0, 0, 0, 0.6))",textInverse:"var(--forge-theme-on-surface-inverse, #ffffff)",outline:"var(--forge-theme-outline, #e0e0e0)",outlineMedium:"var(--forge-theme-outline-medium, #757575)",surface:"var(--forge-theme-surface, #ffffff)",surfaceDim:"var(--forge-theme-surface-dim, #f5f5f5)"},v={classes:Hl,numbers:Ll,strings:Ul,chartPalette:Xl,chartTheme:Yl};function ue(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gn(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function le(t){let e,r,n;t.length!==2?(e=ue,r=(s,l)=>ue(t(s),l),n=(s,l)=>t(s)-l):(e=t===ue||t===Gn?t:Vl,r=t,n=t);function a(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{let h=u+f>>>1;r(s[h],l)<0?u=h+1:f=h}while(u<f)}return u}function o(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{let h=u+f>>>1;r(s[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function i(s,l,u=0,f=s.length){let h=a(s,l,u,f-1);return h>u&&n(s[h-1],l)>-n(s[h],l)?h-1:h}return{left:a,center:i,right:o}}function Vl(){return 0}function Qn(t){return t===null?NaN:+t}var Vo=le(ue),qo=Vo.right,ql=Vo.left,Bl=le(Qn).center,jn=qo;function ce(t,e){let r,n;if(e===void 0)for(let a of t)a!=null&&(r===void 0?a>=a&&(r=n=a):(r>a&&(r=a),n<a&&(n=a)));else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&(r===void 0?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)))}return[r,n]}var Ee=class extends Map{constructor(e,r=Gl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let[n,a]of e)this.set(n,a)}get(e){return super.get(Bo(this,e))}has(e){return super.has(Bo(this,e))}set(e,r){return super.set(Wl(this,e),r)}delete(e){return super.delete(Zl(this,e))}};function Bo({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):r}function Wl({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Zl({_intern:t,_key:e},r){let n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Gl(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Ql=Math.sqrt(50),jl=Math.sqrt(10),Jl=Math.sqrt(2);function Ur(t,e,r){let n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),o=n/Math.pow(10,a),i=o>=Ql?10:o>=jl?5:o>=Jl?2:1,s,l,u;return a<0?(u=Math.pow(10,-a)/i,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,a)*i,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=r&&r<2?Ur(t,e,r*2):[s,l,u]}function Xr(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[a,o,i]=n?Ur(e,t,r):Ur(t,e,r);if(!(o>=a))return[];let s=o-a+1,l=new Array(s);if(n)if(i<0)for(let u=0;u<s;++u)l[u]=(o-u)/-i;else for(let u=0;u<s;++u)l[u]=(o-u)*i;else if(i<0)for(let u=0;u<s;++u)l[u]=(a+u)/-i;else for(let u=0;u<s;++u)l[u]=(a+u)*i;return l}function Je(t,e,r){return e=+e,t=+t,r=+r,Ur(t,e,r)[2]}function Oe(t,e,r){e=+e,t=+t,r=+r;let n=e<t,a=n?Je(e,t,r):Je(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function Yr(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(a);++n<a;)o[n]=t+n*r;return o}function Wo(t){return t}var Vr=1,Jn=2,Kn=3,Ke=4,Zo=1e-6;function Kl(t){return"translate("+t+",0)"}function tc(t){return"translate(0,"+t+")"}function ec(t){return e=>+t(e)}function rc(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function nc(){return!this.__axis}function ta(t,e){var r=[],n=null,a=null,o=6,i=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Vr||t===Ke?-1:1,f=t===Ke||t===Jn?"x":"y",h=t===Vr||t===Kn?Kl:tc;function c(p){var x=n??(e.ticks?e.ticks.apply(e,r):e.domain()),y=a??(e.tickFormat?e.tickFormat.apply(e,r):Wo),m=Math.max(o,0)+s,g=e.range(),k=+g[0]+l,D=+g[g.length-1]+l,b=(e.bandwidth?rc:ec)(e.copy(),l),N=p.selection?p.selection():p,w=N.selectAll(".domain").data([null]),F=N.selectAll(".tick").data(x,e).order(),O=F.exit(),I=F.enter().append("g").attr("class","tick"),$=F.select("line"),_=F.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(I),$=$.merge(I.append("line").attr("stroke","currentColor").attr(f+"2",u*o)),_=_.merge(I.append("text").attr("fill","currentColor").attr(f,u*m).attr("dy",t===Vr?"0em":t===Kn?"0.71em":"0.32em")),p!==N&&(w=w.transition(p),F=F.transition(p),$=$.transition(p),_=_.transition(p),O=O.transition(p).attr("opacity",Zo).attr("transform",function(T){return isFinite(T=b(T))?h(T+l):this.getAttribute("transform")}),I.attr("opacity",Zo).attr("transform",function(T){var M=this.parentNode.__axis;return h((M&&isFinite(M=M(T))?M:b(T))+l)})),O.remove(),w.attr("d",t===Ke||t===Jn?i?"M"+u*i+","+k+"H"+l+"V"+D+"H"+u*i:"M"+l+","+k+"V"+D:i?"M"+k+","+u*i+"V"+l+"H"+D+"V"+u*i:"M"+k+","+l+"H"+D),F.attr("opacity",1).attr("transform",function(T){return h(b(T)+l)}),$.attr(f+"2",u*o),_.attr(f,u*m).text(y),N.filter(nc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Jn?"start":t===Ke?"end":"middle"),N.each(function(){this.__axis=b})}return c.scale=function(p){return arguments.length?(e=p,c):e},c.ticks=function(){return r=Array.from(arguments),c},c.tickArguments=function(p){return arguments.length?(r=p==null?[]:Array.from(p),c):r.slice()},c.tickValues=function(p){return arguments.length?(n=p==null?null:Array.from(p),c):n&&n.slice()},c.tickFormat=function(p){return arguments.length?(a=p,c):a},c.tickSize=function(p){return arguments.length?(o=i=+p,c):o},c.tickSizeInner=function(p){return arguments.length?(o=+p,c):o},c.tickSizeOuter=function(p){return arguments.length?(i=+p,c):i},c.tickPadding=function(p){return arguments.length?(s=+p,c):s},c.offset=function(p){return arguments.length?(l=+p,c):l},c}function ea(t){return ta(Vr,t)}function tr(t){return ta(Kn,t)}function er(t){return ta(Ke,t)}var ac={value:()=>{}};function Qo(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new qr(r)}function qr(t){this._=t}function oc(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}qr.prototype=Qo.prototype={constructor:qr,on:function(t,e){var r=this._,n=oc(t+"",r),a,o=-1,i=n.length;if(arguments.length<2){for(;++o<i;)if((a=(t=n[o]).type)&&(a=ic(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<i;)if(a=(t=n[o]).type)r[a]=Go(r[a],t.name,e);else if(e==null)for(a in r)r[a]=Go(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new qr(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,o;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,a=o.length;n<a;++n)o[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,o=n.length;a<o;++a)n[a].value.apply(e,r)}};function ic(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function Go(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=ac,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var rr=Qo;var Br="http://www.w3.org/1999/xhtml",ra={svg:"http://www.w3.org/2000/svg",xhtml:Br,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),ra.hasOwnProperty(e)?{space:ra[e],local:t}:t}function sc(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Br&&e.documentElement.namespaceURI===Br?e.createElement(t):e.createElementNS(r,t)}}function uc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Wr(t){var e=Yt(t);return(e.local?uc:sc)(e)}function lc(){}function fe(t){return t==null?lc:function(){return this.querySelector(t)}}function jo(t){typeof t!="function"&&(t=fe(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=new Array(i),l,u,f=0;f<i;++f)(l=o[f])&&(u=t.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new rt(n,this._parents)}function na(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function cc(){return[]}function nr(t){return t==null?cc:function(){return this.querySelectorAll(t)}}function fc(t){return function(){return na(t.apply(this,arguments))}}function Jo(t){typeof t=="function"?t=fc(t):t=nr(t);for(var e=this._groups,r=e.length,n=[],a=[],o=0;o<r;++o)for(var i=e[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&(n.push(t.call(l,l.__data__,u,i)),a.push(l));return new rt(n,a)}function ar(t){return function(){return this.matches(t)}}function Zr(t){return function(e){return e.matches(t)}}var hc=Array.prototype.find;function pc(t){return function(){return hc.call(this.children,t)}}function mc(){return this.firstElementChild}function Ko(t){return this.select(t==null?mc:pc(typeof t=="function"?t:Zr(t)))}var dc=Array.prototype.filter;function gc(){return Array.from(this.children)}function xc(t){return function(){return dc.call(this.children,t)}}function ti(t){return this.selectAll(t==null?gc:xc(typeof t=="function"?t:Zr(t)))}function ei(t){typeof t!="function"&&(t=ar(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],l,u=0;u<i;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new rt(n,this._parents)}function Gr(t){return new Array(t.length)}function ri(){return new rt(this._enter||this._groups.map(Gr),this._parents)}function or(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}or.prototype={constructor:or,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ni(t){return function(){return t}}function yc(t,e,r,n,a,o){for(var i=0,s,l=e.length,u=o.length;i<u;++i)(s=e[i])?(s.__data__=o[i],n[i]=s):r[i]=new or(t,o[i]);for(;i<l;++i)(s=e[i])&&(a[i]=s)}function vc(t,e,r,n,a,o,i){var s,l,u=new Map,f=e.length,h=o.length,c=new Array(f),p;for(s=0;s<f;++s)(l=e[s])&&(c[s]=p=i.call(l,l.__data__,s,e)+"",u.has(p)?a[s]=l:u.set(p,l));for(s=0;s<h;++s)p=i.call(t,o[s],s,o)+"",(l=u.get(p))?(n[s]=l,l.__data__=o[s],u.delete(p)):r[s]=new or(t,o[s]);for(s=0;s<f;++s)(l=e[s])&&u.get(c[s])===l&&(a[s]=l)}function _c(t){return t.__data__}function ai(t,e){if(!arguments.length)return Array.from(this,_c);var r=e?vc:yc,n=this._parents,a=this._groups;typeof t!="function"&&(t=ni(t));for(var o=a.length,i=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var f=n[u],h=a[u],c=h.length,p=bc(t.call(f,f&&f.__data__,u,n)),x=p.length,y=s[u]=new Array(x),m=i[u]=new Array(x),g=l[u]=new Array(c);r(f,h,y,m,g,p,e);for(var k=0,D=0,b,N;k<x;++k)if(b=y[k]){for(k>=D&&(D=k+1);!(N=m[D])&&++D<x;);b._next=N||null}}return i=new rt(i,n),i._enter=s,i._exit=l,i}function bc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oi(){return new rt(this._exit||this._groups.map(Gr),this._parents)}function ii(t,e,r){var n=this.enter(),a=this,o=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?o.remove():r(o),n&&a?n.merge(a).order():a}function si(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,o=n.length,i=Math.min(a,o),s=new Array(a),l=0;l<i;++l)for(var u=r[l],f=n[l],h=u.length,c=s[l]=new Array(h),p,x=0;x<h;++x)(p=u[x]||f[x])&&(c[x]=p);for(;l<a;++l)s[l]=r[l];return new rt(s,this._parents)}function ui(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,o=n[a],i;--a>=0;)(i=n[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function li(t){t||(t=wc);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o){for(var i=r[o],s=i.length,l=a[o]=new Array(s),u,f=0;f<s;++f)(u=i[f])&&(l[f]=u);l.sort(e)}return new rt(a,this._parents).order()}function wc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ci(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function fi(){return Array.from(this)}function hi(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length;a<o;++a){var i=n[a];if(i)return i}return null}function pi(){let t=0;for(let e of this)++t;return t}function mi(){return!this.node()}function di(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],o=0,i=a.length,s;o<i;++o)(s=a[o])&&t.call(s,s.__data__,o,a);return this}function Tc(t){return function(){this.removeAttribute(t)}}function Cc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mc(t,e){return function(){this.setAttribute(t,e)}}function kc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ac(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Sc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function gi(t,e){var r=Yt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?Cc:Tc:typeof e=="function"?r.local?Sc:Ac:r.local?kc:Mc)(r,e))}function Qr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Dc(t){return function(){this.style.removeProperty(t)}}function Nc(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Ic(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function xi(t,e,r){return arguments.length>1?this.each((e==null?Dc:typeof e=="function"?Ic:Nc)(t,e,r??"")):Qt(this.node(),t)}function Qt(t,e){return t.style.getPropertyValue(e)||Qr(t).getComputedStyle(t,null).getPropertyValue(e)}function Rc(t){return function(){delete this[t]}}function Ec(t,e){return function(){this[t]=e}}function Oc(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function yi(t,e){return arguments.length>1?this.each((e==null?Rc:typeof e=="function"?Oc:Ec)(t,e)):this.node()[t]}function vi(t){return t.trim().split(/^|\s+/)}function aa(t){return t.classList||new _i(t)}function _i(t){this._node=t,this._names=vi(t.getAttribute("class")||"")}_i.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function bi(t,e){for(var r=aa(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function wi(t,e){for(var r=aa(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function $c(t){return function(){bi(this,t)}}function Pc(t){return function(){wi(this,t)}}function Fc(t,e){return function(){(e.apply(this,arguments)?bi:wi)(this,t)}}function Ti(t,e){var r=vi(t+"");if(arguments.length<2){for(var n=aa(this.node()),a=-1,o=r.length;++a<o;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?Fc:e?$c:Pc)(r,e))}function zc(){this.textContent=""}function Hc(t){return function(){this.textContent=t}}function Lc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ci(t){return arguments.length?this.each(t==null?zc:(typeof t=="function"?Lc:Hc)(t)):this.node().textContent}function Uc(){this.innerHTML=""}function Xc(t){return function(){this.innerHTML=t}}function Yc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Mi(t){return arguments.length?this.each(t==null?Uc:(typeof t=="function"?Yc:Xc)(t)):this.node().innerHTML}function Vc(){this.nextSibling&&this.parentNode.appendChild(this)}function ki(){return this.each(Vc)}function qc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ai(){return this.each(qc)}function Si(t){var e=typeof t=="function"?t:Wr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Bc(){return null}function Di(t,e){var r=typeof t=="function"?t:Wr(t),n=e==null?Bc:typeof e=="function"?e:fe(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Wc(){var t=this.parentNode;t&&t.removeChild(this)}function Ni(){return this.each(Wc)}function Zc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ii(t){return this.select(t?Gc:Zc)}function Ri(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Qc(t){return function(e){t.call(this,e,this.__data__)}}function jc(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Jc(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,o;r<a;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++n]=o;++n?e.length=n:delete this.__on}}}function Kc(t,e,r){return function(){var n=this.__on,a,o=Qc(e);if(n){for(var i=0,s=n.length;i<s;++i)if((a=n[i]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=r),a.value=e;return}}this.addEventListener(t.type,o,r),a={type:t.type,name:t.name,value:e,listener:o,options:r},n?n.push(a):this.__on=[a]}}function Ei(t,e,r){var n=jc(t+""),a,o=n.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(a=0,f=s[l];a<o;++a)if((i=n[a]).type===f.type&&i.name===f.name)return f.value}return}for(s=e?Kc:Jc,a=0;a<o;++a)this.each(s(n[a],e,r));return this}function Oi(t,e,r){var n=Qr(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function tf(t,e){return function(){return Oi(this,t,e)}}function ef(t,e){return function(){return Oi(this,t,e.apply(this,arguments))}}function $i(t,e){return this.each((typeof e=="function"?ef:tf)(t,e))}function*Pi(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length,i;a<o;++a)(i=n[a])&&(yield i)}var oa=[null];function rt(t,e){this._groups=t,this._parents=e}function Fi(){return new rt([[document.documentElement]],oa)}function rf(){return this}rt.prototype=Fi.prototype={constructor:rt,select:jo,selectAll:Jo,selectChild:Ko,selectChildren:ti,filter:ei,data:ai,enter:ri,exit:oi,join:ii,merge:si,selection:rf,order:ui,sort:li,call:ci,nodes:fi,node:hi,size:pi,empty:mi,each:di,attr:gi,style:xi,property:yi,classed:Ti,text:Ci,html:Mi,raise:ki,lower:Ai,append:Si,insert:Di,remove:Ni,clone:Ii,datum:Ri,on:Ei,dispatch:$i,[Symbol.iterator]:Pi};var Vt=Fi;function W(t){return typeof t=="string"?new rt([[document.querySelector(t)]],[document.documentElement]):new rt([[t]],oa)}function zi(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qt(t,e){if(t=zi(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}var jr={capture:!0,passive:!1};function Jr(t){t.preventDefault(),t.stopImmediatePropagation()}function ia(t){var e=t.document.documentElement,r=W(t).on("dragstart.drag",Jr,jr);"onselectstart"in e?r.on("selectstart.drag",Jr,jr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function sa(t,e){var r=t.document.documentElement,n=W(t).on("dragstart.drag",null);e&&(n.on("click.drag",Jr,jr),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function Kr(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ua(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ur(){}var ir=.7,rn=1/ir,$e="\\s*([+-]?\\d+)\\s*",sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nf=/^#([0-9a-f]{3,8})$/,af=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),of=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),sf=new RegExp(`^rgba\\(${$e},${$e},${$e},${sr}\\)$`),uf=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${sr}\\)$`),lf=new RegExp(`^hsl\\(${sr},${Pt},${Pt}\\)$`),cf=new RegExp(`^hsla\\(${sr},${Pt},${Pt},${sr}\\)$`),Hi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kr(ur,Dt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Li,formatHex:Li,formatHex8:ff,formatHsl:hf,formatRgb:Ui,toString:Ui});function Li(){return this.rgb().formatHex()}function ff(){return this.rgb().formatHex8()}function hf(){return Wi(this).formatHsl()}function Ui(){return this.rgb().formatRgb()}function Dt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=nf.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Xi(e):r===3?new Ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?tn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?tn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=af.exec(t))?new Ct(e[1],e[2],e[3],1):(e=of.exec(t))?new Ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sf.exec(t))?tn(e[1],e[2],e[3],e[4]):(e=uf.exec(t))?tn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=lf.exec(t))?qi(e[1],e[2]/100,e[3]/100,1):(e=cf.exec(t))?qi(e[1],e[2]/100,e[3]/100,e[4]):Hi.hasOwnProperty(t)?Xi(Hi[t]):t==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Xi(t){return new Ct(t>>16&255,t>>8&255,t&255,1)}function tn(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ct(t,e,r,n)}function pf(t){return t instanceof ur||(t=Dt(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function Pe(t,e,r,n){return arguments.length===1?pf(t):new Ct(t,e,r,n??1)}function Ct(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Kr(Ct,Pe,ua(ur,{brighter(t){return t=t==null?rn:Math.pow(rn,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ir:Math.pow(ir,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ct(pe(this.r),pe(this.g),pe(this.b),nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yi,formatHex:Yi,formatHex8:mf,formatRgb:Vi,toString:Vi}));function Yi(){return`#${he(this.r)}${he(this.g)}${he(this.b)}`}function mf(){return`#${he(this.r)}${he(this.g)}${he(this.b)}${he((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vi(){let t=nn(this.opacity);return`${t===1?"rgb(":"rgba("}${pe(this.r)}, ${pe(this.g)}, ${pe(this.b)}${t===1?")":`, ${t})`}`}function nn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function pe(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function he(t){return t=pe(t),(t<16?"0":"")+t.toString(16)}function qi(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new St(t,e,r,n)}function Wi(t){if(t instanceof St)return new St(t.h,t.s,t.l,t.opacity);if(t instanceof ur||(t=Dt(t)),!t)return new St;if(t instanceof St)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),o=Math.max(e,r,n),i=NaN,s=o-a,l=(o+a)/2;return s?(e===o?i=(r-n)/s+(r<n)*6:r===o?i=(n-e)/s+2:i=(e-r)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new St(i,s,l,t.opacity)}function Zi(t,e,r,n){return arguments.length===1?Wi(t):new St(t,e,r,n??1)}function St(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Kr(St,Zi,ua(ur,{brighter(t){return t=t==null?rn:Math.pow(rn,t),new St(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ir:Math.pow(ir,t),new St(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Ct(la(t>=240?t-240:t+120,a,n),la(t,a,n),la(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new St(Bi(this.h),en(this.s),en(this.l),nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=nn(this.opacity);return`${t===1?"hsl(":"hsla("}${Bi(this.h)}, ${en(this.s)*100}%, ${en(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Bi(t){return t=(t||0)%360,t<0?t+360:t}function en(t){return Math.max(0,Math.min(1,t||0))}function la(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function ca(t,e,r,n,a){var o=t*t,i=o*t;return((1-3*t+3*o-i)*e+(4-6*o+3*i)*r+(1+3*t+3*o-3*i)*n+i*a)/6}function Gi(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),a=t[n],o=t[n+1],i=n>0?t[n-1]:2*a-o,s=n<e-1?t[n+2]:2*o-a;return ca((r-n/e)*e,i,a,o,s)}}function Qi(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),a=t[(n+e-1)%e],o=t[n%e],i=t[(n+1)%e],s=t[(n+2)%e];return ca((r-n/e)*e,a,o,i,s)}}var lr=t=>()=>t;function df(t,e){return function(r){return t+r*e}}function gf(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function ji(t){return(t=+t)==1?an:function(e,r){return r-e?gf(e,r,t):lr(isNaN(e)?r:e)}}function an(t,e){var r=e-t;return r?df(t,r):lr(isNaN(t)?e:t)}var me=(function t(e){var r=ji(e);function n(a,o){var i=r((a=Pe(a)).r,(o=Pe(o)).r),s=r(a.g,o.g),l=r(a.b,o.b),u=an(a.opacity,o.opacity);return function(f){return a.r=i(f),a.g=s(f),a.b=l(f),a.opacity=u(f),a+""}}return n.gamma=t,n})(1);function Ji(t){return function(e){var r=e.length,n=new Array(r),a=new Array(r),o=new Array(r),i,s;for(i=0;i<r;++i)s=Pe(e[i]),n[i]=s.r||0,a[i]=s.g||0,o[i]=s.b||0;return n=t(n),a=t(a),o=t(o),s.opacity=1,function(l){return s.r=n(l),s.g=a(l),s.b=o(l),s+""}}}var xf=Ji(Gi),yf=Ji(Qi);function Ki(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(o){for(a=0;a<r;++a)n[a]=t[a]*(1-o)+e[a]*o;return n}}function ts(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function es(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),o=new Array(r),i;for(i=0;i<n;++i)a[i]=Bt(t[i],e[i]);for(;i<r;++i)o[i]=e[i];return function(s){for(i=0;i<n;++i)o[i]=a[i](s);return o}}function rs(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function lt(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function ns(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Bt(t[a],e[a]):n[a]=e[a];return function(o){for(a in r)n[a]=r[a](o);return n}}var ha=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fa=new RegExp(ha.source,"g");function vf(t){return function(){return t}}function _f(t){return function(e){return t(e)+""}}function cr(t,e){var r=ha.lastIndex=fa.lastIndex=0,n,a,o,i=-1,s=[],l=[];for(t=t+"",e=e+"";(n=ha.exec(t))&&(a=fa.exec(e));)(o=a.index)>r&&(o=e.slice(r,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(a=a[0])?s[i]?s[i]+=a:s[++i]=a:(s[++i]=null,l.push({i,x:lt(n,a)})),r=fa.lastIndex;return r<e.length&&(o=e.slice(r),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?_f(l[0].x):vf(e):(e=l.length,function(u){for(var f=0,h;f<e;++f)s[(h=l[f]).i]=h.x(u);return s.join("")})}function Bt(t,e){var r=typeof e,n;return e==null||r==="boolean"?lr(e):(r==="number"?lt:r==="string"?(n=Dt(e))?(e=n,me):cr:e instanceof Dt?me:e instanceof Date?rs:ts(e)?Ki:Array.isArray(e)?es:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ns:lt)(t,e)}function pa(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var as=180/Math.PI,on={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ma(t,e,r,n,a,o){var i,s,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),t*n<e*r&&(t=-t,e=-e,l=-l,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(e,t)*as,skewX:Math.atan(l)*as,scaleX:i,scaleY:s}}var sn;function os(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?on:ma(e.a,e.b,e.c,e.d,e.e,e.f)}function is(t){return t==null?on:(sn||(sn=document.createElementNS("http://www.w3.org/2000/svg","g")),sn.setAttribute("transform",t),(t=sn.transform.baseVal.consolidate())?(t=t.matrix,ma(t.a,t.b,t.c,t.d,t.e,t.f)):on)}function ss(t,e,r,n){function a(u){return u.length?u.pop()+" ":""}function o(u,f,h,c,p,x){if(u!==h||f!==c){var y=p.push("translate(",null,e,null,r);x.push({i:y-4,x:lt(u,h)},{i:y-2,x:lt(f,c)})}else(h||c)&&p.push("translate("+h+e+c+r)}function i(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(a(h)+"rotate(",null,n)-2,x:lt(u,f)})):f&&h.push(a(h)+"rotate("+f+n)}function s(u,f,h,c){u!==f?c.push({i:h.push(a(h)+"skewX(",null,n)-2,x:lt(u,f)}):f&&h.push(a(h)+"skewX("+f+n)}function l(u,f,h,c,p,x){if(u!==h||f!==c){var y=p.push(a(p)+"scale(",null,",",null,")");x.push({i:y-4,x:lt(u,h)},{i:y-2,x:lt(f,c)})}else(h!==1||c!==1)&&p.push(a(p)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,c),i(u.rotate,f.rotate,h,c),s(u.skewX,f.skewX,h,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(p){for(var x=-1,y=c.length,m;++x<y;)h[(m=c[x]).i]=m.x(p);return h.join("")}}}var da=ss(os,"px, ","px)","deg)"),ga=ss(is,", ",")",")");var bf=1e-12;function us(t){return((t=Math.exp(t))+1/t)/2}function wf(t){return((t=Math.exp(t))-1/t)/2}function Tf(t){return((t=Math.exp(2*t))-1)/(t+1)}var xa=(function t(e,r,n){function a(o,i){var s=o[0],l=o[1],u=o[2],f=i[0],h=i[1],c=i[2],p=f-s,x=h-l,y=p*p+x*x,m,g;if(y<bf)g=Math.log(c/u)/e,m=function(F){return[s+F*p,l+F*x,u*Math.exp(e*F*g)]};else{var k=Math.sqrt(y),D=(c*c-u*u+n*y)/(2*u*r*k),b=(c*c-u*u-n*y)/(2*c*r*k),N=Math.log(Math.sqrt(D*D+1)-D),w=Math.log(Math.sqrt(b*b+1)-b);g=(w-N)/e,m=function(F){var O=F*g,I=us(N),$=u/(r*k)*(I*Tf(e*O+N)-wf(N));return[s+$*p,l+$*x,u*I/us(e*O+N)]}}return m.duration=g*1e3*e/Math.SQRT2,m}return a.rho=function(o){var i=Math.max(.001,+o),s=i*i,l=s*s;return t(i,s,l)},a})(Math.SQRT2,2,4);var Fe=0,hr=0,fr=0,cs=1e3,un,pr,ln=0,de=0,cn=0,mr=typeof performance=="object"&&performance.now?performance:Date,fs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function gr(){return de||(fs(Cf),de=mr.now()+cn)}function Cf(){de=0}function dr(){this._call=this._time=this._next=null}dr.prototype=fn.prototype={constructor:dr,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?gr():+r)+(e==null?0:+e),!this._next&&pr!==this&&(pr?pr._next=this:un=this,pr=this),this._call=t,this._time=r,ya()},stop:function(){this._call&&(this._call=null,this._time=1/0,ya())}};function fn(t,e,r){var n=new dr;return n.restart(t,e,r),n}function hs(){gr(),++Fe;for(var t=un,e;t;)(e=de-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Fe}function ls(){de=(ln=mr.now())+cn,Fe=hr=0;try{hs()}finally{Fe=0,kf(),de=0}}function Mf(){var t=mr.now(),e=t-ln;e>cs&&(cn-=e,ln=t)}function kf(){for(var t,e=un,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:un=r);pr=t,ya(n)}function ya(t){if(!Fe){hr&&(hr=clearTimeout(hr));var e=t-de;e>24?(t<1/0&&(hr=setTimeout(ls,t-mr.now()-cn)),fr&&(fr=clearInterval(fr))):(fr||(ln=mr.now(),fr=setInterval(Mf,cs)),Fe=1,fs(ls))}}function hn(t,e,r){var n=new dr;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var Af=rr("start","end","cancel","interrupt"),Sf=[],ds=0,ps=1,mn=2,pn=3,ms=4,dn=5,xr=6;function jt(t,e,r,n,a,o){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;Df(t,r,{name:e,index:n,group:a,on:Af,tween:Sf,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ds})}function yr(t,e){var r=it(t,e);if(r.state>ds)throw new Error("too late; already scheduled");return r}function ct(t,e){var r=it(t,e);if(r.state>pn)throw new Error("too late; already running");return r}function it(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Df(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=fn(o,0,r.time);function o(u){r.state=ps,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var f,h,c,p;if(r.state!==ps)return l();for(f in n)if(p=n[f],p.name===r.name){if(p.state===pn)return hn(i);p.state===ms?(p.state=xr,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete n[f]):+f<e&&(p.state=xr,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete n[f])}if(hn(function(){r.state===pn&&(r.state=ms,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=mn,r.on.call("start",t,t.__data__,r.index,r.group),r.state===mn){for(r.state=pn,a=new Array(c=r.tween.length),f=0,h=-1;f<c;++f)(p=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(a[++h]=p);a.length=h+1}}function s(u){for(var f=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=dn,1),h=-1,c=a.length;++h<c;)a[h].call(t,f);r.state===dn&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=xr,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function Jt(t,e){var r=t.__transition,n,a,o=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){o=!1;continue}a=n.state>mn&&n.state<dn,n.state=xr,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}o&&delete t.__transition}}function gs(t){return this.each(function(){Jt(this,t)})}function Nf(t,e){var r,n;return function(){var a=ct(this,t),o=a.tween;if(o!==r){n=r=o;for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function If(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var o=ct(this,t),i=o.tween;if(i!==n){a=(n=i).slice();for(var s={name:e,value:r},l=0,u=a.length;l<u;++l)if(a[l].name===e){a[l]=s;break}l===u&&a.push(s)}o.tween=a}}function xs(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=it(this.node(),r).tween,a=0,o=n.length,i;a<o;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((e==null?Nf:If)(r,t,e))}function ze(t,e,r){var n=t._id;return t.each(function(){var a=ct(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return it(a,n).value[e]}}function gn(t,e){var r;return(typeof e=="number"?lt:e instanceof Dt?me:(r=Dt(e))?(e=r,me):cr)(t,e)}function Rf(t){return function(){this.removeAttribute(t)}}function Ef(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Of(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttribute(t);return i===a?null:i===n?o:o=e(n=i,r)}}function $f(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttributeNS(t.space,t.local);return i===a?null:i===n?o:o=e(n=i,r)}}function Pf(t,e,r){var n,a,o;return function(){var i,s=r(this),l;return s==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=s+"",i===l?null:i===n&&l===a?o:(a=l,o=e(n=i,s)))}}function Ff(t,e,r){var n,a,o;return function(){var i,s=r(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=s+"",i===l?null:i===n&&l===a?o:(a=l,o=e(n=i,s)))}}function ys(t,e){var r=Yt(t),n=r==="transform"?ga:gn;return this.attrTween(t,typeof e=="function"?(r.local?Ff:Pf)(r,n,ze(this,"attr."+t,e)):e==null?(r.local?Ef:Rf)(r):(r.local?$f:Of)(r,n,e))}function zf(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Hf(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Lf(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&Hf(t,o)),r}return a._value=e,a}function Uf(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&zf(t,o)),r}return a._value=e,a}function vs(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Yt(t);return this.tween(r,(n.local?Lf:Uf)(n,e))}function Xf(t,e){return function(){yr(this,t).delay=+e.apply(this,arguments)}}function Yf(t,e){return e=+e,function(){yr(this,t).delay=e}}function _s(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Xf:Yf)(e,t)):it(this.node(),e).delay}function Vf(t,e){return function(){ct(this,t).duration=+e.apply(this,arguments)}}function qf(t,e){return e=+e,function(){ct(this,t).duration=e}}function bs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Vf:qf)(e,t)):it(this.node(),e).duration}function Bf(t,e){if(typeof e!="function")throw new Error;return function(){ct(this,t).ease=e}}function ws(t){var e=this._id;return arguments.length?this.each(Bf(e,t)):it(this.node(),e).ease}function Wf(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;ct(this,t).ease=r}}function Ts(t){if(typeof t!="function")throw new Error;return this.each(Wf(this._id,t))}function Cs(t){typeof t!="function"&&(t=ar(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],l,u=0;u<i;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new _t(n,this._parents,this._name,this._id)}function Ms(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,o=Math.min(n,a),i=new Array(n),s=0;s<o;++s)for(var l=e[s],u=r[s],f=l.length,h=i[s]=new Array(f),c,p=0;p<f;++p)(c=l[p]||u[p])&&(h[p]=c);for(;s<n;++s)i[s]=e[s];return new _t(i,this._parents,this._name,this._id)}function Zf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Gf(t,e,r){var n,a,o=Zf(e)?yr:ct;return function(){var i=o(this,t),s=i.on;s!==n&&(a=(n=s).copy()).on(e,r),i.on=a}}function ks(t,e){var r=this._id;return arguments.length<2?it(this.node(),r).on.on(t):this.each(Gf(r,t,e))}function Qf(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function As(){return this.on("end.remove",Qf(this._id))}function Ss(t){var e=this._name,r=this._id;typeof t!="function"&&(t=fe(t));for(var n=this._groups,a=n.length,o=new Array(a),i=0;i<a;++i)for(var s=n[i],l=s.length,u=o[i]=new Array(l),f,h,c=0;c<l;++c)(f=s[c])&&(h=t.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,jt(u[c],e,r,c,u,it(f,r)));return new _t(o,this._parents,e,r)}function Ds(t){var e=this._name,r=this._id;typeof t!="function"&&(t=nr(t));for(var n=this._groups,a=n.length,o=[],i=[],s=0;s<a;++s)for(var l=n[s],u=l.length,f,h=0;h<u;++h)if(f=l[h]){for(var c=t.call(f,f.__data__,h,l),p,x=it(f,r),y=0,m=c.length;y<m;++y)(p=c[y])&&jt(p,e,r,y,c,x);o.push(c),i.push(f)}return new _t(o,i,e,r)}var jf=Vt.prototype.constructor;function Ns(){return new jf(this._groups,this._parents)}function Jf(t,e){var r,n,a;return function(){var o=Qt(this,t),i=(this.style.removeProperty(t),Qt(this,t));return o===i?null:o===r&&i===n?a:a=e(r=o,n=i)}}function Is(t){return function(){this.style.removeProperty(t)}}function Kf(t,e,r){var n,a=r+"",o;return function(){var i=Qt(this,t);return i===a?null:i===n?o:o=e(n=i,r)}}function th(t,e,r){var n,a,o;return function(){var i=Qt(this,t),s=r(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),Qt(this,t))),i===l?null:i===n&&l===a?o:(a=l,o=e(n=i,s))}}function eh(t,e){var r,n,a,o="style."+e,i="end."+o,s;return function(){var l=ct(this,t),u=l.on,f=l.value[o]==null?s||(s=Is(e)):void 0;(u!==r||a!==f)&&(n=(r=u).copy()).on(i,a=f),l.on=n}}function Rs(t,e,r){var n=(t+="")=="transform"?da:gn;return e==null?this.styleTween(t,Jf(t,n)).on("end.style."+t,Is(t)):typeof e=="function"?this.styleTween(t,th(t,n,ze(this,"style."+t,e))).each(eh(this._id,t)):this.styleTween(t,Kf(t,n,e),r).on("end.style."+t,null)}function rh(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function nh(t,e,r){var n,a;function o(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&rh(t,i,r)),n}return o._value=e,o}function Es(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,nh(t,e,r??""))}function ah(t){return function(){this.textContent=t}}function oh(t){return function(){var e=t(this);this.textContent=e??""}}function Os(t){return this.tween("text",typeof t=="function"?oh(ze(this,"text",t)):ah(t==null?"":t+""))}function ih(t){return function(e){this.textContent=t.call(this,e)}}function sh(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&ih(a)),e}return n._value=t,n}function $s(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,sh(t))}function Ps(){for(var t=this._name,e=this._id,r=xn(),n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,l,u=0;u<s;++u)if(l=i[u]){var f=it(l,e);jt(l,t,r,u,i,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new _t(n,this._parents,t,r)}function Fs(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(o,i){var s={value:i},l={value:function(){--a===0&&o()}};r.each(function(){var u=ct(this,n),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),a===0&&o()})}var uh=0;function _t(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function zs(t){return Vt().transition(t)}function xn(){return++uh}var Wt=Vt.prototype;_t.prototype=zs.prototype={constructor:_t,select:Ss,selectAll:Ds,selectChild:Wt.selectChild,selectChildren:Wt.selectChildren,filter:Cs,merge:Ms,selection:Ns,transition:Ps,call:Wt.call,nodes:Wt.nodes,node:Wt.node,size:Wt.size,empty:Wt.empty,each:Wt.each,on:ks,attr:ys,attrTween:vs,style:Rs,styleTween:Es,text:Os,textTween:$s,remove:As,tween:xs,delay:_s,duration:bs,ease:ws,easeVarying:Ts,end:Fs,[Symbol.iterator]:Wt[Symbol.iterator]};function yn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var lh={time:null,delay:0,duration:250,ease:yn};function ch(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Hs(t){var e,r;t instanceof _t?(e=t._id,t=t._name):(e=xn(),(r=lh).time=gr(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&jt(l,t,e,u,i,r||ch(l,e));return new _t(n,this._parents,t,e)}Vt.prototype.interrupt=gs;Vt.prototype.transition=Hs;var{abs:Uv,max:Xv,min:Yv}=Math;function Ls(t){return[+t[0],+t[1]]}function fh(t){return[Ls(t[0]),Ls(t[1])]}var Vv={name:"x",handles:["w","e"].map(va),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},qv={name:"y",handles:["n","s"].map(va),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Bv={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(va),input:function(t){return t==null?null:fh(t)},output:function(t){return t}};function va(t){return{type:t}}var _a=Math.PI,ba=2*_a,ge=1e-6,hh=ba-ge;function Us(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function ph(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Us;let r=10**e;return function(n){this._+=n[0];for(let a=1,o=n.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}var xe=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Us:ph(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,o,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+o},${this._y1=+i}`}arcTo(e,r,n,a,o){if(e=+e,r=+r,n=+n,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,s=this._y1,l=n-e,u=a-r,f=i-e,h=s-r,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(c>ge)if(!(Math.abs(h*l-u*f)>ge)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-i,x=a-s,y=l*l+u*u,m=p*p+x*x,g=Math.sqrt(y),k=Math.sqrt(c),D=o*Math.tan((_a-Math.acos((y+c-m)/(2*g*k)))/2),b=D/k,N=D/g;Math.abs(b-1)>ge&&this._append`L${e+b*f},${r+b*h}`,this._append`A${o},${o},0,0,${+(h*p>f*x)},${this._x1=e+N*l},${this._y1=r+N*u}`}}arc(e,r,n,a,o,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=e+s,f=r+l,h=1^i,c=i?a-o:o-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>ge||Math.abs(this._y1-f)>ge)&&this._append`L${u},${f}`,n&&(c<0&&(c=c%ba+ba),c>hh?this._append`A${n},${n},0,1,${h},${e-s},${r-l}A${n},${n},0,1,${h},${this._x1=u},${this._y1=f}`:c>ge&&this._append`A${n},${n},0,${+(c>=_a)},${h},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}};function Xs(){return new xe}Xs.prototype=xe.prototype;function Ys(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ye(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Ft(t){return t=ye(Math.abs(t)),t?t[1]:NaN}function Vs(t,e){return function(r,n){for(var a=r.length,o=[],i=0,s=t[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),o.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=t[i=(i+1)%t.length];return o.reverse().join(e)}}function qs(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var mh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kt(t){if(!(e=mh.exec(t)))throw new Error("invalid format: "+t);var e;return new vn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Kt.prototype=vn.prototype;function vn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}vn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Bs(t){t:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var vr;function Ws(t,e){var r=ye(t,e);if(!r)return vr=void 0,t.toPrecision(e);var n=r[0],a=r[1],o=a-(vr=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+ye(t,Math.max(0,e+o-1))[0]}function wa(t,e){var r=ye(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}var Ta={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ys,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>wa(t*100,e),r:wa,s:Ws,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ca(t){return t}var Zs=Array.prototype.map,Gs=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Qs(t){var e=t.grouping===void 0||t.thousands===void 0?Ca:Vs(Zs.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Ca:qs(Zs.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h,c){h=Kt(h);var p=h.fill,x=h.align,y=h.sign,m=h.symbol,g=h.zero,k=h.width,D=h.comma,b=h.precision,N=h.trim,w=h.type;w==="n"?(D=!0,w="g"):Ta[w]||(b===void 0&&(b=12),N=!0,w="g"),(g||p==="0"&&x==="=")&&(g=!0,p="0",x="=");var F=(c&&c.prefix!==void 0?c.prefix:"")+(m==="$"?r:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():""),O=(m==="$"?n:/[%p]/.test(w)?i:"")+(c&&c.suffix!==void 0?c.suffix:""),I=Ta[w],$=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function _(T){var M=F,d=O,A,C,R;if(w==="c")d=I(T)+d,T="";else{T=+T;var z=T<0||1/T<0;if(T=isNaN(T)?l:I(Math.abs(T),b),N&&(T=Bs(T)),z&&+T==0&&y!=="+"&&(z=!1),M=(z?y==="("?y:s:y==="-"||y==="("?"":y)+M,d=(w==="s"&&!isNaN(T)&&vr!==void 0?Gs[8+vr/3]:"")+d+(z&&y==="("?")":""),$){for(A=-1,C=T.length;++A<C;)if(R=T.charCodeAt(A),48>R||R>57){d=(R===46?a+T.slice(A+1):T.slice(A))+d,T=T.slice(0,A);break}}}D&&!g&&(T=e(T,1/0));var L=M.length+T.length+d.length,H=L<k?new Array(k-L+1).join(p):"";switch(D&&g&&(T=e(H+T,H.length?k-d.length:1/0),H=""),x){case"<":T=M+T+d+H;break;case"=":T=M+H+T+d;break;case"^":T=H.slice(0,L=H.length>>1)+M+T+d+H.slice(L);break;default:T=H+M+T+d;break}return o(T)}return _.toString=function(){return h+""},_}function f(h,c){var p=Math.max(-8,Math.min(8,Math.floor(Ft(c)/3)))*3,x=Math.pow(10,-p),y=u((h=Kt(h),h.type="f",h),{suffix:Gs[8+p/3]});return function(m){return y(x*m)}}return{format:u,formatPrefix:f}}var _n,mt,bn;Ma({thousands:",",grouping:[3],currency:["$",""]});function Ma(t){return _n=Qs(t),mt=_n.format,bn=_n.formatPrefix,_n}function ka(t){return Math.max(0,-Ft(Math.abs(t)))}function Aa(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ft(e)/3)))*3-Ft(Math.abs(t)))}function Sa(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ft(e)-Ft(t))+1}function dh(t){var e=0,r=t.children,n=r&&r.length;if(!n)e=1;else for(;--n>=0;)e+=r[n].value;t.value=e}function js(){return this.eachAfter(dh)}function Js(t,e){let r=-1;for(let n of this)t.call(e,n,++r,this);return this}function Ks(t,e){for(var r=this,n=[r],a,o,i=-1;r=n.pop();)if(t.call(e,r,++i,this),a=r.children)for(o=a.length-1;o>=0;--o)n.push(a[o]);return this}function tu(t,e){for(var r=this,n=[r],a=[],o,i,s,l=-1;r=n.pop();)if(a.push(r),o=r.children)for(i=0,s=o.length;i<s;++i)n.push(o[i]);for(;r=a.pop();)t.call(e,r,++l,this);return this}function eu(t,e){let r=-1;for(let n of this)if(t.call(e,n,++r,this))return n}function ru(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,n=e.children,a=n&&n.length;--a>=0;)r+=n[a].value;e.value=r})}function nu(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function au(t){for(var e=this,r=gh(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var a=n.length;t!==r;)n.splice(a,0,t),t=t.parent;return n}function gh(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),a=null;for(t=r.pop(),e=n.pop();t===e;)a=t,t=r.pop(),e=n.pop();return a}function ou(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function iu(){return Array.from(this)}function su(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function uu(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*lu(){var t=this,e,r=[t],n,a,o;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,n=t.children)for(a=0,o=n.length;a<o;++a)r.push(n[a]);while(r.length)}function zt(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=vh)):e===void 0&&(e=yh);for(var r=new ve(t),n,a=[r],o,i,s,l;n=a.pop();)if((i=e(n.data))&&(l=(i=Array.from(i)).length))for(n.children=i,s=l-1;s>=0;--s)a.push(o=i[s]=new ve(i[s])),o.parent=n,o.depth=n.depth+1;return r.eachBefore(bh)}function xh(){return zt(this).eachBefore(_h)}function yh(t){return t.children}function vh(t){return Array.isArray(t)?t[1]:null}function _h(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function bh(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ve(t){this.data=t,this.depth=this.height=0,this.parent=null}ve.prototype=zt.prototype={constructor:ve,count:js,each:Js,eachAfter:tu,eachBefore:Ks,find:eu,sum:ru,sort:nu,path:au,ancestors:ou,descendants:iu,leaves:su,links:uu,copy:xh,[Symbol.iterator]:lu};function cu(t){return t==null?null:Da(t)}function Da(t){if(typeof t!="function")throw new Error;return t}function Zt(){return 0}function te(t){return function(){return t}}function fu(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function hu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function pu(t,e){let r=t.length,n,a;for(;r;)a=e()*r--|0,n=t[r],t[r]=t[a],t[a]=n;return t}function mu(t,e){for(var r=0,n=(t=pu(Array.from(t),e)).length,a=[],o,i;r<n;)o=t[r],i&&du(i,o)?++r:(i=Th(a=wh(a,o)),r=0);return i}function wh(t,e){var r,n;if(Na(e,t))return[e];for(r=0;r<t.length;++r)if(wn(e,t[r])&&Na(_r(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(wn(_r(t[r],t[n]),e)&&wn(_r(t[r],e),t[n])&&wn(_r(t[n],e),t[r])&&Na(gu(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error}function wn(t,e){var r=t.r-e.r,n=e.x-t.x,a=e.y-t.y;return r<0||r*r<n*n+a*a}function du(t,e){var r=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function Na(t,e){for(var r=0;r<e.length;++r)if(!du(t,e[r]))return!1;return!0}function Th(t){switch(t.length){case 1:return Ch(t[0]);case 2:return _r(t[0],t[1]);case 3:return gu(t[0],t[1],t[2])}}function Ch(t){return{x:t.x,y:t.y,r:t.r}}function _r(t,e){var r=t.x,n=t.y,a=t.r,o=e.x,i=e.y,s=e.r,l=o-r,u=i-n,f=s-a,h=Math.sqrt(l*l+u*u);return{x:(r+o+l/h*f)/2,y:(n+i+u/h*f)/2,r:(h+a+s)/2}}function gu(t,e,r){var n=t.x,a=t.y,o=t.r,i=e.x,s=e.y,l=e.r,u=r.x,f=r.y,h=r.r,c=n-i,p=n-u,x=a-s,y=a-f,m=l-o,g=h-o,k=n*n+a*a-o*o,D=k-i*i-s*s+l*l,b=k-u*u-f*f+h*h,N=p*x-c*y,w=(x*b-y*D)/(N*2)-n,F=(y*m-x*g)/N,O=(p*D-c*b)/(N*2)-a,I=(c*g-p*m)/N,$=F*F+I*I-1,_=2*(o+w*F+O*I),T=w*w+O*O-o*o,M=-(Math.abs($)>1e-6?(_+Math.sqrt(_*_-4*$*T))/(2*$):T/_);return{x:n+w+F*M,y:a+O+I*M,r:M}}function xu(t,e,r){var n=t.x-e.x,a,o,i=t.y-e.y,s,l,u=n*n+i*i;u?(o=e.r+r.r,o*=o,l=t.r+r.r,l*=l,o>l?(a=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-a*a)),r.x=t.x-a*n-s*i,r.y=t.y-a*i+s*n):(a=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-a*a)),r.x=e.x+a*n-s*i,r.y=e.y+a*i+s*n)):(r.x=e.x+r.r,r.y=e.y)}function yu(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function vu(t){var e=t._,r=t.next._,n=e.r+r.r,a=(e.x*r.r+r.x*e.r)/n,o=(e.y*r.r+r.y*e.r)/n;return a*a+o*o}function Tn(t){this._=t,this.next=null,this.previous=null}function _u(t,e){if(!(o=(t=hu(t)).length))return 0;var r,n,a,o,i,s,l,u,f,h,c;if(r=t[0],r.x=0,r.y=0,!(o>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(o>2))return r.r+n.r;xu(n,r,a=t[2]),r=new Tn(r),n=new Tn(n),a=new Tn(a),r.next=a.previous=n,n.next=r.previous=a,a.next=n.previous=r;t:for(l=3;l<o;++l){xu(r._,n._,a=t[l]),a=new Tn(a),u=n.next,f=r.previous,h=n._.r,c=r._.r;do if(h<=c){if(yu(u._,a._)){n=u,r.next=n,n.previous=r,--l;continue t}h+=u._.r,u=u.next}else{if(yu(f._,a._)){r=f,r.next=n,n.previous=r,--l;continue t}c+=f._.r,f=f.previous}while(u!==f.next);for(a.previous=r,a.next=n,r.next=n.previous=n=a,i=vu(r);(a=a.next)!==n;)(s=vu(a))<i&&(r=a,i=s);n=r.next}for(r=[n._],a=n;(a=a.next)!==n;)r.push(a._);for(a=mu(r,e),l=0;l<o;++l)r=t[l],r.x-=a.x,r.y-=a.y;return a.r}function Mh(t){return Math.sqrt(t.value)}function Ra(){var t=null,e=1,r=1,n=Zt;function a(o){let i=fu();return o.x=e/2,o.y=r/2,t?o.eachBefore(bu(t)).eachAfter(Ia(n,.5,i)).eachBefore(wu(1)):o.eachBefore(bu(Mh)).eachAfter(Ia(Zt,1,i)).eachAfter(Ia(n,o.r/Math.min(e,r),i)).eachBefore(wu(Math.min(e,r)/(2*o.r))),o}return a.radius=function(o){return arguments.length?(t=cu(o),a):t},a.size=function(o){return arguments.length?(e=+o[0],r=+o[1],a):[e,r]},a.padding=function(o){return arguments.length?(n=typeof o=="function"?o:te(+o),a):n},a}function bu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Ia(t,e,r){return function(n){if(a=n.children){var a,o,i=a.length,s=t(n)*e||0,l;if(s)for(o=0;o<i;++o)a[o].r+=s;if(l=_u(a,r),s)for(o=0;o<i;++o)a[o].r-=s;n.r=l+s}}}function wu(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function Tu(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Cu(t,e,r,n,a){for(var o=t.children,i,s=-1,l=o.length,u=t.value&&(n-e)/t.value;++s<l;)i=o[s],i.y0=r,i.y1=a,i.x0=e,i.x1=e+=i.value*u}function kh(t,e){return t.parent===e.parent?1:2}function Ea(t){var e=t.children;return e?e[0]:t.t}function Oa(t){var e=t.children;return e?e[e.length-1]:t.t}function Ah(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function Sh(t){for(var e=0,r=0,n=t.children,a=n.length,o;--a>=0;)o=n[a],o.z+=e,o.m+=e,e+=o.s+(r+=o.c)}function Dh(t,e,r){return t.a.parent===e.parent?t.a:r}function Cn(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Cn.prototype=Object.create(ve.prototype);function Nh(t){for(var e=new Cn(t,0),r,n=[e],a,o,i,s;r=n.pop();)if(o=r._.children)for(r.children=new Array(s=o.length),i=s-1;i>=0;--i)n.push(a=r.children[i]=new Cn(o[i],i)),a.parent=r;return(e.parent=new Cn(null,0)).children=[e],e}function $a(){var t=kh,e=1,r=1,n=null;function a(u){var f=Nh(u);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(i),n)u.eachBefore(l);else{var h=u,c=u,p=u;u.eachBefore(function(k){k.x<h.x&&(h=k),k.x>c.x&&(c=k),k.depth>p.depth&&(p=k)});var x=h===c?1:t(h,c)/2,y=x-h.x,m=e/(c.x+x+y),g=r/(p.depth||1);u.eachBefore(function(k){k.x=(k.x+y)*m,k.y=k.depth*g})}return u}function o(u){var f=u.children,h=u.parent.children,c=u.i?h[u.i-1]:null;if(f){Sh(u);var p=(f[0].z+f[f.length-1].z)/2;c?(u.z=c.z+t(u._,c._),u.m=u.z-p):u.z=p}else c&&(u.z=c.z+t(u._,c._));u.parent.A=s(u,c,u.parent.A||h[0])}function i(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,f,h){if(f){for(var c=u,p=u,x=f,y=c.parent.children[0],m=c.m,g=p.m,k=x.m,D=y.m,b;x=Oa(x),c=Ea(c),x&&c;)y=Ea(y),p=Oa(p),p.a=u,b=x.z+k-c.z-m+t(x._,c._),b>0&&(Ah(Dh(x,u,h),u,b),m+=b,g+=b),k+=x.m,m+=c.m,D+=y.m,g+=p.m;x&&!Oa(p)&&(p.t=x,p.m+=k-g),c&&!Ea(y)&&(y.t=c,y.m+=m-D,h=u)}return h}function l(u){u.x*=e,u.y=u.depth*r}return a.separation=function(u){return arguments.length?(t=u,a):t},a.size=function(u){return arguments.length?(n=!1,e=+u[0],r=+u[1],a):n?null:[e,r]},a.nodeSize=function(u){return arguments.length?(n=!0,e=+u[0],r=+u[1],a):n?[e,r]:null},a}function Mu(t,e,r,n,a){for(var o=t.children,i,s=-1,l=o.length,u=t.value&&(a-r)/t.value;++s<l;)i=o[s],i.x0=e,i.x1=n,i.y0=r,i.y1=r+=i.value*u}var Ih=(1+Math.sqrt(5))/2;function Rh(t,e,r,n,a,o){for(var i=[],s=e.children,l,u,f=0,h=0,c=s.length,p,x,y=e.value,m,g,k,D,b,N,w;f<c;){p=a-r,x=o-n;do m=s[h++].value;while(!m&&h<c);for(g=k=m,N=Math.max(x/p,p/x)/(y*t),w=m*m*N,b=Math.max(k/w,w/g);h<c;++h){if(m+=u=s[h].value,u<g&&(g=u),u>k&&(k=u),w=m*m*N,D=Math.max(k/w,w/g),D>b){m-=u;break}b=D}i.push(l={value:m,dice:p<x,children:s.slice(f,h)}),l.dice?Cu(l,r,n,a,y?n+=x*m/y:o):Mu(l,r,n,y?r+=p*m/y:a,o),y-=m,f=h}return i}var ku=(function t(e){function r(n,a,o,i,s){Rh(e,n,a,o,i,s)}return r.ratio=function(n){return t((n=+n)>1?n:1)},r})(Ih);function Pa(){var t=ku,e=!1,r=1,n=1,a=[0],o=Zt,i=Zt,s=Zt,l=Zt,u=Zt;function f(c){return c.x0=c.y0=0,c.x1=r,c.y1=n,c.eachBefore(h),a=[0],e&&c.eachBefore(Tu),c}function h(c){var p=a[c.depth],x=c.x0+p,y=c.y0+p,m=c.x1-p,g=c.y1-p;m<x&&(x=m=(x+m)/2),g<y&&(y=g=(y+g)/2),c.x0=x,c.y0=y,c.x1=m,c.y1=g,c.children&&(p=a[c.depth+1]=o(c)/2,x+=u(c)-p,y+=i(c)-p,m-=s(c)-p,g-=l(c)-p,m<x&&(x=m=(x+m)/2),g<y&&(y=g=(y+g)/2),t(c,x,y,m,g))}return f.round=function(c){return arguments.length?(e=!!c,f):e},f.size=function(c){return arguments.length?(r=+c[0],n=+c[1],f):[r,n]},f.tile=function(c){return arguments.length?(t=Da(c),f):t},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(o=typeof c=="function"?c:te(+c),f):o},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(i=typeof c=="function"?c:te(+c),f):i},f.paddingRight=function(c){return arguments.length?(s=typeof c=="function"?c:te(+c),f):s},f.paddingBottom=function(c){return arguments.length?(l=typeof c=="function"?c:te(+c),f):l},f.paddingLeft=function(c){return arguments.length?(u=typeof c=="function"?c:te(+c),f):u},f}function ee(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var Au=Symbol("implicit");function Mn(){var t=new Ee,e=[],r=[],n=Au;function a(o){let i=t.get(o);if(i===void 0){if(n!==Au)return n;t.set(o,i=e.push(o)-1)}return r[i%r.length]}return a.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Ee;for(let i of o)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(o){return arguments.length?(r=Array.from(o),a):r.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return Mn(e,r).unknown(n)},ee.apply(a,arguments),a}function br(){var t=Mn().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,o,i,s=!1,l=0,u=0,f=.5;delete t.unknown;function h(){var c=e().length,p=a<n,x=p?a:n,y=p?n:a;o=(y-x)/Math.max(1,c-l+u*2),s&&(o=Math.floor(o)),x+=(y-x-o*(c-l))*f,i=o*(1-l),s&&(x=Math.round(x),i=Math.round(i));var m=Yr(c).map(function(g){return x+o*g});return r(p?m.reverse():m)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([n,a]=c,n=+n,a=+a,h()):[n,a]},t.rangeRound=function(c){return[n,a]=c,n=+n,a=+a,s=!0,h()},t.bandwidth=function(){return i},t.step=function(){return o},t.round=function(c){return arguments.length?(s=!!c,h()):s},t.padding=function(c){return arguments.length?(l=Math.min(1,u=+c),h()):l},t.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),h()):l},t.paddingOuter=function(c){return arguments.length?(u=+c,h()):u},t.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},t.copy=function(){return br(e(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(f)},ee.apply(h(),arguments)}function Fa(t){return function(){return t}}function za(t){return+t}var Su=[0,1];function He(t){return t}function Ha(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Fa(isNaN(e)?NaN:.5)}function Eh(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Oh(t,e,r){var n=t[0],a=t[1],o=e[0],i=e[1];return a<n?(n=Ha(a,n),o=r(i,o)):(n=Ha(n,a),o=r(o,i)),function(s){return o(n(s))}}function $h(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),o=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=Ha(t[i],t[i+1]),o[i]=r(e[i],e[i+1]);return function(s){var l=jn(t,s,1,n)-1;return o[l](a[l](s))}}function kn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ph(){var t=Su,e=Su,r=Bt,n,a,o,i=He,s,l,u;function f(){var c=Math.min(t.length,e.length);return i!==He&&(i=Eh(t[0],t[c-1])),s=c>2?$h:Oh,l=u=null,h}function h(c){return c==null||isNaN(c=+c)?o:(l||(l=s(t.map(n),e,r)))(n(i(c)))}return h.invert=function(c){return i(a((u||(u=s(e,t.map(n),lt)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,za),f()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),f()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),r=pa,f()},h.clamp=function(c){return arguments.length?(i=c?!0:He,f()):i!==He},h.interpolate=function(c){return arguments.length?(r=c,f()):r},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,p){return n=c,a=p,f()}}function wr(){return Ph()(He,He)}function La(t,e,r,n){var a=Oe(t,e,r),o;switch(n=Kt(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=Aa(a,i))&&(n.precision=o),bn(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=Sa(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=ka(a))&&(n.precision=o-(n.type==="%")*2);break}}return mt(n)}function Fh(t){var e=t.domain;return t.ticks=function(r){var n=e();return Xr(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return La(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,o=n.length-1,i=n[a],s=n[o],l,u,f=10;for(s<i&&(u=i,i=s,s=u,u=a,a=o,o=u);f-- >0;){if(u=Je(i,s,r),u===l)return n[a]=i,n[o]=s,e(n);if(u>0)i=Math.floor(i/u)*u,s=Math.ceil(s/u)*u;else if(u<0)i=Math.ceil(i*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function At(){var t=wr();return t.copy=function(){return kn(t,At())},ee.apply(t,arguments),Fh(t)}function Ua(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],o=t[n],i;return o<a&&(i=r,r=n,n=i,i=a,a=o,o=i),t[r]=e.floor(a),t[n]=e.ceil(o),t}var Xa=new Date,Ya=new Date;function Z(t,e,r,n){function a(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(t(o=new Date(+o)),o),a.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),a.round=o=>{let i=a(o),s=a.ceil(o);return o-i<s-o?i:s},a.offset=(o,i)=>(e(o=new Date(+o),i==null?1:Math.floor(i)),o),a.range=(o,i,s)=>{let l=[];if(o=a.ceil(o),s=s==null?1:Math.floor(s),!(o<i)||!(s>0))return l;let u;do l.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<i);return l},a.filter=o=>Z(i=>{if(i>=i)for(;t(i),!o(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;e(i,-1),!o(i););else for(;--s>=0;)for(;e(i,1),!o(i););}),r&&(a.count=(o,i)=>(Xa.setTime(+o),Ya.setTime(+i),t(Xa),t(Ya),Math.floor(r(Xa,Ya))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(n?i=>n(i)%o===0:i=>a.count(0,i)%o===0):a)),a}var Tr=Z(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Tr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Z(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Tr);var _b=Tr.range;var Ht=Z(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*1e3)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),Du=Ht.range;var Le=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getMinutes()),zh=Le.range,An=Z(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes()),Hh=An.range;var Ue=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getHours()),Lh=Ue.range,Sn=Z(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours()),Uh=Sn.range;var Nt=Z(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Xh=Nt.range,Mr=Z(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>t.getUTCDate()-1),Yh=Mr.range,Dn=Z(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>Math.floor(t/864e5)),Vh=Dn.range;function we(t){return Z(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}var It=we(0),Xe=we(1),Iu=we(2),Ru=we(3),re=we(4),Eu=we(5),Ou=we(6),$u=It.range,qh=Xe.range,Bh=Iu.range,Wh=Ru.range,Zh=re.range,Gh=Eu.range,Qh=Ou.range;function Te(t){return Z(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/6048e5)}var Ce=Te(0),Ye=Te(1),Pu=Te(2),Fu=Te(3),ne=Te(4),zu=Te(5),Hu=Te(6),Lu=Ce.range,jh=Ye.range,Jh=Pu.range,Kh=Fu.range,tp=ne.range,ep=zu.range,rp=Hu.range;var ae=Z(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),np=ae.range,Nn=Z(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),ap=Nn.range;var bt=Z(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});var op=bt.range,Rt=Z(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});var ip=Rt.range;function Xu(t,e,r,n,a,o){let i=[[Ht,1,1e3],[Ht,5,5*1e3],[Ht,15,15*1e3],[Ht,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[a,1,36e5],[a,3,3*36e5],[a,6,6*36e5],[a,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[e,1,2592e6],[e,3,3*2592e6],[t,1,31536e6]];function s(u,f,h){let c=f<u;c&&([u,f]=[f,u]);let p=h&&typeof h.range=="function"?h:l(u,f,h),x=p?p.range(u,+f+1):[];return c?x.reverse():x}function l(u,f,h){let c=Math.abs(f-u)/h,p=le(([,,m])=>m).right(i,c);if(p===i.length)return t.every(Oe(u/31536e6,f/31536e6,h));if(p===0)return Tr.every(Math.max(Oe(u,f,h),1));let[x,y]=i[c/i[p-1][2]<i[p][2]/c?p-1:p];return x.every(y)}return[s,l]}var[up,lp]=Xu(Rt,Nn,Ce,Dn,Sn,An),[Va,qa]=Xu(bt,ae,It,Nt,Ue,Le);function Ba(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Wa(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kr(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Za(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,o=t.days,i=t.shortDays,s=t.months,l=t.shortMonths,u=Ar(a),f=Sr(a),h=Ar(o),c=Sr(o),p=Ar(i),x=Sr(i),y=Ar(s),m=Sr(s),g=Ar(l),k=Sr(l),D={a:R,A:z,b:L,B:H,c:null,d:Zu,e:Zu,f:Rp,g:Xp,G:Vp,H:Dp,I:Np,j:Ip,L:Ku,m:Ep,M:Op,p:V,q:B,Q:ju,s:Ju,S:$p,u:Pp,U:Fp,V:zp,w:Hp,W:Lp,x:null,X:null,y:Up,Y:Yp,Z:qp,"%":Qu},b={a:ht,A:J,b:K,B:gt,c:null,d:Gu,e:Gu,f:Gp,g:om,G:sm,H:Bp,I:Wp,j:Zp,L:el,m:Qp,M:jp,p:ut,q:xt,Q:ju,s:Ju,S:Jp,u:Kp,U:tm,V:em,w:rm,W:nm,x:null,X:null,y:am,Y:im,Z:um,"%":Qu},N={a:$,A:_,b:T,B:M,c:d,d:Bu,e:Bu,f:Mp,g:qu,G:Vu,H:Wu,I:Wu,j:bp,L:Cp,m:_p,M:wp,p:I,q:vp,Q:Ap,s:Sp,S:Tp,u:mp,U:dp,V:gp,w:pp,W:xp,x:A,X:C,y:qu,Y:Vu,Z:yp,"%":kp};D.x=w(r,D),D.X=w(n,D),D.c=w(e,D),b.x=w(r,b),b.X=w(n,b),b.c=w(e,b);function w(E,U){return function(Y){var S=[],Tt=-1,G=0,Mt=E.length,kt,ie,io;for(Y instanceof Date||(Y=new Date(+Y));++Tt<Mt;)E.charCodeAt(Tt)===37&&(S.push(E.slice(G,Tt)),(ie=Yu[kt=E.charAt(++Tt)])!=null?kt=E.charAt(++Tt):ie=kt==="e"?" ":"0",(io=U[kt])&&(kt=io(Y,ie)),S.push(kt),G=Tt+1);return S.push(E.slice(G,Tt)),S.join("")}}function F(E,U){return function(Y){var S=kr(1900,void 0,1),Tt=O(S,E,Y+="",0),G,Mt;if(Tt!=Y.length)return null;if("Q"in S)return new Date(S.Q);if("s"in S)return new Date(S.s*1e3+("L"in S?S.L:0));if(U&&!("Z"in S)&&(S.Z=0),"p"in S&&(S.H=S.H%12+S.p*12),S.m===void 0&&(S.m="q"in S?S.q:0),"V"in S){if(S.V<1||S.V>53)return null;"w"in S||(S.w=1),"Z"in S?(G=Wa(kr(S.y,0,1)),Mt=G.getUTCDay(),G=Mt>4||Mt===0?Ye.ceil(G):Ye(G),G=Mr.offset(G,(S.V-1)*7),S.y=G.getUTCFullYear(),S.m=G.getUTCMonth(),S.d=G.getUTCDate()+(S.w+6)%7):(G=Ba(kr(S.y,0,1)),Mt=G.getDay(),G=Mt>4||Mt===0?Xe.ceil(G):Xe(G),G=Nt.offset(G,(S.V-1)*7),S.y=G.getFullYear(),S.m=G.getMonth(),S.d=G.getDate()+(S.w+6)%7)}else("W"in S||"U"in S)&&("w"in S||(S.w="u"in S?S.u%7:"W"in S?1:0),Mt="Z"in S?Wa(kr(S.y,0,1)).getUTCDay():Ba(kr(S.y,0,1)).getDay(),S.m=0,S.d="W"in S?(S.w+6)%7+S.W*7-(Mt+5)%7:S.w+S.U*7-(Mt+6)%7);return"Z"in S?(S.H+=S.Z/100|0,S.M+=S.Z%100,Wa(S)):Ba(S)}}function O(E,U,Y,S){for(var Tt=0,G=U.length,Mt=Y.length,kt,ie;Tt<G;){if(S>=Mt)return-1;if(kt=U.charCodeAt(Tt++),kt===37){if(kt=U.charAt(Tt++),ie=N[kt in Yu?U.charAt(Tt++):kt],!ie||(S=ie(E,Y,S))<0)return-1}else if(kt!=Y.charCodeAt(S++))return-1}return S}function I(E,U,Y){var S=u.exec(U.slice(Y));return S?(E.p=f.get(S[0].toLowerCase()),Y+S[0].length):-1}function $(E,U,Y){var S=p.exec(U.slice(Y));return S?(E.w=x.get(S[0].toLowerCase()),Y+S[0].length):-1}function _(E,U,Y){var S=h.exec(U.slice(Y));return S?(E.w=c.get(S[0].toLowerCase()),Y+S[0].length):-1}function T(E,U,Y){var S=g.exec(U.slice(Y));return S?(E.m=k.get(S[0].toLowerCase()),Y+S[0].length):-1}function M(E,U,Y){var S=y.exec(U.slice(Y));return S?(E.m=m.get(S[0].toLowerCase()),Y+S[0].length):-1}function d(E,U,Y){return O(E,e,U,Y)}function A(E,U,Y){return O(E,r,U,Y)}function C(E,U,Y){return O(E,n,U,Y)}function R(E){return i[E.getDay()]}function z(E){return o[E.getDay()]}function L(E){return l[E.getMonth()]}function H(E){return s[E.getMonth()]}function V(E){return a[+(E.getHours()>=12)]}function B(E){return 1+~~(E.getMonth()/3)}function ht(E){return i[E.getUTCDay()]}function J(E){return o[E.getUTCDay()]}function K(E){return l[E.getUTCMonth()]}function gt(E){return s[E.getUTCMonth()]}function ut(E){return a[+(E.getUTCHours()>=12)]}function xt(E){return 1+~~(E.getUTCMonth()/3)}return{format:function(E){var U=w(E+="",D);return U.toString=function(){return E},U},parse:function(E){var U=F(E+="",!1);return U.toString=function(){return E},U},utcFormat:function(E){var U=w(E+="",b);return U.toString=function(){return E},U},utcParse:function(E){var U=F(E+="",!0);return U.toString=function(){return E},U}}}var Yu={"-":"",_:" ",0:"0"},st=/^\s*\d+/,cp=/^%/,fp=/[\\^$*+?|[\]().{}]/g;function q(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",o=a.length;return n+(o<r?new Array(r-o+1).join(e)+a:a)}function hp(t){return t.replace(fp,"\\$&")}function Ar(t){return new RegExp("^(?:"+t.map(hp).join("|")+")","i")}function Sr(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function pp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function mp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function dp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function gp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function xp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Vu(t,e,r){var n=st.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function qu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function yp(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function vp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function _p(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Bu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function bp(t,e,r){var n=st.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Wu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function wp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Tp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Cp(t,e,r){var n=st.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Mp(t,e,r){var n=st.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function kp(t,e,r){var n=cp.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Ap(t,e,r){var n=st.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Sp(t,e,r){var n=st.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Zu(t,e){return q(t.getDate(),e,2)}function Dp(t,e){return q(t.getHours(),e,2)}function Np(t,e){return q(t.getHours()%12||12,e,2)}function Ip(t,e){return q(1+Nt.count(bt(t),t),e,3)}function Ku(t,e){return q(t.getMilliseconds(),e,3)}function Rp(t,e){return Ku(t,e)+"000"}function Ep(t,e){return q(t.getMonth()+1,e,2)}function Op(t,e){return q(t.getMinutes(),e,2)}function $p(t,e){return q(t.getSeconds(),e,2)}function Pp(t){var e=t.getDay();return e===0?7:e}function Fp(t,e){return q(It.count(bt(t)-1,t),e,2)}function tl(t){var e=t.getDay();return e>=4||e===0?re(t):re.ceil(t)}function zp(t,e){return t=tl(t),q(re.count(bt(t),t)+(bt(t).getDay()===4),e,2)}function Hp(t){return t.getDay()}function Lp(t,e){return q(Xe.count(bt(t)-1,t),e,2)}function Up(t,e){return q(t.getFullYear()%100,e,2)}function Xp(t,e){return t=tl(t),q(t.getFullYear()%100,e,2)}function Yp(t,e){return q(t.getFullYear()%1e4,e,4)}function Vp(t,e){var r=t.getDay();return t=r>=4||r===0?re(t):re.ceil(t),q(t.getFullYear()%1e4,e,4)}function qp(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+q(e/60|0,"0",2)+q(e%60,"0",2)}function Gu(t,e){return q(t.getUTCDate(),e,2)}function Bp(t,e){return q(t.getUTCHours(),e,2)}function Wp(t,e){return q(t.getUTCHours()%12||12,e,2)}function Zp(t,e){return q(1+Mr.count(Rt(t),t),e,3)}function el(t,e){return q(t.getUTCMilliseconds(),e,3)}function Gp(t,e){return el(t,e)+"000"}function Qp(t,e){return q(t.getUTCMonth()+1,e,2)}function jp(t,e){return q(t.getUTCMinutes(),e,2)}function Jp(t,e){return q(t.getUTCSeconds(),e,2)}function Kp(t){var e=t.getUTCDay();return e===0?7:e}function tm(t,e){return q(Ce.count(Rt(t)-1,t),e,2)}function rl(t){var e=t.getUTCDay();return e>=4||e===0?ne(t):ne.ceil(t)}function em(t,e){return t=rl(t),q(ne.count(Rt(t),t)+(Rt(t).getUTCDay()===4),e,2)}function rm(t){return t.getUTCDay()}function nm(t,e){return q(Ye.count(Rt(t)-1,t),e,2)}function am(t,e){return q(t.getUTCFullYear()%100,e,2)}function om(t,e){return t=rl(t),q(t.getUTCFullYear()%100,e,2)}function im(t,e){return q(t.getUTCFullYear()%1e4,e,4)}function sm(t,e){var r=t.getUTCDay();return t=r>=4||r===0?ne(t):ne.ceil(t),q(t.getUTCFullYear()%1e4,e,4)}function um(){return"+0000"}function Qu(){return"%"}function ju(t){return+t}function Ju(t){return Math.floor(+t/1e3)}var Ve,dt,nl,al,ol;Ga({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ga(t){return Ve=Za(t),dt=Ve.format,nl=Ve.parse,al=Ve.utcFormat,ol=Ve.utcParse,Ve}function lm(t){return new Date(t)}function cm(t){return t instanceof Date?+t:+new Date(+t)}function il(t,e,r,n,a,o,i,s,l,u){var f=wr(),h=f.invert,c=f.domain,p=u(".%L"),x=u(":%S"),y=u("%I:%M"),m=u("%I %p"),g=u("%a %d"),k=u("%b %d"),D=u("%B"),b=u("%Y");function N(w){return(l(w)<w?p:s(w)<w?x:i(w)<w?y:o(w)<w?m:n(w)<w?a(w)<w?g:k:r(w)<w?D:b)(w)}return f.invert=function(w){return new Date(h(w))},f.domain=function(w){return arguments.length?c(Array.from(w,cm)):c().map(lm)},f.ticks=function(w){var F=c();return t(F[0],F[F.length-1],w??10)},f.tickFormat=function(w,F){return F==null?N:u(F)},f.nice=function(w){var F=c();return(!w||typeof w.range!="function")&&(w=e(F[0],F[F.length-1],w??10)),w?c(Ua(F,w)):f},f.copy=function(){return kn(f,il(t,e,r,n,a,o,i,s,l,u))},f}function Dr(){return ee.apply(il(Va,qa,bt,ae,It,Nt,Ue,Le,Ht,dt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function j(t){return function(){return t}}var Qa=Math.abs,ft=Math.atan2,oe=Math.cos,sl=Math.max,In=Math.min,Et=Math.sin,Me=Math.sqrt,wt=1e-12,qe=Math.PI,Nr=qe/2,Be=2*qe;function ul(t){return t>1?0:t<-1?qe:Math.acos(t)}function ja(t){return t>=1?Nr:t<=-1?-Nr:Math.asin(t)}function Rn(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new xe(e)}function fm(t){return t.innerRadius}function hm(t){return t.outerRadius}function pm(t){return t.startAngle}function mm(t){return t.endAngle}function dm(t){return t&&t.padAngle}function gm(t,e,r,n,a,o,i,s){var l=r-t,u=n-e,f=i-a,h=s-o,c=h*l-f*u;if(!(c*c<wt))return c=(f*(e-o)-h*(t-a))/c,[t+c*l,e+c*u]}function En(t,e,r,n,a,o,i){var s=t-r,l=e-n,u=(i?o:-o)/Me(s*s+l*l),f=u*l,h=-u*s,c=t+f,p=e+h,x=r+f,y=n+h,m=(c+x)/2,g=(p+y)/2,k=x-c,D=y-p,b=k*k+D*D,N=a-o,w=c*y-x*p,F=(D<0?-1:1)*Me(sl(0,N*N*b-w*w)),O=(w*D-k*F)/b,I=(-w*k-D*F)/b,$=(w*D+k*F)/b,_=(-w*k+D*F)/b,T=O-m,M=I-g,d=$-m,A=_-g;return T*T+M*M>d*d+A*A&&(O=$,I=_),{cx:O,cy:I,x01:-f,y01:-h,x11:O*(a/N-1),y11:I*(a/N-1)}}function Ja(){var t=fm,e=hm,r=j(0),n=null,a=pm,o=mm,i=dm,s=null,l=Rn(u);function u(){var f,h,c=+t.apply(this,arguments),p=+e.apply(this,arguments),x=a.apply(this,arguments)-Nr,y=o.apply(this,arguments)-Nr,m=Qa(y-x),g=y>x;if(s||(s=f=l()),p<c&&(h=p,p=c,c=h),!(p>wt))s.moveTo(0,0);else if(m>Be-wt)s.moveTo(p*oe(x),p*Et(x)),s.arc(0,0,p,x,y,!g),c>wt&&(s.moveTo(c*oe(y),c*Et(y)),s.arc(0,0,c,y,x,g));else{var k=x,D=y,b=x,N=y,w=m,F=m,O=i.apply(this,arguments)/2,I=O>wt&&(n?+n.apply(this,arguments):Me(c*c+p*p)),$=In(Qa(p-c)/2,+r.apply(this,arguments)),_=$,T=$,M,d;if(I>wt){var A=ja(I/c*Et(O)),C=ja(I/p*Et(O));(w-=A*2)>wt?(A*=g?1:-1,b+=A,N-=A):(w=0,b=N=(x+y)/2),(F-=C*2)>wt?(C*=g?1:-1,k+=C,D-=C):(F=0,k=D=(x+y)/2)}var R=p*oe(k),z=p*Et(k),L=c*oe(N),H=c*Et(N);if($>wt){var V=p*oe(D),B=p*Et(D),ht=c*oe(b),J=c*Et(b),K;if(m<qe)if(K=gm(R,z,ht,J,V,B,L,H)){var gt=R-K[0],ut=z-K[1],xt=V-K[0],E=B-K[1],U=1/Et(ul((gt*xt+ut*E)/(Me(gt*gt+ut*ut)*Me(xt*xt+E*E)))/2),Y=Me(K[0]*K[0]+K[1]*K[1]);_=In($,(c-Y)/(U-1)),T=In($,(p-Y)/(U+1))}else _=T=0}F>wt?T>wt?(M=En(ht,J,R,z,p,T,g),d=En(V,B,L,H,p,T,g),s.moveTo(M.cx+M.x01,M.cy+M.y01),T<$?s.arc(M.cx,M.cy,T,ft(M.y01,M.x01),ft(d.y01,d.x01),!g):(s.arc(M.cx,M.cy,T,ft(M.y01,M.x01),ft(M.y11,M.x11),!g),s.arc(0,0,p,ft(M.cy+M.y11,M.cx+M.x11),ft(d.cy+d.y11,d.cx+d.x11),!g),s.arc(d.cx,d.cy,T,ft(d.y11,d.x11),ft(d.y01,d.x01),!g))):(s.moveTo(R,z),s.arc(0,0,p,k,D,!g)):s.moveTo(R,z),!(c>wt)||!(w>wt)?s.lineTo(L,H):_>wt?(M=En(L,H,V,B,c,-_,g),d=En(R,z,ht,J,c,-_,g),s.lineTo(M.cx+M.x01,M.cy+M.y01),_<$?s.arc(M.cx,M.cy,_,ft(M.y01,M.x01),ft(d.y01,d.x01),!g):(s.arc(M.cx,M.cy,_,ft(M.y01,M.x01),ft(M.y11,M.x11),!g),s.arc(0,0,c,ft(M.cy+M.y11,M.cx+M.x11),ft(d.cy+d.y11,d.cx+d.x11),g),s.arc(d.cx,d.cy,_,ft(d.y11,d.x11),ft(d.y01,d.x01),!g))):s.arc(0,0,c,N,b,g)}if(s.closePath(),f)return s=null,f+""||null}return u.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-qe/2;return[oe(h)*f,Et(h)*f]},u.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:j(+f),u):t},u.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:j(+f),u):e},u.cornerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:j(+f),u):r},u.padRadius=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:j(+f),u):n},u.startAngle=function(f){return arguments.length?(a=typeof f=="function"?f:j(+f),u):a},u.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:j(+f),u):o},u.padAngle=function(f){return arguments.length?(i=typeof f=="function"?f:j(+f),u):i},u.context=function(f){return arguments.length?(s=f??null,u):s},u}var kw=Array.prototype.slice;function On(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ll(t){this._context=t}ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function cl(t){return new ll(t)}function fl(t){return t[0]}function hl(t){return t[1]}function We(t,e){var r=j(!0),n=null,a=cl,o=null,i=Rn(s);t=typeof t=="function"?t:t===void 0?fl:j(t),e=typeof e=="function"?e:e===void 0?hl:j(e);function s(l){var u,f=(l=On(l)).length,h,c=!1,p;for(n==null&&(o=a(p=i())),u=0;u<=f;++u)!(u<f&&r(h=l[u],u,l))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,u,l),+e(h,u,l));if(p)return o=null,p+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:j(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:j(+l),s):e},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:j(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(o=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=o=null:o=a(n=l),s):n},s}function pl(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function ml(t){return t}function Ka(){var t=ml,e=pl,r=null,n=j(0),a=j(Be),o=j(0);function i(s){var l,u=(s=On(s)).length,f,h,c=0,p=new Array(u),x=new Array(u),y=+n.apply(this,arguments),m=Math.min(Be,Math.max(-Be,a.apply(this,arguments)-y)),g,k=Math.min(Math.abs(m)/u,o.apply(this,arguments)),D=k*(m<0?-1:1),b;for(l=0;l<u;++l)(b=x[p[l]=l]=+t(s[l],l,s))>0&&(c+=b);for(e!=null?p.sort(function(N,w){return e(x[N],x[w])}):r!=null&&p.sort(function(N,w){return r(s[N],s[w])}),l=0,h=c?(m-u*D)/c:0;l<u;++l,y=g)f=p[l],b=x[f],g=y+(b>0?b*h:0)+D,x[f]={data:s[f],index:l,value:b,startAngle:y,endAngle:g,padAngle:k};return x}return i.value=function(s){return arguments.length?(t=typeof s=="function"?s:j(+s),i):t},i.sortValues=function(s){return arguments.length?(e=s,r=null,i):e},i.sort=function(s){return arguments.length?(r=s,e=null,i):r},i.startAngle=function(s){return arguments.length?(n=typeof s=="function"?s:j(+s),i):n},i.endAngle=function(s){return arguments.length?(a=typeof s=="function"?s:j(+s),i):a},i.padAngle=function(s){return arguments.length?(o=typeof s=="function"?s:j(+s),i):o},i}var Ir=t=>()=>t;function to(t,{sourceEvent:e,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Ot(t,e,r){this.k=t,this.x=e,this.y=r}Ot.prototype={constructor:Ot,scale:function(t){return t===1?this:new Ot(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ot(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rr=new Ot(1,0,0);eo.prototype=Ot.prototype;function eo(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Rr;return t.__zoom}function $n(t){t.stopImmediatePropagation()}function Ze(t){t.preventDefault(),t.stopImmediatePropagation()}function xm(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ym(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function dl(){return this.__zoom||Rr}function vm(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function _m(){return navigator.maxTouchPoints||"ontouchstart"in this}function bm(t,e,r){var n=t.invertX(e[0][0])-r[0][0],a=t.invertX(e[1][0])-r[1][0],o=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function ro(){var t=xm,e=ym,r=bm,n=vm,a=_m,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=xa,u=rr("start","zoom","end"),f,h,c,p=500,x=150,y=0,m=10;function g(d){d.property("__zoom",dl).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",$).filter(a).on("touchstart.zoom",_).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(d,A,C,R){var z=d.selection?d.selection():d;z.property("__zoom",dl),d!==z?N(d,A,C,R):z.interrupt().each(function(){w(this,arguments).event(R).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},g.scaleBy=function(d,A,C,R){g.scaleTo(d,function(){var z=this.__zoom.k,L=typeof A=="function"?A.apply(this,arguments):A;return z*L},C,R)},g.scaleTo=function(d,A,C,R){g.transform(d,function(){var z=e.apply(this,arguments),L=this.__zoom,H=C==null?b(z):typeof C=="function"?C.apply(this,arguments):C,V=L.invert(H),B=typeof A=="function"?A.apply(this,arguments):A;return r(D(k(L,B),H,V),z,i)},C,R)},g.translateBy=function(d,A,C,R){g.transform(d,function(){return r(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof C=="function"?C.apply(this,arguments):C),e.apply(this,arguments),i)},null,R)},g.translateTo=function(d,A,C,R,z){g.transform(d,function(){var L=e.apply(this,arguments),H=this.__zoom,V=R==null?b(L):typeof R=="function"?R.apply(this,arguments):R;return r(Rr.translate(V[0],V[1]).scale(H.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof C=="function"?-C.apply(this,arguments):-C),L,i)},R,z)};function k(d,A){return A=Math.max(o[0],Math.min(o[1],A)),A===d.k?d:new Ot(A,d.x,d.y)}function D(d,A,C){var R=A[0]-C[0]*d.k,z=A[1]-C[1]*d.k;return R===d.x&&z===d.y?d:new Ot(d.k,R,z)}function b(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function N(d,A,C,R){d.on("start.zoom",function(){w(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).event(R).end()}).tween("zoom",function(){var z=this,L=arguments,H=w(z,L).event(R),V=e.apply(z,L),B=C==null?b(V):typeof C=="function"?C.apply(z,L):C,ht=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),J=z.__zoom,K=typeof A=="function"?A.apply(z,L):A,gt=l(J.invert(B).concat(ht/J.k),K.invert(B).concat(ht/K.k));return function(ut){if(ut===1)ut=K;else{var xt=gt(ut),E=ht/xt[2];ut=new Ot(E,B[0]-xt[0]*E,B[1]-xt[1]*E)}H.zoom(null,ut)}})}function w(d,A,C){return!C&&d.__zooming||new F(d,A)}function F(d,A){this.that=d,this.args=A,this.active=0,this.sourceEvent=null,this.extent=e.apply(d,A),this.taps=0}F.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,A){return this.mouse&&d!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var A=W(this.that).datum();u.call(d,this.that,new to(d,{sourceEvent:this.sourceEvent,target:g,type:d,transform:this.that.__zoom,dispatch:u}),A)}};function O(d,...A){if(!t.apply(this,arguments))return;var C=w(this,A).event(d),R=this.__zoom,z=Math.max(o[0],Math.min(o[1],R.k*Math.pow(2,n.apply(this,arguments)))),L=qt(d);if(C.wheel)(C.mouse[0][0]!==L[0]||C.mouse[0][1]!==L[1])&&(C.mouse[1]=R.invert(C.mouse[0]=L)),clearTimeout(C.wheel);else{if(R.k===z)return;C.mouse=[L,R.invert(L)],Jt(this),C.start()}Ze(d),C.wheel=setTimeout(H,x),C.zoom("mouse",r(D(k(R,z),C.mouse[0],C.mouse[1]),C.extent,i));function H(){C.wheel=null,C.end()}}function I(d,...A){if(c||!t.apply(this,arguments))return;var C=d.currentTarget,R=w(this,A,!0).event(d),z=W(d.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",ht,!0),L=qt(d,C),H=d.clientX,V=d.clientY;ia(d.view),$n(d),R.mouse=[L,this.__zoom.invert(L)],Jt(this),R.start();function B(J){if(Ze(J),!R.moved){var K=J.clientX-H,gt=J.clientY-V;R.moved=K*K+gt*gt>y}R.event(J).zoom("mouse",r(D(R.that.__zoom,R.mouse[0]=qt(J,C),R.mouse[1]),R.extent,i))}function ht(J){z.on("mousemove.zoom mouseup.zoom",null),sa(J.view,R.moved),Ze(J),R.event(J).end()}}function $(d,...A){if(t.apply(this,arguments)){var C=this.__zoom,R=qt(d.changedTouches?d.changedTouches[0]:d,this),z=C.invert(R),L=C.k*(d.shiftKey?.5:2),H=r(D(k(C,L),R,z),e.apply(this,A),i);Ze(d),s>0?W(this).transition().duration(s).call(N,H,R,d):W(this).call(g.transform,H,R,d)}}function _(d,...A){if(t.apply(this,arguments)){var C=d.touches,R=C.length,z=w(this,A,d.changedTouches.length===R).event(d),L,H,V,B;for($n(d),H=0;H<R;++H)V=C[H],B=qt(V,this),B=[B,this.__zoom.invert(B),V.identifier],z.touch0?!z.touch1&&z.touch0[2]!==B[2]&&(z.touch1=B,z.taps=0):(z.touch0=B,L=!0,z.taps=1+!!f);f&&(f=clearTimeout(f)),L&&(z.taps<2&&(h=B[0],f=setTimeout(function(){f=null},p)),Jt(this),z.start())}}function T(d,...A){if(this.__zooming){var C=w(this,A).event(d),R=d.changedTouches,z=R.length,L,H,V,B;for(Ze(d),L=0;L<z;++L)H=R[L],V=qt(H,this),C.touch0&&C.touch0[2]===H.identifier?C.touch0[0]=V:C.touch1&&C.touch1[2]===H.identifier&&(C.touch1[0]=V);if(H=C.that.__zoom,C.touch1){var ht=C.touch0[0],J=C.touch0[1],K=C.touch1[0],gt=C.touch1[1],ut=(ut=K[0]-ht[0])*ut+(ut=K[1]-ht[1])*ut,xt=(xt=gt[0]-J[0])*xt+(xt=gt[1]-J[1])*xt;H=k(H,Math.sqrt(ut/xt)),V=[(ht[0]+K[0])/2,(ht[1]+K[1])/2],B=[(J[0]+gt[0])/2,(J[1]+gt[1])/2]}else if(C.touch0)V=C.touch0[0],B=C.touch0[1];else return;C.zoom("touch",r(D(H,V,B),C.extent,i))}}function M(d,...A){if(this.__zooming){var C=w(this,A).event(d),R=d.changedTouches,z=R.length,L,H;for($n(d),c&&clearTimeout(c),c=setTimeout(function(){c=null},p),L=0;L<z;++L)H=R[L],C.touch0&&C.touch0[2]===H.identifier?delete C.touch0:C.touch1&&C.touch1[2]===H.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(H=qt(H,this),Math.hypot(h[0]-H[0],h[1]-H[1])<m)){var V=W(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return g.wheelDelta=function(d){return arguments.length?(n=typeof d=="function"?d:Ir(+d),g):n},g.filter=function(d){return arguments.length?(t=typeof d=="function"?d:Ir(!!d),g):t},g.touchable=function(d){return arguments.length?(a=typeof d=="function"?d:Ir(!!d),g):a},g.extent=function(d){return arguments.length?(e=typeof d=="function"?d:Ir([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),g):e},g.scaleExtent=function(d){return arguments.length?(o[0]=+d[0],o[1]=+d[1],g):[o[0],o[1]]},g.translateExtent=function(d){return arguments.length?(i[0][0]=+d[0][0],i[1][0]=+d[1][0],i[0][1]=+d[0][1],i[1][1]=+d[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(d){return arguments.length?(r=d,g):r},g.duration=function(d){return arguments.length?(s=+d,g):s},g.interpolate=function(d){return arguments.length?(l=d,g):l},g.on=function(){var d=u.on.apply(u,arguments);return d===u?g:d},g.clickDistance=function(d){return arguments.length?(y=(d=+d)*d,g):Math.sqrt(y)},g.tapDistance=function(d){return arguments.length?(m=+d,g):m},g}var X=(()=>{class t{static{this.svgNS="http://www.w3.org/2000/svg"}static get bodyFont(){if(!this._bodyFont){let r=getComputedStyle(document.body);this._bodyFont=`${r.fontSize} ${r.fontFamily}`}return this._bodyFont}static chartSize(r){if(!r)return{width:0,height:0};let n=r.parentNode;if(!n)return{width:0,height:0};let a=getComputedStyle(n);return{height:Math.round(n.clientHeight-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)),width:Math.round(n.clientWidth-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight))}}static xScale(r,n,a=!0,o=!1){let i;return o?i=Dr().domain(ce(r)):i=At().domain(ce(r)),a?i.rangeRound([0,n]):i.range([0,n]),i}static yScale(r,n,a=!0,o=!1){let i;return o?i=Dr().domain([0,Math.max(...r)]):i=At().domain([0,Math.max(...r)]),a?i.rangeRound([n,0]):i.range([n,0]),i}static colorScale(r,n){return n instanceof Array?At().domain(ce(r)).range([n[0],n[1]]):At().domain(ce(r)).rangeRound([0,n-1])}static arcTween(r,n,a){let o=Bt({startAngle:r.startAngle,endAngle:r.endAngle},{startAngle:n.startAngle,endAngle:n.endAngle});return i=>a(o(i))}static transitionsComplete(r,n){let a=0;r.each(()=>{a++}).on("end",()=>{a--,a===0&&n()})}static convertData(r,n){return r.map(a=>{let o=typeof a[n.value.toString()]=="number"?a[n.value.toString()]:a[n.value.toString()]instanceof Date?a[n.value.toString()].valueOf():parseInt(a[n.value.toString()],10);return{id:a[n.id],value:o,category:at(n.category)?a[n.category]:void 0,label:at(n.label)?a[n.label]:void 0,color:at(n.color)?a[n.color]:void 0}})}static getTextWidth(r,n=this.bodyFont){if(!at(r)||!r.length)return 0;let o=document.createElement("canvas").getContext("2d");return o.font=n,Math.ceil(o.measureText(r).width)}static getMaxTextWidth(r,n){if(!at(r)||!r.length)return 0;let a=0;return r.forEach(o=>{let i=this.getTextWidth(o,n);i>a&&(a=i)}),a}static trimText(r,n,a=!0,o=this.bodyFont){if(!at(r)||!r.length)return r;let s=document.createElement("canvas").getContext("2d");s.font=o;let l=Math.ceil(s.measureText(r).width);for(;l>n;)a?r=`${r.substring(0,r.length-4)}...`:r=r.slice(0,-1),l=Math.ceil(s.measureText(r).width);return r}static wrapText(r,n,a=this.bodyFont){if(!at(r)||!r.length)return r;let o=[],s=document.createElement("canvas").getContext("2d");s.font=a;let l=Math.ceil(s.measureText(r).width);if(l<n)return[r];let u="";for(let f of r)u+=f,l=Math.ceil(s.measureText(u).width),l>n&&(o.push(u.slice(0,-1)),u=f);return u.length&&o.push(u),o}}return t})();var Pn=class{static buildBarChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.valueTicks=e.valueTicks||5;let a=0,o=Math.max(...e.data.map(b=>b.value))||0,i=W(e.container),s=e.palette&&e.palette.length?X.colorScale(e.data.map(b=>b.value),e.palette.length===2?e.palette:e.palette.length):void 0,l=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,u=yt(e.valueTickValues)?e.valueTickValues:e.data.map(b=>at(l)?l(b.value):b.value.toString()),f=at(e.barPadding)?e.barPadding:20,h=at(e.barWidth)?e.barWidth:20,c={top:16,bottom:16,left:16+X.getMaxTextWidth(u,`${v.strings.FONT_SIZE_SMALL} ${v.strings.FONT_FAMILY}`),right:16},p=X.chartSize(e.container);p.width=e.data.length*(h+f);let x=X.yScale(e.data.map(b=>b.value),p.height-c.top-c.bottom).nice(),y=er(x).ticks(e.valueTicks).tickSize(-p.width);if(yt(e.valueTickValues)){let b=At().domain([0,e.valueTickValues.length-1]).range([a,o]);e.valueTicks=[],e.valueTickValues?.forEach((N,w)=>{e.valueTicks.push(b(w))}),y.tickFormat((N,w)=>e.valueTickValues[w]||"")}yt(e.valueTicks)?y.tickValues(e.valueTicks):y.ticks(e.valueTicks),e.valueFormat?.length&&y.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&y.tickFormat(dt(e.valueDateFormat));let m=i.select(`g.${v.classes.CHART_ROOT}`);if(m.node()||(m=i.append("g").classed(v.classes.CHART_ROOT,!0),m.append("g").classed(v.classes.CHART_YAXIS,!0),m.append("g").classed(v.classes.CHART_XAXIS,!0),m.append("g").classed(`${v.classes.CHART_PREFIX}__chart`,!0).classed(`${v.classes.CHART_PREFIX}__bar`,!0)),i.attr("width",p.width+c.left),i.attr("height",p.height),i.select(`g.${v.classes.CHART_YAXIS}`).attr("transform",`translate(${c.left}, ${c.top})`).call(y),i.select(`g.${v.classes.CHART_XAXIS}`).attr("transform",`translate(${c.left}, ${p.height-c.bottom})`),yt(e.categoryTickValues)&&e.categoryTickValues?.length){let b=tr(br().domain(e.categoryTickValues).range([0,p.width]));i.select(`g.${v.classes.CHART_XAXIS}`).call(b)}let g=m.select(`g.${v.classes.CHART_PREFIX}__bar`);g.attr("transform",`translate(${c.left}, -${c.bottom-c.top})`);let k=g.selectAll("rect").data(e.data,b=>b.id);k.exit().transition().duration(v.numbers.TRANSITION_DURATION).attr("y",b=>p.height-c.top).attr("height",0),k.exit().transition().delay(v.numbers.TRANSITION_DURATION).remove();let D=k.enter();D.append("rect").attr("x",(b,N)=>N*(h+f)+f/2).attr("y",p.height-c.top).attr("width",b=>h).attr("height",0).merge(k).attr("id",b=>`${v.classes.CHART_PREFIX}__node-${b.id}`).transition().call(X.transitionsComplete,()=>{r()}).duration(v.numbers.TRANSITION_DURATION).attr("y",b=>b.value?x(b.value)+c.bottom:0).attr("height",b=>b.value?p.height-c.top-c.bottom-x(b.value):0).attr("fill",b=>b.color?b.color:s&&b.value&&e.palette?e.palette.length===2?s(b.value):e.palette[s(b.value)]:"#fff"),e.selectedCallback&&D.selectAll("rect").on("click",(b,N)=>e.selectedCallback(N,b.target)),e.hoverCallback&&(D.selectAll("rect").on("mouseenter",(b,N)=>e.hoverCallback(!0,N,b.target)),D.selectAll("rect").on("mouseleave",(b,N)=>e.hoverCallback(!1,N,b.target)))})}};var Fn=class{static buildBubbleChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=W(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(m=>m.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=10,l=X.chartSize(e.container),u=zt({children:e.data}).sum(m=>m.value).sort((m,g)=>g.value-m.value);Ra().size([Math.min(l.width,l.height),Math.min(l.width,l.height)])(u);let h=a.select(`g.${v.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(v.classes.CHART_ROOT,!0),h.append("g").classed(`${v.classes.CHART_PREFIX}__chart`,!0).classed(`${v.classes.CHART_PREFIX}__bubble`,!0)),a.attr("width",l.width),a.attr("height",l.height);let p=h.select(`g.${v.classes.CHART_PREFIX}__bubble`).selectAll("g").data(u.leaves(),m=>m.data.id);p.exit().select("text").remove(),p.exit().select("circle").transition().duration(v.numbers.TRANSITION_DURATION).attr("r",0),p.exit().transition().delay(v.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("circle"),x.append("clipPath").attr("id",m=>`${v.classes.CHART_CLIP}-${m.data.id}`).append("circle"),x.append("text").classed(v.classes.CHART_TEXT,!0).attr("clip-path",m=>`url(#${v.classes.CHART_CLIP}-${m.data.id})`).style("text-anchor","middle"),e.selectedCallback&&x.on("click",(m,g)=>e.selectedCallback(g.data,m.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(m,g)=>e.hoverCallback(!0,g.data,m.target)),x.on("mouseleave",(m,g)=>e.hoverCallback(!1,g.data,m.target)));let y=x.merge(p);y.select("text").style("display","none").attr("y",".35em").text(m=>i?i(m.data.value):m.data.value),y.transition().duration(v.numbers.TRANSITION_DURATION).attr("transform",m=>"translate("+m.x+","+m.y+")"),y.select("g > circle").attr("fill",m=>m.data.color?m.data.color:o&&m.value&&e.palette?e.palette.length===2?o(m.value):e.palette[o(m.value)]:"#fff").attr("id",m=>`${v.classes.CHART_PREFIX}__node-${m.data.id}`).transition().call(X.transitionsComplete,()=>{y.select("clipPath > circle").attr("r",m=>m.r>s/2?m.r-s/2:0),y.select("text").style("display",null),r()}).duration(v.numbers.TRANSITION_DURATION).attr("r",m=>m.r)})}};function gl(t,e){return ot(t,e?.in).getDay()===0}function xl(t,e){let r,n=e?.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=Ie.bind(null,a));let o=ot(a,n);(!r||r<o||isNaN(+o))&&(r=o)}),Ie(n,r||NaN)}function yl(t,e){let r,n=e?.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=Ie.bind(null,a));let o=ot(a,n);(!r||r>o||isNaN(+o))&&(r=o)}),Ie(n,r||NaN)}function zn(t,e){let r=+ot(t)-+ot(e);return r<0?-1:r>0?1:r}function vl(t,e,r){let[n,a]=Re(r?.in,t,e),o=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return o*12+i}function Hn(t,e,r){let[n,a]=Re(r?.in,t,e),o=_l(n,a),i=Math.abs(Yo(n,a));n.setDate(n.getDate()-o*i);let s=+(_l(n,a)===-o),l=o*(i-s);return l===0?0:l}function _l(t,e){let r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function bl(t){return e=>{let n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function wl(t,e){let r=ot(t,e?.in);return r.setHours(23,59,59,999),r}function Tl(t,e){let r=ot(t,e?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Cl(t,e){let r=ot(t,e?.in);return+wl(r,e)==+Tl(r,e)}function Ml(t,e,r){let[n,a,o]=Re(r?.in,t,t,e),i=zn(a,o),s=Math.abs(vl(a,o));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*s);let l=zn(a,o)===-i;Cl(n)&&s===1&&zn(n,o)===1&&(l=!1);let u=i*(s-+l);return u===0?0:u}function kl(t,e,r){let n=Hn(t,e,r)/7;return bl(r?.roundingMethod)(n)}function Ln(t,e){return ot(t,e?.in).getDay()}function Al(t,e){return ot(t,e?.in).getDay()===1}function Sl(t,e,r){return Lr(t,-e,r)}function Dl(t,e,r){let n=e-Ln(t,r);return n<=0&&(n+=7),Lr(t,n,r)}function Nl(t,e){return Dl(t,0,e)}function Il(t,e,r){let n=Ln(t,r)-e;return n<=0&&(n+=7),Sl(t,n,r)}function Rl(t,e){return Il(t,1,e)}var Un=class{static buildGanttChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=yl(e.data.map(I=>I.startDate));Al(a)||(a=Rl(a));let o=xl(e.data.map(I=>I.endDate));gl(o)||(o=Nl(o));let i=W(e.container),s,l=16,u=40,f={top:16,bottom:16,left:16,right:16},h=X.chartSize(e.container);h.height=e.data.length*(u+l);let c=8,p={x:8,y:16},x=ae,y="",m=0;switch(e.categoryTimeSpan){case"year":x=bt,y="%Y";break;case"week":x=It,y="%m/%d",m=kl(o,a);break;case"day":x=Nt,y="%m/%d",m=Hn(o,a);break;default:y="%m/%y",m=Ml(o,a);break}h.width<m*48&&(h.width=m*48);let g=X.xScale([a,o],h.width-f.left-f.right,!1,!0).nice(),k=ea(g).ticks(x,y).tickSize(-h.height),D=i.select(`g.${v.classes.CHART_ROOT}`);D.node()||(D=i.append("g").classed(v.classes.CHART_ROOT,!0),D.append("g").classed(v.classes.CHART_XAXIS,!0),D.append("g").classed(`${v.classes.CHART_PREFIX}__gantt`,!0),s=W(e.container.parentElement).append("div").classed(`${v.classes.CHART_POPOVER}`,!0)),i.attr("width",h.width),i.attr("height",h.height+f.bottom),i.select(`g.${v.classes.CHART_XAXIS}`).attr("transform",`translate(${f.left}, ${f.top})`).call(k);let b=D.select(`g.${v.classes.CHART_PREFIX}__gantt`);b.attr("transform",`translate(${f.left}, -${f.bottom-f.top})`);let N=b.selectAll("g").data(e.data,I=>I.id);N.exit().transition().duration(v.numbers.TRANSITION_DURATION).attr("width",0),N.exit().transition().delay(v.numbers.TRANSITION_DURATION).remove();let w=N.enter().append("g").attr("id",I=>`${v.classes.CHART_PREFIX}__node-${I.id}`).on("mouseenter",(I,$)=>{let _=`
            <span style="grid-column: 1 / -1; font-weight: 700">${$.label}</span>
            <span>Start</span>
            <span style="justify-self: end">${Zn($.startDate,"MM/dd/yyyy")}</span>
            <span>End</span>
            <span style="justify-self: end">${Zn($.endDate,"MM/dd/yyyy")}</span>
            <span>Progress</span>
            <span style="justify-self: end">${$.progress||0}%</span>
          `;$.description?.length&&(_+=`<span style="grid-column: 1 / -1; font-size: .75rem;">${$.description}</span>`),s.html(_).style("top",`${I.layerY}px`).style("left",`${I.layerX}px`).style("visibility","visible"),e.hoverCallback&&e.hoverCallback(!0,$,I.target)}).on("mouseleave",(I,$)=>{s.style("visibility",null),e.hoverCallback&&e.hoverCallback(!1,$,I.target)});e.selectedCallback&&w.on("click",(I,$)=>e.selectedCallback($,I.target.parentElement));let F=w.append("defs").append("linearGradient").attr("id",(I,$)=>`meter-gradient--${$}`);F.append("stop").attr("offset","0%").attr("stop-color",v.chartPalette.indigoA200),F.append("stop").attr("offset",I=>`${I.progress||0}%`).attr("stop-color",v.chartPalette.indigoA200),F.append("stop").attr("offset",I=>`${I.progress||0}%`).attr("stop-color",v.chartPalette.indigo200),F.append("stop").attr("offset","100%").attr("stop-color",v.chartPalette.indigo200),w.append("rect").classed(v.classes.CHART_NODE,!0).attr("width",0).attr("height",u).attr("rx",4).style("stroke",I=>I.color?.length?I.color:v.chartTheme.outlineMedium).style("fill",v.chartTheme.surfaceDim),w.append("text").classed(v.classes.CHART_TEXT,!0).attr("x",p.x).attr("y",p.y).style("font-size",".85rem").style("stroke",v.chartTheme.surfaceDim).style("stroke-width",".5rem").style("fill",v.chartTheme.textHigh).style("paint-order","stroke").style("stroke-linejoin","round").style("display","none"),w.append("rect").classed(v.classes.CHART_METER,!0).attr("x",p.x).attr("y",u-c-p.x).attr("width",0).attr("height",c).style("fill",(I,$)=>`url(#meter-gradient--${$})`);let O=w.merge(N);O.attr("transform",(I,$)=>`translate(${g(I.startDate)}, ${$*(u+l)+f.top+l/2})`),O.select(`g > .${v.classes.CHART_NODE}`).transition().duration(v.numbers.TRANSITION_DURATION).attr("width",I=>{let $=g(I.endDate)-g(I.startDate);return $>0?$:0}),O.select(`g > .${v.classes.CHART_METER}`).transition().duration(v.numbers.TRANSITION_DURATION).attr("width",I=>{let $=g(I.endDate)-g(I.startDate)-p.x*2;return $>0?$:0}),O.select("g > text").transition().call(X.transitionsComplete,()=>{O.select("g > text").style("display",null),r()}).duration(v.numbers.TRANSITION_DURATION).text((I,$,_)=>`${I.label}`)})}};function El(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?El(Object(r),!0).forEach(function(n){Tm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):El(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Er(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Er=function(e){return typeof e}:Er=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(t)}function Tm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xn(){return Xn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xn.apply(this,arguments)}function Cm(t,e){if(t){if(typeof t=="string")return Ol(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ol(t,e)}}function Ol(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fl(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Cm(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,i=!1,s;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){i=!0,s=l},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(i)throw s}}}}function Mm(t,e){var r=[],n=[];function a(o,i){if(o.length===1)r.push(o[0]),n.push(o[0]);else{for(var s=Array(o.length-1),l=0;l<s.length;l++)l===0&&r.push(o[0]),l===s.length-1&&n.push(o[l+1]),s[l]=[(1-i)*o[l][0]+i*o[l+1][0],(1-i)*o[l][1]+i*o[l+1][1]];a(s,i)}}return t.length&&a(t,e),{left:r,right:n.reverse()}}function km(t){var e={};return t.length===4&&(e.x2=t[2][0],e.y2=t[2][1]),t.length>=3&&(e.x1=t[1][0],e.y1=t[1][1]),e.x=t[t.length-1][0],e.y=t[t.length-1][1],t.length===4?e.type="C":t.length===3?e.type="Q":e.type="L",e}function Am(t,e){e=e||2;for(var r=[],n=t,a=1/e,o=0;o<e-1;o++){var i=a/(1-a*o),s=Mm(n,i);r.push(s.left),n=s.right}return r.push(n),r}function Sm(t,e,r){var n=[[t.x,t.y]];return e.x1!=null&&n.push([e.x1,e.y1]),e.x2!=null&&n.push([e.x2,e.y2]),n.push([e.x,e.y]),Am(n,r).map(km)}var Dm=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,Ge={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(Ge).forEach(function(t){Ge[t.toLowerCase()]=Ge[t]});function no(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=e;return r}function Nm(t){return"".concat(t.type).concat(Ge[t.type].map(function(e){return t[e]}).join(","))}function Im(t,e){var r={x1:"x",y1:"y",x2:"x",y2:"y"},n=["xAxisRotation","largeArcFlag","sweepFlag"];if(t.type!==e.type&&e.type.toUpperCase()!=="M"){var a={};Object.keys(e).forEach(function(o){var i=e[o],s=t[o];s===void 0&&(n.includes(o)?s=i:(s===void 0&&r[o]&&(s=t[r[o]]),s===void 0&&(s=0))),a[o]=s}),a.type=e.type,t=a}return t}function Rm(t,e,r){var n=[];if(e.type==="L"||e.type==="Q"||e.type==="C")n=n.concat(Sm(t,e,r));else{var a=Xn({},t);a.type==="M"&&(a.type="L"),n=n.concat(no(r-1).map(function(){return a})),n.push(e)}return n}function $l(t,e,r){var n=t.length-1,a=e.length-1,o=n/a,i=no(a).reduce(function(l,u,f){var h=Math.floor(o*f);if(r&&h<t.length-1&&r(t[h],t[h+1])){var c=o*f%1<.5;l[h]&&(c?h>0?h-=1:h<t.length-1&&(h+=1):h<t.length-1?h+=1:h>0&&(h-=1))}return l[h]=(l[h]||0)+1,l},[]),s=i.reduce(function(l,u,f){if(f===t.length-1){var h=no(u,Xn({},t[t.length-1]));return h[0].type==="M"&&h.forEach(function(c){c.type="L"}),l.concat(h)}return l.concat(Rm(t[f],t[f+1],u))},[]);return s.unshift(t[0]),s}function Pl(t){for(var e=(t||"").match(Dm)||[],r=[],n,a,o=0;o<e.length;++o)if(n=Ge[e[o]],n){a={type:e[o]};for(var i=0;i<n.length;++i)a[n[i]]=+e[o+i+1];o+=n.length,r.push(a)}return r}function Em(t,e,r){var n=t==null?[]:t.slice(),a=e==null?[]:e.slice(),o=Er(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return[]};var l=(n.length===0||n[n.length-1].type==="Z")&&(a.length===0||a[a.length-1].type==="Z");n.length>0&&n[n.length-1].type==="Z"&&n.pop(),a.length>0&&a[a.length-1].type==="Z"&&a.pop(),n.length?a.length||a.push(n[0]):n.push(a[0]);var u=Math.abs(a.length-n.length);u!==0&&(a.length>n.length?n=$l(n,a,i):a.length<n.length&&(a=$l(a,n,i))),n=n.map(function(h,c){return Im(h,a[c])});var f=n.map(function(h){return wm({},h)});return l&&(f.push({type:"Z"}),n.push({type:"Z"})),function(c){if(c===1&&s)return e??[];if(c===0)return n;for(var p=0;p<f.length;++p){var x=n[p],y=a[p],m=f[p],g=Fl(Ge[m.type]),k;try{for(g.s();!(k=g.n()).done;){var D=k.value;m[D]=(1-c)*x[D]+c*y[D],(D==="largeArcFlag"||D==="sweepFlag")&&(m[D]=Math.round(m[D]))}}catch(b){g.e(b)}finally{g.f()}}return f}}function Or(t,e,r){var n=Pl(t),a=Pl(e),o=Er(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return""};var l=Em(n,a,{excludeSegment:i,snapEndsToInput:s});return function(f){if(f===1&&s)return e??"";var h=l(f),c="",p=Fl(h),x;try{for(p.s();!(x=p.n()).done;){var y=x.value;c+=Nm(y)}}catch(m){p.e(m)}finally{p.f()}return c}}var Yn=class{static buildLineChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.categoryTicks=e.categoryTicks||10,e.valueTicks=e.valueTicks||5;let a=e.data.map(O=>O.data).reduce((O,I)=>O.concat(I),[]),o=a.map(O=>O.value),i=a.map(O=>parseFloat(O.category)).filter((O,I,$)=>$.indexOf(O)===I).sort((O,I)=>O-I),s=Math.min(...o)||0,l=Math.max(...o)||0,u=Math.min(...i)||0,f=Math.max(...i)||0,h=W(e.container),c=2,p={top:16,bottom:16,left:16+X.getTextWidth(l.toString(),`${v.strings.FONT_SIZE_SMALL} ${v.strings.FONT_FAMILY}`),right:16},x=X.chartSize(e.container),y=X.xScale([u,f],x.width-p.left-p.right),m=tr(y);if(yt(e.categoryTickValues)){let O=At().domain([0,e.categoryTickValues.length-1]).range([u,f]);e.categoryTicks=[],e.categoryTickValues?.forEach((I,$)=>{e.categoryTicks.push(O($))}),m.tickFormat((I,$)=>e.categoryTickValues[$]||"")}yt(e.categoryTicks)?m.tickValues(e.categoryTicks):m.ticks(e.categoryTicks),e.categoryFormat&&m.tickFormat(mt(e.categoryFormat)),e.categoryDateFormat&&m.tickFormat(dt(e.categoryDateFormat));let g=X.yScale([s,l],x.height-p.top-p.bottom),k=er(g).tickSize(-(x.width-p.left-p.right));if(yt(e.valueTickValues)){let O=At().domain([0,e.valueTickValues.length-1]).range([s,l]);e.valueTicks=[],e.valueTickValues?.forEach((I,$)=>{e.valueTicks.push(O($))}),k.tickFormat((I,$)=>e.valueTickValues[$]||"")}yt(e.valueTicks)?k.tickValues(e.valueTicks):k.ticks(e.valueTicks),e.valueFormat&&k.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&k.tickFormat(dt(e.valueDateFormat));let D=We().x(O=>y(O.category)).y(O=>g(O.value)),b=We().x(O=>y(O.category)).y(x.height-p.top),N=h.select(`g.${v.classes.CHART_ROOT}`);N.node()||(N=h.append("g").classed(v.classes.CHART_ROOT,!0),N.append("g").classed(v.classes.CHART_XAXIS,!0),yt(e.categoryTickValues)&&N.select(`g.${v.classes.CHART_XAXIS}`).classed(`${v.classes.CHART_PREFIX}__xaxis--align-boundry-ticks`,!0),N.append("g").classed(v.classes.CHART_YAXIS,!0),N.append("g").classed(`${v.classes.CHART_PREFIX}__line`,!0)),h.attr("width",x.width),h.attr("height",x.height),h.select(`g.${v.classes.CHART_XAXIS}`).attr("transform",`translate(${p.left}, ${x.height-p.bottom})`).call(m),h.select(`g.${v.classes.CHART_YAXIS}`).attr("transform",`translate(${p.left}, ${p.top})`).call(k);let w=N.select(`g.${v.classes.CHART_PREFIX}__line`);w.attr("transform",`translate(${p.left+c}, ${p.top})`),e.data.forEach((O,I)=>{let $=w.selectAll(`path.path-${O.id}`).data([O],T=>T.id);$.exit().remove(),$.enter().append("path").classed(`path-${O.id}`,!0).style("fill","none").style("stroke-linejoin","round").style("stroke-linecap","round").attr("d",T=>b(T.data)).merge($).attr("stroke",T=>T.color).transition().duration(v.numbers.TRANSITION_DURATION).call(X.transitionsComplete,()=>{I===e.data.length-1&&r()}).attrTween("d",(T,M,d)=>{let A=d[0].getAttribute("d"),C=D(T.data);return Or(A,C)})});let F=w.selectAll("path").nodes();if(F.length>e.data.length)for(let O=F.length;O>e.data.length;O--)F[O-1]?.remove()})}};var Qe=class{static buildPieChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=[],o=W(e.container),i=e.palette&&e.palette.length?X.colorScale(e.data.map(g=>g.value),e.palette.length===2?e.palette:e.palette.length):void 0,s=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,l=X.chartSize(e.container),u={outer:Math.min(l.width,l.height)/2,inner:0};(e.type==="donut"||e.type==="donut-meter")&&(u.inner=u.outer-u.outer*.35);let f=Ja().outerRadius(u.outer).innerRadius(u.inner),h=Ka().value(g=>g.value).sort(null),c=o.select(`g.${v.classes.CHART_ROOT}`);c.node()||(c=o.append("g").classed(v.classes.CHART_ROOT,!0),c.append("g").classed(`${v.classes.CHART_PREFIX}__${e.type}`,!0)),o.attr("width",l.width),o.attr("height",l.height);let p=c.select(`g.${v.classes.CHART_PREFIX}__${e.type}`);p.attr("transform",`translate(${u.outer}, ${u.outer})`),p.selectAll("g").select("path").each(g=>{a[g.data.id]={startAngle:g.startAngle,endAngle:g.endAngle}});let x=p.selectAll("g").data(h(e.data),g=>g.data.id);x.exit().select("path").transition().duration(v.numbers.TRANSITION_DURATION).attrTween("d",g=>X.arcTween(g,{startAngle:0,endAngle:0},f)),x.exit().transition().delay(v.numbers.TRANSITION_DURATION).remove();let y=x.enter().append("g");y.append("path"),e.selectedCallback&&y.on("click",(g,k)=>e.selectedCallback(k.data,g.target.parentElement)),e.hoverCallback&&(y.on("mouseenter",(g,k)=>e.hoverCallback(!0,k.data,g.target)),y.on("mouseleave",(g,k)=>e.hoverCallback(!1,k.data,g.target))),y.merge(x).select("g > path").attr("fill",g=>g.data.color?g.data.color:i&&g.value&&e.palette?e.palette.length===2?i(g.value):e.palette[i(g.value)]:"#fff").attr("id",g=>`${v.classes.CHART_PREFIX}__node-${g.data.id}`).transition().call(X.transitionsComplete,()=>{switch(e.type){case"donut-meter":if(!e.hideLabel){let g=p.select("."+v.classes.CHART_TEXT);g.node()||(g=p.append("text").style("fill",v.chartTheme.textHigh).style("text-anchor","middle").classed(v.classes.CHART_TEXT,!0),g.append("tspan").style("font-size","2rem").classed(v.classes.CHART_TEXT_VALUE,!0),g.append("tspan").attr("x",0).attr("y",0).attr("dy","1.25em").classed(v.classes.CHART_TEXT_LABEL,!0));let k="";e.centerValue?k=e.centerValue:s?k=s(e.data[0].value):k=e.data[0].value.toString(),g.select(`tspan.${v.classes.CHART_TEXT_VALUE}`).text(k),g.select(`tspan.${v.classes.CHART_TEXT_LABEL}`).text(at(e.data[0].label)?e.data[0].label:"");break}}r()}).duration(v.numbers.TRANSITION_DURATION).style("stroke","#fff").attrTween("d",g=>X.arcTween(a[g.data.id]||{startAngle:0,endAngle:0},g,f))})}};var zl=(()=>{class t{static{this.hasChildren=r=>r.data.children===!0||yt(r.data.children)&&r.data.children.length>0}static{this.getParentIds=r=>{let n=[],a=r.parent;for(;a;)n.push(a.data.id),a=a.parent;return n.reverse().slice(1)}}static{this.getParentDepths=r=>{let n=[],a=r.parent;for(;a;)n.push(a.depth),a=a.parent;return n.reverse().slice(1)}}static{this.nodeCenterHorizontal=(r,n,a=r.x)=>Math.round(a-n/2)}static buildTreeChart(r){return new Promise((n,a)=>{if(!r.container||r.container.tagName!=="svg"){a();return}let o=W(r.container),i={width:0,height:0},s=[],l=8,u="#212121",f={width:o.attr("width")?parseInt(o.attr("width"),10):0,height:o.attr("height")?parseInt(o.attr("height"),10):0},h=zt(r.data),p=$a().nodeSize([r.node.size.width+24,r.node.size.height+r.node.margin]).separation((_,T)=>_.parent===T.parent?1:1.25)(h),x=0,y=0;p.descendants().filter(_=>_.depth>0).forEach(_=>{if(!at(_.data.nodeId)){let T=this.getParentDepths(_),M=[];this.getParentIds(_).forEach((d,A)=>{M.push(`${T[A]}-${d}`)}),M.push(`${_.depth}-${_.data.id}`),_.data.nodeId=M.join("--")}_.y=(_.depth-1)*(r.node.size.height+r.node.margin),_.y>i.height&&(i.height=_.y),_.x>y?y=_.x:_.x<x&&(x=_.x)});let m=o.select(`g.${v.classes.CHART_ROOT}`);m.node()||(m=o.append("g").classed(v.classes.CHART_ROOT,!0),m.append("g").classed(`${v.classes.CHART_PREFIX}__tree`,!0));let g=m.node().getCTM().a;if(i.width=(Math.abs(x)+y+r.node.size.width)*g+l*2,i.height=(i.height+r.node.size.height)*g+l*2,f.width<i.width&&o.attr("width",i.width),f.height<i.height&&o.attr("height",i.height),r.zoomScale){let _=wo(o.node().parentElement,!0),T={left:0,top:0,x:0,y:0};o.style("cursor","grab"),o.call(ro().scaleExtent([r.zoomScale.min,r.zoomScale.max]).on("zoom",M=>{if(M.sourceEvent.type==="mousemove")_&&(_.scrollTop=T.top+(T.y-M.sourceEvent.clientY),_.scrollLeft=T.left+(T.x-M.sourceEvent.clientX));else if(M.sourceEvent.type==="wheel"){m.attr("transform",`scale(${M.transform.k},${M.transform.k})`);let d=m.node().getBBox();i.width=d.width*M.transform.k+l*2,i.height=d.height*M.transform.k+l*2,o.attr("width",i.width),o.attr("height",i.height)}}).on("start",M=>{M.sourceEvent.type==="mousedown"&&(T={left:_.scrollLeft,top:_.scrollTop,x:M.sourceEvent.clientX,y:M.sourceEvent.clientY})}))}let k=m.select(`g.${v.classes.CHART_PREFIX}__tree`);k.attr("transform",`translate(${Math.abs(x)+Math.round(r.node.size.width/2)+l}, ${l})`);let D=k.selectAll(`.${v.classes.CHART_PREFIX}__tree__node`).data(h.descendants().filter(_=>_.depth>0),_=>_.data.nodeId),b=D.exit();b.transition().duration(v.numbers.TRANSITION_DURATION).attr("transform",_=>_.parent?`translate(${this.nodeCenterHorizontal(_,r.node.size.width,_.parent.x)}, ${_.parent.y})`:`translate(${this.nodeCenterHorizontal(_,r.node.size.width)}, ${_.y})`).remove();let N=D.enter().append("g").classed(`${v.classes.CHART_PREFIX}__tree__node`,!0).attr("transform",_=>_.parent?`translate(${this.nodeCenterHorizontal(_,r.node.size.width,_.parent.x)}, ${_.parent.y})`:`translate(${this.nodeCenterHorizontal(_,r.node.size.width)}, ${_.y})`).attr("cursor",_=>_.data.children===!0||yt(_.data.children)&&_.data.children.length?"pointer":"default");N.append("rect").attr("width",r.node.size.width).attr("height",r.node.size.height).attr("rx",4).style("stroke",v.chartTheme.outlineMedium).style("fill",_=>r.palette[_.depth-Math.trunc(_.depth/r.palette.length)*r.palette.length]),r.nodeBuilder?r.nodeBuilder(N):N.append("text").classed(v.classes.CHART_TEXT,!0).attr("x",r.node.padding).attr("y",r.node.size.height/2).style("pointer-events","none").style("dominant-baseline","middle").text((_,T)=>{if(!at(_.data.label))return null;let M=r.node.size.width-r.node.padding*2;return r.popoverCallback&&(M=M-24),this.hasChildren(_)&&(M=M-24),X.trimText(_.data.label,M)}),r.selectedCallback&&N.on("click",(_,T)=>r.selectedCallback(T.data,this.getParentIds(T),_.target.parentElement)),r.hoverCallback&&(N.on("mouseenter",(_,T)=>r.hoverCallback(!0,T.data,this.getParentIds(T),_.target)),N.on("mouseleave",(_,T)=>r.hoverCallback(!1,T.data,this.getParentIds(T),_.target)));let w=N.merge(D);w.transition().call(X.transitionsComplete,()=>{f.width>i.width&&o.attr("width",i.width),f.height>i.height&&o.attr("height",i.height);let _=N.nodes().length?N.data()[0].parent:b.nodes().length?b.data().sort((T,M)=>T.depth<M.depth)[0].parent:null;if(at(_)&&_.depth>0){let T=D.filter(M=>M.data.nodeId===_.data.nodeId).node();T&&T.scrollIntoView({behavior:"smooth"})}n()}).duration(v.numbers.TRANSITION_DURATION).attr("transform",_=>`translate(${this.nodeCenterHorizontal(_,r.node.size.width)}, ${_.y})`);let F=(_,T)=>{let M=(_.y-T.y)/2;return We()([[_.x,_.y],[_.x,_.y-M],[T.x,T.y+M],[T.x,T.y]])},O=k.selectAll(`.${v.classes.CHART_PREFIX}__tree__path`).data(h.descendants().filter(_=>_.depth>1),_=>_.data.nodeId);if(O.exit().transition().duration(v.numbers.TRANSITION_DURATION).attrTween("d",(_,T,M)=>{let d=M[T].getAttribute("d"),A=F({x:Math.round(_.parent.x),y:Math.round(_.parent.y+r.node.size.height)},{x:Math.round(_.parent.x),y:Math.round(_.parent.y+r.node.size.height)});return Or(d,A)}).remove(),O.enter().insert("path").classed(`${v.classes.CHART_PREFIX}__tree__path`,!0).style("fill","none").style("stroke",v.chartTheme.outlineMedium).style("shape-rendering","crispEdges").style("stroke-width","2").merge(O).transition().call(X.transitionsComplete,()=>{k.selectAll(`.${v.classes.CHART_PREFIX}__tree__path-label`).raise()}).duration(v.numbers.TRANSITION_DURATION).attrTween("d",(_,T,M)=>{let d=M[T].getAttribute("d"),A=F({x:Math.round(_.parent.x),y:Math.round(_.parent.y+r.node.size.height)},{x:Math.round(_.x),y:Math.round(_.y)});return Or(d,A)}),r.levelLabels.length){let _=k.selectAll(`.${v.classes.CHART_PREFIX}__tree__path-label`).data(h.descendants().filter(A=>A.depth>0&&yt(A.data.children)&&A.data.children.length),A=>A.data.nodeId),T=24,M=_.enter().insert("g").classed(`${v.classes.CHART_PREFIX}__tree__path-label`,!0).attr("visibility","hidden").attr("transform",A=>`translate(${this.nodeCenterHorizontal(A,r.node.size.width)}, ${A.y+r.node.size.height+r.node.padding})`);M.append("rect").attr("width",A=>{let C=A.depth-1,R=r.levelLabels[C];return!at(R)||!R.length?(s[C]=0,0):(s[C]||(s[C]=X.getTextWidth(R,"14px Roboto, sans-serif")+T),s[C])}).attr("transform",A=>`translate(${r.node.size.width/2-s[A.depth-1]/2}, 0)`).attr("height",T).attr("rx",T/2).style("fill",v.chartTheme.outlineMedium),M.append("text").classed(v.classes.CHART_TEXT,!0).attr("x",Math.round(r.node.size.width/2)).attr("y",T/2).style("pointer-events","none").style("dominant-baseline","middle").style("text-anchor","middle").style("font-size","14px").style("fill",v.chartTheme.textInverse).text(A=>r.levelLabels[A.depth-1]),_.exit().remove(),M.merge(_).transition().call(X.transitionsComplete,()=>{M.attr("visibility",null),n()}).duration(v.numbers.TRANSITION_DURATION).attr("transform",A=>`translate(${this.nodeCenterHorizontal(A,r.node.size.width)}, ${A.y+r.node.size.height+(r.node.margin-T)/2})`)}w.each((_,T)=>{let M=W(w.nodes()[T]),d=W(M.node()?.querySelector(`.${v.classes.CHART_PREFIX}__tree__node__children-icon`));if(this.hasChildren(_)?d.node()||M.append("path").classed(`${v.classes.CHART_PREFIX}__tree__node__children-icon`,!0).attr("d","M0,0L12,0L6,6,L0,0").attr("transform",`translate(${r.node.size.width-20}, ${r.node.size.height/2-4})`).style("fill",u):d.node()&&d.remove(),r.popoverCallback){let A=W(M.node()?.querySelector(`.${v.classes.CHART_PREFIX}__tree__node__info-icon`));if(!A.node()){let C=this.hasChildren(_)?r.node.size.width-54:r.node.size.width-32;A=M.append("path").classed(`${v.classes.CHART_PREFIX}__tree__node__info-icon`,!0).attr("d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z").attr("transform",`translate(${C}, ${r.node.size.height/2-12})`).style("fill",u).attr("cursor","pointer").on("click",R=>{R.stopPropagation();let z=JSON.parse(JSON.stringify(_.data));delete z.children,delete z.nodeId,r.popoverCallback(z,this.getParentIds(_),A.node())})}}})})}}return t})();var Vn=class{static buildTreemapChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=W(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(m=>m.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=8,l=X.chartSize(e.container),u=zt({children:e.data}).sum(m=>m.value).sort((m,g)=>g.value-m.value);Pa().size([l.width,l.height])(u);let h=a.select(`g.${v.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(v.classes.CHART_ROOT,!0),h.append("g").classed(`${v.classes.CHART_PREFIX}__treemap`,!0)),a.attr("width",l.width),a.attr("height",l.height);let p=h.select(`g.${v.classes.CHART_PREFIX}__treemap`).selectAll("g").data(u.leaves(),m=>m.data.id);p.exit().select("text").remove(),p.exit().select("rect").transition().duration(v.numbers.TRANSITION_DURATION).attr("width",0).attr("height",0),p.exit().transition().delay(v.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("rect"),x.append("clipPath").attr("id",m=>`${v.classes.CHART_CLIP}-${m.data.id}`).append("rect"),x.append("text").classed(v.classes.CHART_TEXT,!0).attr("clip-path",m=>`url(#${v.classes.CHART_CLIP}-${m.data.id})`).attr("dx",5).attr("dy",20),e.selectedCallback&&x.on("click",(m,g)=>e.selectedCallback(g.data,m.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(m,g)=>e.hoverCallback(!0,g.data,m.target)),x.on("mouseleave",(m,g)=>e.hoverCallback(!1,g.data,m.target)));let y=x.merge(p);y.transition().duration(v.numbers.TRANSITION_DURATION).attr("transform",m=>`translate(${m.x0}, ${m.y0})`),y.select("text").style("display","none").text(m=>i?i(m.data.value):m.data.value),y.select("rect").attr("fill",m=>m.color?m.color:o&&m.value&&e.palette?e.palette.length===2?o(m.value):e.palette[o(m.value)]:"#fff").style("stroke","#fff").attr("id",m=>`${v.classes.CHART_PREFIX}__node-${m.data.id}`).transition().call(X.transitionsComplete,()=>{y.select("clipPath > rect").attr("x",m=>s/2).attr("y",m=>s/2).attr("width",m=>m.x1-m.x0>s?m.x1-m.x0-s:0).attr("height",m=>m.y1-m.y0>s?m.y1-m.y0-s:0),y.select("text").style("display",null),r()}).duration(v.numbers.TRANSITION_DURATION).attr("width",m=>m.x1-m.x0).attr("height",m=>m.y1-m.y0)})}};var $m=["chartContainer"];function Pm(t,e){if(t&1&&(Q(0,"forge-list-item"),Ae(1,"div",5),Q(2,"span"),nt(3),et(),Q(4,"span",6),nt(5),et()()),t&2){let r=e.$implicit;tt(),xo("--item-color",r.color),tt(2),Wn(r.label),tt(2),Wn(r.value)}}function Fm(t,e){if(t&1&&(Q(0,"div",3)(1,"forge-list",4),fo(2,Pm,6,4,"forge-list-item",null,co),et()()),t&2){let r=je();tt(2),ho(r.legendData)}}var qn=(()=>{class t{constructor(){this.destroyRef=Pr(Fr),this.chartContainer=se("chartContainer"),this.chartPalette=Object.keys(v.chartPalette).map(r=>v.chartPalette[r]),this.#t=P.bar,this.donutMeterChartData=0,this.showLegend=!1}#t;set chartType(r){this.#t=r,this.setChartData("create"),this.initializeChartContainer(),setTimeout(()=>{this.drawChart()},100),this.#t===P.donutMeter||this.#t===P.gantt||this.#t===P.treemap||this.#t===P.tree?this.showLegend=!1:this.showLegend=!0}get chartType(){return this.#t}ngOnInit(){Xt(window,"resize").pipe($t(this.destroyRef),$r(100)).subscribe({next:()=>this.drawChart()})}onAction(r){this.setChartData(r),this.drawChart()}initializeChartContainer(){let r=this.chartContainer();(r?.nativeElement).querySelector("svg")?.remove();let n=document.createElementNS("http://www.w3.org/2000/svg","svg");(r?.nativeElement).appendChild(n)}setChartData(r){if(this.chartType===P.donutMeter){this.donutMeterChartData=this.randomNumber(20,80);return}switch(r){case"create":{this.chartType===P.line?this.lineChartData=[this.getData(10)]:this.chartType===P.tree?this.treeChartData={id:"0",children:[{id:"0-1",label:"Item 0-1",children:!0},{id:"0-2",label:"Item 0-2",children:!0}]}:this.chartData=this.getData(10);break}case"update":{this.chartType===P.line?this.lineChartData?.forEach((n,a)=>{this.getData(n.length).forEach((o,i)=>{n[i].value=o.value})}):this.getData(this.chartData.length).forEach((n,a)=>{this.chartData[a].value=n.value});break}case"add":{if(this.chartType===P.line)this.lineChartData?.push(this.getData(10));else{let n=Math.max(...this.chartData.map(a=>a.id))||0;n++,this.chartData=this.chartData?.concat(this.getData(10,n))}break}case"delete":{this.chartType===P.line?this.lineChartData?.pop():this.chartData.length>10&&(this.chartData=this.chartData?.slice(0,this.chartData.length-10));break}}(this.chartType===P.bubble||this.chartType===P.donut||this.chartType===P.pie||this.chartType===P.treemap)&&(this.chartData=this.chartData?.sort((n,a)=>n.category-a.category))}getData(r,n=0){let a=[],o=Date.now();for(let i=0;i<r;i++)a.push({id:i+n,value:this.randomNumber(0,1e3),label:`Item ${i+n}`,category:this.randomNumber(0,100)});return console.log(a.sort((i,s)=>i.category-s.category)),a.sort((i,s)=>i.category-s.category)}drawChart(){this.legendData=this.chartData?.map((n,a)=>({id:n.id,label:n.label,value:n.value,color:this.chartPalette[a%this.chartPalette.length]}));let r={container:this.chartContainer()?.nativeElement.querySelector("svg"),data:this.chartData?.map((n,a)=>Gt(Ut({},n),{color:this.chartPalette[a%this.chartPalette.length]})),palette:this.chartPalette,selectedCallback:this.selectedCallback,hoverCallback:this.hoverCallback};switch(r.container.setAttribute("width","0"),r.container.setAttribute("height","0"),this.chartType){case P.bar:{let n=Ut({},r);Pn.buildBarChart(n);break}case P.bubble:{Fn.buildBubbleChart(r);break}case P.donut:{let n=Gt(Ut({},r),{type:"donut"});Qe.buildPieChart(n);break}case P.donutMeter:{let n=Gt(Ut({},r),{type:"donut-meter",data:[{id:0,value:this.donutMeterChartData,label:"percent",color:v.chartPalette.indigoA200},{id:1,value:100-this.donutMeterChartData,color:v.chartPalette.grey400}]});Qe.buildPieChart(n);break}case P.line:{let n=this.lineChartData?.map((o,i)=>({id:i,label:`Item ${i}`,data:o,color:this.chartPalette[i%this.chartPalette.length]})),a=Gt(Ut({},r),{data:n});Yn.buildLineChart(a),this.legendData=n?.map((o,i)=>({id:o.id,color:o.color,value:null,label:o.data[0].label}));break}case P.pie:{let n=Gt(Ut({},r),{type:"pie"});Qe.buildPieChart(n);break}case P.treemap:{Vn.buildTreemapChart(r);break}case P.tree:{let n=Gt(Ut({},r),{data:this.treeChartData,node:{size:{width:200,height:48},padding:8,margin:48},palette:["#6f74dd","#8e99f3","#d1d9ff","#ede7f6","#e3f2fd","#e0f2f1","#f1f8e9","#eceff1","#f5f5f5"],levelLabels:["Level one","Level two","Level three"],zoomScale:{min:.5,max:1},selectedCallback:(a,o,i)=>{if(console.log(`selectedCallback: ${a.id}`),a.children){if(Array.isArray(a.children))a.children=!0;else{let s=this.randomNumber(5,10);a.children=[];for(let l=0;l<s;l++)a.children.push({id:`${o.length+1}-${l}`,label:`Item ${o.length+1} - ${l}`,children:!!this.randomNumber(0,10)})}this.drawChart()}}});zl.buildTreeChart(n);break}case P.gantt:{let n=Gt(Ut({},r),{data:[{id:0,label:"Item 01",startDate:new Date(2024,0,1),endDate:new Date(2024,0,31),progress:10},{id:1,label:"Item 02",startDate:new Date(2024,1,1),endDate:new Date(2024,1,10),progress:20},{id:2,label:"Item 03",startDate:new Date(2024,1,1),endDate:new Date(2024,1,20),progress:30},{id:3,label:"Item 04",startDate:new Date(2024,3,15),endDate:new Date(2024,8,20),progress:40,color:"red"},{id:4,label:"Item 05",description:"Item 05 description goes here, blah blah blah.  This description should wrap at 320px",startDate:new Date(2024,10,1),endDate:new Date(2025,10,30),progress:90}]});Un.buildGanttChart(n);break}}}randomNumber(r,n){return Math.floor(Math.random()*(n-r+1))+r}selectedCallback(r,n){console.log(r),console.log(n)}hoverCallback(r,n,a){console.log(n),console.log(a)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ke({type:t,selectors:[["app-charts-d3-chart"]],viewQuery:function(n,a){n&1&&De(a.chartContainer,$m,5),n&2&&Ne()},inputs:{chartType:"chartType"},decls:4,vars:1,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container","app-chart"],[1,"legend-container"],[1,"chart-legend"],["slot","start"],["slot","secondary-text"]],template:function(n,a){n&1&&(Q(0,"div",1),Ae(1,"div",2,0),et(),zr(3,Fm,4,0,"div",3)),n&2&&(tt(3),Hr(a.showLegend?3:-1))},dependencies:[No,Do,Io,So],styles:[`[_nghost-%COMP%]{overflow-x:auto;overflow-y:hidden;height:100%;width:100%;display:grid;grid-template-columns:1fr auto;column-gap:16px}[_nghost-%COMP%]     .app-chart{--app-chart-text-high: var(--forge-theme-text-high, rgba(0, 0, 0, .87));--app-chart-text-medium: var(--forge-theme-text-medium, rgba(0, 0, 0, .6));--app-chart-text-inverse: var(--forge-theme-on-surface-inverse, #ffffff);--app-chart-outline: var(--forge-theme-outline, #e0e0e0);--app-chart-outline-medium: var(--forge-theme-outline-medium, #757575);--app-chart-surface: var(--forge-theme-surface, #ffffff);--app-chart-surface-dim: var(--forge-theme-surface-dim, #f5f5f5)}[_nghost-%COMP%]     .app-chart__xaxis, [_nghost-%COMP%]     .app-chart__yaxis{font-family:Roboto,sans-serif;font-size:10px}[_nghost-%COMP%]     .app-chart__xaxis .domain, [_nghost-%COMP%]     .app-chart__yaxis .domain{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis .tick line, [_nghost-%COMP%]     .app-chart__yaxis .tick line{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:first-of-type>text{text-anchor:start}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:last-of-type>text{text-anchor:end}[_nghost-%COMP%]     .app-chart__popover{position:absolute;border:1px solid var(--app-chart-outline);border-radius:4px;background-color:var(--app-chart-surface);padding:4px 8px;font-size:.85rem;display:grid;grid-template-columns:auto 1fr;column-gap:8px;pointer-events:none;visibility:hidden;min-width:176px;max-width:320px;word-break:break-word}.chart-card[_ngcontent-%COMP%]{padding:8px;margin:24px;background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.legend-container[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;min-width:280px;max-height:100%;background-color:var(--forge-theme-surface);border-left:1px solid var(--forge-theme-outline);--forge-list-item-padding: 0;padding:16px}.legend-container[_ngcontent-%COMP%]   forge-list-item[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{background-color:var(--item-color);width:24px;height:24px}  .chart-legend [slot=leading]{width:16px;height:16px;background-color:var(--item-color)}






/*# sourceMappingURL=d3-chart.component-RFXGT2U5.css.map */`]})}}return t})();var oo=(()=>{class t{static loadGoogleChartService(){return new so(r=>{let n=document.querySelector('script[src="https://www.gstatic.com/charts/loader.js"]');n?(r.next(),r.complete()):(n=document.createElement("script"),n.type="text/javascript",n.src="https://www.gstatic.com/charts/loader.js",n.onload=()=>{r.next(),r.complete()},document.body.appendChild(n))})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=lo({token:t,factory:t.\u0275fac})}}return t})();var zm=["chartContainer"],Bn=(()=>{class t{constructor(){this.destroyRef=Pr(Fr),this.chartContainer=se("chartContainer"),this.chartAnimation={startup:!0,duration:500},this.chartScale=1,this.googleChartsLoaded=!1,this.chartIsPanning=!1,this.#t=P.bar}#t;set chartType(r){this.#t=r,this.googleChartsLoaded&&this.drawChart("create")}get chartType(){return this.#t}ngOnInit(){oo.loadGoogleChartService().pipe($t(this.destroyRef)).subscribe({next:()=>{google.charts.load("current",{packages:["corechart","treemap","orgchart","gantt"]}).then(()=>{this.googleChartsLoaded=!0,this.drawChart("create")})}}),Xt(window,"resize").pipe($t(this.destroyRef),$r(100)).subscribe({next:()=>this.drawChart("redraw")}),Xt(this.chartContainer()?.nativeElement,"wheel").pipe($t(this.destroyRef)).subscribe({next:r=>{let n=(this.chartContainer()?.nativeElement).firstElementChild;r.deltaY>0&&this.chartScale<5.05?(this.chartScale+=.05,n.style.transform=`scale(${this.chartScale})`):r.deltaY<0&&this.chartScale>.1&&(this.chartScale-=.05,n.style.transform=`scale(${this.chartScale})`)}})}ngOnDestroy(){this.chart?.clearChart()}onAction(r){this.drawChart(r)}drawChart(r){r!=="redraw"&&this.setChartData(r);let n=this.chartContainer(),a=n?.nativeElement.clientWidth,o=n?.nativeElement.clientHeight;switch(this.chartType){case P.bar:{r==="create"&&(this.chart=new google.visualization.ColumnChart(n?.nativeElement),this.addChartEvents());let i={title:"Bar Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,i);break}case P.bubble:{r==="create"&&(this.chart=new google.visualization.BubbleChart(n?.nativeElement),this.addChartEvents());let i={title:"Bubble Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,i);break}case P.donut:{r==="create"&&(this.chart=new google.visualization.PieChart(n?.nativeElement),this.addChartEvents());let i={title:"Donut Chart",pieHole:.5};this.chart.draw(this.chartData,i);break}case P.pie:{r==="create"&&(this.chart=new google.visualization.PieChart(n?.nativeElement),this.addChartEvents());let i={title:"Pie Chart"};this.chart.draw(this.chartData,i);break}case P.line:{r==="create"&&(this.chart=new google.visualization.LineChart(n?.nativeElement),this.addChartEvents());let i={title:"Line Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,i);break}case P.treemap:{r==="create"&&(this.chart=new google.visualization.TreeMap(n?.nativeElement),this.addChartEvents());let i={title:"Treemap Chart"};this.chart.draw(this.chartData,i);break}case P.tree:{r==="create"&&(this.chart=new google.visualization.OrgChart(n?.nativeElement),this.addChartEvents());let i={allowCollapse:!0,allowHtml:!0,nodeClass:"app--chart--tree-node",selectedNodeClass:"app--chart--tree-node--selected"};this.chart.draw(this.chartData,i);break}case P.gantt:{r==="create"&&(this.chart=new google.visualization.Gantt(n?.nativeElement),this.addChartEvents());let i={};this.chart.draw(this.chartData,i)}}}setChartData(r){let n=this.chartData?.getNumberOfRows()||0,a=this.chartData?.getNumberOfColumns()||0;switch(r){case"create":{switch(this.chartData=new google.visualization.DataTable,this.chartType){case P.bar:case P.donut:case P.pie:this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Value","value"),this.chartData.addRows(this.getData(10,0).map(o=>[o.label,o.value]));break;case P.bubble:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Size","size");let o=[];for(let i=0;i<10;i++)o.push([i.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${i}`,this.randomNumber(0,1e3)]);this.chartData.addRows(o);break}case P.line:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Line 1","line1"),this.chartData.addColumn("number","Line 2","line2"),this.chartData.addColumn("number","Line 3","line3");let o=[];for(let i=0;i<10;i++)o.push([`Item ${i}`,this.randomNumber(0,1e3),this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);this.chartData.addRows(o);break}case P.treemap:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("string","Parent","parent"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addRow(["Root",null,0,0]),this.chartData.addRows(this.getData(20,0).map(o=>[o.label,"Root",o.value,o.category]));break}case P.tree:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","ParentId","parentId"),this.chartData.addRow([{v:"0",f:"Item 0"},null]),this.chartData.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}case P.gantt:this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","Name","name"),this.chartData.addColumn("string","Resource","resource"),this.chartData.addColumn("date","Start Date","startDate"),this.chartData.addColumn("date","End Date","endDate"),this.chartData.addColumn("number","Duration","duration"),this.chartData.addColumn("number","Progress","progress"),this.chartData.addColumn("string","Dependencies","dependencies"),this.chartData.addRows([["0","Item 01","",new Date(2024,0,1),new Date(2024,0,31),null,10,null],["1","Item 02","",new Date(2024,1,1),new Date(2024,1,10),null,20,null],["2","Item 03","",new Date(2024,1,1),new Date(2024,1,20),null,30,null],["3","Item 04","",new Date(2024,3,15),new Date(2024,8,20),null,40,null],["4","Item 05","",new Date(2024,10,1),new Date(2025,10,30),null,90,null]])}break}case"update":{switch(this.chartType){case P.bar:case P.donut:case P.pie:{this.getData(n).forEach((i,s)=>{this.chartData?.setValue(s,1,i.value)});break}case P.bubble:{for(let o=0;o<n;o++)this.chartData?.setValue(o,1,this.randomNumber(0,1e3)),this.chartData?.setValue(o,2,this.randomNumber(0,1e3)),this.chartData?.setValue(o,4,this.randomNumber(0,1e3));break}case P.line:{for(let o=0;o<n;o++)for(let i=1;i<a;i++)this.chartData?.setValue(o,i,this.randomNumber(0,1e3));break}case P.treemap:{for(let o=1;o<n;o++)this.chartData?.setValue(o,2,this.randomNumber(0,1e3)),this.chartData?.setValue(o,3,this.randomNumber(0,1e3));break}case P.tree:{this.chartData?.removeRows(0,this.chartData.getNumberOfRows()),this.chartData?.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}}break}case"add":{switch(this.chartType){case P.bar:case P.donut:case P.pie:{this.chartData?.addRows(this.getData(1,n).map(o=>[o.label,o.value]));break}case P.bubble:{this.chartData?.addRow([n.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${n}`,this.randomNumber(0,1e3)]);break}case P.line:{this.chartData?.addColumn("number",`Line ${a}`,`line${a}`);for(let o=0;o<10;o++)this.chartData?.setValue(o,a,this.randomNumber(0,1e3));break}case P.treemap:{this.chartData?.addRow([`Item ${n}`,"Root",this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);break}}break}case"delete":{if(n>1)switch(this.chartType){case P.bar:case P.bubble:case P.donut:case P.pie:case P.treemap:{this.chartData?.removeRow(n-1);break}case P.line:{this.chartData?.removeColumn(a-1);break}}break}}}getData(r,n=0){let a=[];for(let o=0;o<r;o++)a.push({id:o+n,value:this.randomNumber(0,1e3),label:`Item ${o+n}`,category:this.randomNumber(0,100)});return a}randomNumber(r,n){return Math.floor(Math.random()*(n-r+1))+r}addChartEvents(){google.visualization.events.addListener(this.chart,"ready",()=>{console.log("chart ready"),this.chartScale=1,this.addZoomPanEvents()}),google.visualization.events.addListener(this.chart,"select",()=>{console.log("chart item selected"),console.log(this.chart?.getSelection())}),google.visualization.events.addListener(this.chart,"mousedown",()=>{console.log("mousedown")})}buildTreeNodeData(r,n=1){let a=[],o=this.randomNumber(0,5);for(let i=0;i<o;i++)a.push([{v:`${r}-${i}`,f:`Item ${r}-${i}`},r]),n>1&&a.push(...this.buildTreeNodeData(`${r}-${i}`,n-1));return a}addZoomPanEvents(){let r=(this.chartContainer()?.nativeElement).firstElementChild;Xt(r,"mousedown").pipe($t(this.destroyRef)).subscribe({next:n=>{this.chartIsPanning=!0,(this.chartContainer()?.nativeElement).classList.add("app--chart--panning")}}),Xt(r,"mousemove").pipe($t(this.destroyRef),uo(()=>this.chartIsPanning)).subscribe({next:n=>{(this.chartContainer()?.nativeElement).scrollBy(n.movementX*-1,n.movementY*-1)}}),Xt(r,"mouseup").pipe($t(this.destroyRef)).subscribe({next:()=>{this.chartIsPanning=!1,(this.chartContainer()?.nativeElement).classList.remove("app--chart--panning")}}),Xt(r,"mouseout").pipe($t(this.destroyRef)).subscribe({next:()=>{this.chartIsPanning=!1,(this.chartContainer()?.nativeElement).classList.remove("app--chart--panning")}})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ke({type:t,selectors:[["app-charts-google-chart"]],viewQuery:function(n,a){n&1&&De(a.chartContainer,zm,5),n&2&&Ne()},inputs:{chartType:"chartType"},features:[bo([oo])],decls:3,vars:0,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container"]],template:function(n,a){n&1&&(po(0,"div",1),go(1,"div",2,0),mo())},styles:[`[_nghost-%COMP%]{display:block;height:100%;width:100%}  .app--chart--tree-node{border:1px solid var(--forge-theme-outline);white-space:nowrap;background-color:#e8eaf6}  .app--chart--tree-node--selected{background-color:#3f51b5;color:#fff}  .app--chart--panning{-webkit-user-select:none;user-select:none}.chart-card[_ngcontent-%COMP%]{margin:24px;height:calc(100% - 48px);background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%}






/*# sourceMappingURL=google-chart.component-CMWP43HV.css.map */`]})}}return t})();function Hm(t,e){if(t&1&&Ae(0,"app-charts-d3-chart",10),t&2){let r=je();pt("chartType",r.chartType)}}function Lm(t,e){if(t&1&&Ae(0,"app-charts-google-chart",11),t&2){let r=je();pt("chartType",r.chartType)}}var P=(function(t){return t[t.bar=0]="bar",t[t.bubble=1]="bubble",t[t.donut=2]="donut",t[t.donutMeter=3]="donutMeter",t[t.gantt=4]="gantt",t[t.line=5]="line",t[t.pie=6]="pie",t[t.treemap=7]="treemap",t[t.tree=8]="tree",t})(P||{}),KM=(()=>{class t{constructor(){this.d3Chart=se(qn),this.googleChart=se(Bn),this.chartTypesEnum=P,this.chartType=P.bar,this.activeTab=0}onAction(r){this.activeTab===0?this.d3Chart()?.onAction(r):this.activeTab===1&&this.googleChart()?.onAction(r)}onTabSelected(r){this.activeTab=r}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ke({type:t,selectors:[["app-charts"]],viewQuery:function(n,a){n&1&&De(a.d3Chart,qn,5)(a.googleChart,Bn,5),n&2&&Ne(2)},decls:37,vars:15,consts:[[1,"header"],["slot","start"],[1,"forge-typography--subheading4"],["aria-label","Change chart type",3,"ngModelChange","ngModel"],[3,"value"],["variant","outlined",3,"click","disabled"],[3,"activeTab"],["id","app--charts--d3--tab","aria-controls","app--charts--d3--tab-body",3,"forge-tab-select"],["id","app--charts--google--tab","aria-controls","app--charts--google--tab-body",3,"forge-tab-select"],[1,"body"],["id","app--charts--d3--tab-body","aria-labelledby","app--charts--d3--tab","role","tabpanel","tabindex","-1",3,"chartType"],["id","app--charts--google--tab-body","aria-labelledby","app--charts--google--tab","role","tabpanel","tabindex","-1",3,"chartType"]],template:function(n,a){n&1&&(Q(0,"forge-toolbar",0)(1,"div",1)(2,"h2",2),nt(3,"Charts"),et(),Q(4,"forge-select",3),_o("ngModelChange",function(i){return vo(a.chartType,i)||(a.chartType=i),i}),Q(5,"forge-option",4),nt(6,"Bar"),et(),Q(7,"forge-option",4),nt(8,"Bubble"),et(),Q(9,"forge-option",4),nt(10,"Donut"),et(),Q(11,"forge-option",4),nt(12,"Donut Meter"),et(),Q(13,"forge-option",4),nt(14,"Gantt"),et(),Q(15,"forge-option",4),nt(16,"Line"),et(),Q(17,"forge-option",4),nt(18,"Pie"),et(),Q(19,"forge-option",4),nt(20,"Treemap"),et(),Q(21,"forge-option",4),nt(22,"Tree"),et()(),Q(23,"forge-button",5),Se("click",function(){return a.onAction("update")}),nt(24,"Update"),et(),Q(25,"forge-button",5),Se("click",function(){return a.onAction("add")}),nt(26,"Add"),et(),Q(27,"forge-button",5),Se("click",function(){return a.onAction("delete")}),nt(28,"Delete"),et()()(),Q(29,"forge-tab-bar",6)(30,"forge-tab",7),Se("forge-tab-select",function(){return a.onTabSelected(0)}),nt(31,"D3"),et(),Q(32,"forge-tab",8),Se("forge-tab-select",function(){return a.onTabSelected(1)}),nt(33,"Google"),et()(),Q(34,"div",9),zr(35,Hm,1,1,"app-charts-d3-chart",10)(36,Lm,1,1,"app-charts-google-chart",11),et()),n&2&&(tt(4),yo("ngModel",a.chartType),tt(),pt("value",a.chartTypesEnum.bar),tt(2),pt("value",a.chartTypesEnum.bubble),tt(2),pt("value",a.chartTypesEnum.donut),tt(2),pt("value",a.chartTypesEnum.donutMeter),tt(2),pt("value",a.chartTypesEnum.gantt),tt(2),pt("value",a.chartTypesEnum.line),tt(2),pt("value",a.chartTypesEnum.pie),tt(2),pt("value",a.chartTypesEnum.treemap),tt(2),pt("value",a.chartTypesEnum.tree),tt(2),pt("disabled",a.activeTab===0&&a.chartType===a.chartTypesEnum.tree||a.chartType===a.chartTypesEnum.gantt),tt(2),pt("disabled",a.chartType===a.chartTypesEnum.donutMeter||a.chartType===a.chartTypesEnum.tree||a.chartType===a.chartTypesEnum.gantt),tt(2),pt("disabled",a.chartType===a.chartTypesEnum.donutMeter||a.chartType===a.chartTypesEnum.tree||a.chartType===a.chartTypesEnum.gantt),tt(2),pt("activeTab",a.activeTab),tt(6),Hr(a.activeTab===0?35:a.activeTab===1?36:-1))},dependencies:[Mo,To,Co,Ao,ko,Eo,Ro,Po,$o,Oo,Lo,Ho,Fo,zo,Xo,Uo,qn,Bn],styles:[`[_nghost-%COMP%]{overflow:hidden;height:100%;display:grid;grid-template-rows:auto auto 1fr}.header[_ngcontent-%COMP%]{overflow:hidden}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:16px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]{width:320px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]::part(label){display:none}forge-tab-bar[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface)}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]{min-width:240px}.body[_ngcontent-%COMP%]{overflow:hidden;height:100%}






/*# sourceMappingURL=charts.component-CGE4ABHI.css.map */`]})}}return t})();export{P as ChartTypes,KM as ChartsComponent};
//# sourceMappingURL=chunk-D325ZMXH.js.map
