"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[5769],{5769:(z,V,b)=>{b.d(V,{Z:()=>P});var I=b(71670),v=b(24310),H=b(23373),S=b(81018),G=b(85708),R=b(84940),W=b(51050);class P extends S.Z{constructor(x){super(x),this._relation="",this._relationGeom=null,this._relationString="",this.declaredClass="esri.arcade.featureset.actions.SpatialFilter",this._relationString=x.relationString,this._parent=x.parentfeatureset,this._maxProcessing=40,this._relation=x.relation,this._relationGeom=x.relationGeom}_getSet(x){var F=this;return(0,I.Z)(function*(){if(null===F._wset){yield F._ensureLoaded();const B=yield F._parent._getFilteredSet("esriSpatialRelRelation"!==F._relation?F._relation:F._relation+":"+F._relationString,F._relationGeom,null,null,x);return F._checkCancelled(x),F._wset=new G.Z(B._candidates.slice(0),B._known.slice(0),B._ordered,F._clonePageDefinition(B.pagesDefinition)),F._wset}return F._wset})()}_isInFeatureSet(x){let F=this._parent._isInFeatureSet(x);return F===R.dj.NotInFeatureSet?F:(F=this._idstates[x],void 0===F?R.dj.Unknown:F)}_getFeature(x,F,B){return this._parent._getFeature(x,F,B)}_getFeatures(x,F,B,g){return this._parent._getFeatures(x,F,B,g)}_featureFromCache(x){return this._parent._featureFromCache(x)}executeSpatialRelationTest(x){var F=this;return(0,I.Z)(function*(){if(null===x.geometry)return!1;switch(F._relation){case"esriSpatialRelEnvelopeIntersects":{const B=(0,R.SV)(F._relationGeom),g=(0,R.SV)(x.geometry);return(0,W.kK)(B,g)}case"esriSpatialRelIntersects":return(0,W.kK)(F._relationGeom,x.geometry);case"esriSpatialRelContains":return(0,W.r3)(F._relationGeom,x.geometry);case"esriSpatialRelOverlaps":return(0,W.Nm)(F._relationGeom,x.geometry);case"esriSpatialRelWithin":return(0,W.uh)(F._relationGeom,x.geometry);case"esriSpatialRelTouches":return(0,W.W4)(F._relationGeom,x.geometry);case"esriSpatialRelCrosses":return(0,W.jU)(F._relationGeom,x.geometry);case"esriSpatialRelRelation":return(0,W.LV)(F._relationGeom,x.geometry,F._relationString??"")}})()}_fetchAndRefineFeatures(x,F,B){var g=this;return(0,I.Z)(function*(){const j=new G.Z([],x,!1,null),N=Math.min(F,x.length);yield g._parent?._getFeatures(j,-1,N,B),g._checkCancelled(B);const D=[];for(let E=0;E<N;E++){const e=g._parent._featureFromCache(x[E]);D.push(yield g.executeSpatialRelationTest(e))}for(let E=0;E<F;E++)g._idstates[x[E]]=!0===D[E]?R.dj.InFeatureSet:R.dj.NotInFeatureSet;return"success"})()}_getFilteredSet(x,F,B,g,j){var N=this;return(0,I.Z)(function*(){yield N._ensureLoaded();const D=yield N._parent._getFilteredSet("esriSpatialRelRelation"!==N._relation?N._relation:N._relation+":"+N._relationString,N._relationGeom,B,g,j);let E;return N._checkCancelled(j),E=null!==F?new G.Z(D._candidates.slice(0).concat(D._known.slice(0)),[],D._ordered,N._clonePageDefinition(D.pagesDefinition)):new G.Z(D._candidates.slice(0),D._known.slice(0),D._ordered,N._clonePageDefinition(D.pagesDefinition)),E})()}_stat(x,F,B,g,j,N,D){var E=this;return(0,I.Z)(function*(){if(""!==B)return{calculated:!1};const e=yield E._parent._stat(x,F,"esriSpatialRelRelation"!==E._relation?E._relation:E._relation+":"+E._relationString,E._relationGeom,j,N,D);return!1===e.calculated?null===j&&""===B&&null===g?E._manualStat(x,F,N,D):{calculated:!1}:e})()}_canDoAggregates(x,F,B,g,j){var N=this;return(0,I.Z)(function*(){return""===B&&null===g&&null!==N._parent&&N._parent._canDoAggregates(x,F,"esriSpatialRelRelation"!==N._relation?N._relation:N._relation+":"+N._relationString,N._relationGeom,j)})()}_getAggregatePagesDataSourceDefinition(x,F,B,g,j,N,D){var E=this;return(0,I.Z)(function*(){if(null===E._parent)throw new H.EN(H.H9.NeverReach);return E._parent._getAggregatePagesDataSourceDefinition(x,F,"esriSpatialRelRelation"!==E._relation?E._relation:E._relation+":"+E._relationString,E._relationGeom,j,N,D)})()}static registerAction(){S.Z._featuresetFunctions.intersects=function(x){return null==x?new v.Z({parentfeatureset:this}):new P({parentfeatureset:this,relation:"esriSpatialRelIntersects",relationGeom:x})},S.Z._featuresetFunctions.envelopeIntersects=function(x){return null==x?new v.Z({parentfeatureset:this}):new P({parentfeatureset:this,relation:"esriSpatialRelEnvelopeIntersects",relationGeom:x})},S.Z._featuresetFunctions.contains=function(x){return null==x?new v.Z({parentfeatureset:this}):new P({parentfeatureset:this,relation:"esriSpatialRelContains",relationGeom:x})},S.Z._featuresetFunctions.overlaps=function(x){return null==x?new v.Z({parentfeatureset:this}):new P({parentfeatureset:this,relation:"esriSpatialRelOverlaps",relationGeom:x})},S.Z._featuresetFunctions.within=function(x){return null==x?new v.Z({parentfeatureset:this}):new P({parentfeatureset:this,relation:"esriSpatialRelWithin",relationGeom:x})},S.Z._featuresetFunctions.touches=function(x){return null==x?new v.Z({parentfeatureset:this}):new P({parentfeatureset:this,relation:"esriSpatialRelTouches",relationGeom:x})},S.Z._featuresetFunctions.crosses=function(x){return null==x?new v.Z({parentfeatureset:this}):new P({parentfeatureset:this,relation:"esriSpatialRelCrosses",relationGeom:x})},S.Z._featuresetFunctions.relate=function(x,F){return null==x?new v.Z({parentfeatureset:this}):new P({parentfeatureset:this,relation:"esriSpatialRelRelation",relationGeom:x,relationString:F})}}}},24310:(z,V,b)=>{b.d(V,{Z:()=>R});var I=b(71670),v=b(23373),H=b(81018),S=b(85708),G=b(84940);class R extends H.Z{constructor(P){super(P),this.declaredClass="esri.layers.featureset.sources.Empty",this._maxProcessing=1e3,this._wset=new S.Z([],[],!1,null),this._parent=P.parentfeatureset,this._databaseType=G.Bj.Standardised}_getSet(){var P=this;return(0,I.Z)(function*(){return P._wset})()}optimisePagingFeatureQueries(){}_isInFeatureSet(){return G.dj.NotInFeatureSet}_getFeature(){return(0,I.Z)(function*(){throw new v.EN(v.H9.NeverReach)})()}queryAttachments(){return(0,I.Z)(function*(){return[]})()}_getFeatures(){return(0,I.Z)(function*(){return"success"})()}_featureFromCache(){return null}_fetchAndRefineFeatures(){return(0,I.Z)(function*(){throw new v.EN(v.H9.NeverReach)})()}_getFilteredSet(){return(0,I.Z)(function*(){return new S.Z([],[],!1,null)})()}_stat(P,$,x,F,B,g,j){return this._manualStat(P,$,g,j)}_canDoAggregates(){return(0,I.Z)(function*(){return!1})()}}},81018:(z,V,b)=>{b.d(V,{Z:()=>N});var I=b(71670),v=b(68621),H=b(83865),S=b(23373),G=b(53661);class R{constructor(E,e){this._lastId=-1,this._progress=e,this._parent=E}reset(){this._lastId=-1}nextBatch(E){if(null!==this._parent._mainSetInUse)return this._parent._mainSetInUse.then(l=>this.nextBatch(E),l=>this.nextBatch(E));const e={returnpromise:null,hasset:!1},a=[];return e.returnpromise=new Promise((l,s)=>{this._parent._getSet(this._progress).then(_=>{const p=(0,G.s3)(_._known,"known");let w=p.length-1;if("GETPAGES"===p[p.length-1]&&(w-=1),this._lastId+E>w&&p.length>0&&"GETPAGES"===p[p.length-1])return void this._parent._expandPagedSet(_,this._parent._maxQueryRate(),0,0,this._progress).then(M=>{e.hasset=!0,this._parent._mainSetInUse=null,this.nextBatch(E).then(l,s)},M=>{e.hasset=!0,this._parent._mainSetInUse=null,s(M)});const C=(0,G.s3)(_._candidates,"candidates");if(w>=this._lastId+E||0===C.length){for(let M=0;M<E;M++){const h=M+this._lastId+1;if(h>=p.length)break;a[M]=p[h]}return this._lastId+=a.length,0===a.length&&(e.hasset=!0,this._parent._mainSetInUse=null,l([])),void this._parent._getFeatureBatch(a,this._progress).then(M=>{e.hasset=!0,this._parent._mainSetInUse=null,l(M)},M=>{e.hasset=!0,this._parent._mainSetInUse=null,s(M)})}this._parent._refineSetBlock(_,this._parent._maxProcessingRate(),this._progress).then(()=>{e.hasset=!0,this._parent._mainSetInUse=null,this.nextBatch(E).then(l,s)},M=>{e.hasset=!0,this._parent._mainSetInUse=null,s(M)})},_=>{e.hasset=!0,this._parent._mainSetInUse=null,s(_)})}),!1===e.hasset&&(this._parent._mainSetInUse=e.returnpromise,e.hasset=!0),e.returnpromise}next(){if(null!==this._parent._mainSetInUse)return this._parent._mainSetInUse.then(e=>this.next(),e=>this.next());const E={returnpromise:null,hasset:!1};return E.returnpromise=new Promise((e,a)=>{this._parent._getSet(this._progress).then(l=>{const s=(0,G.s3)(l._known,"known");this._lastId<s.length-1?"GETPAGES"===s[this._lastId+1]?this._parent._expandPagedSet(l,this._parent._maxQueryRate(),0,0,this._progress).then(_=>(E.hasset=!0,this._parent._mainSetInUse=null,this.next())).then(e,a):(this._lastId+=1,this._parent._getFeature(l,s[this._lastId],this._progress).then(_=>{E.hasset=!0,this._parent._mainSetInUse=null,e(_)},_=>{E.hasset=!0,this._parent._mainSetInUse=null,a(_)})):(0,G.s3)(l._candidates,"candidates").length>0?this._parent._refineSetBlock(l,this._parent._maxProcessingRate(),this._progress).then(()=>{E.hasset=!0,this._parent._mainSetInUse=null,this.next().then(e,a)},_=>{E.hasset=!0,this._parent._mainSetInUse=null,a(_)}):(E.hasset=!0,this._parent._mainSetInUse=null,e(null))},l=>{E.hasset=!0,this._parent._mainSetInUse=null,a(l)})}),!1===E.hasset&&(this._parent._mainSetInUse=E.returnpromise,E.hasset=!0),E.returnpromise}count(){var E=this;return(0,I.Z)(function*(){if(-1!==E._parent._totalCount)return E._parent._totalCount;const e=yield E._parent._getSet(E._progress),a=yield E._refineAllSets(e);return E._parent._totalCount=a._known.length,E._parent._totalCount})()}_refineAllSets(E){var e=this;return(0,I.Z)(function*(){if(E._known.length>0&&"GETPAGES"===E._known[E._known.length-1])return yield e._parent._expandPagedSet(E,e._parent._maxQueryRate(),0,1,e._progress),e._refineAllSets(E);if(E._candidates.length>0){if("GETPAGES"===E._known[E._candidates.length-1])return yield e._parent._expandPagedSet(E,e._parent._maxQueryRate(),0,2,e._progress),e._refineAllSets(E);const a=yield e._parent._refineSetBlock(E,e._parent._maxProcessingRate(),e._progress);return a._candidates.length>0?e._refineAllSets(a):a}return E})()}}var W=b(85708),P=b(84940),$=b(61709),x=b(30801),F=b(30753),B=b(51050),g=b(68230),j=b(19346);let N=(()=>{class D{constructor(e){this.recentlyUsedQueries=null,this.featureSetQueryInterceptor=null,this._idstates=[],this._parent=null,this._wset=null,this._mainSetInUse=null,this._maxProcessing=200,this._maxQuery=500,this._totalCount=-1,this._databaseType=P.Bj.NotEvaluated,this._databaseTypeProbed=null,this.declaredRootClass="esri.arcade.featureset.support.FeatureSet",this._featureCache=[],this.typeIdField=null,this.types=null,this.fields=null,this.geometryType="",this.objectIdField="",this.globalIdField="",this.spatialReference=null,this.hasM=!1,this.hasZ=!1,this._transparent=!1,this.loaded=!1,this._loadPromise=null,this._fieldsIndex=null,this._dateFieldIndex=null,e&&e.lrucache&&(this.recentlyUsedQueries=e.lrucache),e&&e.interceptor&&(this.featureSetQueryInterceptor=e.interceptor)}optimisePagingFeatureQueries(e){this._parent&&this._parent.optimisePagingFeatureQueries(e)}_hasMemorySource(){return!0}prop(e,a){return void 0===a?this[e]:(void 0!==this[e]&&(this[e]=a),this)}end(){return null!==this._parent&&!0===this._parent._transparent?this._parent.end():this._parent}_ensureLoaded(){return this.load()}load(){return null===this._loadPromise&&(this._loadPromise=this.loadImpl()),this._loadPromise}loadImpl(){var e=this;return(0,I.Z)(function*(){return!0===e._parent?.loaded?(e._initialiseFeatureSet(),e):(yield e._parent?.load(),e._initialiseFeatureSet(),e)})()}_initialiseFeatureSet(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.fields=[],this.typeIdField="",this.objectIdField="",this.globalIdField="",this.spatialReference=new g.Z({wkid:4326}),this.geometryType=P.Qk.point)}getField(e,a){let l;return(a=a||this.fields)&&(e=e.toLowerCase(),a.some(s=>(s&&s.name.toLowerCase()===e&&(l=s),!!l))),l}getFieldsIndex(){return null===this._fieldsIndex&&(this._fieldsIndex=new j.Z(this.fields)),this._fieldsIndex}_maxProcessingRate(){return null!==this._parent?Math.min(this._maxProcessing,this._parent._maxProcessingRate()):Math.min(this._maxProcessing,this._maxQueryRate())}_maxQueryRate(){return null!==this._parent?Math.max(this._maxQuery,this._parent._maxQueryRate()):this._maxQuery}_checkCancelled(e){if(null!=e&&e.aborted)throw new S.EN(S.H9.Cancelled)}nativeCapabilities(){return this._parent.nativeCapabilities()}_canDoAggregates(e,a,l,s,_){var p=this;return(0,I.Z)(function*(){return null!==p._parent&&p._parent._canDoAggregates(e,a,l,s,_)})()}_getAggregatePagesDataSourceDefinition(e,a,l,s,_,p,w){var C=this;return(0,I.Z)(function*(){if(null===C._parent)throw new S.EN(S.H9.NeverReach);return C._parent._getAggregatePagesDataSourceDefinition(e,a,l,s,_,p,w)})()}_getAgregagtePhysicalPage(e,a,l){var s=this;return(0,I.Z)(function*(){if(null===s._parent)throw new S.EN(S.H9.NeverReach);return s._parent._getAgregagtePhysicalPage(e,a,l)})()}databaseType(){var e=this;return(0,I.Z)(function*(){if(e._databaseType===P.Bj.NotEvaluated){if(null!==H.Z.applicationCache){const a=H.Z.applicationCache.getDatabaseType(e._cacheableFeatureSetSourceKey());if(null!==a)return a}if(null!==e._databaseTypeProbed)return e._databaseTypeProbed;try{e._databaseTypeProbed=e._getDatabaseTypeImpl(),null!==H.Z.applicationCache&&H.Z.applicationCache.setDatabaseType(e._cacheableFeatureSetSourceKey(),e._databaseTypeProbed)}catch(a){throw null!==H.Z.applicationCache&&H.Z.applicationCache.clearDatabaseType(e._cacheableFeatureSetSourceKey()),a}return e._databaseTypeProbed}return e._databaseType})()}_getDatabaseTypeImpl(){var e=this;return(0,I.Z)(function*(){const a=[{thetype:P.Bj.SqlServer,testwhere:"(CAST( '2015-01-01' as DATETIME) = CAST( '2015-01-01' as DATETIME)) AND OBJECTID<0"},{thetype:P.Bj.Oracle,testwhere:"(TO_DATE('2003-11-18','YYYY-MM-DD') = TO_DATE('2003-11-18','YYYY-MM-DD')) AND OBJECTID<0"},{thetype:P.Bj.StandardisedNoInterval,testwhere:"(date '2015-01-01 10:10:10' = date '2015-01-01 10:10:10') AND OBJECTID<0"}];for(const l of a)if(!0===(yield e._runDatabaseProbe(l.testwhere)))return l.thetype;return P.Bj.StandardisedNoInterval})()}_cacheableFeatureSetSourceKey(){return"MUSTBESET"}_runDatabaseProbe(e){var a=this;return(0,I.Z)(function*(){if(null!==a._parent)return a._parent._runDatabaseProbe(e);throw new S.EN(S.H9.NotImplemented)})()}isTable(){return this._parent?.isTable()??!1}_featureFromCache(e){if(void 0!==this._featureCache[e])return this._featureCache[e]}_isInFeatureSet(e){return P.dj.Unknown}_getSet(e){throw new S.EN(S.H9.NotImplemented)}_getFeature(e,a,l){var s=this;return(0,I.Z)(function*(){if(s._checkCancelled(l),void 0!==s._featureFromCache(a)||(yield s._getFeatures(e,a,s._maxProcessingRate(),l),s._checkCancelled(l),void 0!==s._featureFromCache(a)))return s._featureFromCache(a);throw new S.EN(S.H9.MissingFeatures)})()}_getFeatureBatch(e,a){var l=this;return(0,I.Z)(function*(){l._checkCancelled(a);const s=new W.Z([],e,!1,null),_=[];yield l._getFeatures(s,-1,e.length,a),l._checkCancelled(a);for(const p of e)void 0!==l._featureFromCache(p)&&_.push(l._featureFromCache(p));return _})()}_getFeatures(e,a,l,s){return(0,I.Z)(function*(){return"success"})()}_getFilteredSet(e,a,l,s,_){throw new S.EN(S.H9.NotImplemented)}_refineSetBlock(e,a,l){var s=this;return(0,I.Z)(function*(){if(!0===s._checkIfNeedToExpandCandidatePage(e,s._maxQueryRate()))return yield s._expandPagedSet(e,s._maxQueryRate(),0,0,l),s._refineSetBlock(e,a,l);s._checkCancelled(l);const _=e._candidates.length;s._refineKnowns(e,a);let p=_-e._candidates.length;if(0===e._candidates.length||p>=a)return e;if(yield s._refineIfParentKnown(e,a-p,l),s._checkCancelled(l),s._refineKnowns(e,a-p),p=_-e._candidates.length,p<a&&e._candidates.length>0){const w=a-p,C=s._prepareFetchAndRefineSet(e._candidates);return yield s._fetchAndRefineFeatures(C,C.length>w?w:e._candidates.length,l),s._checkCancelled(l),s._refineKnowns(e,a-p),e}return e})()}_fetchAndRefineFeatures(e,a,l){return null}_prepareFetchAndRefineSet(e){const a=[];for(let l=0;l<e.length;l++)this._isPhysicalFeature(e[l])&&a.push(e[l]);return a}_isPhysicalFeature(e){return null===this._parent||this._parent._isPhysicalFeature(e)}_refineKnowns(e,a){let l=0,s=null;const _=[];a=this._maxQueryRate();for(let p=0;p<e._candidates.length&&"GETPAGES"!==e._candidates[p];p++){let w=!1;const C=this._candidateIdTransform(e._candidates[p]);C!==e._candidates[p]&&(w=!0);const M=this._isInFeatureSet(C);if(M===P.dj.InFeatureSet)!0===w?e._known.includes(C)||(e._known.push(C),l+=1):(e._known.push(e._candidates[p]),l+=1),null===s?s={start:p,end:p}:s.end===p-1?s.end=p:(_.push(s),s={start:p,end:p});else if(M===P.dj.NotInFeatureSet)null===s?s={start:p,end:p}:s.end===p-1?s.end=p:(_.push(s),s={start:p,end:p}),l+=1;else if(M===P.dj.Unknown&&(l+=1,!0===e._ordered))break;if(l>=a)break}null!==s&&_.push(s);for(let p=_.length-1;p>=0;p--)e._candidates.splice(_[p].start,_[p].end-_[p].start+1)}_refineIfParentKnown(e,a,l){const s=new W.Z([],[],e._ordered,null);return s._candidates=e._candidates.slice(0),this._parent._refineSetBlock(s,a,l)}_candidateIdTransform(e){return this._parent._candidateIdTransform(e)}_checkIfNeedToExpandKnownPage(e,a){if(null===e.pagesDefinition)return!1;let l=0;for(let s=e._lastFetchedIndex;s<e._known.length;s++){if("GETPAGES"===e._known[s])return!0;if(void 0===this._featureCache[e._known[s]]&&(l+=1,l>=a))break}return!1}_checkIfNeedToExpandCandidatePage(e,a){if(null===e.pagesDefinition)return!1;let l=0;for(let s=0;s<e._candidates.length;s++){if("GETPAGES"===e._candidates[s])return!0;if(l+=1,l>=a)break}return!1}_expandPagedSet(e,a,l,s,_){var p=this;return(0,I.Z)(function*(){if(null===p._parent)throw new S.EN(S.H9.NotImplemented);return p._parent._expandPagedSet(e,a,l,s,_)})()}_expandPagedSetFeatureSet(e,a,l,s,_){var p=this;return(0,I.Z)(function*(){if(e._known.length>0&&"GETPAGES"===e._known[e._known.length-1]&&(s=1),0===s&&e._candidates.length>0&&"GETPAGES"===e._candidates[e._candidates.length-1]&&(s=2),0===s)return"finished";const w=yield p._getPage(e,s,_);return l+w<a?p._expandPagedSet(e,a,l+w,0,_):"success"})()}_getPage(e,a,l){var s=this;return(0,I.Z)(function*(){const _=1===a?e._known:e._candidates;if(e.pagesDefinition.internal.set.length>e.pagesDefinition.resultOffset||!0===e.pagesDefinition.internal.fullyResolved){_.length=_.length-1;let p=0;for(let C=0;C<e.pagesDefinition.resultRecordCount&&!(e.pagesDefinition.resultOffset+C>=e.pagesDefinition.internal.set.length);C++)_[_.length]=e.pagesDefinition.internal.set[e.pagesDefinition.resultOffset+C],p++;e.pagesDefinition.resultOffset+=p;let w=!1;return!0===e.pagesDefinition.internal.fullyResolved&&e.pagesDefinition.internal.set.length<=e.pagesDefinition.resultOffset&&(w=!0),!1===w&&_.push("GETPAGES"),p}return yield s._getPhysicalPage(e,a,l),s._getPage(e,a,l)})()}_getPhysicalPage(e,a,l){return null}_clonePageDefinition(e){return null===this._parent?null:this._parent._clonePageDefinition(e)}_first(e){return this.iterator(e).next()}first(e){return this._first(e)}calculateStatistic(e,a,l,s){var _=this;return(0,I.Z)(function*(){yield _._ensureLoaded();let p=yield _._stat(e,a,"",null,null,l,s);return!1===p.calculated&&(p=yield _._manualStat(e,a,l,s)),p.result})()}_manualStat(e,a,l,s){var _=this;return(0,I.Z)(function*(){let p=null;switch(e.toLowerCase()){case"count":return p=yield(0,$.QX)(_,s),{calculated:!0,result:p};case"distinct":return p=yield(0,$.EB)(_,a,l,s),{calculated:!0,result:p};case"avg":case"mean":return p=yield(0,$.J6)(_,a,s),{calculated:!0,result:p};case"stdev":return p=yield(0,$.m)(_,a,s),{calculated:!0,result:p};case"variance":return p=yield(0,$.CA)(_,a,s),{calculated:!0,result:p};case"sum":return p=yield(0,$.Sm)(_,a,s),{calculated:!0,result:p};case"min":return p=yield(0,$.VV)(_,a,s),{calculated:!0,result:p};case"max":return p=yield(0,$.Fp)(_,a,s),{calculated:!0,result:p};default:return{calculated:!0,result:0}}})()}_stat(e,a,l,s,_,p,w){var C=this;return(0,I.Z)(function*(){const M=yield C._parent._stat(e,a,l,s,_,p,w);return!1===M.calculated?null===_&&""===l&&null===s?C._manualStat(e,a,p,w):{calculated:!1}:M})()}_unionAllGeomSelf(e){const a=this.iterator(this._defaultTracker(e)),l=[];return new Promise((s,_)=>{this._unionShapeInBatches(l,a,s,_)})}_unionAllGeom(e){return new Promise((a,l)=>{const s=this.iterator(this._defaultTracker(e));this._unionShapeInBatches([],s,a,l)})}_unionShapeInBatches(e,a,l,s){a.next().then(_=>{try{null!==_&&null!==_.geometry&&e.push(_.geometry),e.length>30||null===_&&e.length>1?(0,B.G0)(e).then(p=>{try{null===_?l(p):this._unionShapeInBatches(e=[p],a,l,s)}catch(w){s(w)}},s):null===_?l(1===e.length?e[0]:null):this._unionShapeInBatches(e,a,l,s)}catch(p){s(p)}},s)}iterator(e){return new R(this,e)}intersection(e,a=!1){return D._featuresetFunctions.intersection.bind(this)(e,a)}difference(e,a=!1,l=!0){return D._featuresetFunctions.difference.bind(this)(e,a,l)}symmetricDifference(e,a=!1,l=!0){return D._featuresetFunctions.symmetricDifference.bind(this)(e,a,l)}morphShape(e,a,l="unknown",s=null){return D._featuresetFunctions.morphShape.bind(this)(e,a,l,s)}morphShapeAndAttributes(e,a,l="unknown"){return D._featuresetFunctions.morphShapeAndAttributes.bind(this)(e,a,l)}union(e,a=!1){return D._featuresetFunctions.union.bind(this)(e,a)}intersects(e){return D._featuresetFunctions.intersects.bind(this)(e)}envelopeIntersects(e){return D._featuresetFunctions.envelopeIntersects.bind(this)(e)}contains(e){return D._featuresetFunctions.contains.bind(this)(e)}overlaps(e){return D._featuresetFunctions.overlaps.bind(this)(e)}relate(e,a){return D._featuresetFunctions.relate.bind(this)(e,a)}within(e){return D._featuresetFunctions.within.bind(this)(e)}touches(e){return D._featuresetFunctions.touches.bind(this)(e)}top(e){return D._featuresetFunctions.top.bind(this)(e)}crosses(e){return D._featuresetFunctions.crosses.bind(this)(e)}buffer(e,a,l,s=!0){return D._featuresetFunctions.buffer.bind(this)(e,a,l,s)}filter(e,a=null){return D._featuresetFunctions.filter.bind(this)(e,a)}orderBy(e){return D._featuresetFunctions.orderBy.bind(this)(e)}dissolve(e,a){return D._featuresetFunctions.dissolve.bind(this)(e,a)}groupby(e,a){return D._featuresetFunctions.groupby.bind(this)(e,a)}reduce(e,a=null,l){return new Promise((s,_)=>{this._reduceImpl(this.iterator(this._defaultTracker(l)),e,a,0,s,_,0)})}_reduceImpl(e,a,l,s,_,p,w){try{if(++w>1e3)return void setTimeout(()=>{this._reduceImpl(e,a,l,s,_,p,w=0)});e.next().then(C=>{try{if(null===C)_(l);else{const M=a(l,C,s,this);(0,x.y8)(M)?M.then(h=>{this._reduceImpl(e,a,h,s+1,_,p,w)},p):this._reduceImpl(e,a,M,s+1,_,p,w)}}catch(M){p(M)}},p)}catch(C){p(C)}}removeField(e){return D._featuresetFunctions.removeField.bind(this)(e)}addField(e,a,l=null){return D._featuresetFunctions.addField.bind(this)(e,a,l)}sumArea(e,a=!1,l){const s=(0,P.EI)(e);return this.reduce((_,p)=>null===p.geometry?0:a?(0,B.Y4)(p.geometry,s).then(w=>_+w):(0,B.CJ)(p.geometry,s).then(w=>_+w),0,l)}sumLength(e,a=!1,l){const s=(0,P.Lz)(e);return this.reduce((_,p)=>null===p.geometry?0:a?(0,B.kQ)(p.geometry,s).then(w=>_+w):(0,B.sz)(p.geometry,s).then(w=>_+w),0,l)}_substituteVars(e,a){if(null!==a){const l={};for(const s in a)l[s.toLowerCase()]=a[s];e.parameters=l}}distinct(e,a=1e3,l=null,s){var _=this;return(0,I.Z)(function*(){yield _.load();const p=F.WhereClause.create(e,_.getFieldsIndex());return _._substituteVars(p,l),_.calculateStatistic("distinct",p,a,_._defaultTracker(s))})()}min(e,a=null,l){var s=this;return(0,I.Z)(function*(){yield s.load();const _=F.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("min",_,-1,s._defaultTracker(l))})()}max(e,a=null,l){var s=this;return(0,I.Z)(function*(){yield s.load();const _=F.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("max",_,-1,s._defaultTracker(l))})()}avg(e,a=null,l){var s=this;return(0,I.Z)(function*(){yield s.load();const _=F.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("avg",_,-1,s._defaultTracker(l))})()}sum(e,a=null,l){var s=this;return(0,I.Z)(function*(){yield s.load();const _=F.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("sum",_,-1,s._defaultTracker(l))})()}stdev(e,a=null,l){var s=this;return(0,I.Z)(function*(){yield s.load();const _=F.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("stdev",_,-1,s._defaultTracker(l))})()}variance(e,a=null,l){var s=this;return(0,I.Z)(function*(){yield s.load();const _=F.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("variance",_,-1,s._defaultTracker(l))})()}count(e){var a=this;return(0,I.Z)(function*(){return yield a.load(),a.calculateStatistic("count",F.WhereClause.create("1",a.getFieldsIndex()),-1,a._defaultTracker(e))})()}_defaultTracker(e){return e||{aborted:!1}}forEach(e,a){return new Promise((l,s)=>{this._forEachImpl(this.iterator(this._defaultTracker(a)),e,this,l,s,0)})}_forEachImpl(e,a,l,s,_,p){try{if(++p>1e3)return void setTimeout(()=>{this._forEachImpl(e,a,l,s,_,p=0)},0);e.next().then(w=>{try{if(null===w)s(l);else{const C=a(w);null==C?this._forEachImpl(e,a,l,s,_,p):(0,x.y8)(C)?C.then(()=>{try{this._forEachImpl(e,a,l,s,_,p)}catch(M){_(M)}},_):this._forEachImpl(e,a,l,s,_,p)}}catch(C){_(C)}},_)}catch(w){_(w)}}convertToJSON(e){const a={layerDefinition:{geometryType:this.geometryType,fields:[]},featureSet:{features:[],geometryType:this.geometryType}};for(let l=0;l<this.fields.length;l++)a.layerDefinition.fields.push((0,P.Sh)(this.fields[l]));return this.reduce((l,s)=>{const _={geometry:s.geometry&&s.geometry.toJSON(),attributes:{}};for(const p in s.attributes)_.attributes[p]=s.attributes[p];return a.featureSet.features.push(_),1},0,e).then(()=>a)}castToText(e=!1){return"object, FeatureSet"}queryAttachments(e,a,l,s,_){return this._parent.queryAttachments(e,a,l,s,_)}serviceUrl(){return this._parent.serviceUrl()}subtypes(){return this.typeIdField?{subtypeField:this.typeIdField,subtypes:this.types?this.types.map(e=>({name:e.name,code:e.id})):[]}:null}relationshipMetaData(){return this._parent.relationshipMetaData()}get gdbVersion(){return this._parent?this._parent.gdbVersion:""}schema(){const e=[];for(const a of this.fields)e.push((0,P.Sh)(a));return{objectIdField:this.objectIdField,globalIdField:this.globalIdField,geometryType:void 0===P.q2[this.geometryType]?"esriGeometryNull":P.q2[this.geometryType],fields:e}}convertToText(e,a){var l=this;return(0,I.Z)(function*(){if("schema"===e)return yield l._ensureLoaded(),JSON.stringify(l.schema());if("featureset"===e){yield l._ensureLoaded();const s=[];yield l.reduce((p,w)=>{const C={geometry:w.geometry?w.geometry.toJSON():null,attributes:w.attributes};return null!==C.geometry&&C.geometry.spatialReference&&delete C.geometry.spatialReference,s.push(C),1},0,a);const _=l.schema();return _.features=s,_.spatialReference=l.spatialReference.toJSON(),JSON.stringify(_)}return l.castToText()})()}getFeatureByObjectId(e,a){return this._parent.getFeatureByObjectId(e,a)}getOwningSystemUrl(){return this._parent.getOwningSystemUrl()}getIdentityUser(){return this._parent.getIdentityUser()}getRootFeatureSet(){return null!==this._parent?this._parent.getRootFeatureSet():this}getDataSourceFeatureSet(){return null!==this._parent?this._parent.getDataSourceFeatureSet():this}castAsJson(e=null){return"keeptype"===e?.featureset?this:"none"===e?.featureset?null:{type:"FeatureSet"}}castAsJsonAsync(e=null,a=null){var l=this;return(0,I.Z)(function*(){if("keeptype"===a?.featureset)return l;if("schema"===a?.featureset)return yield l._ensureLoaded(),JSON.parse(JSON.stringify(l.schema()));if("none"===a?.featureset)return null;yield l._ensureLoaded();const s=[];yield l.reduce((p,w)=>{const C={geometry:w.geometry?!0===a?.keepGeometryType?w.geometry:w.geometry.toJSON():null,attributes:w.attributes};return null!==C.geometry&&C.geometry.spatialReference&&!0!==a?.keepGeometryType&&delete C.geometry.spatialReference,s.push(C),1},0,e);const _=l.schema();return _.features=s,_.spatialReference=!0===a?.keepGeometryType?l.spatialReference:l.spatialReference?.toJSON(),_})()}get dateTimeReferenceFieldIndex(){return null===this._dateFieldIndex&&(this._dateFieldIndex=v.nu.create(this.getFieldsIndex(),this)),this._dateFieldIndex}fieldTimeZone(e){return this.dateTimeReferenceFieldIndex.fieldTimeZone(e)}get preferredTimeReference(){return this._parent?.preferredTimeReference??null}get dateFieldsTimeReference(){return this._parent?.dateFieldsTimeReference??null}get datesInUnknownTimezone(){return this._parent.datesInUnknownTimezone}get editFieldsInfo(){return this._parent?.editFieldsInfo??null}get timeInfo(){return this._parent?.timeInfo??null}}return D._featuresetFunctions={},D})()},85708:(z,V,b)=>{b.d(V,{Z:()=>I});class I{constructor(H,S,G,R){this._lastFetchedIndex=0,this._ordered=!1,this.pagesDefinition=null,this._candidates=H,this._known=S,this._ordered=G,this.pagesDefinition=R}}},83865:(z,V,b)=>{b.d(V,{Z:()=>I});let I=(()=>{class v{constructor(){this._databaseTypeMetaData={},this._layerInfo={}}clearDatabaseType(S){void 0===this._databaseTypeMetaData[S]&&delete this._databaseTypeMetaData[S]}getDatabaseType(S){return"MUSTBESET"===S||void 0===this._databaseTypeMetaData[S]?null:this._databaseTypeMetaData[S]}setDatabaseType(S,G){this._databaseTypeMetaData[S]=G}getLayerInfo(S){return void 0===this._layerInfo[S]?null:this._layerInfo[S]}setLayerInfo(S,G){this._layerInfo[S]=G}clearLayerInfo(S){void 0!==this._layerInfo[S]&&delete this._layerInfo[S]}}return v.applicationCache=null,v})()},48697:(z,V,b)=>{b.d(V,{$e:()=>B,DT:()=>e,TE:()=>M,XF:()=>x,bB:()=>F,fz:()=>j,hq:()=>_,mA:()=>N,oX:()=>D,vR:()=>E,y5:()=>p,zR:()=>W});var I=b(82734),v=b(84940),H=b(30753),S=b(23373),R=(b(68621),b(64626));function W(h,i){return g(h?.parseTree,i,h?.parameters)}function x(h,i,y){return g(h,i,y)}function F(h,i,y,f){return H.WhereClause.create(g(h.parseTree,v.Bj.Standardised,h.parameters,i,y),f)}function B(h,i,y="AND"){return H.WhereClause.create("(("+W(h,v.Bj.Standardised)+")"+y+"("+W(i,v.Bj.Standardised)+"))",h.fieldsIndex)}function g(h,i,y,f=null,c=null,d=null){let T,L,J,Z;switch(h.type){case"interval":return M(g(h.value,i,y,f,c,d),h.qualifier,h.op);case"case-expression":{let O=" CASE ";"simple"===h.format&&(O+=g(h.operand,i,y,f,c,d));for(let k=0;k<h.clauses.length;k++)O+=" WHEN "+g(h.clauses[k].operand,i,y,f,c,d)+" THEN "+g(h.clauses[k].value,i,y,f,c,d);return null!==h.else&&(O+=" ELSE "+g(h.else,i,y,f,c,d)),O+=" END ",O}case"parameter":{const O=y[h.value.toLowerCase()];if("string"==typeof O)return"'"+y[h.value.toLowerCase()].toString().replace(/'/g,"''")+"'";if((0,v.J_)(O))return D(O,i,d);if((0,v.NP)(O))return N(O,i,d);if(O instanceof Array){const k=[];for(let K=0;K<O.length;K++)"string"==typeof O[K]?k.push("'"+O[K].toString().replace(/'/g,"''")+"'"):(0,v.J_)(O[K])?k.push(D(O[K],i,d)):(0,v.NP)(O[K])?k.push(N(O[K],i,d)):k.push(O[K].toString());return k}return O.toString()}case"expression-list":L=[];for(const O of h.value)L.push(g(O,i,y,f,c,d));return L;case"unary-expression":return" ( NOT "+g(h.expr,i,y,f,c,d)+" ) ";case"binary-expression":switch(h.operator){case"AND":return" ("+g(h.left,i,y,f,c,d)+" AND "+g(h.right,i,y,f,c,d)+") ";case"OR":return" ("+g(h.left,i,y,f,c,d)+" OR "+g(h.right,i,y,f,c,d)+") ";case"IS":if("null"!==h.right.type)throw new S.eS(S.f.UnsupportedIsRhs);return" ("+g(h.left,i,y,f,c,d)+" IS NULL )";case"ISNOT":if("null"!==h.right.type)throw new S.eS(S.f.UnsupportedIsRhs);return" ("+g(h.left,i,y,f,c,d)+" IS NOT NULL )";case"IN":return T=[],"expression-list"===h.right.type?(T=g(h.right,i,y,f,c)," ("+g(h.left,i,y,f,c,d)+" IN ("+T.join(",")+")) "):(Z=g(h.right,i,y,f,c,d),Z instanceof Array?" ("+g(h.left,i,y,f,c,d)+" IN ("+Z.join(",")+")) ":" ("+g(h.left,i,y,f,c,d)+" IN ("+Z+")) ");case"NOT IN":return T=[],"expression-list"===h.right.type?(T=g(h.right,i,y,f,c)," ("+g(h.left,i,y,f,c,d)+" NOT IN ("+T.join(",")+")) "):(Z=g(h.right,i,y,f,c,d),Z instanceof Array?" ("+g(h.left,i,y,f,c,d)+" NOT IN ("+Z.join(",")+")) ":" ("+g(h.left,i,y,f,c,d)+" NOT IN ("+Z+")) ");case"BETWEEN":return J=g(h.right,i,y,f,c,d)," ("+g(h.left,i,y,f,c,d)+" BETWEEN "+J[0]+" AND "+J[1]+" ) ";case"NOTBETWEEN":return J=g(h.right,i,y,f,c,d)," ("+g(h.left,i,y,f,c,d)+" NOT BETWEEN "+J[0]+" AND "+J[1]+" ) ";case"LIKE":return""!==h.escape?" ("+g(h.left,i,y,f,c,d)+" LIKE "+g(h.right,i,y,f,c,d)+" ESCAPE '"+h.escape+"') ":" ("+g(h.left,i,y,f,c,d)+" LIKE "+g(h.right,i,y,f,c,d)+") ";case"NOT LIKE":return""!==h.escape?" ("+g(h.left,i,y,f,c,d)+" NOT LIKE "+g(h.right,i,y,f,c,d)+" ESCAPE '"+h.escape+"') ":" ("+g(h.left,i,y,f,c,d)+" NOT LIKE "+g(h.right,i,y,f,c,d)+") ";case"<>":case"<":case">":case">=":case"<=":case"=":case"*":case"-":case"+":case"/":return" ("+g(h.left,i,y,f,c,d)+" "+h.operator+" "+g(h.right,i,y,f,c,d)+") ";case"||":return" ("+g(h.left,i,y,f,c,d)+" "+(i===v.Bj.SqlServer?"+":h.operator)+" "+g(h.right,i,y,f,c,d)+") "}throw new S.eS(S.f.UnsupportedOperator,{operator:h.operator});case"null":return"null";case"boolean":return!0===h.value?"1":"0";case"string":return"'"+h.value.toString().replace(/'/g,"''")+"'";case"timestamp":case"date":return D(h.value,i,d);case"number":return h.value.toString();case"current-time":return E("date"===h.mode,i);case"column-reference":return f&&f.toLowerCase()===h.column.toLowerCase()?"("+c+")":h.column;case"data-type":return h.value;case"function":{const O=g(h.args,i,y,f,c,d);return j(h.name,O,i)}}throw new S.eS(S.f.UnsupportedSyntax,{node:h.type})}function j(h,i,y){switch(h.toLowerCase().trim()){case"cos":case"sin":case"tan":case"cosh":case"tanh":case"sinh":case"acos":case"asin":case"atan":case"floor":case"log10":case"log":case"abs":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:h.toLowerCase().trim()});return`${h.toUpperCase().trim()}(${i[0]})`;case"ceiling":case"ceil":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:"ceiling"});return"CEILING("+i[0]+")";case"mod":case"power":case"nullif":if(2!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:h.toLowerCase().trim()});return`${h.toUpperCase().trim()}(${i[0]},${i[1]})`;case"round":if(2===i.length)return"ROUND("+i[0]+","+i[1]+")";if(1===i.length)return"ROUND("+i[0]+")";throw new S.eS(S.f.InvalidFunctionParameters,{function:"round"});case"truncate":if(i.length<1||i.length>2)throw new S.eS(S.f.InvalidFunctionParameters,{function:"truncate"});return y===v.Bj.SqlServer?"ROUND("+i[0]+(1===i.length?"0":","+i[1])+",1)":"TRUNCATE("+i[0]+(1===i.length?")":","+i[1]+")");case"char_length":case"len":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:"char_length"});switch(y){case v.Bj.SqlServer:return"LEN("+i[0]+")";case v.Bj.Oracle:return"LENGTH("+i[0]+")";default:return"CHAR_LENGTH("+i[0]+")"}case"coalesce":case"concat":{if(i.length<1)throw new S.eS(S.f.InvalidFunctionParameters,{function:h.toLowerCase()});let f=h.toUpperCase().trim()+"(";for(let c=0;c<i.length;c++)0!==c&&(f+=","),f+=i[c];return f+=")",f}case"lower":case"lcase":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:"lower"});return"LOWER("+i[0]+")";case"upper":case"ucase":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:"upper"});return"UPPER("+i[0]+")";case"substring":{let f="";switch(y){case v.Bj.Oracle:return f="SUBSTR("+i[0]+","+i[1],3===i.length&&(f+=","+i[2]),f+=")",f;case v.Bj.SqlServer:return f=3===i.length?"SUBSTRING("+i[0]+","+i[1]+","+i[2]+")":"SUBSTRING("+i[0]+",  "+i[1]+", LEN("+i[0]+") - "+i[1]+")",f;default:return f="SUBSTRING("+i[0]+" FROM "+i[1],3===i.length&&(f+=" FOR "+i[2]),f+=")",f}}case"extract":return"EXTRACT("+i[0].replace(/\'/g,"")+" FROM "+i[1]+")";case"cast":{let f="";switch(y){case v.Bj.Oracle:switch(i[1].type){case"date":f="DATE";break;case"float":f="DOUBLE";break;case"integer":f="INTEGER";break;case"real":f="REAL";break;case"smallint":f="SMALLINT";break;case"timestamp":f="TIMESTAMP";break;case"varchar":f="VARCHAR("+i[1].size.toString()+")"}return`CAST(${i[0]} AS ${f})`;case v.Bj.Postgres:switch(i[1].type){case"date":f="DATE";break;case"float":f="DOUBLE PRECISION";break;case"integer":f="INT";break;case"real":f="REAL";break;case"smallint":f="SMALLINT";break;case"timestamp":f="TIMESTAMP";break;case"varchar":f="VARCHAR("+i[1].size.toString()+")"}return`CAST(${i[0]} AS ${f})`;case v.Bj.SqlServer:switch(i[1].type){case"date":f="DATE";break;case"float":f="FLOAT";break;case"integer":f="INT";break;case"real":f="REAL";break;case"smallint":f="SMALLINT";break;case"timestamp":f="DATETIME";break;case"varchar":f="VARCHAR("+i[1].size.toString()+")"}return`CAST(${i[0]} AS ${f})`;default:switch(i[1].type){case"date":f="DATE";break;case"float":f="FLOAT";break;case"integer":f="INTEGER";break;case"real":f="REAL";break;case"smallint":f="SMALLINT";break;case"timestamp":f="TIMESTAMP";break;case"varchar":f="VARCHAR("+i[1].size.toString()+")"}return`CAST(${i[0]} AS ${f})`}}}throw new S.eS(S.f.InvalidFunctionParameters,{function:h})}function N(h,i,y,f){y?.outputTimeReference&&(h=I.iG.arcadeDateAndZoneToArcadeDate(h,y?.outputTimeReference));const c=h.toDateTime(),d=0===c.hour&&0===c.minute&&0===c.second&&0===c.millisecond;switch(i){case v.Bj.FILEGDB:case v.Bj.Standardised:case v.Bj.StandardisedNoInterval:return d?`date '${c.toFormat("yyyy-LL-dd")}'`:`date '${c.toFormat("yyyy-LL-dd HH:mm:ss")}'`;case v.Bj.Oracle:return d?`TO_DATE('${c.toFormat("yyyy-LL-dd")}','YYYY-MM-DD')`:`TO_DATE('${c.toFormat("yyyy-LL-dd HH:mm:ss")}','YYYY-MM-DD HH24:MI:SS')`;case v.Bj.SqlServer:return`'${c.toFormat(d?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;case v.Bj.PGDB:return`#${c.toFormat(d?"LL-dd-yyyy":"LL-dd-yyyy HH:mm:ss")}#`;case v.Bj.Postgres:return`TIMESTAMP '${c.toFormat(d?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;default:return`date '${c.toFormat("yyyy-LL-dd HH:mm:ss")}'`}}function D(h,i,y,f){let c=(0,v.J_)(h)?R.ou.fromJSDate(h):R.ou.fromSQL(h);const d=0===c.hour&&0===c.minute&&0===c.second&&0===c.millisecond;switch(y?.inputTimeReference&&(c=R.ou.fromObject({day:c.day,year:c.year,month:c.month,hour:c.hour,minute:c.minute,second:c.second,millisecond:c.millisecond},{zone:y.inputTimeReference})),y?.outputTimeReference&&(c=c.setZone(y.outputTimeReference)),i){case v.Bj.FILEGDB:case v.Bj.Standardised:case v.Bj.StandardisedNoInterval:return d?`date '${c.toFormat("yyyy-LL-dd")}'`:`date '${c.toFormat("yyyy-LL-dd HH:mm:ss")}'`;case v.Bj.Oracle:return d?`TO_DATE('${c.toFormat("yyyy-LL-dd")}','YYYY-MM-DD')`:`TO_DATE('${c.toFormat("yyyy-LL-dd HH:mm:ss")}','YYYY-MM-DD HH24:MI:SS')`;case v.Bj.SqlServer:return`'${c.toFormat(d?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;case v.Bj.PGDB:return`#${c.toFormat(d?"LL-dd-yyyy":"LL-dd-yyyy HH:mm:ss")}#`;case v.Bj.Postgres:return`TIMESTAMP '${c.toFormat(d?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;default:return`date '${c.toFormat("yyyy-LL-dd HH:mm:ss")}'`}}function E(h,i){switch(i){case v.Bj.FILEGDB:case v.Bj.Standardised:case v.Bj.StandardisedNoInterval:case v.Bj.Oracle:return h?"CURRENT_DATE":"CURRENT_TIMESTAMP";case v.Bj.SqlServer:return h?"CAST(GETDATE() AS DATE)":"GETDATE()";default:return h?"CURRENT_DATE":"CURRENT_TIMESTAMP"}}function e(h,i,y={}){const f={},c={},d={esriFieldTypeSmallInteger:"integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"double",esriFieldTypeDouble:"double",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"integer",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"guid",oid:"integer",long:"integer","small-integer":"integer",integer:"integer",single:"double",double:"double",date:"date",guid:"guid",globalid:"guid",string:"string"};for(const T of i){const L=T.type?d[T.type]:void 0;f[T.name.toLowerCase()]=void 0===L?"":L}for(const T in y){const L=d[y[T]];c[T.toLowerCase()]=void 0===L?"":L}switch(a(f,h.parseTree,h.parameters,c)){case"double":return"double";case"integer":return"integer";case"date":return"date";case"string":return"string";case"global-id":case"guid":return"guid"}return""}function a(h,i,y,f){let c;switch(i.type){case"interval":return"integer";case"case-expression":{const d=[];if("simple"===i.format){for(let T=0;T<i.clauses.length;T++)d.push(a(h,i.clauses[T].value,y,f));null!==i.else&&d.push(a(h,i.else,y,f))}else{for(let T=0;T<i.clauses.length;T++)d.push(a(h,i.else,y,f));null!==i.else&&d.push(a(h,i.else,y,f))}return s(d)}case"parameter":{const d=f[i.value.toLowerCase()];if(void 0===d&&y){const T=y[i.value.toLowerCase()];if(null==T)return"";if("string"==typeof T||T instanceof String)return"string";if("boolean"==typeof T)return"boolean";if((0,v.J_)(T)||(0,v.NP)(T))return"date";if("number"==typeof T)return T%1==0?"integer":"double"}return void 0===d?"":d}case"expression-list":{const d=[];for(const T of i.value)d.push(a(h,T,y,f));return d}case"unary-expression":return"boolean";case"binary-expression":switch(i.operator){case"AND":case"OR":case"IN":case"NOT IN":case"BETWEEN":case"NOTBETWEEN":case"LIKE":case"NOT LIKE":case"<>":case"<":case">":case">=":case"<=":case"=":return"boolean";case"IS":case"ISNOT":if("null"!==i.right.type)throw new S.eS(S.f.UnsupportedIsRhs);return"boolean";case"*":case"-":case"+":case"/":return s([a(h,i.left,y,f),a(h,i.right,y,f)]);case"||":return"string";default:throw new S.eS(S.f.UnsupportedOperator,{operator:i.operator})}case"null":return"";case"boolean":return"boolean";case"string":return"string";case"number":return null===i.value?"":i.value%1==0?"integer":"double";case"date":case"timestamp":case"current-time":return"date";case"column-reference":{const d=h[i.column.toLowerCase()];return void 0===d?"":d}case"function":switch(i.name.toLowerCase()){case"cast":switch(i.args?.value[1]?.value.type??""){case"integer":case"smallint":return"integer";case"real":case"float":return"double";case"date":case"timestamp":return"date";case"varchar":return"string";default:return""}case"position":case"extract":case"char_length":case"mod":return"integer";case"round":if(c=a(h,i.args,y,f),c instanceof Array){if(c.length<=0)return"double";c=c[0]}return c;case"sign":return"integer";case"ceiling":case"floor":case"abs":return c=a(h,i.args,y,f),c instanceof Array&&(c=s(c)),"integer"===c||"double"===c?c:"double";case"area":case"length":case"log":case"log10":case"sin":case"cos":case"tan":case"asin":case"acos":case"atan":case"cosh":case"sinh":case"tanh":case"power":return"double";case"substring":case"trim":case"concat":case"lower":case"upper":return"string";case"truncate":return"double";case"nullif":case"coalesce":return c=a(h,i.args,y,f),c instanceof Array?c.length>0?c[0]:"":c}return""}throw new S.eS(S.f.UnsupportedSyntax,{node:i.type})}const l={boolean:1,string:2,integer:3,double:4,date:5};function s(h){if(h){let i="";for(const y of h)""!==y&&(i=""===i||l[i]<l[y]?y:i);return i}return""}function _(h,i){return w(h.parseTree,i)}function p(h){return"column-reference"===h?.parseTree.type}function w(h,i){if(null==h)return!1;switch(h.type){case"when-clause":return w(h.operand,i)||w(h.value,i);case"case-expression":for(const y of h.clauses)if(w(y,i))return!0;return!("simple"!==h.format||!w(h.operand,i))||!(null===h.else||!w(h.else,i));case"parameter":case"null":case"boolean":case"date":case"timestamp":case"string":case"number":return!1;case"expression-list":for(const y of h.value)if(w(y,i))return!0;return!1;case"unary-expression":return w(h.expr,i);case"binary-expression":return w(h.left,i)||w(h.right,i);case"column-reference":return i.toLowerCase()===h.column.toLowerCase();case"function":return w(h.args,i)}return!1}function C(h){let i="";return i+=h.period.toUpperCase(),i}function M(h,i,y){let f="";return f="interval-period"===i.type?C(i):C(i.start)+" TO "+C(i.end),"INTERVAL "+y+" "+h+" "+f}},61709:(z,V,b)=>{b.d(V,{CA:()=>a,EB:()=>y,Fp:()=>N,J6:()=>E,QX:()=>C,Sm:()=>p,VV:()=>g,g3:()=>F,m:()=>s,tj:()=>B});var I=b(71670),v=b(23373),H=b(84940),S=b(48697);function R(c){let d=0;for(let T=0;T<c.length;T++)d+=c[T];return d/c.length}function W(c){const d=R(c);let T=0;for(let L=0;L<c.length;L++)T+=(d-c[L])**2;return T/c.length}function P(c){const d=R(c);let T=0;for(let L=0;L<c.length;L++)T+=(d-c[L])**2;return T/(c.length-1)}function $(c){let d=0;for(let T=0;T<c.length;T++)d+=c[T];return d}function F(c){switch(c.toLowerCase()){case"distinct":return"distinct";case"avg":case"mean":return"avg";case"min":return"min";case"sum":return"sum";case"max":return"max";case"stdev":case"stddev":return"stddev";case"var":case"variance":return"var";case"count":return"count"}return""}function B(c,d,T=1e3){switch(c.toLowerCase()){case"distinct":return function x(c,d){const T=[],L={},J=[];for(let Z=0;Z<c.length;Z++){if(null!=c[Z]){const O=c[Z];if((0,H.hj)(O)||(0,H.HD)(O))void 0===L[O]&&(T.push(O),L[O]=1);else{let k=!1;for(let K=0;K<J.length;K++)!0===(0,H.tt)(J[K],O)&&(k=!0);!1===k&&(J.push(O),T.push(O))}}if(T.length>=d&&-1!==d)return T}return T}(d,T);case"avg":case"mean":return R(d);case"min":return Math.min.apply(Math,d);case"sum":return $(d);case"max":return Math.max.apply(Math,d);case"stdev":case"stddev":return Math.sqrt(W(d));case"var":case"variance":return W(d);case"count":return d.length}return 0}function g(c,d,T){return j.apply(this,arguments)}function j(){return(j=(0,I.Z)(function*(c,d,T){const L=yield h(c,d,T,!0);return 0===L.length?null:Math.min.apply(Math,L)})).apply(this,arguments)}function N(c,d,T){return D.apply(this,arguments)}function D(){return(D=(0,I.Z)(function*(c,d,T){const L=yield h(c,d,T,!0);return 0===L.length?null:Math.max.apply(Math,L)})).apply(this,arguments)}function E(c,d,T){return e.apply(this,arguments)}function e(){return(e=(0,I.Z)(function*(c,d,T){let L="";d&&!(0,S.y5)(d)&&(L=(0,S.DT)(d,c.fields));const J=yield h(c,d,T,!0);if(0===J.length)return null;const Z=R(J);return null===Z?Z:"integer"===L?function G(c){return c=+c,isFinite(c)?c-c%1||(c<0?-0:0===c?c:0):c}(Z):Z})).apply(this,arguments)}function a(c,d,T){return l.apply(this,arguments)}function l(){return(l=(0,I.Z)(function*(c,d,T){const L=yield h(c,d,T,!0);return 0===L.length?null:P(L)})).apply(this,arguments)}function s(c,d,T){return _.apply(this,arguments)}function _(){return(_=(0,I.Z)(function*(c,d,T){const L=yield h(c,d,T,!0);return 0===L.length?null:Math.sqrt(P(L))})).apply(this,arguments)}function p(c,d,T){return w.apply(this,arguments)}function w(){return(w=(0,I.Z)(function*(c,d,T){const L=yield h(c,d,T,!0);return 0===L.length?null:$(L)})).apply(this,arguments)}function C(c,d){return M.apply(this,arguments)}function M(){return(M=(0,I.Z)(function*(c,d){return c.iterator(d).count()})).apply(this,arguments)}function h(c,d,T){return i.apply(this,arguments)}function i(){return(i=(0,I.Z)(function*(c,d,T,L=!1){const J=c.iterator(T),Z=[],O={ticker:0};let k=yield J.next();for(;null!==k;){if(O.ticker++,T.aborted)throw new v.EN(v.H9.Cancelled);O.ticker%100==0&&(O.ticker=0,yield new Promise(Y=>{setTimeout(Y,0)}));const K=d?.calculateValue(k);null===K?!1===L&&(Z[Z.length]=K):Z[Z.length]=K,k=yield J.next()}return Z})).apply(this,arguments)}function y(c,d){return f.apply(this,arguments)}function f(){return(f=(0,I.Z)(function*(c,d,T=1e3,L=null){const J=c.iterator(L),Z=[],O={},k={ticker:0};let K=yield J.next();for(;null!==K;){if(k.ticker++,L&&L.aborted)throw new v.EN(v.H9.Cancelled);k.ticker%100==0&&(k.ticker=0,yield new Promise(ee=>{setTimeout(ee,0)}));const Y=d?.calculateValue(K);if(null!=Y&&void 0===O[Y]&&(Z.push(Y),O[Y]=1),Z.length>=T&&-1!==T)return Z;K=yield J.next()}return Z})).apply(this,arguments)}},51050:(z,V,b)=>{b.d(V,{CJ:()=>De,Cz:()=>we,D$:()=>ve,ED:()=>y,G0:()=>Se,Gg:()=>d,JI:()=>J,LV:()=>c,Nm:()=>f,Sp:()=>K,TE:()=>w,U1:()=>xe,W4:()=>h,Y4:()=>Re,cv:()=>Te,e5:()=>O,f3:()=>Ie,fS:()=>C,j2:()=>Fe,jU:()=>p,kK:()=>M,kQ:()=>Pe,og:()=>T,oq:()=>e,r3:()=>_,rd:()=>Ee,sz:()=>be,uh:()=>i,wf:()=>ee,z7:()=>l});var I=b(71670),H=(b(6010),b(28502)),G=(b(35787),b(71182));function R(u){return Array.isArray(u)?u[0]?.spatialReference:u?.spatialReference}function W(u){return u&&(Array.isArray(u)?u.map(W):u.toJSON?u.toJSON():u)}function P(u){return Array.isArray(u)?u.map(m=>(0,G.im)(m)):(0,G.im)(u)}let x;function B(){return(B=(0,I.Z)(function*(){return x||(x=(0,H.bA)("geometryEngineWorker",{strategy:"distributed"})),x})).apply(this,arguments)}function g(u,m){return j.apply(this,arguments)}function j(){return(j=(0,I.Z)(function*(u,m){return(yield function F(){return B.apply(this,arguments)}()).invoke("executeGEOperation",{operation:u,parameters:W(m)})})).apply(this,arguments)}function e(u,m){return a.apply(this,arguments)}function a(){return(a=(0,I.Z)(function*(u,m){return P(yield g("clip",[R(u),u,m]))})).apply(this,arguments)}function l(u,m){return s.apply(this,arguments)}function s(){return(s=(0,I.Z)(function*(u,m){return P(yield g("cut",[R(u),u,m]))})).apply(this,arguments)}function _(u,m){return g("contains",[R(u),u,m])}function p(u,m){return g("crosses",[R(u),u,m])}function w(u,m,A){return g("distance",[R(u),u,m,A])}function C(u,m){return g("equals",[R(u),u,m])}function M(u,m){return g("intersects",[R(u),u,m])}function h(u,m){return g("touches",[R(u),u,m])}function i(u,m){return g("within",[R(u),u,m])}function y(u,m){return g("disjoint",[R(u),u,m])}function f(u,m){return g("overlaps",[R(u),u,m])}function c(u,m,A){return g("relate",[R(u),u,m,A])}function d(u){return g("isSimple",[R(u),u])}function T(u){return L.apply(this,arguments)}function L(){return(L=(0,I.Z)(function*(u){return P(yield g("simplify",[R(u),u]))})).apply(this,arguments)}function J(u){return Z.apply(this,arguments)}function Z(){return(Z=(0,I.Z)(function*(u,m=!1){return P(yield g("convexHull",[R(u),u,m]))})).apply(this,arguments)}function O(u,m){return k.apply(this,arguments)}function k(){return(k=(0,I.Z)(function*(u,m){return P(yield g("difference",[R(u),u,m]))})).apply(this,arguments)}function K(u,m){return Y.apply(this,arguments)}function Y(){return(Y=(0,I.Z)(function*(u,m){return P(yield g("symmetricDifference",[R(u),u,m]))})).apply(this,arguments)}function ee(u,m){return te.apply(this,arguments)}function te(){return(te=(0,I.Z)(function*(u,m){return P(yield g("intersect",[R(u),u,m]))})).apply(this,arguments)}function Se(u){return re.apply(this,arguments)}function re(){return(re=(0,I.Z)(function*(u,m=null){const A=function $(u,m){let A;return Array.isArray(u)?A=u:(A=[],A.push(u),null!=m&&A.push(m)),A}(u,m);return P(yield g("union",[R(A),A]))})).apply(this,arguments)}function Te(u,m,A,U,Q,q){return ne.apply(this,arguments)}function ne(){return(ne=(0,I.Z)(function*(u,m,A,U,Q,q){return P(yield g("offset",[R(u),u,m,A,U,Q,q]))})).apply(this,arguments)}function Ie(u,m,A){return ae.apply(this,arguments)}function ae(){return(ae=(0,I.Z)(function*(u,m,A,U=!1){const Q=[R(u),u,m,A,U];return P(yield g("buffer",Q))})).apply(this,arguments)}function Ee(u,m,A,U,Q,q){return se.apply(this,arguments)}function se(){return(se=(0,I.Z)(function*(u,m,A,U,Q,q){const Ae=[R(u),u,m,A,U,Q,q];return P(yield g("geodesicBuffer",Ae))})).apply(this,arguments)}function xe(u,m,A){return ce.apply(this,arguments)}function ce(){return(ce=(0,I.Z)(function*(u,m,A){if(null==u)throw new X;const U=u.spatialReference;if(null==(A=A??function oe(u){return"xmin"in u?u.center:"x"in u?u:u.extent?.center}(u)))throw new X;const Q=u.constructor.fromJSON(yield g("rotate",[U,u,m,A]));return Q.spatialReference=U,Q})).apply(this,arguments)}function ve(u,m,A,U){return de.apply(this,arguments)}function de(){return(de=(0,I.Z)(function*(u,m,A,U){return P(yield g("generalize",[R(u),u,m,A,U]))})).apply(this,arguments)}function we(u,m,A){return pe.apply(this,arguments)}function pe(){return(pe=(0,I.Z)(function*(u,m,A){return P(yield g("densify",[R(u),u,m,A]))})).apply(this,arguments)}function Fe(u,m,A){return fe.apply(this,arguments)}function fe(){return(fe=(0,I.Z)(function*(u,m,A,U=0){return P(yield g("geodesicDensify",[R(u),u,m,A,U]))})).apply(this,arguments)}function De(u,m){return g("planarArea",[R(u),u,m])}function be(u,m){return g("planarLength",[R(u),u,m])}function Re(u,m,A){return g("geodesicArea",[R(u),u,m,A])}function Pe(u,m,A){return g("geodesicLength",[R(u),u,m,A])}class X extends Error{constructor(){super("Illegal Argument Exception")}}}}]);
//# sourceMappingURL=5769.f865d302768a826f.js.map