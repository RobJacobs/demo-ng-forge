"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[640],{9620:(P,C,n)=>{n.d(C,{S:()=>v});var e=n(4896),y=n(1332),D=n(1296),E=n(604),p=n(6260),f=n(2504);let v=(()=>{class g{constructor(){this.httpClient=(0,e.uUt)(y.KK)}getProfile(){return this.httpClient.get("mock-data/profile.json")}getPeople(l){return this.httpClient.get("mock-data/people.json").pipe((0,E.k)(a=>{let c=a.length;return l&&(l.filters?.length&&(c=(a=f.q.filterData(a,l.filters.map(m=>({key:m.property,value:m.value,strict:"gender"===m.property||"id"===m.property})))).length),l.sort&&(a=f.q.sortData(a,l.sort.property,"string",l.sort.direction)),(0,p.Ib)(l.skip)&&(0,p.Ib)(l.take)&&(a=a.slice(l.skip,l.skip+l.take))),{count:c,data:a}}))}getPerson(l){return this.httpClient.get("mock-data/people.json").pipe((0,E.k)(a=>a.find(c=>c.id.toString()===l.toString())))}getSearches(l){return new D._(a=>{let c=localStorage.getItem(l);(0,p.Ks)(c)&&(c=JSON.parse(c)),a.next(c),a.complete()})}saveSearches(l,a){return new D._(c=>{localStorage.setItem(l,JSON.stringify(a)),c.next(!0),c.complete()})}getLongRequest(){return this.httpClient.get("http://localhost:5000/long-request")}static#e=this.\u0275fac=function(a){return new(a||g)};static#t=this.\u0275prov=e.wxM({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},8640:(P,C,n)=>{n.r(C),n.d(C,{TableDemoComponent:()=>S});var e=n(4896),y=n(5056),D=n(1616),E=n(4844),p=n(968),f=n(3244),v=n(4364),g=n(8600),M=n(728),l=n(2340),a=n(3764),c=n(3512),m=n(6260),d=n(2395),x=n(9620),k=n(7599);const w=["table"],R=["columnHeaderPopup"];function T(s,h){if(1&s&&e.wR5(0,"forge-icon",20),2&s){const t=e.GaO().$implicit;e.E7m("name","DESC"===t.sortDirection?"arrow_downward":"ASC"===t.sortDirection?"arrow_upward":"")}}function I(s,h){if(1&s){const t=e.KQA();e.I0R(0,"th",12,13),e.qCj("cdkDragStarted",function(){e.usT(t);const r=e.GaO();return e.CGJ(r.onColumnHeaderDragStart())})("click",function(){const i=e.usT(t).$implicit,_=e.Gew(1),u=e.GaO();return _.close(),e.CGJ(u.onTableSort(i))})("contextmenu",function(r){e.usT(t);const i=e.GaO();return e.CGJ(i.onColumnHeaderRightClick(r))}),e.I0R(2,"div",14)(3,"span",15),e.OEk(4),e.C$Y(),e.yuY(5,T,1,1,"forge-icon",16),e.C$Y(),e.I0R(6,"div",17),e.wR5(7,"div",18),e.I0R(8,"div",19),e.qCj("mousedown",function(r){const i=e.usT(t),_=i.$index,u=i.$implicit,O=e.GaO();return e.CGJ(O.onColumnHeaderResize(r,_,u))}),e.C$Y()()()}if(2&s){const t=h.$implicit;e.GaO();const o=e.Gew(19);e.m4B("--table-column-width",t.width),e.E7m("forgePopup",o)("forgePopupPlacement","right-end"),e.yG2(4),e.cNF(t.header),e.yG2(),e.C0Y(5,null!=t.sortDirection&&t.sortDirection.length?5:-1)}}function L(s,h){if(1&s&&(e.I0R(0,"td",22)(1,"div",23),e.OEk(2),e.C$Y()()),2&s){const t=h.$implicit,o=e.GaO().$implicit;e.yG2(2),e.oRS(" ",o[t.property]," ")}}function z(s,h){if(1&s&&(e.I0R(0,"tr",21),e.c53(1,L,3,1,"td",24,e.wJt),e.wVc(3,"appCallback"),e.C$Y()),2&s){const t=e.GaO();e.yG2(),e.oho(e.g7$(3,0,t.tableColumns,t.visibleColumns))}}function A(s,h){if(1&s&&(e.I0R(0,"forge-list-item",28)(1,"forge-checkbox",29),e.wR5(2,"input",30),e.C$Y(),e.I0R(3,"span"),e.OEk(4),e.C$Y()()),2&s){const t=h.$implicit;e.E7m("value",t),e.yG2(2),e.E7m("checked",!t.hidden),e.yG2(2),e.cNF(t.header)}}function F(s,h){if(1&s){const t=e.KQA();e.I0R(0,"forge-list",25),e.qCj("forge-list-item-select",function(r){e.usT(t);const i=e.GaO();return e.CGJ(i.onColumnPopupItemSelected(r.detail.value))}),e.c53(1,A,5,3,"forge-list-item",28,e.wJt),e.wR5(3,"forge-divider"),e.I0R(4,"forge-list-item",26)(5,"span"),e.OEk(6,"Reset column widths"),e.C$Y()(),e.I0R(7,"forge-list-item",27)(8,"span"),e.OEk(9,"Freeze column"),e.C$Y()()()}if(2&s){const t=e.GaO();e.yG2(),e.oho(t.tableColumns)}}let S=(()=>{class s{constructor(){this.appDataService=(0,e.uUt)(x.S),this.tableColumnResize$=new D.E,this.isColumnResizing=!1,this.isBusy=!1,this.filterCache={sort:{property:"lastName",direction:c.AB.Ascending},filters:[],skip:0,take:25},this.recordset=[],this.recordset$=new E.g([]),this.recordCount=0,this.tableColumns=[{header:"Id",property:"id"},{header:"First",property:"firstName",width:400},{header:"Last",property:"lastName"},{header:"Gender",property:"gender"},{header:"Occupation",property:"occupation"}],this.tableHeaderOffset=0,this.visibleColumns=t=>t.filter(o=>!0!==o.hidden),this.recordsetTrackBy=(t,o)=>o.id}ngOnInit(){this.getRecords()}ngAfterViewInit(){this.virtualScrollViewport?.renderedRangeStream.subscribe(t=>{this.tableHeaderOffset=t.start,!this.isBusy&&t.start>0&&t.end+67>this.recordCount&&(this.isBusy=!0,this.appDataService.getPeople({sort:this.filterCache.sort}).pipe((0,p.U)(()=>this.isBusy=!1)).subscribe(o=>{const r=this.recordset.length+1;this.recordset=[...this.recordset,...o.data.map((i,_)=>(i.id=r+i.id,i))],this.recordCount=this.recordset.length,this.recordset$.next(this.recordset)}))})}ngOnDestroy(){this.tableColumnResize$.next(),this.tableColumnResize$.complete()}onColumnHeaderDragStart(){this.virtualScrollViewport?.scrollToOffset(0)}onColumnHeaderDragDrop(t){(0,l.qv)(this.tableColumns,t.previousIndex,t.currentIndex),this.tableColumns=[...this.tableColumns]}onColumnHeaderResize(t,o,r){t.stopPropagation(),t.preventDefault(),this.tableColumnResize$.next();let i=(this.tableElementRef?.nativeElement).querySelectorAll("thead tr th")[o],_=(this.tableElementRef?.nativeElement).querySelectorAll(`tbody tr td:nth-child(${o+1})`),u=t.clientX;if(i){this.isColumnResizing=!0,this.tableElementRef?.nativeElement.querySelector(".forge-table-head__row")?.classList.add("forge-table-head__row--resizing"),i.classList.add("forge-table-head__cell--resizing"),_.forEach(b=>b.classList.add("forge-table-body__cell--resizing")),(0,f.w)(document.body,"mousemove").pipe((0,v.a)(this.tableColumnResize$),(0,g.y)(b=>{r.width=i.offsetWidth+(b.clientX-u),u=b.clientX})).subscribe();const O=this.tableElementRef?.nativeElement.querySelector("thead");(0,M.U)((0,f.w)(O,"mouseup"),(0,f.w)(O,"mouseleave")).pipe((0,p.U)(()=>requestAnimationFrame(()=>{this.isColumnResizing=!1,i=void 0,_=void 0})),(0,v.a)(this.tableColumnResize$),(0,g.y)(b=>{this.tableColumnResize$.next(),this.tableElementRef?.nativeElement.querySelector(".forge-table-head__row")?.classList.remove("forge-table-head__row--resizing"),i.classList.remove("forge-table-head__cell--resizing"),_.forEach(B=>B.classList.remove("forge-table-body__cell--resizing"))})).subscribe()}}onColumnHeaderRightClick(t){t.preventDefault(),this.columnHeaderPopupDirective?.popupElement?this.columnHeaderPopupDirective.close():this.columnHeaderPopupDirective?.open()}onColumnPopupItemSelected(t){switch(t){case"reset-column-width":this.tableColumns.forEach(o=>o.width=void 0);break;case"freeze-column":{const o=(this.tableElementRef?.nativeElement).querySelectorAll("thead tr th")[0],r=(this.tableElementRef?.nativeElement).querySelectorAll("tbody tr td:nth-child(1)");o.classList.add("forge-table-head__cell--frozen"),r.forEach(i=>i.classList.add("forge-table-body__cell--frozen"));break}default:{const o=this.tableColumns.find(r=>r.property===t.property);o&&this.tableColumns.filter(r=>!r.hidden).length&&(o.hidden=!(0,m.Ks)(o.hidden)||!o.hidden,o.sortDirection=void 0,this.tableColumns=[...this.tableColumns]);break}}this.columnHeaderPopupDirective?.close()}onTableSort(t){this.isColumnResizing||(this.tableColumns.filter(o=>o.property!==t.property).forEach(o=>o.sortDirection=void 0),t.sortDirection=t.sortDirection===c.AB.Ascending?c.AB.Descending:t.sortDirection===c.AB.Descending?void 0:c.AB.Ascending,this.filterCache.sort=t.sortDirection?{property:t.property,direction:t.sortDirection}:void 0,this.filterCache.skip=0,this.virtualScrollViewport?.scrollToOffset(0),this.getRecords())}onTablePaginatorChange(t){this.filterCache.skip=t.pageIndex*t.pageSize,this.filterCache.take=t.pageSize,this.getRecords()}getRecords(){this.isBusy=!0,this.appDataService.getPeople({sort:this.filterCache.sort}).pipe((0,p.U)(()=>this.isBusy=!1)).subscribe(t=>{this.recordset=t.data,this.recordCount=t.count,this.recordset$.next(this.recordset)})}static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275cmp=e.In1({type:s,selectors:[["app-table-demo"]],viewQuery:function(o,r){if(1&o&&(e.CC$(w,7),e.CC$(R,5,d.qCr),e.CC$(a.G3,5)),2&o){let i;e.wto(i=e.Gqi())&&(r.tableElementRef=i.first),e.wto(i=e.Gqi())&&(r.columnHeaderPopupDirective=i.first),e.wto(i=e.Gqi())&&(r.virtualScrollViewport=i.first)}},standalone:!0,features:[e.UHJ],decls:20,vars:10,consts:[[1,"header"],["slot","start",1,"forge-typography--title"],[1,"body"],[1,"body__table"],["itemSize","48"],[1,"forge-table","forge-table--fixed"],["table",""],["cdkDropList","","cdkDropListOrientation","horizontal",1,"forge-table-row","forge-table-head__row",3,"cdkDropListDropped"],["class","forge-table-row forge-table-body__row",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["inverted","true"],["slot","end",1,"forge-typography--caption"],["columnHeaderPopupTemplate",""],["scope","col","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",1,"forge-table-cell","forge-table-head__cell","forge-table-head__cell--sortable",3,"forgePopup","forgePopupPlacement","cdkDragStarted","click","contextmenu"],["columnHeaderPopup","forgePopup"],[1,"forge-table-head__cell-container"],[1,"forge-table-head__cell-text"],["class","forge-table-head__cell-sort-icon","aria-hidden","true",3,"name"],[1,"forge-table-head__cell-actions"],["cdkDragHandle","",1,"forge-table-head__cell-dragger"],[1,"forge-table-head__cell-resizer",3,"mousedown"],["aria-hidden","true",1,"forge-table-head__cell-sort-icon",3,"name"],[1,"forge-table-row","forge-table-body__row"],[1,"forge-table-cell","forge-table-body__cell"],[1,"forge-table-cell__container"],["class","forge-table-cell forge-table-body__cell"],[1,"column-popup",3,"forge-list-item-select"],["value","reset-column-width"],["value","freeze-column"],[3,"value"],["slot","leading"],["type","checkbox","checked","","aria-label","Show/hide table column",3,"checked"],["scope","col","class","forge-table-cell forge-table-head__cell forge-table-head__cell--sortable","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",3,"forgePopup","forgePopupPlacement","--table-column-width"]],template:function(o,r){1&o&&(e.I0R(0,"forge-toolbar",0)(1,"h2",1),e.OEk(2,"Table demo"),e.C$Y()(),e.I0R(3,"div",2)(4,"div",3)(5,"cdk-virtual-scroll-viewport",4)(6,"table",5,6)(8,"thead")(9,"tr",7),e.qCj("cdkDropListDropped",function(_){return r.onColumnHeaderDragDrop(_)}),e.c53(10,I,9,6,"th",31,e.wJt),e.wVc(12,"appCallback"),e.C$Y()(),e.I0R(13,"tbody"),e.yuY(14,z,4,3,"tr",8),e.C$Y()()()(),e.I0R(15,"forge-toolbar",9)(16,"span",10),e.OEk(17),e.C$Y()()(),e.yuY(18,F,10,0,"ng-template",null,11,e.gJz)),2&o&&(e.yG2(8),e.m4B("--table-header-offset",r.tableHeaderOffset)("--table-header-translate-y",-48*r.tableHeaderOffset+"px"),e.yG2(2),e.oho(e.g7$(12,7,r.tableColumns,r.visibleColumns)),e.yG2(4),e.E7m("cdkVirtualForOf",r.recordset$)("cdkVirtualForTrackBy",r.recordsetTrackBy),e.yG2(3),e.oRS("Records: ",r.recordCount,""))},dependencies:[y.MD,l.OI,l.Cm,l.w5,l.A3,a.c$,a.UF,a.SR,a.G3,d.ekk,d.KU0,d.GqF,d.u_Z,d.mkN,d.gFQ,d.E9p,d.ANn,d.CiN,d.yMO,d.Yns,d.qCr,d.Et_,d.Q7c,k.W],styles:["\n\n\n\n\n[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;background-color:#fff;background-color:var(--mdc-theme-surface, #ffffff)}[_nghost-%COMP%]     .forge-table{min-width:100%;width:max-content;position:relative}[_nghost-%COMP%]     .forge-table-head__row{height:48px}[_nghost-%COMP%]     .forge-table-head__row--resizing .forge-table-head__cell:not(.forge-table-head__cell--resizing) .forge-table-head__cell-actions{display:none}[_nghost-%COMP%]     .forge-table-head__cell{padding-left:12px;padding-right:12px;border-right:1px solid transparent;width:calc(var(--table-column-width, 200) * 1px);top:calc(var(--table-header-offset, 0) * 48px * -1)}[_nghost-%COMP%]     .forge-table-head__cell:first-child{padding-left:24px!important;padding-right:12px!important}[_nghost-%COMP%]     .forge-table-head__cell:hover .forge-table-head__cell-actions{transition-delay:.5s;width:48px}[_nghost-%COMP%]     .forge-table-head__cell-sort-icon{display:inline!important}[_nghost-%COMP%]     .forge-table-head__cell-actions{position:absolute;top:4px;bottom:4px;right:8px;display:flex;width:0;overflow:hidden;transition:width .25s;height:40px}[_nghost-%COMP%]     .forge-table-head__cell--resizing{border-right-color:var(--mdc-theme-primary)}[_nghost-%COMP%]     .forge-table-head__cell--resizing .forge-table-head__cell-actions{transition-delay:0;width:24px}[_nghost-%COMP%]     .forge-table-head__cell--resizing .forge-table-head__cell-dragger{display:none}[_nghost-%COMP%]     .forge-table-head__cell--frozen{position:sticky;left:0;z-index:2!important;background-color:var(--mdc-theme-surface);border-right-color:var(--mdc-theme-primary)}[_nghost-%COMP%]     .forge-table-head__cell-dragger, [_nghost-%COMP%]     .forge-table-head__cell-resizer{height:100%;min-width:24px;margin-left:auto;border:1px solid var(--forge-theme-border-color);background-color:var(--forge-theme-scrollbar-track-hover)}[_nghost-%COMP%]     .forge-table-head__cell-dragger{background-image:url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3Csvg%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20id%3D%22Edit%20%2F%20Move%22%3E%3Cpath%20id%3D%22Vector%22%20d%3D%22M12%2021V12M12%2021L15%2018M12%2021L9%2018M12%2012V3M12%2012H3M12%2012H21M12%203L9%206M12%203L15%206M3%2012L6%2015M3%2012L6%209M21%2012L18%209M21%2012L18%2015%22%20stroke%3D%22%23000000%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-position:center}[_nghost-%COMP%]     .forge-table-head__cell-resizer{background-image:url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3Csvg%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20id%3D%22Edit%20%2F%20Move_Horizontal%22%3E%3Cpath%20id%3D%22Vector%22%20d%3D%22M3%2012H21M3%2012L6%2015M3%2012L6%209M21%2012L18%209M21%2012L18%2015%22%20stroke%3D%22%23000000%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-position:center}[_nghost-%COMP%]     .forge-table-body__row{height:48px}[_nghost-%COMP%]     .forge-table-body__cell{padding-left:12px;padding-right:12px;border-right:1px solid transparent}[_nghost-%COMP%]     .forge-table-body__cell:first-child{padding-left:24px!important;padding-right:12px!important}[_nghost-%COMP%]     .forge-table-body__cell--resizing{border-right-color:var(--mdc-theme-primary)}[_nghost-%COMP%]     .forge-table-body__cell--frozen{position:sticky;left:0;z-index:2!important;background-color:var(--mdc-theme-surface);border-right-color:var(--mdc-theme-primary)}  .column-popup{min-width:280px;--forge-list-padding: 0}  .column-popup forge-list-item{cursor:pointer}.body[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr auto;overflow:hidden;height:100%}.body[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:100%}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f;background:#fff;background:var(--mdc-theme-surface, #ffffff);border:solid 2px #3f51b5;display:flex;padding:0 24px}.cdk-drag-preview[_ngcontent-%COMP%]   forge-button[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#e8eaf6}.cdk-drag-placeholder[_ngcontent-%COMP%]   .forge-table-head__cell-container[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return s})()}}]);
//# sourceMappingURL=640.7b05e593c60ac564.js.map