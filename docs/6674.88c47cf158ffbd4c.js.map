{"version":3,"file":"6674.88c47cf158ffbd4c.js","mappings":"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","names":["c","r","f","type","evaluate","p","getAttribute","e","field","m","_x","_x2","_x3","_m","apply","this","arguments","_asyncToGenerator","a","n","symbol","o","where","i","l","__webpack_require__","then","bind","g","s","expression","t","$feature","repurposeFeature","toString","error","feature","needsHydrationToEvaluate","u","replace","slice","get","attributes","name","d","WhereClause","create","y","testFeature","domain","codedValues","code","range","minValue","maxValue"],"sourceRoot":"webpack:///","sources":["./node_modules/@arcgis/core/layers/support/labelFormatUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{isNone as t}from\"../../core/maybe.js\";import{formatDate as a,convertDateFormatToIntlOptions as n}from\"../../intl/date.js\";import{formatNumber as o}from\"../../intl/number.js\";import{isNumericField as i}from\"./fieldUtils.js\";import{getLabelExpression as l,getSingleFieldArcadeExpression as u}from\"./labelUtils.js\";import{createLabelExpression as s}from\"../../support/arcadeOnDemand.js\";const c=r.getLogger(\"esri.layers.support.labelFormatUtils\"),f={type:\"simple\",evaluate:()=>null},p={getAttribute:(e,r)=>e.field(r)};async function m(r,a,n){if(!r||!r.symbol||!a)return f;const o=r.where,i=l(r),m=o?await import(\"../../core/sql/WhereClause.js\"):null;let g;if(\"arcade\"===i.type){const r=await s(i.expression,n,a);if(t(r))return f;g={type:\"arcade\",evaluate(t){try{const e=r.evaluate({$feature:\"attributes\"in t?r.repurposeFeature(t):t});if(null!=e)return e.toString()}catch(a){c.error(new e(\"arcade-expression-error\",\"Encountered an error when evaluating label expression for feature\",{feature:t,expression:i}))}return null},needsHydrationToEvaluate:()=>null==u(i.expression)}}else g={type:\"simple\",evaluate:e=>i.expression.replace(/{[^}]*}/g,(r=>{const t=r.slice(1,-1),n=a.get(t);if(!n)return r;let o=null;if(\"attributes\"in e){e&&e.attributes&&(o=e.attributes[n.name])}else o=e.field(n.name);return null==o?\"\":d(o,n)}))};if(o){let r;try{r=m.WhereClause.create(o,a)}catch(y){return c.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause, ignoring\",{where:o,error:y})),f}const t=g.evaluate;g.evaluate=a=>{const n=\"attributes\"in a?void 0:p;try{if(r.testFeature(a,n))return t(a)}catch(y){c.error(new e(\"bad-where-clause\",\"Encountered an error when evaluating where clause for feature\",{where:o,feature:a,error:y}))}return null}}return g}function d(e,r){if(null==e)return\"\";const t=r.domain;if(t)if(\"codedValue\"===t.type||\"coded-value\"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if(\"range\"===t.type){const r=+e,a=\"range\"in t?t.range[0]:t.minValue,n=\"range\"in t?t.range[1]:t.maxValue;if(a<=r&&r<=n)return t.name}let l=e;return\"date\"===r.type||\"esriFieldTypeDate\"===r.type?l=a(l,n(\"short-date\")):i(r)&&(l=o(+l)),l||\"\"}export{m as createLabelFunction,d as formatField};\n"],"x_google_ignoreList":[0]}