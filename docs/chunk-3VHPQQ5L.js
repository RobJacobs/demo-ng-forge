import"./chunk-RIJLVLGM.js";import{a as Ye}from"./chunk-LS7JJXJ2.js";import{e as Qe,r as Je}from"./chunk-IURIFBWO.js";import"./chunk-G23G7C43.js";import"./chunk-25LYXCFV.js";import{a as U,c as L,d as je}from"./chunk-OHW3R4WQ.js";import"./chunk-PSWJZLWW.js";import{a as B}from"./chunk-VT5BBUOX.js";import{a as $e}from"./chunk-WTEGRGZ6.js";import"./chunk-MZMUE3P7.js";import"./chunk-Y5FC5JZC.js";import"./chunk-OSFEDCAA.js";import{Ab as d,Ac as ve,Bc as Ce,Cc as he,Cd as V,Db as pe,Dd as z,Fb as de,Fc as A,Gc as R,Hc as be,Hd as Be,Ic as _e,Id as Ue,Jc as Fe,Jd as Le,Kb as me,Kc as Me,Lb as N,Mb as _,Nb as ce,Pb as F,Qb as T,cc as D,cd as ye,dc as q,dd as Pe,ed as xe,f as ie,fd as Ge,gd as Se,i as ne,jd as Oe,kd as we,ld as Ee,qd as Ie,rb as E,rd as ke,sd as Ne,tb as c,td as Te,uc as fe,ud as De,v as ae,vb as I,vd as qe,w as le,wb as b,wc as ue,wd as Ae,x as se,xc as ge,xd as Re,yb as k,yd as Ve,zd as ze}from"./chunk-WGIND62E.js";import{Ab as S,Bb as $,Cb as j,Db as Q,Eb as s,Fb as n,Gb as e,Hb as p,Lb as J,Mb as Y,Ob as O,Rb as f,Sb as h,Ta as ee,Va as a,Z as X,ca as m,d as W,dc as l,fc as M,ha as y,ia as P,kc as te,la as x,lb as C,oc as Z,sc as w,tc as re,uc as H,yb as oe,zb as G}from"./chunk-UXY6XTJ4.js";import"./chunk-NCBA65HR.js";var v=(()=>{class r{constructor(){this.formGroup=new k({personalFormGroup:new k({firstName:new d(null,{validators:[c.required]}),lastName:new d(null,{validators:[c.required]}),gender:new d(null,{validators:[c.required]}),email:new d(null,{validators:[c.required]}),phone:new d(null,{validators:[c.required]}),dateOfBirth:new d(null,{validators:[c.required]}),comment:new d(null),rank:new d(5),size:new d(null),citizen:new d(!1),entryDate:new d(null),friends:new de([])}),addressFormGroup:new k({name:new d(null,{validators:[c.required]}),street:new d(null,{validators:[c.required]}),city:new d(null,{validators:[c.required]}),state:new d(null,{validators:[c.required]}),zip:new d(null,{validators:[c.required]})})})}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275prov=X({token:r,factory:r.\u0275fac})}}return r})();var Ze=(r,g)=>[r,g];function oo(r,g){if(r&1){let t=O();n(0,"img",16),f("error",function(o){y(t);let u=h();return P(u.onImageError(o))}),e()}if(r&2){let t=h();s("src",t.imageUrl,ee)}}function to(r,g){r&1&&p(0,"forge-icon",8)}function ro(r,g){r&1&&p(0,"forge-icon",8)}var We=(()=>{class r{constructor(){this.destroyRef=m(x),this.router=m(se),this.route=m(ae),this.appDataService=m(B),this.dialogService=m(ve),this.toastService=m(Be),this.cache=m(v),this.noImageUrl="mock-data/no-image.png",this.activeTab=0}get personalFormGroup(){return this.cache.formGroup.controls.personalFormGroup}get addressFormGroup(){return this.cache.formGroup.controls.addressFormGroup}ngOnInit(){this.cache.profile&&this.loadForm(this.cache.profile),this.route.snapshot.children.map(t=>t.url.map(i=>i.path)).flat().includes("address")&&(this.activeTab=1)}canDeactivate(){return this.cache.formGroup.dirty?new W(t=>{this.dialogService.open(Qe,{options:{persistent:!0},data:{title:"Unsaved changes",message:"You have unsaved changes which will be lost, do you want to continue?"}}).afterClosed.subscribe({next:i=>{i&&this.cache.formGroup.reset(),t.next(i)}})}):!0}onLoadProfile(){this.appDataService.getProfile().pipe(T(this.destroyRef)).subscribe({next:t=>{this.cache.formGroup.reset(),this.cache.profile=t,this.loadForm(this.cache.profile)},error:()=>{this.toastService.show({message:"Error loading profile",theme:"error"})}})}onTabSelected(t){switch(this.activeTab){case 0:this.personalFormGroup.markAsTouched();break;case 1:this.addressFormGroup.markAsTouched();break}switch(t){case"personal":this.activeTab=0;break;case"address":this.activeTab=1;break}this.router.navigate([`profile/${t}`])}onSave(){this.cache.formGroup.invalid||(this.cache.profile=this.parseForm(this.cache.profile?.id),this.cache.formGroup.markAsPristine(),this.toastService.show({message:"Profile saved",theme:"success"}))}onCancel(){this.cache.formGroup.reset(),this.cache.formGroup.markAsPristine(),this.imageUrl=void 0,this.cache.profile=void 0}onImageError(t){let i=t.target;i.src.includes(this.noImageUrl)||(i.src=this.noImageUrl,i.onerror=null)}isInvalid(t){return t.every(i=>i===!0)}loadForm(t){this.imageUrl=`mock-data/${$e.formatNumber(parseInt(this.cache.profile?.id,109),"2.0-0")}-small.png`,this.personalFormGroup.controls.friends?.clear(),this.personalFormGroup.patchValue(t),this.addressFormGroup.patchValue(t.address)}parseForm(t){return{id:t||"-1",firstName:this.personalFormGroup.value.firstName,lastName:this.personalFormGroup.value.lastName,gender:this.personalFormGroup.value.gender,email:this.personalFormGroup.value.email,phone:this.personalFormGroup.value.phone,dateOfBirth:this.personalFormGroup.value.dateOfBirth,address:this.addressFormGroup.value}}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=C({type:r,selectors:[["app-profile"]],decls:33,vars:21,consts:[[1,"header"],["slot","start"],[1,"forge-typography--subheading4"],["alt","",3,"src"],["slot","end"],["variant","outlined",3,"click"],[3,"activeTab"],["id","app--profile--personal--tab","aria-controls","app--profile--personal--tab-body",3,"forge-tab-select"],["slot","end","name","error"],["id","app--profile--address--tab","aria-controls","app--profile--address--tab-body",3,"forge-tab-select"],[1,"body"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"forge-typography--label3",2,"margin-top","0"],[1,"app--color--error"],["inverted","",1,"footer"],["variant","filled",3,"click","disabled"],["alt","",3,"error","src"]],template:function(i,o){i&1&&(n(0,"forge-toolbar",0)(1,"div",1)(2,"h2",2),l(3,"Profile"),e(),G(4,oo,1,1,"img",3),e(),n(5,"div",4)(6,"forge-button",5),f("click",function(){return o.onLoadProfile()}),l(7," Load profile "),e()()(),n(8,"forge-tab-bar",6)(9,"forge-tab",7),f("forge-tab-select",function(){return o.onTabSelected("personal")}),l(10," Personal "),G(11,to,1,0,"forge-icon",8),w(12,"appCallback"),e(),n(13,"forge-tab",9),f("forge-tab-select",function(){return o.onTabSelected("address")}),l(14," Address "),G(15,ro,1,0,"forge-icon",8),w(16,"appCallback"),e()(),n(17,"div",10)(18,"form",11)(19,"p",12)(20,"span",13),l(21,"*"),e(),l(22," indicates a required field"),e(),p(23,"router-outlet"),n(24,"p"),l(25),w(26,"json"),e()()(),n(27,"forge-toolbar",14)(28,"div",4)(29,"forge-button",5),f("click",function(){return o.onCancel()}),l(30,"Cancel"),e(),n(31,"forge-button",15),f("click",function(){return o.onSave()}),l(32," Save "),e()()()),i&2&&(a(4),S(o.imageUrl?4:-1),a(4),s("activeTab",o.activeTab),a(3),S(H(12,7,Z(15,Ze,o.personalFormGroup.invalid,o.personalFormGroup.touched),o.isInvalid)?11:-1),a(4),S(H(16,10,Z(18,Ze,o.addressFormGroup.invalid,o.addressFormGroup.touched),o.isInvalid)?15:-1),a(3),s("formGroup",o.cache.formGroup),a(7),M(" ",re(26,13,o.cache.formGroup.getRawValue())," "),a(6),s("disabled",o.cache.formGroup.invalid||!o.cache.formGroup.dirty))},dependencies:[ne,le,F,pe,b,_,q,D,R,A,ze,Ve,Ae,Re,Le,Ue,ie,Ye],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto auto 1fr auto;overflow:hidden;background-color:var(--forge-theme-surface)}.header[_ngcontent-%COMP%]{overflow:hidden;--forge-toolbar-border-bottom: none}.header[_ngcontent-%COMP%]   [slot=end][_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.header[_ngcontent-%COMP%]   [slot=end][_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin:0 16px}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]{min-width:240px}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]   forge-icon[_ngcontent-%COMP%]{color:var(--forge-theme-error)}.body[_ngcontent-%COMP%]{padding:24px;overflow:auto}.footer[_ngcontent-%COMP%]   [slot=end][_ngcontent-%COMP%]   forge-button[_ngcontent-%COMP%]{margin-left:16px}






/*# sourceMappingURL=profile.component-NQQCDATG.css.map */`]})}}return r})();var Xe=(()=>{class r{constructor(){this.cache=m(v),this.streetErrorMessage="Street name is required"}get formGroup(){return this.cache.formGroup.controls.addressFormGroup}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=C({type:r,selectors:[["app-profile-address"]],hostAttrs:["role","tabpanel","id","app--profile--address--tab-body","aria-labelledby","app--profile--address--tab","tabindex","-1"],decls:22,vars:7,consts:[[1,"form-grid",3,"formGroup"],["required","","invalidMessage","Name is required",1,"form-grid--row-break",3,"appFormControlInvalid"],["slot","label","for","profile--address--name"],["type","text","id","profile--address--name","formControlName","name","appAutoFocus",""],["required","",1,"form-grid--row-break",3,"appFormControlInvalid","invalidMessage"],["slot","label","for","profile--address--street"],["type","text","id","profile--address--street","formControlName","street"],["required","","invalidMessage","City is required",3,"appFormControlInvalid"],["slot","label","for","profile--address--city"],["type","text","id","profile--address-city","formControlName","city"],[1,"form-grid__state-zip"],["required","","invalidMessage","State is required",3,"appFormControlInvalid"],["slot","label","for","profile--address--state"],["type","text","id","profile--address--state","formControlName","state"],["required","","invalidMessage","Zip code is required",3,"appFormControlInvalid"],["slot","label","for","profile--address--zip"],["type","text","id","profile--address--zip","formControlName","zip"]],template:function(i,o){i&1&&(n(0,"div",0)(1,"forge-text-field",1)(2,"label",2),l(3,"Name"),e(),p(4,"input",3),e(),n(5,"forge-text-field",4)(6,"label",5),l(7,"Street"),e(),p(8,"input",6),e(),n(9,"forge-text-field",7)(10,"label",8),l(11,"City"),e(),p(12,"input",9),e(),n(13,"div",10)(14,"forge-text-field",11)(15,"label",12),l(16,"State"),e(),p(17,"input",13),e(),n(18,"forge-text-field",14)(19,"label",15),l(20,"Zip code"),e(),p(21,"input",16),e()()()),i&2&&(s("formGroup",o.formGroup),a(),s("appFormControlInvalid",o.formGroup.controls.name),a(4),s("appFormControlInvalid",o.formGroup.controls.street)("invalidMessage",o.streetErrorMessage),a(4),s("appFormControlInvalid",o.formGroup.controls.city),a(5),s("appFormControlInvalid",o.formGroup.controls.state),a(4),s("appFormControlInvalid",o.formGroup.controls.zip))},dependencies:[F,E,I,b,_,N,z,V,L,U],styles:[`[_nghost-%COMP%]{display:block}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.form-grid--row-break[_ngcontent-%COMP%]{grid-column-start:1}.form-grid--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid--col-span.form-grid--col-span[_ngcontent-%COMP%]{width:auto}.form-grid--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.form-grid--col-span2.form-grid--col-span2[_ngcontent-%COMP%]{width:656px}.form-grid--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.form-grid--col-span3.form-grid--col-span3[_ngcontent-%COMP%]{width:992px}.form-grid[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.form-grid__name[_ngcontent-%COMP%], .form-grid__street[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid__state-zip[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;column-gap:16px}






/*# sourceMappingURL=address.component-FGQ3UQNY.css.map */`]})}}return r})();function io(r,g){if(r&1&&(n(0,"forge-radio",27),l(1),e()),r&2){let t=g.$implicit;s("value",te(t.value)),a(),M(" ",t.label," ")}}function no(r,g){if(r&1){let t=O();n(0,"div",32)(1,"forge-select",34)(2,"forge-icon-button",35),f("click",function(){let o=y(t).$index,u=h();return P(u.onDeleteFriend(o))}),p(3,"forge-icon",36),e()()()}if(r&2){let t=g.$index,i=h();a(),s("options",i.friendOptions)("formControlName",t)("appFormControlInvalid",i.formGroup.controls.friends.controls[t]),a(),oe("aria-label",`Delete friend ${t}`)}}var eo=(()=>{class r{constructor(){this.destroyRef=m(x),this.cache=m(v),this.appDataService=m(B),this.firstNameErrorMessage=new Map([["required","First name is required"],["duplicate","First name is duplicated"]]),this.genderOptions=[{label:"",value:null},{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Undecided",value:"U"}],this.friendOptions=[],this.sizeOptions=[{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"}]}get formGroup(){return this.cache.formGroup.controls.personalFormGroup}get friendsFormArray(){return this.formGroup.controls.friends}ngOnInit(){this.appDataService.getPeople().pipe(T(this.destroyRef)).subscribe({next:t=>{this.friendOptions=t.data.map(i=>({label:`${i.firstName} ${i.lastName}`,value:i.id}))}})}onAddFriend(){this.friendsFormArray.push(new d(null,{validators:[c.required]}))}onDeleteFriend(t){this.friendsFormArray.removeAt(t)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=C({type:r,selectors:[["app-profile-personal"]],hostAttrs:["role","tabpanel","id","app--profile--personal--tab-body","aria-labelledby","app--profile--personal--tab","tabindex","-1"],decls:52,vars:11,consts:[[3,"formGroup"],[1,"form-grid"],["required","",3,"appFormControlInvalid","invalidMessage"],["slot","label","for","profile--personal--first-name"],["type","text","id","profile--personal--first-name","formControlName","firstName","appAutoFocus","",3,"appInputCasing"],["required","","invalidMessage","Last name is required",3,"appFormControlInvalid"],["slot","label","for","profile--personal--last-name"],["type","text","id","profile--personal--last-name","formControlName","lastName"],["id","profile--personal--gender","label","Gender","required","","formControlName","gender","invalidMessage","Gender is required",3,"options","appFormControlInvalid"],["required","","invalidMessage","Email is required",3,"appFormControlInvalid"],["slot","label","for","profile--personal--email"],["type","text","id","profile--personal--email","formControlName","email"],["required","","invalidMessage","Phone number is required",3,"appFormControlInvalid"],["slot","label","for","profile--personal--phone"],["type","text","id","profile--personal--phone","formControlName","phone"],["formControlName","dateOfBirth"],["invalidMessage","DOB is required",3,"appFormControlInvalid"],["slot","label","for","profile--personal--dob"],["type","text","id","profile--personal--dob"],[1,"form-grid__comment","form-grid--col-span"],["slot","label","for","profile--personal--comment"],["type","text","id","profile--personal--comment","formControlName","comment","rows","4"],[2,"--forge-label-value-align","stretch"],["slot","label"],["slot","value"],["data-aria-label","Rank","min","0","max","10","formControlName","rank"],["slot","value","aria-label","Choose a size option","name","profile--personal--size"],["name","profile--personal--size","formControlName","size",3,"value"],["formControlName","citizen","aria-label","Is a citizen"],["label","Entry date","formControlName","entryDate"],[1,"friends"],["formArrayName","friends"],[1,"friend"],["variant","filled",3,"click"],["label","Friend","invalidMessage","A friend is required",3,"options","formControlName","appFormControlInvalid"],["slot","accessory","density","medium",3,"click"],["aria-hidden","true","name","delete"]],template:function(i,o){i&1&&(J(0,0),n(1,"div",1)(2,"forge-text-field",2)(3,"label",3),l(4,"First name"),e(),p(5,"input",4),e(),n(6,"forge-text-field",5)(7,"label",6),l(8,"Last name"),e(),p(9,"input",7),e(),p(10,"forge-select",8),n(11,"forge-text-field",9)(12,"label",10),l(13,"Email"),e(),p(14,"input",11),e(),n(15,"forge-text-field",12)(16,"label",13),l(17,"Phone"),e(),p(18,"input",14),e(),n(19,"forge-date-picker",15)(20,"forge-text-field",16)(21,"label",17),l(22,"Date of birth"),e(),p(23,"input",18),e()(),n(24,"forge-text-field",19)(25,"label",20),l(26,"Comment"),e(),p(27,"textarea",21),e(),n(28,"forge-label-value",22)(29,"span",23),l(30),e(),n(31,"div",24),p(32,"forge-slider",25),e()(),n(33,"forge-label-value")(34,"span",23),l(35,"Size"),e(),n(36,"forge-radio-group",26),j(37,io,2,3,"forge-radio",27,$),e()(),n(39,"forge-label-value")(40,"span",23),l(41,"Citizen"),e(),n(42,"div",24),p(43,"forge-switch",28),e()(),p(44,"app-date-time",29),e(),p(45,"forge-divider"),n(46,"div",30),J(47,31),j(48,no,4,4,"div",32,$),n(50,"forge-button",33),f("click",function(){return o.onAddFriend()}),l(51," Add friend"),e(),Y(),e(),Y()),i&2&&(s("formGroup",o.formGroup),a(2),s("appFormControlInvalid",o.formGroup.controls.firstName)("invalidMessage",o.firstNameErrorMessage),a(3),s("appInputCasing","upper"),a(),s("appFormControlInvalid",o.formGroup.controls.lastName),a(4),s("options",o.genderOptions)("appFormControlInvalid",o.formGroup.controls.gender),a(),s("appFormControlInvalid",o.formGroup.controls.email),a(4),s("appFormControlInvalid",o.formGroup.controls.phone),a(5),s("appFormControlInvalid",o.formGroup.controls.dateOfBirth),a(10),M("Rank ",o.formGroup.value.rank),a(7),Q(o.sizeOptions),a(11),Q(o.formGroup.controls.friends.controls))},dependencies:[F,E,I,b,ce,_,N,me,q,D,ge,ue,fe,he,Ce,_e,be,A,R,Me,Fe,Se,Ge,Pe,xe,ye,Ee,we,Oe,Ne,ke,Ie,qe,De,Te,z,V,L,je,Je,U],styles:[`[_nghost-%COMP%]{display:block}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.form-grid--row-break[_ngcontent-%COMP%]{grid-column-start:1}.form-grid--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid--col-span.form-grid--col-span[_ngcontent-%COMP%]{width:auto}.form-grid--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.form-grid--col-span2.form-grid--col-span2[_ngcontent-%COMP%]{width:656px}.form-grid--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.form-grid--col-span3.form-grid--col-span3[_ngcontent-%COMP%]{width:992px}.form-grid[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.form-grid__comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}forge-divider[_ngcontent-%COMP%]{margin:16px 0}.friends[_ngcontent-%COMP%]   .friend[_ngcontent-%COMP%]{padding-bottom:16px}.friends[_ngcontent-%COMP%]   .friend[_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]{width:320px}






/*# sourceMappingURL=personal.component-RGQH62CJ.css.map */`]})}}return r})();var jo=[{path:"",component:We,canDeactivate:[r=>r.canDeactivate()],providers:[v],children:[{path:"address",component:Xe},{path:"personal",component:eo},{path:"",redirectTo:"personal",pathMatch:"full"}]}];export{jo as PROFILE_ROUTES};
//# sourceMappingURL=chunk-3VHPQQ5L.js.map
