"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[491],{4635:(x,v,l)=>{l.d(v,{U:()=>b});var f=l(2235),h=l(9736),u=l(4135),e=l(5162),C=l(1699),m=l(4860);let b=(()=>{class g{constructor(r){this.httpClient=r}getProfile(){return this.httpClient.get("mock-data/profile.json")}getPeople(r){return this.httpClient.get("mock-data/people.json").pipe((0,h.U)(s=>{let p=s.length;return r&&(r.filters?.length&&(p=(s=e.c.filterData(s,r.filters.map(_=>({key:_.property,value:_.value,strict:"gender"===_.property||"id"===_.property})))).length),r.sort&&(s=e.c.sortData(s,r.sort.property,"string",r.sort.direction)),(0,u.hj)(r.skip)&&(0,u.hj)(r.take)&&(s=s.slice(r.skip,r.skip+r.take))),{count:p,data:s}}))}getPerson(r){return this.httpClient.get("mock-data/people.json").pipe((0,h.U)(s=>s.find(p=>p.id.toString()===r.toString())))}getSearches(r){return new f.y(s=>{let p=localStorage.getItem(r);(0,u.$K)(p)&&(p=JSON.parse(p)),s.next(p),s.complete()})}saveSearches(r,s){return new f.y(p=>{localStorage.setItem(r,JSON.stringify(s)),p.next(!0),p.complete()})}getLongRequest(){return this.httpClient.get("http://localhost:5000/long-request")}}return g.\u0275fac=function(r){return new(r||g)(C.LFG(m.eN))},g.\u0275prov=C.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},7491:(x,v,l)=>{l.r(v),l.d(v,{TestModule:()=>U});var f=l(6575),h=l(6687),u=l(2834),e=l(1699);let C=(()=>{class o{constructor(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-test"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[h.lC],styles:["[_nghost-%COMP%]{display:block;overflow:hidden}"]}),o})();var m=l(8071),b=l(5043),g=l(9422),y=l(9736),r=l(3738),s=l(274),p=l(4635),_=l(9476);function O(o,c){if(1&o&&(e.TgZ(0,"th",12)(1,"div",13)(2,"span",14),e._uU(3),e.qZA()()()),2&o){const t=c.$implicit;e.xp6(3),e.Oqu(t.title)}}function P(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"forge-icon-button",20)(1,"button",2),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.toggleLeaf(i))}),e._UZ(2,"forge-icon",21),e.qZA()()}if(2&o){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("name",t.isExpanded?"keyboard_arrow_down":"keyboard_arrow_right")}}function $(o,c){if(1&o&&(e.TgZ(0,"td",17)(1,"div",18),e.YNc(2,P,3,1,"forge-icon-button",19),e._uU(3),e.qZA()()),2&o){const t=c.$implicit,n=c.index,i=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",0===n),e.xp6(1),e.hij(" ",i[t.key]," ")}}function M(o,c){if(1&o&&(e.TgZ(0,"tr",15),e.YNc(1,$,4,2,"td",16),e.qZA()),2&o){const t=c.$implicit,n=e.oxw();e.Udp("--level",t.level),e.xp6(1),e.Q6J("ngForOf",n.tableDef.columns)}}const A=[{path:"",component:C,children:[{path:"parent",component:(()=>{class o{constructor(t,n,i){this.router=t,this.appDataService=n,this.appCache=i,this.recordset=(0,e.tdS)([{id:-1,description:""}]),this.record=(0,e.tdS)({id:-1}),this.recordset$=new m.X([]),this.record$=new m.X({id:-1}),this.recordsetTotal=0,this.recordsetTotalComputed=(0,e.Flj)(()=>(console.log("computed"),this.recordset().length)),(0,e.cEC)(()=>{console.log("effect"),this.recordsetTotal=this.recordset().length}),this.recordset$.pipe((0,b.O)(void 0),(0,g.G)(),(0,y.U)(([a,d])=>({prev:a,curr:d}))).subscribe(a=>{console.log(a)}),this.record$.pipe((0,b.O)(void 0),(0,g.G)(),(0,y.U)(([a,d])=>({prev:a,curr:d}))).subscribe(a=>{console.log(a)})}onNavigate(t){this.router.navigate([t])}onMakeRequest(){this.recordset()[0].description="description",this.record().description="description";const t=[...this.recordset$.value],n=this.recordset$.value.length,i=n+100;for(let d=n;d<i;d++)t.push({id:d,description:`${d} - Description`});this.recordset$.next(t),this.record$.next({id:n,description:`${n} - Description`})}getLongRequest(){return this.appDataService.getLongRequest().pipe((0,r.b)({next:t=>console.log(t),error:t=>console.log(t)}),(0,s.R)(this.appCache.cancelHttpRequests))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.F0),e.Y36(p.U),e.Y36(_.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-test-parent"]],decls:20,vars:7,consts:[[1,"header"],["slot","start",1,"forge-typography--title"],[1,"body"],["type","raised"],["type","button",3,"click"],["type","raised",2,"margin","16px"]],template:function(t,n){1&t&&(e.TgZ(0,"forge-toolbar",0)(1,"h2",1),e._uU(2,"Parent"),e.qZA()(),e.TgZ(3,"div",2)(4,"p"),e._uU(5,"Parent content"),e.qZA(),e.TgZ(6,"forge-button",3)(7,"button",4),e.NdJ("click",function(){return n.onNavigate("test/child")}),e._uU(8,"View child"),e.qZA()(),e.TgZ(9,"forge-button",5)(10,"button",4),e.NdJ("click",function(){return n.onMakeRequest()}),e._uU(11,"Make request"),e.qZA()(),e.TgZ(12,"p"),e._uU(13),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"json"),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.ALo(19,"json"),e.qZA()()),2&t&&(e.xp6(13),e.hij(" ",n.recordsetTotal," "),e.xp6(2),e.hij(" ",e.lcZ(16,3,n.recordset())," "),e.xp6(3),e.hij(" ",e.lcZ(19,5,n.record())," "))},dependencies:[f.Ts],styles:["[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px}"]}),o})()},{path:"child",component:(()=>{class o{constructor(t){this.router=t,this.tableDef={columns:[{title:"Id",key:"id"},{title:"Description",key:"description"}]},this.recordset$=new m.X([]),this.getRecords()}onNavigate(t){this.router.navigate([t])}toggleLeaf(t){const n=this.recordset$.value.indexOf(t)+1,i=[...this.recordset$.value];if(t.isExpanded){let a=0;for(let d=n;d<i.length&&!(i[d].level<=t.level);d++)a+=1;i.splice(n,a)}else{const a=t.level+1,d=[];for(let T=0;T<10;T++)d.push({id:`${a}-${T}`,description:`${a}-${T} description`,expandable:!0,level:a});i.splice(n,0,...d)}t.isExpanded=!t.isExpanded,this.recordset$.next(i)}getRecords(){const t=this.recordset$.value.length,n=[...this.recordset$.value];for(let i=t;i<t+10;i++)n.push({id:`0-${i}`,description:`0-${i} description`,expandable:!0,level:0});this.recordset$.next(n)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-test-child"]],decls:16,vars:2,consts:[[1,"header"],["slot","start"],["type","button",3,"click"],["name","arrow_back"],[1,"forge-typography--title"],[1,"body"],["itemSize","48"],[1,"forge-table"],["table",""],[1,"forge-table-row","forge-table-head__row"],["class","forge-table-cell forge-table-head__cell",4,"ngFor","ngForOf"],["class","forge-table-row forge-table-body__row",3,"--level",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"forge-table-cell","forge-table-head__cell"],[1,"forge-table-head__cell-container"],[1,"forge-table-head__cell-text"],[1,"forge-table-row","forge-table-body__row"],["class","forge-table-cell forge-table-body__cell",4,"ngFor","ngForOf"],[1,"forge-table-cell","forge-table-body__cell"],[1,"forge-table-cell__container"],["dense","",4,"ngIf"],["dense",""],[3,"name"]],template:function(t,n){1&t&&(e.TgZ(0,"forge-toolbar",0)(1,"div",1)(2,"forge-icon-button")(3,"button",2),e.NdJ("click",function(){return n.onNavigate("test/parent")}),e._UZ(4,"forge-icon",3),e.qZA()(),e.TgZ(5,"h2",4),e._uU(6,"Child"),e.qZA()()(),e.TgZ(7,"div",5)(8,"cdk-virtual-scroll-viewport",6)(9,"table",7,8)(11,"thead")(12,"tr",9),e.YNc(13,O,4,1,"th",10),e.qZA()(),e.TgZ(14,"tbody"),e.YNc(15,M,2,3,"tr",11),e.qZA()()()()),2&t&&(e.xp6(13),e.Q6J("ngForOf",n.tableDef.columns),e.xp6(2),e.Q6J("cdkVirtualForOf",n.recordset$))},dependencies:[f.sg,f.O5,u.xd,u.x0,u.N7],styles:["\n\n\n\n\n[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%}  .forge-table-body__row{height:48px}  .forge-table-body__cell:first-child .forge-table-cell__container{padding-left:calc(var(--level) * 16px)}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:480px}"]}),o})()},{path:"",redirectTo:"parent",pathMatch:"full"}]}];let U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez,h.Bz.forChild(A),u.Cl,h.Bz]}),o})()}}]);
//# sourceMappingURL=491.1f05e9ef2e276e64.js.map