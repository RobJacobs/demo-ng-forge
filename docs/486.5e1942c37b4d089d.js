"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[486],{90486:(Z,P,o)=>{o.r(P),o.d(P,{addOrUpdateResource:()=>I,contentToBlob:()=>O,fetchResources:()=>U,getSiblingOfSameType:()=>T,getSiblingOfSameTypeI:()=>A,removeAllResources:()=>M,removeResource:()=>D,splitPrefixFileNameAndExtension:()=>f});var i=o(71670),R=o(1897),E=o(32995),a=o(53661),u=o(55050);function U(e){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)(function*(e,t={},n){yield e.load(n);const r=(0,u.v_)(e.itemUrl,"resources"),{start:l=1,num:y=10,sortOrder:c="asc",sortField:p="created"}=t,v={query:{start:l,num:y,sortOrder:c,sortField:p,token:e.apiKey},signal:(0,a.U2)(n,"signal")},s=yield e.portal.request(r,v);return{total:s.total,nextStart:s.nextStart,resources:s.resources.map(({created:b,size:B,resource:F})=>({created:new Date(b),size:B,resource:e.resourceFromPath(F)}))}})).apply(this,arguments)}function I(e,t,n,r){return _.apply(this,arguments)}function _(){return(_=(0,i.Z)(function*(e,t,n,r){if(!e.hasPath())throw new E.Z(`portal-item-resource-${t}:invalid-path`,"Resource does not have a valid path");const l=e.portalItem;yield l.load(r);const y=(0,u.v_)(l.userItemUrl,"add"===t?"addResources":"updateResources"),[c,p]=x(e.path),v=yield O(n),s=new FormData;return c&&"."!==c&&s.append("resourcesPrefix",c),(0,a.pC)(r)&&r.compress&&s.append("compress","true"),s.append("fileName",p),s.append("file",v,p),s.append("f","json"),(0,a.pC)(r)&&r.access&&s.append("access",r.access),yield l.portal.request(y,{method:"post",body:s,signal:(0,a.U2)(r,"signal")}),e})).apply(this,arguments)}function D(e,t,n){return m.apply(this,arguments)}function m(){return(m=(0,i.Z)(function*(e,t,n){if(!t.hasPath())throw new E.Z("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield e.load(n);const r=(0,u.v_)(e.userItemUrl,"removeResources");yield e.portal.request(r,{method:"post",query:{resource:t.path},signal:(0,a.U2)(n,"signal")}),t.portalItem=null})).apply(this,arguments)}function M(e,t){return h.apply(this,arguments)}function h(){return(h=(0,i.Z)(function*(e,t){yield e.load(t);const n=(0,u.v_)(e.userItemUrl,"removeResources");return e.portal.request(n,{method:"post",query:{deleteAll:!0},signal:(0,a.U2)(t,"signal")})})).apply(this,arguments)}function x(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function f(e){const[t,n]=function C(e){const t=(0,u.Ml)(e);return(0,a.Wi)(t)?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[r,l]=x(t);return[r,l,n]}function O(e){return g.apply(this,arguments)}function g(){return(g=(0,i.Z)(function*(e){return e instanceof Blob?e:(yield(0,R.default)(e.url,{responseType:"blob"})).data})).apply(this,arguments)}function T(e,t){if(!e.hasPath())return null;const[n,,r]=f(e.path);return e.portalItem.resourceFromPath((0,u.v_)(n,t+r))}function A(e,t){if(!e.hasPath())return null;const[n,,r]=f(e.path);return e.portalItem.resourceFromPath((0,u.v_)(n,t+r))}}}]);
//# sourceMappingURL=486.5e1942c37b4d089d.js.map