"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[558],{4635:(w,x,i)=>{i.d(x,{U:()=>M});var f=i(2235),b=i(9736),C=i(4135),y=i(5162),m=i(1699),v=i(4860);let M=(()=>{class g{constructor(l){this.httpClient=l}getProfile(){return this.httpClient.get("mock-data/profile.json")}getPeople(l){return this.httpClient.get("mock-data/people.json").pipe((0,b.U)(a=>{let c=a.length;return l&&(l.filters?.length&&(c=(a=y.c.filterData(a,l.filters.map(u=>({key:u.property,value:u.value,strict:"gender"===u.property||"id"===u.property})))).length),l.sort&&(a=y.c.sortData(a,l.sort.property,"string",l.sort.direction)),(0,C.hj)(l.skip)&&(0,C.hj)(l.take)&&(a=a.slice(l.skip,l.skip+l.take))),{count:c,data:a}}))}getPerson(l){return this.httpClient.get("mock-data/people.json").pipe((0,b.U)(a=>a.find(c=>c.id.toString()===l.toString())))}getSearches(l){return new f.y(a=>{let c=localStorage.getItem(l);(0,C.$K)(c)&&(c=JSON.parse(c)),a.next(c),a.complete()})}saveSearches(l,a){return new f.y(c=>{localStorage.setItem(l,JSON.stringify(a)),c.next(!0),c.complete()})}getLongRequest(){return this.httpClient.get("http://localhost:5000/long-request")}}return g.\u0275fac=function(l){return new(l||g)(m.LFG(v.eN))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},5558:(w,x,i)=>{i.r(x),i.d(x,{TableDemoModule:()=>B});var f=i(6575),b=i(6687),C=i(9877),y=i(8071),m=i(7474),v=i(9016),M=i(274),g=i(3738),P=i(7835),l=i(8769),a=i(2834),c=i(4230),u=i(4135),p=i(6538),e=i(1699),O=i(4635),T=i(1908);const E=["table"],S=["columnHeaderPopup"];function z(n,d){if(1&n&&e._UZ(0,"forge-icon",21),2&n){const t=e.oxw().$implicit;e.Q6J("name","DESC"===t.sortDirection?"arrow_downward":"ASC"===t.sortDirection?"arrow_upward":"")}}function R(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"th",13,14),e.NdJ("cdkDragStarted",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onColumnHeaderDragStart())})("click",function(){const s=e.CHM(t).$implicit,h=e.MAs(1),_=e.oxw();return h.close(),e.KtG(_.onTableSort(s))})("contextmenu",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onColumnHeaderRightClick(r))}),e.TgZ(2,"div",15)(3,"span",16),e._uU(4),e.qZA(),e.YNc(5,z,1,1,"forge-icon",17),e.qZA(),e.TgZ(6,"div",18),e._UZ(7,"div",19),e.TgZ(8,"div",20),e.NdJ("mousedown",function(r){const s=e.CHM(t),h=s.index,_=s.$implicit,k=e.oxw();return e.KtG(k.onColumnHeaderResize(r,h,_))}),e.qZA()()()}if(2&n){const t=d.$implicit,o=e.oxw(),r=e.MAs(18);e.Udp("--table-column-width",t.width),e.Q6J("cdkDragPreviewContainer",o.parent)("forgePopup",r),e.xp6(4),e.Oqu(t.header),e.xp6(1),e.Q6J("ngIf",null==t.sortDirection?null:t.sortDirection.length)}}function A(n,d){if(1&n&&(e.TgZ(0,"td",24)(1,"div",25),e._uU(2),e.qZA()()),2&n){const t=d.$implicit,o=e.oxw().$implicit;e.xp6(2),e.hij(" ",o[t.property]," ")}}function F(n,d){if(1&n&&(e.TgZ(0,"tr",22),e.YNc(1,A,3,1,"td",23),e.ALo(2,"appCallback"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,t.tableColumns,t.visibleColumns))}}function L(n,d){if(1&n&&(e.TgZ(0,"forge-list-item",30)(1,"forge-checkbox",31),e._UZ(2,"input",32),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&n){const t=d.$implicit;e.Q6J("value",t),e.xp6(2),e.Q6J("checked",!t.hidden),e.xp6(2),e.Oqu(t.header)}}function H(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"forge-list",26),e.NdJ("forge-list-item-select",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.onColumnPopupItemSelected(r.detail.value))}),e.YNc(1,L,5,3,"forge-list-item",27),e._UZ(2,"forge-divider"),e.TgZ(3,"forge-list-item",28)(4,"span"),e._uU(5,"Reset column widths"),e.qZA()(),e.TgZ(6,"forge-list-item",29)(7,"span"),e._uU(8,"Freeze column"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tableColumns)}}const Z=[{path:"**",component:(()=>{class n{constructor(t){this.appDataService=t,this.tableColumnResize$=new C.x,this.isColumnResizing=!1,this.isBusy=!1,this.filterCache={sort:{property:"lastName",direction:c.Sr.Ascending},filters:[],skip:0,take:25},this.recordset=[],this.recordset$=new y.X([]),this.recordCount=0,this.tableColumns=[{header:"Id",property:"id"},{header:"First",property:"firstName",width:400},{header:"Last",property:"lastName"},{header:"Gender",property:"gender"},{header:"Occupation",property:"occupation"}],this.tableHeaderOffset=0,this.visibleColumns=o=>o.filter(r=>!0!==r.hidden),this.recordsetTrackBy=(o,r)=>r.id}ngOnInit(){this.getRecords()}ngAfterViewInit(){this.virtualScrollViewport.renderedRangeStream.subscribe(t=>{this.tableHeaderOffset=t.start,!this.isBusy&&t.start>0&&t.end+67>this.recordCount&&(this.isBusy=!0,this.appDataService.getPeople({sort:this.filterCache.sort}).pipe((0,m.x)(()=>this.isBusy=!1)).subscribe(o=>{const r=this.recordset.length+1;this.recordset=[...this.recordset,...o.data.map((s,h)=>(s.id=r+s.id,s))],this.recordCount=this.recordset.length,this.recordset$.next(this.recordset)}))})}ngOnDestroy(){this.tableColumnResize$.next(),this.tableColumnResize$.complete()}onColumnHeaderDragStart(){this.virtualScrollViewport.scrollToOffset(0)}onColumnHeaderDragDrop(t){(0,l.bA)(this.tableColumns,t.previousIndex,t.currentIndex),this.tableColumns=[...this.tableColumns]}onColumnHeaderResize(t,o,r){t.stopPropagation(),t.preventDefault(),this.tableColumnResize$.next();let s=this.tableElementRef.nativeElement.querySelectorAll("thead tr th")[o],h=this.tableElementRef.nativeElement.querySelectorAll(`tbody tr td:nth-child(${o+1})`),_=t.clientX;if(s){this.isColumnResizing=!0,this.tableElementRef.nativeElement.querySelector(".forge-table-head__row")?.classList.add("forge-table-head__row--resizing"),s.classList.add("forge-table-head__cell--resizing"),h.forEach(D=>D.classList.add("forge-table-body__cell--resizing")),(0,v.R)(document.body,"mousemove").pipe((0,M.R)(this.tableColumnResize$),(0,g.b)(D=>{r.width=s.offsetWidth+(D.clientX-_),_=D.clientX})).subscribe();const k=this.tableElementRef.nativeElement.querySelector("thead");(0,P.T)((0,v.R)(k,"mouseup"),(0,v.R)(k,"mouseleave")).pipe((0,m.x)(()=>requestAnimationFrame(()=>{this.isColumnResizing=!1,s=void 0,h=void 0})),(0,M.R)(this.tableColumnResize$),(0,g.b)(D=>{this.tableColumnResize$.next(),this.tableElementRef.nativeElement.querySelector(".forge-table-head__row")?.classList.remove("forge-table-head__row--resizing"),s.classList.remove("forge-table-head__cell--resizing"),h.forEach(U=>U.classList.remove("forge-table-body__cell--resizing"))})).subscribe()}}onColumnHeaderRightClick(t){t.preventDefault(),this.columnHeaderPopupDirective.popupElement?this.columnHeaderPopupDirective.close():this.columnHeaderPopupDirective.open()}onColumnPopupItemSelected(t){switch(t){case"reset-column-width":this.tableColumns.forEach(o=>o.width=void 0);break;case"freeze-column":{let o=this.tableElementRef.nativeElement.querySelectorAll("thead tr th")[0],r=this.tableElementRef.nativeElement.querySelectorAll("tbody tr td:nth-child(1)");o.classList.add("forge-table-head__cell--frozen"),r.forEach(s=>s.classList.add("forge-table-body__cell--frozen"));break}default:{const o=this.tableColumns.find(r=>r.property===t.property);o&&this.tableColumns.filter(r=>!r.hidden).length&&(o.hidden=!(0,u.$K)(o.hidden)||!o.hidden,o.sortDirection=void 0,this.tableColumns=[...this.tableColumns]);break}}this.columnHeaderPopupDirective.close()}onTableSort(t){this.isColumnResizing||(this.tableColumns.filter(o=>o.property!==t.property).forEach(o=>o.sortDirection=void 0),t.sortDirection=t.sortDirection===c.Sr.Ascending?c.Sr.Descending:t.sortDirection===c.Sr.Descending?void 0:c.Sr.Ascending,this.filterCache.sort=t.sortDirection?{property:t.property,direction:t.sortDirection}:void 0,this.filterCache.skip=0,this.virtualScrollViewport.scrollToOffset(0),this.getRecords())}onTablePaginatorChange(t){this.filterCache.skip=t.pageIndex*t.pageSize,this.filterCache.take=t.pageSize,this.getRecords()}getRecords(){this.isBusy=!0,this.appDataService.getPeople({sort:this.filterCache.sort}).pipe((0,m.x)(()=>this.isBusy=!1)).subscribe(t=>{this.recordset=t.data,this.recordCount=t.count,this.recordset$.next(this.recordset)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-table-demo"]],viewQuery:function(t,o){if(1&t&&(e.Gf(E,7),e.Gf(S,5,p.cPI),e.Gf(a.N7,5)),2&t){let r;e.iGM(r=e.CRH())&&(o.tableElementRef=r.first),e.iGM(r=e.CRH())&&(o.columnHeaderPopupDirective=r.first),e.iGM(r=e.CRH())&&(o.virtualScrollViewport=r.first)}},decls:19,vars:11,consts:[[1,"header"],["slot","start",1,"forge-typography--title"],[1,"body"],[1,"body__table"],["itemSize","48"],[1,"forge-table","forge-table--fixed"],["table",""],["cdkDropList","","cdkDropListOrientation","horizontal",1,"forge-table-row","forge-table-head__row",3,"cdkDropListDropped"],["scope","col","class","forge-table-cell forge-table-head__cell forge-table-head__cell--sortable","cdkDrag","","cdkDragLockAxis","x","placement","right-end","tabindex","-1",3,"cdkDragPreviewContainer","forgePopup","--table-column-width","cdkDragStarted","click","contextmenu",4,"ngFor","ngForOf"],["class","forge-table-row forge-table-body__row",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["inverted","true"],["slot","end",1,"forge-typography--caption"],["columnHeaderPopupTemplate",""],["scope","col","cdkDrag","","cdkDragLockAxis","x","placement","right-end","tabindex","-1",1,"forge-table-cell","forge-table-head__cell","forge-table-head__cell--sortable",3,"cdkDragPreviewContainer","forgePopup","cdkDragStarted","click","contextmenu"],["columnHeaderPopup","forgePopup"],[1,"forge-table-head__cell-container"],[1,"forge-table-head__cell-text"],["class","forge-table-head__cell-sort-icon","aria-hidden","true",3,"name",4,"ngIf"],[1,"forge-table-head__cell-actions"],["cdkDragHandle","",1,"forge-table-head__cell-dragger"],[1,"forge-table-head__cell-resizer",3,"mousedown"],["aria-hidden","true",1,"forge-table-head__cell-sort-icon",3,"name"],[1,"forge-table-row","forge-table-body__row"],["class","forge-table-cell forge-table-body__cell",4,"ngFor","ngForOf"],[1,"forge-table-cell","forge-table-body__cell"],[1,"forge-table-cell__container"],[1,"column-popup",3,"forge-list-item-select"],[3,"value",4,"ngFor","ngForOf"],["value","reset-column-width"],["value","freeze-column"],[3,"value"],["slot","leading"],["type","checkbox","checked","","aria-label","Show/hide table column",3,"checked"]],template:function(t,o){1&t&&(e.TgZ(0,"forge-toolbar",0)(1,"h2",1),e._uU(2,"Table demo"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3)(5,"cdk-virtual-scroll-viewport",4)(6,"table",5,6)(8,"thead")(9,"tr",7),e.NdJ("cdkDropListDropped",function(s){return o.onColumnHeaderDragDrop(s)}),e.YNc(10,R,9,6,"th",8),e.ALo(11,"appCallback"),e.qZA()(),e.TgZ(12,"tbody"),e.YNc(13,F,3,4,"tr",9),e.qZA()()()(),e.TgZ(14,"forge-toolbar",10)(15,"span",11),e._uU(16),e.qZA()()(),e.YNc(17,H,9,1,"ng-template",null,12,e.W1O)),2&t&&(e.xp6(8),e.Udp("--table-header-offset",o.tableHeaderOffset)("--table-header-translate-y",-48*o.tableHeaderOffset+"px"),e.xp6(2),e.Q6J("ngForOf",e.xi3(11,8,o.tableColumns,o.visibleColumns)),e.xp6(3),e.Q6J("cdkVirtualForOf",o.recordset$)("cdkVirtualForTrackBy",o.recordsetTrackBy),e.xp6(3),e.hij("Records: ",o.recordCount,""))},dependencies:[f.sg,f.O5,l.Wj,l.Zt,l.Bh,a.xd,a.x0,a.N7,p.bK4,p.Xo5,p.oJW,p.nsn,p.GBp,p.cPI,p.nVy,T.A],styles:["\n\n\n\n\n[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;background-color:#fff;background-color:var(--mdc-theme-surface, #ffffff)}[_nghost-%COMP%]     .forge-table{min-width:100%;width:max-content;position:relative}[_nghost-%COMP%]     .forge-table-head__row{height:48px}[_nghost-%COMP%]     .forge-table-head__row--resizing .forge-table-head__cell:not(.forge-table-head__cell--resizing) .forge-table-head__cell-actions{display:none}[_nghost-%COMP%]     .forge-table-head__cell{padding-left:12px;padding-right:12px;border-right:1px solid transparent;width:calc(var(--table-column-width, 200) * 1px);top:calc(var(--table-header-offset, 0) * 48px * -1)}[_nghost-%COMP%]     .forge-table-head__cell:first-child{padding-left:24px!important;padding-right:12px!important}[_nghost-%COMP%]     .forge-table-head__cell:hover .forge-table-head__cell-actions{transition-delay:.5s;width:48px}[_nghost-%COMP%]     .forge-table-head__cell-sort-icon{display:inline!important}[_nghost-%COMP%]     .forge-table-head__cell-actions{position:absolute;top:4px;bottom:4px;right:8px;display:flex;width:0;overflow:hidden;transition:width .25s;height:40px}[_nghost-%COMP%]     .forge-table-head__cell--resizing{border-right-color:var(--mdc-theme-primary)}[_nghost-%COMP%]     .forge-table-head__cell--resizing .forge-table-head__cell-actions{transition-delay:0;width:24px}[_nghost-%COMP%]     .forge-table-head__cell--resizing .forge-table-head__cell-dragger{display:none}[_nghost-%COMP%]     .forge-table-head__cell--frozen{position:sticky;left:0;z-index:2!important;background-color:var(--mdc-theme-surface);border-right-color:var(--mdc-theme-primary)}[_nghost-%COMP%]     .forge-table-head__cell-dragger, [_nghost-%COMP%]     .forge-table-head__cell-resizer{height:100%;min-width:24px;margin-left:auto;border:1px solid var(--forge-theme-border-color);background-color:var(--forge-theme-scrollbar-track-hover)}[_nghost-%COMP%]     .forge-table-head__cell-dragger{background-image:url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3Csvg%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20id%3D%22Edit%20%2F%20Move%22%3E%3Cpath%20id%3D%22Vector%22%20d%3D%22M12%2021V12M12%2021L15%2018M12%2021L9%2018M12%2012V3M12%2012H3M12%2012H21M12%203L9%206M12%203L15%206M3%2012L6%2015M3%2012L6%209M21%2012L18%209M21%2012L18%2015%22%20stroke%3D%22%23000000%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-position:center}[_nghost-%COMP%]     .forge-table-head__cell-resizer{background-image:url(data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3Csvg%20width%3D%2216px%22%20height%3D%2216px%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20id%3D%22Edit%20%2F%20Move_Horizontal%22%3E%3Cpath%20id%3D%22Vector%22%20d%3D%22M3%2012H21M3%2012L6%2015M3%2012L6%209M21%2012L18%209M21%2012L18%2015%22%20stroke%3D%22%23000000%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-position:center}[_nghost-%COMP%]     .forge-table-body__row{height:48px}[_nghost-%COMP%]     .forge-table-body__cell{padding-left:12px;padding-right:12px;border-right:1px solid transparent}[_nghost-%COMP%]     .forge-table-body__cell:first-child{padding-left:24px!important;padding-right:12px!important}[_nghost-%COMP%]     .forge-table-body__cell--resizing{border-right-color:var(--mdc-theme-primary)}[_nghost-%COMP%]     .forge-table-body__cell--frozen{position:sticky;left:0;z-index:2!important;background-color:var(--mdc-theme-surface);border-right-color:var(--mdc-theme-primary)}  .column-popup{min-width:280px;--forge-list-padding: 0}  .column-popup forge-list-item{cursor:pointer}.body[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr auto;overflow:hidden;height:100%}.body[_ngcontent-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:100%}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f;background:#ffffff;background:var(--mdc-theme-surface, #ffffff);border:solid 2px #3f51b5;display:flex;padding:0 24px}.cdk-drag-preview[_ngcontent-%COMP%]   forge-button[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#e8eaf6}.cdk-drag-placeholder[_ngcontent-%COMP%]   .forge-table-head__cell-container[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),n})()}];let B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.ez,b.Bz.forChild(Z),l._t,a.Cl,p.xXH,b.Bz]}),n})()}}]);
//# sourceMappingURL=558.3329bf3abf5a52e3.js.map