"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[6090],{26090:(A,h,d)=>{d.r(h),d.d(h,{QueryBuilderModule:()=>K});var m=d(86477),v=d(51046),C=d(15014),u=d(77981),f=d(25844),x=d(36748),e=d(86839),o=d(91590),p=d(47864);function i(r,a){1&r&&e.GkF(0)}const _=function(r,a){return{formGroup:r,index:a}};function c(r,a){if(1&r&&(e.ynx(0),e.TgZ(1,"div",8),e.YNc(2,i,1,0,"ng-container",9),e.qZA(),e.BQk()),2&r){const t=a.$implicit,n=a.index;e.oxw();const l=e.MAs(11);e.xp6(2),e.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",e.WLB(2,_,t,n))}}function O(r,a){1&r&&e.GkF(0)}const b=function(r){return{formGroup:r}};function Q(r,a){if(1&r&&(e.ynx(0),e.YNc(1,O,1,0,"ng-container",9),e.BQk()),2&r){const t=e.oxw().formGroup;e.oxw();const n=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.VKq(2,b,t))}}function Z(r,a){1&r&&(e.TgZ(0,"span",29),e._uU(1,"A property is required"),e.qZA())}function B(r,a){if(1&r&&(e.TgZ(0,"forge-option",30),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function F(r,a){1&r&&(e.TgZ(0,"span",29),e._uU(1,"An operator is required"),e.qZA())}function G(r,a){1&r&&(e.TgZ(0,"span",29),e._uU(1,"A value is required"),e.qZA())}const g=function(r,a){return[r,a]};function M(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"forge-text-field",14),e.ALo(1,"appFormControlInvalid"),e.TgZ(2,"input",31),e.NdJ("blur",function(){e.CHM(t);const l=e.oxw().formGroup;return e.KtG(l.get("value").updateValueAndValidity())}),e.qZA(),e.TgZ(3,"label",32),e._uU(4,"Value"),e.qZA(),e.YNc(5,G,2,0,"span",18),e.ALo(6,"appFormControlInvalid"),e.qZA()}if(2&r){const t=e.oxw(),n=t.formGroup,l=t.index;e.Q6J("invalid",e.lcZ(1,4,e.WLB(8,g,n.get("value").invalid,n.get("value").touched))),e.xp6(2),e.s9C("id","app--query-builder--filter-value-"+l),e.xp6(1),e.s9C("for","app--query-builder--filter-value-"+l),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,6,e.WLB(11,g,n.get("value").invalid,n.get("value").touched)))}}function N(r,a){1&r&&(e.TgZ(0,"span",29),e._uU(1,"A minimum value is required"),e.qZA())}function I(r,a){if(1&r&&(e.TgZ(0,"span",29),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).formGroup;e.xp6(1),e.hij(" ",t.get("maxValue").errors.required?"A maximum value is required":t.get("maxValue").errors.range?"Max value must be greater or equal to min value":""," ")}}function J(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",33)(1,"forge-text-field",14),e.ALo(2,"appFormControlInvalid"),e.TgZ(3,"input",34),e.NdJ("blur",function(){e.CHM(t);const l=e.oxw().formGroup;return e.KtG(l.get("minValue").updateValueAndValidity())}),e.qZA(),e.TgZ(4,"label",32),e._uU(5,"Minimum"),e.qZA(),e.YNc(6,N,2,0,"span",18),e.ALo(7,"appFormControlInvalid"),e.qZA(),e.TgZ(8,"forge-text-field",14),e.ALo(9,"appFormControlInvalid"),e.TgZ(10,"input",35),e.NdJ("blur",function(){e.CHM(t);const l=e.oxw().formGroup;return e.KtG(l.get("maxValue").updateValueAndValidity())}),e.qZA(),e.TgZ(11,"label",32),e._uU(12,"Maximum"),e.qZA(),e.YNc(13,I,2,1,"span",18),e.ALo(14,"appFormControlInvalid"),e.qZA()()}if(2&r){const t=e.oxw(),n=t.formGroup,l=t.index;e.xp6(1),e.Q6J("invalid",e.lcZ(2,8,e.WLB(16,g,n.get("minValue").invalid,n.get("minValue").touched))),e.xp6(2),e.s9C("id","app--query-builder--filter-min-"+l),e.xp6(1),e.s9C("for","app--query-builder--filter-min-"+l),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,10,e.WLB(19,g,n.get("minValue").invalid,n.get("minValue").touched))),e.xp6(2),e.Q6J("invalid",e.lcZ(9,12,e.WLB(22,g,n.get("maxValue").invalid,n.get("maxValue").touched))),e.xp6(2),e.s9C("id","app--query-builder--filter-max-"+l),e.xp6(1),e.s9C("for","app--query-builder--filter-max-"+l),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,14,e.WLB(25,g,n.get("maxValue").invalid,n.get("maxValue").touched)))}}function w(r,a){1&r&&e.GkF(0)}function q(r,a){1&r&&e.GkF(0)}function V(r,a){if(1&r&&(e.ynx(0),e.YNc(1,w,1,0,"ng-container",9),e.TgZ(2,"div",8),e.YNc(3,q,1,0,"ng-container",9),e.qZA(),e.BQk()),2&r){const t=a.$implicit,n=a.index;e.oxw(3);const l=e.MAs(13),s=e.MAs(11);e.xp6(1),e.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",e.VKq(4,b,t)),e.xp6(2),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.WLB(6,_,t,n))}}function L(r,a){if(1&r&&(e.ynx(0,1),e.YNc(1,V,4,9,"ng-container",2),e.BQk()),2&r){const t=e.oxw().formGroup;let n;e.xp6(1),e.Q6J("ngForOf",null==(n=t.get("filters"))?null:n.controls)}}function P(r,a){if(1&r){const t=e.EpF();e.YNc(0,Q,2,4,"ng-container",10),e.ynx(1,11),e.TgZ(2,"div",12)(3,"forge-autocomplete",13),e.NdJ("blur",function(){const s=e.CHM(t).formGroup;return e.KtG(s.get("property").updateValueAndValidity())}),e.TgZ(4,"forge-text-field",14),e.ALo(5,"appFormControlInvalid"),e._UZ(6,"input",15),e.TgZ(7,"label",16),e._uU(8,"Property"),e.qZA(),e._UZ(9,"forge-icon",17),e.YNc(10,Z,2,0,"span",18),e.ALo(11,"appFormControlInvalid"),e.qZA()(),e.TgZ(12,"forge-select",19),e.NdJ("blur",function(){const s=e.CHM(t).formGroup;return e.KtG(s.get("operator").updateValueAndValidity())}),e.ALo(13,"appFormControlInvalid"),e.YNc(14,B,2,2,"forge-option",20),e.YNc(15,F,2,0,"span",18),e.ALo(16,"appFormControlInvalid"),e.qZA(),e.YNc(17,M,7,14,"forge-text-field",21),e.YNc(18,J,15,28,"div",22),e.TgZ(19,"div",23)(20,"forge-menu",24),e.NdJ("forge-menu-select",function(l){const y=e.CHM(t).formGroup,T=e.oxw();return e.KtG(T.onAddFilter(y,l.detail.value))}),e.TgZ(21,"forge-icon-button")(22,"button",25),e._UZ(23,"forge-icon",5),e.qZA()()(),e.TgZ(24,"forge-icon-button")(25,"button",26),e.NdJ("click",function(){const s=e.CHM(t).formGroup,y=e.oxw();return e.KtG(y.onDeleteFilter(s))}),e._UZ(26,"forge-icon",27),e.qZA()()()(),e.YNc(27,L,2,1,"ng-container",28),e.BQk()}if(2&r){const t=a.formGroup,n=a.index,l=e.oxw();let s;e.Q6J("ngIf",n>0),e.xp6(1),e.Q6J("formGroup",t),e.xp6(2),e.Q6J("options",l.propertyOptions)("filter",l.propertyFilter),e.xp6(1),e.Q6J("invalid",e.lcZ(5,15,e.WLB(23,g,t.get("property").invalid,t.get("property").touched))),e.xp6(2),e.s9C("id","app--query-builder--filter-property"+n),e.xp6(1),e.s9C("for","app--query-builder--filter-property"+n),e.xp6(3),e.Q6J("ngIf",e.lcZ(11,17,e.WLB(26,g,t.get("property").invalid,t.get("property").touched))),e.xp6(2),e.Q6J("invalid",e.lcZ(13,19,e.WLB(29,g,t.get("operator").invalid,t.get("operator").touched))),e.xp6(2),e.Q6J("ngForOf",l.operatorOptions),e.xp6(1),e.Q6J("ngIf",e.lcZ(16,21,e.WLB(32,g,t.get("operator").invalid,t.get("operator").touched))),e.xp6(2),e.Q6J("ngIf",6!==t.get("operator").value),e.xp6(1),e.Q6J("ngIf",6===t.get("operator").value),e.xp6(2),e.Q6J("options",l.filterOptions),e.xp6(7),e.Q6J("ngIf",null==(s=t.get("filters"))||null==s.controls?null:s.controls.length)}}function E(r,a){if(1&r&&(e.TgZ(0,"forge-option",30),e._uU(1),e.qZA()),2&r){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function D(r,a){if(1&r&&(e.TgZ(0,"div",36)(1,"forge-select",37),e.YNc(2,E,2,2,"forge-option",20),e.qZA()()),2&r){const t=a.formGroup,n=e.oxw();e.xp6(1),e.Q6J("formControl",t.get("condition")),e.xp6(1),e.Q6J("ngForOf",n.conditionOptions)}}const U=[{path:"**",component:(()=>{class r{constructor(){this.formGroup=new u.cw({filters:new u.Oe([this.buildFilterFormGroup()])}),this.conditionOptions=[{value:"and",label:"And"},{value:"or",label:"Or"}],this.propertyOptions=[{value:"firstName",label:"First name"},{value:"lastName",label:"Last name"},{value:"dateOfBirth",label:"Date of birth"},{value:"gender",label:"Gender"},{value:"occupation",label:"Occupation"}],this.operatorOptions=[{value:0,label:"Equal"},{value:1,label:"Not equal"},{value:2,label:"Greater than"},{value:3,label:"Less than"},{value:4,label:"Greater than equal to"},{value:5,label:"Less than equal to"},{value:6,label:"Range"},{value:7,label:"Contains"},{value:8,label:"Not contains"},{value:9,label:"Empty"}],this.filterOptions=[{value:"condition",label:"Add condition"},{value:"group",label:"Add group"}],this.propertyFilter=t=>x.c.filterData(this.propertyOptions,[{key:"label",value:t}])}onAddFilter(t,n){if(t===this.formGroup)this.formGroup.get("filters").push(this.buildFilterFormGroup());else switch(n){case"condition":{const l=t.parent.controls.indexOf(t)+1;t.parent.insert(l,this.buildFilterFormGroup());break}case"group":t.get("filters").push(this.buildFilterFormGroup())}}onDeleteFilter(t){const n=t.parent,l=n.controls.indexOf(t);-1!==l&&n.removeAt(l)}buildFilterFormGroup(t){return new u.cw({property:new u.NI(t?.property,{validators:[u.kI.required]}),condition:new u.NI(t?.condition||"and",{validators:[u.kI.required]}),operator:new u.NI(t?.operator,{validators:[u.kI.required]}),value:new u.NI(t?.value,{validators:[this.validateFilterValue("value")]}),minValue:new u.NI(t?.minValue,{validators:[this.validateFilterValue("minValue")]}),maxValue:new u.NI(t?.minValue,{validators:[this.validateFilterValue("maxValue")]}),filters:new u.Oe([])})}validateFilterValue(t){return n=>{const l=n.parent;if(!l)return null;const s=l.value.operator;if(!(0,f.$K)(s))return null;if(6===s){if("value"===t)return null;if(!(0,f.$K)(n.value)||!n.value.toString().length)return{required:!0};const y=l.value.minValue,T=l.value.maxValue;if("minValue"===t&&(0,f.$K)(T)&&y.localeCompare(T,navigator.language,{numeric:!0,ignorePunctuation:!0})<1&&l.get("maxValue")?.setErrors(null),"maxValue"===t){if(!(0,f.$K)(y))return null;if(y.localeCompare(T,navigator.language,{numeric:!0,ignorePunctuation:!0})>0)return{range:!0}}return null}return"minValue"===t||"maxValue"===t||(0,f.$K)(n.value)&&n.value.toString().length?null:{required:!0}}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-query-builder"]],decls:14,vars:5,consts:[["novalidate","","autocomplete","off",3,"formGroup"],["formArrayName","filters"],[4,"ngFor","ngForOf"],[1,"filter__group__add"],["type","button",3,"click"],["name","add_circle"],["filterFormTemplate",""],["filterHeaderTemplate",""],[1,"filter__group"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[3,"formGroup"],[1,"filter__form"],["formControlName","property",3,"options","filter","blur"],["required","",3,"invalid"],["type","text",3,"id"],[3,"for"],["slot","trailing","name","arrow_drop_down",1,"forge-dropdown-icon"],["slot","helper-text",4,"ngIf"],["formControlName","operator","label","Operator","required","",3,"invalid","blur"],[3,"value",4,"ngFor","ngForOf"],["required","",3,"invalid",4,"ngIf"],["class","filter__form__range",4,"ngIf"],[1,"filter__form__action"],[3,"options","forge-menu-select"],["type","button","aria-label","add filter item"],["type","button","aria-label","Delete filter",3,"click"],["name","delete"],["formArrayName","filters",4,"ngIf"],["slot","helper-text"],[3,"value"],["type","text","formControlName","value",3,"id","blur"],["slot","label",3,"for"],[1,"filter__form__range"],["type","text","formControlName","minValue",3,"id","blur"],["type","text","formControlName","maxValue",3,"id","blur"],[1,"filter__header"],[1,"filter__header__condition",3,"formControl"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1),e.YNc(2,c,3,5,"ng-container",2),e.qZA(),e.TgZ(3,"forge-button",3)(4,"button",4),e.NdJ("click",function(){return n.onAddFilter(n.formGroup,"condition")}),e._UZ(5,"forge-icon",5),e._uU(6," Add a new condition "),e.qZA()(),e.TgZ(7,"p"),e._uU(8),e.ALo(9,"json"),e.qZA()(),e.YNc(10,P,28,35,"ng-template",null,6,e.W1O),e.YNc(12,D,3,2,"ng-template",null,7,e.W1O)),2&t){let l;e.Q6J("formGroup",n.formGroup),e.xp6(2),e.Q6J("ngForOf",null==(l=n.formGroup.get("filters"))?null:l.controls),e.xp6(6),e.Oqu(e.lcZ(9,3,n.formGroup.value))}},dependencies:[m.sg,m.O5,m.tP,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.oH,u.sg,u.u,u.CE,o.$RD,o.YRL,o.r0F,o.oJW,o.r2H,o.Mnp,o.x8v,o.QIx,o.Hr0,o.afy,m.Ts,p.$],styles:["[_nghost-%COMP%]{display:block;padding:24px}.filter__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;margin:8px 0}.filter__header__condition[_ngcontent-%COMP%]{width:96px;background-color:#eee;border-radius:4px}.filter__header__condition[_ngcontent-%COMP%]::part(container):before{border:none}.filter__header__condition[_ngcontent-%COMP%]::part(text){padding:0 16px}.filter__form[_ngcontent-%COMP%]{display:grid;grid-gap:0 16px;grid-template-columns:216px 168px minmax(400px,1fr) 96px;align-items:start}.filter__form__range[_ngcontent-%COMP%]{display:grid;grid-gap:0 16px;grid-template-columns:minmax(192px,1fr) minmax(192px,1fr);align-items:start}.filter__form__action[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.filter__group[_ngcontent-%COMP%]{background-color:#fff;background-color:var(--mdc-theme-surface, #ffffff);border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);border:1px solid #e0e0e0;padding:16px;border-left:4px solid #3f51b5;margin:16px 0}.filter__group[_ngcontent-%COMP%]   .filter__group[_ngcontent-%COMP%]{border:1px dashed #9e9e9e;margin:8px 0;padding:8px 16px}.filter__group[_ngcontent-%COMP%]:first-of-type{margin-top:0}.filter__group__add[_ngcontent-%COMP%]{border:1px dashed #9e9e9e;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);background-color:#f5f5f5;width:100%}.filter__group__add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;padding:16px;height:auto}"]}),r})()}];let K=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.ez,v.Bz.forChild(U),C.F,v.Bz]}),r})()},15014:(A,h,d)=>{d.d(h,{F:()=>f});var m=d(86477),v=d(77981),C=d(91590),u=d(86839);let f=(()=>{class x{}return x.\u0275fac=function(o){return new(o||x)},x.\u0275mod=u.oAB({type:x}),x.\u0275inj=u.cJS({imports:[m.ez,v.u5,v.UX,C.xXH]}),x})()},36748:(A,h,d)=>{d.d(h,{c:()=>f});var m=d(86477),v=d(33765),C=d(80743),u=d(25844);class f{static sortData(e,o,p,i){return e&&e.length?(p=p||"string","DESC"!==i&&(i="ASC"),e.slice().sort((_,c)=>(_=(0,C.SX)(_,o),c=(0,C.SX)(c,o),"DESC"===i?this.comparator(c,_,p):this.comparator(_,c,p)))):e}static groupData(e,o){return(0,u.kJ)(e)&&e.length&&o?.length?e.reduce((p,i)=>{const _=i[o];return p[_]||(p[_]=[]),p[_].push(i),p},{}):e}static filterData(e,o){if(!((0,u.kJ)(e)&&e.length&&(0,u.kJ)(o)&&o.length))return e;o=o.map(i=>{if((0,u.HD)(i.value)&&i.value.length){let _;if("<>"===i.value.substring(0,2)){if(2===i.value.length)return i.value="",i;_=i.value.substring(0,2),i.value=i.value.substring(2)}else if("<"===i.value.substring(0,1)||">"===i.value.substring(0,1)){if(1===i.value.length)return i.value="",i;_=i.value.substring(0,1),i.value=i.value.substring(1)}_&&Object.defineProperty(i,"operator",{value:_})}return i.value=(""+i.value).toLowerCase(),i});const p=i=>o.every(_=>{if(!_.value.length)return!0;const c=(""+(0,C.SX)(i,_.key)).toLowerCase();if(!c.length)return!1;if(_.strict)return c===_.value;switch(_.operator){case"<>":return 0!==this.comparator(c,_.value,_.type);case">":return this.comparator(c,_.value,_.type)>0;case"<":return this.comparator(c,_.value,_.type)<0;default:return c.indexOf(_.value)>-1}});return e.filter(i=>p(i))}static comparator(e,o,p="string"){if(e==o)return 0;if(!(0,u.$K)(e))return-1;if(!(0,u.$K)(o))return 1;switch(p){case"boolean":return e?-1:1;case"date":if(e=new Date(e).getTime(),isNaN(e))return-1;if(o=new Date(o).getTime(),isNaN(o))return 1;break;case"number":if(e=parseFloat(e),isNaN(e))return-1;if(o=parseFloat(o),isNaN(o))return 1;break;default:return isNaN(parseFloat(e))||isNaN(parseFloat(o))?(""+e).localeCompare(""+o):(""+e).localeCompare(""+o,navigator.language,{numeric:!0})}return e<o?-1:e>o?1:0}static navigateBack(e,o,p){1===e.getState()?.navigationId?o.navigate(p):e.back()}static elementId(e){return e+Math.random().toString(36).replace(/[^a-z]+/g,"")}static formatDate(e,o="MM/dd/yyyy"){return(0,u.$K)(e)?(0,m.p6)(e,o,navigator.language):""}static formatNumber(e,o="1.2-2"){return(0,m.uf)(e,navigator.language,o)}static uniqueId(){return Math.random().toString(36).substring(2)}static parseQueryStringParameters(){const e={};if(window.location.search.length){const o=new v.LE({fromString:window.location.search.substring(1)});o.keys().forEach(p=>{const i=o.getAll(p);i.length&&Object.defineProperty(e,p.toLowerCase(),{value:1===i.length?i[0]:i,enumerable:!0,writable:!0})})}return e}static reduceObject(e){const o={};return Object.keys(e).forEach(p=>{(0,u.$K)(e[p])&&((0,u.kJ)(e[p])?e[p].length&&(o[p]=e[p]):(e[p]+"").trim().length&&(o[p]="string"==typeof e[p]?e[p].trim():e[p]))}),o}}}}]);
//# sourceMappingURL=6090.ab51884b8cb9072c.js.map