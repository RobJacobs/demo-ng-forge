import{a as Yr,f as $e,g as Wo,p as jn}from"./chunk-IJTEU5B7.js";import{f as Oe,g as ot}from"./chunk-PSWJZLWW.js";import{B as at,Cd as qo,Dd as Bo,E as yt,Hc as Ro,I as ko,Ic as Eo,Jc as Oo,Kb as Do,Kc as $o,Mb as $t,Pc as Po,Qc as Fo,Zb as No,_b as Io,dd as zo,ed as Ho,fd as Lo,h as Ee,qd as Uo,rd as Xo,sb as Ao,sd as Yo,td as Vo,zb as So}from"./chunk-LBARSMJT.js";import{Cb as Ur,D as Xt,Db as Xr,Eb as mo,Fb as go,Gb as xo,Gc as le,H as ho,Hb as pt,Ib as Q,Jb as et,Kb as Ne,L as zr,Lb as yo,Mb as vo,Nb as _o,Ub as Ie,Va as tt,Vb as tr,ac as ue,bc as Re,ca as po,d as fo,dc as bo,gc as nt,ha as Hr,hc as Qn,kc as wo,lc as To,mc as Co,ob as De,oc as Mo,qa as Lr}from"./chunk-UQ3J2UFU.js";import{a as Ut,b as Gt,i as Qt,j as Fr,k as Se}from"./chunk-OY7QI42D.js";var vt="app-chart",Yl={CHART_PREFIX:vt,CHART_ROOT:`${vt}__root`,CHART_YAXIS:`${vt}__yaxis`,CHART_XAXIS:`${vt}__xaxis`,CHART_NODE:`${vt}__node`,CHART_TEXT:`${vt}__text`,CHART_LEGEND:`${vt}__legend`,CHART_METER:`${vt}__meter`,CHART_POPOVER:`${vt}__popover`,CHART_CLIP:`${vt}__clip`,CHART_TEXT_LABEL:`${vt}__text-label`,CHART_TEXT_VALUE:`${vt}__text-value`,LEGEND_TEXT:`${vt}__legend-text`,LEGEND_TEXT_LABEL:`${vt}__legend-text-label`,LEGEND_TEXT_VALUE:`${vt}__legend-text-value`},Vl={TRANSITION_DURATION:500},ql={FONT_FAMILY:"Roboto",FONT_SIZE_SMALL:"10px",FONT_SIZE:"16px"},Bl={amber600:"#ffb300",cyan400:"#26c6da",purple300:"#ba68c8",indigoA200:"#536dfe",green400:"#66bb6a",deepOrangeA200:"#ff6e40",amberA200:"#ffd740",purple200:"#ce93d8",indigo200:"#9fa8da",lightBlue200:"#81d4fa",green200:"#a5d6a7",lime200:"#e6ee9c",amber200:"#ffe082",deepOrange200:"#ffab91",grey400:"#bdbdbd"},Wl={textHigh:"var(--forge-theme-text-high, rgba(0, 0, 0, 0.87))",textMedium:"var(--forge-theme-text-medium, rgba(0, 0, 0, 0.6))",textInverse:"var(--forge-theme-on-surface-inverse, #ffffff)",outline:"var(--forge-theme-outline, #e0e0e0)",outlineMedium:"var(--forge-theme-outline-medium, #757575)",surface:"var(--forge-theme-surface, #ffffff)",surfaceDim:"var(--forge-theme-surface-dim, #f5f5f5)"},_={classes:Yl,numbers:Vl,strings:ql,chartPalette:Bl,chartTheme:Wl};function ce(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jn(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fe(t){let e,r,n;t.length!==2?(e=ce,r=(s,u)=>ce(t(s),u),n=(s,u)=>t(s)-u):(e=t===ce||t===Jn?t:Zl,r=t,n=t);function a(s,u,l=0,f=s.length){if(l<f){if(e(u,u)!==0)return f;do{let h=l+f>>>1;r(s[h],u)<0?l=h+1:f=h}while(l<f)}return l}function o(s,u,l=0,f=s.length){if(l<f){if(e(u,u)!==0)return f;do{let h=l+f>>>1;r(s[h],u)<=0?l=h+1:f=h}while(l<f)}return l}function i(s,u,l=0,f=s.length){let h=a(s,u,l,f-1);return h>l&&n(s[h-1],u)>-n(s[h],u)?h-1:h}return{left:a,center:i,right:o}}function Zl(){return 0}function Kn(t){return t===null?NaN:+t}var Zo=fe(ce),Go=Zo.right,Gl=Zo.left,Ql=fe(Kn).center,ta=Go;function he(t,e){let r,n;if(e===void 0)for(let a of t)a!=null&&(r===void 0?a>=a&&(r=n=a):(r>a&&(r=a),n<a&&(n=a)));else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&(r===void 0?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)))}return[r,n]}var Pe=class extends Map{constructor(e,r=Kl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let[n,a]of e)this.set(n,a)}get(e){return super.get(Qo(this,e))}has(e){return super.has(Qo(this,e))}set(e,r){return super.set(jl(this,e),r)}delete(e){return super.delete(Jl(this,e))}};function Qo({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):r}function jl({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Jl({_intern:t,_key:e},r){let n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Kl(t){return t!==null&&typeof t=="object"?t.valueOf():t}var tc=Math.sqrt(50),ec=Math.sqrt(10),rc=Math.sqrt(2);function Vr(t,e,r){let n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),o=n/Math.pow(10,a),i=o>=tc?10:o>=ec?5:o>=rc?2:1,s,u,l;return a<0?(l=Math.pow(10,-a)/i,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,a)*i,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=r&&r<2?Vr(t,e,r*2):[s,u,l]}function qr(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[a,o,i]=n?Vr(e,t,r):Vr(t,e,r);if(!(o>=a))return[];let s=o-a+1,u=new Array(s);if(n)if(i<0)for(let l=0;l<s;++l)u[l]=(o-l)/-i;else for(let l=0;l<s;++l)u[l]=(o-l)*i;else if(i<0)for(let l=0;l<s;++l)u[l]=(a+l)/-i;else for(let l=0;l<s;++l)u[l]=(a+l)*i;return u}function er(t,e,r){return e=+e,t=+t,r=+r,Vr(t,e,r)[2]}function Fe(t,e,r){e=+e,t=+t,r=+r;let n=e<t,a=n?er(e,t,r):er(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function Br(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(a);++n<a;)o[n]=t+n*r;return o}function jo(t){return t}var Wr=1,ea=2,ra=3,rr=4,Jo=1e-6;function nc(t){return"translate("+t+",0)"}function ac(t){return"translate(0,"+t+")"}function oc(t){return e=>+t(e)}function ic(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function sc(){return!this.__axis}function na(t,e){var r=[],n=null,a=null,o=6,i=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Wr||t===rr?-1:1,f=t===rr||t===ea?"x":"y",h=t===Wr||t===ra?nc:ac;function c(p){var x=n??(e.ticks?e.ticks.apply(e,r):e.domain()),y=a??(e.tickFormat?e.tickFormat.apply(e,r):jo),d=Math.max(o,0)+s,g=e.range(),M=+g[0]+u,k=+g[g.length-1]+u,w=(e.bandwidth?ic:oc)(e.copy(),u),S=p.selection?p.selection():p,T=S.selectAll(".domain").data([null]),F=S.selectAll(".tick").data(x,e).order(),O=F.exit(),N=F.enter().append("g").attr("class","tick"),R=F.select("line"),$=F.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(N),R=R.merge(N.append("line").attr("stroke","currentColor").attr(f+"2",l*o)),$=$.merge(N.append("text").attr("fill","currentColor").attr(f,l*d).attr("dy",t===Wr?"0em":t===ra?"0.71em":"0.32em")),p!==S&&(T=T.transition(p),F=F.transition(p),R=R.transition(p),$=$.transition(p),O=O.transition(p).attr("opacity",Jo).attr("transform",function(v){return isFinite(v=w(v))?h(v+u):this.getAttribute("transform")}),N.attr("opacity",Jo).attr("transform",function(v){var C=this.parentNode.__axis;return h((C&&isFinite(C=C(v))?C:w(v))+u)})),O.remove(),T.attr("d",t===rr||t===ea?i?"M"+l*i+","+M+"H"+u+"V"+k+"H"+l*i:"M"+u+","+M+"V"+k:i?"M"+M+","+l*i+"V"+u+"H"+k+"V"+l*i:"M"+M+","+u+"H"+k),F.attr("opacity",1).attr("transform",function(v){return h(w(v)+u)}),R.attr(f+"2",l*o),$.attr(f,l*d).text(y),S.filter(sc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ea?"start":t===rr?"end":"middle"),S.each(function(){this.__axis=w})}return c.scale=function(p){return arguments.length?(e=p,c):e},c.ticks=function(){return r=Array.from(arguments),c},c.tickArguments=function(p){return arguments.length?(r=p==null?[]:Array.from(p),c):r.slice()},c.tickValues=function(p){return arguments.length?(n=p==null?null:Array.from(p),c):n&&n.slice()},c.tickFormat=function(p){return arguments.length?(a=p,c):a},c.tickSize=function(p){return arguments.length?(o=i=+p,c):o},c.tickSizeInner=function(p){return arguments.length?(o=+p,c):o},c.tickSizeOuter=function(p){return arguments.length?(i=+p,c):i},c.tickPadding=function(p){return arguments.length?(s=+p,c):s},c.offset=function(p){return arguments.length?(u=+p,c):u},c}function aa(t){return na(Wr,t)}function nr(t){return na(ra,t)}function ar(t){return na(rr,t)}var uc={value:()=>{}};function ti(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Zr(r)}function Zr(t){this._=t}function lc(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Zr.prototype=ti.prototype={constructor:Zr,on:function(t,e){var r=this._,n=lc(t+"",r),a,o=-1,i=n.length;if(arguments.length<2){for(;++o<i;)if((a=(t=n[o]).type)&&(a=cc(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<i;)if(a=(t=n[o]).type)r[a]=Ko(r[a],t.name,e);else if(e==null)for(a in r)r[a]=Ko(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Zr(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,o;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,a=o.length;n<a;++n)o[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,o=n.length;a<o;++a)n[a].value.apply(e,r)}};function cc(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function Ko(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=uc,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var or=ti;var Gr="http://www.w3.org/1999/xhtml",oa={svg:"http://www.w3.org/2000/svg",xhtml:Gr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),oa.hasOwnProperty(e)?{space:oa[e],local:t}:t}function fc(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Gr&&e.documentElement.namespaceURI===Gr?e.createElement(t):e.createElementNS(r,t)}}function hc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Qr(t){var e=Yt(t);return(e.local?hc:fc)(e)}function pc(){}function pe(t){return t==null?pc:function(){return this.querySelector(t)}}function ei(t){typeof t!="function"&&(t=pe(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=new Array(i),u,l,f=0;f<i;++f)(u=o[f])&&(l=t.call(u,u.__data__,f,o))&&("__data__"in u&&(l.__data__=u.__data__),s[f]=l);return new rt(n,this._parents)}function ia(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function mc(){return[]}function ir(t){return t==null?mc:function(){return this.querySelectorAll(t)}}function dc(t){return function(){return ia(t.apply(this,arguments))}}function ri(t){typeof t=="function"?t=dc(t):t=ir(t);for(var e=this._groups,r=e.length,n=[],a=[],o=0;o<r;++o)for(var i=e[o],s=i.length,u,l=0;l<s;++l)(u=i[l])&&(n.push(t.call(u,u.__data__,l,i)),a.push(u));return new rt(n,a)}function sr(t){return function(){return this.matches(t)}}function jr(t){return function(e){return e.matches(t)}}var gc=Array.prototype.find;function xc(t){return function(){return gc.call(this.children,t)}}function yc(){return this.firstElementChild}function ni(t){return this.select(t==null?yc:xc(typeof t=="function"?t:jr(t)))}var vc=Array.prototype.filter;function _c(){return Array.from(this.children)}function bc(t){return function(){return vc.call(this.children,t)}}function ai(t){return this.selectAll(t==null?_c:bc(typeof t=="function"?t:jr(t)))}function oi(t){typeof t!="function"&&(t=sr(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],u,l=0;l<i;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&s.push(u);return new rt(n,this._parents)}function Jr(t){return new Array(t.length)}function ii(){return new rt(this._enter||this._groups.map(Jr),this._parents)}function ur(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ur.prototype={constructor:ur,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function si(t){return function(){return t}}function wc(t,e,r,n,a,o){for(var i=0,s,u=e.length,l=o.length;i<l;++i)(s=e[i])?(s.__data__=o[i],n[i]=s):r[i]=new ur(t,o[i]);for(;i<u;++i)(s=e[i])&&(a[i]=s)}function Tc(t,e,r,n,a,o,i){var s,u,l=new Map,f=e.length,h=o.length,c=new Array(f),p;for(s=0;s<f;++s)(u=e[s])&&(c[s]=p=i.call(u,u.__data__,s,e)+"",l.has(p)?a[s]=u:l.set(p,u));for(s=0;s<h;++s)p=i.call(t,o[s],s,o)+"",(u=l.get(p))?(n[s]=u,u.__data__=o[s],l.delete(p)):r[s]=new ur(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&l.get(c[s])===u&&(a[s]=u)}function Cc(t){return t.__data__}function ui(t,e){if(!arguments.length)return Array.from(this,Cc);var r=e?Tc:wc,n=this._parents,a=this._groups;typeof t!="function"&&(t=si(t));for(var o=a.length,i=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var f=n[l],h=a[l],c=h.length,p=Mc(t.call(f,f&&f.__data__,l,n)),x=p.length,y=s[l]=new Array(x),d=i[l]=new Array(x),g=u[l]=new Array(c);r(f,h,y,d,g,p,e);for(var M=0,k=0,w,S;M<x;++M)if(w=y[M]){for(M>=k&&(k=M+1);!(S=d[k])&&++k<x;);w._next=S||null}}return i=new rt(i,n),i._enter=s,i._exit=u,i}function Mc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function li(){return new rt(this._exit||this._groups.map(Jr),this._parents)}function ci(t,e,r){var n=this.enter(),a=this,o=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?o.remove():r(o),n&&a?n.merge(a).order():a}function fi(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,o=n.length,i=Math.min(a,o),s=new Array(a),u=0;u<i;++u)for(var l=r[u],f=n[u],h=l.length,c=s[u]=new Array(h),p,x=0;x<h;++x)(p=l[x]||f[x])&&(c[x]=p);for(;u<a;++u)s[u]=r[u];return new rt(s,this._parents)}function hi(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,o=n[a],i;--a>=0;)(i=n[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function pi(t){t||(t=kc);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o){for(var i=r[o],s=i.length,u=a[o]=new Array(s),l,f=0;f<s;++f)(l=i[f])&&(u[f]=l);u.sort(e)}return new rt(a,this._parents).order()}function kc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function mi(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function di(){return Array.from(this)}function gi(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length;a<o;++a){var i=n[a];if(i)return i}return null}function xi(){let t=0;for(let e of this)++t;return t}function yi(){return!this.node()}function vi(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],o=0,i=a.length,s;o<i;++o)(s=a[o])&&t.call(s,s.__data__,o,a);return this}function Ac(t){return function(){this.removeAttribute(t)}}function Sc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Dc(t,e){return function(){this.setAttribute(t,e)}}function Nc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ic(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Rc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function _i(t,e){var r=Yt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?Sc:Ac:typeof e=="function"?r.local?Rc:Ic:r.local?Nc:Dc)(r,e))}function Kr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ec(t){return function(){this.style.removeProperty(t)}}function Oc(t,e,r){return function(){this.style.setProperty(t,e,r)}}function $c(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function bi(t,e,r){return arguments.length>1?this.each((e==null?Ec:typeof e=="function"?$c:Oc)(t,e,r??"")):jt(this.node(),t)}function jt(t,e){return t.style.getPropertyValue(e)||Kr(t).getComputedStyle(t,null).getPropertyValue(e)}function Pc(t){return function(){delete this[t]}}function Fc(t,e){return function(){this[t]=e}}function zc(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function wi(t,e){return arguments.length>1?this.each((e==null?Pc:typeof e=="function"?zc:Fc)(t,e)):this.node()[t]}function Ti(t){return t.trim().split(/^|\s+/)}function sa(t){return t.classList||new Ci(t)}function Ci(t){this._node=t,this._names=Ti(t.getAttribute("class")||"")}Ci.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Mi(t,e){for(var r=sa(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function ki(t,e){for(var r=sa(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function Hc(t){return function(){Mi(this,t)}}function Lc(t){return function(){ki(this,t)}}function Uc(t,e){return function(){(e.apply(this,arguments)?Mi:ki)(this,t)}}function Ai(t,e){var r=Ti(t+"");if(arguments.length<2){for(var n=sa(this.node()),a=-1,o=r.length;++a<o;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?Uc:e?Hc:Lc)(r,e))}function Xc(){this.textContent=""}function Yc(t){return function(){this.textContent=t}}function Vc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Si(t){return arguments.length?this.each(t==null?Xc:(typeof t=="function"?Vc:Yc)(t)):this.node().textContent}function qc(){this.innerHTML=""}function Bc(t){return function(){this.innerHTML=t}}function Wc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Di(t){return arguments.length?this.each(t==null?qc:(typeof t=="function"?Wc:Bc)(t)):this.node().innerHTML}function Zc(){this.nextSibling&&this.parentNode.appendChild(this)}function Ni(){return this.each(Zc)}function Gc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ii(){return this.each(Gc)}function Ri(t){var e=typeof t=="function"?t:Qr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Qc(){return null}function Ei(t,e){var r=typeof t=="function"?t:Qr(t),n=e==null?Qc:typeof e=="function"?e:pe(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function jc(){var t=this.parentNode;t&&t.removeChild(this)}function Oi(){return this.each(jc)}function Jc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $i(t){return this.select(t?Kc:Jc)}function Pi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function tf(t){return function(e){t.call(this,e,this.__data__)}}function ef(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function rf(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,o;r<a;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++n]=o;++n?e.length=n:delete this.__on}}}function nf(t,e,r){return function(){var n=this.__on,a,o=tf(e);if(n){for(var i=0,s=n.length;i<s;++i)if((a=n[i]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=r),a.value=e;return}}this.addEventListener(t.type,o,r),a={type:t.type,name:t.name,value:e,listener:o,options:r},n?n.push(a):this.__on=[a]}}function Fi(t,e,r){var n=ef(t+""),a,o=n.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,f;u<l;++u)for(a=0,f=s[u];a<o;++a)if((i=n[a]).type===f.type&&i.name===f.name)return f.value}return}for(s=e?nf:rf,a=0;a<o;++a)this.each(s(n[a],e,r));return this}function zi(t,e,r){var n=Kr(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function af(t,e){return function(){return zi(this,t,e)}}function of(t,e){return function(){return zi(this,t,e.apply(this,arguments))}}function Hi(t,e){return this.each((typeof e=="function"?of:af)(t,e))}function*Li(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length,i;a<o;++a)(i=n[a])&&(yield i)}var ua=[null];function rt(t,e){this._groups=t,this._parents=e}function Ui(){return new rt([[document.documentElement]],ua)}function sf(){return this}rt.prototype=Ui.prototype={constructor:rt,select:ei,selectAll:ri,selectChild:ni,selectChildren:ai,filter:oi,data:ui,enter:ii,exit:li,join:ci,merge:fi,selection:sf,order:hi,sort:pi,call:mi,nodes:di,node:gi,size:xi,empty:yi,each:vi,attr:_i,style:bi,property:wi,classed:Ai,text:Si,html:Di,raise:Ni,lower:Ii,append:Ri,insert:Ei,remove:Oi,clone:$i,datum:Pi,on:Fi,dispatch:Hi,[Symbol.iterator]:Li};var Vt=Ui;function W(t){return typeof t=="string"?new rt([[document.querySelector(t)]],[document.documentElement]):new rt([[t]],ua)}function Xi(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qt(t,e){if(t=Xi(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}var tn={capture:!0,passive:!1};function en(t){t.preventDefault(),t.stopImmediatePropagation()}function la(t){var e=t.document.documentElement,r=W(t).on("dragstart.drag",en,tn);"onselectstart"in e?r.on("selectstart.drag",en,tn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ca(t,e){var r=t.document.documentElement,n=W(t).on("dragstart.drag",null);e&&(n.on("click.drag",en,tn),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function rn(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function fa(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function fr(){}var lr=.7,on=1/lr,ze="\\s*([+-]?\\d+)\\s*",cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uf=/^#([0-9a-f]{3,8})$/,lf=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),cf=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),ff=new RegExp(`^rgba\\(${ze},${ze},${ze},${cr}\\)$`),hf=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${cr}\\)$`),pf=new RegExp(`^hsl\\(${cr},${Pt},${Pt}\\)$`),mf=new RegExp(`^hsla\\(${cr},${Pt},${Pt},${cr}\\)$`),Yi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rn(fr,Dt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Vi,formatHex:Vi,formatHex8:df,formatHsl:gf,formatRgb:qi,toString:qi});function Vi(){return this.rgb().formatHex()}function df(){return this.rgb().formatHex8()}function gf(){return ji(this).formatHsl()}function qi(){return this.rgb().formatRgb()}function Dt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=uf.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Bi(e):r===3?new Ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?nn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?nn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lf.exec(t))?new Ct(e[1],e[2],e[3],1):(e=cf.exec(t))?new Ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ff.exec(t))?nn(e[1],e[2],e[3],e[4]):(e=hf.exec(t))?nn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pf.exec(t))?Gi(e[1],e[2]/100,e[3]/100,1):(e=mf.exec(t))?Gi(e[1],e[2]/100,e[3]/100,e[4]):Yi.hasOwnProperty(t)?Bi(Yi[t]):t==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Bi(t){return new Ct(t>>16&255,t>>8&255,t&255,1)}function nn(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ct(t,e,r,n)}function xf(t){return t instanceof fr||(t=Dt(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function He(t,e,r,n){return arguments.length===1?xf(t):new Ct(t,e,r,n??1)}function Ct(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}rn(Ct,He,fa(fr,{brighter(t){return t=t==null?on:Math.pow(on,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?lr:Math.pow(lr,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ct(de(this.r),de(this.g),de(this.b),sn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wi,formatHex:Wi,formatHex8:yf,formatRgb:Zi,toString:Zi}));function Wi(){return`#${me(this.r)}${me(this.g)}${me(this.b)}`}function yf(){return`#${me(this.r)}${me(this.g)}${me(this.b)}${me((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zi(){let t=sn(this.opacity);return`${t===1?"rgb(":"rgba("}${de(this.r)}, ${de(this.g)}, ${de(this.b)}${t===1?")":`, ${t})`}`}function sn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function de(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function me(t){return t=de(t),(t<16?"0":"")+t.toString(16)}function Gi(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new St(t,e,r,n)}function ji(t){if(t instanceof St)return new St(t.h,t.s,t.l,t.opacity);if(t instanceof fr||(t=Dt(t)),!t)return new St;if(t instanceof St)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),o=Math.max(e,r,n),i=NaN,s=o-a,u=(o+a)/2;return s?(e===o?i=(r-n)/s+(r<n)*6:r===o?i=(n-e)/s+2:i=(e-r)/s+4,s/=u<.5?o+a:2-o-a,i*=60):s=u>0&&u<1?0:i,new St(i,s,u,t.opacity)}function Ji(t,e,r,n){return arguments.length===1?ji(t):new St(t,e,r,n??1)}function St(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}rn(St,Ji,fa(fr,{brighter(t){return t=t==null?on:Math.pow(on,t),new St(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?lr:Math.pow(lr,t),new St(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Ct(ha(t>=240?t-240:t+120,a,n),ha(t,a,n),ha(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new St(Qi(this.h),an(this.s),an(this.l),sn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=sn(this.opacity);return`${t===1?"hsl(":"hsla("}${Qi(this.h)}, ${an(this.s)*100}%, ${an(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Qi(t){return t=(t||0)%360,t<0?t+360:t}function an(t){return Math.max(0,Math.min(1,t||0))}function ha(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function pa(t,e,r,n,a){var o=t*t,i=o*t;return((1-3*t+3*o-i)*e+(4-6*o+3*i)*r+(1+3*t+3*o-3*i)*n+i*a)/6}function Ki(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),a=t[n],o=t[n+1],i=n>0?t[n-1]:2*a-o,s=n<e-1?t[n+2]:2*o-a;return pa((r-n/e)*e,i,a,o,s)}}function ts(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),a=t[(n+e-1)%e],o=t[n%e],i=t[(n+1)%e],s=t[(n+2)%e];return pa((r-n/e)*e,a,o,i,s)}}var hr=t=>()=>t;function vf(t,e){return function(r){return t+r*e}}function _f(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function es(t){return(t=+t)==1?un:function(e,r){return r-e?_f(e,r,t):hr(isNaN(e)?r:e)}}function un(t,e){var r=e-t;return r?vf(t,r):hr(isNaN(t)?e:t)}var ge=(function t(e){var r=es(e);function n(a,o){var i=r((a=He(a)).r,(o=He(o)).r),s=r(a.g,o.g),u=r(a.b,o.b),l=un(a.opacity,o.opacity);return function(f){return a.r=i(f),a.g=s(f),a.b=u(f),a.opacity=l(f),a+""}}return n.gamma=t,n})(1);function rs(t){return function(e){var r=e.length,n=new Array(r),a=new Array(r),o=new Array(r),i,s;for(i=0;i<r;++i)s=He(e[i]),n[i]=s.r||0,a[i]=s.g||0,o[i]=s.b||0;return n=t(n),a=t(a),o=t(o),s.opacity=1,function(u){return s.r=n(u),s.g=a(u),s.b=o(u),s+""}}}var bf=rs(Ki),wf=rs(ts);function ns(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(o){for(a=0;a<r;++a)n[a]=t[a]*(1-o)+e[a]*o;return n}}function as(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function os(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),o=new Array(r),i;for(i=0;i<n;++i)a[i]=Bt(t[i],e[i]);for(;i<r;++i)o[i]=e[i];return function(s){for(i=0;i<n;++i)o[i]=a[i](s);return o}}function is(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function lt(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function ss(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Bt(t[a],e[a]):n[a]=e[a];return function(o){for(a in r)n[a]=r[a](o);return n}}var da=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ma=new RegExp(da.source,"g");function Tf(t){return function(){return t}}function Cf(t){return function(e){return t(e)+""}}function pr(t,e){var r=da.lastIndex=ma.lastIndex=0,n,a,o,i=-1,s=[],u=[];for(t=t+"",e=e+"";(n=da.exec(t))&&(a=ma.exec(e));)(o=a.index)>r&&(o=e.slice(r,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(a=a[0])?s[i]?s[i]+=a:s[++i]=a:(s[++i]=null,u.push({i,x:lt(n,a)})),r=ma.lastIndex;return r<e.length&&(o=e.slice(r),s[i]?s[i]+=o:s[++i]=o),s.length<2?u[0]?Cf(u[0].x):Tf(e):(e=u.length,function(l){for(var f=0,h;f<e;++f)s[(h=u[f]).i]=h.x(l);return s.join("")})}function Bt(t,e){var r=typeof e,n;return e==null||r==="boolean"?hr(e):(r==="number"?lt:r==="string"?(n=Dt(e))?(e=n,ge):pr:e instanceof Dt?ge:e instanceof Date?is:as(e)?ns:Array.isArray(e)?os:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ss:lt)(t,e)}function ga(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var us=180/Math.PI,ln={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xa(t,e,r,n,a,o){var i,s,u;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,u/=s),t*n<e*r&&(t=-t,e=-e,u=-u,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(e,t)*us,skewX:Math.atan(u)*us,scaleX:i,scaleY:s}}var cn;function ls(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ln:xa(e.a,e.b,e.c,e.d,e.e,e.f)}function cs(t){return t==null?ln:(cn||(cn=document.createElementNS("http://www.w3.org/2000/svg","g")),cn.setAttribute("transform",t),(t=cn.transform.baseVal.consolidate())?(t=t.matrix,xa(t.a,t.b,t.c,t.d,t.e,t.f)):ln)}function fs(t,e,r,n){function a(l){return l.length?l.pop()+" ":""}function o(l,f,h,c,p,x){if(l!==h||f!==c){var y=p.push("translate(",null,e,null,r);x.push({i:y-4,x:lt(l,h)},{i:y-2,x:lt(f,c)})}else(h||c)&&p.push("translate("+h+e+c+r)}function i(l,f,h,c){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),c.push({i:h.push(a(h)+"rotate(",null,n)-2,x:lt(l,f)})):f&&h.push(a(h)+"rotate("+f+n)}function s(l,f,h,c){l!==f?c.push({i:h.push(a(h)+"skewX(",null,n)-2,x:lt(l,f)}):f&&h.push(a(h)+"skewX("+f+n)}function u(l,f,h,c,p,x){if(l!==h||f!==c){var y=p.push(a(p)+"scale(",null,",",null,")");x.push({i:y-4,x:lt(l,h)},{i:y-2,x:lt(f,c)})}else(h!==1||c!==1)&&p.push(a(p)+"scale("+h+","+c+")")}return function(l,f){var h=[],c=[];return l=t(l),f=t(f),o(l.translateX,l.translateY,f.translateX,f.translateY,h,c),i(l.rotate,f.rotate,h,c),s(l.skewX,f.skewX,h,c),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,h,c),l=f=null,function(p){for(var x=-1,y=c.length,d;++x<y;)h[(d=c[x]).i]=d.x(p);return h.join("")}}}var ya=fs(ls,"px, ","px)","deg)"),va=fs(cs,", ",")",")");var Mf=1e-12;function hs(t){return((t=Math.exp(t))+1/t)/2}function kf(t){return((t=Math.exp(t))-1/t)/2}function Af(t){return((t=Math.exp(2*t))-1)/(t+1)}var _a=(function t(e,r,n){function a(o,i){var s=o[0],u=o[1],l=o[2],f=i[0],h=i[1],c=i[2],p=f-s,x=h-u,y=p*p+x*x,d,g;if(y<Mf)g=Math.log(c/l)/e,d=function(F){return[s+F*p,u+F*x,l*Math.exp(e*F*g)]};else{var M=Math.sqrt(y),k=(c*c-l*l+n*y)/(2*l*r*M),w=(c*c-l*l-n*y)/(2*c*r*M),S=Math.log(Math.sqrt(k*k+1)-k),T=Math.log(Math.sqrt(w*w+1)-w);g=(T-S)/e,d=function(F){var O=F*g,N=hs(S),R=l/(r*M)*(N*Af(e*O+S)-kf(S));return[s+R*p,u+R*x,l*N/hs(e*O+S)]}}return d.duration=g*1e3*e/Math.SQRT2,d}return a.rho=function(o){var i=Math.max(.001,+o),s=i*i,u=s*s;return t(i,s,u)},a})(Math.SQRT2,2,4);var Le=0,dr=0,mr=0,ms=1e3,fn,gr,hn=0,xe=0,pn=0,xr=typeof performance=="object"&&performance.now?performance:Date,ds=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function vr(){return xe||(ds(Sf),xe=xr.now()+pn)}function Sf(){xe=0}function yr(){this._call=this._time=this._next=null}yr.prototype=mn.prototype={constructor:yr,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?vr():+r)+(e==null?0:+e),!this._next&&gr!==this&&(gr?gr._next=this:fn=this,gr=this),this._call=t,this._time=r,ba()},stop:function(){this._call&&(this._call=null,this._time=1/0,ba())}};function mn(t,e,r){var n=new yr;return n.restart(t,e,r),n}function gs(){vr(),++Le;for(var t=fn,e;t;)(e=xe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Le}function ps(){xe=(hn=xr.now())+pn,Le=dr=0;try{gs()}finally{Le=0,Nf(),xe=0}}function Df(){var t=xr.now(),e=t-hn;e>ms&&(pn-=e,hn=t)}function Nf(){for(var t,e=fn,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:fn=r);gr=t,ba(n)}function ba(t){if(!Le){dr&&(dr=clearTimeout(dr));var e=t-xe;e>24?(t<1/0&&(dr=setTimeout(ps,t-xr.now()-pn)),mr&&(mr=clearInterval(mr))):(mr||(hn=xr.now(),mr=setInterval(Df,ms)),Le=1,ds(ps))}}function dn(t,e,r){var n=new yr;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var If=or("start","end","cancel","interrupt"),Rf=[],vs=0,xs=1,xn=2,gn=3,ys=4,yn=5,_r=6;function Jt(t,e,r,n,a,o){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;Ef(t,r,{name:e,index:n,group:a,on:If,tween:Rf,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:vs})}function br(t,e){var r=it(t,e);if(r.state>vs)throw new Error("too late; already scheduled");return r}function ct(t,e){var r=it(t,e);if(r.state>gn)throw new Error("too late; already running");return r}function it(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Ef(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=mn(o,0,r.time);function o(l){r.state=xs,r.timer.restart(i,r.delay,r.time),r.delay<=l&&i(l-r.delay)}function i(l){var f,h,c,p;if(r.state!==xs)return u();for(f in n)if(p=n[f],p.name===r.name){if(p.state===gn)return dn(i);p.state===ys?(p.state=_r,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete n[f]):+f<e&&(p.state=_r,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete n[f])}if(dn(function(){r.state===gn&&(r.state=ys,r.timer.restart(s,r.delay,r.time),s(l))}),r.state=xn,r.on.call("start",t,t.__data__,r.index,r.group),r.state===xn){for(r.state=gn,a=new Array(c=r.tween.length),f=0,h=-1;f<c;++f)(p=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(a[++h]=p);a.length=h+1}}function s(l){for(var f=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(u),r.state=yn,1),h=-1,c=a.length;++h<c;)a[h].call(t,f);r.state===yn&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=_r,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function Kt(t,e){var r=t.__transition,n,a,o=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){o=!1;continue}a=n.state>xn&&n.state<yn,n.state=_r,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}o&&delete t.__transition}}function _s(t){return this.each(function(){Kt(this,t)})}function Of(t,e){var r,n;return function(){var a=ct(this,t),o=a.tween;if(o!==r){n=r=o;for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function $f(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var o=ct(this,t),i=o.tween;if(i!==n){a=(n=i).slice();for(var s={name:e,value:r},u=0,l=a.length;u<l;++u)if(a[u].name===e){a[u]=s;break}u===l&&a.push(s)}o.tween=a}}function bs(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=it(this.node(),r).tween,a=0,o=n.length,i;a<o;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((e==null?Of:$f)(r,t,e))}function Ue(t,e,r){var n=t._id;return t.each(function(){var a=ct(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return it(a,n).value[e]}}function vn(t,e){var r;return(typeof e=="number"?lt:e instanceof Dt?ge:(r=Dt(e))?(e=r,ge):pr)(t,e)}function Pf(t){return function(){this.removeAttribute(t)}}function Ff(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zf(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttribute(t);return i===a?null:i===n?o:o=e(n=i,r)}}function Hf(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttributeNS(t.space,t.local);return i===a?null:i===n?o:o=e(n=i,r)}}function Lf(t,e,r){var n,a,o;return function(){var i,s=r(this),u;return s==null?void this.removeAttribute(t):(i=this.getAttribute(t),u=s+"",i===u?null:i===n&&u===a?o:(a=u,o=e(n=i,s)))}}function Uf(t,e,r){var n,a,o;return function(){var i,s=r(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),u=s+"",i===u?null:i===n&&u===a?o:(a=u,o=e(n=i,s)))}}function ws(t,e){var r=Yt(t),n=r==="transform"?va:vn;return this.attrTween(t,typeof e=="function"?(r.local?Uf:Lf)(r,n,Ue(this,"attr."+t,e)):e==null?(r.local?Ff:Pf)(r):(r.local?Hf:zf)(r,n,e))}function Xf(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Yf(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Vf(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&Yf(t,o)),r}return a._value=e,a}function qf(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&Xf(t,o)),r}return a._value=e,a}function Ts(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Yt(t);return this.tween(r,(n.local?Vf:qf)(n,e))}function Bf(t,e){return function(){br(this,t).delay=+e.apply(this,arguments)}}function Wf(t,e){return e=+e,function(){br(this,t).delay=e}}function Cs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Bf:Wf)(e,t)):it(this.node(),e).delay}function Zf(t,e){return function(){ct(this,t).duration=+e.apply(this,arguments)}}function Gf(t,e){return e=+e,function(){ct(this,t).duration=e}}function Ms(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zf:Gf)(e,t)):it(this.node(),e).duration}function Qf(t,e){if(typeof e!="function")throw new Error;return function(){ct(this,t).ease=e}}function ks(t){var e=this._id;return arguments.length?this.each(Qf(e,t)):it(this.node(),e).ease}function jf(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;ct(this,t).ease=r}}function As(t){if(typeof t!="function")throw new Error;return this.each(jf(this._id,t))}function Ss(t){typeof t!="function"&&(t=sr(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],u,l=0;l<i;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&s.push(u);return new _t(n,this._parents,this._name,this._id)}function Ds(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,o=Math.min(n,a),i=new Array(n),s=0;s<o;++s)for(var u=e[s],l=r[s],f=u.length,h=i[s]=new Array(f),c,p=0;p<f;++p)(c=u[p]||l[p])&&(h[p]=c);for(;s<n;++s)i[s]=e[s];return new _t(i,this._parents,this._name,this._id)}function Jf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Kf(t,e,r){var n,a,o=Jf(e)?br:ct;return function(){var i=o(this,t),s=i.on;s!==n&&(a=(n=s).copy()).on(e,r),i.on=a}}function Ns(t,e){var r=this._id;return arguments.length<2?it(this.node(),r).on.on(t):this.each(Kf(r,t,e))}function th(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Is(){return this.on("end.remove",th(this._id))}function Rs(t){var e=this._name,r=this._id;typeof t!="function"&&(t=pe(t));for(var n=this._groups,a=n.length,o=new Array(a),i=0;i<a;++i)for(var s=n[i],u=s.length,l=o[i]=new Array(u),f,h,c=0;c<u;++c)(f=s[c])&&(h=t.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),l[c]=h,Jt(l[c],e,r,c,l,it(f,r)));return new _t(o,this._parents,e,r)}function Es(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ir(t));for(var n=this._groups,a=n.length,o=[],i=[],s=0;s<a;++s)for(var u=n[s],l=u.length,f,h=0;h<l;++h)if(f=u[h]){for(var c=t.call(f,f.__data__,h,u),p,x=it(f,r),y=0,d=c.length;y<d;++y)(p=c[y])&&Jt(p,e,r,y,c,x);o.push(c),i.push(f)}return new _t(o,i,e,r)}var eh=Vt.prototype.constructor;function Os(){return new eh(this._groups,this._parents)}function rh(t,e){var r,n,a;return function(){var o=jt(this,t),i=(this.style.removeProperty(t),jt(this,t));return o===i?null:o===r&&i===n?a:a=e(r=o,n=i)}}function $s(t){return function(){this.style.removeProperty(t)}}function nh(t,e,r){var n,a=r+"",o;return function(){var i=jt(this,t);return i===a?null:i===n?o:o=e(n=i,r)}}function ah(t,e,r){var n,a,o;return function(){var i=jt(this,t),s=r(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),jt(this,t))),i===u?null:i===n&&u===a?o:(a=u,o=e(n=i,s))}}function oh(t,e){var r,n,a,o="style."+e,i="end."+o,s;return function(){var u=ct(this,t),l=u.on,f=u.value[o]==null?s||(s=$s(e)):void 0;(l!==r||a!==f)&&(n=(r=l).copy()).on(i,a=f),u.on=n}}function Ps(t,e,r){var n=(t+="")=="transform"?ya:vn;return e==null?this.styleTween(t,rh(t,n)).on("end.style."+t,$s(t)):typeof e=="function"?this.styleTween(t,ah(t,n,Ue(this,"style."+t,e))).each(oh(this._id,t)):this.styleTween(t,nh(t,n,e),r).on("end.style."+t,null)}function ih(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function sh(t,e,r){var n,a;function o(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&ih(t,i,r)),n}return o._value=e,o}function Fs(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,sh(t,e,r??""))}function uh(t){return function(){this.textContent=t}}function lh(t){return function(){var e=t(this);this.textContent=e??""}}function zs(t){return this.tween("text",typeof t=="function"?lh(Ue(this,"text",t)):uh(t==null?"":t+""))}function ch(t){return function(e){this.textContent=t.call(this,e)}}function fh(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&ch(a)),e}return n._value=t,n}function Hs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,fh(t))}function Ls(){for(var t=this._name,e=this._id,r=_n(),n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,u,l=0;l<s;++l)if(u=i[l]){var f=it(u,e);Jt(u,t,r,l,i,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new _t(n,this._parents,t,r)}function Us(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(o,i){var s={value:i},u={value:function(){--a===0&&o()}};r.each(function(){var l=ct(this,n),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),a===0&&o()})}var hh=0;function _t(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Xs(t){return Vt().transition(t)}function _n(){return++hh}var Wt=Vt.prototype;_t.prototype=Xs.prototype={constructor:_t,select:Rs,selectAll:Es,selectChild:Wt.selectChild,selectChildren:Wt.selectChildren,filter:Ss,merge:Ds,selection:Os,transition:Ls,call:Wt.call,nodes:Wt.nodes,node:Wt.node,size:Wt.size,empty:Wt.empty,each:Wt.each,on:Ns,attr:ws,attrTween:Ts,style:Ps,styleTween:Fs,text:zs,textTween:Hs,remove:Is,tween:bs,delay:Cs,duration:Ms,ease:ks,easeVarying:As,end:Us,[Symbol.iterator]:Wt[Symbol.iterator]};function bn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ph={time:null,delay:0,duration:250,ease:bn};function mh(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Ys(t){var e,r;t instanceof _t?(e=t._id,t=t._name):(e=_n(),(r=ph).time=vr(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,u,l=0;l<s;++l)(u=i[l])&&Jt(u,t,e,l,i,r||mh(u,e));return new _t(n,this._parents,t,e)}Vt.prototype.interrupt=_s;Vt.prototype.transition=Ys;var{abs:qv,max:Bv,min:Wv}=Math;function Vs(t){return[+t[0],+t[1]]}function dh(t){return[Vs(t[0]),Vs(t[1])]}var Zv={name:"x",handles:["w","e"].map(wa),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Gv={name:"y",handles:["n","s"].map(wa),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Qv={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(wa),input:function(t){return t==null?null:dh(t)},output:function(t){return t}};function wa(t){return{type:t}}var Ta=Math.PI,Ca=2*Ta,ye=1e-6,gh=Ca-ye;function qs(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function xh(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qs;let r=10**e;return function(n){this._+=n[0];for(let a=1,o=n.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}var ve=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?qs:xh(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,o,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+o},${this._y1=+i}`}arcTo(e,r,n,a,o){if(e=+e,r=+r,n=+n,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,s=this._y1,u=n-e,l=a-r,f=i-e,h=s-r,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(c>ye)if(!(Math.abs(h*u-l*f)>ye)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-i,x=a-s,y=u*u+l*l,d=p*p+x*x,g=Math.sqrt(y),M=Math.sqrt(c),k=o*Math.tan((Ta-Math.acos((y+c-d)/(2*g*M)))/2),w=k/M,S=k/g;Math.abs(w-1)>ye&&this._append`L${e+w*f},${r+w*h}`,this._append`A${o},${o},0,0,${+(h*p>f*x)},${this._x1=e+S*u},${this._y1=r+S*l}`}}arc(e,r,n,a,o,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),u=n*Math.sin(a),l=e+s,f=r+u,h=1^i,c=i?a-o:o-a;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>ye||Math.abs(this._y1-f)>ye)&&this._append`L${l},${f}`,n&&(c<0&&(c=c%Ca+Ca),c>gh?this._append`A${n},${n},0,1,${h},${e-s},${r-u}A${n},${n},0,1,${h},${this._x1=l},${this._y1=f}`:c>ye&&this._append`A${n},${n},0,${+(c>=Ta)},${h},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}};function Bs(){return new ve}Bs.prototype=ve.prototype;function Ws(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _e(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Ft(t){return t=_e(Math.abs(t)),t?t[1]:NaN}function Zs(t,e){return function(r,n){for(var a=r.length,o=[],i=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),o.push(r.substring(a-=s,a+s)),!((u+=s+1)>n));)s=t[i=(i+1)%t.length];return o.reverse().join(e)}}function Gs(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var yh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function te(t){if(!(e=yh.exec(t)))throw new Error("invalid format: "+t);var e;return new wn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}te.prototype=wn.prototype;function wn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qs(t){t:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var Ma;function js(t,e){var r=_e(t,e);if(!r)return t+"";var n=r[0],a=r[1],o=a-(Ma=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+_e(t,Math.max(0,e+o-1))[0]}function ka(t,e){var r=_e(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}var Aa={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ws,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ka(t*100,e),r:ka,s:js,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Sa(t){return t}var Js=Array.prototype.map,Ks=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function tu(t){var e=t.grouping===void 0||t.thousands===void 0?Sa:Zs(Js.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Sa:Gs(Js.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(h){h=te(h);var c=h.fill,p=h.align,x=h.sign,y=h.symbol,d=h.zero,g=h.width,M=h.comma,k=h.precision,w=h.trim,S=h.type;S==="n"?(M=!0,S="g"):Aa[S]||(k===void 0&&(k=12),w=!0,S="g"),(d||c==="0"&&p==="=")&&(d=!0,c="0",p="=");var T=y==="$"?r:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",F=y==="$"?n:/[%p]/.test(S)?i:"",O=Aa[S],N=/[defgprs%]/.test(S);k=k===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function R($){var v=T,C=F,m,D,b;if(S==="c")C=O($)+C,$="";else{$=+$;var I=$<0||1/$<0;if($=isNaN($)?u:O(Math.abs($),k),w&&($=Qs($)),I&&+$==0&&x!=="+"&&(I=!1),v=(I?x==="("?x:s:x==="-"||x==="("?"":x)+v,C=(S==="s"?Ks[8+Ma/3]:"")+C+(I&&x==="("?")":""),N){for(m=-1,D=$.length;++m<D;)if(b=$.charCodeAt(m),48>b||b>57){C=(b===46?a+$.slice(m+1):$.slice(m))+C,$=$.slice(0,m);break}}}M&&!d&&($=e($,1/0));var z=v.length+$.length+C.length,H=z<g?new Array(g-z+1).join(c):"";switch(M&&d&&($=e(H+$,H.length?g-C.length:1/0),H=""),p){case"<":$=v+$+C+H;break;case"=":$=v+H+$+C;break;case"^":$=H.slice(0,z=H.length>>1)+v+$+C+H.slice(z);break;default:$=H+v+$+C;break}return o($)}return R.toString=function(){return h+""},R}function f(h,c){var p=l((h=te(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Ft(c)/3)))*3,y=Math.pow(10,-x),d=Ks[8+x/3];return function(g){return p(y*g)+d}}return{format:l,formatPrefix:f}}var Tn,mt,Cn;Da({thousands:",",grouping:[3],currency:["$",""]});function Da(t){return Tn=tu(t),mt=Tn.format,Cn=Tn.formatPrefix,Tn}function Na(t){return Math.max(0,-Ft(Math.abs(t)))}function Ia(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ft(e)/3)))*3-Ft(Math.abs(t)))}function Ra(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ft(e)-Ft(t))+1}function vh(t){var e=0,r=t.children,n=r&&r.length;if(!n)e=1;else for(;--n>=0;)e+=r[n].value;t.value=e}function eu(){return this.eachAfter(vh)}function ru(t,e){let r=-1;for(let n of this)t.call(e,n,++r,this);return this}function nu(t,e){for(var r=this,n=[r],a,o,i=-1;r=n.pop();)if(t.call(e,r,++i,this),a=r.children)for(o=a.length-1;o>=0;--o)n.push(a[o]);return this}function au(t,e){for(var r=this,n=[r],a=[],o,i,s,u=-1;r=n.pop();)if(a.push(r),o=r.children)for(i=0,s=o.length;i<s;++i)n.push(o[i]);for(;r=a.pop();)t.call(e,r,++u,this);return this}function ou(t,e){let r=-1;for(let n of this)if(t.call(e,n,++r,this))return n}function iu(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,n=e.children,a=n&&n.length;--a>=0;)r+=n[a].value;e.value=r})}function su(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function uu(t){for(var e=this,r=_h(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var a=n.length;t!==r;)n.splice(a,0,t),t=t.parent;return n}function _h(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),a=null;for(t=r.pop(),e=n.pop();t===e;)a=t,t=r.pop(),e=n.pop();return a}function lu(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function cu(){return Array.from(this)}function fu(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function hu(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*pu(){var t=this,e,r=[t],n,a,o;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,n=t.children)for(a=0,o=n.length;a<o;++a)r.push(n[a]);while(r.length)}function zt(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Th)):e===void 0&&(e=wh);for(var r=new be(t),n,a=[r],o,i,s,u;n=a.pop();)if((i=e(n.data))&&(u=(i=Array.from(i)).length))for(n.children=i,s=u-1;s>=0;--s)a.push(o=i[s]=new be(i[s])),o.parent=n,o.depth=n.depth+1;return r.eachBefore(Mh)}function bh(){return zt(this).eachBefore(Ch)}function wh(t){return t.children}function Th(t){return Array.isArray(t)?t[1]:null}function Ch(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Mh(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function be(t){this.data=t,this.depth=this.height=0,this.parent=null}be.prototype=zt.prototype={constructor:be,count:eu,each:ru,eachAfter:au,eachBefore:nu,find:ou,sum:iu,sort:su,path:uu,ancestors:lu,descendants:cu,leaves:fu,links:hu,copy:bh,[Symbol.iterator]:pu};function mu(t){return t==null?null:Ea(t)}function Ea(t){if(typeof t!="function")throw new Error;return t}function Zt(){return 0}function ee(t){return function(){return t}}function du(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function gu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xu(t,e){let r=t.length,n,a;for(;r;)a=e()*r--|0,n=t[r],t[r]=t[a],t[a]=n;return t}function yu(t,e){for(var r=0,n=(t=xu(Array.from(t),e)).length,a=[],o,i;r<n;)o=t[r],i&&vu(i,o)?++r:(i=Ah(a=kh(a,o)),r=0);return i}function kh(t,e){var r,n;if(Oa(e,t))return[e];for(r=0;r<t.length;++r)if(Mn(e,t[r])&&Oa(wr(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(Mn(wr(t[r],t[n]),e)&&Mn(wr(t[r],e),t[n])&&Mn(wr(t[n],e),t[r])&&Oa(_u(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error}function Mn(t,e){var r=t.r-e.r,n=e.x-t.x,a=e.y-t.y;return r<0||r*r<n*n+a*a}function vu(t,e){var r=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function Oa(t,e){for(var r=0;r<e.length;++r)if(!vu(t,e[r]))return!1;return!0}function Ah(t){switch(t.length){case 1:return Sh(t[0]);case 2:return wr(t[0],t[1]);case 3:return _u(t[0],t[1],t[2])}}function Sh(t){return{x:t.x,y:t.y,r:t.r}}function wr(t,e){var r=t.x,n=t.y,a=t.r,o=e.x,i=e.y,s=e.r,u=o-r,l=i-n,f=s-a,h=Math.sqrt(u*u+l*l);return{x:(r+o+u/h*f)/2,y:(n+i+l/h*f)/2,r:(h+a+s)/2}}function _u(t,e,r){var n=t.x,a=t.y,o=t.r,i=e.x,s=e.y,u=e.r,l=r.x,f=r.y,h=r.r,c=n-i,p=n-l,x=a-s,y=a-f,d=u-o,g=h-o,M=n*n+a*a-o*o,k=M-i*i-s*s+u*u,w=M-l*l-f*f+h*h,S=p*x-c*y,T=(x*w-y*k)/(S*2)-n,F=(y*d-x*g)/S,O=(p*k-c*w)/(S*2)-a,N=(c*g-p*d)/S,R=F*F+N*N-1,$=2*(o+T*F+O*N),v=T*T+O*O-o*o,C=-(Math.abs(R)>1e-6?($+Math.sqrt($*$-4*R*v))/(2*R):v/$);return{x:n+T+F*C,y:a+O+N*C,r:C}}function bu(t,e,r){var n=t.x-e.x,a,o,i=t.y-e.y,s,u,l=n*n+i*i;l?(o=e.r+r.r,o*=o,u=t.r+r.r,u*=u,o>u?(a=(l+u-o)/(2*l),s=Math.sqrt(Math.max(0,u/l-a*a)),r.x=t.x-a*n-s*i,r.y=t.y-a*i+s*n):(a=(l+o-u)/(2*l),s=Math.sqrt(Math.max(0,o/l-a*a)),r.x=e.x+a*n-s*i,r.y=e.y+a*i+s*n)):(r.x=e.x+r.r,r.y=e.y)}function wu(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function Tu(t){var e=t._,r=t.next._,n=e.r+r.r,a=(e.x*r.r+r.x*e.r)/n,o=(e.y*r.r+r.y*e.r)/n;return a*a+o*o}function kn(t){this._=t,this.next=null,this.previous=null}function Cu(t,e){if(!(o=(t=gu(t)).length))return 0;var r,n,a,o,i,s,u,l,f,h,c;if(r=t[0],r.x=0,r.y=0,!(o>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(o>2))return r.r+n.r;bu(n,r,a=t[2]),r=new kn(r),n=new kn(n),a=new kn(a),r.next=a.previous=n,n.next=r.previous=a,a.next=n.previous=r;t:for(u=3;u<o;++u){bu(r._,n._,a=t[u]),a=new kn(a),l=n.next,f=r.previous,h=n._.r,c=r._.r;do if(h<=c){if(wu(l._,a._)){n=l,r.next=n,n.previous=r,--u;continue t}h+=l._.r,l=l.next}else{if(wu(f._,a._)){r=f,r.next=n,n.previous=r,--u;continue t}c+=f._.r,f=f.previous}while(l!==f.next);for(a.previous=r,a.next=n,r.next=n.previous=n=a,i=Tu(r);(a=a.next)!==n;)(s=Tu(a))<i&&(r=a,i=s);n=r.next}for(r=[n._],a=n;(a=a.next)!==n;)r.push(a._);for(a=yu(r,e),u=0;u<o;++u)r=t[u],r.x-=a.x,r.y-=a.y;return a.r}function Dh(t){return Math.sqrt(t.value)}function Pa(){var t=null,e=1,r=1,n=Zt;function a(o){let i=du();return o.x=e/2,o.y=r/2,t?o.eachBefore(Mu(t)).eachAfter($a(n,.5,i)).eachBefore(ku(1)):o.eachBefore(Mu(Dh)).eachAfter($a(Zt,1,i)).eachAfter($a(n,o.r/Math.min(e,r),i)).eachBefore(ku(Math.min(e,r)/(2*o.r))),o}return a.radius=function(o){return arguments.length?(t=mu(o),a):t},a.size=function(o){return arguments.length?(e=+o[0],r=+o[1],a):[e,r]},a.padding=function(o){return arguments.length?(n=typeof o=="function"?o:ee(+o),a):n},a}function Mu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function $a(t,e,r){return function(n){if(a=n.children){var a,o,i=a.length,s=t(n)*e||0,u;if(s)for(o=0;o<i;++o)a[o].r+=s;if(u=Cu(a,r),s)for(o=0;o<i;++o)a[o].r-=s;n.r=u+s}}}function ku(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function Au(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Su(t,e,r,n,a){for(var o=t.children,i,s=-1,u=o.length,l=t.value&&(n-e)/t.value;++s<u;)i=o[s],i.y0=r,i.y1=a,i.x0=e,i.x1=e+=i.value*l}function Nh(t,e){return t.parent===e.parent?1:2}function Fa(t){var e=t.children;return e?e[0]:t.t}function za(t){var e=t.children;return e?e[e.length-1]:t.t}function Ih(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function Rh(t){for(var e=0,r=0,n=t.children,a=n.length,o;--a>=0;)o=n[a],o.z+=e,o.m+=e,e+=o.s+(r+=o.c)}function Eh(t,e,r){return t.a.parent===e.parent?t.a:r}function An(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}An.prototype=Object.create(be.prototype);function Oh(t){for(var e=new An(t,0),r,n=[e],a,o,i,s;r=n.pop();)if(o=r._.children)for(r.children=new Array(s=o.length),i=s-1;i>=0;--i)n.push(a=r.children[i]=new An(o[i],i)),a.parent=r;return(e.parent=new An(null,0)).children=[e],e}function Ha(){var t=Nh,e=1,r=1,n=null;function a(l){var f=Oh(l);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(i),n)l.eachBefore(u);else{var h=l,c=l,p=l;l.eachBefore(function(M){M.x<h.x&&(h=M),M.x>c.x&&(c=M),M.depth>p.depth&&(p=M)});var x=h===c?1:t(h,c)/2,y=x-h.x,d=e/(c.x+x+y),g=r/(p.depth||1);l.eachBefore(function(M){M.x=(M.x+y)*d,M.y=M.depth*g})}return l}function o(l){var f=l.children,h=l.parent.children,c=l.i?h[l.i-1]:null;if(f){Rh(l);var p=(f[0].z+f[f.length-1].z)/2;c?(l.z=c.z+t(l._,c._),l.m=l.z-p):l.z=p}else c&&(l.z=c.z+t(l._,c._));l.parent.A=s(l,c,l.parent.A||h[0])}function i(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,f,h){if(f){for(var c=l,p=l,x=f,y=c.parent.children[0],d=c.m,g=p.m,M=x.m,k=y.m,w;x=za(x),c=Fa(c),x&&c;)y=Fa(y),p=za(p),p.a=l,w=x.z+M-c.z-d+t(x._,c._),w>0&&(Ih(Eh(x,l,h),l,w),d+=w,g+=w),M+=x.m,d+=c.m,k+=y.m,g+=p.m;x&&!za(p)&&(p.t=x,p.m+=M-g),c&&!Fa(y)&&(y.t=c,y.m+=d-k,h=l)}return h}function u(l){l.x*=e,l.y=l.depth*r}return a.separation=function(l){return arguments.length?(t=l,a):t},a.size=function(l){return arguments.length?(n=!1,e=+l[0],r=+l[1],a):n?null:[e,r]},a.nodeSize=function(l){return arguments.length?(n=!0,e=+l[0],r=+l[1],a):n?[e,r]:null},a}function Du(t,e,r,n,a){for(var o=t.children,i,s=-1,u=o.length,l=t.value&&(a-r)/t.value;++s<u;)i=o[s],i.x0=e,i.x1=n,i.y0=r,i.y1=r+=i.value*l}var $h=(1+Math.sqrt(5))/2;function Ph(t,e,r,n,a,o){for(var i=[],s=e.children,u,l,f=0,h=0,c=s.length,p,x,y=e.value,d,g,M,k,w,S,T;f<c;){p=a-r,x=o-n;do d=s[h++].value;while(!d&&h<c);for(g=M=d,S=Math.max(x/p,p/x)/(y*t),T=d*d*S,w=Math.max(M/T,T/g);h<c;++h){if(d+=l=s[h].value,l<g&&(g=l),l>M&&(M=l),T=d*d*S,k=Math.max(M/T,T/g),k>w){d-=l;break}w=k}i.push(u={value:d,dice:p<x,children:s.slice(f,h)}),u.dice?Su(u,r,n,a,y?n+=x*d/y:o):Du(u,r,n,y?r+=p*d/y:a,o),y-=d,f=h}return i}var Nu=(function t(e){function r(n,a,o,i,s){Ph(e,n,a,o,i,s)}return r.ratio=function(n){return t((n=+n)>1?n:1)},r})($h);function La(){var t=Nu,e=!1,r=1,n=1,a=[0],o=Zt,i=Zt,s=Zt,u=Zt,l=Zt;function f(c){return c.x0=c.y0=0,c.x1=r,c.y1=n,c.eachBefore(h),a=[0],e&&c.eachBefore(Au),c}function h(c){var p=a[c.depth],x=c.x0+p,y=c.y0+p,d=c.x1-p,g=c.y1-p;d<x&&(x=d=(x+d)/2),g<y&&(y=g=(y+g)/2),c.x0=x,c.y0=y,c.x1=d,c.y1=g,c.children&&(p=a[c.depth+1]=o(c)/2,x+=l(c)-p,y+=i(c)-p,d-=s(c)-p,g-=u(c)-p,d<x&&(x=d=(x+d)/2),g<y&&(y=g=(y+g)/2),t(c,x,y,d,g))}return f.round=function(c){return arguments.length?(e=!!c,f):e},f.size=function(c){return arguments.length?(r=+c[0],n=+c[1],f):[r,n]},f.tile=function(c){return arguments.length?(t=Ea(c),f):t},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(o=typeof c=="function"?c:ee(+c),f):o},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(i=typeof c=="function"?c:ee(+c),f):i},f.paddingRight=function(c){return arguments.length?(s=typeof c=="function"?c:ee(+c),f):s},f.paddingBottom=function(c){return arguments.length?(u=typeof c=="function"?c:ee(+c),f):u},f.paddingLeft=function(c){return arguments.length?(l=typeof c=="function"?c:ee(+c),f):l},f}function re(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var Iu=Symbol("implicit");function Sn(){var t=new Pe,e=[],r=[],n=Iu;function a(o){let i=t.get(o);if(i===void 0){if(n!==Iu)return n;t.set(o,i=e.push(o)-1)}return r[i%r.length]}return a.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Pe;for(let i of o)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(o){return arguments.length?(r=Array.from(o),a):r.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return Sn(e,r).unknown(n)},re.apply(a,arguments),a}function Tr(){var t=Sn().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,o,i,s=!1,u=0,l=0,f=.5;delete t.unknown;function h(){var c=e().length,p=a<n,x=p?a:n,y=p?n:a;o=(y-x)/Math.max(1,c-u+l*2),s&&(o=Math.floor(o)),x+=(y-x-o*(c-u))*f,i=o*(1-u),s&&(x=Math.round(x),i=Math.round(i));var d=Br(c).map(function(g){return x+o*g});return r(p?d.reverse():d)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([n,a]=c,n=+n,a=+a,h()):[n,a]},t.rangeRound=function(c){return[n,a]=c,n=+n,a=+a,s=!0,h()},t.bandwidth=function(){return i},t.step=function(){return o},t.round=function(c){return arguments.length?(s=!!c,h()):s},t.padding=function(c){return arguments.length?(u=Math.min(1,l=+c),h()):u},t.paddingInner=function(c){return arguments.length?(u=Math.min(1,c),h()):u},t.paddingOuter=function(c){return arguments.length?(l=+c,h()):l},t.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},t.copy=function(){return Tr(e(),[n,a]).round(s).paddingInner(u).paddingOuter(l).align(f)},re.apply(h(),arguments)}function Ua(t){return function(){return t}}function Xa(t){return+t}var Ru=[0,1];function Xe(t){return t}function Ya(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Ua(isNaN(e)?NaN:.5)}function Fh(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function zh(t,e,r){var n=t[0],a=t[1],o=e[0],i=e[1];return a<n?(n=Ya(a,n),o=r(i,o)):(n=Ya(n,a),o=r(o,i)),function(s){return o(n(s))}}function Hh(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),o=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=Ya(t[i],t[i+1]),o[i]=r(e[i],e[i+1]);return function(s){var u=ta(t,s,1,n)-1;return o[u](a[u](s))}}function Dn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Lh(){var t=Ru,e=Ru,r=Bt,n,a,o,i=Xe,s,u,l;function f(){var c=Math.min(t.length,e.length);return i!==Xe&&(i=Fh(t[0],t[c-1])),s=c>2?Hh:zh,u=l=null,h}function h(c){return c==null||isNaN(c=+c)?o:(u||(u=s(t.map(n),e,r)))(n(i(c)))}return h.invert=function(c){return i(a((l||(l=s(e,t.map(n),lt)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,Xa),f()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),f()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),r=ga,f()},h.clamp=function(c){return arguments.length?(i=c?!0:Xe,f()):i!==Xe},h.interpolate=function(c){return arguments.length?(r=c,f()):r},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,p){return n=c,a=p,f()}}function Cr(){return Lh()(Xe,Xe)}function Va(t,e,r,n){var a=Fe(t,e,r),o;switch(n=te(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=Ia(a,i))&&(n.precision=o),Cn(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=Ra(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=Na(a))&&(n.precision=o-(n.type==="%")*2);break}}return mt(n)}function Uh(t){var e=t.domain;return t.ticks=function(r){var n=e();return qr(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return Va(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,o=n.length-1,i=n[a],s=n[o],u,l,f=10;for(s<i&&(l=i,i=s,s=l,l=a,a=o,o=l);f-- >0;){if(l=er(i,s,r),l===u)return n[a]=i,n[o]=s,e(n);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function At(){var t=Cr();return t.copy=function(){return Dn(t,At())},re.apply(t,arguments),Uh(t)}function qa(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],o=t[n],i;return o<a&&(i=r,r=n,n=i,i=a,a=o,o=i),t[r]=e.floor(a),t[n]=e.ceil(o),t}var Ba=new Date,Wa=new Date;function Z(t,e,r,n){function a(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(t(o=new Date(+o)),o),a.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),a.round=o=>{let i=a(o),s=a.ceil(o);return o-i<s-o?i:s},a.offset=(o,i)=>(e(o=new Date(+o),i==null?1:Math.floor(i)),o),a.range=(o,i,s)=>{let u=[];if(o=a.ceil(o),s=s==null?1:Math.floor(s),!(o<i)||!(s>0))return u;let l;do u.push(l=new Date(+o)),e(o,s),t(o);while(l<o&&o<i);return u},a.filter=o=>Z(i=>{if(i>=i)for(;t(i),!o(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;e(i,-1),!o(i););else for(;--s>=0;)for(;e(i,1),!o(i););}),r&&(a.count=(o,i)=>(Ba.setTime(+o),Wa.setTime(+i),t(Ba),t(Wa),Math.floor(r(Ba,Wa))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(n?i=>n(i)%o===0:i=>a.count(0,i)%o===0):a)),a}var Mr=Z(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Mr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Z(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Mr);var Cb=Mr.range;var Ht=Z(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*1e3)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),Eu=Ht.range;var Ye=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getMinutes()),Xh=Ye.range,Nn=Z(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes()),Yh=Nn.range;var Ve=Z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getHours()),Vh=Ve.range,In=Z(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours()),qh=In.range;var Nt=Z(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Bh=Nt.range,Ar=Z(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>t.getUTCDate()-1),Wh=Ar.range,Rn=Z(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>Math.floor(t/864e5)),Zh=Rn.range;function Ce(t){return Z(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}var It=Ce(0),qe=Ce(1),$u=Ce(2),Pu=Ce(3),ne=Ce(4),Fu=Ce(5),zu=Ce(6),Hu=It.range,Gh=qe.range,Qh=$u.range,jh=Pu.range,Jh=ne.range,Kh=Fu.range,tp=zu.range;function Me(t){return Z(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/6048e5)}var ke=Me(0),Be=Me(1),Lu=Me(2),Uu=Me(3),ae=Me(4),Xu=Me(5),Yu=Me(6),Vu=ke.range,ep=Be.range,rp=Lu.range,np=Uu.range,ap=ae.range,op=Xu.range,ip=Yu.range;var oe=Z(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),sp=oe.range,En=Z(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),up=En.range;var bt=Z(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});var lp=bt.range,Rt=Z(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Z(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});var cp=Rt.range;function Bu(t,e,r,n,a,o){let i=[[Ht,1,1e3],[Ht,5,5*1e3],[Ht,15,15*1e3],[Ht,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[a,1,36e5],[a,3,3*36e5],[a,6,6*36e5],[a,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[e,1,2592e6],[e,3,3*2592e6],[t,1,31536e6]];function s(l,f,h){let c=f<l;c&&([l,f]=[f,l]);let p=h&&typeof h.range=="function"?h:u(l,f,h),x=p?p.range(l,+f+1):[];return c?x.reverse():x}function u(l,f,h){let c=Math.abs(f-l)/h,p=fe(([,,d])=>d).right(i,c);if(p===i.length)return t.every(Fe(l/31536e6,f/31536e6,h));if(p===0)return Mr.every(Math.max(Fe(l,f,h),1));let[x,y]=i[c/i[p-1][2]<i[p][2]/c?p-1:p];return x.every(y)}return[s,u]}var[hp,pp]=Bu(Rt,En,ke,Rn,In,Nn),[Za,Ga]=Bu(bt,oe,It,Nt,Ve,Ye);function Qa(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ja(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sr(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Ja(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,o=t.days,i=t.shortDays,s=t.months,u=t.shortMonths,l=Dr(a),f=Nr(a),h=Dr(o),c=Nr(o),p=Dr(i),x=Nr(i),y=Dr(s),d=Nr(s),g=Dr(u),M=Nr(u),k={a:I,A:z,b:H,B:L,c:null,d:Ju,e:Ju,f:Pp,g:Bp,G:Zp,H:Ep,I:Op,j:$p,L:nl,m:Fp,M:zp,p:V,q:B,Q:el,s:rl,S:Hp,u:Lp,U:Up,V:Xp,w:Yp,W:Vp,x:null,X:null,y:qp,Y:Wp,Z:Gp,"%":tl},w={a:ht,A:J,b:K,B:gt,c:null,d:Ku,e:Ku,f:Kp,g:lm,G:fm,H:Qp,I:jp,j:Jp,L:ol,m:tm,M:em,p:ut,q:xt,Q:el,s:rl,S:rm,u:nm,U:am,V:om,w:im,W:sm,x:null,X:null,y:um,Y:cm,Z:hm,"%":tl},S={a:R,A:$,b:v,B:C,c:m,d:Qu,e:Qu,f:Dp,g:Gu,G:Zu,H:ju,I:ju,j:Mp,L:Sp,m:Cp,M:kp,p:N,q:Tp,Q:Ip,s:Rp,S:Ap,u:yp,U:vp,V:_p,w:xp,W:bp,x:D,X:b,y:Gu,Y:Zu,Z:wp,"%":Np};k.x=T(r,k),k.X=T(n,k),k.c=T(e,k),w.x=T(r,w),w.X=T(n,w),w.c=T(e,w);function T(E,U){return function(Y){var A=[],Tt=-1,G=0,Mt=E.length,kt,se,co;for(Y instanceof Date||(Y=new Date(+Y));++Tt<Mt;)E.charCodeAt(Tt)===37&&(A.push(E.slice(G,Tt)),(se=Wu[kt=E.charAt(++Tt)])!=null?kt=E.charAt(++Tt):se=kt==="e"?" ":"0",(co=U[kt])&&(kt=co(Y,se)),A.push(kt),G=Tt+1);return A.push(E.slice(G,Tt)),A.join("")}}function F(E,U){return function(Y){var A=Sr(1900,void 0,1),Tt=O(A,E,Y+="",0),G,Mt;if(Tt!=Y.length)return null;if("Q"in A)return new Date(A.Q);if("s"in A)return new Date(A.s*1e3+("L"in A?A.L:0));if(U&&!("Z"in A)&&(A.Z=0),"p"in A&&(A.H=A.H%12+A.p*12),A.m===void 0&&(A.m="q"in A?A.q:0),"V"in A){if(A.V<1||A.V>53)return null;"w"in A||(A.w=1),"Z"in A?(G=ja(Sr(A.y,0,1)),Mt=G.getUTCDay(),G=Mt>4||Mt===0?Be.ceil(G):Be(G),G=Ar.offset(G,(A.V-1)*7),A.y=G.getUTCFullYear(),A.m=G.getUTCMonth(),A.d=G.getUTCDate()+(A.w+6)%7):(G=Qa(Sr(A.y,0,1)),Mt=G.getDay(),G=Mt>4||Mt===0?qe.ceil(G):qe(G),G=Nt.offset(G,(A.V-1)*7),A.y=G.getFullYear(),A.m=G.getMonth(),A.d=G.getDate()+(A.w+6)%7)}else("W"in A||"U"in A)&&("w"in A||(A.w="u"in A?A.u%7:"W"in A?1:0),Mt="Z"in A?ja(Sr(A.y,0,1)).getUTCDay():Qa(Sr(A.y,0,1)).getDay(),A.m=0,A.d="W"in A?(A.w+6)%7+A.W*7-(Mt+5)%7:A.w+A.U*7-(Mt+6)%7);return"Z"in A?(A.H+=A.Z/100|0,A.M+=A.Z%100,ja(A)):Qa(A)}}function O(E,U,Y,A){for(var Tt=0,G=U.length,Mt=Y.length,kt,se;Tt<G;){if(A>=Mt)return-1;if(kt=U.charCodeAt(Tt++),kt===37){if(kt=U.charAt(Tt++),se=S[kt in Wu?U.charAt(Tt++):kt],!se||(A=se(E,Y,A))<0)return-1}else if(kt!=Y.charCodeAt(A++))return-1}return A}function N(E,U,Y){var A=l.exec(U.slice(Y));return A?(E.p=f.get(A[0].toLowerCase()),Y+A[0].length):-1}function R(E,U,Y){var A=p.exec(U.slice(Y));return A?(E.w=x.get(A[0].toLowerCase()),Y+A[0].length):-1}function $(E,U,Y){var A=h.exec(U.slice(Y));return A?(E.w=c.get(A[0].toLowerCase()),Y+A[0].length):-1}function v(E,U,Y){var A=g.exec(U.slice(Y));return A?(E.m=M.get(A[0].toLowerCase()),Y+A[0].length):-1}function C(E,U,Y){var A=y.exec(U.slice(Y));return A?(E.m=d.get(A[0].toLowerCase()),Y+A[0].length):-1}function m(E,U,Y){return O(E,e,U,Y)}function D(E,U,Y){return O(E,r,U,Y)}function b(E,U,Y){return O(E,n,U,Y)}function I(E){return i[E.getDay()]}function z(E){return o[E.getDay()]}function H(E){return u[E.getMonth()]}function L(E){return s[E.getMonth()]}function V(E){return a[+(E.getHours()>=12)]}function B(E){return 1+~~(E.getMonth()/3)}function ht(E){return i[E.getUTCDay()]}function J(E){return o[E.getUTCDay()]}function K(E){return u[E.getUTCMonth()]}function gt(E){return s[E.getUTCMonth()]}function ut(E){return a[+(E.getUTCHours()>=12)]}function xt(E){return 1+~~(E.getUTCMonth()/3)}return{format:function(E){var U=T(E+="",k);return U.toString=function(){return E},U},parse:function(E){var U=F(E+="",!1);return U.toString=function(){return E},U},utcFormat:function(E){var U=T(E+="",w);return U.toString=function(){return E},U},utcParse:function(E){var U=F(E+="",!0);return U.toString=function(){return E},U}}}var Wu={"-":"",_:" ",0:"0"},st=/^\s*\d+/,mp=/^%/,dp=/[\\^$*+?|[\]().{}]/g;function q(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",o=a.length;return n+(o<r?new Array(r-o+1).join(e)+a:a)}function gp(t){return t.replace(dp,"\\$&")}function Dr(t){return new RegExp("^(?:"+t.map(gp).join("|")+")","i")}function Nr(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function xp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function yp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function vp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function _p(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function bp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Zu(t,e,r){var n=st.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Gu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function wp(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Tp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Cp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Qu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Mp(t,e,r){var n=st.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function ju(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function kp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function Ap(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Sp(t,e,r){var n=st.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Dp(t,e,r){var n=st.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Np(t,e,r){var n=mp.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Ip(t,e,r){var n=st.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Rp(t,e,r){var n=st.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Ju(t,e){return q(t.getDate(),e,2)}function Ep(t,e){return q(t.getHours(),e,2)}function Op(t,e){return q(t.getHours()%12||12,e,2)}function $p(t,e){return q(1+Nt.count(bt(t),t),e,3)}function nl(t,e){return q(t.getMilliseconds(),e,3)}function Pp(t,e){return nl(t,e)+"000"}function Fp(t,e){return q(t.getMonth()+1,e,2)}function zp(t,e){return q(t.getMinutes(),e,2)}function Hp(t,e){return q(t.getSeconds(),e,2)}function Lp(t){var e=t.getDay();return e===0?7:e}function Up(t,e){return q(It.count(bt(t)-1,t),e,2)}function al(t){var e=t.getDay();return e>=4||e===0?ne(t):ne.ceil(t)}function Xp(t,e){return t=al(t),q(ne.count(bt(t),t)+(bt(t).getDay()===4),e,2)}function Yp(t){return t.getDay()}function Vp(t,e){return q(qe.count(bt(t)-1,t),e,2)}function qp(t,e){return q(t.getFullYear()%100,e,2)}function Bp(t,e){return t=al(t),q(t.getFullYear()%100,e,2)}function Wp(t,e){return q(t.getFullYear()%1e4,e,4)}function Zp(t,e){var r=t.getDay();return t=r>=4||r===0?ne(t):ne.ceil(t),q(t.getFullYear()%1e4,e,4)}function Gp(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+q(e/60|0,"0",2)+q(e%60,"0",2)}function Ku(t,e){return q(t.getUTCDate(),e,2)}function Qp(t,e){return q(t.getUTCHours(),e,2)}function jp(t,e){return q(t.getUTCHours()%12||12,e,2)}function Jp(t,e){return q(1+Ar.count(Rt(t),t),e,3)}function ol(t,e){return q(t.getUTCMilliseconds(),e,3)}function Kp(t,e){return ol(t,e)+"000"}function tm(t,e){return q(t.getUTCMonth()+1,e,2)}function em(t,e){return q(t.getUTCMinutes(),e,2)}function rm(t,e){return q(t.getUTCSeconds(),e,2)}function nm(t){var e=t.getUTCDay();return e===0?7:e}function am(t,e){return q(ke.count(Rt(t)-1,t),e,2)}function il(t){var e=t.getUTCDay();return e>=4||e===0?ae(t):ae.ceil(t)}function om(t,e){return t=il(t),q(ae.count(Rt(t),t)+(Rt(t).getUTCDay()===4),e,2)}function im(t){return t.getUTCDay()}function sm(t,e){return q(Be.count(Rt(t)-1,t),e,2)}function um(t,e){return q(t.getUTCFullYear()%100,e,2)}function lm(t,e){return t=il(t),q(t.getUTCFullYear()%100,e,2)}function cm(t,e){return q(t.getUTCFullYear()%1e4,e,4)}function fm(t,e){var r=t.getUTCDay();return t=r>=4||r===0?ae(t):ae.ceil(t),q(t.getUTCFullYear()%1e4,e,4)}function hm(){return"+0000"}function tl(){return"%"}function el(t){return+t}function rl(t){return Math.floor(+t/1e3)}var We,dt,sl,ul,ll;Ka({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ka(t){return We=Ja(t),dt=We.format,sl=We.parse,ul=We.utcFormat,ll=We.utcParse,We}function pm(t){return new Date(t)}function mm(t){return t instanceof Date?+t:+new Date(+t)}function cl(t,e,r,n,a,o,i,s,u,l){var f=Cr(),h=f.invert,c=f.domain,p=l(".%L"),x=l(":%S"),y=l("%I:%M"),d=l("%I %p"),g=l("%a %d"),M=l("%b %d"),k=l("%B"),w=l("%Y");function S(T){return(u(T)<T?p:s(T)<T?x:i(T)<T?y:o(T)<T?d:n(T)<T?a(T)<T?g:M:r(T)<T?k:w)(T)}return f.invert=function(T){return new Date(h(T))},f.domain=function(T){return arguments.length?c(Array.from(T,mm)):c().map(pm)},f.ticks=function(T){var F=c();return t(F[0],F[F.length-1],T??10)},f.tickFormat=function(T,F){return F==null?S:l(F)},f.nice=function(T){var F=c();return(!T||typeof T.range!="function")&&(T=e(F[0],F[F.length-1],T??10)),T?c(qa(F,T)):f},f.copy=function(){return Dn(f,cl(t,e,r,n,a,o,i,s,u,l))},f}function Ir(){return re.apply(cl(Za,Ga,bt,oe,It,Nt,Ve,Ye,Ht,dt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function j(t){return function(){return t}}var to=Math.abs,ft=Math.atan2,ie=Math.cos,fl=Math.max,On=Math.min,Et=Math.sin,Ae=Math.sqrt,wt=1e-12,Ze=Math.PI,Rr=Ze/2,Ge=2*Ze;function hl(t){return t>1?0:t<-1?Ze:Math.acos(t)}function eo(t){return t>=1?Rr:t<=-1?-Rr:Math.asin(t)}function $n(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new ve(e)}function dm(t){return t.innerRadius}function gm(t){return t.outerRadius}function xm(t){return t.startAngle}function ym(t){return t.endAngle}function vm(t){return t&&t.padAngle}function _m(t,e,r,n,a,o,i,s){var u=r-t,l=n-e,f=i-a,h=s-o,c=h*u-f*l;if(!(c*c<wt))return c=(f*(e-o)-h*(t-a))/c,[t+c*u,e+c*l]}function Pn(t,e,r,n,a,o,i){var s=t-r,u=e-n,l=(i?o:-o)/Ae(s*s+u*u),f=l*u,h=-l*s,c=t+f,p=e+h,x=r+f,y=n+h,d=(c+x)/2,g=(p+y)/2,M=x-c,k=y-p,w=M*M+k*k,S=a-o,T=c*y-x*p,F=(k<0?-1:1)*Ae(fl(0,S*S*w-T*T)),O=(T*k-M*F)/w,N=(-T*M-k*F)/w,R=(T*k+M*F)/w,$=(-T*M+k*F)/w,v=O-d,C=N-g,m=R-d,D=$-g;return v*v+C*C>m*m+D*D&&(O=R,N=$),{cx:O,cy:N,x01:-f,y01:-h,x11:O*(a/S-1),y11:N*(a/S-1)}}function ro(){var t=dm,e=gm,r=j(0),n=null,a=xm,o=ym,i=vm,s=null,u=$n(l);function l(){var f,h,c=+t.apply(this,arguments),p=+e.apply(this,arguments),x=a.apply(this,arguments)-Rr,y=o.apply(this,arguments)-Rr,d=to(y-x),g=y>x;if(s||(s=f=u()),p<c&&(h=p,p=c,c=h),!(p>wt))s.moveTo(0,0);else if(d>Ge-wt)s.moveTo(p*ie(x),p*Et(x)),s.arc(0,0,p,x,y,!g),c>wt&&(s.moveTo(c*ie(y),c*Et(y)),s.arc(0,0,c,y,x,g));else{var M=x,k=y,w=x,S=y,T=d,F=d,O=i.apply(this,arguments)/2,N=O>wt&&(n?+n.apply(this,arguments):Ae(c*c+p*p)),R=On(to(p-c)/2,+r.apply(this,arguments)),$=R,v=R,C,m;if(N>wt){var D=eo(N/c*Et(O)),b=eo(N/p*Et(O));(T-=D*2)>wt?(D*=g?1:-1,w+=D,S-=D):(T=0,w=S=(x+y)/2),(F-=b*2)>wt?(b*=g?1:-1,M+=b,k-=b):(F=0,M=k=(x+y)/2)}var I=p*ie(M),z=p*Et(M),H=c*ie(S),L=c*Et(S);if(R>wt){var V=p*ie(k),B=p*Et(k),ht=c*ie(w),J=c*Et(w),K;if(d<Ze)if(K=_m(I,z,ht,J,V,B,H,L)){var gt=I-K[0],ut=z-K[1],xt=V-K[0],E=B-K[1],U=1/Et(hl((gt*xt+ut*E)/(Ae(gt*gt+ut*ut)*Ae(xt*xt+E*E)))/2),Y=Ae(K[0]*K[0]+K[1]*K[1]);$=On(R,(c-Y)/(U-1)),v=On(R,(p-Y)/(U+1))}else $=v=0}F>wt?v>wt?(C=Pn(ht,J,I,z,p,v,g),m=Pn(V,B,H,L,p,v,g),s.moveTo(C.cx+C.x01,C.cy+C.y01),v<R?s.arc(C.cx,C.cy,v,ft(C.y01,C.x01),ft(m.y01,m.x01),!g):(s.arc(C.cx,C.cy,v,ft(C.y01,C.x01),ft(C.y11,C.x11),!g),s.arc(0,0,p,ft(C.cy+C.y11,C.cx+C.x11),ft(m.cy+m.y11,m.cx+m.x11),!g),s.arc(m.cx,m.cy,v,ft(m.y11,m.x11),ft(m.y01,m.x01),!g))):(s.moveTo(I,z),s.arc(0,0,p,M,k,!g)):s.moveTo(I,z),!(c>wt)||!(T>wt)?s.lineTo(H,L):$>wt?(C=Pn(H,L,V,B,c,-$,g),m=Pn(I,z,ht,J,c,-$,g),s.lineTo(C.cx+C.x01,C.cy+C.y01),$<R?s.arc(C.cx,C.cy,$,ft(C.y01,C.x01),ft(m.y01,m.x01),!g):(s.arc(C.cx,C.cy,$,ft(C.y01,C.x01),ft(C.y11,C.x11),!g),s.arc(0,0,c,ft(C.cy+C.y11,C.cx+C.x11),ft(m.cy+m.y11,m.cx+m.x11),g),s.arc(m.cx,m.cy,$,ft(m.y11,m.x11),ft(m.y01,m.x01),!g))):s.arc(0,0,c,S,w,g)}if(s.closePath(),f)return s=null,f+""||null}return l.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-Ze/2;return[ie(h)*f,Et(h)*f]},l.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:j(+f),l):t},l.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:j(+f),l):e},l.cornerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:j(+f),l):r},l.padRadius=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:j(+f),l):n},l.startAngle=function(f){return arguments.length?(a=typeof f=="function"?f:j(+f),l):a},l.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:j(+f),l):o},l.padAngle=function(f){return arguments.length?(i=typeof f=="function"?f:j(+f),l):i},l.context=function(f){return arguments.length?(s=f??null,l):s},l}var Nw=Array.prototype.slice;function Fn(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function pl(t){this._context=t}pl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ml(t){return new pl(t)}function dl(t){return t[0]}function gl(t){return t[1]}function Qe(t,e){var r=j(!0),n=null,a=ml,o=null,i=$n(s);t=typeof t=="function"?t:t===void 0?dl:j(t),e=typeof e=="function"?e:e===void 0?gl:j(e);function s(u){var l,f=(u=Fn(u)).length,h,c=!1,p;for(n==null&&(o=a(p=i())),l=0;l<=f;++l)!(l<f&&r(h=u[l],l,u))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,l,u),+e(h,l,u));if(p)return o=null,p+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:j(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:j(+u),s):e},s.defined=function(u){return arguments.length?(r=typeof u=="function"?u:j(!!u),s):r},s.curve=function(u){return arguments.length?(a=u,n!=null&&(o=a(n)),s):a},s.context=function(u){return arguments.length?(u==null?n=o=null:o=a(n=u),s):n},s}function xl(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function yl(t){return t}function no(){var t=yl,e=xl,r=null,n=j(0),a=j(Ge),o=j(0);function i(s){var u,l=(s=Fn(s)).length,f,h,c=0,p=new Array(l),x=new Array(l),y=+n.apply(this,arguments),d=Math.min(Ge,Math.max(-Ge,a.apply(this,arguments)-y)),g,M=Math.min(Math.abs(d)/l,o.apply(this,arguments)),k=M*(d<0?-1:1),w;for(u=0;u<l;++u)(w=x[p[u]=u]=+t(s[u],u,s))>0&&(c+=w);for(e!=null?p.sort(function(S,T){return e(x[S],x[T])}):r!=null&&p.sort(function(S,T){return r(s[S],s[T])}),u=0,h=c?(d-l*k)/c:0;u<l;++u,y=g)f=p[u],w=x[f],g=y+(w>0?w*h:0)+k,x[f]={data:s[f],index:u,value:w,startAngle:y,endAngle:g,padAngle:M};return x}return i.value=function(s){return arguments.length?(t=typeof s=="function"?s:j(+s),i):t},i.sortValues=function(s){return arguments.length?(e=s,r=null,i):e},i.sort=function(s){return arguments.length?(r=s,e=null,i):r},i.startAngle=function(s){return arguments.length?(n=typeof s=="function"?s:j(+s),i):n},i.endAngle=function(s){return arguments.length?(a=typeof s=="function"?s:j(+s),i):a},i.padAngle=function(s){return arguments.length?(o=typeof s=="function"?s:j(+s),i):o},i}var Er=t=>()=>t;function ao(t,{sourceEvent:e,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Ot(t,e,r){this.k=t,this.x=e,this.y=r}Ot.prototype={constructor:Ot,scale:function(t){return t===1?this:new Ot(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ot(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Or=new Ot(1,0,0);oo.prototype=Ot.prototype;function oo(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Or;return t.__zoom}function zn(t){t.stopImmediatePropagation()}function je(t){t.preventDefault(),t.stopImmediatePropagation()}function bm(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function wm(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function vl(){return this.__zoom||Or}function Tm(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Cm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mm(t,e,r){var n=t.invertX(e[0][0])-r[0][0],a=t.invertX(e[1][0])-r[1][0],o=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function io(){var t=bm,e=wm,r=Mm,n=Tm,a=Cm,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,u=_a,l=or("start","zoom","end"),f,h,c,p=500,x=150,y=0,d=10;function g(m){m.property("__zoom",vl).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",$).on("touchmove.zoom",v).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(m,D,b,I){var z=m.selection?m.selection():m;z.property("__zoom",vl),m!==z?S(m,D,b,I):z.interrupt().each(function(){T(this,arguments).event(I).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},g.scaleBy=function(m,D,b,I){g.scaleTo(m,function(){var z=this.__zoom.k,H=typeof D=="function"?D.apply(this,arguments):D;return z*H},b,I)},g.scaleTo=function(m,D,b,I){g.transform(m,function(){var z=e.apply(this,arguments),H=this.__zoom,L=b==null?w(z):typeof b=="function"?b.apply(this,arguments):b,V=H.invert(L),B=typeof D=="function"?D.apply(this,arguments):D;return r(k(M(H,B),L,V),z,i)},b,I)},g.translateBy=function(m,D,b,I){g.transform(m,function(){return r(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof b=="function"?b.apply(this,arguments):b),e.apply(this,arguments),i)},null,I)},g.translateTo=function(m,D,b,I,z){g.transform(m,function(){var H=e.apply(this,arguments),L=this.__zoom,V=I==null?w(H):typeof I=="function"?I.apply(this,arguments):I;return r(Or.translate(V[0],V[1]).scale(L.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof b=="function"?-b.apply(this,arguments):-b),H,i)},I,z)};function M(m,D){return D=Math.max(o[0],Math.min(o[1],D)),D===m.k?m:new Ot(D,m.x,m.y)}function k(m,D,b){var I=D[0]-b[0]*m.k,z=D[1]-b[1]*m.k;return I===m.x&&z===m.y?m:new Ot(m.k,I,z)}function w(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function S(m,D,b,I){m.on("start.zoom",function(){T(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(I).end()}).tween("zoom",function(){var z=this,H=arguments,L=T(z,H).event(I),V=e.apply(z,H),B=b==null?w(V):typeof b=="function"?b.apply(z,H):b,ht=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),J=z.__zoom,K=typeof D=="function"?D.apply(z,H):D,gt=u(J.invert(B).concat(ht/J.k),K.invert(B).concat(ht/K.k));return function(ut){if(ut===1)ut=K;else{var xt=gt(ut),E=ht/xt[2];ut=new Ot(E,B[0]-xt[0]*E,B[1]-xt[1]*E)}L.zoom(null,ut)}})}function T(m,D,b){return!b&&m.__zooming||new F(m,D)}function F(m,D){this.that=m,this.args=D,this.active=0,this.sourceEvent=null,this.extent=e.apply(m,D),this.taps=0}F.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,D){return this.mouse&&m!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var D=W(this.that).datum();l.call(m,this.that,new ao(m,{sourceEvent:this.sourceEvent,target:g,type:m,transform:this.that.__zoom,dispatch:l}),D)}};function O(m,...D){if(!t.apply(this,arguments))return;var b=T(this,D).event(m),I=this.__zoom,z=Math.max(o[0],Math.min(o[1],I.k*Math.pow(2,n.apply(this,arguments)))),H=qt(m);if(b.wheel)(b.mouse[0][0]!==H[0]||b.mouse[0][1]!==H[1])&&(b.mouse[1]=I.invert(b.mouse[0]=H)),clearTimeout(b.wheel);else{if(I.k===z)return;b.mouse=[H,I.invert(H)],Kt(this),b.start()}je(m),b.wheel=setTimeout(L,x),b.zoom("mouse",r(k(M(I,z),b.mouse[0],b.mouse[1]),b.extent,i));function L(){b.wheel=null,b.end()}}function N(m,...D){if(c||!t.apply(this,arguments))return;var b=m.currentTarget,I=T(this,D,!0).event(m),z=W(m.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",ht,!0),H=qt(m,b),L=m.clientX,V=m.clientY;la(m.view),zn(m),I.mouse=[H,this.__zoom.invert(H)],Kt(this),I.start();function B(J){if(je(J),!I.moved){var K=J.clientX-L,gt=J.clientY-V;I.moved=K*K+gt*gt>y}I.event(J).zoom("mouse",r(k(I.that.__zoom,I.mouse[0]=qt(J,b),I.mouse[1]),I.extent,i))}function ht(J){z.on("mousemove.zoom mouseup.zoom",null),ca(J.view,I.moved),je(J),I.event(J).end()}}function R(m,...D){if(t.apply(this,arguments)){var b=this.__zoom,I=qt(m.changedTouches?m.changedTouches[0]:m,this),z=b.invert(I),H=b.k*(m.shiftKey?.5:2),L=r(k(M(b,H),I,z),e.apply(this,D),i);je(m),s>0?W(this).transition().duration(s).call(S,L,I,m):W(this).call(g.transform,L,I,m)}}function $(m,...D){if(t.apply(this,arguments)){var b=m.touches,I=b.length,z=T(this,D,m.changedTouches.length===I).event(m),H,L,V,B;for(zn(m),L=0;L<I;++L)V=b[L],B=qt(V,this),B=[B,this.__zoom.invert(B),V.identifier],z.touch0?!z.touch1&&z.touch0[2]!==B[2]&&(z.touch1=B,z.taps=0):(z.touch0=B,H=!0,z.taps=1+!!f);f&&(f=clearTimeout(f)),H&&(z.taps<2&&(h=B[0],f=setTimeout(function(){f=null},p)),Kt(this),z.start())}}function v(m,...D){if(this.__zooming){var b=T(this,D).event(m),I=m.changedTouches,z=I.length,H,L,V,B;for(je(m),H=0;H<z;++H)L=I[H],V=qt(L,this),b.touch0&&b.touch0[2]===L.identifier?b.touch0[0]=V:b.touch1&&b.touch1[2]===L.identifier&&(b.touch1[0]=V);if(L=b.that.__zoom,b.touch1){var ht=b.touch0[0],J=b.touch0[1],K=b.touch1[0],gt=b.touch1[1],ut=(ut=K[0]-ht[0])*ut+(ut=K[1]-ht[1])*ut,xt=(xt=gt[0]-J[0])*xt+(xt=gt[1]-J[1])*xt;L=M(L,Math.sqrt(ut/xt)),V=[(ht[0]+K[0])/2,(ht[1]+K[1])/2],B=[(J[0]+gt[0])/2,(J[1]+gt[1])/2]}else if(b.touch0)V=b.touch0[0],B=b.touch0[1];else return;b.zoom("touch",r(k(L,V,B),b.extent,i))}}function C(m,...D){if(this.__zooming){var b=T(this,D).event(m),I=m.changedTouches,z=I.length,H,L;for(zn(m),c&&clearTimeout(c),c=setTimeout(function(){c=null},p),H=0;H<z;++H)L=I[H],b.touch0&&b.touch0[2]===L.identifier?delete b.touch0:b.touch1&&b.touch1[2]===L.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(L=qt(L,this),Math.hypot(h[0]-L[0],h[1]-L[1])<d)){var V=W(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return g.wheelDelta=function(m){return arguments.length?(n=typeof m=="function"?m:Er(+m),g):n},g.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Er(!!m),g):t},g.touchable=function(m){return arguments.length?(a=typeof m=="function"?m:Er(!!m),g):a},g.extent=function(m){return arguments.length?(e=typeof m=="function"?m:Er([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),g):e},g.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],g):[o[0],o[1]]},g.translateExtent=function(m){return arguments.length?(i[0][0]=+m[0][0],i[1][0]=+m[1][0],i[0][1]=+m[0][1],i[1][1]=+m[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(m){return arguments.length?(r=m,g):r},g.duration=function(m){return arguments.length?(s=+m,g):s},g.interpolate=function(m){return arguments.length?(u=m,g):u},g.on=function(){var m=l.on.apply(l,arguments);return m===l?g:m},g.clickDistance=function(m){return arguments.length?(y=(m=+m)*m,g):Math.sqrt(y)},g.tapDistance=function(m){return arguments.length?(d=+m,g):d},g}var X=(()=>{let e=class e{static get bodyFont(){if(!this._bodyFont){let n=getComputedStyle(document.body);this._bodyFont=`${n.fontSize} ${n.fontFamily}`}return this._bodyFont}static chartSize(n){if(!n)return{width:0,height:0};let a=n.parentNode;if(!a)return{width:0,height:0};let o=getComputedStyle(a);return{height:Math.round(a.clientHeight-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)),width:Math.round(a.clientWidth-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight))}}static xScale(n,a,o=!0,i=!1){let s;return i?s=Ir().domain(he(n)):s=At().domain(he(n)),o?s.rangeRound([0,a]):s.range([0,a]),s}static yScale(n,a,o=!0,i=!1){let s;return i?s=Ir().domain([0,Math.max(...n)]):s=At().domain([0,Math.max(...n)]),o?s.rangeRound([a,0]):s.range([a,0]),s}static colorScale(n,a){return a instanceof Array?At().domain(he(n)).range([a[0],a[1]]):At().domain(he(n)).rangeRound([0,a-1])}static arcTween(n,a,o){let i=Bt({startAngle:n.startAngle,endAngle:n.endAngle},{startAngle:a.startAngle,endAngle:a.endAngle});return s=>o(i(s))}static transitionsComplete(n,a){let o=0;n.each(()=>{o++}).on("end",()=>{o--,o===0&&a()})}static convertData(n,a){return n.map(o=>{let i=typeof o[a.value.toString()]=="number"?o[a.value.toString()]:o[a.value.toString()]instanceof Date?o[a.value.toString()].valueOf():parseInt(o[a.value.toString()],10);return{id:o[a.id],value:i,category:at(a.category)?o[a.category]:void 0,label:at(a.label)?o[a.label]:void 0,color:at(a.color)?o[a.color]:void 0}})}static getTextWidth(n,a=this.bodyFont){if(!at(n)||!n.length)return 0;let i=document.createElement("canvas").getContext("2d");return i.font=a,Math.ceil(i.measureText(n).width)}static getMaxTextWidth(n,a){if(!at(n)||!n.length)return 0;let o=0;return n.forEach(i=>{let s=this.getTextWidth(i,a);s>o&&(o=s)}),o}static trimText(n,a,o=!0,i=this.bodyFont){if(!at(n)||!n.length)return n;let u=document.createElement("canvas").getContext("2d");u.font=i;let l=Math.ceil(u.measureText(n).width);for(;l>a;)o?n=`${n.substring(0,n.length-4)}...`:n=n.slice(0,-1),l=Math.ceil(u.measureText(n).width);return n}static wrapText(n,a,o=this.bodyFont){if(!at(n)||!n.length)return n;let i=[],u=document.createElement("canvas").getContext("2d");u.font=o;let l=Math.ceil(u.measureText(n).width);if(l<a)return[n];let f="";for(let h of n)f+=h,l=Math.ceil(u.measureText(f).width),l>a&&(i.push(f.slice(0,-1)),f=h);return f.length&&i.push(f),i}};e.svgNS="http://www.w3.org/2000/svg";let t=e;return t})();var Hn=class{static buildBarChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.valueTicks=e.valueTicks||5;let a=0,o=Math.max(...e.data.map(w=>w.value))||0,i=W(e.container),s=e.palette&&e.palette.length?X.colorScale(e.data.map(w=>w.value),e.palette.length===2?e.palette:e.palette.length):void 0,u=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,l=yt(e.valueTickValues)?e.valueTickValues:e.data.map(w=>at(u)?u(w.value):w.value.toString()),f=at(e.barPadding)?e.barPadding:20,h=at(e.barWidth)?e.barWidth:20,c={top:16,bottom:16,left:16+X.getMaxTextWidth(l,`${_.strings.FONT_SIZE_SMALL} ${_.strings.FONT_FAMILY}`),right:16},p=X.chartSize(e.container);p.width=e.data.length*(h+f);let x=X.yScale(e.data.map(w=>w.value),p.height-c.top-c.bottom).nice(),y=ar(x).ticks(e.valueTicks).tickSize(-p.width);if(yt(e.valueTickValues)){let w=At().domain([0,e.valueTickValues.length-1]).range([a,o]);e.valueTicks=[],e.valueTickValues?.forEach((S,T)=>{e.valueTicks.push(w(T))}),y.tickFormat((S,T)=>e.valueTickValues[T]||"")}yt(e.valueTicks)?y.tickValues(e.valueTicks):y.ticks(e.valueTicks),e.valueFormat?.length&&y.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&y.tickFormat(dt(e.valueDateFormat));let d=i.select(`g.${_.classes.CHART_ROOT}`);if(d.node()||(d=i.append("g").classed(_.classes.CHART_ROOT,!0),d.append("g").classed(_.classes.CHART_YAXIS,!0),d.append("g").classed(_.classes.CHART_XAXIS,!0),d.append("g").classed(`${_.classes.CHART_PREFIX}__chart`,!0).classed(`${_.classes.CHART_PREFIX}__bar`,!0)),i.attr("width",p.width+c.left),i.attr("height",p.height),i.select(`g.${_.classes.CHART_YAXIS}`).attr("transform",`translate(${c.left}, ${c.top})`).call(y),i.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${c.left}, ${p.height-c.bottom})`),yt(e.categoryTickValues)&&e.categoryTickValues?.length){let w=nr(Tr().domain(e.categoryTickValues).range([0,p.width]));i.select(`g.${_.classes.CHART_XAXIS}`).call(w)}let g=d.select(`g.${_.classes.CHART_PREFIX}__bar`);g.attr("transform",`translate(${c.left}, -${c.bottom-c.top})`);let M=g.selectAll("rect").data(e.data,w=>w.id);M.exit().transition().duration(_.numbers.TRANSITION_DURATION).attr("y",w=>p.height-c.top).attr("height",0),M.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let k=M.enter();k.append("rect").attr("x",(w,S)=>S*(h+f)+f/2).attr("y",p.height-c.top).attr("width",w=>h).attr("height",0).merge(M).attr("id",w=>`${_.classes.CHART_PREFIX}__node-${w.id}`).transition().call(X.transitionsComplete,()=>{r()}).duration(_.numbers.TRANSITION_DURATION).attr("y",w=>w.value?x(w.value)+c.bottom:0).attr("height",w=>w.value?p.height-c.top-c.bottom-x(w.value):0).attr("fill",w=>w.color?w.color:s&&w.value&&e.palette?e.palette.length===2?s(w.value):e.palette[s(w.value)]:"#fff"),e.selectedCallback&&k.selectAll("rect").on("click",(w,S)=>e.selectedCallback(S,w.target)),e.hoverCallback&&(k.selectAll("rect").on("mouseenter",(w,S)=>e.hoverCallback(!0,S,w.target)),k.selectAll("rect").on("mouseleave",(w,S)=>e.hoverCallback(!1,S,w.target)))})}};var Ln=class{static buildBubbleChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=W(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(d=>d.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=10,u=X.chartSize(e.container),l=zt({children:e.data}).sum(d=>d.value).sort((d,g)=>g.value-d.value);Pa().size([Math.min(u.width,u.height),Math.min(u.width,u.height)])(l);let h=a.select(`g.${_.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(_.classes.CHART_ROOT,!0),h.append("g").classed(`${_.classes.CHART_PREFIX}__chart`,!0).classed(`${_.classes.CHART_PREFIX}__bubble`,!0)),a.attr("width",u.width),a.attr("height",u.height);let p=h.select(`g.${_.classes.CHART_PREFIX}__bubble`).selectAll("g").data(l.leaves(),d=>d.data.id);p.exit().select("text").remove(),p.exit().select("circle").transition().duration(_.numbers.TRANSITION_DURATION).attr("r",0),p.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("circle"),x.append("clipPath").attr("id",d=>`${_.classes.CHART_CLIP}-${d.data.id}`).append("circle"),x.append("text").classed(_.classes.CHART_TEXT,!0).attr("clip-path",d=>`url(#${_.classes.CHART_CLIP}-${d.data.id})`).style("text-anchor","middle"),e.selectedCallback&&x.on("click",(d,g)=>e.selectedCallback(g.data,d.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(d,g)=>e.hoverCallback(!0,g.data,d.target)),x.on("mouseleave",(d,g)=>e.hoverCallback(!1,g.data,d.target)));let y=x.merge(p);y.select("text").style("display","none").attr("y",".35em").text(d=>i?i(d.data.value):d.data.value),y.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",d=>"translate("+d.x+","+d.y+")"),y.select("g > circle").attr("fill",d=>d.data.color?d.data.color:o&&d.value&&e.palette?e.palette.length===2?o(d.value):e.palette[o(d.value)]:"#fff").attr("id",d=>`${_.classes.CHART_PREFIX}__node-${d.data.id}`).transition().call(X.transitionsComplete,()=>{y.select("clipPath > circle").attr("r",d=>d.r>s/2?d.r-s/2:0),y.select("text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).attr("r",d=>d.r)})}};function _l(t,e){return ot(t,e?.in).getDay()===0}function bl(t,e){let r,n=e?.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=Oe.bind(null,a));let o=ot(a,n);(!r||r<o||isNaN(+o))&&(r=o)}),Oe(n,r||NaN)}function wl(t,e){let r,n=e?.in;return t.forEach(a=>{!n&&typeof a=="object"&&(n=Oe.bind(null,a));let o=ot(a,n);(!r||r>o||isNaN(+o))&&(r=o)}),Oe(n,r||NaN)}function Un(t,e){let r=+ot(t)-+ot(e);return r<0?-1:r>0?1:r}function Tl(t,e,r){let[n,a]=$e(r?.in,t,e),o=n.getFullYear()-a.getFullYear(),i=n.getMonth()-a.getMonth();return o*12+i}function Xn(t,e,r){let[n,a]=$e(r?.in,t,e),o=Cl(n,a),i=Math.abs(Wo(n,a));n.setDate(n.getDate()-o*i);let s=+(Cl(n,a)===-o),u=o*(i-s);return u===0?0:u}function Cl(t,e){let r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function Ml(t){return e=>{let n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function kl(t,e){let r=ot(t,e?.in);return r.setHours(23,59,59,999),r}function Al(t,e){let r=ot(t,e?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Sl(t,e){let r=ot(t,e?.in);return+kl(r,e)==+Al(r,e)}function Dl(t,e,r){let[n,a,o]=$e(r?.in,t,t,e),i=Un(a,o),s=Math.abs(Tl(a,o));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-i*s);let u=Un(a,o)===-i;Sl(n)&&s===1&&Un(n,o)===1&&(u=!1);let l=i*(s-+u);return l===0?0:l}function Nl(t,e,r){let n=Xn(t,e,r)/7;return Ml(r?.roundingMethod)(n)}function Yn(t,e){return ot(t,e?.in).getDay()}function Il(t,e){return ot(t,e?.in).getDay()===1}function Rl(t,e,r){return Yr(t,-e,r)}function El(t,e,r){let n=e-Yn(t,r);return n<=0&&(n+=7),Yr(t,n,r)}function Ol(t,e){return El(t,0,e)}function $l(t,e,r){let n=Yn(t,r)-e;return n<=0&&(n+=7),Rl(t,n,r)}function Pl(t,e){return $l(t,1,e)}var Vn=class{static buildGanttChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=wl(e.data.map(N=>N.startDate));Il(a)||(a=Pl(a));let o=bl(e.data.map(N=>N.endDate));_l(o)||(o=Ol(o));let i=W(e.container),s,u=16,l=40,f={top:16,bottom:16,left:16,right:16},h=X.chartSize(e.container);h.height=e.data.length*(l+u);let c=8,p={x:8,y:16},x=oe,y="",d=0;switch(e.categoryTimeSpan){case"year":x=bt,y="%Y";break;case"week":x=It,y="%m/%d",d=Nl(o,a);break;case"day":x=Nt,y="%m/%d",d=Xn(o,a);break;default:y="%m/%y",d=Dl(o,a);break}h.width<d*48&&(h.width=d*48);let g=X.xScale([a,o],h.width-f.left-f.right,!1,!0).nice(),M=aa(g).ticks(x,y).tickSize(-h.height),k=i.select(`g.${_.classes.CHART_ROOT}`);k.node()||(k=i.append("g").classed(_.classes.CHART_ROOT,!0),k.append("g").classed(_.classes.CHART_XAXIS,!0),k.append("g").classed(`${_.classes.CHART_PREFIX}__gantt`,!0),s=W(e.container.parentElement).append("div").classed(`${_.classes.CHART_POPOVER}`,!0)),i.attr("width",h.width),i.attr("height",h.height+f.bottom),i.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${f.left}, ${f.top})`).call(M);let w=k.select(`g.${_.classes.CHART_PREFIX}__gantt`);w.attr("transform",`translate(${f.left}, -${f.bottom-f.top})`);let S=w.selectAll("g").data(e.data,N=>N.id);S.exit().transition().duration(_.numbers.TRANSITION_DURATION).attr("width",0),S.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let T=S.enter().append("g").attr("id",N=>`${_.classes.CHART_PREFIX}__node-${N.id}`).on("mouseenter",(N,R)=>{let $=`
            <span style="grid-column: 1 / -1; font-weight: 700">${R.label}</span>
            <span>Start</span>
            <span style="justify-self: end">${jn(R.startDate,"MM/dd/yyyy")}</span>
            <span>End</span>
            <span style="justify-self: end">${jn(R.endDate,"MM/dd/yyyy")}</span>
            <span>Progress</span>
            <span style="justify-self: end">${R.progress||0}%</span>
          `;R.description?.length&&($+=`<span style="grid-column: 1 / -1; font-size: .75rem;">${R.description}</span>`),s.html($).style("top",`${N.layerY}px`).style("left",`${N.layerX}px`).style("visibility","visible"),e.hoverCallback&&e.hoverCallback(!0,R,N.target)}).on("mouseleave",(N,R)=>{s.style("visibility",null),e.hoverCallback&&e.hoverCallback(!1,R,N.target)});e.selectedCallback&&T.on("click",(N,R)=>e.selectedCallback(R,N.target.parentElement));let F=T.append("defs").append("linearGradient").attr("id",(N,R)=>`meter-gradient--${R}`);F.append("stop").attr("offset","0%").attr("stop-color",_.chartPalette.indigoA200),F.append("stop").attr("offset",N=>`${N.progress||0}%`).attr("stop-color",_.chartPalette.indigoA200),F.append("stop").attr("offset",N=>`${N.progress||0}%`).attr("stop-color",_.chartPalette.indigo200),F.append("stop").attr("offset","100%").attr("stop-color",_.chartPalette.indigo200),T.append("rect").classed(_.classes.CHART_NODE,!0).attr("width",0).attr("height",l).attr("rx",4).style("stroke",N=>N.color?.length?N.color:_.chartTheme.outlineMedium).style("fill",_.chartTheme.surfaceDim),T.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",p.x).attr("y",p.y).style("font-size",".85rem").style("stroke",_.chartTheme.surfaceDim).style("stroke-width",".5rem").style("fill",_.chartTheme.textHigh).style("paint-order","stroke").style("stroke-linejoin","round").style("display","none"),T.append("rect").classed(_.classes.CHART_METER,!0).attr("x",p.x).attr("y",l-c-p.x).attr("width",0).attr("height",c).style("fill",(N,R)=>`url(#meter-gradient--${R})`);let O=T.merge(S);O.attr("transform",(N,R)=>`translate(${g(N.startDate)}, ${R*(l+u)+f.top+u/2})`),O.select(`g > .${_.classes.CHART_NODE}`).transition().duration(_.numbers.TRANSITION_DURATION).attr("width",N=>{let R=g(N.endDate)-g(N.startDate);return R>0?R:0}),O.select(`g > .${_.classes.CHART_METER}`).transition().duration(_.numbers.TRANSITION_DURATION).attr("width",N=>{let R=g(N.endDate)-g(N.startDate)-p.x*2;return R>0?R:0}),O.select("g > text").transition().call(X.transitionsComplete,()=>{O.select("g > text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).text((N,R,$)=>`${N.label}`)})}};function Fl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function km(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fl(Object(r),!0).forEach(function(n){Am(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $r(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$r=function(e){return typeof e}:$r=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$r(t)}function Am(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qn(){return qn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qn.apply(this,arguments)}function Sm(t,e){if(t){if(typeof t=="string")return zl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zl(t,e)}}function zl(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ul(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Sm(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,i=!1,s;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return o=u.done,u},e:function(u){i=!0,s=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(i)throw s}}}}function Dm(t,e){var r=[],n=[];function a(o,i){if(o.length===1)r.push(o[0]),n.push(o[0]);else{for(var s=Array(o.length-1),u=0;u<s.length;u++)u===0&&r.push(o[0]),u===s.length-1&&n.push(o[u+1]),s[u]=[(1-i)*o[u][0]+i*o[u+1][0],(1-i)*o[u][1]+i*o[u+1][1]];a(s,i)}}return t.length&&a(t,e),{left:r,right:n.reverse()}}function Nm(t){var e={};return t.length===4&&(e.x2=t[2][0],e.y2=t[2][1]),t.length>=3&&(e.x1=t[1][0],e.y1=t[1][1]),e.x=t[t.length-1][0],e.y=t[t.length-1][1],t.length===4?e.type="C":t.length===3?e.type="Q":e.type="L",e}function Im(t,e){e=e||2;for(var r=[],n=t,a=1/e,o=0;o<e-1;o++){var i=a/(1-a*o),s=Dm(n,i);r.push(s.left),n=s.right}return r.push(n),r}function Rm(t,e,r){var n=[[t.x,t.y]];return e.x1!=null&&n.push([e.x1,e.y1]),e.x2!=null&&n.push([e.x2,e.y2]),n.push([e.x,e.y]),Im(n,r).map(Nm)}var Em=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,Je={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(Je).forEach(function(t){Je[t.toLowerCase()]=Je[t]});function so(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=e;return r}function Om(t){return"".concat(t.type).concat(Je[t.type].map(function(e){return t[e]}).join(","))}function $m(t,e){var r={x1:"x",y1:"y",x2:"x",y2:"y"},n=["xAxisRotation","largeArcFlag","sweepFlag"];if(t.type!==e.type&&e.type.toUpperCase()!=="M"){var a={};Object.keys(e).forEach(function(o){var i=e[o],s=t[o];s===void 0&&(n.includes(o)?s=i:(s===void 0&&r[o]&&(s=t[r[o]]),s===void 0&&(s=0))),a[o]=s}),a.type=e.type,t=a}return t}function Pm(t,e,r){var n=[];if(e.type==="L"||e.type==="Q"||e.type==="C")n=n.concat(Rm(t,e,r));else{var a=qn({},t);a.type==="M"&&(a.type="L"),n=n.concat(so(r-1).map(function(){return a})),n.push(e)}return n}function Hl(t,e,r){var n=t.length-1,a=e.length-1,o=n/a,i=so(a).reduce(function(u,l,f){var h=Math.floor(o*f);if(r&&h<t.length-1&&r(t[h],t[h+1])){var c=o*f%1<.5;u[h]&&(c?h>0?h-=1:h<t.length-1&&(h+=1):h<t.length-1?h+=1:h>0&&(h-=1))}return u[h]=(u[h]||0)+1,u},[]),s=i.reduce(function(u,l,f){if(f===t.length-1){var h=so(l,qn({},t[t.length-1]));return h[0].type==="M"&&h.forEach(function(c){c.type="L"}),u.concat(h)}return u.concat(Pm(t[f],t[f+1],l))},[]);return s.unshift(t[0]),s}function Ll(t){for(var e=(t||"").match(Em)||[],r=[],n,a,o=0;o<e.length;++o)if(n=Je[e[o]],n){a={type:e[o]};for(var i=0;i<n.length;++i)a[n[i]]=+e[o+i+1];o+=n.length,r.push(a)}return r}function Fm(t,e,r){var n=t==null?[]:t.slice(),a=e==null?[]:e.slice(),o=$r(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return[]};var u=(n.length===0||n[n.length-1].type==="Z")&&(a.length===0||a[a.length-1].type==="Z");n.length>0&&n[n.length-1].type==="Z"&&n.pop(),a.length>0&&a[a.length-1].type==="Z"&&a.pop(),n.length?a.length||a.push(n[0]):n.push(a[0]);var l=Math.abs(a.length-n.length);l!==0&&(a.length>n.length?n=Hl(n,a,i):a.length<n.length&&(a=Hl(a,n,i))),n=n.map(function(h,c){return $m(h,a[c])});var f=n.map(function(h){return km({},h)});return u&&(f.push({type:"Z"}),n.push({type:"Z"})),function(c){if(c===1&&s)return e??[];if(c===0)return n;for(var p=0;p<f.length;++p){var x=n[p],y=a[p],d=f[p],g=Ul(Je[d.type]),M;try{for(g.s();!(M=g.n()).done;){var k=M.value;d[k]=(1-c)*x[k]+c*y[k],(k==="largeArcFlag"||k==="sweepFlag")&&(d[k]=Math.round(d[k]))}}catch(w){g.e(w)}finally{g.f()}}return f}}function Pr(t,e,r){var n=Ll(t),a=Ll(e),o=$r(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return""};var u=Fm(n,a,{excludeSegment:i,snapEndsToInput:s});return function(f){if(f===1&&s)return e??"";var h=u(f),c="",p=Ul(h),x;try{for(p.s();!(x=p.n()).done;){var y=x.value;c+=Om(y)}}catch(d){p.e(d)}finally{p.f()}return c}}var Bn=class{static buildLineChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.categoryTicks=e.categoryTicks||10,e.valueTicks=e.valueTicks||5;let a=e.data.map(O=>O.data).reduce((O,N)=>O.concat(N),[]),o=a.map(O=>O.value),i=a.map(O=>parseFloat(O.category)).filter((O,N,R)=>R.indexOf(O)===N).sort((O,N)=>O-N),s=Math.min(...o)||0,u=Math.max(...o)||0,l=Math.min(...i)||0,f=Math.max(...i)||0,h=W(e.container),c=2,p={top:16,bottom:16,left:16+X.getTextWidth(u.toString(),`${_.strings.FONT_SIZE_SMALL} ${_.strings.FONT_FAMILY}`),right:16},x=X.chartSize(e.container),y=X.xScale([l,f],x.width-p.left-p.right),d=nr(y);if(yt(e.categoryTickValues)){let O=At().domain([0,e.categoryTickValues.length-1]).range([l,f]);e.categoryTicks=[],e.categoryTickValues?.forEach((N,R)=>{e.categoryTicks.push(O(R))}),d.tickFormat((N,R)=>e.categoryTickValues[R]||"")}yt(e.categoryTicks)?d.tickValues(e.categoryTicks):d.ticks(e.categoryTicks),e.categoryFormat&&d.tickFormat(mt(e.categoryFormat)),e.categoryDateFormat&&d.tickFormat(dt(e.categoryDateFormat));let g=X.yScale([s,u],x.height-p.top-p.bottom),M=ar(g).tickSize(-(x.width-p.left-p.right));if(yt(e.valueTickValues)){let O=At().domain([0,e.valueTickValues.length-1]).range([s,u]);e.valueTicks=[],e.valueTickValues?.forEach((N,R)=>{e.valueTicks.push(O(R))}),M.tickFormat((N,R)=>e.valueTickValues[R]||"")}yt(e.valueTicks)?M.tickValues(e.valueTicks):M.ticks(e.valueTicks),e.valueFormat&&M.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&M.tickFormat(dt(e.valueDateFormat));let k=Qe().x(O=>y(O.category)).y(O=>g(O.value)),w=Qe().x(O=>y(O.category)).y(x.height-p.top),S=h.select(`g.${_.classes.CHART_ROOT}`);S.node()||(S=h.append("g").classed(_.classes.CHART_ROOT,!0),S.append("g").classed(_.classes.CHART_XAXIS,!0),yt(e.categoryTickValues)&&S.select(`g.${_.classes.CHART_XAXIS}`).classed(`${_.classes.CHART_PREFIX}__xaxis--align-boundry-ticks`,!0),S.append("g").classed(_.classes.CHART_YAXIS,!0),S.append("g").classed(`${_.classes.CHART_PREFIX}__line`,!0)),h.attr("width",x.width),h.attr("height",x.height),h.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${p.left}, ${x.height-p.bottom})`).call(d),h.select(`g.${_.classes.CHART_YAXIS}`).attr("transform",`translate(${p.left}, ${p.top})`).call(M);let T=S.select(`g.${_.classes.CHART_PREFIX}__line`);T.attr("transform",`translate(${p.left+c}, ${p.top})`),e.data.forEach((O,N)=>{let R=T.selectAll(`path.path-${O.id}`).data([O],v=>v.id);R.exit().remove(),R.enter().append("path").classed(`path-${O.id}`,!0).style("fill","none").style("stroke-linejoin","round").style("stroke-linecap","round").attr("d",v=>w(v.data)).merge(R).attr("stroke",v=>v.color).transition().duration(_.numbers.TRANSITION_DURATION).call(X.transitionsComplete,()=>{N===e.data.length-1&&r()}).attrTween("d",(v,C,m)=>{let D=m[0].getAttribute("d"),b=k(v.data);return Pr(D,b)})});let F=T.selectAll("path").nodes();if(F.length>e.data.length)for(let O=F.length;O>e.data.length;O--)F[O-1]?.remove()})}};var Ke=class{static buildPieChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=[],o=W(e.container),i=e.palette&&e.palette.length?X.colorScale(e.data.map(g=>g.value),e.palette.length===2?e.palette:e.palette.length):void 0,s=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,u=X.chartSize(e.container),l={outer:Math.min(u.width,u.height)/2,inner:0};(e.type==="donut"||e.type==="donut-meter")&&(l.inner=l.outer-l.outer*.35);let f=ro().outerRadius(l.outer).innerRadius(l.inner),h=no().value(g=>g.value).sort(null),c=o.select(`g.${_.classes.CHART_ROOT}`);c.node()||(c=o.append("g").classed(_.classes.CHART_ROOT,!0),c.append("g").classed(`${_.classes.CHART_PREFIX}__${e.type}`,!0)),o.attr("width",u.width),o.attr("height",u.height);let p=c.select(`g.${_.classes.CHART_PREFIX}__${e.type}`);p.attr("transform",`translate(${l.outer}, ${l.outer})`),p.selectAll("g").select("path").each(g=>{a[g.data.id]={startAngle:g.startAngle,endAngle:g.endAngle}});let x=p.selectAll("g").data(h(e.data),g=>g.data.id);x.exit().select("path").transition().duration(_.numbers.TRANSITION_DURATION).attrTween("d",g=>X.arcTween(g,{startAngle:0,endAngle:0},f)),x.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let y=x.enter().append("g");y.append("path"),e.selectedCallback&&y.on("click",(g,M)=>e.selectedCallback(M.data,g.target.parentElement)),e.hoverCallback&&(y.on("mouseenter",(g,M)=>e.hoverCallback(!0,M.data,g.target)),y.on("mouseleave",(g,M)=>e.hoverCallback(!1,M.data,g.target))),y.merge(x).select("g > path").attr("fill",g=>g.data.color?g.data.color:i&&g.value&&e.palette?e.palette.length===2?i(g.value):e.palette[i(g.value)]:"#fff").attr("id",g=>`${_.classes.CHART_PREFIX}__node-${g.data.id}`).transition().call(X.transitionsComplete,()=>{switch(e.type){case"donut-meter":if(!e.hideLabel){let g=p.select("."+_.classes.CHART_TEXT);g.node()||(g=p.append("text").style("fill",_.chartTheme.textHigh).style("text-anchor","middle").classed(_.classes.CHART_TEXT,!0),g.append("tspan").style("font-size","2rem").classed(_.classes.CHART_TEXT_VALUE,!0),g.append("tspan").attr("x",0).attr("y",0).attr("dy","1.25em").classed(_.classes.CHART_TEXT_LABEL,!0));let M="";e.centerValue?M=e.centerValue:s?M=s(e.data[0].value):M=e.data[0].value.toString(),g.select(`tspan.${_.classes.CHART_TEXT_VALUE}`).text(M),g.select(`tspan.${_.classes.CHART_TEXT_LABEL}`).text(at(e.data[0].label)?e.data[0].label:"");break}}r()}).duration(_.numbers.TRANSITION_DURATION).style("stroke","#fff").attrTween("d",g=>X.arcTween(a[g.data.id]||{startAngle:0,endAngle:0},g,f))})}};var Xl=(()=>{let e=class e{static buildTreeChart(n){return new Promise((a,o)=>{if(!n.container||n.container.tagName!=="svg"){o();return}let i=W(n.container),s={width:0,height:0},u=[],l=8,f="#212121",h={width:i.attr("width")?parseInt(i.attr("width"),10):0,height:i.attr("height")?parseInt(i.attr("height"),10):0},c=zt(n.data),x=Ha().nodeSize([n.node.size.width+24,n.node.size.height+n.node.margin]).separation((v,C)=>v.parent===C.parent?1:1.25)(c),y=0,d=0;x.descendants().filter(v=>v.depth>0).forEach(v=>{if(!at(v.data.nodeId)){let C=this.getParentDepths(v),m=[];this.getParentIds(v).forEach((D,b)=>{m.push(`${C[b]}-${D}`)}),m.push(`${v.depth}-${v.data.id}`),v.data.nodeId=m.join("--")}v.y=(v.depth-1)*(n.node.size.height+n.node.margin),v.y>s.height&&(s.height=v.y),v.x>d?d=v.x:v.x<y&&(y=v.x)});let g=i.select(`g.${_.classes.CHART_ROOT}`);g.node()||(g=i.append("g").classed(_.classes.CHART_ROOT,!0),g.append("g").classed(`${_.classes.CHART_PREFIX}__tree`,!0));let M=g.node().getCTM().a;if(s.width=(Math.abs(y)+d+n.node.size.width)*M+l*2,s.height=(s.height+n.node.size.height)*M+l*2,h.width<s.width&&i.attr("width",s.width),h.height<s.height&&i.attr("height",s.height),n.zoomScale){let v=ko(i.node().parentElement,!0),C={left:0,top:0,x:0,y:0};i.style("cursor","grab"),i.call(io().scaleExtent([n.zoomScale.min,n.zoomScale.max]).on("zoom",m=>{if(m.sourceEvent.type==="mousemove")v&&(v.scrollTop=C.top+(C.y-m.sourceEvent.clientY),v.scrollLeft=C.left+(C.x-m.sourceEvent.clientX));else if(m.sourceEvent.type==="wheel"){g.attr("transform",`scale(${m.transform.k},${m.transform.k})`);let D=g.node().getBBox();s.width=D.width*m.transform.k+l*2,s.height=D.height*m.transform.k+l*2,i.attr("width",s.width),i.attr("height",s.height)}}).on("start",m=>{m.sourceEvent.type==="mousedown"&&(C={left:v.scrollLeft,top:v.scrollTop,x:m.sourceEvent.clientX,y:m.sourceEvent.clientY})}))}let k=g.select(`g.${_.classes.CHART_PREFIX}__tree`);k.attr("transform",`translate(${Math.abs(y)+Math.round(n.node.size.width/2)+l}, ${l})`);let w=k.selectAll(`.${_.classes.CHART_PREFIX}__tree__node`).data(c.descendants().filter(v=>v.depth>0),v=>v.data.nodeId),S=w.exit();S.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",v=>v.parent?`translate(${this.nodeCenterHorizontal(v,n.node.size.width,v.parent.x)}, ${v.parent.y})`:`translate(${this.nodeCenterHorizontal(v,n.node.size.width)}, ${v.y})`).remove();let T=w.enter().append("g").classed(`${_.classes.CHART_PREFIX}__tree__node`,!0).attr("transform",v=>v.parent?`translate(${this.nodeCenterHorizontal(v,n.node.size.width,v.parent.x)}, ${v.parent.y})`:`translate(${this.nodeCenterHorizontal(v,n.node.size.width)}, ${v.y})`).attr("cursor",v=>v.data.children===!0||yt(v.data.children)&&v.data.children.length?"pointer":"default");T.append("rect").attr("width",n.node.size.width).attr("height",n.node.size.height).attr("rx",4).style("stroke",_.chartTheme.outlineMedium).style("fill",v=>n.palette[v.depth-Math.trunc(v.depth/n.palette.length)*n.palette.length]),n.nodeBuilder?n.nodeBuilder(T):T.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",n.node.padding).attr("y",n.node.size.height/2).style("pointer-events","none").style("dominant-baseline","middle").text((v,C)=>{if(!at(v.data.label))return null;let m=n.node.size.width-n.node.padding*2;return n.popoverCallback&&(m=m-24),this.hasChildren(v)&&(m=m-24),X.trimText(v.data.label,m)}),n.selectedCallback&&T.on("click",(v,C)=>n.selectedCallback(C.data,this.getParentIds(C),v.target.parentElement)),n.hoverCallback&&(T.on("mouseenter",(v,C)=>n.hoverCallback(!0,C.data,this.getParentIds(C),v.target)),T.on("mouseleave",(v,C)=>n.hoverCallback(!1,C.data,this.getParentIds(C),v.target)));let F=T.merge(w);F.transition().call(X.transitionsComplete,()=>{h.width>s.width&&i.attr("width",s.width),h.height>s.height&&i.attr("height",s.height);let v=T.nodes().length?T.data()[0].parent:S.nodes().length?S.data().sort((C,m)=>C.depth<m.depth)[0].parent:null;if(at(v)&&v.depth>0){let C=w.filter(m=>m.data.nodeId===v.data.nodeId).node();C&&C.scrollIntoView({behavior:"smooth"})}a()}).duration(_.numbers.TRANSITION_DURATION).attr("transform",v=>`translate(${this.nodeCenterHorizontal(v,n.node.size.width)}, ${v.y})`);let O=(v,C)=>{let m=(v.y-C.y)/2;return Qe()([[v.x,v.y],[v.x,v.y-m],[C.x,C.y+m],[C.x,C.y]])},N=k.selectAll(`.${_.classes.CHART_PREFIX}__tree__path`).data(c.descendants().filter(v=>v.depth>1),v=>v.data.nodeId);if(N.exit().transition().duration(_.numbers.TRANSITION_DURATION).attrTween("d",(v,C,m)=>{let D=m[C].getAttribute("d"),b=O({x:Math.round(v.parent.x),y:Math.round(v.parent.y+n.node.size.height)},{x:Math.round(v.parent.x),y:Math.round(v.parent.y+n.node.size.height)});return Pr(D,b)}).remove(),N.enter().insert("path").classed(`${_.classes.CHART_PREFIX}__tree__path`,!0).style("fill","none").style("stroke",_.chartTheme.outlineMedium).style("shape-rendering","crispEdges").style("stroke-width","2").merge(N).transition().call(X.transitionsComplete,()=>{k.selectAll(`.${_.classes.CHART_PREFIX}__tree__path-label`).raise()}).duration(_.numbers.TRANSITION_DURATION).attrTween("d",(v,C,m)=>{let D=m[C].getAttribute("d"),b=O({x:Math.round(v.parent.x),y:Math.round(v.parent.y+n.node.size.height)},{x:Math.round(v.x),y:Math.round(v.y)});return Pr(D,b)}),n.levelLabels.length){let v=k.selectAll(`.${_.classes.CHART_PREFIX}__tree__path-label`).data(c.descendants().filter(b=>b.depth>0&&yt(b.data.children)&&b.data.children.length),b=>b.data.nodeId),C=24,m=v.enter().insert("g").classed(`${_.classes.CHART_PREFIX}__tree__path-label`,!0).attr("visibility","hidden").attr("transform",b=>`translate(${this.nodeCenterHorizontal(b,n.node.size.width)}, ${b.y+n.node.size.height+n.node.padding})`);m.append("rect").attr("width",b=>{let I=b.depth-1,z=n.levelLabels[I];return!at(z)||!z.length?(u[I]=0,0):(u[I]||(u[I]=X.getTextWidth(z,"14px Roboto, sans-serif")+C),u[I])}).attr("transform",b=>`translate(${n.node.size.width/2-u[b.depth-1]/2}, 0)`).attr("height",C).attr("rx",C/2).style("fill",_.chartTheme.outlineMedium),m.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",Math.round(n.node.size.width/2)).attr("y",C/2).style("pointer-events","none").style("dominant-baseline","middle").style("text-anchor","middle").style("font-size","14px").style("fill",_.chartTheme.textInverse).text(b=>n.levelLabels[b.depth-1]),v.exit().remove(),m.merge(v).transition().call(X.transitionsComplete,()=>{m.attr("visibility",null),a()}).duration(_.numbers.TRANSITION_DURATION).attr("transform",b=>`translate(${this.nodeCenterHorizontal(b,n.node.size.width)}, ${b.y+n.node.size.height+(n.node.margin-C)/2})`)}F.each((v,C)=>{let m=W(F.nodes()[C]),D=W(m.node()?.querySelector(`.${_.classes.CHART_PREFIX}__tree__node__children-icon`));if(this.hasChildren(v)?D.node()||m.append("path").classed(`${_.classes.CHART_PREFIX}__tree__node__children-icon`,!0).attr("d","M0,0L12,0L6,6,L0,0").attr("transform",`translate(${n.node.size.width-20}, ${n.node.size.height/2-4})`).style("fill",f):D.node()&&D.remove(),n.popoverCallback){let b=W(m.node()?.querySelector(`.${_.classes.CHART_PREFIX}__tree__node__info-icon`));if(!b.node()){let I=this.hasChildren(v)?n.node.size.width-54:n.node.size.width-32;b=m.append("path").classed(`${_.classes.CHART_PREFIX}__tree__node__info-icon`,!0).attr("d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z").attr("transform",`translate(${I}, ${n.node.size.height/2-12})`).style("fill",f).attr("cursor","pointer").on("click",z=>{z.stopPropagation();let H=JSON.parse(JSON.stringify(v.data));delete H.children,delete H.nodeId,n.popoverCallback(H,this.getParentIds(v),b.node())})}}})})}};e.hasChildren=n=>n.data.children===!0||yt(n.data.children)&&n.data.children.length>0,e.getParentIds=n=>{let a=[],o=n.parent;for(;o;)a.push(o.data.id),o=o.parent;return a.reverse().slice(1)},e.getParentDepths=n=>{let a=[],o=n.parent;for(;o;)a.push(o.depth),o=o.parent;return a.reverse().slice(1)},e.nodeCenterHorizontal=(n,a,o=n.x)=>Math.round(o-a/2);let t=e;return t})();var Wn=class{static buildTreemapChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=W(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(d=>d.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=8,u=X.chartSize(e.container),l=zt({children:e.data}).sum(d=>d.value).sort((d,g)=>g.value-d.value);La().size([u.width,u.height])(l);let h=a.select(`g.${_.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(_.classes.CHART_ROOT,!0),h.append("g").classed(`${_.classes.CHART_PREFIX}__treemap`,!0)),a.attr("width",u.width),a.attr("height",u.height);let p=h.select(`g.${_.classes.CHART_PREFIX}__treemap`).selectAll("g").data(l.leaves(),d=>d.data.id);p.exit().select("text").remove(),p.exit().select("rect").transition().duration(_.numbers.TRANSITION_DURATION).attr("width",0).attr("height",0),p.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("rect"),x.append("clipPath").attr("id",d=>`${_.classes.CHART_CLIP}-${d.data.id}`).append("rect"),x.append("text").classed(_.classes.CHART_TEXT,!0).attr("clip-path",d=>`url(#${_.classes.CHART_CLIP}-${d.data.id})`).attr("dx",5).attr("dy",20),e.selectedCallback&&x.on("click",(d,g)=>e.selectedCallback(g.data,d.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(d,g)=>e.hoverCallback(!0,g.data,d.target)),x.on("mouseleave",(d,g)=>e.hoverCallback(!1,g.data,d.target)));let y=x.merge(p);y.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",d=>`translate(${d.x0}, ${d.y0})`),y.select("text").style("display","none").text(d=>i?i(d.data.value):d.data.value),y.select("rect").attr("fill",d=>d.color?d.color:o&&d.value&&e.palette?e.palette.length===2?o(d.value):e.palette[o(d.value)]:"#fff").style("stroke","#fff").attr("id",d=>`${_.classes.CHART_PREFIX}__node-${d.data.id}`).transition().call(X.transitionsComplete,()=>{y.select("clipPath > rect").attr("x",d=>s/2).attr("y",d=>s/2).attr("width",d=>d.x1-d.x0>s?d.x1-d.x0-s:0).attr("height",d=>d.y1-d.y0>s?d.y1-d.y0-s:0),y.select("text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).attr("width",d=>d.x1-d.x0).attr("height",d=>d.y1-d.y0)})}};var Hm=["chartContainer"];function Lm(t,e){if(t&1&&(Q(0,"forge-list-item"),Ne(1,"div",5),Q(2,"span"),nt(3),et(),Q(4,"span",6),nt(5),et()()),t&2){let r=e.$implicit;tt(),bo("--item-color",r.color),tt(2),Qn(r.label),tt(2),Qn(r.value)}}function Um(t,e){if(t&1&&(Q(0,"div",3)(1,"forge-list",4),go(2,Lm,6,4,"forge-list-item",null,mo),et()()),t&2){let r=tr();tt(2),xo(r.legendData)}}var Zn=(()=>{var e;let r=class r{constructor(){Fr(this,e);this.destroyRef=Hr(Lr),this.chartContainer=le("chartContainer"),this.chartPalette=Object.keys(_.chartPalette).map(a=>_.chartPalette[a]),Se(this,e,P.bar),this.donutMeterChartData=0,this.showLegend=!1}set chartType(a){Se(this,e,a),this.setChartData("create"),this.initializeChartContainer(),setTimeout(()=>{this.drawChart()},100),Qt(this,e)===P.donutMeter||Qt(this,e)===P.gantt||Qt(this,e)===P.treemap||Qt(this,e)===P.tree?this.showLegend=!1:this.showLegend=!0}get chartType(){return Qt(this,e)}ngOnInit(){Xt(window,"resize").pipe($t(this.destroyRef),zr(100)).subscribe({next:()=>this.drawChart()})}onAction(a){this.setChartData(a),this.drawChart()}initializeChartContainer(){let a=this.chartContainer();(a?.nativeElement).querySelector("svg")?.remove();let o=document.createElementNS("http://www.w3.org/2000/svg","svg");(a?.nativeElement).appendChild(o)}setChartData(a){if(this.chartType===P.donutMeter){this.donutMeterChartData=this.randomNumber(20,80);return}switch(a){case"create":{this.chartType===P.line?this.lineChartData=[this.getData(10)]:this.chartType===P.tree?this.treeChartData={id:"0",children:[{id:"0-1",label:"Item 0-1",children:!0},{id:"0-2",label:"Item 0-2",children:!0}]}:this.chartData=this.getData(10);break}case"update":{this.chartType===P.line?this.lineChartData?.forEach((o,i)=>{this.getData(o.length).forEach((s,u)=>{o[u].value=s.value})}):this.getData(this.chartData.length).forEach((o,i)=>{this.chartData[i].value=o.value});break}case"add":{if(this.chartType===P.line)this.lineChartData?.push(this.getData(10));else{let o=Math.max(...this.chartData.map(i=>i.id))||0;o++,this.chartData=this.chartData?.concat(this.getData(10,o))}break}case"delete":{this.chartType===P.line?this.lineChartData?.pop():this.chartData.length>10&&(this.chartData=this.chartData?.slice(0,this.chartData.length-10));break}}(this.chartType===P.bubble||this.chartType===P.donut||this.chartType===P.pie||this.chartType===P.treemap)&&(this.chartData=this.chartData?.sort((o,i)=>o.category-i.category))}getData(a,o=0){let i=[],s=Date.now();for(let u=0;u<a;u++)i.push({id:u+o,value:this.randomNumber(0,1e3),label:`Item ${u+o}`,category:this.randomNumber(0,100)});return console.log(i.sort((u,l)=>u.category-l.category)),i.sort((u,l)=>u.category-l.category)}drawChart(){this.legendData=this.chartData?.map((o,i)=>({id:o.id,label:o.label,value:o.value,color:this.chartPalette[i%this.chartPalette.length]}));let a={container:this.chartContainer()?.nativeElement.querySelector("svg"),data:this.chartData?.map((o,i)=>Gt(Ut({},o),{color:this.chartPalette[i%this.chartPalette.length]})),palette:this.chartPalette,selectedCallback:this.selectedCallback,hoverCallback:this.hoverCallback};switch(a.container.setAttribute("width","0"),a.container.setAttribute("height","0"),this.chartType){case P.bar:{let o=Ut({},a);Hn.buildBarChart(o);break}case P.bubble:{Ln.buildBubbleChart(a);break}case P.donut:{let o=Gt(Ut({},a),{type:"donut"});Ke.buildPieChart(o);break}case P.donutMeter:{let o=Gt(Ut({},a),{type:"donut-meter",data:[{id:0,value:this.donutMeterChartData,label:"percent",color:_.chartPalette.indigoA200},{id:1,value:100-this.donutMeterChartData,color:_.chartPalette.grey400}]});Ke.buildPieChart(o);break}case P.line:{let o=this.lineChartData?.map((s,u)=>({id:u,label:`Item ${u}`,data:s,color:this.chartPalette[u%this.chartPalette.length]})),i=Gt(Ut({},a),{data:o});Bn.buildLineChart(i),this.legendData=o?.map((s,u)=>({id:s.id,color:s.color,value:null,label:s.data[0].label}));break}case P.pie:{let o=Gt(Ut({},a),{type:"pie"});Ke.buildPieChart(o);break}case P.treemap:{Wn.buildTreemapChart(a);break}case P.tree:{let o=Gt(Ut({},a),{data:this.treeChartData,node:{size:{width:200,height:48},padding:8,margin:48},palette:["#6f74dd","#8e99f3","#d1d9ff","#ede7f6","#e3f2fd","#e0f2f1","#f1f8e9","#eceff1","#f5f5f5"],levelLabels:["Level one","Level two","Level three"],zoomScale:{min:.5,max:1},selectedCallback:(i,s,u)=>{if(console.log(`selectedCallback: ${i.id}`),i.children){if(Array.isArray(i.children))i.children=!0;else{let l=this.randomNumber(5,10);i.children=[];for(let f=0;f<l;f++)i.children.push({id:`${s.length+1}-${f}`,label:`Item ${s.length+1} - ${f}`,children:!!this.randomNumber(0,10)})}this.drawChart()}}});Xl.buildTreeChart(o);break}case P.gantt:{let o=Gt(Ut({},a),{data:[{id:0,label:"Item 01",startDate:new Date(2024,0,1),endDate:new Date(2024,0,31),progress:10},{id:1,label:"Item 02",startDate:new Date(2024,1,1),endDate:new Date(2024,1,10),progress:20},{id:2,label:"Item 03",startDate:new Date(2024,1,1),endDate:new Date(2024,1,20),progress:30},{id:3,label:"Item 04",startDate:new Date(2024,3,15),endDate:new Date(2024,8,20),progress:40,color:"red"},{id:4,label:"Item 05",description:"Item 05 description goes here, blah blah blah.  This description should wrap at 320px",startDate:new Date(2024,10,1),endDate:new Date(2025,10,30),progress:90}]});Vn.buildGanttChart(o);break}}}randomNumber(a,o){return Math.floor(Math.random()*(o-a+1))+a}selectedCallback(a,o){console.log(a),console.log(o)}hoverCallback(a,o,i){console.log(o),console.log(i)}};e=new WeakMap,r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=De({type:r,selectors:[["app-charts-d3-chart"]],viewQuery:function(o,i){o&1&&ue(i.chartContainer,Hm,5),o&2&&Re()},inputs:{chartType:"chartType"},decls:4,vars:1,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container","app-chart"],[1,"legend-container"],[1,"chart-legend"],["slot","start"],["slot","secondary-text"]],template:function(o,i){o&1&&(Q(0,"div",1),Ne(1,"div",2,0),et(),Ur(3,Um,4,0,"div",3)),o&2&&(tt(3),Xr(i.showLegend?3:-1))},dependencies:[Ee,Oo,Eo,$o,Ro],styles:[`[_nghost-%COMP%]{overflow-x:auto;overflow-y:hidden;height:100%;width:100%;display:grid;grid-template-columns:1fr auto;column-gap:16px}[_nghost-%COMP%]     .app-chart{--app-chart-text-high: var(--forge-theme-text-high, rgba(0, 0, 0, .87));--app-chart-text-medium: var(--forge-theme-text-medium, rgba(0, 0, 0, .6));--app-chart-text-inverse: var(--forge-theme-on-surface-inverse, #ffffff);--app-chart-outline: var(--forge-theme-outline, #e0e0e0);--app-chart-outline-medium: var(--forge-theme-outline-medium, #757575);--app-chart-surface: var(--forge-theme-surface, #ffffff);--app-chart-surface-dim: var(--forge-theme-surface-dim, #f5f5f5)}[_nghost-%COMP%]     .app-chart__xaxis, [_nghost-%COMP%]     .app-chart__yaxis{font-family:Roboto,sans-serif;font-size:10px}[_nghost-%COMP%]     .app-chart__xaxis .domain, [_nghost-%COMP%]     .app-chart__yaxis .domain{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis .tick line, [_nghost-%COMP%]     .app-chart__yaxis .tick line{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:first-of-type>text{text-anchor:start}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:last-of-type>text{text-anchor:end}[_nghost-%COMP%]     .app-chart__popover{position:absolute;border:1px solid var(--app-chart-outline);border-radius:4px;background-color:var(--app-chart-surface);padding:4px 8px;font-size:.85rem;display:grid;grid-template-columns:auto 1fr;column-gap:8px;pointer-events:none;visibility:hidden;min-width:176px;max-width:320px;word-break:break-word}.chart-card[_ngcontent-%COMP%]{padding:8px;margin:24px;background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.legend-container[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;min-width:280px;max-height:100%;background-color:var(--forge-theme-surface);border-left:1px solid var(--forge-theme-outline);--forge-list-item-padding: 0;padding:16px}.legend-container[_ngcontent-%COMP%]   forge-list-item[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{background-color:var(--item-color);width:24px;height:24px}  .chart-legend [slot=leading]{width:16px;height:16px;background-color:var(--item-color)}






/*# sourceMappingURL=d3-chart.component-RFXGT2U5.css.map */`]});let t=r;return t})();var lo=(()=>{let e=class e{static loadGoogleChartService(){return new fo(n=>{let a=document.querySelector('script[src="https://www.gstatic.com/charts/loader.js"]');a?(n.next(),n.complete()):(a=document.createElement("script"),a.type="text/javascript",a.src="https://www.gstatic.com/charts/loader.js",a.onload=()=>{n.next(),n.complete()},document.body.appendChild(a))})}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=po({token:e,factory:e.\u0275fac});let t=e;return t})();var Xm=["chartContainer"],Gn=(()=>{var e;let r=class r{constructor(){Fr(this,e);this.destroyRef=Hr(Lr),this.chartContainer=le("chartContainer"),this.chartAnimation={startup:!0,duration:500},this.chartScale=1,this.googleChartsLoaded=!1,this.chartIsPanning=!1,Se(this,e,P.bar)}set chartType(a){Se(this,e,a),this.googleChartsLoaded&&this.drawChart("create")}get chartType(){return Qt(this,e)}ngOnInit(){lo.loadGoogleChartService().pipe($t(this.destroyRef)).subscribe({next:()=>{google.charts.load("current",{packages:["corechart","treemap","orgchart","gantt"]}).then(()=>{this.googleChartsLoaded=!0,this.drawChart("create")})}}),Xt(window,"resize").pipe($t(this.destroyRef),zr(100)).subscribe({next:()=>this.drawChart("redraw")}),Xt(this.chartContainer()?.nativeElement,"wheel").pipe($t(this.destroyRef)).subscribe({next:a=>{let o=(this.chartContainer()?.nativeElement).firstElementChild;a.deltaY>0&&this.chartScale<5.05?(this.chartScale+=.05,o.style.transform=`scale(${this.chartScale})`):a.deltaY<0&&this.chartScale>.1&&(this.chartScale-=.05,o.style.transform=`scale(${this.chartScale})`)}})}ngOnDestroy(){this.chart?.clearChart()}onAction(a){this.drawChart(a)}drawChart(a){a!=="redraw"&&this.setChartData(a);let o=this.chartContainer(),i=o?.nativeElement.clientWidth,s=o?.nativeElement.clientHeight;switch(this.chartType){case P.bar:{a==="create"&&(this.chart=new google.visualization.ColumnChart(o?.nativeElement),this.addChartEvents());let u={title:"Bar Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,u);break}case P.bubble:{a==="create"&&(this.chart=new google.visualization.BubbleChart(o?.nativeElement),this.addChartEvents());let u={title:"Bubble Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,u);break}case P.donut:{a==="create"&&(this.chart=new google.visualization.PieChart(o?.nativeElement),this.addChartEvents());let u={title:"Donut Chart",pieHole:.5};this.chart.draw(this.chartData,u);break}case P.pie:{a==="create"&&(this.chart=new google.visualization.PieChart(o?.nativeElement),this.addChartEvents());let u={title:"Pie Chart"};this.chart.draw(this.chartData,u);break}case P.line:{a==="create"&&(this.chart=new google.visualization.LineChart(o?.nativeElement),this.addChartEvents());let u={title:"Line Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,u);break}case P.treemap:{a==="create"&&(this.chart=new google.visualization.TreeMap(o?.nativeElement),this.addChartEvents());let u={title:"Treemap Chart"};this.chart.draw(this.chartData,u);break}case P.tree:{a==="create"&&(this.chart=new google.visualization.OrgChart(o?.nativeElement),this.addChartEvents());let u={allowCollapse:!0,allowHtml:!0,nodeClass:"app--chart--tree-node",selectedNodeClass:"app--chart--tree-node--selected"};this.chart.draw(this.chartData,u);break}case P.gantt:{a==="create"&&(this.chart=new google.visualization.Gantt(o?.nativeElement),this.addChartEvents());let u={};this.chart.draw(this.chartData,u)}}}setChartData(a){let o=this.chartData?.getNumberOfRows()||0,i=this.chartData?.getNumberOfColumns()||0;switch(a){case"create":{switch(this.chartData=new google.visualization.DataTable,this.chartType){case P.bar:case P.donut:case P.pie:this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Value","value"),this.chartData.addRows(this.getData(10,0).map(s=>[s.label,s.value]));break;case P.bubble:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Size","size");let s=[];for(let u=0;u<10;u++)s.push([u.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${u}`,this.randomNumber(0,1e3)]);this.chartData.addRows(s);break}case P.line:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Line 1","line1"),this.chartData.addColumn("number","Line 2","line2"),this.chartData.addColumn("number","Line 3","line3");let s=[];for(let u=0;u<10;u++)s.push([`Item ${u}`,this.randomNumber(0,1e3),this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);this.chartData.addRows(s);break}case P.treemap:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("string","Parent","parent"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addRow(["Root",null,0,0]),this.chartData.addRows(this.getData(20,0).map(s=>[s.label,"Root",s.value,s.category]));break}case P.tree:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","ParentId","parentId"),this.chartData.addRow([{v:"0",f:"Item 0"},null]),this.chartData.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}case P.gantt:this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","Name","name"),this.chartData.addColumn("string","Resource","resource"),this.chartData.addColumn("date","Start Date","startDate"),this.chartData.addColumn("date","End Date","endDate"),this.chartData.addColumn("number","Duration","duration"),this.chartData.addColumn("number","Progress","progress"),this.chartData.addColumn("string","Dependencies","dependencies"),this.chartData.addRows([["0","Item 01","",new Date(2024,0,1),new Date(2024,0,31),null,10,null],["1","Item 02","",new Date(2024,1,1),new Date(2024,1,10),null,20,null],["2","Item 03","",new Date(2024,1,1),new Date(2024,1,20),null,30,null],["3","Item 04","",new Date(2024,3,15),new Date(2024,8,20),null,40,null],["4","Item 05","",new Date(2024,10,1),new Date(2025,10,30),null,90,null]])}break}case"update":{switch(this.chartType){case P.bar:case P.donut:case P.pie:{this.getData(o).forEach((u,l)=>{this.chartData?.setValue(l,1,u.value)});break}case P.bubble:{for(let s=0;s<o;s++)this.chartData?.setValue(s,1,this.randomNumber(0,1e3)),this.chartData?.setValue(s,2,this.randomNumber(0,1e3)),this.chartData?.setValue(s,4,this.randomNumber(0,1e3));break}case P.line:{for(let s=0;s<o;s++)for(let u=1;u<i;u++)this.chartData?.setValue(s,u,this.randomNumber(0,1e3));break}case P.treemap:{for(let s=1;s<o;s++)this.chartData?.setValue(s,2,this.randomNumber(0,1e3)),this.chartData?.setValue(s,3,this.randomNumber(0,1e3));break}case P.tree:{this.chartData?.removeRows(0,this.chartData.getNumberOfRows()),this.chartData?.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}}break}case"add":{switch(this.chartType){case P.bar:case P.donut:case P.pie:{this.chartData?.addRows(this.getData(1,o).map(s=>[s.label,s.value]));break}case P.bubble:{this.chartData?.addRow([o.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${o}`,this.randomNumber(0,1e3)]);break}case P.line:{this.chartData?.addColumn("number",`Line ${i}`,`line${i}`);for(let s=0;s<10;s++)this.chartData?.setValue(s,i,this.randomNumber(0,1e3));break}case P.treemap:{this.chartData?.addRow([`Item ${o}`,"Root",this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);break}}break}case"delete":{if(o>1)switch(this.chartType){case P.bar:case P.bubble:case P.donut:case P.pie:case P.treemap:{this.chartData?.removeRow(o-1);break}case P.line:{this.chartData?.removeColumn(i-1);break}}break}}}getData(a,o=0){let i=[];for(let s=0;s<a;s++)i.push({id:s+o,value:this.randomNumber(0,1e3),label:`Item ${s+o}`,category:this.randomNumber(0,100)});return i}randomNumber(a,o){return Math.floor(Math.random()*(o-a+1))+a}addChartEvents(){google.visualization.events.addListener(this.chart,"ready",()=>{console.log("chart ready"),this.chartScale=1,this.addZoomPanEvents()}),google.visualization.events.addListener(this.chart,"select",()=>{console.log("chart item selected"),console.log(this.chart?.getSelection())}),google.visualization.events.addListener(this.chart,"mousedown",()=>{console.log("mousedown")})}buildTreeNodeData(a,o=1){let i=[],s=this.randomNumber(0,5);for(let u=0;u<s;u++)i.push([{v:`${a}-${u}`,f:`Item ${a}-${u}`},a]),o>1&&i.push(...this.buildTreeNodeData(`${a}-${u}`,o-1));return i}addZoomPanEvents(){let a=(this.chartContainer()?.nativeElement).firstElementChild;Xt(a,"mousedown").pipe($t(this.destroyRef)).subscribe({next:o=>{this.chartIsPanning=!0,(this.chartContainer()?.nativeElement).classList.add("app--chart--panning")}}),Xt(a,"mousemove").pipe($t(this.destroyRef),ho(()=>this.chartIsPanning)).subscribe({next:o=>{(this.chartContainer()?.nativeElement).scrollBy(o.movementX*-1,o.movementY*-1)}}),Xt(a,"mouseup").pipe($t(this.destroyRef)).subscribe({next:()=>{this.chartIsPanning=!1,(this.chartContainer()?.nativeElement).classList.remove("app--chart--panning")}}),Xt(a,"mouseout").pipe($t(this.destroyRef)).subscribe({next:()=>{this.chartIsPanning=!1,(this.chartContainer()?.nativeElement).classList.remove("app--chart--panning")}})}};e=new WeakMap,r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=De({type:r,selectors:[["app-charts-google-chart"]],viewQuery:function(o,i){o&1&&ue(i.chartContainer,Xm,5),o&2&&Re()},inputs:{chartType:"chartType"},features:[Mo([lo])],decls:3,vars:0,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container"]],template:function(o,i){o&1&&(yo(0,"div",1),_o(1,"div",2,0),vo())},dependencies:[Ee],styles:[`[_nghost-%COMP%]{display:block;height:100%;width:100%}  .app--chart--tree-node{border:1px solid var(--forge-theme-outline);white-space:nowrap;background-color:#e8eaf6}  .app--chart--tree-node--selected{background-color:#3f51b5;color:#fff}  .app--chart--panning{-webkit-user-select:none;user-select:none}.chart-card[_ngcontent-%COMP%]{margin:24px;height:calc(100% - 48px);background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%}






/*# sourceMappingURL=google-chart.component-CMWP43HV.css.map */`]});let t=r;return t})();function Ym(t,e){if(t&1&&Ne(0,"app-charts-d3-chart",9),t&2){let r=tr();pt("chartType",r.chartType)}}function Vm(t,e){if(t&1&&Ne(0,"app-charts-google-chart",9),t&2){let r=tr();pt("chartType",r.chartType)}}var P=(function(t){return t[t.bar=0]="bar",t[t.bubble=1]="bubble",t[t.donut=2]="donut",t[t.donutMeter=3]="donutMeter",t[t.gantt=4]="gantt",t[t.line=5]="line",t[t.pie=6]="pie",t[t.treemap=7]="treemap",t[t.tree=8]="tree",t})(P||{}),s2=(()=>{let e=class e{constructor(){this.d3Chart=le(Zn),this.googleChart=le(Gn),this.chartTypesEnum=P,this.chartType=P.bar,this.activeTab=0}onAction(n){this.activeTab===0?this.d3Chart()?.onAction(n):this.activeTab===1&&this.googleChart()?.onAction(n)}onTabSelected(n){this.activeTab=n}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=De({type:e,selectors:[["app-charts"]],viewQuery:function(a,o){a&1&&(ue(o.d3Chart,Zn,5),ue(o.googleChart,Gn,5)),a&2&&Re(2)},decls:37,vars:15,consts:[[1,"header"],["slot","start"],[1,"forge-typography--subheading4"],["aria-label","Change chart type",3,"ngModelChange","ngModel"],[3,"value"],["variant","outlined",3,"click","disabled"],["secondary","",3,"activeTab"],[3,"forge-tab-select"],[1,"body"],[3,"chartType"]],template:function(a,o){a&1&&(Q(0,"forge-toolbar",0)(1,"div",1)(2,"h2",2),nt(3,"Charts"),et(),Q(4,"forge-select",3),Co("ngModelChange",function(s){return To(o.chartType,s)||(o.chartType=s),s}),Q(5,"forge-option",4),nt(6,"Bar"),et(),Q(7,"forge-option",4),nt(8,"Bubble"),et(),Q(9,"forge-option",4),nt(10,"Donut"),et(),Q(11,"forge-option",4),nt(12,"Donut Meter"),et(),Q(13,"forge-option",4),nt(14,"Gantt"),et(),Q(15,"forge-option",4),nt(16,"Line"),et(),Q(17,"forge-option",4),nt(18,"Pie"),et(),Q(19,"forge-option",4),nt(20,"Treemap"),et(),Q(21,"forge-option",4),nt(22,"Tree"),et()(),Q(23,"forge-button",5),Ie("click",function(){return o.onAction("update")}),nt(24,"Update"),et(),Q(25,"forge-button",5),Ie("click",function(){return o.onAction("add")}),nt(26,"Add"),et(),Q(27,"forge-button",5),Ie("click",function(){return o.onAction("delete")}),nt(28,"Delete"),et()()(),Q(29,"forge-tab-bar",6)(30,"forge-tab",7),Ie("forge-tab-select",function(){return o.onTabSelected(0)}),nt(31,"D3"),et(),Q(32,"forge-tab",7),Ie("forge-tab-select",function(){return o.onTabSelected(1)}),nt(33,"Google"),et()(),Q(34,"div",8),Ur(35,Ym,1,1,"app-charts-d3-chart",9)(36,Vm,1,1,"app-charts-google-chart",9),et()),a&2&&(tt(4),wo("ngModel",o.chartType),tt(),pt("value",o.chartTypesEnum.bar),tt(2),pt("value",o.chartTypesEnum.bubble),tt(2),pt("value",o.chartTypesEnum.donut),tt(2),pt("value",o.chartTypesEnum.donutMeter),tt(2),pt("value",o.chartTypesEnum.gantt),tt(2),pt("value",o.chartTypesEnum.line),tt(2),pt("value",o.chartTypesEnum.pie),tt(2),pt("value",o.chartTypesEnum.treemap),tt(2),pt("value",o.chartTypesEnum.tree),tt(2),pt("disabled",o.activeTab===0&&o.chartType===o.chartTypesEnum.tree||o.chartType===o.chartTypesEnum.gantt),tt(2),pt("disabled",o.chartType===o.chartTypesEnum.donutMeter||o.chartType===o.chartTypesEnum.tree||o.chartType===o.chartTypesEnum.gantt),tt(2),pt("disabled",o.chartType===o.chartTypesEnum.donutMeter||o.chartType===o.chartTypesEnum.tree||o.chartType===o.chartTypesEnum.gantt),tt(2),pt("activeTab",o.activeTab),tt(6),Xr(o.activeTab===0?35:o.activeTab===1?36:-1))},dependencies:[Ee,Do,Ao,So,Io,No,Fo,Po,Lo,Ho,zo,Vo,Yo,Uo,Xo,Bo,qo,Zn,Gn],styles:[`[_nghost-%COMP%]{overflow:hidden;height:100%;display:grid;grid-template-rows:auto auto 1fr}.header[_ngcontent-%COMP%]{overflow:hidden}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:16px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]{width:320px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]::part(label){display:none}forge-tab-bar[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface)}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]{min-width:240px}.body[_ngcontent-%COMP%]{overflow:hidden;height:100%}






/*# sourceMappingURL=charts.component-CGE4ABHI.css.map */`]});let t=e;return t})();export{P as ChartTypes,s2 as ChartsComponent};
//# sourceMappingURL=chunk-DXVTHDPX.js.map
