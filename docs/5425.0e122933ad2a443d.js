"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[5425,3918],{82734:(be,me,j)=>{j.d(me,{Qn:()=>R,iG:()=>ee});var w,W=j(43918),b=j(64626);class V{}V.instance=new b.vF("Etc/UTC"),(w||(w={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const D={[w.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};class Q extends Error{constructor(N,K){super((0,W.Hy)(D[N],K)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,Q)}}class ee{constructor(N){this._date=N,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(N=0,K=1,M=1,Z=0,te=0,v=0,L=0,_){if(isNaN(N)||isNaN(K)||isNaN(M)||isNaN(Z)||isNaN(te)||isNaN(v)||isNaN(L))return null;let T=0;const y=b.ou.local(N,K).daysInMonth;M<1&&(T=M-1,M=1),M>y&&(T=M-y,M=y);let f=0;K>12?(f=K-12,K=12):K<1&&(f=K-1,K=1);let F=0;te>59?(F=te-59,te=59):te<0&&(F=te,te=0);let x=0;v>59?(x=v-59,v=59):v<0&&(x=v,v=0);let E=0;L>999?(E=L-999,L=999):L<0&&(E=L,L=0);let z=b.ou.fromObject({day:M,year:N,month:K,hour:Z,minute:te,second:v,millisecond:L},{zone:R(_)});return 0!==f&&(z=z.plus({months:f})),0!==T&&(z=z.plus({days:T})),0!==F&&(z=z.plus({minutes:F})),0!==x&&(z=z.plus({seconds:x})),0!==E&&(z=z.plus({milliseconds:E})),new ee(z)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(N,K){const M=R(K);return N.isUnknownTimeZone||M===V.instance?ee.fromParts(N.year,N.monthJS+1,N.day,N.hour,N.minute,N.second,N.millisecond,M):new ee(N._date.setZone(K))}static dateJSToArcadeDate(N){return new ee(b.ou.fromJSDate(N,{zone:"system"}))}static dateJSAndZoneToArcadeDate(N,K="system"){return new ee(b.ou.fromJSDate(N,{zone:K}))}static unknownEpochToArcadeDate(N){return new ee(b.ou.fromMillis(N,{zone:V.instance}))}static unknownDateJSToArcadeDate(N){return new ee(b.ou.fromMillis(N.getTime(),{zone:V.instance}))}static epochToArcadeDate(N,K="system"){return new ee(b.ou.fromMillis(N,{zone:K}))}static dateTimeToArcadeDate(N){return new ee(N)}changeTimeZone(N){const K=R(N);return ee.dateTimeToArcadeDate(this._date.setZone(K))}static dateTimeAndZoneToArcadeDate(N,K){const M=R(K);return N.zone===V.instance||M===V.instance?ee.fromParts(N.year,N.month,N.day,N.hour,N.minute,N.second,N.millisecond,M):new ee(N.setZone(M))}static nowToArcadeDate(N){return new ee(b.ou.fromJSDate(new Date,{zone:N}))}static nowUTCToArcadeDate(){return new ee(b.ou.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===ee.systemTimeZoneCanonicalName}equals(N){return this.isSystem&&N.isSystem?this.toNumber()===N.toNumber():this.isUnknownTimeZone===N.isUnknownTimeZone&&this._date.equals(N._date)}get isUnknownTimeZone(){return this._date.zone===V.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let N=this._date.weekday;return N>6&&(N=0),N}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const N=this.zone;return"fixed"===N.type?0===N.fixed?"utc":N.formatOffset(0,"short"):N.name}stringify(){return JSON.stringify(this.toJSDate())}plus(N){return new ee(this._date.plus(N))}diff(N,K="milliseconds"){return this._date.diff(N._date,K)[K]}toISOString(N){return this._date.toISO(N?{suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}:{includeOffset:!this.isUnknownTimeZone})}toFormat(N,K){return this._date.toFormat(N,K)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new ee(this._date.toUTC())}toLocal(){return new ee(this._date.toLocal())}toString(){return this.toISOString(!0)}}function R(U){if(U instanceof b.ld)return U;if("system"===U.toLowerCase())return"system";if("utc"===U.toLowerCase())return"utc";if("unknown"===U.toLowerCase())return V.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(U)){const K=b.Qf.parseSpecifier("UTC"+(U.startsWith("+")||U.startsWith("-")?"":"+")+U);if(K)return K}const N=b.vF.create(U);if(!N.isValid)throw new Q(w.TimeZoneNotRecognised);return N}},39353:(be,me,j)=>{j.d(me,{P:()=>W});class W{constructor(V){this.source=V}}},48387:(be,me,j)=>{j.d(me,{s:()=>W});class W{constructor(V,w){this._moduleSingletons=V,this._syntaxModules=w}loadLibrary(V){if(null==this._syntaxModules)return null;const w=this._syntaxModules[V.toLowerCase()];return w?{syntax:w.script,uri:w.uri}:null}}},14433:(be,me,j)=>{j.d(me,{Z:()=>b});var W=j(27500);class b extends W.Z{constructor(w){super(),this.declaredClass="esri.arcade.Portal",this.immutable=!1,this.setField("url",w),this.immutable=!0}}},75866:(be,me,j)=>{j.d(me,{Z:()=>b});var W=j(27500);class b extends W.Z{constructor(w,D,Q,ee,R,U){super(),this.attachmentUrl=R,this.declaredClass="esri.arcade.Attachment",this.immutable=!1,this.setField("id",w),this.setField("name",D),this.setField("contenttype",Q),this.setField("size",ee),this.setField("exifinfo",U),this.immutable=!0}}},27500:(be,me,j)=>{j.d(me,{Z:()=>R});var W=j(71670),b=j(82734),V=j(43918),w=j(98909),D=j(44819),Q=j(70535);function ee(U,N,K=!1){if(null==U)return null;if((0,D.b)(U))return(0,D.g)(U);if((0,D.a)(U))return(0,D.h)(U);if((0,D.c)(U))return(0,D.j)(U);if((0,D.k)(U))return(0,D.l)(U,N);if((0,D.m)(U)){const Z=[];for(const te of U)Z.push(ee(te,N,K));return Z}const M=new R;M.immutable=!1;for(const Z of Object.keys(U)){const te=U[Z];void 0!==te&&M.setField(Z,ee(te,N,K))}return M.immutable=K,M}class R{constructor(N){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=N instanceof R?N.attributes:N??{}}field(N){const K=N.toLowerCase(),M=this.attributes[N];if(void 0!==M)return M;for(const Z in this.attributes)if(Z.toLowerCase()===K)return this.attributes[Z];throw new V.aV(null,V.rH.FieldNotFound,null,{key:N})}setField(N,K){if(this.immutable)throw new V.aV(null,V.rH.Immutable,null);if((0,D.i)(K))throw new V.aV(null,V.rH.NoFunctionInDictionary,null);const M=N.toLowerCase();if(K instanceof Date&&(K=b.iG.dateJSToArcadeDate(K)),void 0===this.attributes[N]){for(const Z in this.attributes)if(Z.toLowerCase()===M)return void(this.attributes[Z]=K);this.attributes[N]=K}else this.attributes[N]=K}hasField(N){const K=N.toLowerCase();if(void 0!==this.attributes[N])return!0;for(const M in this.attributes)if(M.toLowerCase()===K)return!0;return!1}keys(){let N=[];for(const K in this.attributes)N.push(K);return N=N.sort(),N}castToText(N=!1){let K="";for(const M in this.attributes){""!==K&&(K+=",");const Z=this.attributes[M];null==Z?K+=JSON.stringify(M)+":null":(0,D.a)(Z)||(0,D.b)(Z)||(0,D.c)(Z)?K+=JSON.stringify(M)+":"+JSON.stringify(Z):Z instanceof Q.Z?K+=JSON.stringify(M)+":"+(0,D.t)(Z):Z instanceof w.Z||Z instanceof Array?K+=JSON.stringify(M)+":"+(0,D.t)(Z,null,N):Z instanceof b.iG?K+=N?JSON.stringify(M)+":"+JSON.stringify(Z.getTime()):JSON.stringify(M)+":"+Z.stringify():null!==Z&&"object"==typeof Z&&void 0!==Z.castToText&&(K+=JSON.stringify(M)+":"+Z.castToText(N))}return"{"+K+"}"}static convertObjectToArcadeDictionary(N,K,M=!0){const Z=new R;Z.immutable=!1;for(const te in N){const v=N[te];void 0!==v&&Z.setField(te.toString(),ee(v,K))}return Z.immutable=M,Z}static convertJsonToArcade(N,K,M=!1){return ee(N,K,M)}castAsJson(N=null){const K={};for(let M in this.attributes){const Z=this.attributes[M];void 0!==Z&&(N?.keyTranslate&&(M=N.keyTranslate(M)),K[M]=(0,D.d)(Z,N))}return K}castDictionaryValueAsJsonAsync(N,K,M,Z=null,te){return(0,W.Z)(function*(){const v=yield(0,D.e)(M,Z,te);return N[K]=v,v})()}castAsJsonAsync(N=null,K=null){var M=this;return(0,W.Z)(function*(){const Z={},te=[];for(let v in M.attributes){const L=M.attributes[v];K?.keyTranslate&&(v=K.keyTranslate(v)),void 0!==L&&((0,D.f)(L)||L instanceof Q.Z||L instanceof b.iG?Z[v]=(0,D.d)(L,K):te.push(M.castDictionaryValueAsJsonAsync(Z,v,L,N,K)))}return te.length>0&&(yield Promise.all(te)),Z})()}}},26214:(be,me,j)=>{j.d(me,{Z:()=>Z});var W=j(71670),b=j(27500),V=j(98909),w=j(44819),D=j(70535),Q=j(35787),ee=j(71182),R=j(50805),U=j(53661),N=j(82734),K=j(43918),M=j(68621);class Z{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._datesfixed=!0,this.dateTimeReferenceFieldIndex=null,this.contextTimeReference=null,this.immutable=!0,this._datefields=null,this.immutable=!0}static createFromGraphic(v,L){const _=new Z;return _.contextTimeReference=L??null,_._geometry=(0,U.pC)(v.geometry)?v.geometry:null,_.attributes=null==v.attributes?{}:v.attributes,v._sourceLayer?(_._layer=v._sourceLayer,_._datesfixed=!1):v._layer?(_._layer=v._layer,_._datesfixed=!1):v.layer&&"fields"in v.layer?(_._layer=v.layer,_._datesfixed=!1):v.sourceLayer&&"fields"in v.sourceLayer&&(_._layer=v.sourceLayer,_._datesfixed=!1),_._layer&&!1===_._datesfixed&&(_.dateTimeReferenceFieldIndex=void 0!==_._layer.dateTimeReferenceFieldIndex?_._layer.dateTimeReferenceFieldIndex:M.nu.createFromLayer(_._layer)),_}static createFromArcadeFeature(v){const L=new Z;return L._datesfixed=v._datesfixed,L.attributes=v.attributes,L._geometry=v._geometry,L._optimizedGeomDefinition=v._optimizedGeomDefinition,v._layer&&(L._layer=v._layer),L.dateTimeReferenceFieldIndex=v.dateTimeReferenceFieldIndex,L.contextTimeReference=v.contextTimeReference,L}static createFromOptimisedFeature(v,L,_){const T=new Z;return T._geometry=v.geometry?{geometry:v.geometry}:null,T._optimizedGeomDefinition=_,T.attributes=v.attributes||{},T._layer=L,T._datesfixed=!1,T}static createFromArcadeDictionary(v){const L=new Z;return L.attributes=v.field("attributes"),null!==L.attributes&&L.attributes instanceof b.Z?(L.attributes=L.attributes.attributes,null===L.attributes&&(L.attributes={})):L.attributes={},L._geometry=v.field("geometry"),null!==L._geometry&&(L._geometry instanceof b.Z?L._geometry=Z.parseGeometryFromDictionary(L._geometry):L._geometry instanceof D.Z||(L._geometry=null)),L}static createFromGraphicLikeObject(v,L,_=null,T){const y=new Z;return y.contextTimeReference=T??null,null===L&&(L={}),y.attributes=L,y._geometry=(0,U.pC)(v)?v:null,y._layer=_,y._layer&&(y._datesfixed=!1,y.dateTimeReferenceFieldIndex=void 0!==y._layer.dateTimeReferenceFieldIndex?y._layer.dateTimeReferenceFieldIndex:M.nu.createFromLayer(y._layer)),y}repurposeFromGraphicLikeObject(v,L,_=null){null===L&&(L={}),this.attributes=L,this._geometry=v||null,this._layer=_,this._datesfixed=!this._layer}get layerPreferredTimeZone(){return this.dateTimeReferenceFieldIndex?.layerPreferredTimeZone??""}fieldSourceTimeZone(v){return this.dateTimeReferenceFieldIndex?.fieldTimeZone(v)??""}castToText(v=!1){let L="";!1===this._datesfixed&&this._fixDates();for(const _ in this.attributes){""!==L&&(L+=",");const T=this.attributes[_];null==T?L+=JSON.stringify(_)+":null":(0,w.a)(T)||(0,w.b)(T)||(0,w.c)(T)?L+=JSON.stringify(_)+":"+JSON.stringify(T):T instanceof D.Z?L+=JSON.stringify(_)+":"+(0,w.t)(T):T instanceof V.Z||T instanceof Array?L+=JSON.stringify(_)+":"+(0,w.t)(T,null,v):T instanceof N.iG?L+=v?JSON.stringify(_)+":"+JSON.stringify(T.getTime()):JSON.stringify(_)+":"+T.stringify():null!==T&&"object"==typeof T&&void 0!==T.castToText&&(L+=JSON.stringify(_)+":"+T.castToText(v))}return'{"geometry":'+(null===this.geometry()?"null":(0,w.t)(this.geometry()))+',"attributes":{'+L+"}}"}_fixDates(){if(null!==this._datefields)return this._datefields.length>0&&this._fixDateFields(this._datefields),void(this._datesfixed=!0);const v=[],L=this._layer.fields;for(let _=0;_<L.length;_++){const T=L[_],y=T.type;"date"!==y&&"esriFieldTypeDate"!==y||v.push(T.name)}this._datefields=v,v.length>0&&this._fixDateFields(v),this._datesfixed=!0}isUnknownDateTimeField(v){return"unknown"===this.dateTimeReferenceFieldIndex?.fieldTimeZone(v)}_fixDateFields(v){this.attributes={...this.attributes};const L=this.contextTimeReference?.timeZone??"system";for(let _=0;_<v.length;_++){let T=this.attributes[v[_]];if(null!==T)if(void 0===T){for(const y in this.attributes)if(y.toLowerCase()===v[_].toLowerCase()){if(T=this.attributes[y],null!==T){const f=this.isUnknownDateTimeField(y);this.attributes[y]=(0,w.k)(T)?T:T instanceof Date?f?N.iG.unknownDateJSToArcadeDate(T):N.iG.dateJSAndZoneToArcadeDate(T,L):f?N.iG.unknownEpochToArcadeDate(T):N.iG.epochToArcadeDate(T,L)}break}}else{const y=this.isUnknownDateTimeField(v[_]);this.attributes[v[_]]=(0,w.k)(T)?T:T instanceof Date?y?N.iG.unknownDateJSToArcadeDate(T):N.iG.dateJSAndZoneToArcadeDate(T,L):y?N.iG.unknownEpochToArcadeDate(T):N.iG.epochToArcadeDate(T,L)}}}geometry(){return null===this._geometry||this._geometry instanceof D.Z||(this._optimizedGeomDefinition?(this._geometry=(0,U.Wg)((0,ee.im)((0,R.di)(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=(0,U.Wg)((0,ee.im)(this._geometry))),this._geometry}field(v){!1===this._datesfixed&&this._fixDates();const L=this.attributes[v];if(void 0!==L)return L;const _=v.toLowerCase();for(const T in this.attributes)if(T.toLowerCase()===_)return this.attributes[T];if(this._hasFieldDefinition(_))return null;throw new K.aV(null,K.rH.FieldNotFound,null,{key:v})}_hasFieldDefinition(v){if(null===this._layer)return!1;for(let L=0;L<this._layer.fields.length;L++)if(this._layer.fields[L].name.toLowerCase()===v)return!0;return!1}setField(v,L){if(this.immutable)throw new K.aV(null,K.rH.Immutable,null);if(L instanceof Date&&(L=this.isUnknownDateTimeField(v)?N.iG.unknownDateJSToArcadeDate(L):N.iG.dateJSToArcadeDate(L)),!1===(0,w.f)(L))throw new K.aV(null,K.rH.TypeNotAllowedInFeature,null);const _=v.toLowerCase();if(void 0===this.attributes[v]){for(const T in this.attributes)if(T.toLowerCase()===_)return void(this.attributes[T]=L);this.attributes[v]=L}else this.attributes[v]=L}hasField(v){const L=v.toLowerCase();if(void 0!==this.attributes[v])return!0;for(const _ in this.attributes)if(_.toLowerCase()===L)return!0;return!!this._hasFieldDefinition(L)}keys(){let v=[];const L={};for(const _ in this.attributes)v.push(_),L[_.toLowerCase()]=1;if(null!==this._layer)for(let _=0;_<this._layer.fields.length;_++){const T=this._layer.fields[_];1!==L[T.name.toLowerCase()]&&v.push(T.name)}return v=v.sort(),v}static parseGeometryFromDictionary(v){const L=Z._convertDictionaryToJson(v,!0);return void 0!==L.hasm&&(L.hasM=L.hasm,delete L.hasm),void 0!==L.hasz&&(L.hasZ=L.hasz,delete L.hasz),void 0!==L.spatialreference&&(L.spatialReference=L.spatialreference,delete L.spatialreference),void 0!==L.rings&&(L.rings=this._fixPathArrays(L.rings,!0===L.hasZ,!0===L.hasZ)),void 0!==L.paths&&(L.paths=this._fixPathArrays(L.paths,!0===L.hasZ,!0===L.hasM)),void 0!==L.points&&(L.points=this._fixPointArrays(L.points,!0===L.hasZ,!0===L.hasM)),(0,ee.im)(L)}static _fixPathArrays(v,L,_){const T=[];if(v instanceof Array)for(let y=0;y<v.length;y++)T.push(this._fixPointArrays(v[y],L,_));else if(v instanceof V.Z)for(let y=0;y<v.length();y++)T.push(this._fixPointArrays(v.get(y),L,_));return T}static _fixPointArrays(v,L,_){const T=[];if(v instanceof Array)for(let y=0;y<v.length;y++){const f=v[y];T.push(f instanceof Q.Z?L&&_?[f.x,f.y,f.z,f.m]:L?[f.x,f.y,f.z]:_?[f.x,f.y,f.m]:[f.x,f.y]:f instanceof V.Z?f.toArray():f)}else if(v instanceof V.Z)for(let y=0;y<v.length();y++){const f=v.get(y);T.push(f instanceof Q.Z?L&&_?[f.x,f.y,f.z,f.m]:L?[f.x,f.y,f.z]:_?[f.x,f.y,f.m]:[f.x,f.y]:f instanceof V.Z?f.toArray():f)}return T}static _convertDictionaryToJson(v,L=!1){const _={};for(const T in v.attributes){let y=v.attributes[T];y instanceof b.Z&&(y=Z._convertDictionaryToJson(y)),L?_[T.toLowerCase()]=y:_[T]=y}return _}static parseAttributesFromDictionary(v){const L={};for(const _ in v.attributes){const T=v.attributes[_];if(!(0,w.f)(T))throw new K.aV(null,K.rH.InvalidParameter,null);L[_]=T}return L}static fromJson(v,L){let _=null;null!=v.geometry&&(_=(0,ee.im)(v.geometry));const T={};if(null!=v.attributes)for(const y in v.attributes){const f=v.attributes[y];if(null===f)T[y]=f;else{if(!((0,w.c)(f)||(0,w.b)(f)||(0,w.a)(f)||(0,w.k)(f)))throw new K.aV(null,K.rH.InvalidParameter,null);T[y]=f}}return Z.createFromGraphicLikeObject(_,T,null,L??null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const v=this._layer.gdbVersion;return void 0===v?"":""===v&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":v}castAsJson(v){const L={attributes:{},geometry:!0===v?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const _ in this.attributes){const T=this.attributes[_];void 0!==T&&(L.attributes[_]=(0,w.d)(T,v))}return L}castAsJsonAsync(v=null,L){var _=this;return(0,W.Z)(function*(){return _.castAsJson(L)})()}}},55583:(be,me,j)=>{j.d(me,{Bx:()=>w,Rm:()=>b,Vg:()=>D,aq:()=>V});var W=j(30801);class b{constructor(){}}function V(Q,ee,R){if(Q instanceof b&&!(Q instanceof D)){const U=new D;return U.fn=Q,U.parameterEvaluator=R,U.context=ee,U}return Q}class w extends b{constructor(ee){super(),this.fn=ee}createFunction(ee){return(...R)=>this.fn(ee,{preparsed:!0,arguments:R})}call(ee,R){return this.fn(ee,R)}marshalledCall(ee,R,U,N){return N(ee,R,(K,M,Z)=>{Z=Z.map(v=>v instanceof b&&!(v instanceof D)?V(v,ee,N):v);const te=this.call(U,{args:Z});return(0,W.y8)(te)?te.then(v=>V(v,U,N)):te})}}class D extends b{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(ee){return this.fn.createFunction(this.context)}call(ee,R){return this.fn.marshalledCall(ee,R,this.context,this.parameterEvaluator)}marshalledCall(ee,R,U){return this.fn.marshalledCall(ee,R,this.context,this.parameterEvaluator)}}},98909:(be,me,j)=>{j.d(me,{Z:()=>W});class W{constructor(V=[]){this._elements=V}length(){return this._elements.length}get(V){return this._elements[V]}toArray(){const V=[];for(let w=0;w<this.length();w++)V.push(this.get(w));return V}}},73085:(be,me,j)=>{j.d(me,{Z:()=>V});var W=j(98909),b=j(69545);class V extends W.Z{constructor(D,Q,ee,R,U){super(D),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=ee,this._hasM=R,this._spRef=Q,this._cacheId=U}get(D){if(void 0===this._lazyPath[D]){const Q=this._elements[D];if(void 0===Q)return;this._lazyPath[D]=new b.Z(Q,this._spRef,this._hasZ,this._hasM,this._cacheId,D)}return this._lazyPath[D]}equalityTest(D){return D===this||null!==D&&D instanceof V&&D.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}},69545:(be,me,j)=>{j.d(me,{Z:()=>V});var W=j(98909),b=j(35787);class V extends W.Z{constructor(D,Q,ee,R,U,N){super(D),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=Q,this._hasZ=ee,this._hasM=R,this._cacheId=U,this._partId=N}get(D){if(void 0===this._lazyPt[D]){const Q=this._elements[D];if(void 0===Q)return;const ee=this._hasZ,R=this._hasM;let U=null;U=ee&&!R?new b.Z(Q[0],Q[1],Q[2],void 0,this._spRef):R&&!ee?new b.Z(Q[0],Q[1],void 0,Q[2],this._spRef):ee&&R?new b.Z(Q[0],Q[1],Q[2],Q[3],this._spRef):new b.Z(Q[0],Q[1],this._spRef),U.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+D.toString(),this._lazyPt[D]=U}return this._lazyPt[D]}equalityTest(D){return D===this||null!==D&&D instanceof V&&D.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}},68621:(be,me,j)=>{j.d(me,{nu:()=>U}),j(82734);var b=j(19346),D=(j(27655),j(64626),j(8127));class U{constructor(){this.dateTimeReferenceMetaData=null,this._fieldTimeZoneIndex={},this._fieldIndex=null,this._ianaPreferred=null,this._ianaTimeInfo=null,this._ianaEditFields=null,this._ianaLayerDateFields=null}static create(K,M){const Z=new U;return Z.dateTimeReferenceMetaData=M,Z._fieldIndex=K instanceof b.Z?K:new b.Z(K),Z}static createFromLayer(K){if(!K)return null;if(!K.fieldsIndex)return!K.declaredClass&&K.fields?U.create(K.fields,K):null;const M=new U;return M._fieldIndex=K.fieldsIndex,M.dateTimeReferenceMetaData={timeInfo:K?.timeInfo?.toJSON()??null,editFieldsInfo:K?.editFieldsInfo?.toJSON()??null,dateFieldsTimeReference:K?.dateFieldsTimeReference?.toJSON()??null,preferredTimeReference:K?.preferredTimeReference?.toJSON()??null,datesInUnknownTimezone:!0===K?.datesInUnknownTimezone},M}fieldTimeZone(K){const M=this._fieldIndex?.get(K);if(!M||"date"!==M.type&&"esriFieldTypeDate"!==M.type)return null;const Z=this._fieldTimeZoneIndex[M.name];if(void 0!==Z)return Z;const te=[{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.creationDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.editFieldsInfo?.editDateField,timeReference:this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.startTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone},{field:this.dateTimeReferenceMetaData?.timeInfo?.endTimeField,timeReference:this.dateTimeReferenceMetaData?.timeInfo?.timeReference,isunknown:!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone}];for(const L of te)if(L.field===M.name){const _=this.convertToIANA(L.timeReference,L.isunknown);return this._fieldTimeZoneIndex[M.name]=_,_}const v=this.convertToIANA(this.dateTimeReferenceMetaData?.dateFieldsTimeReference,this.dateTimeReferenceMetaData?.datesInUnknownTimezone);return this._fieldTimeZoneIndex[M.name]=v,v}convertToIANA(K,M){return M?"unknown":function R(N){return N?.timeZoneIANA?N?.timeZoneIANA:N?.timeZone?(0,D.G)(N,""):""}(K)}get layerPreferredTimeZone(){if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";const K=this.dateTimeReferenceMetaData?.preferredTimeReference;return this._ianaPreferred=this.convertToIANA(K,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaPreferred}get layerTimeInfoTimeZone(){if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";const K=this.dateTimeReferenceMetaData?.timeInfo?.timeReference;return this._ianaTimeInfo=this.convertToIANA(K,!1),this._ianaTimeInfo}get layerEditFieldsTimeZone(){if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";const K=this.dateTimeReferenceMetaData?.editFieldsInfo?.dateFieldsTimeReference;return this._ianaEditFields=this.convertToIANA(K,this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaEditFields}get layerDateFieldsTimeZone(){if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";const K=this.dateTimeReferenceMetaData?.dateFieldsTimeReference;return this._ianaLayerDateFields=this.convertToIANA(K,!0===this.dateTimeReferenceMetaData?.datesInUnknownTimezone),this._ianaLayerDateFields}}},43918:(be,me,j)=>{var W,v;j.d(me,{Hy:()=>U,OF:()=>ee,TD:()=>K,Tu:()=>Z,VO:()=>N,aV:()=>D,kq:()=>R,rH:()=>W}),(v=W||(W={})).AsyncNotEnabled="AsyncNotEnabled",v.ModulesNotSupported="ModulesNotSupported",v.CircularModules="CircularModules",v.NeverReach="NeverReach",v.UnsupportedHashType="UnsupportedHashType",v.InvalidParameter="InvalidParameter",v.UnexpectedToken="UnexpectedToken",v.Unrecognised="Unrecognised",v.UnrecognisedType="UnrecognisedType",v.MaximumCallDepth="MaximumCallDepth",v.BooleanConditionRequired="BooleanConditionRequired",v.TypeNotAllowedInFeature="TypeNotAllowedInFeature",v.KeyMustBeString="KeyMustBeString",v.WrongNumberOfParameters="WrongNumberOfParameters",v.CallNonFunction="CallNonFunction",v.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",v.NoFunctionInDictionary="NoFunctionInDictionary",v.NoFunctionInArray="NoFunctionInArray",v.AssignModuleFunction="AssignModuleFunction",v.LogicExpressionOrAnd="LogicExpressionOrAnd",v.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",v.FuncionNotFound="FunctionNotFound",v.InvalidMemberAccessKey="InvalidMemberAccessKey",v.UnsupportedUnaryOperator="UnsupportUnaryOperator",v.InvalidIdentifier="InvalidIdentifier",v.MemberOfNull="MemberOfNull",v.UnsupportedOperator="UnsupportedOperator",v.Cancelled="Cancelled",v.ModuleAccessorMustBeString="ModuleAccessorMustBeString",v.ModuleExportNotFound="ModuleExportNotFound",v.Immutable="Immutable",v.OutOfBounds="OutOfBounds",v.IllegalResult="IllegalResult",v.FieldNotFound="FieldNotFound",v.PortalRequired="PortalRequired",v.LogicError="LogicError",v.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",v.KeyAccessorMustBeString="KeyAccessorMustBeString",v.WrongSpatialReference="WrongSpatialReference";const b={[W.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[W.LogicError]:"Logic error - {reason}",[W.NeverReach]:"Encountered unreachable logic",[W.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[W.ModuleAccessorMustBeString]:"Module accessor must be a string",[W.ModuleExportNotFound]:"Module has no export with provided identifier",[W.ModulesNotSupported]:"Current profile does not support modules",[W.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[W.FuncionNotFound]:"Function not found",[W.FieldNotFound]:"Key not found - {key}",[W.CircularModules]:"Circular module dependencies are not allowed",[W.Cancelled]:"Execution cancelled",[W.UnsupportedHashType]:"Type not supported in hash function",[W.IllegalResult]:"Value is not a supported return type",[W.PortalRequired]:"Portal is required",[W.InvalidParameter]:"Invalid parameter",[W.WrongNumberOfParameters]:"Call with wrong number of parameters",[W.Unrecognised]:"Unrecognised code structure",[W.UnrecognisedType]:"Unrecognised type",[W.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[W.BooleanConditionRequired]:"Conditions must use booleans",[W.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[W.NoFunctionInArray]:"Arrays cannot contain functions.",[W.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[W.KeyAccessorMustBeString]:"Accessor must be a string",[W.KeyMustBeString]:"Object keys must be a string",[W.Immutable]:"Object is immutable",[W.InvalidParameter]:"Invalid parameter",[W.UnexpectedToken]:"Unexpected token",[W.MemberOfNull]:"Cannot access property of null object",[W.MaximumCallDepth]:"Exceeded maximum function depth",[W.OutOfBounds]:"Out of bounds",[W.InvalidIdentifier]:"Identifier not recognised",[W.FuncionNotFound]:"Function not found",[W.CallNonFunction]:"Expression is not a function",[W.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[W.AssignModuleFunction]:"Cannot assign function to module variable",[W.UnsupportedUnaryOperator]:"Unsupported unary operator",[W.UnsupportedOperator]:"Unsupported operator",[W.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[W.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&"};class V extends Error{constructor(...L){super(...L)}}class w extends V{constructor(L,_){super(Q(_)+L.message,{cause:L}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,w),_&&_.loc&&(this.loc=_.loc)}}class D extends Error{constructor(L,_,T,y){super("Execution error - "+Q(T)+U(b[_],y)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,D),T&&T.loc&&(this.loc=T.loc)}}function Q(v){return v&&v.loc?`Line : ${v.loc.start?.line}, ${v.loc.start?.column}: `:""}class ee extends Error{constructor(L,_,T,y){super("Compilation error - "+Q(T)+U(b[_],y)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,ee),T&&T.loc&&(this.loc=T.loc)}}class R extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,R)}}function U(v,L){try{if(!L)return v;for(const _ in L){let T=L[_];T||(T=""),v=v.replace("{"+_+"}",L[_])}}catch{}return v}function N(v,L,_){return"esri.arcade.arcadeexecutionerror"===_.declaredRootClass||"esri.arcade.arcadecompilationerror"===_.declaredRootClass?null===_.loc&&L&&L.loc?new w(_,{cause:_}):_:L&&L.loc?new w(_,{cause:_}):_}var K;!function(v){v.UnrecognisedUri="UnrecognisedUri",v.UnsupportedUriProtocol="UnsupportedUriProtocol"}(K||(K={}));const M={[K.UnrecognisedUri]:"Unrecognised uri - {uri}",[K.UnsupportedUriProtocol]:"Unrecognised uri protocol"};class Z extends Error{constructor(L,_){super(U(M[L],_)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,Z)}}},84940:(be,me,j)=>{j.d(me,{Bj:()=>w,EI:()=>L,HD:()=>R,JW:()=>Q,J_:()=>M,Lz:()=>T,NP:()=>Z,Qk:()=>E,SV:()=>_,Sh:()=>ee,US:()=>P,dj:()=>D,hd:()=>Y,hj:()=>N,q2:()=>z,tI:()=>f,tt:()=>te,yE:()=>H});var w,D,G,W=j(82734),b=j(10465),V=j(23973);function Q(G){return V.Z.fromJSON(G.toJSON())}function ee(G){return G.toJSON?G.toJSON():G}function R(G){return"string"==typeof G||G instanceof String}function N(G){return"number"==typeof G}function M(G){return G instanceof Date}function Z(G){return G instanceof W.iG}function te(G,re){return G===re||!(!M(G)&&!Z(G)||!M(re)&&!Z(re))&&G.getTime()===re.getTime()}function L(G){if(null==G)return null;if("number"==typeof G)return G;switch(G.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function _(G){if(null==G)return null;switch(G.type){case"polygon":case"multipoint":case"polyline":return G.extent;case"point":return new b.Z({xmin:G.x,ymin:G.y,xmax:G.x,ymax:G.y,spatialReference:G.spatialReference});case"extent":return G}return null}function T(G){if(null==G)return null;if("number"==typeof G||"number"==typeof G)return G;switch(G.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(G=w||(w={}))[G.Standardised=0]="Standardised",G[G.StandardisedNoInterval=1]="StandardisedNoInterval",G[G.SqlServer=2]="SqlServer",G[G.Oracle=3]="Oracle",G[G.Postgres=4]="Postgres",G[G.PGDB=5]="PGDB",G[G.FILEGDB=6]="FILEGDB",G[G.NotEvaluated=7]="NotEvaluated",function(G){G[G.InFeatureSet=0]="InFeatureSet",G[G.NotInFeatureSet=1]="NotInFeatureSet",G[G.Unknown=2]="Unknown"}(D||(D={}));const f=1e3,E={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},z={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},H={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function P(G){return void 0===G?"":G=(G=(G=G.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function Y(G,re){re||(re={}),"function"==typeof re&&(re={cmp:re});const ue="boolean"==typeof re.cycles&&re.cycles,ce=re.cmp&&(Te=re.cmp,function(de){return function(ne,pe){return Te({key:ne,value:de[ne]},{key:pe,value:de[pe]})}});var Te;const ge=[];return function de(ne){if(ne&&ne.toJSON&&"function"==typeof ne.toJSON&&(ne=ne.toJSON()),void 0===ne)return;if("number"==typeof ne)return isFinite(ne)?""+ne:"null";if("object"!=typeof ne)return JSON.stringify(ne);let pe,we;if(Array.isArray(ne)){for(we="[",pe=0;pe<ne.length;pe++)pe&&(we+=","),we+=de(ne[pe])||"null";return we+"]"}if(null===ne)return"null";if(ge.includes(ne)){if(ue)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const _e=ge.push(ne)-1,$e=Object.keys(ne).sort(ce&&ce(ne));for(we="",pe=0;pe<$e.length;pe++){const Ye=$e[pe],Le=de(ne[Ye]);Le&&(we&&(we+=","),we+=JSON.stringify(Ye)+":"+Le)}return ge.splice(_e,1),"{"+we+"}"}(G)}},79425:(be,me,j)=>{j.d(me,{AW:()=>V,Ay:()=>Z,B9:()=>y,Es:()=>x,RI:()=>T,_R:()=>Q,nB:()=>z,s9:()=>M,ws:()=>F});var W=j(35787),b=j(76438);function V(H,h,P){return Math.sqrt((H[0]-h[0])**2+(H[1]-h[1])**2+(void 0!==H[2]&&void 0!==h[2]?(H[2]*P-h[2]*P)**2:0))}const w=[];for(const H of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const h=H[0];for(let P=1;P<H.length;P++)w[H[P]]=h}const D=[];function Q(H){return H.vcsWkid&&void 0!==w[H.vcsWkid]?D[w[H.vcsWkid]]:H.latestVcsWkid&&void 0!==w[H.latestVcsWkid]?D[w[H.latestVcsWkid]]:1}function ee(H,h,P){const Y={x:0,y:0};h&&(Y.z=0),P&&(Y.m=0);let G=0,re=H[0];for(let ue=0;ue<H.length;ue++){const ce=H[ue];if(!1===K(ce,re)){const Te=N(re,ce,h),ge=R(re,ce,h,P);ge.x*=Te,ge.y*=Te,Y.x+=ge.x,Y.y+=ge.y,h&&(ge.z*=Te,Y.z+=ge.z),P&&(ge.m*=Te,Y.m+=ge.m),G+=Te,re=ce}}return G>0?(Y.x/=G,Y.y/=G,h&&(Y.z/=G),P&&(Y.m/=G)):(Y.x=H[0][0],Y.y=H[0][1],h&&(Y.z=H[0][2]),P&&h?Y.m=H[0][3]:P&&(Y.m=H[0][2])),Y}function R(H,h,P,Y){const G={x:(H[0]+h[0])/2,y:(H[1]+h[1])/2};return P&&(G.z=(H[2]+h[2])/2),P&&Y?G.m=(H[3]+h[3])/2:Y&&(G.m=(H[2]+h[2])/2),G}function U(H,h){if(H.length<=1)return 0;let P=0;for(let Y=1;Y<H.length;Y++)P+=N(H[Y-1],H[Y],h);return P}function N(H,h,P){const Y=h[0]-H[0],G=h[1]-H[1];if(P){const re=h[2]-h[2];return Math.sqrt(Y*Y+G*G+re*re)}return Math.sqrt(Y*Y+G*G)}function K(H,h){if(H.length!==h.length)return!1;for(let P=0;P<H.length;P++)if(H[P]!==h[P])return!1;return!0}function M(H){const h={x:0,y:0,spatialReference:H.spatialReference.toJSON()},P={x:0,y:0,spatialReference:H.spatialReference.toJSON()};let Y=0,G=0;for(let re=0;re<H.paths.length;re++){if(0===H.paths[re].length)continue;const ue=U(H.paths[re],!0===H.hasZ);if(0===ue){const ce=ee(H.paths[re],!0===H.hasZ,!0===H.hasM);h.x+=ce.x,h.y+=ce.y,!0===H.hasZ&&(h.z+=ce.z),!0===H.hasM&&(h.m+=ce.m),++Y}else{const ce=ee(H.paths[re],!0===H.hasZ,!0===H.hasM);P.x+=ce.x*ue,P.y+=ce.y*ue,!0===H.hasZ&&(P.z+=ce.z*ue),!0===H.hasM&&(P.m+=ce.m*ue),G+=ue}}return G>0?(P.x/=G,P.y/=G,!0===H.hasZ&&(P.z/=G),!0===H.hasM&&(P.m/=G),new W.Z(P)):Y>0?(h.x/=Y,h.y/=Y,!0===H.hasZ&&(P.z/=Y),!0===H.hasM&&(h.m/=Y),new W.Z(h)):null}function Z(H){if(0===H.points.length)return null;let h=0,P=0,Y=0,G=0;for(let ue=0;ue<H.points.length;ue++){const ce=H.getPoint(ue);!0===ce.hasZ&&(Y+=ce.z),!0===ce.hasM&&(G+=ce.m),h+=ce.x,P+=ce.y,G+=ce.m}const re={x:h/H.points.length,y:P/H.points.length,spatialReference:null};return re.spatialReference=H.spatialReference.toJSON(),!0===H.hasZ&&(re.z=Y/H.points.length),!0===H.hasM&&(re.m=G/H.points.length),new W.Z(re)}function L(H,h,P=0){for(;H<P;)H+=h;const Y=P+h;for(;H>=Y;)H-=h;return H}function _(H,h){return Math.atan2(h.y-H.y,h.x-H.x)}function T(H,h){return L(_(H,h),2*Math.PI)*(180/Math.PI)}function y(H,h){return L(Math.PI/2-_(H,h),2*Math.PI)*(180/Math.PI)}function f(H,h,P){const Y={x:H.x-h.x,y:H.y-h.y},G={x:P.x-h.x,y:P.y-h.y};return Math.atan2(function v(H,h){return H.x*h.y-h.x*H.y}(Y,G),function te(H,h){return H.x*h.x+H.y*h.y}(Y,G))}function F(H,h,P){return L(f(H,h,P),2*Math.PI)*(180/Math.PI)}function x(H,h,P){return L(-1*f(H,h,P),2*Math.PI)*(180/Math.PI)}D[9002]=.3048,D[9003]=.3048006096012192,D[9095]=.3048007491;const E=[0,0];function z(H){for(let h=0;h<H.length;h++){const P=H[h];for(let G=0;G<P.length-1;G++){const re=P[G],ue=P[G+1];for(let ce=h+1;ce<H.length;ce++)for(let Te=0;Te<H[ce].length-1;Te++){const ge=H[ce][Te],de=H[ce][Te+1];if((0,b.UT)(re,ue,ge,de,E)&&!(E[0]===re[0]&&E[1]===re[1]||E[0]===ge[0]&&E[1]===ge[1]||E[0]===ue[0]&&E[1]===ue[1]||E[0]===de[0]&&E[1]===de[1]))return!0}}const Y=P.length;if(!(Y<3))for(let G=0;G<=Y-2;G++){const re=P[G],ue=P[G+1];for(let ce=G+2;ce<=Y-2;ce++){const Te=P[ce],ge=P[ce+1];if((0,b.UT)(re,ue,Te,ge,E)&&!(E[0]===re[0]&&E[1]===re[1]||E[0]===Te[0]&&E[1]===Te[1]||E[0]===ue[0]&&E[1]===ue[1]||E[0]===ge[0]&&E[1]===ge[1]))return!0}}}return!1}},13655:(be,me,j)=>{j.d(me,{r:()=>M});var W=j(82734),b=j(44819),V=j(43918),w=j(92051),D=j(64626);const R=[0,31,59,90,120,151,181,212,243,273,304,334],U=[0,31,60,91,121,152,182,213,244,274,305,335];function N(Z){return null===Z?Z:!1===Z.isValid?null:Z}function K(Z,te){return""===Z||"default"===Z.toLowerCase().trim()?(0,b.C)(te):Z}function M(Z,te){Z.today=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,0,0,v,L);const f=new Date;return f.setHours(0,0,0,0),W.iG.dateJSAndZoneToArcadeDate(f,(0,b.C)(v))})},Z.changetimezone=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,2,2,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));if(null===f)return null;const F=W.iG.arcadeDateAndZoneToArcadeDate(f,K((0,b.j)(y[1]),v));return!1===F.isValid?null:F})},Z.timezone=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,2,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));if(null===f)return null;const F=f.timeZone;return"system"===F?W.iG.systemTimeZoneCanonicalName:F})},Z.timezoneoffset=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?null:f.timeZoneOffset})},Z.now=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,0,0,v,L);const f=W.iG.nowToArcadeDate((0,b.C)(v));return!1===f.isValid?null:f})},Z.timestamp=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,0,0,v,L);const f=W.iG.nowUTCToArcadeDate();return!1===f.isValid?null:f})},Z.toutc=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?null:f.toUTC()})},Z.tolocal=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?null:f.toLocal()})},Z.day=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.day})},Z.month=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.monthJS})},Z.year=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.year})},Z.hour=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.hour})},Z.second=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.second})},Z.millisecond=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.millisecond})},Z.minute=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.minute})},Z.week=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,2,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));if(null===f)return NaN;const F=(0,b.g)((0,b.A)(y[1],0));if(F<0||F>6)throw new V.aV(v,V.rH.InvalidParameter,L);const H=f.dayOfWeekJS,h=function Q(Z,te,v){return Z+(function ee(Z){return Z%4==0&&(Z%100!=0||Z%400==0)}(v)?U:R)[te]}(f.day,f.monthJS,f.year)-1,P=Math.floor(h/7);return H-F+(H-F<0?7:0)<h-7*P?P+1:P})},Z.weekday=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.dayOfWeekJS})},Z.isoweekday=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.dayOfWeekISO})},Z.isomonth=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.monthISO})},Z.isoweek=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.weekISO})},Z.isoyear=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,1,1,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));return null===f?NaN:f.yearISO})},Z.date=function(v,L){return te(v,L,(_,T,y)=>{if((0,b.y)(y,0,8,v,L),3===y.length)return N(W.iG.fromParts((0,b.g)(y[0]),(0,b.g)(y[1])+1,(0,b.g)(y[2]),0,0,0,0,(0,b.C)(v)));if(4===y.length)return N(W.iG.fromParts((0,b.g)(y[0]),(0,b.g)(y[1])+1,(0,b.g)(y[2]),(0,b.g)(y[3]),0,0,0,(0,b.C)(v)));if(5===y.length)return N(W.iG.fromParts((0,b.g)(y[0]),(0,b.g)(y[1])+1,(0,b.g)(y[2]),(0,b.g)(y[3]),(0,b.g)(y[4]),0,0,(0,b.C)(v)));if(6===y.length)return N(W.iG.fromParts((0,b.g)(y[0]),(0,b.g)(y[1])+1,(0,b.g)(y[2]),(0,b.g)(y[3]),(0,b.g)(y[4]),(0,b.g)(y[5]),0,(0,b.C)(v)));if(7===y.length)return N(W.iG.fromParts((0,b.g)(y[0]),(0,b.g)(y[1])+1,(0,b.g)(y[2]),(0,b.g)(y[3]),(0,b.g)(y[4]),(0,b.g)(y[5]),(0,b.g)(y[6]),(0,b.C)(v)));if(8===y.length)return N(W.iG.fromParts((0,b.g)(y[0]),(0,b.g)(y[1])+1,(0,b.g)(y[2]),(0,b.g)(y[3]),(0,b.g)(y[4]),(0,b.g)(y[5]),(0,b.g)(y[6]),K((0,b.j)(y[7]),v)));if(2===y.length){let f,F=(0,b.j)(y[1]);return""===F?null:(F=(0,b.D)(F),f="X"===F?D.ou.fromSeconds((0,b.g)(y[0])):"x"===F?D.ou.fromMillis((0,b.g)(y[0])):D.ou.fromFormat((0,b.j)(y[0]),F,{locale:(0,w.Kd)(),numberingSystem:"latn"}),f.isValid?W.iG.dateTimeToArcadeDate(f):null)}if(1===y.length){if((0,b.c)(y[0])){if(""===y[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(y[0]))return(0,b.l)(y[0]+"-01-01",(0,b.C)(v))}const f=(0,b.g)(y[0]);if(!1===isNaN(f)){const F=D.ou.fromMillis(f);return F.isValid?W.iG.dateTimeAndZoneToArcadeDate(F,(0,b.C)(v)):null}return(0,b.l)(y[0],(0,b.C)(v))}return 0===y.length?W.iG.nowToArcadeDate((0,b.C)(v)):null})},Z.datediff=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,2,4,v,L);let f=(0,b.l)(y[0],(0,b.C)(v)),F=(0,b.l)(y[1],(0,b.C)(v));if(null===f||null===F)return NaN;let x=(0,b.A)(y[3],"");switch(""!==x&&null!==x?(x=(0,b.j)(x),f=W.iG.arcadeDateAndZoneToArcadeDate(f,x),F=W.iG.arcadeDateAndZoneToArcadeDate(F,x)):f.timeZone!==F.timeZone&&(f.isUnknownTimeZone?f=W.iG.arcadeDateAndZoneToArcadeDate(f,F.timeZone):F=W.iG.arcadeDateAndZoneToArcadeDate(F,f.timeZone)),(0,b.j)(y[2]).toLowerCase()){case"days":case"day":case"d":return f.diff(F,"days");case"months":case"month":return f.diff(F,"months");case"minutes":case"minute":case"m":return f.diff(F,"M"===y[2]?"months":"minutes");case"seconds":case"second":case"s":return f.diff(F,"seconds");case"milliseconds":case"millisecond":case"ms":default:return f.diff(F);case"hours":case"hour":case"h":return f.diff(F,"hours");case"years":case"year":case"y":return f.diff(F,"years")}})},Z.dateadd=function(v,L){return te(v,L,(_,T,y)=>{(0,b.y)(y,2,3,v,L);const f=(0,b.l)(y[0],(0,b.C)(v));if(null===f)return null;let F=(0,b.g)(y[1]);if(isNaN(F))return f;let x="milliseconds";switch((0,b.j)(y[2]).toLowerCase()){case"days":case"day":case"d":x="days",F=(0,b.E)(F);break;case"months":case"month":x="months",F=(0,b.E)(F);break;case"minutes":case"minute":case"m":x="M"===y[2]?"months":"minutes";break;case"seconds":case"second":case"s":x="seconds";break;case"milliseconds":case"millisecond":case"ms":x="milliseconds";break;case"hours":case"hour":case"h":x="hours";break;case"years":case"year":case"y":x="years"}return f.plus({[x]:F})})}}},69231:(be,me,j)=>{j.d(me,{t:()=>ee});var W=j(44819);function b(R){let U=0;for(let N=0;N<R.length;N++)U+=R[N];return U/R.length}function V(R){const U=b(R);let N=0;for(let K=0;K<R.length;K++)N+=(U-R[K])**2;return N/R.length}function ee(R,U,N=1e3){switch(R.toLowerCase()){case"distinct":return function D(R,U){const N=[],K={},M=[];for(let Z=0;Z<R.length;Z++){if(null!=R[Z]&&R[Z]!==W.v){const te=R[Z];if((0,W.b)(te)||(0,W.c)(te))void 0===K[te]&&(N.push(te),K[te]=1);else{let v=!1;for(let L=0;L<M.length;L++)!0===(0,W.s)(M[L],te)&&(v=!0);!1===v&&(M.push(te),N.push(te))}}if(N.length>=U&&-1!==U)return N}return N}(U,N);case"avg":case"mean":return b((0,W.V)(U));case"min":return Math.min.apply(Math,(0,W.V)(U));case"sum":return function w(R){let U=0;for(let N=0;N<R.length;N++)U+=R[N];return U}((0,W.V)(U));case"max":return Math.max.apply(Math,(0,W.V)(U));case"stdev":case"stddev":return Math.sqrt(V((0,W.V)(U)));case"var":case"variance":return V((0,W.V)(U));case"count":return U.length}return 0}},24874:(be,me,j)=>{j.d(me,{Z:()=>y,r:()=>_});var W=j(27500),b=j(26214),V=j(69545),w=j(44819),D=j(10465),Q=j(70535),ee=j(23675),R=j(35787),U=j(55733),N=j(7913),K=j(79425),M=j(71182),Z=j(43918),te=j(73085),v=j(12818);function L(f){return f&&"esri.arcade.Feature"===f.arcadeDeclaredClass}function _(f,F){f.ringisclockwise=function(x,E){return F(x,E,(z,H,h)=>{(0,w.y)(h,1,1,x,E);let P=[],Y=!1,G=!1;if(null===h[0])return!1;if((0,w.m)(h[0])){for(const re of h[0]){if(!(re instanceof R.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);P.push(re.hasZ?re.hasM?[re.x,re.y,re.z,re.m]:[re.x,re.y,re.z]:[re.x,re.y])}P.length>0&&(Y=h[0][0].hasZ,G=h[0][0].hasM)}else if(h[0]instanceof V.Z)P=h[0]._elements,P.length>0&&(Y=h[0]._hasZ,G=h[0]._hasM);else{if(!(0,w.x)(h[0]))throw new Z.aV(x,Z.rH.InvalidParameter,E);for(const re of h[0].toArray()){if(!(re instanceof R.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);P.push(re.hasZ?re.hasM?[re.x,re.y,re.z,re.m]:[re.x,re.y,re.z]:[re.x,re.y])}P.length>0&&(Y=h[0].get(0).hasZ,G=h[0].get(0).hasM)}return!(P.length<3)&&(0,v.bu)(P,G,Y)})},f.polygon=function(x,E){return F(x,E,(z,H,h)=>{(0,w.y)(h,1,1,x,E);let P=null;if(h[0]instanceof W.Z){if(P=(0,w.q)(b.Z.parseGeometryFromDictionary(h[0]),x.spatialReference),!(P instanceof U.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E)}else P=h[0]instanceof U.Z?(0,M.im)(h[0].toJSON()):(0,w.q)(new U.Z(JSON.parse(h[0])),x.spatialReference);if(null!==P&&!1===P.spatialReference.equals(x.spatialReference))throw new Z.aV(x,Z.rH.WrongSpatialReference,E);return(0,w.F)(P)})},f.polyline=function(x,E){return F(x,E,(z,H,h)=>{(0,w.y)(h,1,1,x,E);let P=null;if(h[0]instanceof W.Z){if(P=(0,w.q)(b.Z.parseGeometryFromDictionary(h[0]),x.spatialReference),!(P instanceof N.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E)}else P=h[0]instanceof N.Z?(0,M.im)(h[0].toJSON()):(0,w.q)(new N.Z(JSON.parse(h[0])),x.spatialReference);if(null!==P&&!1===P.spatialReference.equals(x.spatialReference))throw new Z.aV(x,Z.rH.WrongSpatialReference,E);return(0,w.F)(P)})},f.point=function(x,E){return F(x,E,(z,H,h)=>{(0,w.y)(h,1,1,x,E);let P=null;if(h[0]instanceof W.Z){if(P=(0,w.q)(b.Z.parseGeometryFromDictionary(h[0]),x.spatialReference),!(P instanceof R.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E)}else P=h[0]instanceof R.Z?(0,M.im)(h[0].toJSON()):(0,w.q)(new R.Z(JSON.parse(h[0])),x.spatialReference);if(null!==P&&!1===P.spatialReference.equals(x.spatialReference))throw new Z.aV(x,Z.rH.WrongSpatialReference,E);return(0,w.F)(P)})},f.multipoint=function(x,E){return F(x,E,(z,H,h)=>{(0,w.y)(h,1,1,x,E);let P=null;if(h[0]instanceof W.Z){if(P=(0,w.q)(b.Z.parseGeometryFromDictionary(h[0]),x.spatialReference),!(P instanceof ee.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E)}else P=h[0]instanceof ee.Z?(0,M.im)(h[0].toJSON()):(0,w.q)(new ee.Z(JSON.parse(h[0])),x.spatialReference);if(null!==P&&!1===P.spatialReference.equals(x.spatialReference))throw new Z.aV(x,Z.rH.WrongSpatialReference,E);return(0,w.F)(P)})},f.extent=function(x,E){return F(x,E,(z,H,h)=>{h=(0,w.G)(h),(0,w.y)(h,1,1,x,E);let P=null;if(h[0]instanceof W.Z)P=(0,w.q)(b.Z.parseGeometryFromDictionary(h[0]),x.spatialReference);else if(h[0]instanceof R.Z){const Y={xmin:h[0].x,ymin:h[0].y,xmax:h[0].x,ymax:h[0].y,spatialReference:h[0].spatialReference.toJSON()},G=h[0];G.hasZ?(Y.zmin=G.z,Y.zmax=G.z):G.hasM&&(Y.mmin=G.m,Y.mmax=G.m),P=(0,M.im)(Y)}else P=h[0]instanceof U.Z||h[0]instanceof N.Z||h[0]instanceof ee.Z?(0,M.im)(h[0].extent?.toJSON()):h[0]instanceof D.Z?(0,M.im)(h[0].toJSON()):(0,w.q)(new D.Z(JSON.parse(h[0])),x.spatialReference);if(null!==P&&!1===P.spatialReference.equals(x.spatialReference))throw new Z.aV(x,Z.rH.WrongSpatialReference,E);return(0,w.F)(P)})},f.geometry=function(x,E){return F(x,E,(z,H,h)=>{(0,w.y)(h,1,1,x,E);let P=null;if(null===h[0])return null;if(P=L(h[0])?(0,w.q)(h[0].geometry(),x.spatialReference):(0,w.q)(h[0]instanceof W.Z?b.Z.parseGeometryFromDictionary(h[0]):(0,M.im)(JSON.parse(h[0])),x.spatialReference),null!==P&&!1===P.spatialReference.equals(x.spatialReference))throw new Z.aV(x,Z.rH.WrongSpatialReference,E);return(0,w.F)(P)})},f.setgeometry=function(x,E){return F(x,E,(z,H,h)=>{if((0,w.y)(h,2,2,x,E),!L(h[0]))throw new Z.aV(x,Z.rH.InvalidParameter,E);if(!0===h[0].immutable)throw new Z.aV(x,Z.rH.Immutable,E);if(!(h[1]instanceof Q.Z||null===h[1]))throw new Z.aV(x,Z.rH.InvalidParameter,E);return h[0]._geometry=h[1],w.v})},f.feature=function(x,E){return F(x,E,(z,H,h)=>{if(0===h.length)throw new Z.aV(x,Z.rH.WrongNumberOfParameters,E);let P=null;if(1===h.length)if((0,w.c)(h[0]))P=b.Z.fromJson(JSON.parse(h[0]),x.timeReference);else if(L(h[0]))P=b.Z.createFromArcadeFeature(h[0]);else if(h[0]instanceof Q.Z)P=b.Z.createFromGraphicLikeObject(h[0],null,null,x.timeReference);else{if(!(h[0]instanceof W.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);{let Y=h[0].hasField("geometry")?h[0].field("geometry"):null,G=h[0].hasField("attributes")?h[0].field("attributes"):null;null!==Y&&Y instanceof W.Z&&(Y=b.Z.parseGeometryFromDictionary(Y)),null!==G&&(G=b.Z.parseAttributesFromDictionary(G)),P=b.Z.createFromGraphicLikeObject(Y,G,null,x.timeReference)}}else if(2===h.length){let Y=null,G=null;if(null!==h[0])if(h[0]instanceof Q.Z)Y=h[0];else{if(!(Y instanceof W.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);Y=b.Z.parseGeometryFromDictionary(h[0])}if(null!==h[1]){if(!(h[1]instanceof W.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);G=b.Z.parseAttributesFromDictionary(h[1])}P=b.Z.createFromGraphicLikeObject(Y,G,null,x.timeReference)}else{let Y=null;const G={};if(null!==h[0])if(h[0]instanceof Q.Z)Y=h[0];else{if(!(Y instanceof W.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);Y=b.Z.parseGeometryFromDictionary(h[0])}for(let re=1;re<h.length;re+=2){const ue=(0,w.j)(h[re]),ce=h[re+1];if(!(null==ce||(0,w.c)(ce)||isNaN(ce)||(0,w.k)(ce)||(0,w.b)(ce)||(0,w.a)(ce)))throw new Z.aV(x,Z.rH.InvalidParameter,E);if((0,w.i)(ce)||!1===(0,w.f)(ce))throw new Z.aV(x,Z.rH.InvalidParameter,E);G[ue]=ce===w.v?null:ce}P=b.Z.createFromGraphicLikeObject(Y,G,null,x.timeReference)}return P._geometry=(0,w.q)(P.geometry(),x.spatialReference),P.immutable=!1,P})},f.dictionary=function(x,E){return F(x,E,(z,H,h)=>{if(0===h.length){const G=new W.Z;return G.immutable=!1,G}if(1===h.length&&(0,w.c)(h[0]))try{const G=JSON.parse(h[0]),re=W.Z.convertObjectToArcadeDictionary(G,(0,w.C)(x),!1);return re.immutable=!1,re}catch{throw new Z.aV(x,Z.rH.InvalidParameter,E)}if(h.length%2!=0)throw new Z.aV(x,Z.rH.WrongNumberOfParameters,E);const P={};for(let G=0;G<h.length;G+=2){const re=(0,w.j)(h[G]),ue=h[G+1];if(!(null==ue||(0,w.c)(ue)||isNaN(ue)||(0,w.k)(ue)||(0,w.b)(ue)||(0,w.a)(ue)||(0,w.m)(ue)||(0,w.x)(ue)))throw new Z.aV(x,Z.rH.InvalidParameter,E);if((0,w.i)(ue))throw new Z.aV(x,Z.rH.InvalidParameter,E);P[re]=ue===w.v?null:ue}const Y=new W.Z(P);return Y.immutable=!1,Y})},f.haskey=function(x,E){return F(x,E,(z,H,h)=>{(0,w.y)(h,2,2,x,E);const P=(0,w.j)(h[1]);if(L(h[0])||h[0]instanceof W.Z)return h[0].hasField(P);if(h[0]instanceof Q.Z){const Y=y(h[0],P,null,null,2);return!Y||"notfound"!==Y.keystate}throw new Z.aV(x,Z.rH.InvalidParameter,E)})},f.hasvalue=function(x,E){return F(x,E,(z,H,h)=>{if((0,w.y)(h,2,2,x,E),null===h[0]||null===h[1])return!1;const P=(0,w.j)(h[1]);return(0,w.w)(h[0])||h[0]instanceof W.Z?!!h[0].hasField(P)&&null!==h[0].field(P):h[0]instanceof Q.Z&&null!==y(h[0],P,null,null,0)})},f.indexof=function(x,E){return F(x,E,(z,H,h)=>{(0,w.y)(h,2,2,x,E);const P=h[1];if((0,w.m)(h[0])){for(let Y=0;Y<h[0].length;Y++)if((0,w.s)(P,h[0][Y]))return Y;return-1}if((0,w.x)(h[0])){const Y=h[0].length();for(let G=0;G<Y;G++)if((0,w.s)(P,h[0].get(G)))return G;return-1}throw new Z.aV(x,Z.rH.InvalidParameter,E)})},f.angle=function(x,E){return F(x,E,(z,H,h)=>{if(h=(0,w.G)(h),(0,w.y)(h,2,3,x,E),!(h[0]instanceof R.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);if(!(h[1]instanceof R.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);if(h.length>2&&!(h[2]instanceof R.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);return 2===h.length?(0,K.RI)(h[0],h[1]):(0,K.ws)(h[0],h[1],h[2])})},f.bearing=function(x,E){return F(x,E,(z,H,h)=>{if(h=(0,w.G)(h),(0,w.y)(h,2,3,x,E),!(h[0]instanceof R.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);if(!(h[1]instanceof R.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);if(h.length>2&&!(h[2]instanceof R.Z))throw new Z.aV(x,Z.rH.InvalidParameter,E);return 2===h.length?(0,K.B9)(h[0],h[1]):(0,K.Es)(h[0],h[1],h[2])})},f.isselfintersecting=function(x,E){return F(x,E,(z,H,h)=>{h=(0,w.G)(h),(0,w.y)(h,1,1,x,E);let P=h[0];if(P instanceof U.Z)return P.isSelfIntersecting;if(P instanceof N.Z)return P=P.paths,(0,K.nB)(P);if(P instanceof ee.Z){const Y=P.points;for(let G=0;G<Y.length;G++)for(let re=0;re<Y.length;re++)if(re!==G){let ue=!0;for(let ce=0;ce<Y[G].length;ce++)if(Y[G][ce]!==Y[re][ce]){ue=!1;break}if(!0===ue)return!0}}return!(!(0,w.m)(P)&&!(0,w.x)(P))&&(P=(0,w.H)(P,x.spatialReference),null!==P&&(P=P.paths),(0,K.nB)(P))})}}let T=0;function y(f,F,x,E,z=1){let H;switch(F=F.toLowerCase()){case"hasz":{const h=f.hasZ;return void 0!==h&&h}case"hasm":{const h=f.hasM;return void 0!==h&&h}case"spatialreference":{let h=f.spatialReference._arcadeCacheId;if(void 0===h){let Y=!0;Object.freeze&&Object.isFrozen(f.spatialReference)&&(Y=!1),Y&&(T++,f.spatialReference._arcadeCacheId=T,h=T)}const P=new W.Z({wkt:f.spatialReference.wkt,wkid:f.spatialReference.wkid});return void 0!==h&&(P._arcadeCacheId="SPREF"+h.toString()),P}}switch(f.type){case"extent":switch(F){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const h=f[F];return void 0!==h?h:null}case"type":return"Extent"}break;case"polygon":switch(F){case"rings":return H=f.cache._arcadeCacheId,void 0===H&&(T++,H=T,f.cache._arcadeCacheId=H),new te.Z(f.rings,f.spatialReference,!0===f.hasZ,!0===f.hasM,H);case"type":return"Polygon"}break;case"point":switch(F){case"x":case"y":case"z":case"m":return void 0!==f[F]?f[F]:null;case"type":return"Point"}break;case"polyline":switch(F){case"paths":return H=f.cache._arcadeCacheId,void 0===H&&(T++,H=T,f.cache._arcadeCacheId=H),new te.Z(f.paths,f.spatialReference,!0===f.hasZ,!0===f.hasM,H);case"type":return"Polyline"}break;case"multipoint":switch(F){case"points":return H=f.cache._arcadeCacheId,void 0===H&&(T++,H=T,f.cache._arcadeCacheId=H),new V.Z(f.points,f.spatialReference,!0===f.hasZ,!0===f.hasM,H,1);case"type":return"Multipoint"}}if(1===z)throw new Z.aV(x,Z.rH.InvalidIdentifier,E);return 2===z?{keystate:"notfound"}:null}},14178:(be,me,j)=>{j.r(me),j.d(me,{registerFunctions:()=>T,setGeometryEngine:()=>L});var W=j(84489),b=j(39214),V=j(44819),w=j(79425),D=j(10465),Q=j(70535),ee=j(23675),R=j(35787),U=j(55733),N=j(7913),K=j(71182),M=j(43918),Z=j(82769);let te=null;function v(y){return 0===W.i8.indexOf("4.")?U.Z.fromExtent(y):new U.Z({spatialReference:y.spatialReference,rings:[[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]]]})}function L(y){te=y}function _(y,f){if("polygon"!==y.type&&"polyline"!==y.type&&"extent"!==y.type)return 0;let F=1;(y.spatialReference.vcsWkid||y.spatialReference.latestVcsWkid)&&(F=(0,w._R)(y.spatialReference)/(0,Z.c9)(y.spatialReference));let x=0;if("polyline"===y.type)for(const z of y.paths)for(let H=1;H<z.length;H++)x+=(0,w.AW)(z[H],z[H-1],F);else if("polygon"===y.type)for(const z of y.rings){for(let H=1;H<z.length;H++)x+=(0,w.AW)(z[H],z[H-1],F);(z[0][0]!==z[z.length-1][0]||z[0][1]!==z[z.length-1][1]||void 0!==z[0][2]&&z[0][2]!==z[z.length-1][2])&&(x+=(0,w.AW)(z[0],z[z.length-1],F))}else"extent"===y.type&&(x+=2*(0,w.AW)([y.xmin,y.ymin,0],[y.xmax,y.ymin,0],F),x+=2*(0,w.AW)([y.xmin,y.ymin,0],[y.xmin,y.ymax,0],F),x*=2,x+=4*Math.abs((0,V.A)(y.zmax,0)*F-(0,V.A)(y.zmin,0)*F));const E=new N.Z({hasZ:!1,hasM:!1,spatialReference:y.spatialReference,paths:[[0,0],[0,x]]});return te.planarLength(E,f)}function T(y,f){function F(x,E,z){if((0,V.y)(z,2,2,x,E),!(z[0]instanceof Q.Z&&z[1]instanceof Q.Z||z[0]instanceof Q.Z&&null===z[1]||z[1]instanceof Q.Z&&null===z[0]||null===z[0]&&null===z[1]))throw new M.aV(x,M.rH.InvalidParameter,E)}y.disjoint=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null===h[0]||null===h[1]||te.disjoint(h[0],h[1])))},y.intersects=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null!==h[0]&&null!==h[1]&&te.intersects(h[0],h[1])))},y.touches=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null!==h[0]&&null!==h[1]&&te.touches(h[0],h[1])))},y.crosses=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null!==h[0]&&null!==h[1]&&te.crosses(h[0],h[1])))},y.within=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null!==h[0]&&null!==h[1]&&te.within(h[0],h[1])))},y.contains=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null!==h[0]&&null!==h[1]&&te.contains(h[0],h[1])))},y.overlaps=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null!==h[0]&&null!==h[1]&&te.overlaps(h[0],h[1])))},y.equals=function(x,E){return f(x,E,(z,H,h)=>((0,V.y)(h,2,2,x,E),h[0]===h[1]||(h[0]instanceof Q.Z&&h[1]instanceof Q.Z?te.equals(h[0],h[1]):!(!(0,V.k)(h[0])||!(0,V.k)(h[1]))&&h[0].equals(h[1]))))},y.relate=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,3,3,x,E),h[0]instanceof Q.Z&&h[1]instanceof Q.Z)return te.relate(h[0],h[1],(0,V.j)(h[2]));if(h[0]instanceof Q.Z&&null===h[1]||h[1]instanceof Q.Z&&null===h[0]||null===h[0]&&null===h[1])return!1;throw new M.aV(x,M.rH.InvalidParameter,E)})},y.intersection=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null===h[0]||null===h[1]?null:te.intersect(h[0],h[1])))},y.union=function(x,E){return f(x,E,(z,H,h)=>{const P=[];if(0===(h=(0,V.G)(h)).length)throw new M.aV(x,M.rH.WrongNumberOfParameters,E);if(1===h.length)if((0,V.m)(h[0])){const Y=(0,V.G)(h[0]);for(let G=0;G<Y.length;G++)if(null!==Y[G]){if(!(Y[G]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);P.push(Y[G])}}else{if(!(0,V.x)(h[0])){if(h[0]instanceof Q.Z)return(0,V.q)((0,b.r1)(h[0]),x.spatialReference);if(null===h[0])return null;throw new M.aV(x,M.rH.InvalidParameter,E)}{const Y=(0,V.G)(h[0].toArray());for(let G=0;G<Y.length;G++)if(null!==Y[G]){if(!(Y[G]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);P.push(Y[G])}}}else for(let Y=0;Y<h.length;Y++)if(null!==h[Y]){if(!(h[Y]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);P.push(h[Y])}return 0===P.length?null:te.union(P)})},y.difference=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null!==h[0]&&null===h[1]?(0,b.r1)(h[0]):null===h[0]?null:te.difference(h[0],h[1])))},y.symmetricdifference=function(x,E){return f(x,E,(z,H,h)=>(h=(0,V.G)(h),F(x,E,h),null===h[0]&&null===h[1]?null:null===h[0]?(0,b.r1)(h[1]):null===h[1]?(0,b.r1)(h[0]):te.symmetricDifference(h[0],h[1])))},y.clip=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,2,x,E),!(h[1]instanceof D.Z)&&null!==h[1])throw new M.aV(x,M.rH.InvalidParameter,E);if(null===h[0])return null;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return null===h[1]?null:te.clip(h[0],h[1])})},y.cut=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,2,x,E),!(h[1]instanceof N.Z)&&null!==h[1])throw new M.aV(x,M.rH.InvalidParameter,E);if(null===h[0])return[];if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return null===h[1]?[(0,b.r1)(h[0])]:te.cut(h[0],h[1])})},y.area=function(x,E){return f(x,E,(z,H,h)=>{if((0,V.y)(h,1,2,x,E),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const P=(0,V.J)(h[0],x.spatialReference);return null===P?0:te.planarArea(P,(0,b.EI)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return te.planarArea(h[0],(0,b.EI)((0,V.A)(h[1],-1)))})},y.areageodetic=function(x,E){return f(x,E,(z,H,h)=>{if((0,V.y)(h,1,2,x,E),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const P=(0,V.J)(h[0],x.spatialReference);return null===P?0:te.geodesicArea(P,(0,b.EI)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return te.geodesicArea(h[0],(0,b.EI)((0,V.A)(h[1],-1)))})},y.length=function(x,E){return f(x,E,(z,H,h)=>{if((0,V.y)(h,1,2,x,E),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const P=(0,V.H)(h[0],x.spatialReference);return null===P?0:te.planarLength(P,(0,b.Lz)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return te.planarLength(h[0],(0,b.Lz)((0,V.A)(h[1],-1)))})},y.length3d=function(x,E){return f(x,E,(z,H,h)=>{if((0,V.y)(h,1,2,x,E),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const P=(0,V.H)(h[0],x.spatialReference);return null===P?0:!0===P.hasZ?_(P,(0,b.Lz)((0,V.A)(h[1],-1))):te.planarLength(P,(0,b.Lz)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return!0===h[0].hasZ?_(h[0],(0,b.Lz)((0,V.A)(h[1],-1))):te.planarLength(h[0],(0,b.Lz)((0,V.A)(h[1],-1)))})},y.lengthgeodetic=function(x,E){return f(x,E,(z,H,h)=>{if((0,V.y)(h,1,2,x,E),null===(h=(0,V.G)(h))[0])return 0;if((0,V.m)(h[0])||(0,V.x)(h[0])){const P=(0,V.H)(h[0],x.spatialReference);return null===P?0:te.geodesicLength(P,(0,b.Lz)((0,V.A)(h[1],-1)))}if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return te.geodesicLength(h[0],(0,b.Lz)((0,V.A)(h[1],-1)))})},y.distance=function(x,E){return f(x,E,(z,H,h)=>{h=(0,V.G)(h),(0,V.y)(h,2,3,x,E);let P=h[0];((0,V.m)(h[0])||(0,V.x)(h[0]))&&(P=(0,V.K)(h[0],x.spatialReference));let Y=h[1];if(((0,V.m)(h[1])||(0,V.x)(h[1]))&&(Y=(0,V.K)(h[1],x.spatialReference)),!(P instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);if(!(Y instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return te.distance(P,Y,(0,b.Lz)((0,V.A)(h[2],-1)))})},y.distancegeodetic=function(x,E){return f(x,E,(z,H,h)=>{h=(0,V.G)(h),(0,V.y)(h,2,3,x,E);const P=h[0],Y=h[1];if(!(P instanceof R.Z))throw new M.aV(x,M.rH.InvalidParameter,E);if(!(Y instanceof R.Z))throw new M.aV(x,M.rH.InvalidParameter,E);const G=new N.Z({paths:[],spatialReference:P.spatialReference});return G.addPath([P,Y]),te.geodesicLength(G,(0,b.Lz)((0,V.A)(h[2],-1)))})},y.densify=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,x,E),null===h[0])return null;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);const P=(0,V.g)(h[1]);if(isNaN(P))throw new M.aV(x,M.rH.InvalidParameter,E);if(P<=0)throw new M.aV(x,M.rH.InvalidParameter,E);return h[0]instanceof U.Z||h[0]instanceof N.Z?te.densify(h[0],P,(0,b.Lz)((0,V.A)(h[2],-1))):h[0]instanceof D.Z?te.densify(v(h[0]),P,(0,b.Lz)((0,V.A)(h[2],-1))):h[0]})},y.densifygeodetic=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,x,E),null===h[0])return null;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);const P=(0,V.g)(h[1]);if(isNaN(P))throw new M.aV(x,M.rH.InvalidParameter,E);if(P<=0)throw new M.aV(x,M.rH.InvalidParameter,E);return h[0]instanceof U.Z||h[0]instanceof N.Z?te.geodesicDensify(h[0],P,(0,b.Lz)((0,V.A)(h[2],-1))):h[0]instanceof D.Z?te.geodesicDensify(v(h[0]),P,(0,b.Lz)((0,V.A)(h[2],-1))):h[0]})},y.generalize=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,4,x,E),null===h[0])return null;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);const P=(0,V.g)(h[1]);if(isNaN(P))throw new M.aV(x,M.rH.InvalidParameter,E);return te.generalize(h[0],P,(0,V.h)((0,V.A)(h[2],!0)),(0,b.Lz)((0,V.A)(h[3],-1)))})},y.buffer=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,x,E),null===h[0])return null;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);const P=(0,V.g)(h[1]);if(isNaN(P))throw new M.aV(x,M.rH.InvalidParameter,E);return 0===P?(0,b.r1)(h[0]):te.buffer(h[0],P,(0,b.Lz)((0,V.A)(h[2],-1)))})},y.buffergeodetic=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,3,x,E),null===h[0])return null;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);const P=(0,V.g)(h[1]);if(isNaN(P))throw new M.aV(x,M.rH.InvalidParameter,E);return 0===P?(0,b.r1)(h[0]):te.geodesicBuffer(h[0],P,(0,b.Lz)((0,V.A)(h[2],-1)))})},y.offset=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,2,6,x,E),null===h[0])return null;if(!(h[0]instanceof U.Z||h[0]instanceof N.Z))throw new M.aV(x,M.rH.InvalidParameter,E);const P=(0,V.g)(h[1]);if(isNaN(P))throw new M.aV(x,M.rH.InvalidParameter,E);const Y=(0,V.g)((0,V.A)(h[4],10));if(isNaN(Y))throw new M.aV(x,M.rH.InvalidParameter,E);const G=(0,V.g)((0,V.A)(h[5],0));if(isNaN(G))throw new M.aV(x,M.rH.InvalidParameter,E);return te.offset(h[0],P,(0,b.Lz)((0,V.A)(h[2],-1)),(0,V.j)((0,V.A)(h[3],"round")).toLowerCase(),Y,G)})},y.rotate=function(x,E){return f(x,E,(z,H,h)=>{h=(0,V.G)(h),(0,V.y)(h,2,3,x,E);let P=h[0];if(null===P)return null;if(!(P instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);P instanceof D.Z&&(P=U.Z.fromExtent(P));const Y=(0,V.g)(h[1]);if(isNaN(Y))throw new M.aV(x,M.rH.InvalidParameter,E);const G=(0,V.A)(h[2],null);if(null===G)return te.rotate(P,Y);if(G instanceof R.Z)return te.rotate(P,Y,G);throw new M.aV(x,M.rH.InvalidParameter,E)})},y.centroid=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,x,E),null===h[0])return null;let P=h[0];if(((0,V.m)(h[0])||(0,V.x)(h[0]))&&(P=(0,V.K)(h[0],x.spatialReference)),null===P)return null;if(!(P instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return P instanceof R.Z?(0,V.q)((0,b.r1)(h[0]),x.spatialReference):P instanceof U.Z?P.centroid:P instanceof N.Z?(0,w.s9)(P):P instanceof ee.Z?(0,w.Ay)(P):P instanceof D.Z?P.center:null})},y.multiparttosinglepart=function(x,E){return f(x,E,(z,H,h)=>{h=(0,V.G)(h),(0,V.y)(h,1,1,x,E);const P=[];if(null===h[0])return null;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);if(h[0]instanceof R.Z)return[(0,V.q)((0,b.r1)(h[0]),x.spatialReference)];if(h[0]instanceof D.Z)return[(0,V.q)((0,b.r1)(h[0]),x.spatialReference)];const Y=te.simplify(h[0]);if(Y instanceof U.Z){const G=[],re=[];for(let ue=0;ue<Y.rings.length;ue++)if(Y.isClockwise(Y.rings[ue])){const ce=(0,K.im)({rings:[Y.rings[ue]],hasZ:!0===Y.hasZ,hasM:!0===Y.hasM,spatialReference:Y.spatialReference.toJSON()});G.push(ce)}else re.push({ring:Y.rings[ue],pt:Y.getPoint(ue,0)});for(let ue=0;ue<re.length;ue++)for(let ce=0;ce<G.length;ce++)if(G[ce].contains(re[ue].pt)){G[ce].addRing(re[ue].ring);break}return G}if(Y instanceof N.Z){const G=[];for(let re=0;re<Y.paths.length;re++){const ue=(0,K.im)({paths:[Y.paths[re]],hasZ:!0===Y.hasZ,hasM:!0===Y.hasM,spatialReference:Y.spatialReference.toJSON()});G.push(ue)}return G}if(h[0]instanceof ee.Z){const G=(0,V.q)((0,b.r1)(h[0]),x.spatialReference);for(let re=0;re<G.points.length;re++)P.push(G.getPoint(re));return P}return null})},y.issimple=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,x,E),null===h[0])return!0;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return te.isSimple(h[0])})},y.simplify=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,x,E),null===h[0])return null;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return te.simplify(h[0])})},y.convexhull=function(x,E){return f(x,E,(z,H,h)=>{if(h=(0,V.G)(h),(0,V.y)(h,1,1,x,E),null===h[0])return null;if(!(h[0]instanceof Q.Z))throw new M.aV(x,M.rH.InvalidParameter,E);return te.convexHull(h[0])})}}},34170:(be,me,j)=>{j.d(me,{r:()=>w});var W=j(44819),b=j(49389);function V(D,Q,ee){return void 0===ee||0==+ee?Math[D](Q):(Q=+Q,ee=+ee,isNaN(Q)||"number"!=typeof ee||ee%1!=0?NaN:(Q=Q.toString().split("e"),+((Q=(Q=Math[D](+(Q[0]+"e"+(Q[1]?+Q[1]-ee:-ee)))).toString().split("e"))[0]+"e"+(Q[1]?+Q[1]+ee:ee))))}function w(D,Q){function ee(R,U,N){const K=(0,W.g)(R);return isNaN(K)?K:isNaN(U)||isNaN(N)||U>N?NaN:K<U?U:K>N?N:K}D.number=function(R,U){return Q(R,U,(N,K,M)=>{(0,W.y)(M,1,2,R,U);const Z=M[0];if((0,W.b)(Z))return Z;if(null===Z)return 0;if((0,W.k)(Z))return Z.toNumber();if((0,W.a)(Z))return Number(Z);if((0,W.m)(Z))return NaN;if(""===Z||void 0===Z)return Number(Z);if((0,W.c)(Z)){if(void 0!==M[1]){let te=(0,W.L)(M[1],"\u2030","");return te=(0,W.L)(te,"\xa4",""),(0,b.Qc)(Z,{pattern:te})}return Number(Z.trim())}return Number(Z)})},D.abs=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.abs((0,W.g)(M[0]))))},D.acos=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.acos((0,W.g)(M[0]))))},D.asin=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.asin((0,W.g)(M[0]))))},D.atan=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.atan((0,W.g)(M[0]))))},D.atan2=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,2,2,R,U),Math.atan2((0,W.g)(M[0]),(0,W.g)(M[1]))))},D.ceil=function(R,U){return Q(R,U,(N,K,M)=>{if((0,W.y)(M,1,2,R,U),2===M.length){let Z=(0,W.g)(M[1]);return isNaN(Z)&&(Z=0),V("ceil",(0,W.g)(M[0]),-1*Z)}return Math.ceil((0,W.g)(M[0]))})},D.round=function(R,U){return Q(R,U,(N,K,M)=>{if((0,W.y)(M,1,2,R,U),2===M.length){let Z=(0,W.g)(M[1]);return isNaN(Z)&&(Z=0),V("round",(0,W.g)(M[0]),-1*Z)}return Math.round((0,W.g)(M[0]))})},D.floor=function(R,U){return Q(R,U,(N,K,M)=>{if((0,W.y)(M,1,2,R,U),2===M.length){let Z=(0,W.g)(M[1]);return isNaN(Z)&&(Z=0),V("floor",(0,W.g)(M[0]),-1*Z)}return Math.floor((0,W.g)(M[0]))})},D.cos=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.cos((0,W.g)(M[0]))))},D.isnan=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),"number"==typeof M[0]&&isNaN(M[0])))},D.exp=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.exp((0,W.g)(M[0]))))},D.log=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.log((0,W.g)(M[0]))))},D.pow=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,2,2,R,U),(0,W.g)(M[0])**(0,W.g)(M[1])))},D.random=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,0,0,R,U),Math.random()))},D.sin=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.sin((0,W.g)(M[0]))))},D.sqrt=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.sqrt((0,W.g)(M[0]))))},D.tan=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),Math.tan((0,W.g)(M[0]))))},D.defaultvalue=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,2,2,R,U),null===M[0]||""===M[0]||void 0===M[0]?M[1]:M[0]))},D.isempty=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),null===M[0]||""===M[0]||void 0===M[0]))},D.boolean=function(R,U){return Q(R,U,(N,K,M)=>((0,W.y)(M,1,1,R,U),(0,W.h)(M[0])))},D.constrain=function(R,U){return Q(R,U,(N,K,M)=>{(0,W.y)(M,3,3,R,U);const Z=(0,W.g)(M[1]),te=(0,W.g)(M[2]);if((0,W.m)(M[0])){const v=[];for(const L of M[0])v.push(ee(L,Z,te));return v}if((0,W.x)(M[0])){const v=[];for(let L=0;L<M[0].length();L++)v.push(ee(M[0].get(L),Z,te));return v}return ee(M[0],Z,te)})}}},2758:(be,me,j)=>{j.d(me,{r:()=>D});var W=j(43918),b=j(44819),V=j(69231);function w(Q,ee,R,U){if(1===U.length){if((0,b.m)(U[0]))return(0,V.t)(Q,U[0],-1);if((0,b.x)(U[0]))return(0,V.t)(Q,U[0].toArray(),-1)}return(0,V.t)(Q,U,-1)}function D(Q,ee){Q.stdev=function(R,U){return ee(R,U,(N,K,M)=>w("stdev",0,0,M))},Q.variance=function(R,U){return ee(R,U,(N,K,M)=>w("variance",0,0,M))},Q.average=function(R,U){return ee(R,U,(N,K,M)=>w("mean",0,0,M))},Q.mean=function(R,U){return ee(R,U,(N,K,M)=>w("mean",0,0,M))},Q.sum=function(R,U){return ee(R,U,(N,K,M)=>w("sum",0,0,M))},Q.min=function(R,U){return ee(R,U,(N,K,M)=>w("min",0,0,M))},Q.max=function(R,U){return ee(R,U,(N,K,M)=>w("max",0,0,M))},Q.distinct=function(R,U){return ee(R,U,(N,K,M)=>w("distinct",0,0,M))},Q.count=function(R,U){return ee(R,U,(N,K,M)=>{if((0,b.y)(M,1,1,R,U),(0,b.m)(M[0])||(0,b.c)(M[0]))return M[0].length;if((0,b.x)(M[0]))return M[0].length();throw new W.aV(R,W.rH.InvalidParameter,U)})}}},26273:(be,me,j)=>{j.d(me,{r:()=>_t});var W=j(14433),b=j(75866),V=j(27500),w=j(43918),D=j(44819),Q=j(84940),ee=j(53661);const R=C=>(I,S,O)=>(O=O||14,+C(I,S).toFixed(O)),U=(C,I)=>C+I,K=(C,I)=>C*I,M=(C,I)=>C/I,Z=(C,I,S)=>R(U)(C,I,S),v=(C,I,S)=>R(K)(C,I,S),L=(C,I,S)=>R(M)(C,I,S),_=360,T=400,y=2*Math.PI,f=3600,x=60,E=60,z=180*f/Math.PI,H=_*x*E,h=90*f,P=180*f,Y=270*f,G=String.fromCharCode(7501),re="\xb0";function ue(C){if(!1===(0,D.c)(C))throw new w.aV(null,w.rH.InvalidParameter,null);return C}function ce(C,I){const S=10**I;return Math.round(C*S)/S}function ge(C){const I=parseFloat(C.toString().replace(Math.trunc(C).toString(),"0"))*Math.sign(C);return C<0?{fraction:I,integer:Math.ceil(C)}:{fraction:I,integer:Math.floor(C)}}var de,ne,pe,we,C;function _e(C,I){switch(C){case de.north:return"SHORT"===I?"N":"North";case de.east:return"SHORT"===I?"E":"East";case de.south:return"SHORT"===I?"S":"South";case de.west:return"SHORT"===I?"W":"West"}}function $e(C,I,S){for(;C.length<S;)C=I+C;return C}function Ye(C,I){return C-Math.floor(C/I)*I}function Le(C){switch(C){case ne.truncated_degrees:case ne.decimal_degrees:return _;case ne.radians:return y;case ne.gradians:return T;case ne.seconds:return H;case ne.fractional_degree_minutes:return x;case ne.fractional_minute_seconds:return E;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unsupported evaluations"})}}function Ie(C){switch(C.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return pe.north_azimuth;case"POLAR":return pe.polar;case"QUADRANT":return pe.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return pe.south_azimuth}throw new w.aV(null,w.rH.LogicError,null,{reason:"unsupported directionType"})}function lt(C){switch(C.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return ne.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return ne.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return ne.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return ne.gradians}throw new w.aV(null,w.rH.LogicError,null,{reason:"unsupported units"})}(C=de||(de={}))[C.north=0]="north",C[C.east=1]="east",C[C.south=2]="south",C[C.west=3]="west",function(C){C[C.decimal_degrees=1]="decimal_degrees",C[C.seconds=2]="seconds",C[C.degrees_minutes_seconds=3]="degrees_minutes_seconds",C[C.radians=4]="radians",C[C.gradians=5]="gradians",C[C.truncated_degrees=6]="truncated_degrees",C[C.fractional_degree_minutes=7]="fractional_degree_minutes",C[C.fractional_minute_seconds=8]="fractional_minute_seconds"}(ne||(ne={})),function(C){C[C.north_azimuth=1]="north_azimuth",C[C.polar=2]="polar",C[C.quadrant=3]="quadrant",C[C.south_azimuth=4]="south_azimuth"}(pe||(pe={})),function(C){C[C.meridian=0]="meridian",C[C.direction=1]="direction"}(we||(we={}));class Ne{constructor(I,S,O){this.m_degrees=I,this.m_minutes=S,this.m_seconds=O}getField(I){switch(I){case ne.decimal_degrees:case ne.truncated_degrees:return this.m_degrees;case ne.fractional_degree_minutes:return this.m_minutes;case ne.seconds:case ne.fractional_minute_seconds:return this.m_seconds;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"})}}static secondsToDMS(I){const S=ge(I).fraction;let O=ge(I).integer;const X=Math.floor(O/f);O-=X*f;const p=Math.floor(O/E);return O-=p*E,new Ne(X,p,O+S)}static numberToDms(I){const S=ge(I).fraction,O=ge(I).integer,X=v(ge(100*S).fraction,100),p=ge(100*S).integer;return new Ne(O,p,X)}format(I,S){let O=ce(this.m_seconds,S),X=this.m_minutes,p=this.m_degrees;if(I===ne.seconds||I===ne.fractional_minute_seconds)E<=O&&(O-=E,++X),x<=X&&(X=0,++p),_<=p&&(p=0);else if(I===ne.fractional_degree_minutes)O=0,X=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,p=this.m_degrees,x<=X&&(X=0,++p),_<=p&&(p=0);else if(I===ne.decimal_degrees||I===ne.truncated_degrees){const g=L(this.m_seconds,f),B=L(this.m_minutes,x);p=Math.round(this.m_degrees+B+g),X=0,O=0}return new Ne(p,X,O)}static dmsToSeconds(I,S,O){return I*f+S*E+O}}class At{constructor(I,S,O){this.meridian=I,this.angle=S,this.direction=O}fetchAzimuth(I){return I===we.meridian?this.meridian:this.direction}}class Pe{constructor(I){this._angle=I}static createFromAngleAndDirection(I,S){return new Pe(new Re(Pe._convertDirectionFormat(I.extractAngularUnits(ne.seconds),S,pe.north_azimuth)))}getAngle(I){const S=this._angle.extractAngularUnits(ne.seconds);switch(I){case pe.north_azimuth:case pe.south_azimuth:case pe.polar:return new Re(Pe._convertDirectionFormat(S,pe.north_azimuth,I));case pe.quadrant:{const O=Pe.secondsNorthAzimuthToQuadrant(S);return new Re(O.angle)}}}getMeridian(I){const S=this._angle.extractAngularUnits(ne.seconds);switch(I){case pe.north_azimuth:return de.north;case pe.south_azimuth:return de.south;case pe.polar:return de.east;case pe.quadrant:return Pe.secondsNorthAzimuthToQuadrant(S).meridian}}getDirection(I){const S=this._angle.extractAngularUnits(ne.seconds);switch(I){case pe.north_azimuth:return de.east;case pe.south_azimuth:return de.west;case pe.polar:return de.north;case pe.quadrant:return Pe.secondsNorthAzimuthToQuadrant(S).direction}}static secondsNorthAzimuthToQuadrant(I){const S=I<=h||I>=Y?de.north:de.south,O=S===de.north?Math.min(H-I,I):Math.abs(I-P);return new At(S,O,I>P?de.west:de.east)}static createFromAngleMeridianAndDirection(I,S,O){return new Pe(new Re(Pe.secondsQuadrantToNorthAzimuth(I.extractAngularUnits(ne.seconds),S,O)))}static secondsQuadrantToNorthAzimuth(I,S,O){return S===de.north?O===de.east?I:H-I:O===de.east?P-I:P+I}static _convertDirectionFormat(I,S,O){let X=0;switch(S){case pe.north_azimuth:X=I;break;case pe.polar:X=h-I;break;case pe.quadrant:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"});case pe.south_azimuth:X=I+P}let p=0;switch(O){case pe.north_azimuth:p=X;break;case pe.polar:p=h-X;break;case pe.quadrant:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"});case pe.south_azimuth:p=X-P}return p=function Te(C,I){return C%I}(p,H),p<0?H+p:p}}function ht(C,I,S){let O=null;switch(I){case ne.decimal_degrees:O=v(C,f);break;case ne.seconds:O=C;break;case ne.gradians:O=v(C,3240);break;case ne.radians:O=v(C,z);break;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"})}switch(S){case ne.decimal_degrees:return L(O,f);case ne.seconds:return O;case ne.gradians:return L(O,3240);case ne.radians:return O/z;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"})}}class Re{constructor(I){this._seconds=I}static createFromAngleAndUnits(I,S){return new Re(ht(I,S,ne.seconds))}extractAngularUnits(I){return ht(this._seconds,ne.seconds,Qe(I))}static createFromDegreesMinutesSeconds(I,S,O){return new Re(Z(Z(v(I,f),v(S,E)),O))}}function Qe(C){switch((0,ee.O3)(C),C){case ne.decimal_degrees:case ne.truncated_degrees:case ne.degrees_minutes_seconds:return ne.decimal_degrees;case ne.gradians:return ne.gradians;case ne.fractional_degree_minutes:return ne.fractional_degree_minutes;case ne.radians:return ne.radians;case ne.seconds:case ne.fractional_minute_seconds:return ne.seconds}}class st{constructor(I,S,O,X){this.view=I,this.angle=S,this.merdian=O,this.direction=X,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(I,S,O){return new st(I,S.getAngle(O),S.getMeridian(O),S.getDirection(O))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return null===this._dms&&this._calculateDms(),this._dms}fetchFormattedDms(){return null===this._formattedDms&&this._calculateDms(),this._formattedDms}_calculateDms(){let I=null,S=ne.truncated_degrees,O=0;for(let X=0;X<this.view.length;X++){const p=this.view[X];switch(p){case"m":I=ze(this.view,X,p),S=S===ne.truncated_degrees?ne.fractional_degree_minutes:S,X=I.newpos;continue;case"s":I=ze(this.view,X,p),S=ne.fractional_minute_seconds,O=O<I.rounding?I.rounding:O,X=I.newpos;continue;default:continue}}this._dms=Ne.secondsToDMS(this.angle.extractAngularUnits(ne.seconds)),this._formattedDms=Ne.secondsToDMS(this.angle.extractAngularUnits(ne.seconds)).format(S,O)}}function Ce(C,I,S,O,X){let p=null;switch(I){case ne.decimal_degrees:case ne.radians:case ne.gradians:return p=Ye(ce(C.extractAngularUnits(I),O),Le(I)),$e(p.toFixed(O),"0",S+O+(O>0?1:0));case ne.truncated_degrees:case ne.fractional_degree_minutes:return p=Ye(X.fetchFormattedDms().getField(I),Le(I)),$e(p.toFixed(O),"0",S+O+(O>0?1:0));case ne.fractional_minute_seconds:return p=Ye(ce(X.fetchDms().getField(I),O),Le(I)),$e(p.toFixed(O),"0",S+O+(O>0?1:0));default:throw new w.aV(null,w.rH.LogicError,null,{reason:"unexpected evaluation"})}}function Be(C){switch(C.toUpperCase().trim()){case"N":case"NORTH":return de.north;case"E":case"EAST":return de.east;case"S":case"SOUTH":return de.south;case"W":case"WEST":return de.west}return null}function ke(C){const I=parseFloat(C);if((0,D.b)(I)){if(isNaN(I))throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"});return I}throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"})}function Ue(C,I,S){const O=S===pe.quadrant;let X=null,p=null,g=0,B=0,J=0;if(O){if(C.length<2)throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"});J=1;const q=function Me(C){switch((0,D.g)(C)){case 1:return{first:de.north,second:de.east};case 2:return{first:de.south,second:de.east};case 3:return{first:de.south,second:de.west};case 4:return{first:de.north,second:de.west}}return null}((0,D.j)(C[C.length-1]));if(q?(X=q.first,p=q.second):(g=1,X=Be((0,D.j)(C[0])),p=Be((0,D.j)(C[C.length-1]))),null===X||null===p)throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"})}switch(I){case ne.decimal_degrees:case ne.radians:case ne.gradians:if(0===C.length)throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"});return O?Pe.createFromAngleMeridianAndDirection(Re.createFromAngleAndUnits(ke(C[g]),Qe(I)),X,p):Pe.createFromAngleAndDirection(Re.createFromAngleAndUnits(ke(C[g]),Qe(I)),S);case ne.degrees_minutes_seconds:if(B=C.length-J-g,3===B){const q=Re.createFromDegreesMinutesSeconds(ke(C[g]),ke(C[g+1]),ke(C[g+2]));return O?Pe.createFromAngleMeridianAndDirection(q,X,p):Pe.createFromAngleAndDirection(q,S)}if(1===B){const q=ke(C[g]),he=Ne.numberToDms(q),ye=Re.createFromDegreesMinutesSeconds(he.m_degrees,he.m_minutes,he.m_seconds);return O?Pe.createFromAngleMeridianAndDirection(ye,X,p):Pe.createFromAngleAndDirection(ye,S)}}throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid conversion"})}function ze(C,I,S){const O={padding:0,rounding:0,newpos:I};let X=!1;for(;I<C.length;){const p=C[I];if(p===S)X?O.rounding++:O.padding++,I++;else{if("."!==p)break;X=!0,I++}}return O.newpos=I-1,O}function Tt(C,I,S){const O={escaped:"",newpos:I};for(I++;I<C.length;){const X=C[I];if(I++,"]"===X)break;O.escaped+=X}return O.newpos=I-1,O}function ot(C,I,S){if(!(I instanceof V.Z))throw new w.aV(null,w.rH.InvalidParameter,null);if(!1===I.hasField("directionType"))throw new w.aV(null,w.rH.LogicError,null,{reason:"missing directionType"});if(!1===I.hasField("angleType"))throw new w.aV(null,w.rH.LogicError,null,{reason:"missing angleType"});const O=Ie(ue(I.field("directiontype"))),X=function ve(C,I,S){if((0,D.b)(C))return function Et(C,I,S){if(S===pe.quadrant)throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"});if(I===ne.degrees_minutes_seconds){const O=Ne.numberToDms(C);return Pe.createFromAngleAndDirection(Re.createFromDegreesMinutesSeconds(O.m_degrees,O.m_minutes,O.m_seconds),S)}return Pe.createFromAngleAndDirection(Re.createFromAngleAndUnits(C,Qe(I)),S)}((0,D.g)(C),I,S);if((0,D.c)(C))return Ue(function rt(C){const I=[" ","-","/","'",'"',"\\","^",re,G,"\t","\r","\n","*"];let S="";for(let O=0;O<C.length;O++){const X=C.charAt(O);I.includes(X)?S+="RRSPLITRRSPLITRR":S+=X}return S.split("RRSPLITRRSPLITRR").filter(O=>""!==O)}(C),I,S);if((0,D.m)(C))return Ue(C,I,S);if((0,D.x)(C))return Ue(C.toArray(),I,S);throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"})}(C,lt(ue(I.field("angletype"))),O);if(!(S instanceof V.Z))throw new w.aV(null,w.rH.InvalidParameter,null);if(!1===S.hasField("directionType"))throw new w.aV(null,w.rH.LogicError,null,{reason:"missing directionType"});if(!1===S.hasField("outputType"))throw new w.aV(null,w.rH.LogicError,null,{reason:"missing angleType"});const p=Ie(ue(S.field("directiontype"))),g=S.hasField("angleType")?lt(ue(S.field("angletype"))):null,B=ue(S.field("outputType")).toUpperCase().trim();if(!p||!B)throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"});if(!(g||"TEXT"===B&&S.hasField("format")))throw new w.aV(null,w.rH.LogicError,null,{reason:"invalid unit"});switch(B){case"VALUE":return p===pe.quadrant||g===ne.degrees_minutes_seconds?function Ct(C,I,S){const O=C.getAngle(I);if(I===pe.quadrant&&S===ne.degrees_minutes_seconds){const X=Ne.secondsToDMS(O.extractAngularUnits(ne.seconds));return[_e(C.getMeridian(I),"SHORT"),X.m_degrees,X.m_minutes,X.m_seconds,_e(C.getDirection(I),"SHORT")]}if(S===ne.degrees_minutes_seconds){const X=Ne.secondsToDMS(O.extractAngularUnits(ne.seconds));return[X.m_degrees,X.m_minutes,X.m_seconds]}return I===pe.quadrant?[_e(C.getMeridian(I),"SHORT"),O.extractAngularUnits(S),_e(C.getDirection(I),"SHORT")]:[O.extractAngularUnits(S)]}(X,p,g):function mt(C,I,S){const O=Qe(S);if(O&&S!==ne.degrees_minutes_seconds)return C.getAngle(I).extractAngularUnits(O);throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"})}(X,p,g);case"TEXT":{let J="";return S.hasField("format")&&(J=(0,D.j)(S.field("format"))),null!==J&&""!==J||(J=function It(C,I){let S="";switch(C){case ne.decimal_degrees:S=I===pe.quadrant?"DD.DD"+re:"DDD.DD"+re;break;case ne.degrees_minutes_seconds:S=I===pe.quadrant?"dd"+re+" mm' ss\"":"ddd"+re+" mm' ss.ss\"";break;case ne.radians:S="R.RR";break;case ne.gradians:S="GGG.GG"+G;break;default:throw new w.aV(null,w.rH.LogicError,null,{reason:"conversion error"})}return I===pe.quadrant&&(S="p "+S+" b"),S}(g,p)),function pt(C,I,S){let O="",X=null,p=null;const g=st.createFromStringAndBearing(I,C,S),B={D:ne.decimal_degrees,d:ne.truncated_degrees,m:ne.fractional_degree_minutes,s:ne.fractional_minute_seconds,R:ne.radians,G:ne.gradians};for(let J=0;J<I.length;J++){const q=I[J];switch(q){case"[":X=Tt(I,J),O+=X.escaped,J=X.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":X=ze(I,J,q),p=C.getAngle(S),O+=Ce(p,B[q],X.padding,X.rounding,g),J=X.newpos;continue;case"P":case"p":O+=_e(g.fetchMeridian(),"p"===q?"SHORT":"LONG");continue;case"B":case"b":O+=_e(g.fetchDirection(),"b"===q?"SHORT":"LONG");continue;default:O+=q}}return O}(X,J,p)}default:throw new w.aV(null,w.rH.InvalidParameter,null)}}const Ve=2654435761,We=2246822519,qe=3266489917,Dt=668265263,Je=374761393;function et(C){const I=[];for(let S=0,O=C.length;S<O;S++){let X=C.charCodeAt(S);X<128?I.push(X):X<2048?I.push(192|X>>6,128|63&X):X<55296||X>=57344?I.push(224|X>>12,128|X>>6&63,128|63&X):(S++,X=65536+((1023&X)<<10|1023&C.charCodeAt(S)),I.push(240|X>>18,128|X>>12&63,128|X>>6&63,128|63&X))}return new Uint8Array(I)}class wt{constructor(I){this._seed=I,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(I){const S=[];for(const O of I)isNaN(O)?S.push("NaN"):S.push(O===1/0?"Infinity":O===-1/0?"-Infinity":0===O?"0":O.toString(16));this.update(et(S.join("")))}updateIntArray(I){const S=Int32Array.from(I);this.update(new Uint8Array(S.buffer))}updateUint8Array(I){this.update(Uint8Array.from(I))}updateWithString(I){return this.update(et(I))}update(I){return this._bufs.push(I),this._totallen+=I.length,this}digest(){const I=new Uint8Array(this._totallen);let S=0;for(const O of this._bufs)I.set(O,S),S+=O.length;return this.init(),this._xxHash32(I,this._seed)}_xxHash32(I,S=0){const O=I;let X=S+Je&4294967295,p=0;if(O.length>=16){const B=[S+Ve+We&4294967295,S+We&4294967295,S+0&4294967295,S-Ve&4294967295],J=I,q=J.length-16;let he=0;for(p=0;(4294967280&p)<=q;p+=4){let it=B[he]+((J[p+0]+(J[p+1]<<8))*We+((J[p+2]+(J[p+3]<<8))*We<<16))&4294967295;it=it<<13|it>>>19,B[he]=(65535&it)*Ve+((it>>>16)*Ve<<16)&4294967295,he=he+1&3}X=(B[0]<<1|B[0]>>>31)+(B[1]<<7|B[1]>>>25)+(B[2]<<12|B[2]>>>20)+(B[3]<<18|B[3]>>>14)&4294967295}X=X+I.length&4294967295;const g=I.length-4;for(;p<=g;p+=4)X=X+((O[p+0]+(O[p+1]<<8))*qe+((O[p+2]+(O[p+3]<<8))*qe<<16))&4294967295,X=X<<17|X>>>15,X=(65535&X)*Dt+((X>>>16)*Dt<<16)&4294967295;for(;p<O.length;++p)X+=O[p]*Je,X=X<<11|X>>>21,X=(65535&X)*Ve+((X>>>16)*Ve<<16)&4294967295;return X^=X>>>15,X=((65535&X)*We&4294967295)+((X>>>16)*We<<16),X^=X>>>13,X=((65535&X)*qe&4294967295)+((X>>>16)*qe<<16),X^=X>>>16,X<0?X+4294967296:X}}var Ft=j(10465),gt=j(23675),De=j(35787),ie=j(55733),ct=j(7913),tt=j(68230),vt=j(55050);function ft(C,I){if(!C||!I)return C===I;if(C.x===I.x&&C.y===I.y){if(C.hasZ){if(C.z!==I.z)return!1}else if(I.hasZ)return!1;if(C.hasM){if(C.m!==I.m)return!1}else if(I.hasM)return!1;return!0}return!1}function se(C,I,S){if(null!==C)if((0,D.m)(C)){if(I.updateUint8Array([61]),S.map.has(C)){const O=S.map.get(C);I.updateIntArray([61237541^O])}else{S.map.set(C,S.currentLength++);for(const O of C)se(O,I,S);S.map.delete(C),S.currentLength--}I.updateUint8Array([199])}else if((0,D.x)(C)){if(I.updateUint8Array([61]),S.map.has(C)){const O=S.map.get(C);I.updateIntArray([61237541^O])}else{S.map.set(C,S.currentLength++);for(const O of C.toArray())se(O,I,S);S.map.delete(C),S.currentLength--}I.updateUint8Array([199])}else{if((0,D.k)(C))return I.updateIntArray([C.toNumber()]),void I.updateUint8Array([241]);if((0,D.c)(C))return I.updateIntArray([C.length]),I.updateWithString(C),void I.updateUint8Array([41]);if((0,D.a)(C))I.updateUint8Array([!0===C?1:0,113]);else{if((0,D.b)(C))return I.updateFloatArray([C]),void I.updateUint8Array([173]);if(C instanceof b.Z)throw new w.aV(S.context,w.rH.UnsupportedHashType,S.node);if(C instanceof W.Z)throw new w.aV(S.context,w.rH.UnsupportedHashType,S.node);if(!(C instanceof V.Z)){if((0,D.w)(C))throw new w.aV(S.context,w.rH.UnsupportedHashType,S.node);if(C instanceof De.Z)return I.updateIntArray([3833836621]),I.updateIntArray([0]),I.updateFloatArray([C.x]),I.updateIntArray([1]),I.updateFloatArray([C.y]),C.hasZ&&(I.updateIntArray([2]),I.updateFloatArray([C.z])),C.hasM&&(I.updateIntArray([3]),I.updateFloatArray([C.m])),I.updateIntArray([3765347959]),void se(C.spatialReference.wkid,I,S);if(C instanceof ie.Z){I.updateIntArray([1266616829]);for(let O=0;O<C.rings.length;O++){const X=C.rings[O],p=[];let g=null,B=null;for(let J=0;J<X.length;J++){const q=C.getPoint(O,J);if(0===J)g=q;else if(ft(B,q))continue;B=q,J===X.length-1&&ft(g,q)||p.push(q)}I.updateIntArray([1397116793,p.length]);for(let J=0;J<p.length;J++){const q=p[J];I.updateIntArray([3962308117,J]),se(q,I,S),I.updateIntArray([2716288009])}I.updateIntArray([2278822459])}return I.updateIntArray([3878477243]),void se(C.spatialReference.wkid,I,S)}if(C instanceof ct.Z){I.updateIntArray([4106883559]);for(let O=0;O<C.paths.length;O++){const X=C.paths[O];I.updateIntArray([1397116793,X.length]);for(let p=0;p<X.length;p++)I.updateIntArray([3962308117,p]),se(C.getPoint(O,p),I,S),I.updateIntArray([2716288009]);I.updateIntArray([2278822459])}return I.updateIntArray([2568784753]),void se(C.spatialReference.wkid,I,S)}if(C instanceof gt.Z){I.updateIntArray([588535921,C.points.length]);for(let O=0;O<C.points.length;O++){const X=C.getPoint(O);I.updateIntArray([O]),se(X,I,S)}return I.updateIntArray([1700171621]),void se(C.spatialReference.wkid,I,S)}if(C instanceof Ft.Z)return I.updateIntArray([3483648373]),I.updateIntArray([0]),I.updateFloatArray([C.xmax]),I.updateIntArray([1]),I.updateFloatArray([C.xmin]),I.updateIntArray([2]),I.updateFloatArray([C.ymax]),I.updateIntArray([3]),I.updateFloatArray([C.ymin]),C.hasZ&&(I.updateIntArray([4]),I.updateFloatArray([C.zmax]),I.updateIntArray([5]),I.updateFloatArray([C.zmin])),C.hasM&&(I.updateIntArray([6]),I.updateFloatArray([C.mmax]),I.updateIntArray([7]),I.updateFloatArray([C.mmin])),I.updateIntArray([3622027469]),void se(C.spatialReference.wkid,I,S);if(C instanceof tt.Z)return I.updateIntArray([14]),null!=C.wkid&&I.updateIntArray([C.wkid]),void(C.wkt&&I.updateWithString(C.wkt));throw(0,D.i)(C)||(0,D.T)(C)||(0,D.U)(C),new w.aV(S.context,w.rH.UnsupportedHashType,S.node)}if(I.updateUint8Array([223]),S.map.has(C)){const O=S.map.get(C);I.updateIntArray([61237541^O])}else{S.map.set(C,S.currentLength++);for(const O of C.keys())I.updateIntArray([O.length]),I.updateWithString(O),I.updateUint8Array([251]),se(C.field(O),I,S),I.updateUint8Array([239]);S.map.delete(C),S.currentLength--}I.updateUint8Array([73])}}else I.updateUint8Array([0,139])}function _t(C,I){C.portal=function(S,O){return I(S,O,(X,p,g)=>((0,D.y)(g,1,1,S,O),new W.Z((0,D.j)(g[0]))))},C.typeof=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,1,1,S,O);const B=(0,D.B)(g[0]);if("Unrecognised Type"===B)throw new w.aV(S,w.rH.UnrecognisedType,O);return B})},C.trim=function(S,O){return I(S,O,(X,p,g)=>((0,D.y)(g,1,1,S,O),(0,D.j)(g[0]).trim()))},C.tohex=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,1,1,S,O);const B=(0,D.g)(g[0]);return isNaN(B)?B:B.toString(16)})},C.upper=function(S,O){return I(S,O,(X,p,g)=>((0,D.y)(g,1,1,S,O),(0,D.j)(g[0]).toUpperCase()))},C.proper=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,1,2,S,O);let B=1;2===g.length&&"firstword"===(0,D.j)(g[1]).toLowerCase()&&(B=2);const J=/\s/,q=(0,D.j)(g[0]);let he="",ye=!0;for(let Ee=0;Ee<q.length;Ee++){let Se=q[Ee];J.test(Se)?1===B&&(ye=!0):Se.toUpperCase()!==Se.toLowerCase()&&(ye?(Se=Se.toUpperCase(),ye=!1):Se=Se.toLowerCase()),he+=Se}return he})},C.lower=function(S,O){return I(S,O,(X,p,g)=>((0,D.y)(g,1,1,S,O),(0,D.j)(g[0]).toLowerCase()))},C.guid=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,0,1,S,O),g.length>0)switch((0,D.j)(g[0]).toLowerCase()){case"digits":return(0,D.M)().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return(0,D.M)();case"digits-hyphen-braces":return"{"+(0,D.M)()+"}";case"digits-hyphen-parentheses":return"("+(0,D.M)()+")"}return"{"+(0,D.M)()+"}"})},C.standardizeguid=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,2,2,S,O);let B=(0,D.j)(g[0]);if(""===B||null===B)return"";const J=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(B);if(!J)return"";const q=J.groups;switch(B=q.partA+"-"+q.partB+"-"+q.partC+"-"+q.partD+"-"+q.partE,(0,D.j)(g[1]).toLowerCase()){case"digits":return B.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return B;case"digits-hyphen-braces":return"{"+B+"}";case"digits-hyphen-parentheses":return"("+B+")"}return"{"+B+"}"})},C.console=function(S,O){return I(S,O,(X,p,g)=>(0===g.length||S.console((0,D.j)(1===g.length?g[0]:g)),D.v))},C.mid=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,2,3,S,O);let B=(0,D.g)(g[1]);if(isNaN(B))return"";if(B<0&&(B=0),2===g.length)return(0,D.j)(g[0]).substr(B);let J=(0,D.g)(g[2]);return isNaN(J)?"":(J<0&&(J=0),(0,D.j)(g[0]).substr(B,J))})},C.find=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,2,3,S,O);let B=0;if(g.length>2){if(B=(0,D.g)((0,D.A)(g[2],0)),isNaN(B))return-1;B<0&&(B=0)}return(0,D.j)(g[1]).indexOf((0,D.j)(g[0]),B)})},C.left=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,2,2,S,O);let B=(0,D.g)(g[1]);return isNaN(B)?"":(B<0&&(B=0),(0,D.j)(g[0]).substr(0,B))})},C.right=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,2,2,S,O);let B=(0,D.g)(g[1]);return isNaN(B)?"":(B<0&&(B=0),(0,D.j)(g[0]).substr(-1*B,B))})},C.split=function(S,O){return I(S,O,(X,p,g)=>{let B;(0,D.y)(g,2,4,S,O);let J=(0,D.g)((0,D.A)(g[2],-1));const q=(0,D.h)((0,D.A)(g[3],!1));if(-1===J||null===J||!0===q?B=(0,D.j)(g[0]).split((0,D.j)(g[1])):(isNaN(J)&&(J=-1),J<-1&&(J=-1),B=(0,D.j)(g[0]).split((0,D.j)(g[1]),J)),!1===q)return B;const he=[];for(let ye=0;ye<B.length&&!(-1!==J&&he.length>=J);ye++)""!==B[ye]&&void 0!==B[ye]&&he.push(B[ye]);return he})},C.text=function(S,O){return I(S,O,(X,p,g)=>((0,D.y)(g,1,2,S,O),(0,D.t)(g[0],g[1])))},C.concatenate=function(S,O){return I(S,O,(X,p,g)=>{const B=[];if(g.length<1)return"";if((0,D.m)(g[0])){const J=(0,D.A)(g[2],"");for(let q=0;q<g[0].length;q++)B[q]=(0,D.t)(g[0][q],J);return B.join(g.length>1?g[1]:"")}if((0,D.x)(g[0])){const J=(0,D.A)(g[2],"");for(let q=0;q<g[0].length();q++)B[q]=(0,D.t)(g[0].get(q),J);return B.join(g.length>1?g[1]:"")}for(let J=0;J<g.length;J++)B[J]=(0,D.t)(g[J]);return B.join("")})},C.reverse=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,1,1,S,O),(0,D.m)(g[0])){const B=g[0].slice(0);return B.reverse(),B}if((0,D.x)(g[0])){const B=g[0].toArray().slice(0);return B.reverse(),B}throw new w.aV(S,w.rH.InvalidParameter,O)})},C.replace=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,3,4,S,O);const B=(0,D.j)(g[0]),J=(0,D.j)(g[1]),q=(0,D.j)(g[2]);return 4!==g.length||(0,D.h)(g[3])?(0,D.L)(B,J,q):B.replace(J,q)})},C.schema=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.w)(g[0])){const B=(0,D.N)(g[0]);return B?V.Z.convertObjectToArcadeDictionary(B,(0,D.C)(S)):null}throw new w.aV(S,w.rH.InvalidParameter,O)})},C.subtypes=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,1,1,S,O),(0,D.w)(g[0])){const B=(0,D.O)(g[0]);return B?V.Z.convertObjectToArcadeDictionary(B,(0,D.C)(S)):null}throw new w.aV(S,w.rH.InvalidParameter,O)})},C.subtypecode=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,1,1,S,O),(0,D.w)(g[0])){const B=(0,D.O)(g[0]);if(!B)return null;if(B.subtypeField&&g[0].hasField(B.subtypeField)){const J=g[0].field(B.subtypeField);for(const q of B.subtypes)if(q.code===J)return q.code;return null}return null}throw new w.aV(S,w.rH.InvalidParameter,O)})},C.subtypename=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,1,1,S,O),(0,D.w)(g[0])){const B=(0,D.O)(g[0]);if(!B)return"";if(B.subtypeField&&g[0].hasField(B.subtypeField)){const J=g[0].field(B.subtypeField);for(const q of B.subtypes)if(q.code===J)return q.name;return""}return""}throw new w.aV(S,w.rH.InvalidParameter,O)})},C.gdbversion=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,1,1,S,O),(0,D.w)(g[0]))return g[0].gdbVersion();throw new w.aV(S,w.rH.InvalidParameter,O)})},C.domain=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,2,3,S,O),(0,D.w)(g[0])){const B=(0,D.P)(g[0],(0,D.j)(g[1]),void 0===g[2]?void 0:(0,D.g)(g[2]));return B&&B.domain?V.Z.convertObjectToArcadeDictionary("coded-value"===B.domain.type||"codedValue"===B.domain.type?{type:"codedValue",name:B.domain.name,dataType:Q.yE[B.field.type],codedValues:B.domain.codedValues.map(J=>({name:J.name,code:J.code}))}:{type:"range",name:B.domain.name,dataType:Q.yE[B.field.type],min:B.domain.min,max:B.domain.max},(0,D.C)(S)):null}throw new w.aV(S,w.rH.InvalidParameter,O)})},C.domainname=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,2,4,S,O),(0,D.w)(g[0]))return(0,D.Q)(g[0],(0,D.j)(g[1]),g[2],void 0===g[3]?void 0:(0,D.g)(g[3]));throw new w.aV(S,w.rH.InvalidParameter,O)})},C.domaincode=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,2,4,S,O),(0,D.w)(g[0]))return(0,D.S)(g[0],(0,D.j)(g[1]),g[2],void 0===g[3]?void 0:(0,D.g)(g[3]));throw new w.aV(S,w.rH.InvalidParameter,O)})},C.urlencode=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,1,1,S,O),null===g[0])return"";if(g[0]instanceof V.Z){let B="";for(const J of g[0].keys()){const q=g[0].field(J);""!==B&&(B+="&"),B+=null===q?encodeURIComponent(J)+"=":encodeURIComponent(J)+"="+encodeURIComponent(q)}return B}return encodeURIComponent((0,D.j)(g[0]))})},C.hash=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,1,1,S,O);const B=new wt(0);return se(g[0],B,{context:S,node:O,map:new Map,currentLength:0}),B.digest()})},C.convertdirection=function(S,O){return I(S,O,(X,p,g)=>((0,D.y)(g,3,3,S,O),ot(g[0],g[1],g[2])))},C.fromjson=function(S,O){return I(S,O,(X,p,g)=>{if((0,D.y)(g,1,1,S,O),!1===(0,D.c)(g[0]))throw new w.aV(S,w.rH.InvalidParameter,O);return V.Z.convertJsonToArcade(JSON.parse((0,D.j)(g[0])),(0,D.C)(S))})},C.expects=function(S,O){return I(S,O,(X,p,g)=>{if(g.length<1)throw new w.aV(S,w.rH.WrongNumberOfParameters,O);return D.v})},C.tocharcode=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,1,2,S,O);const B=(0,D.g)((0,D.A)(g[1],0)),J=(0,D.j)(g[0]);if(0===J.length&&1===g.length)return null;if(J.length<=B||B<0)throw new w.aV(S,w.rH.OutOfBounds,O);return J.charCodeAt(B)})},C.tocodepoint=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,1,2,S,O);const B=(0,D.g)((0,D.A)(g[1],0)),J=(0,D.j)(g[0]);if(0===J.length&&1===g.length)return null;if(J.length<=B||B<0)throw new w.aV(S,w.rH.OutOfBounds,O);return J.codePointAt(B)})},C.fromcharcode=function(S,O){return I(S,O,(X,p,g)=>{if(g.length<1)throw new w.aV(S,w.rH.WrongNumberOfParameters,O);const B=g.map(J=>Math.trunc((0,D.g)(J))).filter(J=>J>=0&&J<=65535);return 0===B.length?null:String.fromCharCode.apply(null,B)})},C.fromcodepoint=function(S,O){return I(S,O,(X,p,g)=>{if(g.length<1)throw new w.aV(S,w.rH.WrongNumberOfParameters,O);let B;try{B=g.map(J=>Math.trunc((0,D.g)(J))).filter(J=>J<=1114111&&J>>>0===J)}catch{return null}return 0===B.length?null:String.fromCodePoint.apply(null,B)})},C.getuser=function(S,O){return I(S,O,(X,p,g)=>{(0,D.y)(g,0,2,S,O);let B=(0,D.A)(g[1],"");if(B=!0===B||!1===B?"":(0,D.j)(B),null!==B&&""!==B)return null;if(0===g.length||g[0]instanceof W.Z){let J=null;if(S.services&&S.services.portal&&(J=S.services.portal),g.length>0&&!function yt(C,I){return!!C&&(0,vt.tm)(C,I?.restUrl||"")}(g[0].field("url"),J)||!J)return null;if(""===B){const q=function dt(C){return"loaded"===C.loadStatus&&C.user&&C.user.sourceJSON?C.user.sourceJSON:null}(J);if(q){const he=JSON.parse(JSON.stringify(q));for(const ye of["lastLogin","created","modified"])null!=he[ye]&&(he[ye]=new Date(he[ye]));return V.Z.convertObjectToArcadeDictionary(he,(0,D.C)(S))}}return null}throw new w.aV(S,w.rH.InvalidParameter,O)})}}},39214:(be,me,j)=>{j.d(me,{EI:()=>b,Lz:()=>w,SV:()=>V,r1:()=>Q});var W=j(10465);function b(ee){if(null==ee)return null;if("number"==typeof ee)return ee;let R=ee.toLowerCase();switch(R=R.replace(/\s/g,""),R=R.replace(/-/g,""),R){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":return 109439;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 109405;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 109409}return null}function V(ee){if(null==ee)return null;switch(ee.type){case"polygon":case"multipoint":case"polyline":return ee.extent;case"point":return new W.Z({xmin:ee.x,ymin:ee.y,xmax:ee.x,ymax:ee.y,spatialReference:ee.spatialReference});case"extent":return ee}return null}function w(ee){if(null==ee)return null;if("number"==typeof ee)return ee;let R=ee.toLowerCase();switch(R=R.replace(/\s/g,""),R=R.replace(/-/g,""),R){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":return 9093;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 9002;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 9030}return null}function Q(ee){if(null==ee)return null;const R=ee.clone();return void 0!==ee.cache._geVersion&&(R.cache._geVersion=ee.cache._geVersion),R}},70748:(be,me,j)=>{j.d(me,{Kq:()=>te,Vf:()=>L,bV:()=>N,dN:()=>_,gW:()=>ee,mb:()=>Z,w8:()=>M,x5:()=>K});const W={all:{min:2,max:2},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:1,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:2},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}},b={functionDefinitions:new Map,constantDefinitions:new Map},V={functionDefinitions:new Map,constantDefinitions:new Map};for(const y of["pi","infinity"])V.constantDefinitions.set(y,{type:"constant"}),b.constantDefinitions.set(y,{type:"constant"});V.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),b.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const y in W){const f=W[y];V.functionDefinitions.set(y,{overloads:[{type:"function",parametersInfo:{min:f.min,max:f.max}}]}),b.functionDefinitions.set(y,{overloads:[{type:"function",parametersInfo:{min:f.min,max:f.max}}]})}const w=["featureset","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","getuser","attachments","featuresetbyportalitem"],D=["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","convexhull","simplify","multiparttosinglepart"];function Q(y){return"string"==typeof y||y instanceof String}function ee(y,f){const F="sync"===f?b:V;F.functionDefinitions.has(y.name.toLowerCase())?F.functionDefinitions.get(y.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:y.min,max:y.max}}):F.functionDefinitions.set(y.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:y.min,max:y.max}}]})}function R(y,f){if(y)for(const F of y)U(F,f)}function U(y,f){if(y&&!1!==f(y))switch(y.type){case"ImportDeclaration":R(y.specifiers,f),U(y.source,f);break;case"ExportNamedDeclaration":U(y.declaration,f);break;case"ArrayExpression":R(y.elements,f);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":U(y.left,f),U(y.right,f);break;case"BlockStatement":case"Program":R(y.body,f);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":U(y.callee,f),R(y.arguments,f);break;case"ExpressionStatement":U(y.expression,f);break;case"ForInStatement":U(y.left,f),U(y.right,f),U(y.body,f);break;case"ForStatement":U(y.init,f),U(y.test,f),U(y.update,f),U(y.body,f);break;case"WhileStatement":U(y.test,f),U(y.body,f);break;case"FunctionDeclaration":U(y.id,f),R(y.params,f),U(y.body,f);break;case"IfStatement":U(y.test,f),U(y.consequent,f),U(y.alternate,f);break;case"MemberExpression":U(y.object,f),U(y.property,f);break;case"ObjectExpression":R(y.properties,f);break;case"Property":U(y.key,f),U(y.value,f);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":U(y.argument,f);break;case"VariableDeclaration":R(y.declarations,f);break;case"VariableDeclarator":U(y.id,f),U(y.init,f);break;case"TemplateLiteral":R(y.expressions,f),R(y.quasis,f)}}function N(y,f){let F=!1;const x=f.toLowerCase();return U(y,E=>!F&&("Identifier"===E.type&&E.name&&E.name.toLowerCase()===x&&(F=!0),!0)),F}function K(y){const f=[];return U(y,F=>("ImportDeclaration"===F.type&&F.source&&F.source.value&&f.push({libname:F.specifiers[0].local.name.toLowerCase(),source:F.source.value}),!0)),f}function M(y,f){let F=!1;const x=f.toLowerCase();return U(y,E=>!(F||"CallExpression"===E.type&&"Identifier"===E.callee.type&&E.callee.name&&E.callee.name.toLowerCase()===x&&(F=!0,1))),F}function Z(y){const f=[];return U(y,F=>"MemberExpression"!==F.type||"Identifier"!==F.object.type||(!1===F.computed&&F.object&&F.object.name&&F.property&&"Identifier"===F.property.type&&F.property.name?f.push(F.object.name.toLowerCase()+"."+F.property.name.toLowerCase()):F.object&&F.object.name&&F.property&&"Literal"===F.property.type&&"string"==typeof F.property.value&&f.push(F.object.name.toLowerCase()+"."+F.property.value?.toString().toLowerCase()),!1)),f}function te(y){const f=[];return U(y,F=>{if("CallExpression"===F.type){if("Identifier"===F.callee.type&&"expects"===F.callee.name.toLowerCase()){let x="";for(let E=0;E<(F.arguments||[]).length;E++)0===E?"Identifier"===F.arguments[E].type&&(x=F.arguments[E].name.toLowerCase()):x&&"Literal"===F.arguments[E].type&&Q(F.arguments[E].value)&&f.push(x+"."+F.arguments[E].value.toLowerCase());return!1}if("Identifier"===F.callee.type&&["domainname","domaincode","domain","haskey"].includes(F.callee.name.toLowerCase())&&F.arguments.length>=2){let x="";return"Identifier"===F.arguments[0].type&&(x=F.arguments[0].name.toLowerCase()),x&&"Literal"===F.arguments[1].type&&Q(F.arguments[1].value)&&f.push(x+"."+F.arguments[1].value.toLowerCase()),!1}}return"MemberExpression"!==F.type||"Identifier"!==F.object.type||(!1===F.computed&&F.object&&F.object.name&&F.property&&"Identifier"===F.property.type&&F.property.name?f.push(F.object.name.toLowerCase()+"."+F.property.name.toLowerCase()):F.object&&F.object.name&&F.property&&"Literal"===F.property.type&&"string"==typeof F.property.value&&f.push(F.object.name.toLowerCase()+"."+F.property.value?.toString().toLowerCase()),!1)}),f}function L(y){const f=[];return U(y,F=>("CallExpression"===F.type&&"Identifier"===F.callee.type&&f.push(F.callee.name.toLowerCase()),!0)),f}function _(y,f=[]){let F=null;if(void 0===y.usesFeatureSet){null===F&&(F=L(y)),y.usesFeatureSet=!1;for(let x=0;x<F.length;x++)w.includes(F[x])&&(y.usesFeatureSet=!0,y.isAsync=!0);if(!1===y.usesFeatureSet&&f&&f.length>0)for(const x of f)if(N(y,x)){y.usesFeatureSet=!0,y.isAsync=!0;break}}if(void 0===y.usesModules&&(y.usesModules=!1,K(y).length>0&&(y.usesModules=!0)),void 0===y.usesGeometry){y.usesGeometry=!1,null===F&&(F=L(y));for(let x=0;x<F.length;x++)D.includes(F[x])&&(y.usesGeometry=!0)}}},37157:(be,me,j)=>{j.d(me,{A:()=>ee});var W=j(71670),b=j(43918),V=j(98909),w=j(44819),D=j(30801);const ee=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:function Q(R){function U(_,T,y){if(_ instanceof V.Z)return _.toArray();if((0,w.m)(_))return _;throw new b.aV(T,b.rH.InvalidParameter,y)}function N(_,T){const y=_.length,f=Math.floor(y/2);return 0===y?[]:1===y?[_[0]]:function K(_,T,y){const f=[];for(;_.length>0||T.length>0;)if(_.length>0&&T.length>0){let F=y(_[0],T[0]);isNaN(F)&&(F=0),F<=0?(f.push(_[0]),_=_.slice(1)):(f.push(T[0]),T=T.slice(1))}else _.length>0?(f.push(_[0]),_=_.slice(1)):T.length>0&&(f.push(T[0]),T=T.slice(1));return f}(N(_.slice(0,f),T),N(_.slice(f,y),T),T)}function M(_,T){return Z.apply(this,arguments)}function Z(){return(Z=(0,W.Z)(function*(_,T){const y=_.length,f=Math.floor(y/2);if(0===y)return[];if(1===y)return[_[0]];const F=[yield M(_.slice(0,f),T),yield M(_.slice(f,y),T)];return te(F[0],F[1],T,[])})).apply(this,arguments)}function te(_,T,y,f){return v.apply(this,arguments)}function v(){return(v=(0,W.Z)(function*(_,T,y,f){const F=f;if(!(_.length>0||T.length>0))return f;if(_.length>0&&T.length>0){let x=yield y(_[0],T[0]);return isNaN(x)&&(x=1),x<=0?(F.push(_[0]),_=_.slice(1)):(F.push(T[0]),T=T.slice(1)),te(_,T,y,f)}return _.length>0?(F.push(_[0]),te(_=_.slice(1),T,y,f)):T.length>0?(F.push(T[0]),te(_,T=T.slice(1),y,f)):void 0})).apply(this,arguments)}function L(_,T,y,f){(0,w.y)(y,1,2,_,T);let F=y[0];if((0,w.x)(F)&&(F=F.toArray()),!1===(0,w.m)(F))throw new b.aV(_,b.rH.InvalidParameter,T);if(y.length>1){if(!1===(0,w.i)(y[1]))throw new b.aV(_,b.rH.InvalidParameter,T);let h=F;const P=y[1].createFunction(_);return f?M(h,P):(h=N(h,(Y,G)=>P(Y,G)),h)}let x=F;if(0===x.length)return[];const E={};for(let h=0;h<x.length;h++){const P=(0,w.B)(x[h]);""!==P&&(E[P]=!0)}if(!0===E.Array||!0===E.Dictionary||!0===E.Feature||!0===E.Point||!0===E.Polygon||!0===E.Polyline||!0===E.Multipoint||!0===E.Extent||!0===E.Function)return x.slice(0);let z=0,H="";for(const h in E)z++,H=h;return x=z>1||"String"===H?N(x,(h,P)=>{if(null==h||h===w.v)return null==P||P===w.v?0:1;if(null==P||P===w.v)return-1;const Y=(0,w.j)(h),G=(0,w.j)(P);return Y<G?-1:Y===G?0:1}):"Number"===H?N(x,(h,P)=>h-P):"Boolean"===H?N(x,(h,P)=>h===P?0:P?-1:1):"Date"===H?N(x,(h,P)=>P-h):x.slice(0),x}R.functions.array=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{(0,w.y)(F,1,2,_,T);const x=(0,w.g)(F[0]);if(isNaN(x)||!1===(0,w.z)(x))throw new b.aV(_,b.rH.InvalidParameter,T);const E=(0,w.A)(F[1],null),z=new Array(x);return z.fill(E),z})},R.functions.front=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,1,1,_,T),(0,w.x)(F[0])){if(F[0].length()<=0)throw new b.aV(_,b.rH.OutOfBounds,T);return F[0].get(0)}if((0,w.m)(F[0])){if(F[0].length<=0)throw new b.aV(_,b.rH.OutOfBounds,T);return F[0][0]}throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.back=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,1,1,_,T),(0,w.x)(F[0])){if(F[0].length()<=0)throw new b.aV(_,b.rH.OutOfBounds,T);return F[0].get(F[0].length()-1)}if((0,w.m)(F[0])){if(F[0].length<=0)throw new b.aV(_,b.rH.OutOfBounds,T);return F[0][F[0].length-1]}throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.push=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,1,2,_,T),(0,w.m)(F[0]))return F[0][F[0].length]=F[1],F[0].length;throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.pop=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,1,1,_,T),(0,w.m)(F[0])){if(F[0].length<=0)throw new b.aV(_,b.rH.OutOfBounds,T);const x=F[0][F[0].length-1];return F[0].length=F[0].length-1,x}throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.erase=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,2,2,_,T),(0,w.m)(F[0])){let x=(0,w.g)(F[1]);if(isNaN(x)||!1===(0,w.z)(x))throw new b.aV(_,b.rH.InvalidParameter,T);const E=F[0];if(E.length<=0)throw new b.aV(_,b.rH.OutOfBounds,T);if(x<0&&(x=E.length+x),x<0)throw new b.aV(_,b.rH.OutOfBounds,T);if(x>=E.length)throw new b.aV(_,b.rH.OutOfBounds,T);return E.splice(x,1),w.v}throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.insert=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,3,3,_,T),(0,w.m)(F[0])){const x=(0,w.g)(F[1]);if(isNaN(x)||!1===(0,w.z)(x))throw new b.aV(_,b.rH.InvalidParameter,T);const E=F[2],z=F[0];if(x>z.length)throw new b.aV(_,b.rH.OutOfBounds,T);if(x<0&&x<-1*z.length)throw new b.aV(_,b.rH.OutOfBounds,T);return x===z.length?(z[x]=E,w.v):(z.splice(x,0,E),w.v)}throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.resize=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,2,3,_,T),(0,w.m)(F[0])){const x=(0,w.g)(F[1]);if(isNaN(x)||!1===(0,w.z)(x))throw new b.aV(_,b.rH.InvalidParameter,T);if(x<0)throw new b.aV(_,b.rH.InvalidParameter,T);const E=(0,w.A)(F[2],null),z=F[0];if(z.length>=x)return z.length=x,w.v;const H=z.length;z.length=x;for(let h=H;h<z.length;h++)z[h]=E;return w.v}throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.includes=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,2,2,_,T),(0,w.m)(F[0])){const x=F[1];return F[0].findIndex(E=>(0,w.s)(E,x))>-1}if((0,w.x)(F[0])){const x=F[1];return F[0].toArray().findIndex(E=>(0,w.s)(E,x))>-1}throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.slice=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,1,3,_,T),(0,w.m)(F[0])){const x=(0,w.g)((0,w.A)(F[1],0)),E=(0,w.g)((0,w.A)(F[2],F[0].length));if(isNaN(x)||!1===(0,w.z)(x))throw new b.aV(_,b.rH.InvalidParameter,T);if(isNaN(E)||!1===(0,w.z)(E))throw new b.aV(_,b.rH.InvalidParameter,T);return F[0].slice(x,E)}if((0,w.x)(F[0])){const x=F[0],E=(0,w.g)((0,w.A)(F[1],0)),z=(0,w.g)((0,w.A)(F[2],x.length()));if(isNaN(E)||!1===(0,w.z)(E))throw new b.aV(_,b.rH.InvalidParameter,T);if(isNaN(z)||!1===(0,w.z)(z))throw new b.aV(_,b.rH.InvalidParameter,T);return x.toArray().slice(E,z)}throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.splice=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{const x=[];for(let E=0;E<F.length;E++)(0,w.m)(F[E])?x.push(...F[E]):(0,w.x)(F[E])?x.push(...F[E].toArray()):x.push(F[E]);return x})},R.functions.top=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{if((0,w.y)(F,2,2,_,T),(0,w.m)(F[0]))return(0,w.g)(F[1])>=F[0].length?F[0].slice(0):F[0].slice(0,(0,w.g)(F[1]));if((0,w.x)(F[0]))return(0,w.g)(F[1])>=F[0].length()?F[0].slice(0):F[0].slice(0,(0,w.g)(F[1]));throw new b.aV(_,b.rH.InvalidParameter,T)})},R.functions.first=function(_,T){return R.standardFunction(_,T,(y,f,F)=>((0,w.y)(F,1,1,_,T),(0,w.m)(F[0])?0===F[0].length?null:F[0][0]:(0,w.x)(F[0])?0===F[0].length()?null:F[0].get(0):null))},"sync"===R.mode&&(R.functions.sort=function(_,T){return R.standardFunction(_,T,(y,f,F)=>L(_,T,F,!1))},R.functions.any=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{(0,w.y)(F,2,2,_,T);const x=F[1].createFunction(_),E=U(F[0],_,T);for(const z of E){const H=x(z);if((0,w.a)(H)&&!0===H)return!0}return!1})},R.functions.all=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{(0,w.y)(F,2,2,_,T);const x=F[1].createFunction(_),E=U(F[0],_,T);for(const z of E)if(!0!==x(z))return!1;return!0})},R.functions.none=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{(0,w.y)(F,2,2,_,T);const x=F[1].createFunction(_),E=U(F[0],_,T);for(const z of E)if(!0===x(z))return!1;return!0})},R.functions.reduce=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{(0,w.y)(F,2,3,_,T);const x=F[1].createFunction(_),E=U(F[0],_,T);return 2===F.length?0===E.length?null:E.reduce((z,H)=>{const h=x(z,H);return void 0!==h&&h!==w.v?h:null}):E.reduce((z,H)=>{const h=x(z,H);return void 0!==h&&h!==w.v?h:null},F[2])})},R.functions.map=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{(0,w.y)(F,2,2,_,T);const x=F[1].createFunction(_),E=U(F[0],_,T),z=[];for(const H of E){const h=x(H);z.push(void 0!==h&&h!==w.v?h:null)}return z})},R.functions.filter=function(_,T){return R.standardFunction(_,T,(y,f,F)=>{(0,w.y)(F,2,2,_,T);const x=F[1].createFunction(_),E=U(F[0],_,T),z=[];for(const H of E)!0===x(H)&&z.push(H);return z})}),"async"===R.mode&&(R.functions.sort=function(_,T){return R.standardFunctionAsync(_,T,(y,f,F)=>L(_,T,F,!0))},R.functions.any=function(_,T){return R.standardFunctionAsync(_,T,function(){var y=(0,W.Z)(function*(f,F,x){(0,w.y)(x,2,2,_,T);const E=x[1].createFunction(_),z=U(x[0],_,T);for(const H of z){const h=yield E(H);let P=null;if(P=(0,D.y8)(P)?yield h:h,(0,w.a)(P)&&!0===P)return!0}return!1});return function(f,F,x){return y.apply(this,arguments)}}())},R.functions.all=function(_,T){return R.standardFunctionAsync(_,T,function(){var y=(0,W.Z)(function*(f,F,x){(0,w.y)(x,2,2,_,T);const E=x[1].createFunction(_),z=U(x[0],_,T);for(const H of z){const h=yield E(H);let P=null;if(P=(0,D.y8)(P)?yield h:h,!0!==P)return!1}return!0});return function(f,F,x){return y.apply(this,arguments)}}())},R.functions.none=function(_,T){return R.standardFunctionAsync(_,T,function(){var y=(0,W.Z)(function*(f,F,x){(0,w.y)(x,2,2,_,T);const E=x[1].createFunction(_),z=U(x[0],_,T);for(const H of z){const h=yield E(H);let P=null;if(P=(0,D.y8)(P)?yield h:h,!0===P)return!1}return!0});return function(f,F,x){return y.apply(this,arguments)}}())},R.functions.filter=function(_,T){return R.standardFunctionAsync(_,T,function(){var y=(0,W.Z)(function*(f,F,x){(0,w.y)(x,2,2,_,T);const E=x[1].createFunction(_),z=U(x[0],_,T),H=[];for(const h of z){const P=yield E(h);let Y=null;Y=(0,D.y8)(Y)?yield P:P,!0===Y&&H.push(h)}return H});return function(f,F,x){return y.apply(this,arguments)}}())},R.functions.reduce=function(_,T){return R.standardFunctionAsync(_,T,(y,f,F)=>{(0,w.y)(F,2,3,_,T);const x=F[1].createFunction(_),E=U(F[0],_,T);let z=null;if(F.length>2){const H=(0,w.A)(F[2],null);z=E.reduce(function(){var h=(0,W.Z)(function*(P,Y){let G=yield P;return void 0!==G&&G!==w.v||(G=null),x(G,Y)});return function(P,Y){return h.apply(this,arguments)}}(),Promise.resolve(H))}else{if(0===E.length)return null;z=E.reduce(function(){var H=(0,W.Z)(function*(h,P,Y){if(Y<=1)return x(h,P);let G=yield h;return void 0!==G&&G!==w.v||(G=null),x(G,P)});return function(h,P,Y){return H.apply(this,arguments)}}())}return z.then(H=>void 0!==H&&H!==w.v?H:null)})},R.functions.map=function(_,T){return R.standardFunctionAsync(_,T,function(){var y=(0,W.Z)(function*(f,F,x){(0,w.y)(x,2,2,_,T);const E=x[1].createFunction(_),z=U(x[0],_,T),H=[];for(const h of z){const P=yield E(h);let Y=null;Y=(0,D.y8)(Y)?yield P:P,H.push(void 0!==Y&&Y!==w.v?Y:null)}return H});return function(f,F,x){return y.apply(this,arguments)}}())})}},Symbol.toStringTag,{value:"Module"}))},44819:(be,me,j)=>{j.d(me,{A:()=>ce,B:()=>Te,C:()=>S,D:()=>st,E:()=>Pe,F:()=>Tt,G:()=>Dt,H:()=>wt,I:()=>E,J:()=>et,K:()=>Ft,L:()=>Y,M:()=>ht,N:()=>O,O:()=>_t,P:()=>se,Q:()=>C,R:()=>z,S:()=>I,T:()=>$e,U:()=>Ye,V:()=>ke,W:()=>ie,X:()=>gt,Y:()=>Ve,Z:()=>pt,_:()=>ot,a:()=>de,b:()=>ne,c:()=>ge,d:()=>tt,e:()=>yt,f:()=>ue,g:()=>ve,h:()=>It,i:()=>G,j:()=>Be,k:()=>Ie,l:()=>mt,m:()=>we,n:()=>X,o:()=>h,p:()=>P,q:()=>ze,r:()=>Et,s:()=>Me,t:()=>Ue,u:()=>ct,v:()=>H,w:()=>_e,x:()=>Le,y:()=>At,z:()=>pe});var W=j(71670),b=j(55583),V=j(98909),w=j(73085),D=j(69545),Q=j(82734),ee=j(10465),R=j(70535),U=j(23675),N=j(35787),K=j(55733),M=j(7913),Z=j(64626),te=j(53661),v=j(49389),L=j(12818),_=j(92051),T=j(84940),y=j(39353),f=j(43918);class F{constructor(g){this.value=g}}class x{constructor(g){this.value=g}}const E=x,z=F,H={type:"VOID"},h={type:"BREAK"},P={type:"CONTINUE"};function Y(p,g,B){return""===g||null==g||g===B||g===B?p:p=p.split(g).join(B)}function G(p){return p instanceof b.Rm}function re(p){return p instanceof y.P}function ue(p){return!!(ge(p)||ne(p)||Ie(p)||de(p)||null===p||p===H||"number"==typeof p)}function ce(p,g){return void 0===p?g:p}function Te(p){return null==p?"":we(p)||Le(p)?"Array":Ie(p)?"Date":ge(p)?"String":de(p)?"Boolean":ne(p)?"Number":"esri.arcade.Attachment"===p?.declaredClass?"Attachment":"esri.arcade.Portal"===p?.declaredClass?"Portal":"esri.arcade.Dictionary"===p?.declaredClass?"Dictionary":p instanceof y.P?"Module":_e(p)?"Feature":p instanceof N.Z?"Point":p instanceof K.Z?"Polygon":p instanceof M.Z?"Polyline":p instanceof U.Z?"Multipoint":p instanceof ee.Z?"Extent":G(p)?"Function":$e(p)?"FeatureSet":Ye(p)?"FeatureSetCollection":p===H?"":"number"==typeof p&&isNaN(p)?"Number":"Unrecognised Type"}function ge(p){return"string"==typeof p||p instanceof String}function de(p){return"boolean"==typeof p}function ne(p){return"number"==typeof p}function pe(p){return"number"==typeof p&&isFinite(p)&&Math.floor(p)===p}function we(p){return p instanceof Array}function _e(p){return"esri.arcade.Feature"===p?.arcadeDeclaredClass}function $e(p){return"esri.arcade.featureset.support.FeatureSet"===p?.declaredRootClass}function Ye(p){return"esri.arcade.featureSetCollection"===p?.declaredRootClass}function Le(p){return p instanceof V.Z}function Ie(p){return p instanceof Q.iG}function lt(p){return null!=p&&"object"==typeof p}function Ne(p){return p instanceof Date}function At(p,g,B,J,q){if(p.length<g||p.length>B)throw new f.aV(J,f.rH.WrongNumberOfParameters,q)}function Pe(p){return p<0?-Math.round(-p):Math.round(p)}function ht(){let p=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,g=>{const B=(p+16*Math.random())%16|0;return p=Math.floor(p/16),("x"===g?B:3&B|8).toString(16)})}function Re(p,g){return isNaN(p)||null==g||""===g?p.toString():(g=Y(g,"\u2030",""),g=Y(g,"\xa4",""),(0,v.WU)(p,{pattern:g}))}function Qe(p,g){return null==g||""===g?p.toISOString(!0):p.toFormat(st(g),{locale:(0,_.Kd)(),numberingSystem:"latn"})}function st(p){p=p.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let g="";const B=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const J of p.match(B)||[])switch(J){case"D":g+="d";break;case"DD":g+="dd";break;case"DDD":g+="o";break;case"d":g+="c";break;case"ddd":g+="ccc";break;case"dddd":g+="cccc";break;case"M":g+="L";break;case"MM":g+="LL";break;case"MMM":g+="LLL";break;case"MMMM":g+="LLLL";break;case"YY":g+="yy";break;case"Y":case"YYYY":g+="yyyy";break;case"Q":g+="q";break;case"Z":g+="ZZ";break;case"ZZ":g+="ZZZ";break;case"S":g+="'S'";break;case"SS":g+="'SS'";break;case"SSS":g+="u";break;case"A":case"a":g+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":g+=J;break;default:J.length>=2&&"["===J.slice(0,1)&&"]"===J.slice(-1)?g+=`'${J.slice(1,-1)}'`:g+=`'${J}'`}return g}function Ce(p,g,B){switch(B){case">":return p>g;case"<":return p<g;case">=":return p>=g;case"<=":return p<=g}return!1}function Et(p,g,B){if(null===p){if(null===g||g===H)return Ce(null,null,B);if(ne(g))return Ce(0,g,B);if(ge(g)||de(g))return Ce(0,ve(g),B);if(Ie(g))return Ce(0,g.toNumber(),B)}if(p===H){if(null===g||g===H)return Ce(null,null,B);if(ne(g))return Ce(0,g,B);if(ge(g)||de(g))return Ce(0,ve(g),B);if(Ie(g))return Ce(0,g.toNumber(),B)}else if(ne(p)){if(ne(g))return Ce(p,g,B);if(de(g))return Ce(p,ve(g),B);if(null===g||g===H)return Ce(p,0,B);if(ge(g))return Ce(p,ve(g),B);if(Ie(g))return Ce(p,g.toNumber(),B)}else if(ge(p)){if(ge(g))return Ce(Be(p),Be(g),B);if(Ie(g))return Ce(ve(p),g.toNumber(),B);if(ne(g))return Ce(ve(p),g,B);if(null===g||g===H)return Ce(ve(p),0,B);if(de(g))return Ce(ve(p),ve(g),B)}else if(Ie(p)){if(Ie(g))return Ce(p.toNumber(),g.toNumber(),B);if(null===g||g===H)return Ce(p.toNumber(),0,B);if(ne(g))return Ce(p.toNumber(),g,B);if(de(g)||ge(g))return Ce(p.toNumber(),ve(g),B)}else if(de(p)){if(de(g))return Ce(p,g,B);if(ne(g))return Ce(ve(p),ve(g),B);if(Ie(g))return Ce(ve(p),g.toNumber(),B);if(null===g||g===H)return Ce(ve(p),0,B);if(ge(g))return Ce(ve(p),ve(g),B)}return!!Me(p,g)&&("<="===B||">="===B)}function Me(p,g){if(p===g||null===p&&g===H||null===g&&p===H)return!0;if(Ie(p)&&Ie(g))return p.equals(g);if(p instanceof w.Z||p instanceof D.Z)return p.equalityTest(g);if(p instanceof N.Z&&g instanceof N.Z){const B=p.cache._arcadeCacheId;if(null!=B)return B===g.cache._arcadeCacheId}return!!(lt(p)&&lt(g)&&(p._arcadeCacheId===g._arcadeCacheId&&null!=p._arcadeCacheId||p._underlyingGraphic===g._underlyingGraphic&&null!=p._underlyingGraphic))}function Be(p,g){if(ge(p))return p;if(null===p)return"";if(ne(p))return Re(p,g);if(de(p))return p.toString();if(Ie(p))return Qe(p,g);if(p instanceof R.Z)return JSON.stringify(p.toJSON());if(we(p)){const B=[];for(let J=0;J<p.length;J++)B[J]=rt(p[J]);return"["+B.join(",")+"]"}if(p instanceof V.Z){const B=[];for(let J=0;J<p.length();J++)B[J]=rt(p.get(J));return"["+B.join(",")+"]"}return null!==p&&"object"==typeof p&&void 0!==p.castToText?p.castToText():G(p)?"object, Function":p===H?"":re(p)?"object, Module":""}function ke(p){const g=[];if(!we(p))return null;if(p instanceof V.Z){for(let B=0;B<p.length();B++)g[B]=ve(p.get(B));return g}for(let B=0;B<p.length;B++)g[B]=ve(p[B]);return g}function Ue(p,g,B=!1){if(ge(p))return p;if(null===p)return"";if(ne(p))return Re(p,g);if(de(p))return p.toString();if(Ie(p))return Qe(p,g);if(p instanceof R.Z)return p instanceof ee.Z?'{"xmin":'+p.xmin.toString()+',"ymin":'+p.ymin.toString()+","+(p.hasZ?'"zmin":'+p.zmin.toString()+",":"")+(p.hasM?'"mmin":'+p.mmin.toString()+",":"")+'"xmax":'+p.xmax.toString()+',"ymax":'+p.ymax.toString()+","+(p.hasZ?'"zmax":'+p.zmax.toString()+",":"")+(p.hasM?'"mmax":'+p.mmax.toString()+",":"")+'"spatialReference":'+qe(p.spatialReference)+"}":qe(p.toJSON(),(J,q)=>J.key===q.key?0:"spatialReference"===J.key?1:"spatialReference"===q.key||J.key<q.key?-1:J.key>q.key?1:0);if(we(p)){const J=[];for(let q=0;q<p.length;q++)J[q]=rt(p[q],B);return"["+J.join(",")+"]"}if(p instanceof V.Z){const J=[];for(let q=0;q<p.length();q++)J[q]=rt(p.get(q),B);return"["+J.join(",")+"]"}return null!==p&&"object"==typeof p&&void 0!==p.castToText?p.castToText(B):G(p)?"object, Function":p===H?"":re(p)?"object, Module":""}function rt(p,g=!1){if(null===p)return"null";if(de(p)||ne(p)||ge(p))return JSON.stringify(p);if(p instanceof R.Z||p instanceof V.Z||p instanceof Array)return Ue(p,null,g);if(Ie(p))return JSON.stringify(g?p.getTime():Qe(p,""));if(null!==p&&"object"==typeof p){if(void 0!==p.castToText)return p.castToText(g)}else if(p===H)return"null";return"null"}function ve(p,g){return ne(p)?p:null===p||""===p?0:Ie(p)?NaN:de(p)?p?1:0:we(p)||""===p||void 0===p?NaN:void 0!==g&&ge(p)?(g=Y(g,"\u2030",""),g=Y(g,"\xa4",""),(0,v.Qc)(p,{pattern:g})):p===H?0:Number(p)}function mt(p,g){if(Ie(p))return p;if(ge(p)){const B=function Ct(p,g){const B=/ (\d\d)/,J=(0,Q.Qn)(g);let q=Z.ou.fromISO(p,{zone:J});return q.isValid||B.test(p)&&(p=p.replace(B,"T$1"),q=Z.ou.fromISO(p,{zone:g}),q.isValid)?q:null}(p,g);if(B)return Q.iG.dateTimeToArcadeDate(B)}return null}function It(p){return de(p)?p:ge(p)?"true"===(p=p.toLowerCase()):!!ne(p)&&0!==p&&!isNaN(p)}function ze(p,g){return(0,te.Wi)(p)?null:(null!=p.spatialReference||(p.spatialReference=g),p)}function Tt(p){if(null===p)return null;if(p instanceof N.Z)return"NaN"===p.x||null===p.x||isNaN(p.x)?null:p;if(p instanceof K.Z){if(0===p.rings.length)return null;for(const g of p.rings)if(g.length>0)return p;return null}if(p instanceof M.Z){if(0===p.paths.length)return null;for(const g of p.paths)if(g.length>0)return p;return null}return p instanceof U.Z?0===p.points.length?null:p:p instanceof ee.Z?"NaN"===p.xmin||null===p.xmin||isNaN(p.xmin)?null:p:null}function pt(p,g){if(!p||!p.domain)return g;let B=null;if("string"===p.field.type||"esriFieldTypeString"===p.field.type)g=Be(g);else{if(null==g)return null;if(""===g)return g;g=ve(g)}for(let J=0;J<p.domain.codedValues.length;J++){const q=p.domain.codedValues[J];q.code===g&&(B=q)}return null===B?g:B.name}function ot(p,g){if(!p||!p.domain)return g;let B=null;g=Be(g);for(let J=0;J<p.domain.codedValues.length;J++){const q=p.domain.codedValues[J];q.name===g&&(B=q)}return null===B?g:B.code}function Ve(p,g,B=null,J=null){if(!g||!g.fields)return null;let q,he,ye=null;for(let Ee=0;Ee<g.fields.length;Ee++){const Se=g.fields[Ee];Se.name.toLowerCase()===p.toString().toLowerCase()&&(ye=Se)}if(null===ye)throw new f.aV(null,f.rH.FieldNotFound,null,{key:p});return null===J&&B&&g.typeIdField&&(J=B.hasField(g.typeIdField)?B.field(g.typeIdField):null),null!=J&&g.types.some(Ee=>Ee.id===J&&(q=Ee.domains&&Ee.domains[ye.name],q&&"inherited"===q.type&&(q=We(ye.name,g),he=!0),!0)),he||q||(q=We(p,g)),{field:ye,domain:q}}function We(p,g){let B;return g.fields.some(J=>(J.name.toLowerCase()===p.toLowerCase()&&(B=J.domain),!!B)),B}function qe(p,g){g||(g={}),"function"==typeof g&&(g={cmp:g});const B="boolean"==typeof g.cycles&&g.cycles,J=g.cmp&&(q=g.cmp,function(ye){return function(Ee,Se){return q({key:Ee,value:ye[Ee]},{key:Se,value:ye[Se]})}});var q;const he=[];return function ye(Ee){if(Ee&&Ee.toJSON&&"function"==typeof Ee.toJSON&&(Ee=Ee.toJSON()),void 0===Ee)return;if("number"==typeof Ee)return isFinite(Ee)?""+Ee:"null";if("object"!=typeof Ee)return JSON.stringify(Ee);let Se,Ke;if(Array.isArray(Ee)){for(Ke="[",Se=0;Se<Ee.length;Se++)Se&&(Ke+=","),Ke+=ye(Ee[Se])||"null";return Ke+"]"}if(null===Ee)return"null";if(he.includes(Ee)){if(B)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const it=he.push(Ee)-1,Mt=Object.keys(Ee).sort(J&&J(Ee));for(Ke="",Se=0;Se<Mt.length;Se++){const Bt=Mt[Se],Vt=ye(Ee[Bt]);Vt&&(Ke&&(Ke+=","),Ke+=JSON.stringify(Bt)+":"+Vt)}return he.splice(it,1),"{"+Ke+"}"}(p)}function Dt(p){if(null===p)return null;const g=[];for(const B of p)g.push(B&&B.arcadeDeclaredClass&&"esri.arcade.Feature"===B.arcadeDeclaredClass?B.geometry():B);return g}function Je(p,g){if(!(g instanceof N.Z))throw new f.aV(null,f.rH.InvalidParameter,null);p.push(g.hasZ?g.hasM?[g.x,g.y,g.z,g.m]:[g.x,g.y,g.z]:[g.x,g.y])}function et(p,g){if(we(p)||Le(p)){let B=!1,J=!1,q=[],he=g;if(we(p)){for(const ye of p)Je(q,ye);q.length>0&&(he=p[0].spatialReference,B=p[0].hasZ,J=p[0].hasM)}else if(p instanceof D.Z)q=p._elements,q.length>0&&(B=p._hasZ,J=p._hasM,he=p.get(0).spatialReference);else{if(!Le(p))throw new f.aV(null,f.rH.InvalidParameter,null);for(const ye of p.toArray())Je(q,ye);q.length>0&&(he=p.get(0).spatialReference,B=!0===p.get(0).hasZ,J=!0===p.get(0).hasM)}return 0===q.length?null:((0,L.bu)(q,J,B)||(q=q.slice(0).reverse()),new K.Z({rings:[q],spatialReference:he,hasZ:B,hasM:J}))}return p}function wt(p,g){if(we(p)||Le(p)){let B=!1,J=!1,q=[],he=g;if(we(p)){for(const ye of p)Je(q,ye);q.length>0&&(he=p[0].spatialReference,B=!0===p[0].hasZ,J=!0===p[0].hasM)}else if(p instanceof D.Z)q=p._elements,q.length>0&&(B=p._hasZ,J=p._hasM,he=p.get(0).spatialReference);else if(Le(p)){for(const ye of p.toArray())Je(q,ye);q.length>0&&(he=p.get(0).spatialReference,B=!0===p.get(0).hasZ,J=!0===p.get(0).hasM)}return 0===q.length?null:new M.Z({paths:[q],spatialReference:he,hasZ:B,hasM:J})}return p}function Ft(p,g){if(we(p)||Le(p)){let B=!1,J=!1,q=[],he=g;if(we(p)){for(const ye of p)Je(q,ye);q.length>0&&(he=p[0].spatialReference,B=!0===p[0].hasZ,J=!0===p[0].hasM)}else if(p instanceof D.Z)q=p._elements,q.length>0&&(B=p._hasZ,J=p._hasM,he=p.get(0).spatialReference);else if(Le(p)){for(const ye of p.toArray())Je(q,ye);q.length>0&&(he=p.get(0).spatialReference,B=!0===p.get(0).hasZ,J=!0===p.get(0).hasM)}return 0===q.length?null:new U.Z({points:q,spatialReference:he,hasZ:B,hasM:J})}return p}function gt(p,g=!1){const B=[];if(null===p)return B;if(!0===we(p)){for(let J=0;J<p.length;J++){const q=Be(p[J]);""===q&&!0!==g||B.push(q)}return B}if(p instanceof V.Z){for(let J=0;J<p.length();J++){const q=Be(p.get(J));""===q&&!0!==g||B.push(q)}return B}if(ue(p)){const J=Be(p);return""===J&&!0!==g||B.push(J),B}return[]}let De=0;function ie(p){return De++,De%100==0?(De=0,new Promise(g=>{setTimeout(()=>{g(p)},0)})):p}function ct(p,g,B){switch(B){case"&":return p&g;case"|":return p|g;case"^":return p^g;case"<<":return p<<g;case">>":return p>>g;case">>>":return p>>>g}}function tt(p,g=null){return null==p?null:de(p)||ne(p)||ge(p)?p:p instanceof R.Z?!0===g?.keepGeometryType?p:p.toJSON():p instanceof V.Z?p.toArray().map(B=>tt(B,g)):p instanceof Array?p.map(B=>tt(B,g)):Ne(p)?p:Ie(p)?p.toJSDate():null!==p&&"object"==typeof p&&void 0!==p.castAsJson?p.castAsJson(g):null}function vt(p,g,B,J,q){return dt.apply(this,arguments)}function dt(){return(dt=(0,W.Z)(function*(p,g,B,J,q){const he=yield yt(p,g,B);q[J]=he})).apply(this,arguments)}function yt(p){return ft.apply(this,arguments)}function ft(){return(ft=(0,W.Z)(function*(p,g=null,B=null){if(p instanceof V.Z&&(p=p.toArray()),null==p)return null;if(ue(p)||p instanceof R.Z||Ne(p)||Ie(p))return tt(p,B);if(p instanceof Array){const J=[],q=[];for(const he of p)null===he||ue(he)||he instanceof R.Z||Ne(he)||Ie(he)?q.push(tt(he,B)):(q.push(null),J.push(vt(he,g,B,q.length-1,q)));return J.length>0&&(yield Promise.all(J)),q}return null!==p&&"object"==typeof p&&void 0!==p.castAsJsonAsync?p.castAsJsonAsync(g,B):null})).apply(this,arguments)}function se(p,g,B){const J=p.fullSchema();return null!==J&&J.fields?Ve(g,J,p,B):null}function _t(p){const g=p.fullSchema();return null===g?null:g.fields&&g.typeIdField?{subtypeField:g.typeIdField,subtypes:g.types?g.types.map(B=>({name:B.name,code:B.id})):[]}:null}function C(p,g,B,J){const q=p.fullSchema();if(null===q||!q.fields)return null;const he=Ve(g,q,p,J);if(void 0===B)try{B=p.field(g)}catch{return null}return pt(he,B)}function I(p,g,B,J){const q=p.fullSchema();if(null===q||!q.fields)return null;if(void 0===B){try{B=p.field(g)}catch{return null}return B}return ot(Ve(g,q,p,J),B)}function S(p){return p?.timeReference?.timeZone?p?.timeReference?.timeZone:"system"}function O(p){const g=p.fullSchema();if(null===g||!g.fields)return null;const B=[];for(const J of g.fields)B.push((0,T.Sh)(J));return{objectIdField:g.objectIdField,globalIdField:g.globalIdField,geometryType:void 0===T.q2[g.geometryType]?"":T.q2[g.geometryType],fields:B,datesInUnknownTimezone:!0===g.datesInUnknownTimezone,preferredTimeReference:g.preferredTimeReference||null,editFieldsInfo:g.editFieldsInfo||null,timeInfo:g.timeInfo||null,dateFieldsTimeReference:g.dateFieldsTimeReference||null}}const X=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:E,ImplicitResultE:x,ReturnResult:z,ReturnResultE:F,absRound:Pe,autoCastArrayOfPointsToMultiPoint:Ft,autoCastArrayOfPointsToPolygon:et,autoCastArrayOfPointsToPolyline:wt,autoCastFeatureToGeometry:Dt,binaryOperator:ct,breakResult:h,castAsJson:tt,castAsJsonAsync:yt,continueResult:P,defaultTimeZone:S,defaultUndefined:ce,equalityTest:Me,featureDomainCodeLookup:I,featureDomainValueLookup:C,featureFullDomain:se,featureSchema:O,featureSubtypes:_t,fixNullGeometry:Tt,fixSpatialReference:ze,formatDate:Qe,formatNumber:Re,generateUUID:ht,getDomain:Ve,getDomainCode:ot,getDomainValue:pt,getType:Te,greaterThanLessThan:Et,isArray:we,isBoolean:de,isDate:Ie,isFeature:_e,isFeatureSet:$e,isFeatureSetCollection:Ye,isFunctionParameter:G,isImmutableArray:Le,isInteger:pe,isJsDate:Ne,isModule:re,isNumber:ne,isObject:lt,isSimpleType:ue,isString:ge,multiReplace:Y,pcCheck:At,stableStringify:qe,standardiseDateFormat:st,tick:ie,toBoolean:It,toDate:mt,toNumber:ve,toNumberArray:ke,toString:Be,toStringArray:gt,toStringExplicit:Ue,voidOperation:H},Symbol.toStringTag,{value:"Module"}))},55425:(be,me,j)=>{j.r(me),j.d(me,{Dictionary:()=>V.Z,arcade:()=>Or,arcadeFeature:()=>w.Z,convertFeatureLayerToFeatureSet:()=>ii,convertJsonToArcade:()=>si,convertMapToFeatureSetCollection:()=>ai,convertServiceUrlToWorkspace:()=>ri,createExecContext:()=>Kr,createFeature:()=>Jr,createFunction:()=>Wr,createSyntaxTree:()=>Rt,dependsOnView:()=>ei,enableFeatureSetOperations:()=>li,enableGeometryOperations:()=>ui,evalSyntaxTree:()=>Yr,executeAsyncFunction:()=>Xr,executeFunction:()=>Qr,extractFieldNames:()=>qr,getArcadeType:()=>zr,getViewInfo:()=>ni,hasGeometryFunctions:()=>mi,hasGeometryOperations:()=>Di,hasVariable:()=>ti,loadScriptDependencies:()=>oi,updateExecContext:()=>$r}),j(6010);var b=j(71670),V=j(27500),w=j(26214),D=j(44819),Q=j(70748),ee=j(37157),R=j(13655),U=j(24874),N=j(14178),K=j(34170),M=j(2758),Z=j(26273),te=j(30801),v=j(70535),L=j(68230),_=j(48387),T=j(39353),y=j(55583),f=j(43918);function E(l,u,c){try{return c(l,null,u.arguments)}catch(m){throw m}}function z(l,u){try{switch(u.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclarator":return function Le(l,u){let c=null===u.init?null:z(l,u.init);c===D.v&&(c=null);const m=u.id.name.toLowerCase();if(_e(m),null!==l.localScope){if(void 0!==l.localScope[m])return"lscope['"+m+"']="+c+"; ";if(void 0!==l.localScope._SymbolsMap[m])return"lscope['"+l.localScope._SymbolsMap[m]+"']="+c+"; ";{const k=Be(l);return l.localScope._SymbolsMap[m]=k,l.mangleMap[m]=k,"lscope['"+k+"']="+c+"; "}}if(void 0!==l.globalScope[m])return"gscope['"+m+"']="+c+"; ";if(void 0!==l.globalScope._SymbolsMap[m])return"gscope['"+l.globalScope._SymbolsMap[m]+"']="+c+"; ";if(l.undeclaredGlobalsInFunctions.has(m)){const k=l.undeclaredGlobalsInFunctions.get(m).manglename;return l.globalScope._SymbolsMap[m]=k,l.mangleMap[m]=k,l.undeclaredGlobalsInFunctions.delete(m),"gscope[lang.setAssig('"+k+"', runtimeCtx)]="+c+"; "}const A=Be(l);return l.globalScope._SymbolsMap[m]=A,l.mangleMap[m]=A,"gscope['"+A+"']="+c+"; "}(l,u);case"VariableDeclaration":return function Ye(l,u){const c=[];for(let m=0;m<u.declarations.length;m++)c.push(z(l,u.declarations[m]));return c.join("\n")+" \n lastStatement=  lc.voidOperation; \n"}(l,u);case"BlockStatement":case"Program":return de(l,u);case"FunctionDeclaration":return function $e(l,u){const c=u.id.name.toLowerCase();_e(c);let m="",A=!1;void 0!==l.globalScope[c]?m=c:void 0!==l.globalScope._SymbolsMap[c]?m=l.globalScope._SymbolsMap[c]:l.undeclaredGlobalsInFunctions.has(c)?(m=l.undeclaredGlobalsInFunctions.get(c).manglename,l.globalScope._SymbolsMap[c]=m,l.mangleMap[c]=m,l.undeclaredGlobalsInFunctions.delete(c),A=!0):(m=Be(l),l.globalScope._SymbolsMap[c]=m,l.mangleMap[c]=m);const k={isAsync:l.isAsync,console:l.console,exports:l.exports,undeclaredGlobalsInFunctions:l.undeclaredGlobalsInFunctions,customfunctions:l.customfunctions,moduleFactory:l.moduleFactory,moduleFactoryMap:l.moduleFactoryMap,libraryResolver:l.libraryResolver,lrucache:l.lrucache,interceptor:l.interceptor,services:l.services,symbols:l.symbols,mangleMap:l.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:l.depthCounter,globalScope:l.globalScope};let $="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";for(let ae=0;ae<u.params.length;ae++){const oe=u.params[ae].name.toLowerCase();_e(oe);const le=Be(l);k.localScope._SymbolsMap[oe]=le,k.mangleMap[oe]=le,$+="lscope['"+le+"']=arguments["+ae.toString()+"];\n"}return!0===l.isAsync?($+="return lang.__awaiter(this, void 0, void 0, function* () {\n",$+=de(k,u.body)+"\n return lastStatement; ",$+="});  }",$+=", runtimeCtx),"+u.params.length+")",$+="\n lastStatement = lc.voidOperation; \n"):($+=de(k,u.body)+"\n return lastStatement; }, runtimeCtx),"+u.params.length+")",$+="\n lastStatement = lc.voidOperation; \n"),A?"gscope[lang.setAssig('"+m+"', runtimeCtx)]="+$:"gscope['"+m+"']="+$}(l,u);case"ImportDeclaration":return function pe(l,u){const c=u.specifiers[0].local.name.toLowerCase();_e(c);const m=l.libraryResolver?.loadLibrary(c),A=Be(l);void 0===l.moduleFactory[m.uri]&&(l.moduleFactory[m.uri]=function wt(l,u,c=!1){const m={isAsync:c,moduleFactory:u.moduleFactory,moduleFactoryMap:{},libraryResolver:new _.s(null,l.loadedModules),globalScope:mt(u.vars,c?Ue:Me,u.customfunctions),customfunctions:u.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:We,lrucache:u.lrucache,timeReference:u.timeReference??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};let A=z(m,l);""===A&&(A="lc.voidOperation; ");let k="";k=c?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+A+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+A+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ";const $=m.moduleFactory,ae=m.moduleFactoryMap,oe=m.exports,le={};for(const Fe in oe)le[Fe]=void 0!==m.mangleMap[Fe]?m.mangleMap[Fe]:Fe;const Oe={lc:D.n,lang:Ve,mangles:m.mangleMap,prepareModule:Fe=>new et(Fe),prepare(Fe,xe){let He=Fe.spatialReference;null==He&&(He=new L.Z({wkid:102100}));const Xe=Ct(Fe.vars,Fe.customfunctions,xe,Fe.timeReference);return{localStack:[],isAsync:xe,exports:oe,exportmangle:le,gdefs:{},moduleFactory:$,moduleFactoryMap:ae,moduleSingletons:Fe.moduleSingletons,mangleMap:this.mangles,spatialReference:He,globalScope:Xe,abortSignal:null==Fe.abortSignal?{aborted:!1}:Fe.abortSignal,localScope:null,services:Fe.services,console:Fe.console?Fe.console:We,lrucache:Fe.lrucache,timeReference:Fe.timeReference??null,interceptor:Fe.interceptor,symbols:{symbolCounter:0},depthCounter:Fe.depthCounter}}};return new Function("context","spatialReference",k).bind(Oe)}(m.syntax,{interceptor:l.interceptor,services:l.services,moduleFactory:l.moduleFactory,lrucache:l.lrucache,timeReference:l.timeReference??null,libraryResolver:l.libraryResolver,customfunctions:l.customfunctions,vars:{}},l.isAsync)),l.moduleFactoryMap[A]=m.uri;let k="";if(k=l.isAsync?"(yield lang.loadModule('"+A+"', runtimeCtx) ); ":"lang.loadModule('"+A+"', runtimeCtx); ",void 0!==l.globalScope[c])return"gscope['"+c+"']="+k;if(void 0!==l.globalScope._SymbolsMap[c])return"gscope['"+l.globalScope._SymbolsMap[c]+"']="+k;let $="";return l.undeclaredGlobalsInFunctions.has(c)?($=l.undeclaredGlobalsInFunctions.get(c).manglename,l.undeclaredGlobalsInFunctions.delete(c)):$=Be(l),l.globalScope._SymbolsMap[c]=$,l.mangleMap[c]=$,"gscope[lang.setAssig('"+$+"', runtimeCtx)]="+k}(l,u);case"ExportNamedDeclaration":return function we(l,u){const c=z(l,u.declaration);if("FunctionDeclaration"===u.declaration.type)l.exports[u.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===u.declaration.type)for(const m of u.declaration.declarations)l.exports[m.id.name.toLowerCase()]="variable";return c}(l,u);case"ReturnStatement":return function ne(l,u){return null===u.argument?"return lc.voidOperation":"return "+z(l,u.argument)}(l,u);case"IfStatement":return ge(l,u);case"ExpressionStatement":return function ce(l,u){return"AssignmentExpression"===u.expression.type?"lastStatement = lc.voidOperation; "+z(l,u.expression)+"; \n ":"lastStatement = "+z(l,u.expression)+"; "}(l,u);case"AssignmentExpression":return function ue(l,u){const c=z(l,u.right);let m=null,A="";if("MemberExpression"===u.left.type)return m=z(l,u.left.object),!0===u.left.computed?A=z(l,u.left.property):(A="'"+u.left.property.name+"'",_e(u.left.property.name)),"lang.assignmember("+m+","+A+",'"+u.operator+"',"+c+")";if(m=u.left.name.toLowerCase(),_e(m),null!==l.localScope){if(void 0!==l.localScope[m])return"lscope['"+m+"']=lang.assign("+c+",'"+u.operator+"', lscope['"+m+"'])";if(void 0!==l.localScope._SymbolsMap[m])return"lscope['"+l.localScope._SymbolsMap[m]+"']=lang.assign("+c+",'"+u.operator+"', lscope['"+l.localScope._SymbolsMap[m]+"'])"}if(void 0!==l.globalScope[m])return"gscope['"+m+"']=lang.assign("+c+",'"+u.operator+"', gscope['"+m+"'])";if(void 0!==l.globalScope._SymbolsMap[m])return"gscope['"+l.globalScope._SymbolsMap[m]+"']=lang.assign("+c+",'"+u.operator+"', gscope['"+l.globalScope._SymbolsMap[m]+"'])";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(m))return"gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(m).manglename+"',runtimeCtx)]=lang.assign("+c+",'"+u.operator+"', gscope['"+l.undeclaredGlobalsInFunctions.get(m).manglename+"'])";const k={manglename:Be(l),node:u.argument};return l.undeclaredGlobalsInFunctions.set(m,k),"gscope[lang.chkAssig('"+k.manglename+"',runtimeCtx)]=lang.assign("+c+",'"+u.operator+"', gscope['"+k.manglename+"'])"}throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"UpdateExpression":return function G(l,u){let c=null,m="";if("MemberExpression"===u.argument.type)return c=z(l,u.argument.object),!0===u.argument.computed?m=z(l,u.argument.property):(m="'"+u.argument.property.name+"'",_e(u.argument.property.name)),"lang.memberupdate("+c+","+m+",'"+u.operator+"',"+u.prefix+")";if(c=u.argument.name.toLowerCase(),_e(c),null!==l.localScope){if(void 0!==l.localScope[c])return"lang.update(lscope, '"+c+"','"+u.operator+"',"+u.prefix+")";if(void 0!==l.localScope._SymbolsMap[c])return"lang.update(lscope, '"+l.localScope._SymbolsMap[c]+"','"+u.operator+"',"+u.prefix+")"}if(void 0!==l.globalScope[c])return"lang.update(gscope, '"+c+"','"+u.operator+"',"+u.prefix+")";if(void 0!==l.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+l.globalScope._SymbolsMap[c]+"','"+u.operator+"',"+u.prefix+")";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(c))return"lang.update(gscope,lang.chkAssig( '"+l.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")";const A={manglename:Be(l),node:u.argument};return l.undeclaredGlobalsInFunctions.set(c,A),"lang.update(gscope, lang.chkAssig('"+A.manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")"}throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"TemplateLiteral":return function At(l,u){try{const c=[];let m=0;for(const A of u.quasis)c.push(A.value?JSON.stringify(A.value.cooked):JSON.stringify("")),!1===A.tail&&(c.push(u.expressions[m]?"lang.castString(lang.aCheck("+z(l,u.expressions[m])+", 'TemplateLiteral'))":""),m++);return"(["+c.join(",")+"]).join('')"}catch(c){throw c}}(l,u);case"TemplateElement":return JSON.stringify(u.value?u.value.cooked:"");case"ForStatement":return function Y(l,u){let c="lastStatement = lc.voidOperation; \n";null!==u.init&&(c+=z(l,u.init)+"; ");const m=ke(l),A=ke(l);return c+="var "+m+" = true; ",c+="\n do { ",null!==u.update&&(c+=" if ("+m+"===false) {\n "+z(l,u.update)+"  \n}\n "+m+"=false; \n"),null!==u.test&&(c+="var "+A+" = "+z(l,u.test)+"; ",c+="if ("+A+"===false) { break; } else if ("+A+"!==true) { lang.error('"+f.rH.BooleanConditionRequired+"');   }\n"),c+=z(l,u.body),null!==u.update&&(c+="\n "+z(l,u.update)),c+="\n"+m+" = true; \n} while(true);  lastStatement = lc.voidOperation; ",c}(l,u);case"ForInStatement":return function P(l,u){const c=ke(l),m=ke(l),A=ke(l);let k="var "+c+" = "+z(l,u.right)+";\n";"VariableDeclaration"===u.left.type&&(k+=z(l,u.left));let $="VariableDeclaration"===u.left.type?u.left.declarations[0].id.name:u.left.name;$=$.toLowerCase(),_e($);let ae="";null!==l.localScope&&(void 0!==l.localScope[$]?ae="lscope['"+$+"']":void 0!==l.localScope._SymbolsMap[$]&&(ae="lscope['"+l.localScope._SymbolsMap[$]+"']"));let oe="";if(""===ae)if(void 0!==l.globalScope[$])ae="gscope['"+$+"']";else if(void 0!==l.globalScope._SymbolsMap[$])ae="gscope['"+l.globalScope._SymbolsMap[$]+"']";else if(null!==l.localScope)if(l.undeclaredGlobalsInFunctions.has($))ae="gscope['"+l.undeclaredGlobalsInFunctions.get($).manglename+"']",oe=l.undeclaredGlobalsInFunctions.get($).manglename;else{const le={manglename:Be(l),node:u.left};l.undeclaredGlobalsInFunctions.set($,le),ae="gscope['"+le.manglename+"']",oe=le.manglename}return oe&&(k+="lang.chkAssig('"+oe+"',runtimeCtx); \n"),k+="if ("+c+"===null) {  lastStatement = lc.voidOperation; }\n ",k+="else if (lc.isArray("+c+") || lc.isString("+c+")) {",k+="var "+m+"="+c+".length; \n",k+="for(var "+A+"=0; "+A+"<"+m+"; "+A+"++) {\n",k+=ae+"="+A+";\n",k+=z(l,u.body),k+="\n}\n",k+=" lastStatement = lc.voidOperation; \n",k+=" \n}\n",k+="else if (lc.isImmutableArray("+c+")) {",k+="var "+m+"="+c+".length(); \n",k+="for(var "+A+"=0; "+A+"<"+m+"; "+A+"++) {\n",k+=ae+"="+A+";\n",k+=z(l,u.body),k+="\n}\n",k+=" lastStatement = lc.voidOperation; \n",k+=" \n}\n",k+="else if (( "+c+" instanceof lang.Dictionary) || ( "+c+" instanceof lang.Feature)) {",k+="var "+m+"="+c+".keys(); \n",k+="for(var "+A+"=0; "+A+"<"+m+".length; "+A+"++) {\n",k+=ae+"="+m+"["+A+"];\n",k+=z(l,u.body),k+="\n}\n",k+=" lastStatement = lc.voidOperation; \n",k+=" \n}\n",l.isAsync&&(k+="else if (lc.isFeatureSet("+c+")) {",k+="var "+m+"="+c+".iterator(runtimeCtx.abortSignal); \n",k+="for(var "+A+"=lang. graphicToFeature( yield "+m+".next(),"+c+", runtimeCtx); "+A+"!=null; "+A+"=lang. graphicToFeature( yield "+m+".next(),"+c+", runtimeCtx)) {\n",k+=ae+"="+A+";\n",k+=z(l,u.body),k+="\n}\n",k+=" lastStatement = lc.voidOperation; \n",k+=" \n}\n"),k+="else { lastStatement = lc.voidOperation; } \n",k}(l,u);case"WhileStatement":return function re(l,u){let c="lastStatement = lc.voidOperation; \n";const m=ke(l);return c+=`\n  var ${m} = true;\n    do {\n      ${m} = ${z(l,u.test)};\n      if (${m}==false) {\n        break;\n      }\n      if (${m}!==true) {\n        lang.error('${f.rH.BooleanConditionRequired}');\n      }\n      ${z(l,u.body)}\n    }\n    while (${m} !== false);\n    lastStatement = lc.voidOperation;\n  `,c}(l,u);case"Identifier":return function Re(l,u){try{const c=u.name.toLowerCase();if(_e(c),null!==l.localScope){if(void 0!==l.localScope[c])return"lscope['"+c+"']";if(void 0!==l.localScope._SymbolsMap[c])return"lscope['"+l.localScope._SymbolsMap[c]+"']"}if(void 0!==l.globalScope[c])return"gscope['"+c+"']";if(void 0!==l.globalScope._SymbolsMap[c])return"gscope['"+l.globalScope._SymbolsMap[c]+"']";if(null!==l.localScope){if(l.undeclaredGlobalsInFunctions.has(c))return"gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx)]";const m={manglename:Be(l),node:u.argument};return l.undeclaredGlobalsInFunctions.set(c,m),"gscope[lang.chkAssig('"+m.manglename+"',runtimeCtx)]"}throw new f.OF(l,f.rH.InvalidIdentifier,u)}catch(c){throw c}}(l,u);case"MemberExpression":return function Ie(l,u){try{let c;return!0===u.computed?c=z(l,u.property):(c="'"+u.property.name+"'",_e(u.property.name)),"lang.member("+z(l,u.object)+","+c+")"}catch(c){throw c}}(l,u);case"Literal":return null==u.value?"null":JSON.stringify(u.value);case"CallExpression":return function Qe(l,u){try{if("MemberExpression"===u.callee.type){let A;!0===u.callee.computed?A=z(l,u.callee.property):(A="'"+u.callee.property.name+"'",_e(u.callee.property.name));let k="[";for(let $=0;$<u.arguments.length;$++)$>0&&(k+=", "),k+=z(l,u.arguments[$]);return k+="]",l.isAsync?"(yield lang.callModuleFunction("+z(l,u.callee.object)+","+k+","+A+",runtimeCtx))":"lang.callModuleFunction("+z(l,u.callee.object)+","+k+","+A+",runtimeCtx)"}if("Identifier"!==u.callee.type)throw new f.OF(l,f.rH.FuncionNotFound,u);const c=u.callee.name.toLowerCase();if("iif"===c)return function st(l,u){try{if(3!==u.arguments.length)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);const c=ke(l);return`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${c} = ${z(l,u.arguments[0])};\n       \n        if (${c} === true) {\n          return  ${z(l,u.arguments[1])};\n        }\n        else if (${c} === false) {\n          return ${z(l,u.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${l.isAsync?"})}()))":"}()"}`}catch(c){throw c}}(l,u);if("when"===c)return function Ce(l,u){try{if(u.arguments.length<3)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);if(u.arguments.length%2==0)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);const c=ke(l);let m="var ";for(let A=0;A<u.arguments.length-1;A+=2)m+=`${c} = lang.mustBoolean(${z(l,u.arguments[A])}, runtimeCtx);\n      if (${c} === true ) {\n        return ${z(l,u.arguments[A+1])} \n      }\n`;return`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${m}\n        return ${z(l,u.arguments[u.arguments.length-1])}\n        ${l.isAsync?"})}()))":"}()"}`}catch(c){throw c}}(l,u);if("decode"===c)return function Et(l,u){try{if(u.arguments.length<2)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);if(2===u.arguments.length)return`(${z(l,u.arguments[1])})`;if((u.arguments.length-1)%2==0)throw new f.OF(l,f.rH.WrongNumberOfParameters,u);const c=ke(l),m=ke(l);let A="var ";for(let k=1;k<u.arguments.length-1;k+=2)A+=`${m} = ${z(l,u.arguments[k])};\n      if (lang.binary(${m}, ${c}, "==") === true ) {\n        return ${z(l,u.arguments[k+1])} \n      }\n`;return`${l.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${c} = ${z(l,u.arguments[0])};\n        ${A}\n        return ${z(l,u.arguments[u.arguments.length-1])}\n        ${l.isAsync?"})}()))":"}()"}`}catch(c){throw c}}(l,u);let m="";if(null!==l.localScope&&(void 0!==l.localScope[c]?m="lscope['"+c+"']":void 0!==l.localScope._SymbolsMap[c]&&(m="lscope['"+l.localScope._SymbolsMap[c]+"']")),""===m)if(void 0!==l.globalScope[c])m="gscope['"+c+"']";else if(void 0!==l.globalScope._SymbolsMap[c])m="gscope['"+l.globalScope._SymbolsMap[c]+"']";else if(null!==l.localScope)if(l.undeclaredGlobalsInFunctions.has(c))m="gscope[lang.chkAssig('"+l.undeclaredGlobalsInFunctions.get(c).manglename+"',runtimeCtx)]";else{const A={manglename:Be(l),node:u.argument};l.undeclaredGlobalsInFunctions.set(c,A),m="gscope[lang.chkAssig('"+A.manglename+"',runtimeCtx)]"}if(""!==m){let A="[";for(let k=0;k<u.arguments.length;k++)k>0&&(A+=", "),A+=z(l,u.arguments[k]);return A+="]",l.isAsync?"(yield lang.callfunc("+m+","+A+",runtimeCtx) )":"lang.callfunc("+m+","+A+",runtimeCtx)"}throw new f.OF(l,f.rH.FuncionNotFound,u)}catch(c){throw c}}(l,u);case"UnaryExpression":return function lt(l,u){try{return"lang.unary("+z(l,u.argument)+",'"+u.operator+"')"}catch(c){throw c}}(l,u);case"BinaryExpression":return function Pe(l,u){try{return"lang.binary("+z(l,u.left)+","+z(l,u.right)+",'"+u.operator+"')"}catch(c){throw c}}(l,u);case"LogicalExpression":return function ht(l,u){try{if("AssignmentExpression"===u.left.type||"UpdateExpression"===u.left.type)throw new f.OF(l,f.rH.LogicalExpressionOnlyBoolean,u);if("AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type)throw new f.OF(l,f.rH.LogicalExpressionOnlyBoolean,u);if("&&"===u.operator||"||"===u.operator)return"(lang.logicalCheck("+z(l,u.left)+") "+u.operator+" lang.logicalCheck("+z(l,u.right)+"))";throw new f.OF(null,f.rH.LogicExpressionOrAnd,null)}catch(c){throw c}}(l,u);case"ArrayExpression":return function Ne(l,u){try{const c=[];for(let m=0;m<u.elements.length;m++)c.push("Literal"===u.elements[m].type?z(l,u.elements[m]):"lang.aCheck("+z(l,u.elements[m])+",'ArrayExpression')");return"["+c.join(",")+"]"}catch(c){throw c}}(l,u);case"ObjectExpression":return function H(l,u){let c="lang.dictionary([";for(let m=0;m<u.properties.length;m++){const A=u.properties[m];_e(A.key.name),m>0&&(c+=","),c+="lang.strCheck("+("Identifier"===A.key.type?"'"+A.key.name+"'":z(l,A.key))+",'ObjectExpression'),lang.aCheck("+z(l,A.value)+", 'ObjectExpression')"}return c+="])",c}(l,u);case"Property":return function h(l,u){throw new f.OF(l,f.rH.NeverReach,u)}(l,u);case"Array":throw new f.OF(l,f.rH.NeverReach,u);default:throw new f.OF(l,f.rH.Unrecognised,u)}}catch(c){throw c}}function Te(l,u){return"BlockStatement"===u.type?z(l,u):"ReturnStatement"===u.type||"BreakStatement"===u.type||"ContinueStatement"===u.type?z(l,u)+"; ":"UpdateExpression"===u.type?"lastStatement = "+z(l,u)+"; ":"ExpressionStatement"===u.type?z(l,u):"ObjectExpression"===u.type?"lastStatement = "+z(l,u)+"; ":z(l,u)+"; "}function ge(l,u){if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)throw new f.OF(l,f.rH.BooleanConditionRequired,u);return`if (lang.mustBoolean(${z(l,u.test)}, runtimeCtx) === true) {\n    ${Te(l,u.consequent)}\n  } `+(null!==u.alternate?"IfStatement"===u.alternate.type?" else "+ge(l,u.alternate):` else {\n      ${Te(l,u.alternate)}\n    }\n`:" else {\n      lastStatement = lc.voidOperation;\n    }\n")}function de(l,u){let c="";for(let m=0;m<u.body.length;m++)"EmptyStatement"!==u.body[m].type&&(c+="ReturnStatement"===u.body[m].type||"BreakStatement"===u.body[m].type||"ContinueStatement"===u.body[m].type?z(l,u.body[m])+"; \n":"UpdateExpression"===u.body[m].type||"ObjectExpression"===u.body[m].type?"lastStatement = "+z(l,u.body[m])+"; \n":z(l,u.body[m])+" \n");return c}function _e(l){if("iif"===l)throw new f.kq;if("decode"===l)throw new f.kq;if("when"===l)throw new f.kq}const Me={};function Be(l){return l.symbols.symbolCounter++,"_T"+l.symbols.symbolCounter.toString()}function ke(l){return l.symbols.symbolCounter++,"_Tvar"+l.symbols.symbolCounter.toString()}(0,R.r)(Me,E),(0,Z.r)(Me,E),(0,K.r)(Me,E),(0,U.r)(Me,E),(0,M.r)(Me,E),Me.iif=function(l,u){try{return E(l,u,(c,m,A)=>{throw new f.aV(l,f.rH.Unrecognised,u)})}catch(c){throw c}},Me.decode=function(l,u){try{return E(l,u,(c,m,A)=>{throw new f.aV(l,f.rH.Unrecognised,u)})}catch(c){throw c}},Me.when=function(l,u){try{return E(l,u,(c,m,A)=>{throw new f.aV(l,f.rH.Unrecognised,u)})}catch(c){throw c}};const Ue={};for(const l in Me)Ue[l]=new y.Bx(Me[l]);(0,N.registerFunctions)(Me,E);for(const l in Me)Me[l]=new y.Bx(Me[l]);const rt=function(){};rt.prototype=Me;const ve=function(){};function mt(l,u,c){const m={};l||(l={}),c||(c={}),m._SymbolsMap={},m.textformatting=1,m.infinity=1,m.pi=1;for(const A in u)m[A]=1;for(const A in c)m[A]=1;for(const A in l)m[A]=1;return m}function Ct(l,u,c,m){const A=c?new ve:new rt;l||(l={}),u||(u={});const k=new V.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});k.immutable=!1,A._SymbolsMap={textformatting:1,infinity:1,pi:1},A.textformatting=k,A.infinity=Number.POSITIVE_INFINITY,A.pi=Math.PI;for(const $ in u)A[$]=u[$],A._SymbolsMap[$]=1;for(const $ in l)A._SymbolsMap[$]=1,A[$]=l[$]&&"esri.Graphic"===l[$].declaredClass?w.Z.createFromGraphic(l[$],m??null):l[$];return A}function ze(l,u){const c={mode:u,compiled:!0,functions:{},signatures:[],standardFunction:E,standardFunctionAsync:E,evaluateIdentifier:pt};for(let m=0;m<l.length;m++)l[m].registerFunctions(c);if("sync"===u){for(const m in c.functions)Me[m]=new y.Bx(c.functions[m]),rt.prototype[m]=Me[m];for(let m=0;m<c.signatures.length;m++)(0,Q.gW)(c.signatures[m],"sync")}else{for(const m in c.functions)Ue[m]=new y.Bx(c.functions[m]),ve.prototype[m]=Ue[m];for(let m=0;m<c.signatures.length;m++)(0,Q.gW)(c.signatures[m],"async")}}function pt(l,u){const c=u.name;if("_SymbolsMap"===c)throw new f.aV(l,f.rH.InvalidIdentifier,null);if(l.localStack.length>0){if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==l.localStack[l.localStack.length-1][c])return l.localStack[l.localStack.length-1][c];const A=l.mangleMap[c];if(void 0!==A&&void 0!==l.localStack[l.localStack.length-1][A])return l.localStack[l.localStack.length-1][A]}if("_t"!==c.substr(0,2).toLowerCase()&&void 0!==l.globalScope[c]||1===l.globalScope._SymbolsMap[c])return l.globalScope[c];const m=l.mangleMap[c];return void 0!==m?l.globalScope[m]:void 0}ve.prototype=Ue,ze([ee.A],"sync"),ze([ee.A],"async");let ot=0;const Ve={error(l){throw new f.aV(null,l,null)},__awaiter:(l,u,c,m)=>new Promise((A,k)=>{function $(le){try{oe(m.next(le))}catch(Oe){k(Oe)}}function ae(le){try{oe(m.throw(le))}catch(Oe){k(Oe)}}function oe(le){le.done?A(le.value):le.value&&le.value.then?le.value.then($,ae):(ot++,ot%100==0?setTimeout(()=>{ot=0,$(le.value)},0):$(le.value))}oe((m=m.apply(l,u||[])).next())}),functionDepthchecker:(l,u)=>function(){if(u.depthCounter.depth++,u.localStack.push([]),u.depthCounter.depth>64)throw new f.aV(null,f.rH.MaximumCallDepth,null);const c=l.apply(this,arguments);return(0,te.y8)(c)?c.then(m=>(u.depthCounter.depth--,u.localStack.length=u.localStack.length-1,m)):(u.depthCounter.depth--,u.localStack.length=u.localStack.length-1,c)},chkAssig(l,u){if(void 0===u.gdefs[l])throw new f.aV(u,f.rH.InvalidIdentifier,null);return l},mustBoolean(l,u){if(!0===l||!1===l)return l;throw new f.aV(u,f.rH.BooleanConditionRequired,null)},setAssig:(l,u)=>(u.gdefs[l]=1,l),castString:l=>(0,D.j)(l),aCheck(l,u){if((0,D.i)(l))throw new f.aV(null,"ArrayExpression"===u?f.rH.NoFunctionInArray:"ObjectExpression"===u?f.rH.NoFunctionInDictionary:f.rH.NoFunctionInTemplateLiteral,null);return l===D.v?null:l},Dictionary:V.Z,Feature:w.Z,UserDefinedCompiledFunction:class F extends y.Rm{constructor(u,c){super(),this.paramCount=c,this.fn=u}createFunction(u){return(...c)=>{if(c.length!==this.paramCount)throw new f.aV(u,f.rH.WrongNumberOfParameters,null);return this.fn(...c)}}call(u,c){return this.fn(...c.arguments)}marshalledCall(u,c,m,A){return A(u,c,(k,$,ae)=>{ae=ae.map(le=>!(0,D.i)(le)||le instanceof y.Vg?le:(0,y.aq)(le,u,A));const oe=this.call(m,{arguments:ae});return(0,te.y8)(oe)?oe.then(le=>(0,y.aq)(le,m,A)):oe})}},dictionary(l){const u={},c=new Map;for(let A=0;A<l.length;A+=2){if((0,D.i)(l[A+1]))throw new f.aV(null,f.rH.NoFunctionInDictionary,null);if(!1===(0,D.c)(l[A]))throw new f.aV(null,f.rH.KeyMustBeString,null);let k=l[A].toString();const $=k.toLowerCase();c.has($)?k=c.get($):c.set($,k),u[k]=l[A+1]===D.v?null:l[A+1]}const m=new V.Z(u);return m.immutable=!1,m},strCheck(l){if(!1===(0,D.c)(l))throw new f.aV(null,f.rH.KeyMustBeString,null);return l},unary(l,u){if((0,D.a)(l)){if("!"===u)return!l;if("-"===u)return-1*(0,D.g)(l);if("+"===u)return 1*(0,D.g)(l);if("~"===u)return~(0,D.g)(l);throw new f.aV(null,f.rH.UnsupportedUnaryOperator,null)}if("-"===u)return-1*(0,D.g)(l);if("+"===u)return 1*(0,D.g)(l);if("~"===u)return~(0,D.g)(l);throw new f.aV(null,f.rH.UnsupportedUnaryOperator,null)},logicalCheck(l){if(!1===(0,D.a)(l))throw new f.aV(null,f.rH.LogicExpressionOrAnd,null);return l},logical(l,u,c){if((0,D.a)(l)&&(0,D.a)(u))switch(c){case"||":return l||u;case"&&":return l&&u;default:throw new f.aV(null,f.rH.LogicExpressionOrAnd,null)}throw new f.aV(null,f.rH.LogicExpressionOrAnd,null)},binary(l,u,c){switch(c){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,D.u)((0,D.g)(l),(0,D.g)(u),c);case"==":case"=":return(0,D.s)(l,u);case"!=":return!(0,D.s)(l,u);case"<":case">":case"<=":case">=":return(0,D.r)(l,u,c);case"+":return(0,D.c)(l)||(0,D.c)(u)?(0,D.j)(l)+(0,D.j)(u):(0,D.g)(l)+(0,D.g)(u);case"-":return(0,D.g)(l)-(0,D.g)(u);case"*":return(0,D.g)(l)*(0,D.g)(u);case"/":return(0,D.g)(l)/(0,D.g)(u);case"%":return(0,D.g)(l)%(0,D.g)(u);default:throw new f.aV(null,f.rH.UnsupportedOperator,null)}},assign(l,u,c){switch(u){case"=":return l===D.v?null:l;case"/=":return(0,D.g)(c)/(0,D.g)(l);case"*=":return(0,D.g)(c)*(0,D.g)(l);case"-=":return(0,D.g)(c)-(0,D.g)(l);case"+=":return(0,D.c)(c)||(0,D.c)(l)?(0,D.j)(c)+(0,D.j)(l):(0,D.g)(c)+(0,D.g)(l);case"%=":return(0,D.g)(c)%(0,D.g)(l);default:throw new f.aV(null,f.rH.UnsupportedOperator,null)}},update(l,u,c,m){const A=(0,D.g)(l[u]);return l[u]="++"===c?A+1:A-1,!1===m?A:"++"===c?A+1:A-1},graphicToFeature:(l,u,c)=>null===l?null:w.Z.createFromGraphicLikeObject(l.geometry,l.attributes,u,c.timeReference),memberupdate(l,u,c,m){let A;if((0,D.m)(l)){if(!(0,D.b)(u))throw new f.aV(null,f.rH.ArrayAccessorMustBeNumber,null);if(u<0&&(u=l.length+u),u<0||u>=l.length)throw new f.aV(null,f.rH.OutOfBounds,null);A=(0,D.g)(l[u]),l[u]="++"===c?A+1:A-1}else if(l instanceof V.Z){if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0!==l.hasField(u))throw new f.aV(null,f.rH.FieldNotFound,null,{key:u});A=(0,D.g)(l.field(u)),l.setField(u,"++"===c?A+1:A-1)}else if((0,D.w)(l)){if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0!==l.hasField(u))throw new f.aV(null,f.rH.FieldNotFound,null);A=(0,D.g)(l.field(u)),l.setField(u,"++"===c?A+1:A-1)}else{if((0,D.x)(l))throw new f.aV(null,f.rH.Immutable,null);if(!(l instanceof et))throw new f.aV(null,f.rH.InvalidIdentifier,null);if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.ModuleAccessorMustBeString,null);if(!0!==l.hasGlobal(u))throw new f.aV(null,f.rH.ModuleExportNotFound,null);A=(0,D.g)(l.global(u)),l.setGlobal(u,"++"===c?A+1:A-1)}return!1===m?A:"++"===c?A+1:A-1},assignmember(l,u,c,m){if((0,D.m)(l)){if(!(0,D.b)(u))throw new f.aV(null,f.rH.ArrayAccessorMustBeNumber,null);if(u<0&&(u=l.length+u),u<0||u>l.length)throw new f.aV(null,f.rH.OutOfBounds,null);if(u===l.length){if("="!==c)throw new f.aV(null,f.rH.OutOfBounds,null);l[u]=this.assign(m,c,l[u])}else l[u]=this.assign(m,c,l[u])}else if(l instanceof V.Z){if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0===l.hasField(u))l.setField(u,this.assign(m,c,l.field(u)));else{if("="!==c)throw new f.aV(null,f.rH.FieldNotFound,null);l.setField(u,this.assign(m,c,null))}}else if((0,D.w)(l)){if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.KeyAccessorMustBeString,null);if(!0===l.hasField(u))l.setField(u,this.assign(m,c,l.field(u)));else{if("="!==c)throw new f.aV(null,f.rH.FieldNotFound,null);l.setField(u,this.assign(m,c,null))}}else{if((0,D.x)(l))throw new f.aV(null,f.rH.Immutable,null);if(!(l instanceof et))throw new f.aV(null,f.rH.InvalidIdentifier,null);if(!1===(0,D.c)(u))throw new f.aV(null,f.rH.ModuleAccessorMustBeString,null);if(!l.hasGlobal(u))throw new f.aV(null,f.rH.ModuleExportNotFound,null);l.setGlobal(u,this.assign(m,c,l.global(u)))}},member(l,u){if(null===l)throw new f.aV(null,f.rH.MemberOfNull,null);if(l instanceof V.Z||(0,D.w)(l)){if((0,D.c)(u))return l.field(u);throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if(l instanceof v.Z){if((0,D.c)(u))return(0,U.Z)(l,u,null,null);throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if((0,D.m)(l)){if((0,D.b)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=l.length+u),u>=l.length||u<0)throw new f.aV(null,f.rH.OutOfBounds,null);return l[u]}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if((0,D.c)(l)){if((0,D.b)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=l.length+u),u>=l.length||u<0)throw new f.aV(null,f.rH.OutOfBounds,null);return l[u]}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if((0,D.x)(l)){if((0,D.b)(u)&&isFinite(u)&&Math.floor(u)===u){if(u<0&&(u=l.length()+u),u>=l.length()||u<0)throw new f.aV(null,f.rH.OutOfBounds,null);return l.get(u)}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}if(l instanceof et){if((0,D.c)(u))return l.global(u);throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)}throw new f.aV(null,f.rH.InvalidMemberAccessKey,null)},callfunc:(l,u,c)=>l.call(c,{arguments:u,preparsed:!0}),loadModule(l,u){const c=u.moduleFactoryMap[l];if(u.moduleSingletons[c])return u.moduleSingletons[c];const m=u.moduleFactory[c]({vars:{},moduleSingletons:u.moduleSingletons,depthCounter:u.depthCounter,console:u.console,abortSignal:u.abortSignal,isAsync:u.isAsync,services:u.services,lrucache:u.lrucache,timeReference:u.timeReference?u.timeReference:null,interceptor:u.interceptor},u.spatialReference);return u.moduleSingletons[c]=m,m},callModuleFunction(l,u,c,m){if(!(l instanceof et))throw new f.aV(null,f.rH.FuncionNotFound,null);const A=l.global(c);if(!1===(0,D.i)(A))throw new f.aV(null,f.rH.CallNonFunction,null);return A.call(m,{preparsed:!0,arguments:u})}};function We(l){console.log(l)}function qe(l,u,c=!1){null===u&&(u={vars:{},customfunctions:{}});let m=null;l.usesModules&&(m=new _.s(null,l.loadedModules));const A={isAsync:c,globalScope:mt(u.vars,c?Ue:Me,u.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:u.customfunctions,libraryResolver:m,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:We,lrucache:u.lrucache,timeReference:u.timeReference??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};let k=z(A,l);""===k&&(k="lc.voidOperation; "),A.undeclaredGlobalsInFunctions.size>0&&A.undeclaredGlobalsInFunctions.forEach(xe=>{throw new f.OF(u,f.rH.InvalidIdentifier,xe.node)});let $="";$=c?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+k+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+k+"\n return lastStatement; } \n return this.postProcess(mainBody()); ";const ae=A.moduleFactory,oe=A.moduleFactoryMap,le=A.exports,Oe={};for(const xe in le)Oe[xe]=void 0!==A.mangleMap[xe]?A.mangleMap[xe]:xe;const Fe={lc:D.n,lang:Ve,mangles:A.mangleMap,postProcess(xe){if(xe instanceof D.R&&(xe=xe.value),xe instanceof D.I&&(xe=xe.value),xe===D.v&&(xe=null),xe===D.o)throw new f.aV(null,f.rH.IllegalResult,null);if(xe===D.p)throw new f.aV(null,f.rH.IllegalResult,null);if((0,D.i)(xe))throw new f.aV(null,f.rH.IllegalResult,null);return xe},prepare(xe,He){let Xe=xe.spatialReference;null==Xe&&(Xe=L.Z.WebMercator);const bt=Ct(xe.vars,xe.customfunctions,He,xe.timeReference);return{localStack:[],isAsync:He,moduleFactory:ae,moduleFactoryMap:oe,mangleMap:this.mangles,moduleSingletons:{},exports:le,gdefs:{},exportmangle:Oe,spatialReference:Xe,globalScope:bt,abortSignal:null==xe.abortSignal?{aborted:!1}:xe.abortSignal,localScope:null,services:xe.services,console:xe.console?xe.console:We,lrucache:xe.lrucache,timeReference:xe.timeReference??null,interceptor:xe.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return new Function("context","spatialReference",$).bind(Fe)}function Je(){return(Je=(0,b.Z)(function*(){return ze([yield j.e(57).then(j.bind(j,20057))],"async"),!0})).apply(this,arguments)}class et extends T.P{constructor(u){super(null),this.moduleContext=u}hasGlobal(u){return void 0===this.moduleContext.exports[u]&&(u=u.toLowerCase()),void 0!==this.moduleContext.exports[u]}setGlobal(u,c){const m=this.moduleContext.globalScope,A=u.toLowerCase();if((0,D.i)(c))throw new f.aV(null,f.rH.AssignModuleFunction,null);m[this.moduleContext.exportmangle[A]]=c}global(u){const c=this.moduleContext.globalScope;u=u.toLowerCase();const m=c[this.moduleContext.exportmangle[u]];if(void 0===m)throw new f.aV(null,f.rH.InvalidIdentifier,null);if((0,D.i)(m)&&!(m instanceof y.Vg)){const A=new y.Vg;return A.fn=m,A.parameterEvaluator=E,A.context=this.moduleContext,c[this.moduleContext.exportmangle[u]]=A,A}return m}}var De,ie,l,Ft=j(1897),gt=j(37753);(l=De||(De={})).Break="break",l.Continue="continue",l.Else="else",l.False="false",l.For="for",l.From="from",l.Function="function",l.If="if",l.Import="import",l.Export="export",l.In="in",l.Null="null",l.Return="return",l.True="true",l.Var="var",l.While="while",function(l){l.AssignmentExpression="AssignmentExpression",l.ArrayExpression="ArrayExpression",l.BlockComment="BlockComment",l.BlockStatement="BlockStatement",l.BinaryExpression="BinaryExpression",l.BreakStatement="BreakStatement",l.CallExpression="CallExpression",l.ContinueStatement="ContinueStatement",l.EmptyStatement="EmptyStatement",l.ExpressionStatement="ExpressionStatement",l.ExportNamedDeclaration="ExportNamedDeclaration",l.ExportSpecifier="ExportSpecifier",l.ForStatement="ForStatement",l.ForInStatement="ForInStatement",l.FunctionDeclaration="FunctionDeclaration",l.Identifier="Identifier",l.IfStatement="IfStatement",l.ImportDeclaration="ImportDeclaration",l.ImportDefaultSpecifier="ImportDefaultSpecifier",l.LineComment="LineComment",l.Literal="Literal",l.LogicalExpression="LogicalExpression",l.MemberExpression="MemberExpression",l.ObjectExpression="ObjectExpression",l.Program="Program",l.Property="Property",l.ReturnStatement="ReturnStatement",l.TemplateElement="TemplateElement",l.TemplateLiteral="TemplateLiteral",l.UnaryExpression="UnaryExpression",l.UpdateExpression="UpdateExpression",l.VariableDeclaration="VariableDeclaration",l.VariableDeclarator="VariableDeclarator",l.WhileStatement="WhileStatement"}(ie||(ie={}));const ct=["++","--"],tt=["-","+","!","~"],vt=["=","/=","*=","%=","+=","-="],dt=["||","&&"],ft={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10};var se;!function(l){l[l.Unknown=0]="Unknown",l[l.BooleanLiteral=1]="BooleanLiteral",l[l.EOF=2]="EOF",l[l.Identifier=3]="Identifier",l[l.Keyword=4]="Keyword",l[l.NullLiteral=5]="NullLiteral",l[l.NumericLiteral=6]="NumericLiteral",l[l.Punctuator=7]="Punctuator",l[l.StringLiteral=8]="StringLiteral",l[l.Template=10]="Template"}(se||(se={}));const _t=["Unknown","Boolean","<end>","Identifier","Keyword","Null","Numeric","Punctuator","String","RegularExpression","Template"];var C;!function(l){l.InvalidModuleUri="InvalidModuleUri",l.ForInOfLoopInitializer="ForInOfLoopInitializer",l.IdentiferExpected="IdentiferExpected",l.InvalidEscapedReservedWord="InvalidEscapedReservedWord",l.InvalidExpression="InvalidExpression",l.InvalidFunctionIdentifier="InvalidFunctionIdentifier",l.InvalidHexEscapeSequence="InvalidHexEscapeSequence",l.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment",l.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn",l.InvalidTemplateHead="InvalidTemplateHead",l.InvalidVariableAssignment="InvalidVariableAssignment",l.KeyMustBeString="KeyMustBeString",l.NoFunctionInsideBlock="NoFunctionInsideBlock",l.NoFunctionInsideFunction="NoFunctionInsideFunction",l.ModuleExportRootOnly="ModuleExportRootOnly",l.ModuleImportRootOnly="ModuleImportRootOnly",l.PunctuatorExpected="PunctuatorExpected",l.TemplateOctalLiteral="TemplateOctalLiteral",l.UnexpectedBoolean="UnexpectedBoolean",l.UnexpectedEndOfScript="UnexpectedEndOfScript",l.UnexpectedIdentifier="UnexpectedIdentifier",l.UnexpectedKeyword="UnexpectedKeyword",l.UnexpectedNull="UnexpectedNull",l.UnexpectedNumber="UnexpectedNumber",l.UnexpectedPunctuator="UnexpectedPunctuator",l.UnexpectedString="UnexpectedString",l.UnexpectedTemplate="UnexpectedTemplate",l.UnexpectedToken="UnexpectedToken"}(C||(C={}));const I={[C.InvalidModuleUri]:"Module uri must be a text literal.",[C.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[C.IdentiferExpected]:"'${value}' is an invalid identifier.",[C.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[C.InvalidExpression]:"Invalid expression.",[C.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[C.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[C.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[C.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[C.InvalidTemplateHead]:"Invalid template structure.",[C.InvalidVariableAssignment]:"Invalid variable assignment.",[C.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[C.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[C.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[C.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[C.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[C.PunctuatorExpected]:"'${value}' expected.",[C.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[C.UnexpectedBoolean]:"Unexpected boolean literal.",[C.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[C.UnexpectedIdentifier]:"Unexpected identifier.",[C.UnexpectedKeyword]:"Unexpected keyword.",[C.UnexpectedNull]:"Unexpected null literal.",[C.UnexpectedNumber]:"Unexpected number.",[C.UnexpectedPunctuator]:"Unexpected ponctuator.",[C.UnexpectedString]:"Unexpected text literal.",[C.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[C.UnexpectedToken]:"Unexpected token '${value}'."};class S extends Error{constructor({code:u,index:c,line:m,column:A,len:k=0,description:$,data:ae}){super(`${$??u}`),this.declaredRootClass="esri.arcade.lib.parsingerror",this.name="ParsingError",this.code=u,this.index=c,this.line=m,this.column=A,this.len=k,this.data=ae,this.description=$,this.range={start:{line:m,column:A-1},end:{line:m,column:A+k}},Error.captureStackTrace?.(this,S)}}function p(l){return l?.type===ie.BlockStatement}function g(l){return l?.type===ie.BlockComment}function q(l){return l?.type===ie.EmptyStatement}function jn(l){return l?.type===ie.VariableDeclarator}function Zt(l,u){return!!u&&u.loc.end.line===l.loc.start.line&&u.loc.end.column<=l.loc.start.column}function cn(l,u){return l.range[0]>=u.range[0]&&l.range[1]<=u.range[1]}class zn{constructor(){this.comments=[],this._nodeStack=[],this._newComments=[]}insertInnerComments(u){if(!p(u)||0!==u.body.length)return;const c=[];for(let m=this._newComments.length-1;m>=0;--m){const A=this._newComments[m];u.range[1]>=A.range[0]&&(c.unshift(A),this._newComments.splice(m,1))}c.length&&(u.innerComments=c)}attachTrailingComments(u){if(!u)return;const c=this._nodeStack[this._nodeStack.length-1];if(p(u)&&cn(c,u))for(let A=this._newComments.length-1;A>=0;--A){const k=this._newComments[A];cn(k,u)&&(c.trailingComments=[...c.trailingComments??[],k],this._newComments.splice(A,1))}let m=[];if(this._newComments.length>0)for(let A=this._newComments.length-1;A>=0;--A){const k=this._newComments[A];Zt(k,c)?(c.trailingComments=[...c.trailingComments??[],k],this._newComments.splice(A,1)):Zt(k,u)&&(m.unshift(k),this._newComments.splice(A,1))}c?.trailingComments&&Zt(c.trailingComments[0],u)&&(m=[...m,...c.trailingComments],delete c.trailingComments),m.length>0&&(u.trailingComments=m)}attachLeadingComments(u){if(!u)return;let c;for(;this._nodeStack.length>0;){const k=this._nodeStack[this._nodeStack.length-1];if(!(u.range[0]<=k.range[0]))break;c=k,this._nodeStack.pop()}const m=[],A=[];if(c){for(let k=(c.leadingComments?.length??0)-1;k>=0;--k){const $=c.leadingComments[k];u.range[0]>=$.range[1]?(m.unshift($),c.leadingComments.splice(k,1)):jn(u)&&!g($)&&(A.unshift($),c.leadingComments.splice(k,1))}return 0===c.leadingComments?.length&&delete c.leadingComments,m.length&&(u.leadingComments=m),void(A.length&&(u.trailingComments=[...A,...u.trailingComments??[]]))}for(let k=this._newComments.length-1;k>=0;--k){const $=this._newComments[k];u.range[0]>=$.range[0]&&(m.unshift($),this._newComments.splice(k,1))}m.length&&(u.leadingComments=m)}attachComments(u){if(function O(l){return l?.type===ie.Program}(u)&&u.body.length>0){const c=this._nodeStack[this._nodeStack.length-1];return c?(c.trailingComments=[...c.trailingComments??[],...this._newComments],this._newComments.length=0,void this._nodeStack.pop()):(u.trailingComments=[...this._newComments],void(this._newComments.length=0))}this.attachTrailingComments(u),this.attachLeadingComments(u),this.insertInnerComments(u),this._nodeStack.push(u)}collectComment(u){this.comments.push(u),this._newComments.push(u)}}function Gt(l,u){const c=I[l];return u?c.replace(/\${(.*?)}/g,(m,A)=>u[A]?.toString()??""):c}class Wn{constructor(u=!1){this.tolerant=u,this.errors=[]}recordError(u){this.errors.push(u)}tolerate(u){if(!this.tolerant)throw u;this.recordError(u)}throwError(u){throw u.description=u.description??Gt(u.code,u.data),new S(u)}tolerateError(u){u.description=u.description??Gt(u.code,u.data);const c=new S(u);if(!this.tolerant)throw c;this.recordError(c)}}function dn(l,u){if(!l)throw new Error("ASSERT: "+u)}const fn={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Ae={fromCodePoint:l=>l<65536?String.fromCharCode(l):String.fromCharCode(55296+(l-65536>>10))+String.fromCharCode(56320+(l-65536&1023)),isWhiteSpace:l=>32===l||9===l||11===l||12===l||160===l||l>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(l),isLineTerminator:l=>10===l||13===l||8232===l||8233===l,isIdentifierStart:l=>36===l||95===l||l>=65&&l<=90||l>=97&&l<=122||92===l||l>=128&&fn.NonAsciiIdentifierStart.test(Ae.fromCodePoint(l)),isIdentifierPart:l=>36===l||95===l||l>=65&&l<=90||l>=97&&l<=122||l>=48&&l<=57||92===l||l>=128&&fn.NonAsciiIdentifierPart.test(Ae.fromCodePoint(l)),isDecimalDigit:l=>l>=48&&l<=57,isHexDigit:l=>l>=48&&l<=57||l>=65&&l<=70||l>=97&&l<=102,isOctalDigit:l=>l>=48&&l<=55};function hn(l){return"0123456789abcdef".indexOf(l.toLowerCase())}function jt(l){return"01234567".indexOf(l)}const xt=[[],[],[]];ct.forEach(l=>xt[l.length-1].push(l)),tt.forEach(l=>xt[l.length-1].push(l)),dt.forEach(l=>xt[l.length-1].push(l)),vt.forEach(l=>xt[l.length-1].push(l)),["|","&",">>","<<",">>>","^","==","!=","<","<=",">",">=","+","-","*","/","%"].forEach(l=>xt[l.length-1].push(l));class Kn{constructor(u,c){this.source=u,this.errorHandler=c,this._length=u.length,this.index=0,this.lineNumber=1,this.lineStart=0,this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(u){this.index=u.index,this.lineNumber=u.lineNumber,this.lineStart=u.lineStart,this.curlyStack=u.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(u=C.UnexpectedToken){this.errorHandler.throwError({code:u,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}tolerateUnexpectedToken(u=C.UnexpectedToken){this.errorHandler.tolerateError({code:u,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(u){const c=[],m=this.index-u,A={start:{line:this.lineNumber,column:this.index-this.lineStart-u},end:{line:0,column:0}};for(;!this.eof();){const k=this.source.charCodeAt(this.index);if(++this.index,Ae.isLineTerminator(k))return A&&(A.end={line:this.lineNumber,column:this.index-this.lineStart-1},c.push({multiLine:!1,start:m+u,end:this.index-1,range:[m,this.index-1],loc:A})),13===k&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,c}return A&&(A.end={line:this.lineNumber,column:this.index-this.lineStart},c.push({multiLine:!1,start:m+u,end:this.index,range:[m,this.index],loc:A})),c}skipMultiLineComment(){const u=[],c=this.index-2,m={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const A=this.source.charCodeAt(this.index);if(Ae.isLineTerminator(A))13===A&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===A){if(47===this.source.charCodeAt(this.index+1))return this.index+=2,m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},u.push({multiLine:!0,start:c+2,end:this.index-2,range:[c,this.index],loc:m})),u;++this.index}else++this.index}return m&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},u.push({multiLine:!0,start:c+2,end:this.index,range:[c,this.index],loc:m})),this.tolerateUnexpectedToken(),u}scanComments(){let u=[];for(;!this.eof();){let c=this.source.charCodeAt(this.index);if(Ae.isWhiteSpace(c))++this.index;else if(Ae.isLineTerminator(c))++this.index,13===c&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index;else{if(47!==c)break;if(c=this.source.charCodeAt(this.index+1),47===c){this.index+=2;const m=this.skipSingleLineComment(2);u=[...u,...m]}else{if(42!==c)break;{this.index+=2;const m=this.skipMultiLineComment();u=[...u,...m]}}}}return u}isKeyword(u){switch((u=u.toLowerCase()).length){case 2:return u===De.If||u===De.In;case 3:return u===De.Var||u===De.For;case 4:return u===De.Else;case 5:return u===De.Break||u===De.While;case 6:return u===De.Return||u===De.Import||u===De.Export;case 8:return u===De.Function||u===De.Continue;default:return!1}}codePointAt(u){let c=this.source.charCodeAt(u);if(c>=55296&&c<=56319){const m=this.source.charCodeAt(u+1);m>=56320&&m<=57343&&(c=1024*(c-55296)+m-56320+65536)}return c}scanHexEscape(u){const c="u"===u?4:2;let m=0;for(let A=0;A<c;++A){if(this.eof()||!Ae.isHexDigit(this.source.charCodeAt(this.index)))return null;m=16*m+hn(this.source[this.index++])}return String.fromCharCode(m)}scanUnicodeCodePointEscape(){let u=this.source[this.index],c=0;for("}"===u&&this.throwUnexpectedToken();!this.eof()&&(u=this.source[this.index++],Ae.isHexDigit(u.charCodeAt(0)));)c=16*c+hn(u);return(c>1114111||"}"!==u)&&this.throwUnexpectedToken(),Ae.fromCodePoint(c)}getIdentifier(){const u=this.index++;for(;!this.eof();){const c=this.source.charCodeAt(this.index);if(92===c)return this.index=u,this.getComplexIdentifier();if(c>=55296&&c<57343)return this.index=u,this.getComplexIdentifier();if(!Ae.isIdentifierPart(c))break;++this.index}return this.source.slice(u,this.index)}getComplexIdentifier(){let u,c=this.codePointAt(this.index),m=Ae.fromCodePoint(c);for(this.index+=m.length,92===c&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,u=this.scanUnicodeCodePointEscape()):(u=this.scanHexEscape("u"),null!==u&&"\\"!==u&&Ae.isIdentifierStart(u.charCodeAt(0))||this.throwUnexpectedToken()),m=u);!this.eof()&&(c=this.codePointAt(this.index),Ae.isIdentifierPart(c));)u=Ae.fromCodePoint(c),m+=u,this.index+=u.length,92===c&&(m=m.substring(0,m.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,u=this.scanUnicodeCodePointEscape()):(u=this.scanHexEscape("u"),null!==u&&"\\"!==u&&Ae.isIdentifierPart(u.charCodeAt(0))||this.throwUnexpectedToken()),m+=u);return m}octalToDecimal(u){let c="0"!==u,m=jt(u);return!this.eof()&&Ae.isOctalDigit(this.source.charCodeAt(this.index))&&(c=!0,m=8*m+jt(this.source[this.index++]),"0123".includes(u)&&!this.eof()&&Ae.isOctalDigit(this.source.charCodeAt(this.index))&&(m=8*m+jt(this.source[this.index++]))),{code:m,octal:c}}scanIdentifier(){let u;const c=this.index,m=92===this.source.charCodeAt(c)?this.getComplexIdentifier():this.getIdentifier();if(u=1===m.length?se.Identifier:this.isKeyword(m)?se.Keyword:m.toLowerCase()===De.Null?se.NullLiteral:m.toLowerCase()===De.True||m.toLowerCase()===De.False?se.BooleanLiteral:se.Identifier,u!==se.Identifier&&c+m.length!==this.index){const A=this.index;this.index=c,this.tolerateUnexpectedToken(C.InvalidEscapedReservedWord),this.index=A}return{type:u,value:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}}scanPunctuator(){const u=this.index;let c=this.source[this.index];switch(c){case"(":case"{":"{"===c&&this.curlyStack.push("{"),++this.index;break;case".":case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;case"}":++this.index,this.curlyStack.pop();break;default:for(let m=xt.length;m>0;m--)if(c=this.source.substring(this.index,this.index+m),xt[m-1].includes(c)){this.index+=m;break}}return this.index===u&&this.throwUnexpectedToken(),{type:se.Punctuator,value:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanHexLiteral(u){let c="";for(;!this.eof()&&Ae.isHexDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];return 0===c.length&&this.throwUnexpectedToken(),Ae.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:se.NumericLiteral,value:parseInt("0x"+c,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanBinaryLiteral(u){let c="";for(;!this.eof();){const m=this.source[this.index];if("0"!==m&&"1"!==m)break;c+=this.source[this.index++]}if(0===c.length&&this.throwUnexpectedToken(),!this.eof()){const m=this.source.charCodeAt(this.index);(Ae.isIdentifierStart(m)||Ae.isDecimalDigit(m))&&this.throwUnexpectedToken()}return{type:se.NumericLiteral,value:parseInt(c,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanOctalLiteral(u,c){let m="",A=!1;for(Ae.isOctalDigit(u.charCodeAt(0))?(A=!0,m="0"+this.source[this.index++]):++this.index;!this.eof()&&Ae.isOctalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];return A||0!==m.length||this.throwUnexpectedToken(),(Ae.isIdentifierStart(this.source.charCodeAt(this.index))||Ae.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:se.NumericLiteral,value:parseInt(m,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}}scanNumericLiteral(){const u=this.index;let c=this.source[u];dn(Ae.isDecimalDigit(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");let m="";if("."!==c){if(m=this.source[this.index++],c=this.source[this.index],"0"===m){if("x"===c||"X"===c)return++this.index,this.scanHexLiteral(u);if("b"===c||"B"===c)return++this.index,this.scanBinaryLiteral(u);if("o"===c||"O"===c)return this.scanOctalLiteral(c,u)}for(;Ae.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];c=this.source[this.index]}if("."===c){for(m+=this.source[this.index++];Ae.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];c=this.source[this.index]}if("e"===c||"E"===c)if(m+=this.source[this.index++],c=this.source[this.index],"+"!==c&&"-"!==c||(m+=this.source[this.index++]),Ae.isDecimalDigit(this.source.charCodeAt(this.index)))for(;Ae.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];else this.throwUnexpectedToken();return Ae.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:se.NumericLiteral,value:parseFloat(m),lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanStringLiteral(){const u=this.index;let c=this.source[u];dn("'"===c||'"'===c,"String literal must starts with a quote"),++this.index;let m=!1,A="";for(;!this.eof();){let k=this.source[this.index++];if(k===c){c="";break}if("\\"===k)if(k=this.source[this.index++],k&&Ae.isLineTerminator(k.charCodeAt(0)))++this.lineNumber,"\r"===k&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(k){case"u":if("{"===this.source[this.index])++this.index,A+=this.scanUnicodeCodePointEscape();else{const $=this.scanHexEscape(k);null===$&&this.throwUnexpectedToken(),A+=$}break;case"x":{const $=this.scanHexEscape(k);null===$&&this.throwUnexpectedToken(C.InvalidHexEscapeSequence),A+=$;break}case"n":A+="\n";break;case"r":A+="\r";break;case"t":A+="\t";break;case"b":A+="\b";break;case"f":A+="\f";break;case"v":A+="\v";break;case"8":case"9":A+=k,this.tolerateUnexpectedToken();break;default:if(k&&Ae.isOctalDigit(k.charCodeAt(0))){const $=this.octalToDecimal(k);m=$.octal||m,A+=String.fromCharCode($.code)}else A+=k}else{if(Ae.isLineTerminator(k.charCodeAt(0)))break;A+=k}}return""!==c&&(this.index=u,this.throwUnexpectedToken()),{type:se.StringLiteral,value:A,lineNumber:this.lineNumber,lineStart:this.lineStart,start:u,end:this.index}}scanTemplate(){let u="",c=!1;const m=this.index,A="`"===this.source[m];let k=!1,$=2;for(++this.index;!this.eof();){let ae=this.source[this.index++];if("`"===ae){$=1,k=!0,c=!0;break}if("$"!==ae)if("\\"!==ae)Ae.isLineTerminator(ae.charCodeAt(0))?(++this.lineNumber,"\r"===ae&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,u+="\n"):u+=ae;else if(ae=this.source[this.index++],Ae.isLineTerminator(ae.charCodeAt(0)))++this.lineNumber,"\r"===ae&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(ae){case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="\t";break;case"u":if("{"===this.source[this.index])++this.index,u+=this.scanUnicodeCodePointEscape();else{const oe=this.index,le=this.scanHexEscape(ae);null!==le?u+=le:(this.index=oe,u+=ae)}break;case"x":{const oe=this.scanHexEscape(ae);null===oe&&this.throwUnexpectedToken(C.InvalidHexEscapeSequence),u+=oe;break}case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;default:"0"===ae?(Ae.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(C.TemplateOctalLiteral),u+="\0"):Ae.isOctalDigit(ae.charCodeAt(0))?this.throwUnexpectedToken(C.TemplateOctalLiteral):u+=ae}else{if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,c=!0;break}u+=ae}}return c||this.throwUnexpectedToken(),A||this.curlyStack.pop(),{type:se.Template,value:this.source.slice(m+1,this.index-$),cooked:u,head:A,tail:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}}lex(){if(this.eof())return{type:se.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const u=this.source.charCodeAt(this.index);return Ae.isIdentifierStart(u)?this.scanIdentifier():40===u||41===u||59===u?this.scanPunctuator():39===u||34===u?this.scanStringLiteral():46===u?Ae.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():Ae.isDecimalDigit(u)?this.scanNumericLiteral():96===u||125===u&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():u>=55296&&u<57343&&Ae.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}}var Ze,Pt;function mn(l,u=0){let c=l.start-l.lineStart,m=l.lineNumber;return c<0&&(c+=u,m--),{index:l.start,line:m,column:c}}function pn(l){return[{index:l.range[0],...l.loc.start},{index:l.range[1],...l.loc.end}]}function Dn(l){return ft[l]??0}(function(l){l[l.None=0]="None",l[l.Function=1]="Function",l[l.IfClause=2]="IfClause",l[l.ForLoop=4]="ForLoop",l[l.WhileLoop=8]="WhileLoop"})(Ze||(Ze={})),function(l){l[l.AsObject=0]="AsObject",l[l.Automatic=1]="Automatic"}(Pt||(Pt={}));class Jn{constructor(u,c={},m){this.delegate=m,this.hasLineTerminator=!1,this.options={tokens:"boolean"==typeof c.tokens&&c.tokens,comments:"boolean"==typeof c.comments&&c.comments,tolerant:"boolean"==typeof c.tolerant&&c.tolerant},this.options.comments&&(this.commentHandler=new zn),this.errorHandler=new Wn(this.options.tolerant),this.scanner=new Kn(u,this.errorHandler),this.context={isAssignmentTarget:!1,blockContext:Ze.None,curlyParsingType:Pt.AsObject},this.rawToken={type:se.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.endMarker={index:0,line:this.scanner.lineNumber,column:0},this.readNextRawToken(),this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(u,c,{validTypes:m,invalidTypes:A}){m?.some(k=>u.type===k)||A?.some(k=>u.type===k)&&this.throwError(C.InvalidExpression,c)}throwError(u,c,m=this.endMarker){const{index:A,line:k,column:$}=c;this.errorHandler.throwError({code:u,index:A,line:k,column:$+1,len:m.index-A-1})}tolerateError(u,c){throw new Error("######################################### !!!")}unexpectedTokenError(u={}){const{rawToken:c}=u;let m,{code:A,data:k}=u;if(c){if(!A)switch(c.type){case se.EOF:A=C.UnexpectedEndOfScript;break;case se.Identifier:A=C.UnexpectedIdentifier;break;case se.NumericLiteral:A=C.UnexpectedNumber;break;case se.StringLiteral:A=C.UnexpectedString;break;case se.Template:A=C.UnexpectedTemplate}m=c.value.toString()}else m="ILLEGAL";A=A??C.UnexpectedToken,k||(k={value:m});const $=Gt(A,k);if(c)return new S({code:A,index:c.start,line:c.lineNumber,column:c.start-c.lineStart+1,len:c.end-c.start-1,data:k,description:$});const{index:ae,line:oe}=this.endMarker;return new S({code:A,index:ae,line:oe,column:this.endMarker.column+1,data:k,description:$})}throwUnexpectedToken(u={}){throw u.rawToken=u.rawToken??this.rawToken,this.unexpectedTokenError(u)}collectComments(u){const{commentHandler:c}=this;c&&u.length&&u.forEach(m=>{const A={type:m.multiLine?ie.BlockComment:ie.LineComment,value:this.getSourceValue(m),range:m.range,loc:m.loc};c.collectComment(A)})}peekAhead(u){const m=this.scanner.saveState(),A=u.call(this,()=>(this.scanner.scanComments(),this.scanner.lex()));return this.scanner.restoreState(m),A}getSourceValue(u){return this.scanner.source.slice(u.start,u.end)}convertToToken(u){return{type:_t[u.type],value:this.getSourceValue(u),range:[u.start,u.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index,this.endMarker.line=this.scanner.lineNumber,this.endMarker.column=this.scanner.index-this.scanner.lineStart;const u=this.rawToken;this.collectComments(this.scanner.scanComments()),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart),this.rawToken=this.scanner.lex(),this.hasLineTerminator=u.lineNumber!==this.rawToken.lineNumber,this.options.tokens&&this.rawToken.type!==se.EOF&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(u){return{range:[u.index,this.endMarker.index],loc:{start:{line:u.line,column:u.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(u){return(this.delegate||this.commentHandler)&&(this.commentHandler?.attachComments(u),this.delegate?.(u)),u}expectPunctuator(u){const c=this.rawToken;this.matchPunctuator(u)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:c,code:C.PunctuatorExpected,data:{value:u}})}expectKeyword(u){this.rawToken.type!==se.Keyword||this.rawToken.value.toLowerCase()!==u?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}expectContextualKeyword(u){this.rawToken.type!==se.Identifier||this.rawToken.value.toLowerCase()!==u?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}matchKeyword(u){return this.rawToken.type===se.Keyword&&this.rawToken.value.toLowerCase()===u}matchContextualKeyword(u){return this.rawToken.type===se.Identifier&&this.rawToken.value===u}matchPunctuator(u){return this.rawToken.type===se.Punctuator&&this.rawToken.value===u}getMatchingPunctuator(u){if("string"==typeof u&&(u=u.split("")),this.rawToken.type===se.Punctuator&&u?.length)return u.find(this.matchPunctuator,this)}isolateCoverGrammar(u){const c=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;const m=u.call(this);return this.context.isAssignmentTarget=c,m}inheritCoverGrammar(u){const c=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;const m=u.call(this);return this.context.isAssignmentTarget=this.context.isAssignmentTarget&&c,m}withBlockContext(u,c){const m=this.context.blockContext;this.context.blockContext=this.context.blockContext|u;const A=this.context.curlyParsingType;this.context.curlyParsingType=Pt.Automatic;const k=c.call(this);return this.context.blockContext=m,this.context.curlyParsingType=A,k}consumeSemicolon(){if(this.matchPunctuator(";"))this.readNextRawToken();else if(!this.hasLineTerminator)return this.rawToken.type===se.EOF||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,void(this.endMarker.column=this.startMarker.column)):void this.throwUnexpectedToken({rawToken:this.rawToken})}parsePrimaryExpression(){const u=this.captureStartMarker(),c=this.rawToken;switch(c.type){case se.Identifier:return this.readNextRawToken(),this.finalize({type:ie.Identifier,name:c.value,...this.getItemLocation(u)});case se.NumericLiteral:case se.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value,raw:this.getSourceValue(c),isString:"string"==typeof c.value,...this.getItemLocation(u)});case se.BooleanLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value.toLowerCase()===De.True,raw:this.getSourceValue(c),isString:!1,...this.getItemLocation(u)});case se.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:ie.Literal,value:null,raw:this.getSourceValue(c),isString:!1,...this.getItemLocation(u)});case se.Template:return this.parseTemplateLiteral();case se.Punctuator:switch(c.value){case"(":return this.inheritCoverGrammar(this.parseGroupExpression);case"[":return this.inheritCoverGrammar(this.parseArrayInitializer);case"{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case se.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){const u=this.captureStartMarker();this.expectPunctuator("[");const c=[];for(;!this.matchPunctuator("]");){const m=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(C.InvalidExpression,m)):(c.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||this.expectPunctuator(","))}return this.expectPunctuator("]"),this.finalize({type:ie.ArrayExpression,elements:c,...this.getItemLocation(u)})}parseObjectPropertyKey(){const u=this.captureStartMarker(),c=this.rawToken;switch(c.type){case se.StringLiteral:return this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value,raw:this.getSourceValue(c),isString:!0,...this.getItemLocation(u)});case se.Identifier:case se.BooleanLiteral:case se.NullLiteral:case se.Keyword:return this.readNextRawToken(),this.finalize({type:ie.Identifier,name:c.value,...this.getItemLocation(u)});default:this.throwError(C.KeyMustBeString,u)}}parseObjectProperty(){const u=this.rawToken,c=this.captureStartMarker(),m=this.parseObjectPropertyKey();let A=!1,k=null;return this.matchPunctuator(":")?(this.readNextRawToken(),k=this.inheritCoverGrammar(this.parseAssignmentExpression)):u.type===se.Identifier?(A=!0,k=this.finalize({type:ie.Identifier,name:u.value,...this.getItemLocation(c)})):this.throwUnexpectedToken({rawToken:this.rawToken}),this.finalize({type:ie.Property,kind:"init",key:m,value:k,shorthand:A,...this.getItemLocation(c)})}parseObjectExpression(){const u=this.captureStartMarker();this.expectPunctuator("{");const c=[];for(;!this.matchPunctuator("}");)c.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");return this.expectPunctuator("}"),this.finalize({type:ie.ObjectExpression,properties:c,...this.getItemLocation(u)})}parseTemplateElement(u=!1){const c=this.rawToken;c.type!==se.Template&&this.throwUnexpectedToken({rawToken:c}),u&&!c.head&&this.throwUnexpectedToken({code:C.InvalidTemplateHead,rawToken:c});const m=this.captureStartMarker();this.readNextRawToken();const{value:A,cooked:k,tail:$}=c,ae=this.finalize({type:ie.TemplateElement,value:{raw:A,cooked:k},tail:$,...this.getItemLocation(m)});return ae.loc.start.column++,ae.loc.end.column=ae.loc.end.column-($?1:2),ae}parseTemplateLiteral(){const u=this.captureStartMarker(),c=[],m=[];let A=this.parseTemplateElement(!0);for(m.push(A);!A.tail;)c.push(this.parseExpression()),A=this.parseTemplateElement(),m.push(A);return this.finalize({type:ie.TemplateLiteral,quasis:m,expressions:c,...this.getItemLocation(u)})}parseGroupExpression(){this.expectPunctuator("(");const u=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.expectPunctuator(")"),u}parseArguments(){this.expectPunctuator("(");const u=[];if(!this.matchPunctuator(")"))for(;;){const c=this.isolateCoverGrammar(this.parseAssignmentExpression);if(u.push(c),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),u}parseMemberName(){const u=this.rawToken,c=this.captureStartMarker();return this.readNextRawToken(),u.type!==se.NullLiteral&&u.type!==se.Identifier&&u.type!==se.Keyword&&u.type!==se.BooleanLiteral&&this.throwUnexpectedToken({rawToken:u}),this.finalize({type:ie.Identifier,name:u.value,...this.getItemLocation(c)})}parseLeftHandSideExpression(){const u=this.captureStartMarker();let c=this.inheritCoverGrammar(this.parsePrimaryExpression);const m=this.captureStartMarker();let A;for(;A=this.getMatchingPunctuator("([.");)switch(A){case"(":{this.context.isAssignmentTarget=!1,c.type!==ie.Identifier&&c.type!==ie.MemberExpression&&this.throwError(C.IdentiferExpected,u,m);const k=this.parseArguments();c=this.finalize({type:ie.CallExpression,callee:c,arguments:k,...this.getItemLocation(u)});continue}case"[":{this.context.isAssignmentTarget=!0,this.expectPunctuator("[");const k=this.isolateCoverGrammar(this.parseExpression);this.expectPunctuator("]"),c=this.finalize({type:ie.MemberExpression,computed:!0,object:c,property:k,...this.getItemLocation(u)});continue}case".":{this.context.isAssignmentTarget=!0,this.expectPunctuator(".");const k=this.parseMemberName();c=this.finalize({type:ie.MemberExpression,computed:!1,object:c,property:k,...this.getItemLocation(u)});continue}}return c}parseUpdateExpression(){const u=this.captureStartMarker();let c=this.getMatchingPunctuator(ct);if(c){this.readNextRawToken();const $=this.captureStartMarker(),ae=this.inheritCoverGrammar(this.parseUnaryExpression);return ae.type!==ie.Identifier&&ae.type!==ie.MemberExpression&&ae.type!==ie.CallExpression&&this.throwError(C.InvalidExpression,$),this.context.isAssignmentTarget||this.tolerateError(C.InvalidLeftHandSideInAssignment,u),this.context.isAssignmentTarget=!1,this.finalize({type:ie.UpdateExpression,operator:c,argument:ae,prefix:!0,...this.getItemLocation(u)})}const m=this.captureStartMarker(),A=this.inheritCoverGrammar(this.parseLeftHandSideExpression),k=this.captureStartMarker();return this.hasLineTerminator?A:(c=this.getMatchingPunctuator(ct),c?(A.type!==ie.Identifier&&A.type!==ie.MemberExpression&&this.throwError(C.InvalidExpression,m,k),this.context.isAssignmentTarget||this.tolerateError(C.InvalidLeftHandSideInAssignment,u),this.readNextRawToken(),this.context.isAssignmentTarget=!1,this.finalize({type:ie.UpdateExpression,operator:c,argument:A,prefix:!1,...this.getItemLocation(u)})):A)}parseUnaryExpression(){const u=this.getMatchingPunctuator(tt);if(u){const c=this.captureStartMarker();this.readNextRawToken();const m=this.inheritCoverGrammar(this.parseUnaryExpression);return this.context.isAssignmentTarget=!1,this.finalize({type:ie.UnaryExpression,operator:u,argument:m,prefix:!0,...this.getItemLocation(c)})}return this.parseUpdateExpression()}parseBinaryExpression(){const u=this.rawToken;let c=this.inheritCoverGrammar(this.parseUnaryExpression);if(this.rawToken.type!==se.Punctuator)return c;const m=this.rawToken.value;let A=Dn(m);if(0===A)return c;this.readNextRawToken(),this.context.isAssignmentTarget=!1;const k=[u,this.rawToken];let $=c,ae=this.inheritCoverGrammar(this.parseUnaryExpression);const oe=[$,m,ae],le=[A];for(;this.rawToken.type===se.Punctuator&&(A=Dn(this.rawToken.value))>0;){for(;oe.length>2&&A<=le[le.length-1];){ae=oe.pop();const xe=oe.pop();le.pop(),$=oe.pop(),k.pop();const He=k[k.length-1],Xe=mn(He,He.lineStart);oe.push(this.finalize(this.createBinaryOrLogicalExpression(Xe,xe,$,ae)))}oe.push(this.rawToken.value),le.push(A),k.push(this.rawToken),this.readNextRawToken(),oe.push(this.inheritCoverGrammar(this.parseUnaryExpression))}let Oe=oe.length-1;c=oe[Oe];let Fe=k.pop();for(;Oe>1;){const xe=k.pop();if(!xe)break;const He=Fe?.lineStart,Xe=mn(xe,He);c=this.finalize(this.createBinaryOrLogicalExpression(Xe,oe[Oe-1],oe[Oe-2],c)),Oe-=2,Fe=xe}return c}createBinaryOrLogicalExpression(u,c,m,A){const k=dt.includes(c)?ie.LogicalExpression:ie.BinaryExpression;return k===ie.BinaryExpression||(m.type!==ie.AssignmentExpression&&m.type!==ie.UpdateExpression||this.throwError(C.InvalidExpression,...pn(m)),A.type!==ie.AssignmentExpression&&A.type!==ie.UpdateExpression||this.throwError(C.InvalidExpression,...pn(m))),{type:k,operator:c,left:m,right:A,...this.getItemLocation(u)}}parseAssignmentExpression(){const u=this.captureStartMarker(),c=this.inheritCoverGrammar(this.parseBinaryExpression),m=this.captureStartMarker(),A=this.getMatchingPunctuator(vt);if(!A)return c;c.type!==ie.Identifier&&c.type!==ie.MemberExpression&&this.throwError(C.InvalidExpression,u,m),this.context.isAssignmentTarget||this.tolerateError(C.InvalidLeftHandSideInAssignment,u),this.matchPunctuator("=")||(this.context.isAssignmentTarget=!1),this.readNextRawToken();const k=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize({type:ie.AssignmentExpression,left:c,operator:A,right:k,...this.getItemLocation(u)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression)}parseStatements(u){const c=[];for(;this.rawToken.type!==se.EOF&&!this.matchPunctuator(u);){const m=this.parseStatementListItem();q(m)||c.push(m)}return c}parseStatementListItem(){return this.context.isAssignmentTarget=!0,this.matchKeyword(De.Function)?this.parseFunctionDeclaration():this.matchKeyword(De.Export)?this.parseExportDeclaration():this.matchKeyword(De.Import)?this.parseImportDeclaration():this.parseStatement()}parseBlock(){const u=this.captureStartMarker();this.expectPunctuator("{");const c=this.parseStatements("}");return this.expectPunctuator("}"),this.finalize({type:ie.BlockStatement,body:c,...this.getItemLocation(u)})}parseObjectStatement(){const u=this.captureStartMarker(),c=this.parseObjectExpression();return this.finalize({type:ie.ExpressionStatement,expression:c,...this.getItemLocation(u)})}parseBlockOrObjectStatement(){return this.context.curlyParsingType===Pt.AsObject||this.peekAhead(u=>{let c=u();return(c.type===se.Identifier||c.type===se.StringLiteral)&&(c=u(),c.type===se.Punctuator&&":"===c.value)})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){const u=this.rawToken;if(u.type!==se.Identifier)return null;const c=this.captureStartMarker();return this.readNextRawToken(),this.finalize({type:ie.Identifier,name:u.value,...this.getItemLocation(c)})}parseVariableDeclarator(){const u=this.captureStartMarker(),c=this.parseIdentifier();c||this.throwUnexpectedToken({code:C.IdentiferExpected});let m=null;if(this.matchPunctuator("=")){this.readNextRawToken();const A=this.rawToken;try{m=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch{this.throwUnexpectedToken({rawToken:A,code:C.InvalidVariableAssignment})}}return this.finalize({type:ie.VariableDeclarator,id:c,init:m,...this.getItemLocation(u)})}parseVariableDeclarationList(){const u=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),u.push(this.parseVariableDeclarator());return u}parseVariableDeclaration(){const u=this.captureStartMarker();this.expectKeyword(De.Var);const c=this.parseVariableDeclarationList();return this.consumeSemicolon(),this.finalize({type:ie.VariableDeclaration,declarations:c,kind:"var",...this.getItemLocation(u)})}parseEmptyStatement(){const u=this.captureStartMarker();return this.expectPunctuator(";"),this.finalize({type:ie.EmptyStatement,...this.getItemLocation(u)})}parseExpressionStatement(){const u=this.captureStartMarker(),c=this.parseExpression();return this.consumeSemicolon(),this.finalize({type:ie.ExpressionStatement,expression:c,...this.getItemLocation(u)})}parseIfClause(){return this.withBlockContext(Ze.IfClause,this.parseStatement)}parseIfStatement(){const u=this.captureStartMarker();this.expectKeyword(De.If),this.expectPunctuator("(");const c=this.captureStartMarker(),m=this.parseExpression(),A=this.captureStartMarker();this.expectPunctuator(")"),m.type!==ie.AssignmentExpression&&m.type!==ie.UpdateExpression||this.throwError(C.InvalidExpression,c,A);const k=this.parseIfClause();let $=null;return this.matchKeyword(De.Else)&&(this.readNextRawToken(),$=this.parseIfClause()),this.finalize({type:ie.IfStatement,test:m,consequent:k,alternate:$,...this.getItemLocation(u)})}parseWhileStatement(){const u=this.captureStartMarker();this.expectKeyword(De.While),this.expectPunctuator("(");const c=this.captureStartMarker(),m=this.parseExpression(),A=this.captureStartMarker();this.expectPunctuator(")"),m.type!==ie.AssignmentExpression&&m.type!==ie.UpdateExpression||this.throwError(C.InvalidExpression,c,A);const k=this.withBlockContext(Ze.WhileLoop,this.parseStatement);return this.finalize({type:ie.WhileStatement,test:m,body:k,...this.getItemLocation(u)})}parseForStatement(){let u=null,c=null,m=null,A=null,k=null;const $=this.captureStartMarker();if(this.expectKeyword(De.For),this.expectPunctuator("("),this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(De.Var)){const oe=this.captureStartMarker();this.readNextRawToken();const le=this.parseVariableDeclarationList();1===le.length&&this.matchKeyword(De.In)?(le[0].init&&this.throwError(C.ForInOfLoopInitializer,oe),A=this.finalize({type:ie.VariableDeclaration,declarations:le,kind:"var",...this.getItemLocation(oe)}),this.readNextRawToken(),k=this.parseExpression()):(this.matchKeyword(De.In)&&this.throwError(C.InvalidLeftHandSideInForIn,oe),u=this.finalize({type:ie.VariableDeclaration,declarations:le,kind:"var",...this.getItemLocation(oe)}),this.expectPunctuator(";"))}else{const oe=this.context.isAssignmentTarget,le=this.captureStartMarker();u=this.inheritCoverGrammar(this.parseAssignmentExpression),this.matchKeyword(De.In)?(this.context.isAssignmentTarget||this.tolerateError(C.InvalidLeftHandSideInForIn,le),u.type!==ie.Identifier&&this.throwError(C.InvalidLeftHandSideInForIn,le),this.readNextRawToken(),A=u,k=this.parseExpression(),u=null):(this.context.isAssignmentTarget=oe,this.expectPunctuator(";"))}A||(this.matchPunctuator(";")||(c=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(m=this.isolateCoverGrammar(this.parseExpression))),this.expectPunctuator(")");const ae=this.withBlockContext(Ze.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement));return this.finalize(A&&k?{type:ie.ForInStatement,left:A,right:k,body:ae,...this.getItemLocation($)}:{type:ie.ForStatement,init:u,test:c,update:m,body:ae,...this.getItemLocation($)})}parseContinueStatement(){const u=this.captureStartMarker();return this.expectKeyword(De.Continue),this.consumeSemicolon(),this.finalize({type:ie.ContinueStatement,...this.getItemLocation(u)})}parseBreakStatement(){const u=this.captureStartMarker();return this.expectKeyword(De.Break),this.consumeSemicolon(),this.finalize({type:ie.BreakStatement,...this.getItemLocation(u)})}parseReturnStatement(){const u=this.captureStartMarker();this.expectKeyword(De.Return);const c=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||this.rawToken.type===se.EOF)&&this.rawToken.type!==se.StringLiteral&&this.rawToken.type!==se.Template?null:this.parseExpression();return this.consumeSemicolon(),this.finalize({type:ie.ReturnStatement,argument:c,...this.getItemLocation(u)})}parseStatement(){switch(this.rawToken.type){case se.BooleanLiteral:case se.NullLiteral:case se.NumericLiteral:case se.StringLiteral:case se.Template:case se.Identifier:return this.parseExpressionStatement();case se.Punctuator:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case se.Keyword:switch(this.rawToken.value.toLowerCase()){case De.Break:return this.parseBreakStatement();case De.Continue:return this.parseContinueStatement();case De.For:return this.parseForStatement();case De.Function:return this.parseFunctionDeclaration();case De.If:return this.parseIfStatement();case De.Return:return this.parseReturnStatement();case De.Var:return this.parseVariableDeclaration();case De.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){const u=[];if(this.expectPunctuator("("),!this.matchPunctuator(")"))for(;this.rawToken.type!==se.EOF;){const c=this.parseIdentifier();if(c||this.throwUnexpectedToken({rawToken:this.rawToken,code:C.IdentiferExpected}),u.push(c),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),u}parseFunctionDeclaration(){(this.context.blockContext&Ze.Function)===Ze.Function&&this.throwUnexpectedToken({code:C.NoFunctionInsideFunction}),(this.context.blockContext&Ze.WhileLoop)!==Ze.WhileLoop&&(this.context.blockContext&Ze.IfClause)!==Ze.IfClause||this.throwUnexpectedToken({code:C.NoFunctionInsideBlock});const u=this.captureStartMarker();this.expectKeyword(De.Function);const c=this.parseIdentifier();c||this.throwUnexpectedToken({code:C.InvalidFunctionIdentifier});const m=this.parseFormalParameters(),A=this.context.blockContext;this.context.blockContext=this.context.blockContext|Ze.Function;const k=this.parseBlock();return this.context.blockContext=A,this.finalize({type:ie.FunctionDeclaration,id:c,params:m,body:k,...this.getItemLocation(u)})}parseScript(){const u=this.captureStartMarker(),c=this.parseStatements(),m=this.finalize({type:ie.Program,body:c,...this.getItemLocation(u)});return this.options.tokens&&(m.tokens=this.tokens),this.options.tolerant&&(m.errors=this.errorHandler.errors),m}parseExportDeclaration(){this.context.blockContext!==Ze.None&&this.throwUnexpectedToken({code:C.ModuleExportRootOnly});let u=null;const c=this.captureStartMarker();return this.expectKeyword(De.Export),this.matchKeyword(De.Var)?u=this.parseVariableDeclaration():this.matchKeyword("function")?u=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:C.InvalidExpression}),this.finalize({type:ie.ExportNamedDeclaration,declaration:u,specifiers:[],source:null,...this.getItemLocation(c)})}parseModuleSpecifier(){const u=this.captureStartMarker(),c=this.rawToken;if(c.type===se.StringLiteral)return this.readNextRawToken(),this.finalize({type:ie.Literal,value:c.value,raw:this.getSourceValue(c),isString:!0,...this.getItemLocation(u)});this.throwError(C.InvalidModuleUri,u)}parseDefaultSpecifier(){const u=this.captureStartMarker(),c=this.parseIdentifier();return c||this.throwUnexpectedToken({code:C.IdentiferExpected}),this.finalize({type:ie.ImportDefaultSpecifier,local:c,...this.getItemLocation(u)})}parseImportDeclaration(){this.context.blockContext!==Ze.None&&this.throwUnexpectedToken({code:C.ModuleImportRootOnly});const u=this.captureStartMarker();this.expectKeyword(De.Import);const c=this.parseDefaultSpecifier();this.expectContextualKeyword(De.From);const m=this.parseModuleSpecifier();return this.finalize({type:ie.ImportDeclaration,specifiers:[c],source:m,...this.getItemLocation(u)})}}function Ot(l,u=[]){const c=function $n(l,u,c){return new Jn(l,u,c).parseScript()}(l);if(null==c.body)throw new S({index:0,line:0,column:0,data:null,description:"",code:C.InvalidExpression});if(0===c.body.length)throw new S({index:0,line:0,column:0,data:null,description:"",code:C.InvalidExpression});if(0===c.body.length)throw new S({index:0,line:0,column:0,data:null,description:"",code:C.InvalidExpression});return c.loadedModules={},(0,Q.dN)(c,u),c}class Lt{constructor(u){const c=this;c._keys=[],c._values=[],c.length=0,u&&u.forEach(m=>{c.set(m[0],m[1])})}entries(){return[].slice.call(this.keys().map((u,c)=>[u,this._values[c]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(u){return this._keys.includes(u)}get(u){const c=this._keys.indexOf(u);return c>-1?this._values[c]:null}deepGet(u){if(!u||!u.length)return null;const c=(m,A)=>null==m?null:A.length?c(m instanceof Lt?m.get(A[0]):m[A[0]],A.slice(1)):m;return c(this.get(u[0]),u.slice(1))}set(u,c){const m=this,A=this._keys.indexOf(u);return A>-1?m._values[A]=c:(m._keys.push(u),m._values.push(c),m.length=m._values.length),this}sortedSet(u,c,m,A){const k=this,$=this._keys.length,ae=m||0,oe=void 0!==A?A:$-1;if(0===$)return k._keys.push(u),k._values.push(c),k;if(u===this._keys[ae])return this._values.splice(ae,0,c),this;if(u===this._keys[oe])return this._values.splice(oe,0,c),this;if(u>this._keys[oe])return this._keys.splice(oe+1,0,u),this._values.splice(oe+1,0,c),this;if(u<this._keys[ae])return this._values.splice(ae,0,c),this._keys.splice(ae,0,u),this;if(ae>=oe)return this;const le=ae+Math.floor((oe-ae)/2);return u<this._keys[le]?this.sortedSet(u,c,ae,le-1):u>this._keys[le]?this.sortedSet(u,c,le+1,oe):this}size(){return this.length}clear(){const u=this;return u._keys.length=u.length=u._values.length=0,this}delete(u){const c=this,m=c._keys.indexOf(u);return m>-1&&(c._keys.splice(m,1),c._values.splice(m,1),c.length=c._keys.length,!0)}forEach(u){this._keys.forEach((c,m)=>{u(this._values[m],c,m)})}map(u){return this.keys().map((c,m)=>u(this._values[m],c,m))}filter(u){const c=this;return c._keys.forEach((m,A)=>{!1===u(c._values[A],m,A)&&c.delete(m)}),this}clone(){return new Lt(this.entries())}}class gn{constructor(u=20){this._maxEntries=u,this._values=new Lt}delete(u){this._values.has(u)&&this._values.delete(u)}get(u){let c=null;return this._values.has(u)&&(c=this._values.get(u),this._values.delete(u),this._values.set(u,c)),c}put(u,c){if(this._values.size()>=this._maxEntries){const m=this._values.keys()[0];this._values.delete(m)}this._values.set(u,c)}}class Ge{constructor(u){this.portalUri=u}normalizeModuleUri(u){const c=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi,m=/(?<portalurl>.+)\/home\/item\.html\?id\=(?<itemid>.+)$/gi,A=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,k=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi,$=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(u.startsWith("portal+")){let ae=u.substring(7),oe="",le=ae,Oe=!1;for(const He of[m,k,A]){const Xe=He.exec(ae);if(null!==Xe){const bt=Xe.groups;le=bt.itemid,oe=bt.portalurl,Oe=!0;break}}if(!1===Oe){if(!c.test(ae))throw new f.Tu(f.TD.UnsupportedUriProtocol,{uri:u});le=ae,oe=this.portalUri}le.includes("/")&&(le=le.split("/")[0]),le.includes("?")&&(le=le.split("?")[0]);let Fe="current";const xe=$.exec(le);if(null!==xe){const He=xe.groups;le=He.itemid,Fe=He.versionstring}return ae=new gt.Z({url:oe}).restUrl+"/content/items/"+le+"/resources/"+Fe+".arc",{url:ae,scheme:"portal",uri:"PO:"+ae}}if(u.startsWith("mock")){if("mock"===u)return{url:"",scheme:"mock",data:'\n      export var hello = 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};const ae=u.replace("mock:","");if(void 0!==Ge.mocks[ae])return{url:"",scheme:"mock",data:Ge.mocks[ae],uri:u}}throw new f.Tu(f.TD.UnrecognisedUri,{uri:u})}fetchModule(u){var c=this;return(0,b.Z)(function*(){const m=Ge.cachedModules.getFromCache(u.uri);if(m)return m;const A=c.fetchSource(u);Ge.cachedModules.addToCache(u.uri,A);let k=null;try{k=yield A}catch($){throw Ge.cachedModules.removeFromCache(u.uri),$}return k})()}fetchSource(u){return(0,b.Z)(function*(){if("portal"===u.scheme){const c=yield(0,Ft.default)(u.url,{responseType:"text",query:{}});if(c.data)return Ot(c.data,[])}if("mock"===u.scheme)return Ot(u.data??"",[]);throw new f.Tu(f.TD.UnsupportedUriProtocol)})()}static create(u){return new Ge(u)}static getDefault(){return this._default??(Ge._default=Ge._moduleResolverFactory())}static set moduleResolverClass(u){this._moduleResolverFactory=u,this._default=null}}Ge.mocks={},Ge.cachedModules=new class Yn{constructor(u=20){this._maxEntries=u,this._cache=new gn(this._maxEntries)}clear(){this._cache=new gn(this._maxEntries)}addToCache(u,c){this._cache.put(u,c)}removeFromCache(u){this._cache.delete(u)}getFromCache(u){return this._cache.get(u)}}(30),Ge._default=null,Ge._moduleResolverFactory=()=>{const l=gt.Z.getDefault();return new Ge(l.url)};class Qn extends y.Rm{constructor(u,c){super(),this.definition=null,this.context=null,this.definition=u,this.context=c}createFunction(u){return(...c)=>{const m={spatialReference:this.context.spatialReference,console:this.context.console,timeReference:this.context.timeReference?this.context.timeReference:null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:u.depthCounter.depth+1},globalScope:this.context.globalScope};if(m.depthCounter.depth>64)throw new f.aV(u,f.rH.MaximumCallDepth,null);return zt(this.definition,m,c,null)}}call(u,c){return at(u,c,(m,A,k)=>{const $={spatialReference:u.spatialReference,globalScope:u.globalScope,depthCounter:{depth:u.depthCounter.depth+1},libraryResolver:u.libraryResolver,exports:u.exports,timeReference:u.timeReference??null,console:u.console,lrucache:u.lrucache,interceptor:u.interceptor,localScope:{}};if($.depthCounter.depth>64)throw new f.aV(u,f.rH.MaximumCallDepth,c);return zt(this.definition,$,k,c)})}marshalledCall(u,c,m,A){return A(u,c,(k,$,ae)=>{const oe={spatialReference:u.spatialReference,globalScope:m.globalScope,depthCounter:{depth:u.depthCounter.depth+1},libraryResolver:u.libraryResolver,exports:u.exports,console:u.console,timeReference:u.timeReference??null,lrucache:u.lrucache,interceptor:u.interceptor,localScope:{}};return ae=ae.map(le=>!(0,D.i)(le)||le instanceof y.Vg?le:(0,y.aq)(le,u,A)),(0,y.aq)(zt(this.definition,oe,ae,c),m,A)})}}class St extends T.P{constructor(u){super(u)}global(u){const c=this.executingContext.globalScope[u.toLowerCase()];if(c.valueset||(c.value=fe(this.executingContext,c.node),c.valueset=!0),(0,D.i)(c.value)&&!(c.value instanceof y.Vg)){const m=new y.Vg;m.fn=c.value,m.parameterEvaluator=at,m.context=this.executingContext,c.value=m}return c.value}setGlobal(u,c){if((0,D.i)(c))throw new f.aV(null,f.rH.AssignModuleFunction,null);this.executingContext.globalScope[u.toLowerCase()]={value:c,valueset:!0,node:null}}hasGlobal(u){return void 0===this.executingContext.exports[u]&&(u=u.toLowerCase()),void 0!==this.executingContext.exports[u]}loadModule(u){let c=u.spatialReference;null==c&&(c=new L.Z({wkid:102100})),this.moduleScope=Cn({},u.customfunctions,u.timeReference),this.executingContext={spatialReference:c,globalScope:this.moduleScope,localScope:null,libraryResolver:new _.s(u.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},console:u.console?u.console:wn,timeReference:u.timeReference??null,lrucache:u.lrucache,interceptor:u.interceptor,depthCounter:{depth:1}},fe(this.executingContext,this.source.syntax)}}function at(l,u,c){try{return!0===u.preparsed?c(l,null,u.arguments):c(l,u,function yn(l,u){const c=[];for(let m=0;m<u.arguments.length;m++)c.push(fe(l,u.arguments[m]));return c}(l,u))}catch(m){throw m}}function fe(l,u){try{switch(u?.type){case"EmptyStatement":return D.v;case"VariableDeclarator":return function mr(l,u){let c=null===u.init?null:fe(l,u.init);if(c===D.v&&(c=null),"Identifier"!==u.id.type)throw new f.aV(l,f.rH.InvalidIdentifier,u);const m=u.id.name.toLowerCase();return null!=l.localScope?l.localScope[m]={value:c,valueset:!0,node:u.init}:l.globalScope[m]={value:c,valueset:!0,node:u.init},D.v}(l,u);case"VariableDeclaration":return function hr(l,u){for(let c=0;c<u.declarations.length;c++)fe(l,u.declarations[c]);return D.v}(l,u);case"ImportDeclaration":return function dr(l,u){const c=u.specifiers[0].local.name.toLowerCase(),m=l.libraryResolver.loadLibrary(c);let A=null;return l.libraryResolver._moduleSingletons?.has(m.uri)?A=l.libraryResolver._moduleSingletons.get(m.uri):(A=new St(m),A.loadModule(l),l.libraryResolver._moduleSingletons?.set(m.uri,A)),l.globalScope[c]={value:A,valueset:!0,node:u},D.v}(l,u);case"ExportNamedDeclaration":return function fr(l,u){if(fe(l,u.declaration),"FunctionDeclaration"===u.declaration.type)l.exports[u.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===u.declaration.type)for(const c of u.declaration.declarations)l.exports[c.id.name.toLowerCase()]="variable";return D.v}(l,u);case"BlockStatement":case"Program":return function ur(l,u){let c=D.v;for(let m=0;m<u.body.length;m++)if(c=fe(l,u.body[m]),c instanceof D.R||c===D.o||c===D.p)return c;return c}(l,u);case"FunctionDeclaration":return function cr(l,u){const c=u.id.name.toLowerCase();return l.globalScope[c]={valueset:!0,node:null,value:new Qn(u,l)},D.v}(l,u);case"ReturnStatement":return function lr(l,u){if(null===u.argument)return new D.R(D.v);const c=fe(l,u.argument);return new D.R(c)}(l,u);case"IfStatement":return function or(l,u){const c=fe(l,u.test);if(!0===c)return fe(l,u.consequent);if(!1===c)return null!==u.alternate?fe(l,u.alternate):D.v;throw new f.aV(l,f.rH.BooleanConditionRequired,u)}(l,u);case"ExpressionStatement":return function sr(l,u){if("AssignmentExpression"===u.expression.type||"UpdateExpression"===u.expression.type)return fe(l,u.expression);if("CallExpression"===u.expression.type){const c=fe(l,u.expression);return c===D.v?D.v:new D.I(c)}{const c=fe(l,u.expression);return c===D.v?D.v:new D.I(c)}}(l,u);case"AssignmentExpression":return function ar(l,u){let c=null,m="";if("MemberExpression"===u.left.type){if(c=fe(l,u.left.object),!0===u.left.computed)m=fe(l,u.left.property);else{if("Identifier"!==u.left.property.type)throw new f.aV(l,f.rH.InvalidIdentifier,u);m=u.left.property.name}const k=fe(l,u.right);if((0,D.m)(c)){if(!(0,D.b)(m))throw new f.aV(l,f.rH.ArrayAccessorMustBeNumber,u);if(m<0&&(m=c.length+m),m<0||m>c.length)throw new f.aV(l,f.rH.OutOfBounds,u);if(m===c.length){if("="!==u.operator)throw new f.aV(l,f.rH.OutOfBounds,u);c[m]=ut(k,u.operator,c[m],u,l)}else c[m]=ut(k,u.operator,c[m],u,l)}else if(c instanceof V.Z){if(!1===(0,D.c)(m))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0===c.hasField(m))c.setField(m,ut(k,u.operator,c.field(m),u,l));else{if("="!==u.operator)throw new f.aV(l,f.rH.FieldNotFound,u,{key:m});c.setField(m,ut(k,u.operator,null,u,l))}}else if((0,D.w)(c)){if(!1===(0,D.c)(m))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0===c.hasField(m))c.setField(m,ut(k,u.operator,c.field(m),u,l));else{if("="!==u.operator)throw new f.aV(l,f.rH.FieldNotFound,u,{key:m});c.setField(m,ut(k,u.operator,null,u,l))}}else{if((0,D.x)(c))throw new f.aV(l,f.rH.Immutable,u);if(!(c instanceof St))throw new f.aV(l,f.rH.InvalidIdentifier,u);if(!1===(0,D.c)(m))throw new f.aV(l,f.rH.ModuleAccessorMustBeString,u);if(!0!==c.hasGlobal(m))throw new f.aV(l,f.rH.ModuleExportNotFound,u);c.setGlobal(m,ut(k,u.operator,c.global(m),u,l))}return D.v}c=u.left.name.toLowerCase();const A=fe(l,u.right);if(null!=l.localScope&&void 0!==l.localScope[c])return l.localScope[c]={value:ut(A,u.operator,l.localScope[c].value,u,l),valueset:!0,node:u.right},D.v;if(void 0!==l.globalScope[c])return l.globalScope[c]={value:ut(A,u.operator,l.globalScope[c].value,u,l),valueset:!0,node:u.right},D.v;throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"UpdateExpression":return function ir(l,u){let c,m=null,A="";if("MemberExpression"===u.argument.type){if(m=fe(l,u.argument.object),!0===u.argument.computed?A=fe(l,u.argument.property):"Identifier"===u.argument.property.type&&(A=u.argument.property.name),(0,D.m)(m)){if(!(0,D.b)(A))throw new f.aV(l,f.rH.ArrayAccessorMustBeNumber,u);if(A<0&&(A=m.length+A),A<0||A>=m.length)throw new f.aV(l,f.rH.OutOfBounds,u);c=(0,D.g)(m[A]),m[A]="++"===u.operator?c+1:c-1}else if(m instanceof V.Z){if(!1===(0,D.c)(A))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0!==m.hasField(A))throw new f.aV(l,f.rH.FieldNotFound,u);c=(0,D.g)(m.field(A)),m.setField(A,"++"===u.operator?c+1:c-1)}else if((0,D.w)(m)){if(!1===(0,D.c)(A))throw new f.aV(l,f.rH.KeyAccessorMustBeString,u);if(!0!==m.hasField(A))throw new f.aV(l,f.rH.FieldNotFound,u);c=(0,D.g)(m.field(A)),m.setField(A,"++"===u.operator?c+1:c-1)}else{if((0,D.x)(m))throw new f.aV(l,f.rH.Immutable,u);if(!(m instanceof St))throw new f.aV(l,f.rH.InvalidParameter,u);if(!1===(0,D.c)(A))throw new f.aV(l,f.rH.ModuleAccessorMustBeString,u);if(!0!==m.hasGlobal(A))throw new f.aV(l,f.rH.ModuleExportNotFound,u);c=(0,D.g)(m.global(A)),m.setGlobal(A,"++"===u.operator?c+1:c-1)}return!1===u.prefix?c:"++"===u.operator?c+1:c-1}if(m="Identifier"===u.argument.type?u.argument.name.toLowerCase():"",!m)throw new f.aV(l,f.rH.InvalidIdentifier,u);if(null!=l.localScope&&void 0!==l.localScope[m])return c=(0,D.g)(l.localScope[m].value),l.localScope[m]={value:"++"===u.operator?c+1:c-1,valueset:!0,node:u},!1===u.prefix?c:"++"===u.operator?c+1:c-1;if(void 0!==l.globalScope[m])return c=(0,D.g)(l.globalScope[m].value),l.globalScope[m]={value:"++"===u.operator?c+1:c-1,valueset:!0,node:u},!1===u.prefix?c:"++"===u.operator?c+1:c-1;throw new f.aV(l,f.rH.InvalidIdentifier,u)}(l,u);case"BreakStatement":return D.o;case"ContinueStatement":return D.p;case"TemplateElement":return function Ar(l,u){return u.value?u.value.cooked:""}(0,u);case"TemplateLiteral":return function Cr(l,u){let c="",m=0;for(const A of u.quasis)c+=A.value?A.value.cooked:"",!1===A.tail&&(c+=u.expressions[m]?(0,D.j)(Er(fe(l,u.expressions[m]),l,u)):"",m++);return c}(l,u);case"ForStatement":return function tr(l,u){null!==u.init&&fe(l,u.init);const c={testResult:!0,lastAction:D.v};do{rr(l,u,c)}while(!0===c.testResult);return c.lastAction instanceof D.R?c.lastAction:D.v}(l,u);case"ForInStatement":return function er(l,u){const c=fe(l,u.right);"VariableDeclaration"===u.left.type&&fe(l,u.left);let m=null,A="";if("VariableDeclaration"===u.left.type){const k=u.left.declarations[0].id;"Identifier"===k.type&&(A=k.name)}else"Identifier"===u.left.type&&(A=u.left.name);if(!A)throw new f.aV(l,f.rH.InvalidIdentifier,u);if(A=A.toLowerCase(),null!=l.localScope&&void 0!==l.localScope[A]&&(m=l.localScope[A]),null===m&&void 0!==l.globalScope[A]&&(m=l.globalScope[A]),null===m)throw new f.aV(l,f.rH.InvalidIdentifier,u);if((0,D.m)(c)||(0,D.c)(c)){const k=c.length;for(let $=0;$<k;$++){m.value=$;const ae=fe(l,u.body);if(ae===D.o)break;if(ae instanceof D.R)return ae}return D.v}if((0,D.x)(c)){for(let k=0;k<c.length();k++){m.value=k;const $=fe(l,u.body);if($===D.o)break;if($ instanceof D.R)return $}return D.v}if(!(c instanceof V.Z||(0,D.w)(c)))return D.v;{const k=c.keys();for(let $=0;$<k.length;$++){m.value=k[$];const ae=fe(l,u.body);if(ae===D.o)break;if(ae instanceof D.R)return ae}}}(l,u);case"WhileStatement":return function nr(l,u){const c={testResult:!0,lastAction:D.v};if(c.testResult=fe(l,u.test),!1===c.testResult)return D.v;if(!0!==c.testResult)throw new f.aV(l,f.rH.BooleanConditionRequired,u);for(;!0===c.testResult&&(c.lastAction=fe(l,u.body),c.lastAction!==D.o)&&!(c.lastAction instanceof D.R);)if(c.testResult=fe(l,u.test),!0!==c.testResult&&!1!==c.testResult)throw new f.aV(l,f.rH.BooleanConditionRequired,u);return c.lastAction instanceof D.R?c.lastAction:D.v}(l,u);case"Identifier":return xn(l,u);case"MemberExpression":return function pr(l,u){try{const c=fe(l,u.object);if(null===c)throw new f.aV(l,f.rH.MemberOfNull,u);if(!1===u.computed){if("Identifier"===u.property.type){if(c instanceof V.Z||(0,D.w)(c))return c.field(u.property.name);if(c instanceof v.Z)return(0,U.Z)(c,u.property.name,u,l);if(c instanceof St){if(!c.hasGlobal(u.property.name))throw new f.aV(l,f.rH.InvalidIdentifier,u);return c.global(u.property.name)}}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}{let m=fe(l,u.property);if(c instanceof V.Z||(0,D.w)(c)){if((0,D.c)(m))return c.field(m);throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if(c instanceof St){if((0,D.c)(m))return c.global(m);throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if(c instanceof v.Z){if((0,D.c)(m))return(0,U.Z)(c,m,u,l);throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if((0,D.m)(c)){if((0,D.b)(m)&&isFinite(m)&&Math.floor(m)===m){if(m<0&&(m=c.length+m),m>=c.length||m<0)throw new f.aV(l,f.rH.OutOfBounds,u);return c[m]}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if((0,D.c)(c)){if((0,D.b)(m)&&isFinite(m)&&Math.floor(m)===m){if(m<0&&(m=c.length+m),m>=c.length||m<0)throw new f.aV(l,f.rH.OutOfBounds,u);return c[m]}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}if((0,D.x)(c)){if((0,D.b)(m)&&isFinite(m)&&Math.floor(m)===m){if(m<0&&(m=c.length()+m),m>=c.length()||m<0)throw new f.aV(l,f.rH.OutOfBounds,u);return c.get(m)}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}throw new f.aV(l,f.rH.InvalidMemberAccessKey,u)}}catch(c){throw c}}(l,u);case"Literal":return u.value;case"CallExpression":return function wr(l,u){try{if("MemberExpression"===u.callee.type){const c=fe(l,u.callee.object);if(!(c instanceof St))throw new f.aV(l,f.rH.FuncionNotFound,u);const m=!1===u.callee.computed?u.callee.property.name:fe(l,u.callee.property);if(!c.hasGlobal(m))throw new f.aV(l,f.rH.FuncionNotFound,u);const A=c.global(m);if(!(0,D.i)(A))throw new f.aV(l,f.rH.CallNonFunction,u);return A.call(l,u)}if("Identifier"!==u.callee.type)throw new f.aV(l,f.rH.FuncionNotFound,u);if(null!=l.localScope&&void 0!==l.localScope[u.callee.name.toLowerCase()]){const c=l.localScope[u.callee.name.toLowerCase()];if((0,D.i)(c.value))return c.value.call(l,u);throw new f.aV(l,f.rH.CallNonFunction,u)}if(void 0!==l.globalScope[u.callee.name.toLowerCase()]){const c=l.globalScope[u.callee.name.toLowerCase()];if((0,D.i)(c.value))return c.value.call(l,u);throw new f.aV(l,f.rH.CallNonFunction,u)}throw new f.aV(l,f.rH.FuncionNotFound,u)}catch(c){throw c}}(l,u);case"UnaryExpression":return function Dr(l,u){try{const c=fe(l,u.argument);if((0,D.a)(c)){if("!"===u.operator)return!c;if("-"===u.operator)return-1*(0,D.g)(c);if("+"===u.operator)return 1*(0,D.g)(c);if("~"===u.operator)return~(0,D.g)(c);throw new f.aV(l,f.rH.UnsupportedUnaryOperator,u)}if("~"===u.operator)return~(0,D.g)(c);if("-"===u.operator)return-1*(0,D.g)(c);if("+"===u.operator)return 1*(0,D.g)(c);throw new f.aV(l,f.rH.UnsupportedUnaryOperator,u)}catch(c){throw c}}(l,u);case"BinaryExpression":return function yr(l,u){try{const c=[fe(l,u.left),fe(l,u.right)],m=c[0],A=c[1];switch(u.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,D.u)((0,D.g)(m),(0,D.g)(A),u.operator);case"==":return(0,D.s)(m,A);case"!=":return!(0,D.s)(m,A);case"<":case">":case"<=":case">=":return(0,D.r)(m,A,u.operator);case"+":return(0,D.c)(m)||(0,D.c)(A)?(0,D.j)(m)+(0,D.j)(A):(0,D.g)(m)+(0,D.g)(A);case"-":return(0,D.g)(m)-(0,D.g)(A);case"*":return(0,D.g)(m)*(0,D.g)(A);case"/":return(0,D.g)(m)/(0,D.g)(A);case"%":return(0,D.g)(m)%(0,D.g)(A);default:throw new f.aV(l,f.rH.UnsupportedOperator,u)}}catch(c){throw c}}(l,u);case"LogicalExpression":return function xr(l,u){try{const c=fe(l,u.left);if((0,D.a)(c))switch(u.operator){case"||":if(!0===c)return c;{const m=fe(l,u.right);if((0,D.a)(m))return m;throw new f.aV(l,f.rH.LogicExpressionOrAnd,u)}case"&&":if(!1===c)return c;{const m=fe(l,u.right);if((0,D.a)(m))return m;throw new f.aV(l,f.rH.LogicExpressionOrAnd,u)}default:throw new f.aV(l,f.rH.LogicExpressionOrAnd,u)}throw new f.aV(l,f.rH.LogicalExpressionOnlyBoolean,u)}catch(c){throw c}}(l,u);case"ArrayExpression":return function gr(l,u){try{const c=[];for(let m=0;m<u.elements.length;m++){const A=fe(l,u.elements[m]);if((0,D.i)(A))throw new f.aV(l,f.rH.NoFunctionInArray,u);c.push(A===D.v?null:A)}return c}catch(c){throw c}}(l,u);case"ObjectExpression":return function Xn(l,u){const c={},m=new Map;for(let k=0;k<u.properties.length;k++){const $=fe(l,u.properties[k]);if((0,D.i)($.value))throw new f.aV(l,f.rH.NoFunctionInDictionary,u);if(!1===(0,D.c)($.key))throw new f.aV(l,f.rH.KeyMustBeString,u);let ae=$.key.toString();const oe=ae.toLowerCase();m.has(oe)?ae=m.get(oe):m.set(oe,ae),c[ae]=$.value===D.v?null:$.value}const A=new V.Z(c);return A.immutable=!1,A}(l,u);case"Property":return function qn(l,u){return{key:"Identifier"===u.key.type?u.key.name:fe(l,u.key),value:fe(l,u.value)}}(l,u);default:throw new f.aV(l,f.rH.Unrecognised,u)}}catch(c){throw(0,f.VO)(l,u,c)}}function rr(l,u,c){if(null!==u.test){if(c.testResult=fe(l,u.test),!1===c.testResult)return;if(!0!==c.testResult)throw new f.aV(l,f.rH.BooleanConditionRequired,u)}c.lastAction=fe(l,u.body),c.lastAction!==D.o?c.lastAction instanceof D.R?c.testResult=!1:null!==u.update&&fe(l,u.update):c.testResult=!1}function ut(l,u,c,m,A){switch(u){case"=":return l===D.v?null:l;case"/=":return(0,D.g)(c)/(0,D.g)(l);case"*=":return(0,D.g)(c)*(0,D.g)(l);case"-=":return(0,D.g)(c)-(0,D.g)(l);case"+=":return(0,D.c)(c)||(0,D.c)(l)?(0,D.j)(c)+(0,D.j)(l):(0,D.g)(c)+(0,D.g)(l);case"%=":return(0,D.g)(c)%(0,D.g)(l);default:throw new f.aV(A,f.rH.UnsupportedOperator,m)}}function Er(l,u,c){if((0,D.i)(l))throw new f.aV(u,f.rH.NoFunctionInTemplateLiteral,c);return l}function xn(l,u){let c;try{const m=u.name.toLowerCase();if(null!=l.localScope&&void 0!==l.localScope[m])return c=l.localScope[m],!0===c.valueset||(c.value=fe(l,c.node),c.valueset=!0),c.value;if(void 0!==l.globalScope[m])return c=l.globalScope[m],!0===c.valueset||(c.value=fe(l,c.node),c.valueset=!0),c.value;throw new f.aV(l,f.rH.InvalidIdentifier,u)}catch(m){throw m}}const je={};function An(l,u,c,m){try{const A=fe(l,u.arguments[c]);if((0,D.s)(A,m))return fe(l,u.arguments[c+1]);{const k=u.arguments.length-c;return 1===k?fe(l,u.arguments[c]):2===k?null:3===k?fe(l,u.arguments[c+2]):An(l,u,c+2,m)}}catch(A){throw A}}function En(l,u,c,m){try{if(!0===m)return fe(l,u.arguments[c+1]);if(u.arguments.length-c==3)return fe(l,u.arguments[c+2]);{const A=fe(l,u.arguments[c+2]);if(!1===(0,D.a)(A))throw new f.aV(l,f.rH.BooleanConditionRequired,u.arguments[c+2]);return En(l,u,c+2,A)}}catch(A){throw A}}function zt(l,u,c,m){try{const A=l.body;if(c.length!==l.params.length)throw new f.aV(u,f.rH.WrongNumberOfParameters,m);if(null!=u.localScope)for(let $=0;$<c.length;$++)u.localScope[l.params[$].name.toLowerCase()]={value:c[$],valueset:!0,node:null};const k=fe(u,A);if(k instanceof D.R)return k.value;if(k===D.o)throw new f.aV(u,f.rH.UnexpectedToken,m);if(k===D.p)throw new f.aV(u,f.rH.UnexpectedToken,m);return k instanceof D.I?k.value:k}catch(A){throw A}}(0,R.r)(je,at),(0,Z.r)(je,at),(0,K.r)(je,at),(0,U.r)(je,at),(0,M.r)(je,at),(0,N.registerFunctions)(je,at),je.iif=function(l,u){try{(0,D.y)(null===u.arguments?[]:u.arguments,3,3,l,u);const c=fe(l,u.arguments[0]);if(!1===(0,D.a)(c))throw new f.aV(l,f.rH.BooleanConditionRequired,u);return fe(l,!0===c?u.arguments[1]:u.arguments[2])}catch(c){throw c}},je.decode=function(l,u){try{if(u.arguments.length<2)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);if(2===u.arguments.length)return fe(l,u.arguments[1]);if((u.arguments.length-1)%2==0)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);return An(l,u,1,fe(l,u.arguments[0]))}catch(c){throw c}},je.when=function(l,u){try{if(u.arguments.length<3)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);if(u.arguments.length%2==0)throw new f.aV(l,f.rH.WrongNumberOfParameters,u);const c=fe(l,u.arguments[0]);if(!1===(0,D.a)(c))throw new f.aV(l,f.rH.BooleanConditionRequired,u.arguments[0]);return En(l,u,0,c)}catch(c){throw c}};for(const l in je)je[l]={value:new y.Bx(je[l]),valueset:!0,node:null};const kt=function(){};function Cn(l,u,c){const m=new kt;l||(l={}),u||(u={});const A=new V.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});A.immutable=!1,m.textformatting={value:A,valueset:!0,node:null};for(const k in u)m[k]={value:new y.Bx(u[k]),native:!0,valueset:!0,node:null};for(const k in l)m[k]=l[k]&&"esri.Graphic"===l[k].declaredClass?{value:w.Z.createFromGraphic(l[k],c),valueset:!0,node:null}:{value:l[k],valueset:!0,node:null};return m}function wn(l){console.log(l)}function Fn(l){const u={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:at,evaluateIdentifier:xn};for(let c=0;c<l.length;c++)l[c].registerFunctions(u);for(const c in u.functions)je[c]={value:new y.Bx(u.functions[c]),valueset:!0,node:null},kt.prototype[c]=je[c];for(let c=0;c<u.signatures.length;c++)(0,Q.gW)(u.signatures[c],"sync")}function Wt(l,u){let c=u.spatialReference;null==c&&(c=new L.Z({wkid:102100}));let m=null;l.usesModules&&(m=new _.s(new Map,l.loadedModules));const A={spatialReference:c,globalScope:Cn(u.vars,u.customfunctions,u.timeReference),localScope:null,exports:{},libraryResolver:m,console:u.console?u.console:wn,timeReference:u.timeReference??null,lrucache:u.lrucache,interceptor:u.interceptor,depthCounter:{depth:1}};let k=fe(A,l);if(k instanceof D.R&&(k=k.value),k instanceof D.I&&(k=k.value),k===D.v&&(k=null),k===D.o)throw new f.aV(A,f.rH.IllegalResult,null);if(k===D.p)throw new f.aV(A,f.rH.IllegalResult,null);if((0,D.i)(k))throw new f.aV(A,f.rH.IllegalResult,null);return k}kt.prototype=je,kt.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},kt.prototype.pi={value:Math.PI,valueset:!0,node:null},Fn([ee.A]);var vn=j(67087),Fr=j(53661);const vr=["feature","angle","bearing","centroid","envelopeintersects","extent","geometry","isselfintersecting","ringisclockwise"],Sr=!0;let _n=!1,Sn=!1,nt=null,Kt=[];function bn(l,u){if(!0===u.useAsync||!0===l.isAsync)return function br(l,u){if(null===nt)throw new f.aV(null,f.rH.AsyncNotEnabled,null);if((0,vn.Z)("esri-csp-restrictions")||!1===Sr)return function(c){return nt.executeScript(l,c)};try{return qe(l,u,!0)}catch(c){if("esri.arcade.arcadeuncompilableerror"===c.declaredRootClass)return function(m){return nt.executeScript(l,m)};throw c}}(l,u);if((0,vn.Z)("esri-csp-restrictions"))return function(c){return Wt(l,c)};try{return qe(l,u)}catch(c){if("esri.arcade.arcadeuncompilableerror"===c.declaredRootClass)return function(m){return Wt(l,m)};throw c}}function Jt(l,u=[]){return Ot(l,u)}function $t(l,u){if(!0===u.useAsync||!0===l.isAsync){if(null===nt)throw new f.aV(null,f.rH.AsyncNotEnabled,null);return nt.executeScript(l,u)}return Wt(l,u)}function Nt(l,u){return(0,Q.bV)(l,u)}function In(l){return(0,Q.Kq)(l)}function Ut(l,u=[]){return void 0===l.usesGeometry&&(0,Q.dN)(l,u),!0===l.usesGeometry}let Yt=null;function Qt(){return Yt||(Yt=Tn(),Yt)}function Tn(){return Xt.apply(this,arguments)}function Xt(){return Xt=(0,b.Z)(function*(){const[l,u]=yield Promise.all([Promise.all([j.e(7640),j.e(8592),j.e(2949)]).then(j.bind(j,72949)),Promise.resolve().then(j.bind(j,14178))]);return Sn=!0,u.setGeometryEngine(l),!0}),Xt.apply(this,arguments)}let qt=null;function en(){return null!==qt||(qt=Mn()),qt}function Mn(){return tn.apply(this,arguments)}function tn(){return tn=(0,b.Z)(function*(){yield function Dt(){return Je.apply(this,arguments)}(),nt=yield Promise.all([j.e(57),j.e(3840)]).then(j.bind(j,83840));for(const l of Kt)nt.extend(l),ze(l,"async");return Kt=null,!0}),tn.apply(this,arguments)}function Bn(){return _n}function Pn(){return!!nt}function kn(){return Sn}let nn=null;function rn(){return nn||(nn=Rn(),nn)}function Rn(){return an.apply(this,arguments)}function an(){return an=(0,b.Z)(function*(){yield en();const[l,u,c,m,A]=yield Promise.all([Promise.all([j.e(753),j.e(5769),j.e(5682)]).then(j.bind(j,85682)),Promise.all([j.e(753),j.e(5769),j.e(5682),j.e(6253)]).then(j.bind(j,66253)),Promise.all([j.e(753),j.e(5769),j.e(5873)]).then(j.bind(j,85873)),Promise.all([j.e(753),j.e(8359)]).then(j.bind(j,48359)),j.e(3095).then(j.bind(j,63095))]);return Hn=l,nt.extend([u,c,m,A]),ze([u,c,m,A],"async"),_n=!0,!0}),an.apply(this,arguments)}function On(l,u=[]){return void 0===l.usesFeatureSet&&(0,Q.dN)(l,u),!0===l.usesFeatureSet}function Ln(l,u){return sn.apply(this,arguments)}function sn(){return sn=(0,b.Z)(function*(l,u,c=[],m=!1,A=null){return on(new Set,l,u,c,m,A)}),sn.apply(this,arguments)}function on(l,u,c){return un.apply(this,arguments)}function un(){return un=(0,b.Z)(function*(l,u,c,m=[],A=!1,k=null){const $="string"==typeof u?Jt(u):u,ae=[];return $&&(!1===kn()&&(Ut($)||A)&&ae.push(Qt()),!1===Pn()&&(!0===$.isAsync||c)&&ae.push(en()),!1===Bn()&&(On($)||function kr(l,u){if(u){for(const c of u)if(Nt(l,c))return!0;return!1}return!1}($,m))&&ae.push(rn())),ae.length&&(yield Promise.all(ae)),yield Nn(l,$,k,c,A),!0}),un.apply(this,arguments)}function Nn(l,u){return ln.apply(this,arguments)}function ln(){return ln=(0,b.Z)(function*(l,u,c=null,m=!1,A=!1){const k=(0,Q.x5)(u);null===c&&k.length>0&&(c=Ge.getDefault()),u.loadedModules={};for(const $ of k){(0,Fr.O3)(c);const ae=c.normalizeModuleUri($.source);if(l.has(ae.uri))throw new f.aV(null,f.rH.CircularModules,null);l.add(ae.uri);const oe=yield c.fetchModule(ae);yield on(l,oe,m,[],A,c),l.delete(ae.uri),oe.isAsync&&(u.isAsync=!0),oe.usesFeatureSet&&(u.usesFeatureSet=!0),oe.usesGeometry&&(u.usesGeometry=!0),u.loadedModules[$.libname]={uri:ae.uri,script:oe}}}),ln.apply(this,arguments)}function Un(l){if(Ut(l))return!0;const u=(0,Q.Vf)(l);let c=!1;for(let m=0;m<u.length;m++)if(vr.includes(u[m])){c=!0;break}return c}let Hn=null;function Ht(){return Hn}const Or=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:on,compileScript:bn,enableAsyncSupport:en,enableAsyncSupportImpl:Mn,enableFeatureSetSupport:rn,enableFeatureSetSupportImpl:Rn,enableGeometrySupport:Qt,enableGeometrySupportImpl:Tn,executeScript:$t,extend:function Ir(l){Fn(l),ze(l,"sync"),null===nt?Kt.push(l):(ze(l,"async"),nt.extend(l))},extractExpectedFieldLiterals:In,extractFieldLiterals:function Br(l,u=!1){return void 0===u&&(u=!1),(0,Q.mb)(l)},featureSetUtils:Ht,isAsyncEnabled:Pn,isFeatureSetSupportEnabled:Bn,isGeometryEnabled:kn,loadDependentModules:Nn,loadScriptDependencies:Ln,parseAndExecuteScript:function Tr(l,u,c=[]){return $t(Ot(l,c),u)},parseScript:Jt,referencesFunction:function Mr(l,u){return(0,Q.w8)(l,u)},referencesMember:Nt,scriptIsAsync:function Pr(l,u=[]){return void 0===l.isAsync&&(0,Q.dN)(l,u),!0===l.isAsync},scriptTouchesGeometry:Un,scriptUsesFeatureSet:On,scriptUsesGeometryEngine:Ut,scriptUsesModules:function Rr(l,u=[]){return void 0===l.usesModules&&(0,Q.dN)(l,u),!0===l.usesModules}},Symbol.toStringTag,{value:"Module"}));var Lr=j(88684),Vn=j(72902),Nr=j(35787),Ur=j(55733),Hr=j(7913),Vr=j(23675),Zr=j(10465);const Zn=/^\$(feature|aggregatedFeatures)\./i,Gr={vars:{$feature:"any",$view:"any"},spatialReference:null};function jr(l){return l.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function zr(l){return null==l?null:(0,D.m)(l)||(0,D.x)(l)?"array":(0,D.k)(l)?"date":(0,D.c)(l)?"text":(0,D.a)(l)?"boolean":(0,D.b)(l)?"number":l instanceof V.Z?"dictionary":(0,D.w)(l)?"feature":l instanceof Nr.Z?"point":l instanceof Ur.Z?"polygon":l instanceof Hr.Z?"polyline":l instanceof Vr.Z?"multipoint":l instanceof Zr.Z?"extent":(0,D.T)(l)?"featureSet":(0,D.U)(l)?"featureSetCollection":null}function Rt(l){if(!l)return null;try{return Jt(l)}catch{}return null}function Wr(l,u){const c="string"==typeof l?Rt(l):l;if(!c)return null;try{return bn(c,u=u||(0,Lr.d9)(Gr))}catch{}return null}function Kr(l,u){return{vars:{$feature:null==l?new w.Z:w.Z.createFromGraphic(l,null),$view:u&&u.view},spatialReference:u&&u.sr}}function Jr(l,u,c){return w.Z.createFromGraphicLikeObject(u,l,c,null)}function $r(l,u){null!=l.vars&&(l.vars.$feature=u)}function Yr(l,u){let c;try{c=$t(l,u)}catch{c=null}return c}function Qr(l,u){let c;try{c=l?l(u):null}catch{c=null}return c}function Xr(l,u){try{return l?l(u):Promise.resolve(null)}catch{return Promise.resolve(null)}}function qr(l,u){if(!l)return[];const c="string"==typeof l?Rt(l):l;if(!c)return[];const m=In(c);let A=new Array;m.forEach($=>{Zn.test($)&&($=$.replace(Zn,""),A.push($))});const k=A.filter($=>$.includes("*"));return A=A.filter($=>!k.includes($)),u&&k.forEach($=>{const ae=new RegExp(`^${$.split(/\*+/).map(jr).join(".*")}$`,"i");u.forEach(oe=>ae.test(oe)?A.push(oe):null)}),[...new Set(A.sort())]}function ei(l){return Nt(l,"$view")}function ti(l,u){return!!l&&Nt(l,u)}function ni(l){if(l&&(null!=l.spatialReference||null!=l.scale&&null!=l.viewingMode))return{view:l.viewingMode&&null!=l.scale?new V.Z({viewingMode:l.viewingMode,scale:l.scale}):null,sr:l.spatialReference}}function ri({url:l,spatialReference:u,lrucache:c,interceptor:m}){const A=Ht();return A?A.createFeatureSetCollectionFromService(l,u,c,m):null}function ii({layer:l,spatialReference:u,outFields:c,returnGeometry:m,lrucache:A,interceptor:k}){if(null===l)return null;const $=Ht();return $?$.constructFeatureSet(l,u,c,m??!0,A,k):null}function ai(l){if(null===l?.map)return null;const u=Ht();return u?u.createFeatureSetCollectionFromMap(l.map,l.spatialReference,l.lrucache,l.interceptor):null}function si(l,u){return V.Z.convertJsonToArcade(l,u)}function oi(l,u,c=[]){return Ln(l,u,c)}function ui(){return Qt()}function li(){return rn()}function Gn(l,u){if(!l)return!1;if("string"==typeof l)return u(l);const c=l;if(function ci(l){return"simple"===l.type||"class-breaks"===l.type||"unique-value"===l.type||"dot-density"===l.type||"dictionary"===l.type||"pie-chart"===l.type}(c)){if("dot-density"===c.type){const k=c.attributes?.some($=>u($.valueExpression));if(k)return k}const m=c.visualVariables,A=!!m&&m.some(k=>{let $=u(k.valueExpression);return"size"===k.type&&((0,Vn.iY)(k.minSize)&&($=$||u(k.minSize.valueExpression)),(0,Vn.iY)(k.maxSize)&&($=$||u(k.maxSize.valueExpression))),$});return!(!("valueExpression"in c)||!u(c.valueExpression))||A}if(function di(l){return"esri.layers.support.LabelClass"===l.declaredClass}(c)){const m=c.labelExpressionInfo&&c.labelExpressionInfo.expression;return!(!m||!u(m))||!1}return!!function fi(l){return"esri.PopupTemplate"===l.declaredClass}(c)&&(!!c.expressionInfos&&c.expressionInfos.some(m=>u(m.expression))||Array.isArray(c.content)&&c.content.some(m=>"expression"===m.type&&u(m.expressionInfo?.expression)))}function hi(l){const u=Rt(l);return!!u&&Un(u)}function mi(l){return Gn(l,hi)}function pi(l){const u=Rt(l);return!!u&&Ut(u)}function Di(l){return Gn(l,pi)}}}]);
//# sourceMappingURL=5425.0e122933ad2a443d.js.map