"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[3936],{38306:(Et,ot,f)=>{f.d(ot,{e:()=>U});var E,K,U={};E={get exports(){return U},set exports(H){U=H}},void 0!==(K=function(){function H(e,a,l){l=l||2;var c,u,h,g,w,$,rt,yt=a&&a.length,ft=yt?a[0]*l:e.length,q=Y(e,0,ft,l,!0),G=[];if(!q||q.next===q.prev)return G;if(yt&&(q=function X(e,a,l,c){var u,h,g,w=[];for(u=0,h=a.length;u<h;u++)(g=Y(e,a[u]*c,u<h-1?a[u+1]*c:e.length,c,!1))===g.next&&(g.steiner=!0),w.push(ct(g));for(w.sort(j),u=0;u<w.length;u++)l=W(l=p(w[u],l),l.next);return l}(e,a,q,l)),e.length>80*l){c=h=e[0],u=g=e[1];for(var N=l;N<ft;N+=l)(w=e[N])<c&&(c=w),($=e[N+1])<u&&(u=$),w>h&&(h=w),$>g&&(g=$);rt=0!==(rt=Math.max(h-c,g-u))?1/rt:0}return m(q,G,l,c,u,rt),G}function Y(e,a,l,c,u){var h,g;if(u===ht(e,a,l,c)>0)for(h=a;h<l;h+=c)g=_t(h,e[h],e[h+1],g);else for(h=l-c;h>=a;h-=c)g=_t(h,e[h],e[h+1],g);if(g&&mt(g,g.next)){var w=g.next;Q(g),g=w}return g}function W(e,a){if(!e)return e;a||(a=e);var l,c=e;do{if(l=!1,c.steiner||!mt(c,c.next)&&0!==J(c.prev,c,c.next))c=c.next;else{var u=c.prev;if(Q(c),(c=a=u)===c.next)break;l=!0}}while(l||c!==a);return a}function m(e,a,l,c,u,h,g){if(e){!g&&h&&function z(e,a,l,c){var u=e;do{null===u.z&&(u.z=et(u.x,u.y,a,l,c)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next}while(u!==e);u.prevZ.nextZ=null,u.prevZ=null,function F(e){var a,l,c,u,h,g,w,$,rt=1;do{for(l=e,e=null,h=null,g=0;l;){for(g++,c=l,w=0,a=0;a<rt&&(w++,c=c.nextZ);a++);for($=rt;w>0||$>0&&c;)0!==w&&(0===$||!c||l.z<=c.z)?(u=l,l=l.nextZ,w--):(u=c,c=c.nextZ,$--),h?h.nextZ=u:e=u,u.prevZ=h,h=u;l=c}h.nextZ=null,rt*=2}while(g>1)}(u)}(e,c,u,h);for(var w,$,rt=e;e.prev!==e.next;)if(w=e.prev,$=e.next,h?v(e,c,u,h):T(e))a.push(w.i/l),a.push(e.i/l),a.push($.i/l),Q(e),e=$.next,rt=$.next;else if((e=$)===rt){g?1===g?m(e=S(W(e),a,l),a,l,c,u,h,2):2===g&&D(e,a,l,c,u,h):m(W(e),a,l,c,u,h,1);break}}}function T(e){var a=e.prev,l=e,c=e.next;if(J(a,l,c)>=0)return!1;for(var u=e.next.next;u!==e.prev;){if(ut(a.x,a.y,l.x,l.y,c.x,c.y,u.x,u.y)&&J(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function v(e,a,l,c){var u=e.prev,h=e,g=e.next;if(J(u,h,g)>=0)return!1;for(var rt=u.x>h.x?u.x>g.x?u.x:g.x:h.x>g.x?h.x:g.x,yt=u.y>h.y?u.y>g.y?u.y:g.y:h.y>g.y?h.y:g.y,ft=et(u.x<h.x?u.x<g.x?u.x:g.x:h.x<g.x?h.x:g.x,u.y<h.y?u.y<g.y?u.y:g.y:h.y<g.y?h.y:g.y,a,l,c),q=et(rt,yt,a,l,c),G=e.prevZ,N=e.nextZ;G&&G.z>=ft&&N&&N.z<=q;){if(G!==e.prev&&G!==e.next&&ut(u.x,u.y,h.x,h.y,g.x,g.y,G.x,G.y)&&J(G.prev,G,G.next)>=0||(G=G.prevZ,N!==e.prev&&N!==e.next&&ut(u.x,u.y,h.x,h.y,g.x,g.y,N.x,N.y)&&J(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;G&&G.z>=ft;){if(G!==e.prev&&G!==e.next&&ut(u.x,u.y,h.x,h.y,g.x,g.y,G.x,G.y)&&J(G.prev,G,G.next)>=0)return!1;G=G.prevZ}for(;N&&N.z<=q;){if(N!==e.prev&&N!==e.next&&ut(u.x,u.y,h.x,h.y,g.x,g.y,N.x,N.y)&&J(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function S(e,a,l){var c=e;do{var u=c.prev,h=c.next.next;!mt(u,h)&&Pt(u,c,c.next,h)&&At(u,h)&&At(h,u)&&(a.push(u.i/l),a.push(c.i/l),a.push(h.i/l),Q(c),Q(c.next),c=e=h),c=c.next}while(c!==e);return W(c)}function D(e,a,l,c,u,h){var g=e;do{for(var w=g.next.next;w!==g.prev;){if(g.i!==w.i&&Ot(g,w)){var $=dt(g,w);return g=W(g,g.next),$=W($,$.next),m(g,a,l,c,u,h),void m($,a,l,c,u,h)}w=w.next}g=g.next}while(g!==e)}function j(e,a){return e.x-a.x}function O(e){if(e.next.prev===e)return e;let a=e;for(;;){const l=a.next;if(l.prev===a||l===a||l===e)break;a=l}return a}function p(e,a){var l=function A(e,a){var l,c=a,u=e.x,h=e.y,g=-1/0;do{if(h<=c.y&&h>=c.next.y&&c.next.y!==c.y){var w=c.x+(h-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(w<=u&&w>g){if(g=w,w===u){if(h===c.y)return c;if(h===c.next.y)return c.next}l=c.x<c.next.x?c:c.next}}c=c.next}while(c!==a);if(!l)return null;if(u===g)return l;var $,rt=l,yt=l.x,ft=l.y,q=1/0;c=l;do{u>=c.x&&c.x>=yt&&u!==c.x&&ut(h<ft?u:g,h,yt,ft,h<ft?g:u,h,c.x,c.y)&&($=Math.abs(h-c.y)/(u-c.x),At(c,e)&&($<q||$===q&&(c.x>l.x||c.x===l.x&&P(l,c)))&&(l=c,q=$)),c=c.next}while(c!==rt);return l}(e,a);if(!l)return a;var c=dt(l,e),u=W(l,l.next);let h=O(c);return W(h,h.next),u=O(u),O(a===l?u:a)}function P(e,a){return J(e.prev,e,a.prev)<0&&J(a.next,e,e.next)<0}function et(e,a,l,c,u){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-l)*u)|e<<8))|e<<4))|e<<2))|e<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-c)*u)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function ct(e){var a=e,l=e;do{(a.x<l.x||a.x===l.x&&a.y<l.y)&&(l=a),a=a.next}while(a!==e);return l}function ut(e,a,l,c,u,h,g,w){return(u-g)*(a-w)-(e-g)*(h-w)>=0&&(e-g)*(c-w)-(l-g)*(a-w)>=0&&(l-g)*(h-w)-(u-g)*(c-w)>=0}function Ot(e,a){return e.next.i!==a.i&&e.prev.i!==a.i&&!function pt(e,a){var l=e;do{if(l.i!==e.i&&l.next.i!==e.i&&l.i!==a.i&&l.next.i!==a.i&&Pt(l,l.next,e,a))return!0;l=l.next}while(l!==e);return!1}(e,a)&&(At(e,a)&&At(a,e)&&function bt(e,a){var l=e,c=!1,u=(e.x+a.x)/2,h=(e.y+a.y)/2;do{l.y>h!=l.next.y>h&&l.next.y!==l.y&&u<(l.next.x-l.x)*(h-l.y)/(l.next.y-l.y)+l.x&&(c=!c),l=l.next}while(l!==e);return c}(e,a)&&(J(e.prev,e,a.prev)||J(e,a.prev,a))||mt(e,a)&&J(e.prev,e,e.next)>0&&J(a.prev,a,a.next)>0)}function J(e,a,l){return(a.y-e.y)*(l.x-a.x)-(a.x-e.x)*(l.y-a.y)}function mt(e,a){return e.x===a.x&&e.y===a.y}function Pt(e,a,l,c){var u=B(J(e,a,l)),h=B(J(e,a,c)),g=B(J(l,c,e)),w=B(J(l,c,a));return u!==h&&g!==w||!(0!==u||!xt(e,l,a))||!(0!==h||!xt(e,c,a))||!(0!==g||!xt(l,e,c))||!(0!==w||!xt(l,a,c))}function xt(e,a,l){return a.x<=Math.max(e.x,l.x)&&a.x>=Math.min(e.x,l.x)&&a.y<=Math.max(e.y,l.y)&&a.y>=Math.min(e.y,l.y)}function B(e){return e>0?1:e<0?-1:0}function At(e,a){return J(e.prev,e,e.next)<0?J(e,a,e.next)>=0&&J(e,e.prev,a)>=0:J(e,a,e.prev)<0||J(e,e.next,a)<0}function dt(e,a){var l=new Mt(e.i,e.x,e.y),c=new Mt(a.i,a.x,a.y),u=e.next,h=a.prev;return e.next=a,a.prev=e,l.next=u,u.prev=l,c.next=l,l.prev=c,h.next=c,c.prev=h,c}function _t(e,a,l,c){var u=new Mt(e,a,l);return c?(u.next=c.next,u.prev=c,c.next.prev=u,c.next=u):(u.prev=u,u.next=u),u}function Q(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Mt(e,a,l){this.i=e,this.x=a,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ht(e,a,l,c){for(var u=0,h=a,g=l-c;h<l;h+=c)u+=(e[g]-e[h])*(e[h+1]+e[g+1]),g=h;return u}return H.deviation=function(e,a,l,c){var u=a&&a.length,g=Math.abs(ht(e,0,u?a[0]*l:e.length,l));if(u)for(var w=0,$=a.length;w<$;w++)g-=Math.abs(ht(e,a[w]*l,w<$-1?a[w+1]*l:e.length,l));var ft=0;for(w=0;w<c.length;w+=3){var q=c[w]*l,G=c[w+1]*l,N=c[w+2]*l;ft+=Math.abs((e[q]-e[N])*(e[G+1]-e[q+1])-(e[q]-e[G])*(e[N+1]-e[q+1]))}return 0===g&&0===ft?0:Math.abs((ft-g)/g)},H.flatten=function(e){for(var a=e[0][0].length,l={vertices:[],holes:[],dimensions:a},c=0,u=0;u<e.length;u++){for(var h=0;h<e[u].length;h++)for(var g=0;g<a;g++)l.vertices.push(e[u][h][g]);u>0&&l.holes.push(c+=e[u-1].length)}return l},H}())&&(E.exports=K)},34856:(Et,ot,f)=>{f.d(ot,{Z:()=>O});var S,E=f(18100),_=f(44480),K=f(88684),U=f(28191),Z=f(9497),H=f(36734),Y=f(20891),W=f(83382),m=f(5650),T=f(41222),v=f(89485);const D="esri.geometry.support.MeshComponent",X=U.Z.getLogger(D);let j=S=class extends _.wq{static from(p){return(0,W.TJ)(S,p)}constructor(p){super(p),this.faces=null,this.material=null,this.shading="source",this.trustSourceNormals=!1}castFaces(p){return(0,v.X)(p,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},X)}castMaterial(p){return(0,W.TJ)(p&&"object"==typeof p&&("metallic"in p||"roughness"in p||"metallicRoughnessTexture"in p)?T.Z:m.Z,p)}clone(){return new S({faces:(0,K.d9)(this.faces),shading:this.shading,material:(0,K.d9)(this.material),trustSourceNormals:this.trustSourceNormals})}cloneWithDeduplication(p,A){const P={faces:(0,K.d9)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(p,A):null,trustSourceNormals:this.trustSourceNormals};return new S(P)}};(0,E._)([(0,Z.Cb)({json:{write:!0}})],j.prototype,"faces",void 0),(0,E._)([(0,H.p)("faces")],j.prototype,"castFaces",null),(0,E._)([(0,Z.Cb)({type:m.Z,json:{write:!0}})],j.prototype,"material",void 0),(0,E._)([(0,H.p)("material")],j.prototype,"castMaterial",null),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],j.prototype,"shading",void 0),(0,E._)([(0,Z.Cb)({type:Boolean})],j.prototype,"trustSourceNormals",void 0),j=S=(0,E._)([(0,Y.j)(D)],j);const O=j},5650:(Et,ot,f)=>{f.d(ot,{Z:()=>S});var T,E=f(18100),_=f(25764),K=f(44480),U=f(53661),Z=f(9497),W=(f(83382),f(19420),f(20891)),m=f(31778);let v=T=class extends K.wq{constructor(D){super(D),this.color=null,this.colorTexture=null,this.normalTexture=null,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(D,X){const j=(0,U.pC)(D)?D.get(this):null;if(j)return j;const O=new T(this.clonePropertiesWithDeduplication(X));return(0,U.pC)(D)&&D.set(this,O),O}clonePropertiesWithDeduplication(D){return{color:(0,U.pC)(this.color)?this.color.clone():null,colorTexture:(0,U.pC)(this.colorTexture)?this.colorTexture.cloneWithDeduplication(D):null,normalTexture:(0,U.pC)(this.normalTexture)?this.normalTexture.cloneWithDeduplication(D):null,alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:(0,U.pC)(this.colorTextureTransform)?this.colorTextureTransform:null,normalTextureTransform:(0,U.pC)(this.normalTextureTransform)?this.normalTextureTransform:null}}};(0,E._)([(0,Z.Cb)({type:_.Z,json:{write:!0}})],v.prototype,"color",void 0),(0,E._)([(0,Z.Cb)({type:m.Z,json:{write:!0}})],v.prototype,"colorTexture",void 0),(0,E._)([(0,Z.Cb)({type:m.Z,json:{write:!0}})],v.prototype,"normalTexture",void 0),(0,E._)([(0,Z.Cb)({nonNullable:!0,json:{write:!0}})],v.prototype,"alphaMode",void 0),(0,E._)([(0,Z.Cb)({nonNullable:!0,json:{write:!0}})],v.prototype,"alphaCutoff",void 0),(0,E._)([(0,Z.Cb)({nonNullable:!0,json:{write:!0}})],v.prototype,"doubleSided",void 0),(0,E._)([(0,Z.Cb)()],v.prototype,"colorTextureTransform",void 0),(0,E._)([(0,Z.Cb)()],v.prototype,"normalTextureTransform",void 0),v=T=(0,E._)([(0,W.j)("esri.geometry.support.MeshMaterial")],v);const S=v},41222:(Et,ot,f)=>{f.d(ot,{Z:()=>S});var T,E=f(18100),_=f(25764),K=f(53661),U=f(9497),Y=(f(83382),f(19420),f(20891)),W=f(5650),m=f(31778);let v=T=class extends W.Z{constructor(D){super(D),this.emissiveColor=null,this.emissiveTexture=null,this.occlusionTexture=null,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(D,X){const j=(0,K.pC)(D)?D.get(this):null;if(j)return j;const O=new T(this.clonePropertiesWithDeduplication(X));return(0,K.pC)(D)&&D.set(this,O),O}clonePropertiesWithDeduplication(D){return{...super.clonePropertiesWithDeduplication(D),emissiveColor:(0,K.pC)(this.emissiveColor)?this.emissiveColor.clone():null,emissiveTexture:(0,K.pC)(this.emissiveTexture)?this.emissiveTexture.cloneWithDeduplication(D):null,occlusionTexture:(0,K.pC)(this.occlusionTexture)?this.occlusionTexture.cloneWithDeduplication(D):null,metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:(0,K.pC)(this.metallicRoughnessTexture)?this.metallicRoughnessTexture.cloneWithDeduplication(D):null,occlusionTextureTransform:(0,K.pC)(this.occlusionTextureTransform)?this.occlusionTextureTransform:null,emissiveTextureTransform:(0,K.pC)(this.emissiveTextureTransform)?this.emissiveTextureTransform:null,metallicRoughnessTextureTransform:(0,K.pC)(this.metallicRoughnessTextureTransform)?this.metallicRoughnessTextureTransform:null}}};(0,E._)([(0,U.Cb)({type:_.Z,json:{write:!0}})],v.prototype,"emissiveColor",void 0),(0,E._)([(0,U.Cb)({type:m.Z,json:{write:!0}})],v.prototype,"emissiveTexture",void 0),(0,E._)([(0,U.Cb)({type:m.Z,json:{write:!0}})],v.prototype,"occlusionTexture",void 0),(0,E._)([(0,U.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],v.prototype,"metallic",void 0),(0,E._)([(0,U.Cb)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],v.prototype,"roughness",void 0),(0,E._)([(0,U.Cb)({type:m.Z,json:{write:!0}})],v.prototype,"metallicRoughnessTexture",void 0),(0,E._)([(0,U.Cb)()],v.prototype,"occlusionTextureTransform",void 0),(0,E._)([(0,U.Cb)()],v.prototype,"emissiveTextureTransform",void 0),(0,E._)([(0,U.Cb)()],v.prototype,"metallicRoughnessTextureTransform",void 0),v=T=(0,E._)([(0,Y.j)("esri.geometry.support.MeshMaterialMetallicRoughness")],v);const S=v},31778:(Et,ot,f)=>{f.d(ot,{Z:()=>O});var S,E=f(18100),K=(f(67087),f(70527)),U=f(44480),Z=f(9497),H=f(83382),W=(f(19420),f(66508)),m=f(20891),T=f(70425),v=f(29184);const D=new WeakMap;let X=0,j=S=class extends U.wq{constructor(p){super(p),this.wrap="repeat"}get url(){return this._get("url")||null}set url(p){this._set("url",p),p&&this._set("data",null)}get data(){return this._get("data")||null}set data(p){this._set("data",p),p&&this._set("url",null)}writeData(p,A,P,z){if(p instanceof HTMLImageElement){const F={type:"image-element",src:(0,v.t)(p.src,z),crossOrigin:p.crossOrigin};A[P]=F}else if(p instanceof HTMLCanvasElement){const F=p.getContext("2d").getImageData(0,0,p.width,p.height),et={type:"canvas-element",imageData:this._encodeImageData(F)};A[P]=et}else if(p instanceof HTMLVideoElement){const F={type:"video-element",src:(0,v.t)(p.src,z),autoplay:p.autoplay,loop:p.loop,muted:p.muted,crossOrigin:p.crossOrigin,preload:p.preload};A[P]=F}else if(p instanceof ImageData){const F={type:"image-data",imageData:this._encodeImageData(p)};A[P]=F}}readData(p){switch(p.type){case"image-element":{const A=new Image;return A.src=p.src,A.crossOrigin=p.crossOrigin,A}case"canvas-element":{const A=this._decodeImageData(p.imageData),P=document.createElement("canvas");return P.width=A.width,P.height=A.height,P.getContext("2d").putImageData(A,0,0),P}case"image-data":return this._decodeImageData(p.imageData);case"video-element":{const A=document.createElement("video");return A.src=p.src,A.crossOrigin=p.crossOrigin,A.autoplay=p.autoplay,A.loop=p.loop,A.muted=p.muted,A.preload=p.preload,A}default:return}}get transparent(){const p=this.data,A=this.url;if(p instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(p.getContext("2d").getImageData(0,0,p.width,p.height));if(p instanceof ImageData)return this._imageDataContainsTransparent(p);if(A){const P=A.substr(A.length-4,4).toLowerCase(),z=A.substr(0,15).toLocaleLowerCase();if(".png"===P||"data:image/png;"===z)return!0}return!1}set transparent(p){this._overrideIfSome("transparent",p)}get contentHash(){const p="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",A=(P="")=>`d:${P},t:${this.transparent},w:${p}`;return null!=this.url?A(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?A(this.data.src):(D.has(this.data)||D.set(this.data,++X),A(D.get(this.data))):A()}clone(){const p={url:this.url,data:this.data,wrap:this._cloneWrap()};return new S(p)}cloneWithDeduplication(p){const A=p.get(this);if(A)return A;const P=this.clone();return p.set(this,P),P}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(p){let A="";for(let P=0;P<p.data.length;P++)A+=String.fromCharCode(p.data[P]);return{data:btoa(A),width:p.width,height:p.height}}_decodeImageData(p){const A=atob(p.data),P=new Uint8ClampedArray(A.length);for(let z=0;z<A.length;z++)P[z]=A.charCodeAt(z);return(0,K.J)(P,p.width,p.height)}_imageDataContainsTransparent(p){for(let A=3;A<p.data.length;A+=4)if(255!==p.data[A])return!0;return!1}static from(p){return"string"==typeof p?new S({url:p}):p instanceof HTMLImageElement||p instanceof HTMLCanvasElement||p instanceof ImageData||p instanceof HTMLVideoElement?new S({data:p}):(0,H.TJ)(S,p)}};(0,E._)([(0,Z.Cb)({type:String,json:{write:v.w}})],j.prototype,"url",null),(0,E._)([(0,Z.Cb)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,Z.Cb)()],j.prototype,"data",null),(0,E._)([(0,T.c)("data")],j.prototype,"writeData",null),(0,E._)([(0,W.r)("data")],j.prototype,"readData",null),(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],j.prototype,"transparent",null),(0,E._)([(0,Z.Cb)({json:{write:!0}})],j.prototype,"wrap",void 0),(0,E._)([(0,Z.Cb)({readOnly:!0})],j.prototype,"contentHash",null),j=S=(0,E._)([(0,m.j)("esri.geometry.support.MeshTexture")],j);const O=j},89485:(Et,ot,f)=>{f.d(ot,{Q:()=>v,X:()=>D});var W,E=f(18100),_=f(44480),K=f(88684),U=f(28191),Z=f(9497),H=f(36734),Y=f(20891);const m="esri.geometry.support.MeshVertexAttributes",T=U.Z.getLogger(m);let v=W=class extends _.wq{constructor(O){super(O),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(O){return D(O,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},T)}castPosition(O){return O&&O instanceof Float32Array&&T.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),D(O,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},T)}castUv(O){return D(O,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},T)}castNormal(O){return D(O,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},T)}castTangent(O){return D(O,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},T)}clone(){const O={position:(0,K.d9)(this.position),uv:(0,K.d9)(this.uv),normal:(0,K.d9)(this.normal),tangent:(0,K.d9)(this.tangent),color:(0,K.d9)(this.color)};return new W(O)}clonePositional(){const O={position:(0,K.d9)(this.position),normal:(0,K.d9)(this.normal),tangent:(0,K.d9)(this.tangent),uv:this.uv,color:this.color};return new W(O)}};function S(O,p,A,P){const{loggerTag:z,stride:F}=p;return O.length%F!=0?(P.error(z,`Invalid array length, expected a multiple of ${F}`),new A([])):O}function D(O,p,A,P,z){if(!O)return O;if(O instanceof p)return S(O,P,p,z);for(const F of A)if(O instanceof F)return S(new p(O),P,p,z);if(Array.isArray(O))return S(new p(O),P,p,z);{const F=A.map(et=>`'${et.name}'`);return z.error(`Failed to set property, expected one of ${F}, but got ${O.constructor.name}`),new p([])}}function X(O,p,A){p[A]=function j(O){const p=new Array(O.length);for(let A=0;A<O.length;A++)p[A]=O[A];return p}(O)}(0,E._)([(0,Z.Cb)({json:{write:X}})],v.prototype,"color",void 0),(0,E._)([(0,H.p)("color")],v.prototype,"castColor",null),(0,E._)([(0,Z.Cb)({nonNullable:!0,json:{write:X}})],v.prototype,"position",void 0),(0,E._)([(0,H.p)("position")],v.prototype,"castPosition",null),(0,E._)([(0,Z.Cb)({json:{write:X}})],v.prototype,"uv",void 0),(0,E._)([(0,H.p)("uv")],v.prototype,"castUv",null),(0,E._)([(0,Z.Cb)({json:{write:X}})],v.prototype,"normal",void 0),(0,E._)([(0,H.p)("normal")],v.prototype,"castNormal",null),(0,E._)([(0,Z.Cb)({json:{write:X}})],v.prototype,"tangent",void 0),(0,E._)([(0,H.p)("tangent")],v.prototype,"castTangent",null),v=W=(0,E._)([(0,Y.j)(m)],v)},3584:(Et,ot,f)=>{f.d(ot,{d:()=>K});var E=f(93142),_=f(8330);function K(W,m,T){const v=Array.isArray(W),S=v?W.length/m:W.byteLength/(4*m),D=v?W:new Uint32Array(W,0,S*m),X=T?.minReduction??0,j=T?.originalIndices||null,O=j?j.length:0,p=T?.componentOffsets||null;let A=0;if(p)for(let B=0;B<p.length-1;B++){const pt=p[B+1]-p[B];pt>A&&(A=pt)}else A=S;const P=Math.floor(1.1*A)+1;(null==Y||Y.length<2*P)&&(Y=new Uint32Array((0,E.Sf)(2*P)));for(let B=0;B<2*P;B++)Y[B]=0;let z=0;const F=!!p&&!!j,et=F?O:S;let ct=(0,_.$z)(S/3);const ut=new Uint32Array(O);let J=0!==X?Math.ceil(7.84*1.96/(X*X)*X*(1-X)):et,mt=1,Pt=p?p[1]:et;for(let B=0;B<et;B++){if(B===J){const Q=1-z/B;if(Q+1.96*Math.sqrt(Q*(1-Q)/B)<X)return null;J*=2}if(B===Pt){for(let Q=0;Q<2*P;Q++)Y[Q]=0;if(j)for(let Q=p[mt-1];Q<p[mt];Q++)ut[Q]=ct[j[Q]];Pt=p[++mt]}const pt=F?j[B]:B,At=pt*m,bt=H(D,At,m);let dt=bt%P,_t=z;for(;0!==Y[2*dt+1];){if(Y[2*dt]===bt){const Q=Y[2*dt+1]-1;if(U(D,At,Q*m,m)){_t=ct[Q];break}}dt++,dt>=P&&(dt-=P)}_t===z&&(Y[2*dt]=bt,Y[2*dt+1]=pt+1,z++),ct[pt]=_t}if(0!==X&&1-z/S<X)return null;if(F){for(let B=p[mt-1];B<ut.length;B++)ut[B]=ct[j[B]];ct=(0,_.mi)(ut)}const xt=v?new Array(z):new Uint32Array(z*m);z=0;for(let B=0;B<et;B++)ct[B]===z&&(Z(D,(F?j[B]:B)*m,xt,z*m,m),z++);if(j&&!F){const B=new Uint32Array(O);for(let pt=0;pt<B.length;pt++)B[pt]=ct[j[pt]];ct=(0,_.mi)(B)}return{buffer:Array.isArray(xt)?xt:xt.buffer,indices:ct,uniqueCount:z}}function U(W,m,T,v){for(let S=0;S<v;S++)if(W[m+S]!==W[T+S])return!1;return!0}function Z(W,m,T,v,S){for(let D=0;D<S;D++)T[v+D]=W[m+D]}function H(W,m,T){let v=0;for(let S=0;S<T;S++)v=W[m+S]+v|0,v=v+(v<<11)+(v>>>2)|0;return v>>>0}let Y=null},23936:(Et,ot,f)=>{f.r(ot),f.d(ot,{meshFeatureSetFromJSON:()=>ze});var Mt,t,E=f(26763),_=f(53661),K=f(10465),U=f(71670),Z=f(18100),H=f(32995),Y=f(31882),W=f(48500),m=f(28191),T=f(99508),v=f(30801),S=f(7521),D=f(9497),O=(f(83382),f(19420),f(20891)),p=f(77765),A=f(70535),P=f(35787),z=f(55733),F=f(29200),et=f(34856),ct=f(84374),ut=f(89485),Ot=f(38306),J=f(12818),mt=f(3584),Pt=f(13878);function xt(t,n=!1){return t<=Pt.DB?n?new Array(t).fill(0):new Array(t):new Float64Array(t)}function pt(t,n,o){return Array.isArray(t)?t.slice(n,n+o):t.subarray(n,n+o)}function _t(t,n,o,s,i,d,x){i*=3;for(let y=0;y<d;++y){const C=t[n];s[i++]=C[0],s[i++]=C[1],s[i++]=x?C[2]:0,n+=o}return i/3}function Q(t){return!(0,J.bu)(t,!1,!1)}(t=Mt||(Mt={}))[t.NONE=0]="NONE",t[t.CCW_IS_HOLE=1]="CCW_IS_HOLE";var ht=f(21789),e=f(82590),a=f(571);const l=m.Z.getLogger("esri.geometry.support.meshUtils.centerAt");const $=(0,p.c)(),rt=(0,p.c)();var yt=f(55050);function q(){return q=(0,U.Z)(function*(t,n,o){const{loadGLTFMesh:s}=yield(0,v.Hl)(Promise.all([f.e(5472),f.e(5641)]).then(f.bind(f,75641)),o),i=yield N(n,o),d=s(new P.Z({x:0,y:0,z:0,spatialReference:t.spatialReference}),i.url,{resolveFile:G(i),useTransform:!0,signal:(0,_.pC)(o)?o.signal:null});d.then(()=>i.dispose(),()=>i.dispose());const{vertexAttributes:x,components:y}=yield d;t.vertexAttributes=x,t.components=y}),q.apply(this,arguments)}function G(t){const n=(0,yt.Yd)(t.url);return o=>{const s=(0,yt.PF)(o,n,n),i=s?s.replace(/^ *\.\//,""):null;return(i?t.files.get(i):null)??o}}function N(t,n){return Ht.apply(this,arguments)}function Ht(){return Ht=(0,U.Z)(function*(t,n){return t instanceof Blob?Lt.fromBlob(t):"string"==typeof t?new Lt(t):Array.isArray(t)?function ge(t,n){return Gt.apply(this,arguments)}(t,n):function de(t,n){return Vt.apply(this,arguments)}(t,n)}),Ht.apply(this,arguments)}function Gt(){return Gt=(0,U.Z)(function*(t,n){const o=new Map;let s=null;const i=yield(0,v.WW)(t.map(function(){var x=(0,U.Z)(function*(y){return{name:y.name,source:yield N(y instanceof Blob?y:y.source,n)}});return function(y){return x.apply(this,arguments)}}())),d=[];for(const x of i)x&&((0,v.Hc)(n)?x.source.dispose():d.push(x));(0,v.k_)(n);for(const{name:x,source:y}of d)((0,_.Wi)(s)||/\.(gltf|glb)/i.test(x))&&(s=y.url),o.set(x,y.url),y.files&&y.files.forEach((C,M)=>o.set(M,C));if((0,_.Wi)(s))throw new H.Z("mesh-load-external:missing-files","Missing files to load external mesh source");return new Lt(s,()=>d.forEach(({source:x})=>x.dispose()),o)}),Gt.apply(this,arguments)}function Vt(){return Vt=(0,U.Z)(function*(t,n){const{default:o}=yield(0,v.Hl)(Promise.resolve().then(f.bind(f,1897)),n),s="string"==typeof t.multipart[0]?yield Promise.all(t.multipart.map(function(){var i=(0,U.Z)(function*(d){return(yield o(d,{responseType:"array-buffer"})).data});return function(d){return i.apply(this,arguments)}}())):t.multipart;return Lt.fromBlob(new Blob(s))}),Vt.apply(this,arguments)}class Lt{constructor(n,o=(()=>{}),s=new Map){this.url=n,this.dispose=o,this.files=s}static fromBlob(n){const o=URL.createObjectURL(n);return new Lt(o,()=>URL.revokeObjectURL(o))}}var Qt=f(38974),Jt=f(53251),kt=f(23160),it=f(92950),Yt=f(99491),st=f(26834);function qt(t,n){if(t)for(let o=0;o<t.length;o+=3)for(let s=0;s<3;s++)t[o+s]+=n[s]}const _e=(0,p.c)(),te=(0,kt.c)(),ee=(0,Jt.c)(),Kt={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};function zt(t,n,o){t.isPlane||function we(t){for(let n=0;n<t.position.length;n+=3)t.position[n+2]+=.5}(t),function Oe(t,n){if(null==n)return;const o="number"==typeof n?[n,n,n]:[null!=n.width?n.width:1,null!=n.depth?n.depth:1,null!=n.height?n.height:1];Tt[0]=o[0],Tt[4]=o[1],Tt[8]=o[2];for(let s=0;s<t.position.length;s+=3){for(let i=0;i<3;i++)tt[i]=t.position[s+i];(0,it.t)(tt,tt,Tt);for(let i=0;i<3;i++)t.position[s+i]=tt[i]}if(o[0]!==o[1]||o[1]!==o[2]){Tt[0]=1/o[0],Tt[4]=1/o[1],Tt[8]=1/o[2];for(let s=0;s<t.normal.length;s+=3){for(let i=0;i<3;i++)tt[i]=t.normal[s+i];(0,it.t)(tt,tt,Tt),(0,it.n)(tt,tt);for(let i=0;i<3;i++)t.normal[s+i]=tt[i]}}}(t,o?.size);const{vertexAttributes:s,transform:i}=(0,a.w1)(t,n,o);return{vertexAttributes:new ut.Q({...s,uv:t.uv}),transform:i,components:[new et.Z({faces:t.faces,material:o&&o.material||null})],spatialReference:n.spatialReference}}const Pe={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},be={south:0,east:1,north:2,west:3,up:4,down:5},tt=(0,p.c)(),Tt=(0,Jt.c)();var Re=f(64544);const re=m.Z.getLogger("esri.geometry.support.meshUtils.rotate");function jt(t,n,o,s=p.Z){if(!(0,_.Wi)(t)){(0,Re.d)(Nt,(0,F.WH)(n),(0,F.ZZ)(n));for(let i=0;i<t.length;i+=o){for(let d=0;d<3;d++)St[d]=t[i+d]-s[d];(0,it.m)(St,St,Nt);for(let d=0;d<3;d++)t[i+d]=St[d]+s[d]}}}const St=(0,p.c)(),ne=(0,p.c)(),oe=(0,F.Ue)(),Nt=(0,kt.c)(),se=(0,Jt.c)(),ie=(0,p.c)(),ae=m.Z.getLogger("esri.geometry.support.meshUtils.scale");function le(t,n,o=p.Z){if(t)for(let s=0;s<t.length;s+=3){for(let i=0;i<3;i++)Wt[i]=t[s+i]-o[i];(0,it.g)(Wt,Wt,n);for(let i=0;i<3;i++)t[s+i]=Wt[i]+o[i]}}const Wt=(0,p.c)(),ce=(0,p.c)(),ue=(0,p.c)();var Ct;const Rt="esri.geometry.Mesh";let gt=Ct=class extends((0,Y.p)(W.Z.LoadableMixin((0,T.v)(A.Z)))){constructor(t){super(t),this.components=null,this.transform=null,this.external=null,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new ut.Q,this.type="mesh"}initialize(){((0,_.Wi)(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when(()=>{this.handles.add((0,S.YP)(()=>({vertexAttributes:this.vertexAttributes,components:this.components?.map(t=>t.clone())}),()=>this._set("external",null),{once:!0,sync:!0}))})}get hasExtent(){return!this.loaded&&(0,_.pC)(this.external)&&(0,_.pC)(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}get _boundingInfo(){const t=this.vertexAttributes.position,n=this.spatialReference;if(0===t.length||this.components&&0===this.components.length)return{extent:new K.Z({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:n}),center:new P.Z({x:0,y:0,z:0,spatialReference:n})};const o=(0,_.pC)(this.transform)?this.transform.project(t,n):t;let s=1/0,i=1/0,d=1/0,x=-1/0,y=-1/0,C=-1/0,M=0,b=0,I=0;const R=o.length,L=1/(R/3);let V=0;for(;V<R;){const vt=o[V++],nt=o[V++],at=o[V++];s=Math.min(s,vt),i=Math.min(i,nt),d=Math.min(d,at),x=Math.max(x,vt),y=Math.max(y,nt),C=Math.max(C,at),M+=L*vt,b+=L*nt,I+=L*at}return{extent:new K.Z({xmin:s,ymin:i,zmin:d,xmax:x,ymax:y,zmax:C,spatialReference:n}),center:new P.Z({x:M,y:b,z:I,spatialReference:n})}}get anchor(){if((0,_.pC)(this.transform))return this.transform.getOriginPoint(this.spatialReference);const t=this._boundingInfo;return new P.Z({x:t.center.x,y:t.center.y,z:t.extent.zmin,spatialReference:this.spatialReference})}get origin(){return(0,_.pC)(this.transform)?this.transform.getOriginPoint(this.spatialReference):this._boundingInfo.center}get extent(){return!this.loaded&&(0,_.pC)(this.external)&&(0,_.pC)(this.external.extent)?this.external.extent.clone():this._boundingInfo.extent}addComponent(t){this.loaded?(this.components||(this.components=[]),this.components.push(et.Z.from(t)),this.notifyChange("components")):m.Z.getLogger(this.declaredClass).error("addComponent()","Mesh must be loaded before applying operations")}removeComponent(t){if(this.loaded){if(this.components){const n=this.components.indexOf(t);if(-1!==n)return this.components.splice(n,1),void this.notifyChange("components")}m.Z.getLogger(this.declaredClass).error("removeComponent()","Provided component is not part of the list of components")}else m.Z.getLogger(this.declaredClass).error("removeComponent()","Mesh must be loaded before applying operations")}rotate(t,n,o,s){return(0,F.uT)(Xt.x,t,Ft),(0,F.uT)(Xt.y,n,pe),(0,F.uT)(Xt.z,o,fe),(0,F.qC)(Ft,pe,Ft),(0,F.qC)(Ft,fe,Ft),function Le(t,n,o){if(!t.vertexAttributes||!t.vertexAttributes.position||0===n[3])return;const s=t.spatialReference;if((0,_.pC)(t.transform)){null!=o?.geographic&&o.geographic!==t.transform.geographic&&re.warn(`Specifying the 'geographic' parameter (${o.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const i=o?.origin??t.transform.getOriginPoint(s);!function Ue(t,n,o){const s=(0,it.s)(St,o.x,o.y,o.z),i=(0,it.b)(St,s,t.origin);t.applyLocalInverse(i,ne),t.rotation=(0,F.qC)(t.rotation,n,(0,F.Ue)()),t.applyLocalInverse(i,i),(0,it.b)(i,i,ne),t.translation=(0,it.a)((0,p.c)(),t.translation,i)}(t.transform,n,i)}else{const i=o?.origin??t.origin;(0,e.h)(t.spatialReference,o)?function Ze(t,n,o){const s=t.spatialReference,i=(0,Yt.rS)(s),d=ie;(0,ht.KC)(o,d,i)||(0,ht.KC)(t.origin,d,i);const x=t.vertexAttributes.position,y=t.vertexAttributes.normal,C=t.vertexAttributes.tangent,M=new Float64Array(x.length),b=(0,_.pC)(y)?new Float32Array(y.length):null,I=(0,_.pC)(C)?new Float32Array(C.length):null;(0,ht.Bm)(i,d,Nt,i),(0,Qt.f)(se,Nt);const R=oe;(0,it.t)((0,F.ZZ)(oe),(0,F.ZZ)(n),se),R[3]=n[3],(0,st.XO)(x,s,M),(0,_.pC)(y)&&(0,_.pC)(b)&&(0,st.Iz)(y,x,M,s,b),(0,_.pC)(C)&&(0,_.pC)(I)&&(0,st.wi)(C,x,M,s,I),jt(M,R,3,d),(0,st.To)(M,x,s),(0,_.pC)(y)&&(0,_.pC)(b)&&(jt(b,R,3),(0,st.Yk)(b,x,M,s,y)),(0,_.pC)(C)&&(0,_.pC)(I)&&(jt(I,R,4),(0,st.M2)(I,x,M,s,C)),t.vertexAttributesChanged()}(t,n,i):function Ie(t,n,o){const s=ie;if(!(0,ht.KC)(o,s,t.spatialReference)){const i=t.origin;s[0]=i.x,s[1]=i.y,s[2]=i.z,re.error(`Failed to project specified origin (wkid:${o.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}jt(t.vertexAttributes.position,n,3,s),jt(t.vertexAttributes.normal,n,3),jt(t.vertexAttributes.tangent,n,4),t.vertexAttributesChanged()}(t,n,i)}}(this,Ft,s),this}offset(t,n,o,s){return this.loaded?($t[0]=t,$t[1]=n,$t[2]=o,function me(t,n,o){t.vertexAttributes&&t.vertexAttributes.position&&((0,_.pC)(t.transform)?(null!=o?.geographic&&o.geographic!==t.transform.geographic&&m.Z.getLogger("esri.geometry.support.meshUtils.offset").warn(`Specifying the 'geographic' parameter (${o.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function xe(t,n){const o=t.origin;t.origin=(0,it.a)((0,p.c)(),o,n)}(t.transform,n)):(0,e.h)(t.spatialReference,o)?function ye(t,n){const o=t.spatialReference,s=t.vertexAttributes.position,i=t.vertexAttributes.normal,d=t.vertexAttributes.tangent,x=new Float64Array(s.length),y=(0,_.pC)(i)?new Float32Array(i.length):null,C=(0,_.pC)(d)?new Float32Array(d.length):null,M=t.extent.center,b=_e;(0,ht.Bm)(o,[M.x,M.y,M.z],te,(0,Yt.rS)(o)),(0,Qt.f)(ee,te),(0,it.t)(b,n,ee),(0,st.XO)(s,o,x),(0,_.pC)(i)&&(0,_.pC)(y)&&(0,st.Iz)(i,s,x,o,y),(0,_.pC)(d)&&(0,_.pC)(C)&&(0,st.wi)(d,s,x,o,C),qt(x,b),(0,st.To)(x,s,o),(0,_.pC)(i)&&(0,_.pC)(y)&&(0,st.Yk)(y,s,x,o,i),(0,_.pC)(d)&&(0,_.pC)(C)&&(0,st.M2)(C,s,x,o,d),t.vertexAttributesChanged()}(t,n):function ve(t,n){qt(t.vertexAttributes.position,n),t.vertexAttributesChanged()}(t,n))}(this,$t,s),this):(m.Z.getLogger(this.declaredClass).error("offset()","Mesh must be loaded before applying operations"),this)}scale(t,n){return this.loaded?(function je(t,n,o){if(!t.vertexAttributes||!t.vertexAttributes.position)return;const s=t.spatialReference;if((0,_.pC)(t.transform)){null!=o?.geographic&&o.geographic!==t.transform.geographic&&ae.warn(`Specifying the 'geographic' parameter (${o.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`);const i=o?.origin??t.transform.getOriginPoint(s);!function Se(t,n,o){const s=(0,it.s)(Wt,o.x,o.y,o.z),i=(0,it.b)(Wt,s,t.origin);t.applyLocalInverse(i,ce);const d=(0,it.g)((0,p.c)(),t.scale,n);t.scale=d,t.applyLocalInverse(i,i),(0,it.b)(i,i,ce),t.translation=(0,it.a)((0,p.c)(),t.translation,i)}(t.transform,n,i)}else{const i=(0,e.h)(t.spatialReference,o),d=o&&o.origin||t.origin;i?function We(t,n,o){const s=t.spatialReference,i=(0,Yt.rS)(s),d=ue;(0,ht.KC)(o,d,i)||(0,ht.KC)(t.origin,d,i);const x=t.vertexAttributes.position,y=t.vertexAttributes.normal,C=t.vertexAttributes.tangent,M=new Float64Array(x.length),b=(0,_.pC)(y)?new Float32Array(y.length):null,I=(0,_.pC)(C)?new Float32Array(C.length):null;(0,st.XO)(x,s,M),(0,_.pC)(y)&&(0,_.pC)(b)&&(0,st.Iz)(y,x,M,s,b),(0,_.pC)(C)&&(0,_.pC)(I)&&(0,st.wi)(C,x,M,s,I),le(M,n,d),(0,st.To)(M,x,s),(0,_.pC)(y)&&(0,_.pC)(b)&&(0,st.Yk)(b,x,M,s,y),(0,_.pC)(C)&&(0,_.pC)(I)&&(0,st.M2)(I,x,M,s,C),t.vertexAttributesChanged()}(t,n,d):function Fe(t,n,o){const s=ue;if(!(0,ht.KC)(o,s,t.spatialReference)){const i=t.origin;s[0]=i.x,s[1]=i.y,s[2]=i.z,ae.error(`Failed to project specified origin (wkid:${o.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}le(t.vertexAttributes.position,n,s),t.vertexAttributesChanged()}(t,n,d)}}(this,t,n),this):(m.Z.getLogger(this.declaredClass).error("scale()","Mesh must be loaded before applying operations"),this)}centerAt(t,n){return this.loaded?(function c(t,n,o){if(!t.vertexAttributes||!t.vertexAttributes.position)return;const s=o?.origin??t.origin;(0,_.pC)(t.transform)?(null!=o?.geographic&&o.geographic!==t.transform.geographic&&l.warn(`Specifying the 'geographic' parameter (${o.geographic}) different from the Mesh transform setting (${t.transform.geographic}) is not supported`),function u(t,n,o){const x=t.origin;t.origin=[x[0]+(n.x-o.x),x[1]+(n.y-o.y),x[2]+(n.hasZ&&o.hasZ?n.z-o.z:0)]}(t.transform,n,s)):(0,e.h)(t.spatialReference,o)?function h(t,n,o){const s=(0,a.FF)(t.vertexAttributes,o,{geographic:!0}),{position:i,normal:d,tangent:x}=(0,a.iv)(s,n,{geographic:!0});t.vertexAttributes.position=i,t.vertexAttributes.normal=d,t.vertexAttributes.tangent=x,t.vertexAttributesChanged()}(t,n,s):function g(t,n,o){const s=rt,i=$;if((0,ht.KC)(n,i,t.spatialReference)){if(!(0,ht.KC)(o,s,t.spatialReference)){const d=t.origin;s[0]=d.x,s[1]=d.y,s[2]=d.z,l.error(`Failed to project specified origin (wkid:${o.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}).`)}(function w(t,n,o){if(t)for(let s=0;s<t.length;s+=3)for(let i=0;i<3;i++)t[s+i]+=n[i]-o[i]})(t.vertexAttributes.position,i,s),t.vertexAttributesChanged()}else l.error(`Failed to project centerAt location (wkid:${n.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid})`)}(t,n,s)}(this,t,n),this):(m.Z.getLogger(this.declaredClass).error("centerAt()","Mesh must be loaded before applying operations"),this)}load(t){return(0,_.pC)(this.external)&&this.addResolvingPromise(function ft(t,n,o){return q.apply(this,arguments)}(this,this.external.source,t)),Promise.resolve(this)}updateExternalSource(t){this._set("external",t)}clone(){let t=null;if(this.components){const o=new Map,s=new Map;t=this.components.map(i=>i.cloneWithDeduplication(o,s))}const n={components:t,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:(0,_.pC)(this.transform)?this.transform.clone():null,external:(0,_.pC)(this.external)?{source:this.external.source,extent:(0,_.pC)(this.external.extent)?this.external.extent.clone():null}:null};return new Ct(n)}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}toBinaryGLTF(t){var n=this;return(0,U.Z)(function*(){const o=f.e(1133).then(f.bind(f,21133)),s=n.load(),i=yield Promise.all([o,s]),{toBinaryGLTF:d}=i[0];return d(n,t)})()}static createBox(t,n){if(!(t instanceof P.Z))return m.Z.getLogger(Rt).error(".createBox()","expected location to be a Point instance"),null;const o=new Ct(zt(function Ce(){const{faceDescriptions:t,faceVertexOffsets:n,uvScales:o}=Pe,s=4*t.length,i=new Float64Array(3*s),d=new Float32Array(3*s),x=new Float32Array(2*s),y=new Uint32Array(2*t.length*3);let C=0,M=0,b=0,I=0;for(let R=0;R<t.length;R++){const L=t[R],V=C/3;for(const nt of n)y[I++]=V+nt;const vt=L.corners;for(let nt=0;nt<4;nt++){const at=vt[nt];let k=0;x[b++]=.25*o[nt][0]+L.uvOrigin[0],x[b++]=L.uvOrigin[1]-.25*o[nt][1];for(let lt=0;lt<3;lt++)0!==L.axis[lt]?(i[C++]=.5*L.axis[lt],d[M++]=L.axis[lt]):(i[C++]=.5*at[k++],d[M++]=0)}}return{position:i,normal:d,uv:x,faces:y}}(),t,n));return n&&n.imageFace&&"all"!==n.imageFace?function Ae(t,n){const o=t.components[0],s=o.faces,i=be[n],d=6*i,x=new Array(6),y=new Array(s.length-6);let C=0,M=0;for(let b=0;b<s.length;b++)b>=d&&b<d+6?x[C++]=s[b]:y[M++]=s[b];if((0,_.pC)(t.vertexAttributes.uv)){const b=new Float32Array(t.vertexAttributes.uv),I=4*i*2,R=[0,1,1,1,1,0,0,0];for(let L=0;L<R.length;L++)b[I+L]=R[L];t.vertexAttributes.uv=b}return t.components=[new et.Z({faces:x,material:o.material}),new et.Z({faces:y})],t}(o,n.imageFace):o}static createSphere(t,n){return t instanceof P.Z?new Ct(zt(function Ee(t=0){const n=Math.round(8*2**t),o=2*n,s=(n-1)*(o+1)+2*o,i=new Float64Array(3*s),d=new Float32Array(3*s),x=new Float32Array(2*s),y=new Uint32Array((n-1)*o*2*3);let C=0,M=0,b=0,I=0;for(let R=0;R<=n;R++){const L=R/n*Math.PI+.5*Math.PI,V=Math.cos(L),vt=Math.sin(L);tt[2]=vt;const nt=0===R||R===n,at=nt?o-1:o;for(let k=0;k<=at;k++){const lt=k/at*2*Math.PI;tt[0]=-Math.sin(lt)*V,tt[1]=Math.cos(lt)*V;for(let wt=0;wt<3;wt++)i[C]=.5*tt[wt],d[C]=tt[wt],++C;x[M++]=(k+(nt?.5:0))/o,x[M++]=R/n,0!==R&&k!==o&&(R!==n&&(y[b++]=I,y[b++]=I+1,y[b++]=I-o),1!==R&&(y[b++]=I,y[b++]=I-o,y[b++]=I-o-1)),I++}}return{position:i,normal:d,uv:x,faces:y}}(n&&n.densificationFactor||0),t,n)):(m.Z.getLogger(Rt).error(".createSphere()","expected location to be a Point instance"),null)}static createCylinder(t,n){return t instanceof P.Z?new Ct(zt(function Me(t=0){const o=Math.round(16*2**t),s=4*(o+1)+2*o,i=new Float64Array(3*s),d=new Float32Array(3*s),x=new Float32Array(2*s),y=new Uint32Array(4*o*3);let C=0,M=0,b=0,I=0,R=0;for(let L=0;L<=5;L++){const V=0===L||5===L,vt=L<=1||L>=4,nt=2===L||4===L,at=V?o-1:o;for(let k=0;k<=at;k++){const lt=k/at*2*Math.PI,wt=V?0:.5;tt[0]=wt*Math.sin(lt),tt[1]=wt*-Math.cos(lt),tt[2]=L<=2?.5:-.5;for(let Bt=0;Bt<3;Bt++)i[C++]=tt[Bt],d[M++]=vt?2===Bt?L<=1?1:-1:0:2===Bt?0:tt[Bt]/wt;x[b++]=(k+(V?.5:0))/o,x[b++]=L<=1?1*L/3:L<=3?1*(L-2)/3+1/3:1*(L-4)/3+2/3,nt||0===L||k===o||(5!==L&&(y[I++]=R,y[I++]=R+1,y[I++]=R-o),1!==L&&(y[I++]=R,y[I++]=R-o,y[I++]=R-o-1)),R++}}return{position:i,normal:d,uv:x,faces:y}}(n&&n.densificationFactor||0),t,n)):(m.Z.getLogger(Rt).error(".createCylinder()","expected location to be a Point instance"),null)}static createPlane(t,n){if(!(t instanceof P.Z))return m.Z.getLogger(Rt).error(".createPlane()","expected location to be a Point instance"),null;const o=n?.facing??"up",s=function Te(t,n){const o="number"==typeof n?n:null!=n?n.width:1,s="number"==typeof n?n:null!=n?n.height:1;switch(t){case"up":case"down":return{width:o,depth:s};case"north":case"south":return{width:o,height:s};case"east":case"west":return{depth:o,height:s}}}(o,n?.size);return new Ct(zt(function De(t){const n=Kt.facingAxisOrderSwap[t],o=Kt.position,s=Kt.normal,i=new Float64Array(o.length),d=new Float32Array(s.length);let x=0;for(let y=0;y<4;y++){const C=x;for(let M=0;M<3;M++){const b=n[M],I=Math.abs(b)-1,R=b>=0?1:-1;i[x]=o[C+I]*R,d[x]=s[C+I]*R,x++}}return{position:i,normal:d,uv:new Float32Array(Kt.uv),faces:new Uint32Array(Kt.faces),isPlane:!0}}(o),t,{...n,size:s}))}static createFromPolygon(t,n){if(!(t instanceof z.Z))return m.Z.getLogger(Rt).error(".createFromPolygon()","expected polygon to be a Polygon instance"),null;const o=function At(t){const n=function dt(t,n,o){const s=t.length,i=new Array(s),d=new Array(s),x=new Array(s);let y=0,C=0,M=0,b=0;for(let L=0;L<s;++L)b+=t[L].length;const I=xt(3*b);let R=0;for(let L=s-1;L>=0;L--){const V=t[L],vt=o===Mt.CCW_IS_HOLE&&Q(V);if(vt&&1!==s)i[y++]=V;else{let nt=V.length;for(let k=0;k<y;++k)nt+=i[k].length;const at={index:R,pathLengths:new Array(y+1),count:nt,holeIndices:new Array(y)};at.pathLengths[0]=V.length,V.length>0&&(x[M++]={index:R,count:V.length}),R=vt?_t(V,V.length-1,-1,I,R,V.length,n):_t(V,0,1,I,R,V.length,n);for(let k=0;k<y;++k){const lt=i[k];at.holeIndices[k]=R,at.pathLengths[k+1]=lt.length,lt.length>0&&(x[M++]={index:R,count:lt.length}),R=_t(lt,0,1,I,R,lt.length,n)}y=0,at.count>0&&(d[C++]=at)}}for(let L=0;L<y;++L){const V=i[L];V.length>0&&(x[M++]={index:R,count:V.length}),R=_t(V,0,1,I,R,V.length,n)}return d.length=C,x.length=M,{position:I,polygons:d,outlines:x}}(t.rings,t.hasZ,Mt.CCW_IS_HOLE),o=new Array;let s=0,i=0;for(const y of n.polygons){const M=y.index,b=pt(n.position,3*M,3*y.count),I=y.holeIndices.map(L=>L-M),R=new Uint32Array((0,Ot.e)(b,I,3));o.push({position:b,faces:R}),s+=b.length,i+=R.length}const d=function bt(t,n,o){if(1===t.length)return t[0];const s=xt(n),i=new Uint32Array(o);let d=0,x=0,y=0;for(const C of t){for(let M=0;M<C.position.length;M++)s[d++]=C.position[M];for(let M=0;M<C.faces.length;M++)i[x++]=C.faces[M]+y;y=d/3}return{position:s,faces:i}}(o,s,i),x=Array.isArray(d.position)?(0,mt.d)(d.position,3,{originalIndices:d.faces}):(0,mt.d)(d.position.buffer,6,{originalIndices:d.faces});return d.position=new Float64Array(x.buffer),d.faces=x.indices,d}(t);return new Ct({vertexAttributes:new ut.Q({position:o.position}),components:[new et.Z({faces:o.faces,shading:"flat",material:n?.material??null})],spatialReference:t.spatialReference})}static createFromGLTF(t,n,o){return(0,U.Z)(function*(){if(!(t instanceof P.Z))throw m.Z.getLogger(Rt).error(".createfromGLTF()","expected location to be a Point instance"),new H.Z("invalid-input","Expected location to be a Point instance");const{loadGLTFMesh:s}=yield(0,v.Hl)(Promise.all([f.e(5472),f.e(5641)]).then(f.bind(f,75641)),o);return new Ct(yield s(t,n,o))})()}static createWithExternalSource(t,n,o){const s=o?.extent??null,i=o?.transform?.clone()??new ct.Z;return i.origin=[t.x,t.y,t.z??0],new Ct({external:{source:n,extent:s},transform:i,spatialReference:t.spatialReference})}static createIncomplete(t,n){const o=n?.transform?.clone()??new ct.Z;o.origin=[t.x,t.y,t.z??0];const i=new Ct({transform:o,spatialReference:t.spatialReference});return i.addResolvingPromise(Promise.reject(new H.Z("mesh-incomplete","Mesh resources are not complete"))),i}};(0,Z._)([(0,D.Cb)({type:[et.Z],json:{write:!0}})],gt.prototype,"components",void 0),(0,Z._)([(0,D.Cb)({type:ct.Z,json:{write:!0}})],gt.prototype,"transform",void 0),(0,Z._)([(0,D.Cb)({constructOnly:!0})],gt.prototype,"external",void 0),(0,Z._)([(0,D.Cb)({readOnly:!0})],gt.prototype,"hasExtent",null),(0,Z._)([(0,D.Cb)({readOnly:!0})],gt.prototype,"_boundingInfo",null),(0,Z._)([(0,D.Cb)({readOnly:!0})],gt.prototype,"anchor",null),(0,Z._)([(0,D.Cb)({readOnly:!0})],gt.prototype,"origin",null),(0,Z._)([(0,D.Cb)({readOnly:!0,json:{read:!1}})],gt.prototype,"extent",null),(0,Z._)([(0,D.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!0}})],gt.prototype,"hasZ",void 0),(0,Z._)([(0,D.Cb)({readOnly:!0,json:{read:!1,write:!0,default:!1}})],gt.prototype,"hasM",void 0),(0,Z._)([(0,D.Cb)({type:ut.Q,nonNullable:!0,json:{write:!0}})],gt.prototype,"vertexAttributes",void 0),gt=Ct=(0,Z._)([(0,O.j)(Rt)],gt);const Xt={x:(0,p.f)(1,0,0),y:(0,p.f)(0,1,0),z:(0,p.f)(0,0,1)},Ft=(0,F.Ue)(),pe=(0,F.Ue)(),fe=(0,F.Ue)(),$t=(0,p.c)(),he=gt;var Dt,Be=f(68230),Ke=f(87096);function ze(t,n,o){const s=o.features;o.features=[],delete o.geometryType;const i=Ke.Z.fromJSON(o);if(i.geometryType="mesh",!o.assetMaps)return i;const d=function Ve(t,n){const o=new Map;for(const s of n){const i=s.parentGlobalId;if(null==i)continue;const d=s.assetName,x=s.assetURL,y=s.conversionStatus;let C=o.get(i);if(null==C)switch(C={name:d,status:Dt.FAILED,url:x,projectVertices:Je(s.flags).projectVertices},o.set(i,C),y){case"COMPLETED":case"SUBMITTED":C.status=Dt.COMPLETED;break;case"INPROGRESS":C.status=Dt.PENDING;break;default:C.status=Dt.FAILED}else console.warn(`Multiple asset parts not expected. Ignoring additional parts. conflicting assetname: ${s.assetName}`)}return o}(0,o.assetMaps),x=i.spatialReference??Be.Z.WGS84,y=o.globalIdFieldName,{outFields:C}=t,M=(0,_.pC)(C)&&C.length>0?function Ne(t){return({attributes:n})=>{if(!n)return{};if(!t)return n;for(const o in n)t.has(o)||delete n[o];return n}}(C.includes("*")?null:new Set(C)):()=>({});for(const b of s){const I=$e(b,y,x,n,d);(0,_.pC)(I)&&i.features.push(new E.Z({geometry:I,attributes:M(b)}))}return i}function $e(t,n,o,s,i){const x=i.get(t.attributes[n]);if(null==x||x.status===Dt.FAILED||null==x.url)return null;const y=function He({attributes:t},n,{transformFieldRoles:o}){return new P.Z({x:t[o.originX],y:t[o.originY],z:t[o.originZ],spatialReference:n})}(t,o,s),C=K.Z.fromJSON(t.geometry);C.spatialReference=o;const M=function Ge(t,{transformFieldRoles:n},o){return new ct.Z({translation:[t[n.translationX],-t[n.translationZ],t[n.translationY]],rotation:(0,F.uT)([t[n.rotationX],t[n.rotationZ],t[n.rotationY]],t[n.rotationDeg]),scale:[t[n.scaleX],t[n.scaleY],t[n.scaleZ]],geographic:o})}(t.attributes,s,x.projectVertices);return x.status===Dt.PENDING?he.createIncomplete(y,{extent:C,transform:M}):he.createWithExternalSource(y,[{name:x.name,source:x.url}],{extent:C,transform:M})}function Je(t){return{projectVertices:t.includes("PROJECT_VERTICES")}}!function(t){t[t.FAILED=0]="FAILED",t[t.PENDING=1]="PENDING",t[t.COMPLETED=2]="COMPLETED"}(Dt||(Dt={}))},8330:(Et,ot,f)=>{f.d(ot,{$z:()=>K,DX:()=>W,mi:()=>_,p:()=>Y});var E=f(13878);function _(m){if(Array.isArray(m)){if(m.length<E.DB)return m;for(const T of m)if(T>=65536)return new Uint32Array(m);return new Uint16Array(m)}if(m.length<E.DB)return Array.from(m);if(m.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return m;for(const T of m)if(T>=65536)return m;return new Uint16Array(m)}function K(m){const T=3*m;return T<=E.DB?new Array(T):T<=65536?new Uint16Array(T):new Uint32Array(T)}let U=(()=>{const m=new Uint32Array(131072);for(let T=0;T<m.length;++T)m[T]=T;return m})();const Z=[0],H=(()=>{const m=new Uint16Array(65536);for(let T=0;T<m.length;++T)m[T]=T;return m})();function Y(m){if(1===m)return Z;if(m<E.DB)return Array.from(new Uint16Array(H.buffer,0,m));if(m<H.length)return new Uint16Array(H.buffer,0,m);if(m>U.length){const T=Math.max(2*U.length,m);U=new Uint32Array(T);for(let v=0;v<U.length;v++)U[v]=v}return new Uint32Array(U.buffer,0,m)}function W(m){if(1===m)return Z;if(m<E.DB)return Array.from(new Uint16Array(H.buffer,0,m));if(m<H.length)return new Uint16Array(H.slice(0,m));if(m>U.length){const T=new Uint32Array(m);for(let v=0;v<T.length;v++)T[v]=v;return T}return new Uint32Array(U.slice(0,m))}}}]);
//# sourceMappingURL=3936.8bb88cedb9de85a8.js.map