import"./chunk-E7EIAKJH.js";import{a as Ye}from"./chunk-NMYX7VYQ.js";import{e as je,h as Qe}from"./chunk-U6W4A46A.js";import{a as $,c as j,d as $e}from"./chunk-DHOEGK7F.js";import{a as L}from"./chunk-YWBKS54K.js";import{a as Le}from"./chunk-VO334JJQ.js";import"./chunk-GATLXRHE.js";import"./chunk-IJTEU5B7.js";import"./chunk-PSWJZLWW.js";import"./chunk-AG3JC4QU.js";import"./chunk-ZYXQSE2U.js";import"./chunk-OZXMLYPZ.js";import{$c as Pe,Ac as ve,Ad as ze,Bc as _e,Bd as Be,Cb as F,Cc as be,Cd as Ue,Dc as Fe,Eb as pe,Fb as I,Hb as de,Kb as S,Lb as A,Xc as Se,Yb as R,Yc as ye,Zb as q,Zc as Me,_c as xe,cd as Oe,dd as Ge,ed as we,f as ie,h as _,jd as Ee,kd as ke,ld as Ne,md as Te,nb as N,nd as De,oc as ce,od as Ie,pb as f,pc as fe,pd as Ae,qc as ue,qd as Re,rb as T,rd as qe,sb as b,sd as Ve,tc as ge,u as ae,ub as D,uc as he,v as le,vc as Ce,vd as B,w as se,wb as d,wd as U,yc as V,zb as me,zc as z}from"./chunk-WNYBMKHL.js";import{Db as G,Eb as w,Fb as Q,Gb as Y,Hb as J,Ib as p,Jb as e,Kb as t,Lb as m,Pb as Z,Qb as H,Sb as E,Va as oe,Vb as g,Wb as v,Xa as s,d as ee,da as te,hc as n,ia as c,jc as M,kb as C,na as x,oa as P,oc as re,ra as O,sc as K,tc as k,uc as ne,vc as W}from"./chunk-LKW6WE5H.js";import"./chunk-OY7QI42D.js";var h=(()=>{let r=class r{constructor(){this.formGroup=new D({personalFormGroup:new D({firstName:new d(null,{validators:[f.required]}),lastName:new d(null,{validators:[f.required]}),gender:new d(null),email:new d(null,{validators:[f.required]}),phone:new d(null,{validators:[f.required]}),dateOfBirth:new d(null),comment:new d(null),rank:new d(5),size:new d(null),citizen:new d(!1),entryDate:new d(null),friends:new de([])}),addressFormGroup:new D({name:new d(null,{validators:[f.required]}),street:new d(null,{validators:[f.required]}),city:new d(null,{validators:[f.required]}),state:new d(null,{validators:[f.required]}),zip:new d(null,{validators:[f.required]})})})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=te({token:r,factory:r.\u0275fac});let l=r;return l})();var Je=(l,r)=>[l,r];function et(l,r){if(l&1){let u=E();e(0,"img",14),g("error",function(i){x(u);let o=v();return P(o.onImageError(i))}),t()}if(l&2){let u=v();p("src",u.imageUrl,oe)}}function tt(l,r){l&1&&m(0,"forge-icon",8)}function ot(l,r){l&1&&m(0,"forge-icon",8)}var Ke=(()=>{let r=class r{constructor(){this.destroyRef=c(O),this.router=c(se),this.route=c(ae),this.appDataService=c(L),this.dialogService=c(ge),this.toastService=c(ze),this.cache=c(h),this.noImageUrl="mock-data/no-image.png",this.activeTab=0}get personalFormGroup(){return this.cache.formGroup.controls.personalFormGroup}get addressFormGroup(){return this.cache.formGroup.controls.addressFormGroup}ngOnInit(){this.cache.profile&&this.loadForm(this.cache.profile),this.route.snapshot.children.map(a=>a.url.map(i=>i.path)).flat().includes("address")&&(this.activeTab=1)}canDeactivate(){return this.cache.formGroup.dirty?new ee(a=>{this.dialogService.open(je,{options:{persistent:!0},data:{title:"Unsaved changes",message:"You have unsaved changes which will be lost, do you want to continue?"}}).afterClosed.subscribe({next:i=>{i&&this.cache.formGroup.reset(),a.next(i)}})}):!0}onLoadProfile(){this.appDataService.getProfile().pipe(A(this.destroyRef)).subscribe({next:a=>{this.cache.formGroup.reset(),this.cache.profile=a,this.loadForm(this.cache.profile)},error:()=>{this.toastService.show({message:"Error loading profile",theme:"error"})}})}onTabSelected(a){switch(this.activeTab){case 0:this.personalFormGroup.markAsTouched();break;case 1:this.addressFormGroup.markAsTouched();break}switch(a){case"personal":this.activeTab=0;break;case"address":this.activeTab=1;break}this.router.navigate([`profile/${a}`])}onSave(){this.cache.formGroup.invalid||(this.cache.profile=this.parseForm(this.cache.profile?.id),this.cache.formGroup.markAsPristine(),this.toastService.show({message:"Profile saved",theme:"success"}))}onCancel(){this.cache.formGroup.reset(),this.cache.formGroup.markAsPristine(),this.imageUrl=void 0,this.cache.profile=void 0}onImageError(a){let i=a.target;i.src.includes(this.noImageUrl)||(i.src=this.noImageUrl,i.onerror=null)}isInvalid(a){return a.every(i=>i===!0)}loadForm(a){this.imageUrl=`mock-data/${Le.formatNumber(this.cache.profile?.id,"2.0-0")}-small.png`,this.personalFormGroup.controls.friends?.clear(),this.personalFormGroup.patchValue(a),this.addressFormGroup.patchValue(a.address)}parseForm(a){return{id:a||-1,firstName:this.personalFormGroup.value.firstName,lastName:this.personalFormGroup.value.lastName,gender:this.personalFormGroup.value.gender,email:this.personalFormGroup.value.email,phone:this.personalFormGroup.value.phone,dateOfBirth:this.personalFormGroup.value.dateOfBirth,address:this.addressFormGroup.value}}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=C({type:r,selectors:[["app-profile"]],decls:29,vars:21,consts:[[1,"header"],["slot","start"],[1,"forge-typography--subheading4"],["alt","",3,"src"],["slot","end"],["variant","outlined",3,"click"],["secondary","",3,"activeTab"],["aria-controls","app--profile--personal",3,"forge-tab-select"],["slot","end","name","error"],["aria-controls","app--profile--address",3,"forge-tab-select"],[1,"body"],["novalidate","","autocomplete","off",3,"formGroup"],["inverted","",1,"footer"],["variant","filled",3,"click","disabled"],["alt","",3,"error","src"]],template:function(i,o){i&1&&(e(0,"forge-toolbar",0)(1,"div",1)(2,"h2",2),n(3,"Profile"),t(),G(4,et,1,1,"img",3),t(),e(5,"div",4)(6,"forge-button",5),g("click",function(){return o.onLoadProfile()}),n(7," Load profile "),t()()(),e(8,"forge-tab-bar",6)(9,"forge-tab",7),g("forge-tab-select",function(){return o.onTabSelected("personal")}),n(10," Personal "),G(11,tt,1,0,"forge-icon",8),k(12,"appCallback"),t(),e(13,"forge-tab",9),g("forge-tab-select",function(){return o.onTabSelected("address")}),n(14," Address "),G(15,ot,1,0,"forge-icon",8),k(16,"appCallback"),t()(),e(17,"div",10)(18,"form",11),m(19,"router-outlet"),e(20,"p"),n(21),k(22,"json"),t()()(),e(23,"forge-toolbar",12)(24,"div",4)(25,"forge-button",5),g("click",function(){return o.onCancel()}),n(26,"Cancel"),t(),e(27,"forge-button",13),g("click",function(){return o.onSave()}),n(28," Save "),t()()()),i&2&&(s(4),w(o.imageUrl?4:-1),s(4),p("activeTab",o.activeTab),s(3),w(W(12,7,K(15,Je,o.personalFormGroup.invalid,o.personalFormGroup.touched),o.isInvalid)?11:-1),s(4),w(W(16,10,K(18,Je,o.addressFormGroup.invalid,o.addressFormGroup.touched),o.isInvalid)?15:-1),s(3),p("formGroup",o.cache.formGroup),s(3),M(" ",ne(22,13,o.cache.formGroup.getRawValue())," "),s(6),p("disabled",o.cache.formGroup.invalid||!o.cache.formGroup.dirty))},dependencies:[_,le,S,me,b,F,q,R,z,V,Ve,qe,Ae,Re,Ue,Be,ie,Ye],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto auto 1fr auto;overflow:hidden;background-color:var(--forge-theme-surface)}.header[_ngcontent-%COMP%]{overflow:hidden;--forge-toolbar-border-bottom: none}.header[_ngcontent-%COMP%]   [slot=end][_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.header[_ngcontent-%COMP%]   [slot=end][_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin:0 16px}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]{min-width:240px}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]   forge-icon[_ngcontent-%COMP%]{color:var(--forge-theme-error)}.body[_ngcontent-%COMP%]{padding:24px;overflow:auto}.footer[_ngcontent-%COMP%]   [slot=end][_ngcontent-%COMP%]   forge-button[_ngcontent-%COMP%]{margin-left:16px}






/*# sourceMappingURL=profile.component-FYDJOH5O.css.map */`]});let l=r;return l})();var We=(()=>{let r=class r{constructor(){this.cache=c(h)}get formGroup(){return this.cache.formGroup.controls.addressFormGroup}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=C({type:r,selectors:[["app-profile-address"]],hostAttrs:["role","tabpanel","id","app--profile--address"],decls:32,vars:6,consts:[[1,"form-grid",3,"formGroup"],["required","",1,"form-grid--row-break",3,"appFormControlInvalid"],["type","text","id","profile--address--name","formControlName","name","appAutoFocus",""],["for","profile--address--name","slot","label"],["slot","support-text",1,"app--form-control-invalid"],["type","text","id","profile--address--street","formControlName","street"],["for","profile--address--street","slot","label"],["required","",3,"appFormControlInvalid"],["type","text","id","profile--address-city","formControlName","city"],["for","profile--address--city","slot","label"],[1,"form-grid__state-zip"],["type","text","id","profile--address--state","formControlName","state"],["for","profile--address--state","slot","label"],["type","text","id","profile--address--zip","formControlName","zip"],["for","profile--address--zip","slot","label"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"forge-text-field",1),m(2,"input",2),e(3,"label",3),n(4,"Name"),t(),e(5,"span",4),n(6,"Name is required"),t()(),e(7,"forge-text-field",1),m(8,"input",5),e(9,"label",6),n(10,"Street"),t(),e(11,"span",4),n(12,"Street is required"),t()(),e(13,"forge-text-field",7),m(14,"input",8),e(15,"label",9),n(16,"City"),t(),e(17,"span",4),n(18,"City is required"),t()(),e(19,"div",10)(20,"forge-text-field",7),m(21,"input",11),e(22,"label",12),n(23,"State"),t(),e(24,"span",4),n(25,"State is required"),t()(),e(26,"forge-text-field",7),m(27,"input",13),e(28,"label",14),n(29,"Zip code"),t(),e(30,"span",4),n(31,"Zip code is required"),t()()()()),i&2&&(p("formGroup",o.formGroup),s(),p("appFormControlInvalid",o.formGroup.controls.name),s(6),p("appFormControlInvalid",o.formGroup.controls.street),s(6),p("appFormControlInvalid",o.formGroup.controls.city),s(7),p("appFormControlInvalid",o.formGroup.controls.state),s(6),p("appFormControlInvalid",o.formGroup.controls.zip))},dependencies:[_,S,N,T,b,F,I,U,B,j,$],styles:[`[_nghost-%COMP%]{display:block}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.form-grid--row-break[_ngcontent-%COMP%]{grid-column-start:1}.form-grid--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid--col-span.form-grid--col-span[_ngcontent-%COMP%]{width:auto}.form-grid--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.form-grid--col-span2.form-grid--col-span2[_ngcontent-%COMP%]{width:656px}.form-grid--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.form-grid--col-span3.form-grid--col-span3[_ngcontent-%COMP%]{width:992px}.form-grid[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.form-grid__name[_ngcontent-%COMP%], .form-grid__street[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid__state-zip[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;column-gap:16px}






/*# sourceMappingURL=address.component-SGQ4QNBV.css.map */`]});let l=r;return l})();function rt(l,r){if(l&1&&(e(0,"forge-radio",24),n(1),t()),l&2){let u=r.$implicit;p("value",re(u.value)),s(),M(" ",u.label," ")}}function nt(l,r){if(l&1){let u=E();e(0,"div",29)(1,"forge-select",31)(2,"span",5),n(3,"A friend is required"),t(),e(4,"forge-icon-button",32),g("click",function(){let i=x(u).$index,o=v();return P(o.onDeleteFriend(i))}),m(5,"forge-icon",33),t()()()}if(l&2){let u=r.$index,a=v();s(),p("options",a.friendOptions)("formControlName",u)("appFormControlInvalid",a.formGroup.controls.friends.controls[u])}}var Xe=(()=>{let r=class r{constructor(){this.destroyRef=c(O),this.cache=c(h),this.appDataService=c(L),this.genderOptions=[{label:"",value:null},{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Undecided",value:"U"}],this.friendOptions=[],this.sizeOptions=[{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"}]}get formGroup(){return this.cache.formGroup.controls.personalFormGroup}get friendsFormArray(){return this.formGroup.controls.friends}ngOnInit(){this.appDataService.getPeople().pipe(A(this.destroyRef)).subscribe({next:a=>{this.friendOptions=a.data.map(i=>({label:`${i.firstName} ${i.lastName}`,value:i.id}))}})}onAddFriend(){this.friendsFormArray.push(new d(null,{validators:[f.required]}))}onDeleteFriend(a){this.friendsFormArray.removeAt(a)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=C({type:r,selectors:[["app-profile-personal"]],hostAttrs:["role","tabpanel","id","app--profile--personal"],decls:60,vars:8,consts:[[3,"formGroup"],[1,"form-grid"],["required","",3,"appFormControlInvalid"],["type","text","id","profile--personal--first-name","formControlName","firstName","appAutoFocus","",3,"appInputCasing"],["for","profile--personal--first-name","slot","label"],["slot","support-text",1,"app--form-control-invalid"],["type","text","id","profile--personal--last-name","formControlName","lastName"],["for","profile--personal--last-name","slot","label"],["label","Gender","formControlName","gender",3,"options"],["type","text","id","profile--personal--email","formControlName","email"],["for","profile--personal--email","slot","label"],["type","text","id","profile--personal--phone","formControlName","phone"],["for","profile--personal--phone","slot","label"],["formControlName","dateOfBirth"],["type","text","id","profile--personal--dob"],["for","profile--personal--dob"],[1,"form-grid__comment","form-grid--col-span"],["type","text","id","profile--personal--comment","formControlName","comment","rows","4"],["for","profile--personal--comment"],[2,"--forge-label-value-align","stretch"],["slot","label"],["slot","value"],["data-aria-label","Rank","min","0","max","10","formControlName","rank"],["slot","value","aria-label","Choose a size option","name","profile--personal--size"],["name","profile--personal--size","formControlName","size",3,"value"],["formControlName","citizen","aria-label","Is a citizen"],["label","Entry date","formControlName","entryDate"],[1,"friends"],["formArrayName","friends"],[1,"friend"],["variant","filled",3,"click"],["label","Friend",3,"options","formControlName","appFormControlInvalid"],["slot","accessory","density","medium","aria-label","Delete",3,"click"],["name","delete"]],template:function(i,o){i&1&&(Z(0,0),e(1,"div",1)(2,"forge-text-field",2),m(3,"input",3),e(4,"label",4),n(5,"First name"),t(),e(6,"span",5),n(7,"First name is required"),t()(),e(8,"forge-text-field",2),m(9,"input",6),e(10,"label",7),n(11,"Last name"),t(),e(12,"span",5),n(13,"Last name is required"),t()(),m(14,"forge-select",8),e(15,"forge-text-field",2),m(16,"input",9),e(17,"label",10),n(18,"Email"),t(),e(19,"span",5),n(20,"Email is required"),t()(),e(21,"forge-text-field",2),m(22,"input",11),e(23,"label",12),n(24,"Phone"),t(),e(25,"span",5),n(26,"Phone number is required"),t()(),e(27,"forge-date-picker",13)(28,"forge-text-field"),m(29,"input",14),e(30,"label",15),n(31,"Date of birth"),t()()(),e(32,"forge-text-field",16),m(33,"textarea",17),e(34,"label",18),n(35,"Comment"),t()(),e(36,"forge-label-value",19)(37,"span",20),n(38),t(),e(39,"div",21),m(40,"forge-slider",22),t()(),e(41,"forge-label-value")(42,"span",20),n(43,"Size"),t(),e(44,"forge-radio-group",23),Y(45,rt,2,3,"forge-radio",24,Q),t()(),e(47,"forge-label-value")(48,"span",20),n(49,"Citizen"),t(),e(50,"div",21),m(51,"forge-switch",25),t()(),m(52,"app-date-time",26),t(),m(53,"forge-divider"),e(54,"div",27),Z(55,28),Y(56,nt,6,3,"div",29,Q),e(58,"forge-button",30),g("click",function(){return o.onAddFriend()}),n(59," Add friend"),t(),H(),t(),H()),i&2&&(p("formGroup",o.formGroup),s(2),p("appFormControlInvalid",o.formGroup.controls.firstName),s(),p("appInputCasing","upper"),s(5),p("appFormControlInvalid",o.formGroup.controls.lastName),s(6),p("options",o.genderOptions),s(),p("appFormControlInvalid",o.formGroup.controls.email),s(6),p("appFormControlInvalid",o.formGroup.controls.phone),s(17),M("Rank ",o.formGroup.value.rank),s(7),J(o.sizeOptions),s(11),J(o.formGroup.controls.friends.controls))},dependencies:[_,S,N,T,b,F,I,pe,q,R,ue,fe,ce,Ce,he,_e,ve,V,z,Fe,be,Pe,xe,ye,Me,Se,we,Ge,Oe,Ne,ke,Ee,Ie,De,Te,U,B,j,$e,Qe,$],styles:[`[_nghost-%COMP%]{display:block}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.form-grid--row-break[_ngcontent-%COMP%]{grid-column-start:1}.form-grid--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid--col-span.form-grid--col-span[_ngcontent-%COMP%]{width:auto}.form-grid--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.form-grid--col-span2.form-grid--col-span2[_ngcontent-%COMP%]{width:656px}.form-grid--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.form-grid--col-span3.form-grid--col-span3[_ngcontent-%COMP%]{width:992px}.form-grid[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.form-grid__comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}forge-divider[_ngcontent-%COMP%]{margin:16px 0}.friends[_ngcontent-%COMP%]   .friend[_ngcontent-%COMP%]{padding-bottom:16px}.friends[_ngcontent-%COMP%]   .friend[_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]{width:320px}






/*# sourceMappingURL=personal.component-QCOQFYFF.css.map */`]});let l=r;return l})();var jt=[{path:"",component:Ke,canDeactivate:[l=>l.canDeactivate()],providers:[h],children:[{path:"address",component:We},{path:"personal",component:Xe},{path:"",redirectTo:"personal",pathMatch:"full"}]}];export{jt as PROFILE_ROUTES};
//# sourceMappingURL=chunk-NKWSMNAE.js.map
