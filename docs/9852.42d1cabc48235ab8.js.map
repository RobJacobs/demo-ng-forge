{"version":3,"file":"9852.42d1cabc48235ab8.js","mappings":"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","names":["b","constructor","t","this","_ownsRctx","_rctx","_instance","_instanceRefCount","document","createElement","getContext","getExtension","l","r","m","Map","applyProjection","bilinear","bicubic","_program","programCache","acquire","shaders","vertexShader","fragmentShader","attributes","useProgram","setUniform1f","setUniform1i","_quad","o","reprojectTexture","s","n","extent","e","x","xmax","xmin","texture","descriptor","width","y","ymax","ymin","height","spatialReference","i","T","R","Math","round","j","E","D","a","projectedExtent","srcBufferExtent","pixelSize","hasWrapAround","spacing","C","f","w","pixelFormat","p","dataType","h","wrapMode","c","samplingMode","hasMipmap","M","_","colorTarget","d","depthStencilTarget","g","bindFramebuffer","setViewport","bindTexture","bind","A","S","setUniform2f","setUniform2fv","size","draw","unbind","dispose","ImageData","readPixels","data","detachColorTexture","u","imageData","reprojectBitmapData","bitmapData","putImageData","loadAndReprojectBitmapData","_this","_asyncToGenerator","responseType","drawImage","getImageData","equals","destroy","k","allSublayers","allPoints","allPolylines","allPolygons","allMapImages","P","super","arguments","_bitmapIndex","_mapImageContainer","v","_kmlVisualData","_fetchController","allVisiblePoints","V","allVisiblePolylines","allVisiblePolygons","allVisibleMapImages","hitTest","layer","_pointsView","_polylinesView","_polygonsView","flat","filter","Boolean","map","sourceLayer","type","graphic","mapPoint","update","processUpdate","attach","AbortController","container","addChild","view","graphics","requestUpdateCallback","requestUpdate","I","featuresTilingScheme","addAttachHandles","on","added","forEach","_addMapImage","removed","_removeMapImage","visibleSublayers","visibility","get","id","_refreshCollections","updatingHandles","addPromise","_fetchService","signal","_imageReprojector","detach","removeAllChildren","clear","moveStart","viewChange","moveEnd","isUpdating","updating","isWGS84","isWebMercator","href","then","immutable","requestRenderOnSourceChangedEnabled","resolution","rotation","set","_getViewDependentUrl","viewFormat","viewBoundScale","httpQuery","Error","expand","pixelRatio","max","toString","center","replace","query","path","_this2","_loadVisualData","url","removeAll","addMany","_isSublayerVisible","sublayerId","item","parentFolderId","_this3","_fetchParsedKML","_ref","sublayers","points","polylines","polygons","mapImages","push","networkLink","state","_x","apply","refreshInterval","removeChild","delete","prototype"],"sourceRoot":"webpack:///","sources":["./node_modules/@arcgis/core/views/support/imageReprojection.js","./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../geometry/Point.js\";import{project as r}from\"../../geometry/projection.js\";import{projectResolution as i,getProjectionOffsetGrid as a}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{isImageSource as s,rasterize as n}from\"../2d/engine/Bitmap.js\";import o from\"../2d/engine/webgl/VertexStream.js\";import{createProgramTemplate as m}from\"../2d/engine/webgl/shaders/MaterialPrograms.js\";import{PixelFormat as p,PixelType as h,TextureWrapMode as c,TextureSamplingMode as x,TargetType as d,DepthStencilTargetType as g,ColorAttachment as u}from\"../webgl/enums.js\";import{FramebufferObject as _}from\"../webgl/FramebufferObject.js\";import{createTransformTexture as f}from\"../webgl/rasterUtils.js\";import{RenderingContext as l}from\"../webgl/RenderingContext.js\";import{Texture as w}from\"../webgl/Texture.js\";class b{constructor(t){if(this._ownsRctx=!1,t)this._ownsRctx=!1,this._rctx=t;else{if(b._instance)return b._instanceRefCount++,b._instance;b._instanceRefCount=1,b._instance=this,this._ownsRctx=!0;const t=document.createElement(\"canvas\").getContext(\"webgl\");t.getExtension(\"OES_texture_float\"),this._rctx=new l(t,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=m(\"raster/reproject\",\"raster/reproject\",new Map([[\"a_position\",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f(\"u_opacity\",1),this._program.setUniform1i(\"u_image\",0),this._program.setUniform1i(\"u_flipY\",0),this._program.setUniform1i(\"u_transformGrid\",1),this._quad=new o(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,n=!1){const o=r(t.extent,s),m=new e({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:l,y:b}=i(m,s,t.extent);let T=(l+b)/2;const R=Math.round((o.xmax-o.xmin)/T),j=Math.round((o.ymax-o.ymin)/T);T=(o.width/R+o.height/j)/2;const E=new e({x:T,y:T,spatialReference:o.spatialReference}),D=a({projectedExtent:o,srcBufferExtent:t.extent,pixelSize:E,hasWrapAround:!0,spacing:[16,16]}),C=f(this._rctx,D),y=new w(this._rctx,{width:R,height:j,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:x.LINEAR,hasMipmap:!1}),M=new _(this._rctx,{colorTarget:d.TEXTURE,depthStencilTarget:g.NONE,width:R,height:j},y);this._rctx.bindFramebuffer(M),this._rctx.setViewport(0,0,R,j),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(C,1),this._quad.bind();const{width:A=0,height:S=0}=t.texture.descriptor;if(this._program.setUniform2f(\"u_srcImageSize\",A,S),this._program.setUniform2fv(\"u_transformSpacing\",D.spacing),this._program.setUniform2fv(\"u_transformGridSize\",D.size),this._program.setUniform2f(\"u_targetImageSize\",R,j),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),C.dispose(),n){const{width:t=0,height:e=0}=M.descriptor,r=new ImageData(t,e);return M.readPixels(0,0,t,e,p.RGBA,h.UNSIGNED_BYTE,r.data),M.detachColorTexture(u.COLOR_ATTACHMENT0),M.dispose(),{texture:y,extent:o,imageData:r}}return M.detachColorTexture(u.COLOR_ATTACHMENT0),M.dispose(),{texture:y,extent:o}}reprojectBitmapData(t,e){const r=s(t.bitmapData)?n(t.bitmapData):t.bitmapData,i=new w(this._rctx,{width:t.bitmapData.width,height:t.bitmapData.height,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:x.LINEAR,hasMipmap:!1},r),a=this.reprojectTexture({texture:i,extent:t.extent},e,!0);a.texture.dispose();const o=document.createElement(\"canvas\"),m=a.imageData;o.width=m.width,o.height=m.height;return o.getContext(\"2d\").putImageData(m,0,0),{bitmapData:o,extent:a.extent}}async loadAndReprojectBitmapData(e,r,i){const a=(await t(e,{responseType:\"image\"})).data,s=document.createElement(\"canvas\");s.width=a.width,s.height=a.height;const n=s.getContext(\"2d\");n.drawImage(a,0,0);const o=n.getImageData(0,0,s.width,s.height);if(r.spatialReference.equals(i))return{bitmapData:o,extent:r};const m=this.reprojectBitmapData({bitmapData:o,extent:r},i);return{bitmapData:m.bitmapData,extent:m.extent}}destroy(){this._ownsRctx?(b._instanceRefCount--,0===b._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),b._instance=null)):(this._quad.dispose(),this._program.dispose())}}b._instanceRefCount=0;export{b as ImageReprojector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{version as i}from\"../../../kernel.js\";import t from\"../../../core/Collection.js\";import{abortMaybe as s,destroyMaybe as a,isSome as o,isNone as r}from\"../../../core/maybe.js\";import{watch as l}from\"../../../core/reactiveUtils.js\";import{queryToObject as n,objectToQuery as h}from\"../../../core/urlUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as m}from\"../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../geometry/Extent.js\";import{load as d,project as y}from\"../../../geometry/projection.js\";import g from\"../../../geometry/SpatialReference.js\";import{getGraphics as w,fetchService as u,parseKML as _}from\"../../../layers/support/kmlUtils.js\";import{parseUrl as b}from\"../../../rest/utils.js\";import{GraphicsCollection as V}from\"../../../support/GraphicsCollection.js\";import{Bitmap as f}from\"../engine/Bitmap.js\";import{BitmapContainer as v}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as S}from\"./LayerView2D.js\";import I from\"./graphics/GraphicContainer.js\";import x from\"./graphics/GraphicsView2D.js\";import C from\"../../layers/LayerView.js\";import{ImageReprojector as j}from\"../../support/imageReprojection.js\";class k{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let P=class extends(S(C)){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new v,this._kmlVisualData=new k,this._fetchController=null,this.allVisiblePoints=new V,this.allVisiblePolylines=new V,this.allVisiblePolygons=new V,this.allVisibleMapImages=new t}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:\"graphic\",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new x({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new I(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new x({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new I(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new x({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new I(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.addAttachHandles([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),l((()=>this.layer.visibleSublayers),(e=>{for(const[i,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this.updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new j}detach(){this._fetchController=s(this._fetchController),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView=a(this._polygonsView),this._polylinesView=a(this._polylinesView),this._pointsView=a(this._pointsView),this._imageReprojector=a(this._imageReprojector)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference?.isWGS84||this.view.spatialReference?.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,c.fromJSON(e.extent),this.view.spatialReference).then((i=>{const t=new f(i.bitmapData,{immutable:!1,requestRenderOnSourceChangedEnabled:!0});t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:s,viewBoundScale:a,httpQuery:l}=e;if(o(s)){if(r(t))throw new Error(\"Loading this network link requires a view state.\");let p;if(await d(),o(a)&&1!==a){const e=new c(t.extent);e.expand(a),p=e}else p=t.extent;p=y(p,g.WGS84);const m=y(p,g.WebMercator),w=p.xmin,u=p.xmax,_=p.ymin,V=p.ymax,f=t.size[0]*t.pixelRatio,v=t.size[1]*t.pixelRatio,S=Math.max(m.width,m.height),I={\"[bboxWest]\":w.toString(),\"[bboxEast]\":u.toString(),\"[bboxSouth]\":_.toString(),\"[bboxNorth]\":V.toString(),\"[lookatLon]\":p.center.x.toString(),\"[lookatLat]\":p.center.y.toString(),\"[lookatRange]\":S.toString(),\"[lookatTilt]\":\"0\",\"[lookatHeading]\":t.rotation.toString(),\"[lookatTerrainLon]\":p.center.x.toString(),\"[lookatTerrainLat]\":p.center.y.toString(),\"[lookatTerrainAlt]\":\"0\",\"[cameraLon]\":p.center.x.toString(),\"[cameraLat]\":p.center.y.toString(),\"[cameraAlt]\":S.toString(),\"[horizFov]\":\"60\",\"[vertFov]\":\"60\",\"[horizPixels]\":f.toString(),\"[vertPixels]\":v.toString(),\"[terrainEnabled]\":\"0\",\"[clientVersion]\":i,\"[kmlVersion]\":\"2.2\",\"[clientName]\":\"ArcGIS API for JavaScript\",\"[language]\":\"en-US\"},x=e=>{for(const i in e)for(const t in I)e[i]=e[i].replace(t,I[t])},C=n(s);x(C);let j={};o(l)&&(j=n(l),x(j));const k=b(e.href);k.query={...k.query,...C,...j};return`${k.path}?${h(C)}`}return e.href}async _fetchService(e){const i=new k;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i?.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await w(s.points):[],a=s.polylines?await w(s.polylines):[],o=s.polygons?await w(s.polygons):[],r=s.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...r.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return u(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>_(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([p()],P.prototype,\"_pointsView\",void 0),e([p()],P.prototype,\"_polylinesView\",void 0),e([p()],P.prototype,\"_polygonsView\",void 0),e([p()],P.prototype,\"updating\",void 0),P=e([m(\"esri.views.2d.layers.KMLLayerView2D\")],P);const M=P;export{M as default};\n"],"x_google_ignoreList":[0,1]}