import"./chunk-OVVKXFFX.js";import{a as Qe}from"./chunk-VPP7M423.js";import{e as $e,h as je}from"./chunk-BAUKHNU7.js";import"./chunk-SJTSKTDR.js";import"./chunk-SWINKNK2.js";import{a as B,c as L,d as Le}from"./chunk-YDUMDIKL.js";import"./chunk-PSWJZLWW.js";import{a as U}from"./chunk-7FHUHW4E.js";import{a as Be}from"./chunk-M7T5ZGL3.js";import"./chunk-TITIXCWU.js";import"./chunk-MOTMDLCJ.js";import"./chunk-OLGGKPVW.js";import{Ad as qe,Bb as m,Bc as ue,Cc as ge,Dc as he,Dd as z,Eb as se,Ed as V,Gb as pe,Gc as R,Hc as q,Ic as Ce,Id as ze,Jc as ve,Jd as Ve,Kc as _e,Kd as Ue,Lb as me,Lc as be,Mb as T,Nb as b,Qb as F,Rb as I,dc as D,dd as Fe,ec as A,ed as Se,f as re,fd as Pe,gd as ye,hd as xe,i as ne,kd as Me,ld as Ge,md as Oe,rd as we,sb as E,sd as Ee,td as ke,ub as c,ud as Ne,v as ie,vc as de,vd as Te,w as ae,wb as k,wd as Ie,x as le,xb as _,xc as ce,xd as De,yc as fe,yd as Ae,zb as N,zd as Re}from"./chunk-LZIMIDFQ.js";import{Bb as M,Cb as G,Db as $,Eb as j,Fb as Q,Gb as p,Hb as e,Ib as t,Jb as s,Nb as J,Ob as Y,Qb as O,Ta as ee,Tb as f,Ub as v,Va as l,Z as X,ca as d,d as W,fc as a,ha as P,hc as S,ia as y,la as x,lb as C,mc as te,qc as Z,uc as w,vc as oe,wc as H}from"./chunk-DDV7S3RG.js";import"./chunk-NCBA65HR.js";var h=(()=>{class n{constructor(){this.formGroup=new N({personalFormGroup:new N({firstName:new m(null,{validators:[c.required]}),lastName:new m(null,{validators:[c.required]}),gender:new m(null),email:new m(null,{validators:[c.required]}),phone:new m(null,{validators:[c.required]}),dateOfBirth:new m(null),comment:new m(null),rank:new m(5),size:new m(null),citizen:new m(!1),entryDate:new m(null),friends:new pe([])}),addressFormGroup:new N({name:new m(null,{validators:[c.required]}),street:new m(null,{validators:[c.required]}),city:new m(null,{validators:[c.required]}),state:new m(null,{validators:[c.required]}),zip:new m(null,{validators:[c.required]})})})}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=X({token:n,factory:n.\u0275fac})}}return n})();var Je=(n,g)=>[n,g];function Xe(n,g){if(n&1){let o=O();e(0,"img",14),f("error",function(r){P(o);let u=v();return y(u.onImageError(r))}),t()}if(n&2){let o=v();p("src",o.imageUrl,ee)}}function et(n,g){n&1&&s(0,"forge-icon",8)}function tt(n,g){n&1&&s(0,"forge-icon",8)}var He=(()=>{class n{constructor(){this.destroyRef=d(x),this.router=d(le),this.route=d(ie),this.appDataService=d(U),this.dialogService=d(ue),this.toastService=d(ze),this.cache=d(h),this.noImageUrl="mock-data/no-image.png",this.activeTab=0}get personalFormGroup(){return this.cache.formGroup.controls.personalFormGroup}get addressFormGroup(){return this.cache.formGroup.controls.addressFormGroup}ngOnInit(){this.cache.profile&&this.loadForm(this.cache.profile),this.route.snapshot.children.map(o=>o.url.map(i=>i.path)).flat().includes("address")&&(this.activeTab=1)}canDeactivate(){return this.cache.formGroup.dirty?new W(o=>{this.dialogService.open($e,{options:{persistent:!0},data:{title:"Unsaved changes",message:"You have unsaved changes which will be lost, do you want to continue?"}}).afterClosed.subscribe({next:i=>{i&&this.cache.formGroup.reset(),o.next(i)}})}):!0}onLoadProfile(){this.appDataService.getProfile().pipe(I(this.destroyRef)).subscribe({next:o=>{this.cache.formGroup.reset(),this.cache.profile=o,this.loadForm(this.cache.profile)},error:()=>{this.toastService.show({message:"Error loading profile",theme:"error"})}})}onTabSelected(o){switch(this.activeTab){case 0:this.personalFormGroup.markAsTouched();break;case 1:this.addressFormGroup.markAsTouched();break}switch(o){case"personal":this.activeTab=0;break;case"address":this.activeTab=1;break}this.router.navigate([`profile/${o}`])}onSave(){this.cache.formGroup.invalid||(this.cache.profile=this.parseForm(this.cache.profile?.id),this.cache.formGroup.markAsPristine(),this.toastService.show({message:"Profile saved",theme:"success"}))}onCancel(){this.cache.formGroup.reset(),this.cache.formGroup.markAsPristine(),this.imageUrl=void 0,this.cache.profile=void 0}onImageError(o){let i=o.target;i.src.includes(this.noImageUrl)||(i.src=this.noImageUrl,i.onerror=null)}isInvalid(o){return o.every(i=>i===!0)}loadForm(o){this.imageUrl=`mock-data/${Be.formatNumber(parseInt(this.cache.profile?.id,109),"2.0-0")}-small.png`,this.personalFormGroup.controls.friends?.clear(),this.personalFormGroup.patchValue(o),this.addressFormGroup.patchValue(o.address)}parseForm(o){return{id:o||"-1",firstName:this.personalFormGroup.value.firstName,lastName:this.personalFormGroup.value.lastName,gender:this.personalFormGroup.value.gender,email:this.personalFormGroup.value.email,phone:this.personalFormGroup.value.phone,dateOfBirth:this.personalFormGroup.value.dateOfBirth,address:this.addressFormGroup.value}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=C({type:n,selectors:[["app-profile"]],decls:29,vars:21,consts:[[1,"header"],["slot","start"],[1,"forge-typography--subheading4"],["alt","",3,"src"],["slot","end"],["variant","outlined",3,"click"],["secondary","",3,"activeTab"],["aria-controls","app--profile--personal",3,"forge-tab-select"],["slot","end","name","error"],["aria-controls","app--profile--address",3,"forge-tab-select"],[1,"body"],["novalidate","","autocomplete","off",3,"formGroup"],["inverted","",1,"footer"],["variant","filled",3,"click","disabled"],["alt","",3,"error","src"]],template:function(i,r){i&1&&(e(0,"forge-toolbar",0)(1,"div",1)(2,"h2",2),a(3,"Profile"),t(),M(4,Xe,1,1,"img",3),t(),e(5,"div",4)(6,"forge-button",5),f("click",function(){return r.onLoadProfile()}),a(7," Load profile "),t()()(),e(8,"forge-tab-bar",6)(9,"forge-tab",7),f("forge-tab-select",function(){return r.onTabSelected("personal")}),a(10," Personal "),M(11,et,1,0,"forge-icon",8),w(12,"appCallback"),t(),e(13,"forge-tab",9),f("forge-tab-select",function(){return r.onTabSelected("address")}),a(14," Address "),M(15,tt,1,0,"forge-icon",8),w(16,"appCallback"),t()(),e(17,"div",10)(18,"form",11),s(19,"router-outlet"),e(20,"p"),a(21),w(22,"json"),t()()(),e(23,"forge-toolbar",12)(24,"div",4)(25,"forge-button",5),f("click",function(){return r.onCancel()}),a(26,"Cancel"),t(),e(27,"forge-button",13),f("click",function(){return r.onSave()}),a(28," Save "),t()()()),i&2&&(l(4),G(r.imageUrl?4:-1),l(4),p("activeTab",r.activeTab),l(3),G(H(12,7,Z(15,Je,r.personalFormGroup.invalid,r.personalFormGroup.touched),r.isInvalid)?11:-1),l(4),G(H(16,10,Z(18,Je,r.addressFormGroup.invalid,r.addressFormGroup.touched),r.isInvalid)?15:-1),l(3),p("formGroup",r.cache.formGroup),l(3),S(" ",oe(22,13,r.cache.formGroup.getRawValue())," "),l(6),p("disabled",r.cache.formGroup.invalid||!r.cache.formGroup.dirty))},dependencies:[ne,ae,F,se,_,b,A,D,q,R,qe,Re,De,Ae,Ue,Ve,re,Qe],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto auto 1fr auto;overflow:hidden;background-color:var(--forge-theme-surface)}.header[_ngcontent-%COMP%]{overflow:hidden;--forge-toolbar-border-bottom: none}.header[_ngcontent-%COMP%]   [slot=end][_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.header[_ngcontent-%COMP%]   [slot=end][_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;margin:0 16px}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]{min-width:240px}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]   forge-icon[_ngcontent-%COMP%]{color:var(--forge-theme-error)}.body[_ngcontent-%COMP%]{padding:24px;overflow:auto}.footer[_ngcontent-%COMP%]   [slot=end][_ngcontent-%COMP%]   forge-button[_ngcontent-%COMP%]{margin-left:16px}






/*# sourceMappingURL=profile.component-NQQCDATG.css.map */`]})}}return n})();var Ke=(()=>{class n{constructor(){this.cache=d(h)}get formGroup(){return this.cache.formGroup.controls.addressFormGroup}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=C({type:n,selectors:[["app-profile-address"]],hostAttrs:["role","tabpanel","id","app--profile--address"],decls:32,vars:6,consts:[[1,"form-grid",3,"formGroup"],["required","",1,"form-grid--row-break",3,"appFormControlInvalid"],["type","text","id","profile--address--name","formControlName","name","appAutoFocus",""],["for","profile--address--name","slot","label"],["slot","support-text",1,"app--form-control-invalid"],["type","text","id","profile--address--street","formControlName","street"],["for","profile--address--street","slot","label"],["required","",3,"appFormControlInvalid"],["type","text","id","profile--address-city","formControlName","city"],["for","profile--address--city","slot","label"],[1,"form-grid__state-zip"],["type","text","id","profile--address--state","formControlName","state"],["for","profile--address--state","slot","label"],["type","text","id","profile--address--zip","formControlName","zip"],["for","profile--address--zip","slot","label"]],template:function(i,r){i&1&&(e(0,"div",0)(1,"forge-text-field",1),s(2,"input",2),e(3,"label",3),a(4,"Name"),t(),e(5,"span",4),a(6,"Name is required"),t()(),e(7,"forge-text-field",1),s(8,"input",5),e(9,"label",6),a(10,"Street"),t(),e(11,"span",4),a(12,"Street is required"),t()(),e(13,"forge-text-field",7),s(14,"input",8),e(15,"label",9),a(16,"City"),t(),e(17,"span",4),a(18,"City is required"),t()(),e(19,"div",10)(20,"forge-text-field",7),s(21,"input",11),e(22,"label",12),a(23,"State"),t(),e(24,"span",4),a(25,"State is required"),t()(),e(26,"forge-text-field",7),s(27,"input",13),e(28,"label",14),a(29,"Zip code"),t(),e(30,"span",4),a(31,"Zip code is required"),t()()()()),i&2&&(p("formGroup",r.formGroup),l(),p("appFormControlInvalid",r.formGroup.controls.name),l(6),p("appFormControlInvalid",r.formGroup.controls.street),l(6),p("appFormControlInvalid",r.formGroup.controls.city),l(7),p("appFormControlInvalid",r.formGroup.controls.state),l(6),p("appFormControlInvalid",r.formGroup.controls.zip))},dependencies:[F,E,k,_,b,T,V,z,L,B],styles:[`[_nghost-%COMP%]{display:block}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.form-grid--row-break[_ngcontent-%COMP%]{grid-column-start:1}.form-grid--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid--col-span.form-grid--col-span[_ngcontent-%COMP%]{width:auto}.form-grid--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.form-grid--col-span2.form-grid--col-span2[_ngcontent-%COMP%]{width:656px}.form-grid--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.form-grid--col-span3.form-grid--col-span3[_ngcontent-%COMP%]{width:992px}.form-grid[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.form-grid__name[_ngcontent-%COMP%], .form-grid__street[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid__state-zip[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;column-gap:16px}






/*# sourceMappingURL=address.component-FGQ3UQNY.css.map */`]})}}return n})();function ot(n,g){if(n&1&&(e(0,"forge-radio",24),a(1),t()),n&2){let o=g.$implicit;p("value",te(o.value)),l(),S(" ",o.label," ")}}function rt(n,g){if(n&1){let o=O();e(0,"div",29)(1,"forge-select",31)(2,"span",5),a(3,"A friend is required"),t(),e(4,"forge-icon-button",32),f("click",function(){let r=P(o).$index,u=v();return y(u.onDeleteFriend(r))}),s(5,"forge-icon",33),t()()()}if(n&2){let o=g.$index,i=v();l(),p("options",i.friendOptions)("formControlName",o)("appFormControlInvalid",i.formGroup.controls.friends.controls[o])}}var We=(()=>{class n{constructor(){this.destroyRef=d(x),this.cache=d(h),this.appDataService=d(U),this.genderOptions=[{label:"",value:null},{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Undecided",value:"U"}],this.friendOptions=[],this.sizeOptions=[{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"}]}get formGroup(){return this.cache.formGroup.controls.personalFormGroup}get friendsFormArray(){return this.formGroup.controls.friends}ngOnInit(){this.appDataService.getPeople().pipe(I(this.destroyRef)).subscribe({next:o=>{this.friendOptions=o.data.map(i=>({label:`${i.firstName} ${i.lastName}`,value:i.id}))}})}onAddFriend(){this.friendsFormArray.push(new m(null,{validators:[c.required]}))}onDeleteFriend(o){this.friendsFormArray.removeAt(o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=C({type:n,selectors:[["app-profile-personal"]],hostAttrs:["role","tabpanel","id","app--profile--personal"],decls:60,vars:8,consts:[[3,"formGroup"],[1,"form-grid"],["required","",3,"appFormControlInvalid"],["type","text","id","profile--personal--first-name","formControlName","firstName","appAutoFocus","",3,"appInputCasing"],["for","profile--personal--first-name","slot","label"],["slot","support-text",1,"app--form-control-invalid"],["type","text","id","profile--personal--last-name","formControlName","lastName"],["for","profile--personal--last-name","slot","label"],["label","Gender","formControlName","gender",3,"options"],["type","text","id","profile--personal--email","formControlName","email"],["for","profile--personal--email","slot","label"],["type","text","id","profile--personal--phone","formControlName","phone"],["for","profile--personal--phone","slot","label"],["formControlName","dateOfBirth"],["type","text","id","profile--personal--dob"],["for","profile--personal--dob"],[1,"form-grid__comment","form-grid--col-span"],["type","text","id","profile--personal--comment","formControlName","comment","rows","4"],["for","profile--personal--comment"],[2,"--forge-label-value-align","stretch"],["slot","label"],["slot","value"],["data-aria-label","Rank","min","0","max","10","formControlName","rank"],["slot","value","aria-label","Choose a size option","name","profile--personal--size"],["name","profile--personal--size","formControlName","size",3,"value"],["formControlName","citizen","aria-label","Is a citizen"],["label","Entry date","formControlName","entryDate"],[1,"friends"],["formArrayName","friends"],[1,"friend"],["variant","filled",3,"click"],["label","Friend",3,"options","formControlName","appFormControlInvalid"],["slot","accessory","density","medium","aria-label","Delete",3,"click"],["name","delete"]],template:function(i,r){i&1&&(J(0,0),e(1,"div",1)(2,"forge-text-field",2),s(3,"input",3),e(4,"label",4),a(5,"First name"),t(),e(6,"span",5),a(7,"First name is required"),t()(),e(8,"forge-text-field",2),s(9,"input",6),e(10,"label",7),a(11,"Last name"),t(),e(12,"span",5),a(13,"Last name is required"),t()(),s(14,"forge-select",8),e(15,"forge-text-field",2),s(16,"input",9),e(17,"label",10),a(18,"Email"),t(),e(19,"span",5),a(20,"Email is required"),t()(),e(21,"forge-text-field",2),s(22,"input",11),e(23,"label",12),a(24,"Phone"),t(),e(25,"span",5),a(26,"Phone number is required"),t()(),e(27,"forge-date-picker",13)(28,"forge-text-field"),s(29,"input",14),e(30,"label",15),a(31,"Date of birth"),t()()(),e(32,"forge-text-field",16),s(33,"textarea",17),e(34,"label",18),a(35,"Comment"),t()(),e(36,"forge-label-value",19)(37,"span",20),a(38),t(),e(39,"div",21),s(40,"forge-slider",22),t()(),e(41,"forge-label-value")(42,"span",20),a(43,"Size"),t(),e(44,"forge-radio-group",23),j(45,ot,2,3,"forge-radio",24,$),t()(),e(47,"forge-label-value")(48,"span",20),a(49,"Citizen"),t(),e(50,"div",21),s(51,"forge-switch",25),t()(),s(52,"app-date-time",26),t(),s(53,"forge-divider"),e(54,"div",27),J(55,28),j(56,rt,6,3,"div",29,$),e(58,"forge-button",30),f("click",function(){return r.onAddFriend()}),a(59," Add friend"),t(),Y(),t(),Y()),i&2&&(p("formGroup",r.formGroup),l(2),p("appFormControlInvalid",r.formGroup.controls.firstName),l(),p("appInputCasing","upper"),l(5),p("appFormControlInvalid",r.formGroup.controls.lastName),l(6),p("options",r.genderOptions),l(),p("appFormControlInvalid",r.formGroup.controls.email),l(6),p("appFormControlInvalid",r.formGroup.controls.phone),l(17),S("Rank ",r.formGroup.value.rank),l(7),Q(r.sizeOptions),l(11),Q(r.formGroup.controls.friends.controls))},dependencies:[F,E,k,_,b,T,me,A,D,fe,ce,de,he,ge,ve,Ce,R,q,be,_e,xe,ye,Se,Pe,Fe,Oe,Ge,Me,ke,Ee,we,Ie,Te,Ne,V,z,L,Le,je,B],styles:[`[_nghost-%COMP%]{display:block}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.form-grid--row-break[_ngcontent-%COMP%]{grid-column-start:1}.form-grid--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid--col-span.form-grid--col-span[_ngcontent-%COMP%]{width:auto}.form-grid--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.form-grid--col-span2.form-grid--col-span2[_ngcontent-%COMP%]{width:656px}.form-grid--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.form-grid--col-span3.form-grid--col-span3[_ngcontent-%COMP%]{width:992px}.form-grid[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.form-grid__comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none}forge-divider[_ngcontent-%COMP%]{margin:16px 0}.friends[_ngcontent-%COMP%]   .friend[_ngcontent-%COMP%]{padding-bottom:16px}.friends[_ngcontent-%COMP%]   .friend[_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]{width:320px}






/*# sourceMappingURL=personal.component-RGQH62CJ.css.map */`]})}}return n})();var Bt=[{path:"",component:He,canDeactivate:[n=>n.canDeactivate()],providers:[h],children:[{path:"address",component:Ke},{path:"personal",component:We},{path:"",redirectTo:"personal",pathMatch:"full"}]}];export{Bt as PROFILE_ROUTES};
//# sourceMappingURL=chunk-XMLZ5DPO.js.map
