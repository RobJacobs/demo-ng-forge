"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[556],{2616:(O,x,l)=>{l.r(x),l.d(x,{QueryBuilderComponent:()=>B});var v=l(316),u=l(496),f=l(674),s=l(9879),p=l(123),d=l(7123),e=l(8559);const t=(a,m)=>({formGroup:a,index:m}),r=a=>({formGroup:a});function o(a,m){1&a&&e.eu8(0)}function i(a,m){if(1&a&&(e.j41(0,"div",4),e.DNE(1,o,1,0,"ng-container",8),e.k0s()),2&a){const n=m.$implicit,c=m.$index;e.XpG();const _=e.sdS(12);e.R7$(),e.Y8G("ngTemplateOutlet",_)("ngTemplateOutletContext",e.l_i(2,t,n,c))}}function h(a,m){1&a&&e.eu8(0)}function F(a,m){if(1&a&&e.DNE(0,h,1,0,"ng-container",8),2&a){const n=e.XpG().formGroup;e.XpG();const c=e.sdS(14);e.Y8G("ngTemplateOutlet",c)("ngTemplateOutletContext",e.eq3(2,r,n))}}function G(a,m){if(1&a&&(e.j41(0,"forge-option",18),e.EFF(1),e.k0s()),2&a){const n=m.$implicit;e.Y8G("value",n.value),e.R7$(),e.JRh(n.label)}}function g(a,m){if(1&a&&(e.j41(0,"div",19)(1,"forge-text-field",12),e.nrm(2,"input",25),e.j41(3,"label",26),e.EFF(4,"Minimum"),e.k0s(),e.j41(5,"span",16),e.EFF(6,"A minimum value is required"),e.k0s()(),e.j41(7,"forge-text-field",12),e.nrm(8,"input",27),e.j41(9,"label",26),e.EFF(10,"Maximum"),e.k0s(),e.j41(11,"span",16),e.EFF(12),e.k0s()()()),2&a){const n=e.XpG(),c=n.formGroup,_=n.index;e.R7$(),e.Y8G("appFormControlInvalid",c.controls.minValue),e.R7$(),e.FS9("id","app--query-builder--filter-min-"+_),e.R7$(),e.FS9("for","app--query-builder--filter-min-"+_),e.R7$(4),e.Y8G("appFormControlInvalid",c.controls.maxValue),e.R7$(),e.FS9("id","app--query-builder--filter-max-"+_),e.R7$(),e.FS9("for","app--query-builder--filter-max-"+_),e.R7$(3),e.SpI(" ",c.controls.maxValue.errors.required?"A maximum value is required":c.controls.maxValue.errors.range?"Max value must be greater or equal to min value":""," ")}}function C(a,m){if(1&a&&(e.j41(0,"forge-text-field",12),e.nrm(1,"input",28),e.j41(2,"label",26),e.EFF(3,"Value"),e.k0s(),e.j41(4,"span",16),e.EFF(5,"A value is required"),e.k0s()()),2&a){const n=e.XpG(),_=n.index;e.Y8G("appFormControlInvalid",n.formGroup.controls.value),e.R7$(),e.FS9("id","app--query-builder--filter-value-"+_),e.R7$(),e.FS9("for","app--query-builder--filter-value-"+_)}}function y(a,m){1&a&&e.eu8(0)}function M(a,m){1&a&&e.eu8(0)}function T(a,m){if(1&a&&(e.DNE(0,y,1,0,"ng-container",8),e.j41(1,"div",4),e.DNE(2,M,1,0,"ng-container",8),e.k0s()),2&a){const n=m.$implicit,c=m.$index;e.XpG(3);const _=e.sdS(12),E=e.sdS(14);e.Y8G("ngTemplateOutlet",E)("ngTemplateOutletContext",e.eq3(4,r,n)),e.R7$(2),e.Y8G("ngTemplateOutlet",_)("ngTemplateOutletContext",e.l_i(6,t,n,c))}}function A(a,m){if(1&a&&(e.qex(0,3),e.Z7z(1,T,3,9,null,null,e.Vm6),e.bVm()),2&a){const n=e.XpG().formGroup;e.R7$(),e.Dyx(n.controls.filters.controls)}}function b(a,m){if(1&a){const n=e.RV6();e.DNE(0,F,1,4,"ng-container"),e.qex(1,9),e.j41(2,"div",10)(3,"forge-autocomplete",11)(4,"forge-text-field",12),e.nrm(5,"input",13),e.j41(6,"label",14),e.EFF(7,"Property"),e.k0s(),e.nrm(8,"forge-icon",15),e.j41(9,"span",16),e.EFF(10,"A property is required"),e.k0s()()(),e.j41(11,"forge-select",17),e.Z7z(12,G,2,2,"forge-option",18,e.Vm6),e.j41(14,"span",16),e.EFF(15,"An operator is required"),e.k0s()(),e.DNE(16,g,13,7,"div",19)(17,C,6,3),e.j41(18,"div",20)(19,"forge-menu",21),e.bIt("forge-menu-select",function(_){const E=e.eBV(n).formGroup,P=e.XpG();return e.Njj(P.onAddFilter(E,_.detail.value))}),e.j41(20,"forge-icon-button")(21,"button",22),e.nrm(22,"forge-icon",7),e.k0s()()(),e.j41(23,"forge-icon-button")(24,"button",23),e.bIt("click",function(){const _=e.eBV(n).formGroup,E=e.XpG();return e.Njj(E.onDeleteFilter(_))}),e.nrm(25,"forge-icon",24),e.k0s()()()(),e.DNE(26,A,3,0,"ng-container",3),e.bVm()}if(2&a){const n=m.formGroup,c=m.index,_=e.XpG();e.vxM(0,c>0?0:-1),e.R7$(),e.Y8G("formGroup",n),e.R7$(2),e.Y8G("filter",_.propertyFilter),e.R7$(),e.Y8G("appFormControlInvalid",n.controls.property),e.R7$(),e.FS9("id","app--query-builder--filter-property"+c),e.R7$(),e.FS9("for","app--query-builder--filter-property"+c),e.R7$(5),e.Y8G("appFormControlInvalid",n.controls.operator),e.R7$(),e.Dyx(_.operatorOptions),e.R7$(4),e.vxM(16,6===n.controls.operator.value?16:17),e.R7$(3),e.Y8G("options",_.filterOptions),e.R7$(7),e.vxM(26,null!=n.controls.filters.controls&&n.controls.filters.controls.length?26:-1)}}function D(a,m){if(1&a&&(e.j41(0,"forge-option",18),e.EFF(1),e.k0s()),2&a){const n=m.$implicit;e.Y8G("value",n.value),e.R7$(),e.JRh(n.label)}}function R(a,m){if(1&a&&(e.j41(0,"div",29)(1,"forge-select",30),e.Z7z(2,D,2,2,"forge-option",18,e.Vm6),e.k0s()()),2&a){const n=m.formGroup,c=e.XpG();e.R7$(),e.Y8G("formControl",n.get("condition")),e.R7$(),e.Dyx(c.conditionOptions)}}let B=(()=>{class a{constructor(){this.formGroup=new u.gE({filters:new u.Yp([this.buildFilterFormGroup()])}),this.conditionOptions=[{value:"and",label:"And"},{value:"or",label:"Or"}],this.propertyOptions=[{value:"firstName",label:"First name"},{value:"lastName",label:"Last name"},{value:"dateOfBirth",label:"Date of birth"},{value:"gender",label:"Gender"},{value:"occupation",label:"Occupation"}],this.operatorOptions=[{value:0,label:"Equal"},{value:1,label:"Not equal"},{value:2,label:"Greater than"},{value:3,label:"Less than"},{value:4,label:"Greater than equal to"},{value:5,label:"Less than equal to"},{value:6,label:"Range"},{value:7,label:"Contains"},{value:8,label:"Not contains"},{value:9,label:"Empty"}],this.filterOptions=[{value:"condition",label:"Add condition"},{value:"group",label:"Add group"}],this.propertyFilter=n=>p.A.filterData(this.propertyOptions,[{key:"label",value:n}])}onAddFilter(n,c){if(n===this.formGroup)this.formGroup.controls.filters.push(this.buildFilterFormGroup());else switch(c){case"condition":{const _=n.parent.controls.indexOf(n)+1;n.parent.insert(_,this.buildFilterFormGroup());break}case"group":n.get("filters").push(this.buildFilterFormGroup())}}onDeleteFilter(n){const c=n.parent,_=c.controls.indexOf(n);-1!==_&&c.removeAt(_)}buildFilterFormGroup(n){return new u.gE({property:new u.MJ(n?.property,{validators:[u.k0.required]}),condition:new u.MJ(n?.condition||"and",{validators:[u.k0.required]}),operator:new u.MJ(n?.operator,{validators:[u.k0.required]}),value:new u.MJ(n?.value,{validators:[this.validateFilterValue("value")]}),minValue:new u.MJ(n?.minValue,{validators:[this.validateFilterValue("minValue")]}),maxValue:new u.MJ(n?.minValue,{validators:[this.validateFilterValue("maxValue")]}),filters:new u.Yp([])})}validateFilterValue(n){return c=>{const _=c.parent;if(!_)return null;const E=_.value.operator;if(!(0,f.O9)(E))return null;if(6===E){if("value"===n)return null;if(!(0,f.O9)(c.value)||!c.value.toString().length)return{required:!0};const P=_.value.minValue,I=_.value.maxValue;if("minValue"===n&&(0,f.O9)(I)&&P.localeCompare(I,navigator.language,{numeric:!0,ignorePunctuation:!0})<1&&_.get("maxValue")?.setErrors(null),"maxValue"===n){if(!(0,f.O9)(P))return null;if(P.localeCompare(I,navigator.language,{numeric:!0,ignorePunctuation:!0})>0)return{range:!0}}return null}return"minValue"===n||"maxValue"===n||(0,f.O9)(c.value)&&c.value.toString().length?null:{required:!0}}}static#e=this.\u0275fac=function(c){return new(c||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-query-builder"]],standalone:!0,features:[e.aNF],decls:15,vars:4,consts:[["filterFormTemplate",""],["filterHeaderTemplate",""],["novalidate","","autocomplete","off",3,"formGroup"],["formArrayName","filters"],[1,"filter__group"],[1,"filter__group__add"],["type","button",3,"click"],["name","add_circle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroup"],[1,"filter__form"],["formControlName","property",3,"filter"],["required","",3,"appFormControlInvalid"],["type","text",3,"id"],[3,"for"],["slot","trailing","name","arrow_drop_down",1,"forge-dropdown-icon"],["slot","helper-text",1,"app-form-control-invalid"],["formControlName","operator","label","Operator","required","",3,"appFormControlInvalid"],[3,"value"],[1,"filter__form__range"],[1,"filter__form__action"],[3,"forge-menu-select","options"],["type","button","aria-label","Add filter"],["type","button","aria-label","Delete filter",3,"click"],["name","delete"],["type","text","formControlName","minValue",3,"id"],["slot","label",3,"for"],["type","text","formControlName","maxValue",3,"id"],["type","text","formControlName","value",3,"id"],[1,"filter__header"],[1,"filter__header__condition",3,"formControl"]],template:function(c,_){if(1&c){const E=e.RV6();e.j41(0,"form",2)(1,"div",3),e.Z7z(2,i,2,5,"div",4,e.Vm6),e.k0s(),e.j41(4,"forge-button",5)(5,"button",6),e.bIt("click",function(){return e.eBV(E),e.Njj(_.onAddFilter(_.formGroup,"condition"))}),e.nrm(6,"forge-icon",7),e.EFF(7," Add a new condition "),e.k0s()(),e.j41(8,"p"),e.EFF(9),e.nI1(10,"json"),e.k0s()(),e.DNE(11,b,27,10,"ng-template",null,0,e.C5r)(13,R,4,1,"ng-template",null,1,e.C5r)}2&c&&(e.Y8G("formGroup",_.formGroup),e.R7$(2),e.Dyx(_.formGroup.controls.filters.controls),e.R7$(7),e.JRh(e.bMT(10,2,_.formGroup.getRawValue())))},dependencies:[v.MD,v.T3,v.TG,u.X1,u.qT,u.me,u.BC,u.cb,u.YS,u.l_,u.j4,u.JD,u.v8,s.UHk,s.vP6,s.sHR,s.ei2,s.Qpp,s.nVi,s.xBz,s.RlV,s.vzf,s.HKN,s.ZuA,s.x6t,s.POd,s.KAo,s.Je0,s.wBS,s.xYY,s.LHr,d.W],styles:["\n\n\n\n\n[_nghost-%COMP%]{display:block;padding:24px}.filter__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;margin:8px 0}.filter__header__condition[_ngcontent-%COMP%]{width:96px;background-color:#eee;border-radius:4px}.filter__header__condition[_ngcontent-%COMP%]::part(container):before{border:none}.filter__header__condition[_ngcontent-%COMP%]::part(text){padding:0 16px}.filter__form[_ngcontent-%COMP%]{display:grid;grid-gap:0 16px;grid-template-columns:216px 168px minmax(400px,1fr) 96px;align-items:start}.filter__form__range[_ngcontent-%COMP%]{display:grid;grid-gap:0 16px;grid-template-columns:minmax(192px,1fr) minmax(192px,1fr);align-items:start}.filter__form__action[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.filter__group[_ngcontent-%COMP%]{background-color:#fff;background-color:var(--mdc-theme-surface, #ffffff);border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);border:1px solid var(--forge-theme-border-color);padding:16px;border-left:4px solid #3f51b5;margin:16px 0}.filter__group[_ngcontent-%COMP%]   .filter__group[_ngcontent-%COMP%]{border:1px dashed #9e9e9e;margin:8px 0;padding:8px 16px}.filter__group[_ngcontent-%COMP%]:first-of-type{margin-top:0}.filter__group__add[_ngcontent-%COMP%]{border:1px dashed #9e9e9e;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);background-color:#f5f5f5;width:100%}.filter__group__add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;padding:16px;height:auto}.app-form-control-invalid[_ngcontent-%COMP%]{display:none}.app-form-control-invalid[invalid][_ngcontent-%COMP%], .app-form-control-invalid[invalid][_ngcontent-%COMP%]   .app-form-control-invalid[_ngcontent-%COMP%]{display:block}"]})}return a})()},123:(O,x,l)=>{l.d(x,{A:()=>p});var v=l(316),u=l(6443),f=l(1604),s=l(674);class p{static sortData(e,t,r,o){return e&&e.length?(r=r||"string","DESC"!==o&&(o="ASC"),e.slice().sort((i,h)=>(i=(0,f.De)(i,t),h=(0,f.De)(h,t),"DESC"===o?this.comparator(h,i,r):this.comparator(i,h,r)))):e}static groupData(e,t){return(0,s.cy)(e)&&e.length&&t?.length?e.reduce((r,o)=>{const i=o[t];return r[i]||(r[i]=[]),r[i].push(o),r},{}):e}static filterData(e,t){if(!((0,s.cy)(e)&&e.length&&(0,s.cy)(t)&&t.length))return e;t=t.map(o=>{if((0,s.Kg)(o.value)&&o.value.length){let i;if("<>"===o.value.substring(0,2)){if(2===o.value.length)return o.value="",o;i=o.value.substring(0,2),o.value=o.value.substring(2)}else if("<"===o.value.substring(0,1)||">"===o.value.substring(0,1)){if(1===o.value.length)return o.value="",o;i=o.value.substring(0,1),o.value=o.value.substring(1)}i&&Object.defineProperty(o,"operator",{value:i})}return o.value=(""+o.value).toLowerCase(),o});const r=o=>t.every(i=>{if(!i.value.length)return!0;const h=(""+(0,f.De)(o,i.key)).toLowerCase();if(!h.length)return!1;if(i.strict)return h===i.value;switch(i.operator){case"<>":return 0!==this.comparator(h,i.value,i.type);case">":return this.comparator(h,i.value,i.type)>0;case"<":return this.comparator(h,i.value,i.type)<0;default:return h.indexOf(i.value)>-1}});return e.filter(o=>r(o))}static comparator(e,t,r="string"){if(e==t)return 0;if(!(0,s.O9)(e))return-1;if(!(0,s.O9)(t))return 1;switch(r){case"boolean":return e?-1:1;case"date":if(e=new Date(e).getTime(),isNaN(e))return-1;if(t=new Date(t).getTime(),isNaN(t))return 1;break;case"number":if(e=parseFloat(e),isNaN(e))return-1;if(t=parseFloat(t),isNaN(t))return 1;break;default:return isNaN(parseFloat(e))||isNaN(parseFloat(t))?(""+e).localeCompare(""+t):(""+e).localeCompare(""+t,navigator.language,{numeric:!0})}return e<t?-1:e>t?1:0}static navigateBack(e,t,r){1===e.getState()?.navigationId?t.navigate(r):e.back()}static elementId(e){return e+Math.random().toString(36).replace(/[^a-z]+/g,"")}static formatDate(e,t="MM/dd/yyyy"){return(0,s.O9)(e)?(0,v.Yq)(e,t,navigator.language):""}static formatNumber(e,t="1.2-2"){return(0,v.ZV)(e,navigator.language,t)}static uniqueId(){return Math.random().toString(36).substring(2)}static parseQueryStringParameters(){const e={},t=window.location.href.indexOf("?");if(-1!==t){const r=new u.Nl({fromString:window.location.href.substring(t)});r.keys().forEach(o=>{const i=r.getAll(o);i.length&&Object.defineProperty(e,o.toLowerCase(),{value:1===i.length?i[0]:i,enumerable:!0,writable:!0})})}return e}static reduceObject(e){const t={};return Object.keys(e).forEach(r=>{(0,s.O9)(e[r])&&((0,s.cy)(e[r])?e[r].length&&(t[r]=e[r]):(e[r]+"").trim().length&&(t[r]="string"==typeof e[r]?e[r].trim():e[r]))}),t}}},8537:(O,x,l)=>{l.d(x,{R:()=>o});var v=l(2645),u=l(3942),f=l(1365),s=l(8830),p=l(1530),d=l(8067);const e=["addListener","removeListener"],t=["addEventListener","removeEventListener"],r=["on","off"];function o(g,C,y,M){if((0,p.T)(y)&&(M=y,y=void 0),M)return o(g,C,y).pipe((0,d.I)(M));const[T,A]=function G(g){return(0,p.T)(g.addEventListener)&&(0,p.T)(g.removeEventListener)}(g)?t.map(b=>D=>g[b](C,D,y)):function h(g){return(0,p.T)(g.addListener)&&(0,p.T)(g.removeListener)}(g)?e.map(i(g,C)):function F(g){return(0,p.T)(g.on)&&(0,p.T)(g.off)}(g)?r.map(i(g,C)):[];if(!T&&(0,s.X)(g))return(0,f.Z)(b=>o(b,C,y))((0,v.Tg)(g));if(!T)throw new TypeError("Invalid event target");return new u.c(b=>{const D=(...R)=>b.next(1<R.length?R:R[0]);return T(D),()=>A(D)})}function i(g,C){return y=>M=>g[y](C,M)}},4581:(O,x,l)=>{l.d(x,{O:()=>p});var v=l(3942),u=l(8473),f=l(9397);function p(d=0,e,t=u.b){let r=-1;return null!=e&&((0,f.m)(e)?t=e:r=e),new v.c(o=>{let i=function s(d){return d instanceof Date&&!isNaN(d)}(d)?+d-t.now():d;i<0&&(i=0);let h=0;return t.schedule(function(){o.closed||(o.next(h++),0<=r?this.schedule(void 0,r):o.complete())},i)})}},1817:(O,x,l)=>{l.d(x,{F:()=>s});var v=l(1440),u=l(819),f=l(1687);function s(d,e=v.D){return d=d??p,(0,u.N)((t,r)=>{let o,i=!0;t.subscribe((0,f._)(r,h=>{const F=e(h);(i||!d(o,F))&&(i=!1,o=F,r.next(h))}))})}function p(d,e){return d===e}},428:(O,x,l)=>{l.d(x,{R:()=>p});var v=l(7092);class u extends v.yU{constructor(e,t){super()}schedule(e,t=0){return this}}const f={setInterval(d,e,...t){const{delegate:r}=f;return r?.setInterval?r.setInterval(d,e,...t):setInterval(d,e,...t)},clearInterval(d){const{delegate:e}=f;return(e?.clearInterval||clearInterval)(d)},delegate:void 0};var s=l(967);class p extends u{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return f.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&f.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o,r=!1;try{this.work(e)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,s.o)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}},9576:(O,x,l)=>{l.d(x,{q:()=>f});var v=l(5152);class u{constructor(p,d=u.now){this.schedulerActionCtor=p,this.now=d}schedule(p,d=0,e){return new this.schedulerActionCtor(this,p).schedule(e,d)}}u.now=v.U.now;class f extends u{constructor(p,d=u.now){super(p,d),this.actions=[],this._active=!1}flush(p){const{actions:d}=this;if(this._active)return void d.push(p);let e;this._active=!0;do{if(e=p.execute(p.state,p.delay))break}while(p=d.shift());if(this._active=!1,e){for(;p=d.shift();)p.unsubscribe();throw e}}}},8473:(O,x,l)=>{l.d(x,{E:()=>f,b:()=>s});var v=l(428);const f=new(l(9576).q)(v.R),s=f},5152:(O,x,l)=>{l.d(x,{U:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}}}]);
//# sourceMappingURL=556.ea61ad88c291ed20.js.map