import{b as Xr,j as Uo,s as Zn}from"./chunk-MQ3GSWWI.js";import{a as B}from"./chunk-3RMJ5DR6.js";import{Bb as Xt,Cc as No,Dc as Io,F as ot,I as yt,L as _o,Ob as Co,Pb as Mo,Sc as Ro,Tc as Oo,Uc as Eo,dd as $o,e as vo,ed as Fo,fd as Po,gd as zo,k as Ee,kb as bo,pb as wo,pd as Ho,qd as Lo,uc as ko,vc as Ao,wc as So,xc as Do,zb as To}from"./chunk-AWYXD4HD.js";import{Aa as Lr,C as fo,Fb as Re,G as zr,Gb as tr,Lb as le,Mb as ce,Nb as fe,Pb as at,Qb as Wn,Tb as mo,Ub as go,Vb as xo,Wb as yo,Xb as Oe,Ya as rt,_ as ho,c as co,ea as Hr,ja as Ie,mb as Ke,ob as st,pb as po,sb as Ur,wb as j,xb as J,yb as jt,z as Ut}from"./chunk-CFL2K3XP.js";import{a as Lt,b as Qt,h as Gt,i as Pr,j as Ne}from"./chunk-O62F43XY.js";var vt="app-chart",Pl={CHART_PREFIX:vt,CHART_ROOT:`${vt}__root`,CHART_YAXIS:`${vt}__yaxis`,CHART_XAXIS:`${vt}__xaxis`,CHART_NODE:`${vt}__node`,CHART_TEXT:`${vt}__text`,CHART_LEGEND:`${vt}__legend`,CHART_METER:`${vt}__meter`,CHART_POPOVER:`${vt}__popover`,CHART_CLIP:`${vt}__clip`,CHART_TEXT_LABEL:`${vt}__text-label`,CHART_TEXT_VALUE:`${vt}__text-value`,LEGEND_TEXT:`${vt}__legend-text`,LEGEND_TEXT_LABEL:`${vt}__legend-text-label`,LEGEND_TEXT_VALUE:`${vt}__legend-text-value`},zl={TRANSITION_DURATION:500},Hl={FONT_FAMILY:"Roboto",FONT_SIZE_SMALL:"10px",FONT_SIZE:"16px"},Ll={amber600:"#ffb300",cyan400:"#26c6da",purple300:"#ba68c8",indigoA200:"#536dfe",green400:"#66bb6a",deepOrangeA200:"#ff6e40",amberA200:"#ffd740",purple200:"#ce93d8",indigo200:"#9fa8da",lightBlue200:"#81d4fa",green200:"#a5d6a7",lime200:"#e6ee9c",amber200:"#ffe082",deepOrange200:"#ffab91",grey400:"#bdbdbd"},Ul={textHigh:"var(--forge-theme-text-high, rgba(0, 0, 0, 0.87))",textMedium:"var(--forge-theme-text-medium, rgba(0, 0, 0, 0.6))",textInverse:"var(--forge-theme-on-surface-inverse, #ffffff)",outline:"var(--forge-theme-outline, #e0e0e0)",outlineMedium:"var(--forge-theme-outline-medium, #757575)",surface:"var(--forge-theme-surface, #ffffff)",surfaceDim:"var(--forge-theme-surface-dim, #f5f5f5)"},_={classes:Pl,numbers:zl,strings:Hl,chartPalette:Ll,chartTheme:Ul};function he(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qn(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pe(t){let e,r,n;t.length!==2?(e=he,r=(s,u)=>he(t(s),u),n=(s,u)=>t(s)-u):(e=t===he||t===Qn?t:Xl,r=t,n=t);function a(s,u,l=0,f=s.length){if(l<f){if(e(u,u)!==0)return f;do{let h=l+f>>>1;r(s[h],u)<0?l=h+1:f=h}while(l<f)}return l}function o(s,u,l=0,f=s.length){if(l<f){if(e(u,u)!==0)return f;do{let h=l+f>>>1;r(s[h],u)<=0?l=h+1:f=h}while(l<f)}return l}function i(s,u,l=0,f=s.length){let h=a(s,u,l,f-1);return h>l&&n(s[h-1],u)>-n(s[h],u)?h-1:h}return{left:a,center:i,right:o}}function Xl(){return 0}function Gn(t){return t===null?NaN:+t}var Xo=pe(he),Yo=Xo.right,Yl=Xo.left,Vl=pe(Gn).center,jn=Yo;function me(t,e){let r,n;if(e===void 0)for(let a of t)a!=null&&(r===void 0?a>=a&&(r=n=a):(r>a&&(r=a),n<a&&(n=a)));else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&(r===void 0?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)))}return[r,n]}var $e=class extends Map{constructor(e,r=Wl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let[n,a]of e)this.set(n,a)}get(e){return super.get(Vo(this,e))}has(e){return super.has(Vo(this,e))}set(e,r){return super.set(ql(this,e),r)}delete(e){return super.delete(Bl(this,e))}};function Vo({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):r}function ql({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Bl({_intern:t,_key:e},r){let n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Wl(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Zl=Math.sqrt(50),Ql=Math.sqrt(10),Gl=Math.sqrt(2);function Yr(t,e,r){let n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),o=n/Math.pow(10,a),i=o>=Zl?10:o>=Ql?5:o>=Gl?2:1,s,u,l;return a<0?(l=Math.pow(10,-a)/i,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,a)*i,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=r&&r<2?Yr(t,e,r*2):[s,u,l]}function Vr(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[a,o,i]=n?Yr(e,t,r):Yr(t,e,r);if(!(o>=a))return[];let s=o-a+1,u=new Array(s);if(n)if(i<0)for(let l=0;l<s;++l)u[l]=(o-l)/-i;else for(let l=0;l<s;++l)u[l]=(o-l)*i;else if(i<0)for(let l=0;l<s;++l)u[l]=(a+l)/-i;else for(let l=0;l<s;++l)u[l]=(a+l)*i;return u}function er(t,e,r){return e=+e,t=+t,r=+r,Yr(t,e,r)[2]}function Fe(t,e,r){e=+e,t=+t,r=+r;let n=e<t,a=n?er(e,t,r):er(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function qr(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(a);++n<a;)o[n]=t+n*r;return o}function qo(t){return t}var Br=1,Jn=2,Kn=3,rr=4,Bo=1e-6;function jl(t){return"translate("+t+",0)"}function Jl(t){return"translate(0,"+t+")"}function Kl(t){return e=>+t(e)}function tc(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function ec(){return!this.__axis}function ta(t,e){var r=[],n=null,a=null,o=6,i=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Br||t===rr?-1:1,f=t===rr||t===Jn?"x":"y",h=t===Br||t===Kn?jl:Jl;function c(p){var x=n??(e.ticks?e.ticks.apply(e,r):e.domain()),y=a??(e.tickFormat?e.tickFormat.apply(e,r):qo),d=Math.max(o,0)+s,g=e.range(),M=+g[0]+u,k=+g[g.length-1]+u,w=(e.bandwidth?tc:Kl)(e.copy(),u),S=p.selection?p.selection():p,T=S.selectAll(".domain").data([null]),P=S.selectAll(".tick").data(x,e).order(),E=P.exit(),N=P.enter().append("g").attr("class","tick"),R=P.select("line"),$=P.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(N),R=R.merge(N.append("line").attr("stroke","currentColor").attr(f+"2",l*o)),$=$.merge(N.append("text").attr("fill","currentColor").attr(f,l*d).attr("dy",t===Br?"0em":t===Kn?"0.71em":"0.32em")),p!==S&&(T=T.transition(p),P=P.transition(p),R=R.transition(p),$=$.transition(p),E=E.transition(p).attr("opacity",Bo).attr("transform",function(v){return isFinite(v=w(v))?h(v+u):this.getAttribute("transform")}),N.attr("opacity",Bo).attr("transform",function(v){var C=this.parentNode.__axis;return h((C&&isFinite(C=C(v))?C:w(v))+u)})),E.remove(),T.attr("d",t===rr||t===Jn?i?"M"+l*i+","+M+"H"+u+"V"+k+"H"+l*i:"M"+u+","+M+"V"+k:i?"M"+M+","+l*i+"V"+u+"H"+k+"V"+l*i:"M"+M+","+u+"H"+k),P.attr("opacity",1).attr("transform",function(v){return h(w(v)+u)}),R.attr(f+"2",l*o),$.attr(f,l*d).text(y),S.filter(ec).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Jn?"start":t===rr?"end":"middle"),S.each(function(){this.__axis=w})}return c.scale=function(p){return arguments.length?(e=p,c):e},c.ticks=function(){return r=Array.from(arguments),c},c.tickArguments=function(p){return arguments.length?(r=p==null?[]:Array.from(p),c):r.slice()},c.tickValues=function(p){return arguments.length?(n=p==null?null:Array.from(p),c):n&&n.slice()},c.tickFormat=function(p){return arguments.length?(a=p,c):a},c.tickSize=function(p){return arguments.length?(o=i=+p,c):o},c.tickSizeInner=function(p){return arguments.length?(o=+p,c):o},c.tickSizeOuter=function(p){return arguments.length?(i=+p,c):i},c.tickPadding=function(p){return arguments.length?(s=+p,c):s},c.offset=function(p){return arguments.length?(u=+p,c):u},c}function ea(t){return ta(Br,t)}function nr(t){return ta(Kn,t)}function ar(t){return ta(rr,t)}var rc={value:()=>{}};function Zo(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Wr(r)}function Wr(t){this._=t}function nc(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Wr.prototype=Zo.prototype={constructor:Wr,on:function(t,e){var r=this._,n=nc(t+"",r),a,o=-1,i=n.length;if(arguments.length<2){for(;++o<i;)if((a=(t=n[o]).type)&&(a=ac(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<i;)if(a=(t=n[o]).type)r[a]=Wo(r[a],t.name,e);else if(e==null)for(a in r)r[a]=Wo(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Wr(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,o;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,a=o.length;n<a;++n)o[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,o=n.length;a<o;++a)n[a].value.apply(e,r)}};function ac(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function Wo(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=rc,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var or=Zo;var Zr="http://www.w3.org/1999/xhtml",ra={svg:"http://www.w3.org/2000/svg",xhtml:Zr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),ra.hasOwnProperty(e)?{space:ra[e],local:t}:t}function oc(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Zr&&e.documentElement.namespaceURI===Zr?e.createElement(t):e.createElementNS(r,t)}}function ic(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Qr(t){var e=Yt(t);return(e.local?ic:oc)(e)}function sc(){}function de(t){return t==null?sc:function(){return this.querySelector(t)}}function Qo(t){typeof t!="function"&&(t=de(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=new Array(i),u,l,f=0;f<i;++f)(u=o[f])&&(l=t.call(u,u.__data__,f,o))&&("__data__"in u&&(l.__data__=u.__data__),s[f]=l);return new nt(n,this._parents)}function na(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function uc(){return[]}function ir(t){return t==null?uc:function(){return this.querySelectorAll(t)}}function lc(t){return function(){return na(t.apply(this,arguments))}}function Go(t){typeof t=="function"?t=lc(t):t=ir(t);for(var e=this._groups,r=e.length,n=[],a=[],o=0;o<r;++o)for(var i=e[o],s=i.length,u,l=0;l<s;++l)(u=i[l])&&(n.push(t.call(u,u.__data__,l,i)),a.push(u));return new nt(n,a)}function sr(t){return function(){return this.matches(t)}}function Gr(t){return function(e){return e.matches(t)}}var cc=Array.prototype.find;function fc(t){return function(){return cc.call(this.children,t)}}function hc(){return this.firstElementChild}function jo(t){return this.select(t==null?hc:fc(typeof t=="function"?t:Gr(t)))}var pc=Array.prototype.filter;function mc(){return Array.from(this.children)}function dc(t){return function(){return pc.call(this.children,t)}}function Jo(t){return this.selectAll(t==null?mc:dc(typeof t=="function"?t:Gr(t)))}function Ko(t){typeof t!="function"&&(t=sr(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],u,l=0;l<i;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&s.push(u);return new nt(n,this._parents)}function jr(t){return new Array(t.length)}function ti(){return new nt(this._enter||this._groups.map(jr),this._parents)}function ur(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ur.prototype={constructor:ur,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ei(t){return function(){return t}}function gc(t,e,r,n,a,o){for(var i=0,s,u=e.length,l=o.length;i<l;++i)(s=e[i])?(s.__data__=o[i],n[i]=s):r[i]=new ur(t,o[i]);for(;i<u;++i)(s=e[i])&&(a[i]=s)}function xc(t,e,r,n,a,o,i){var s,u,l=new Map,f=e.length,h=o.length,c=new Array(f),p;for(s=0;s<f;++s)(u=e[s])&&(c[s]=p=i.call(u,u.__data__,s,e)+"",l.has(p)?a[s]=u:l.set(p,u));for(s=0;s<h;++s)p=i.call(t,o[s],s,o)+"",(u=l.get(p))?(n[s]=u,u.__data__=o[s],l.delete(p)):r[s]=new ur(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&l.get(c[s])===u&&(a[s]=u)}function yc(t){return t.__data__}function ri(t,e){if(!arguments.length)return Array.from(this,yc);var r=e?xc:gc,n=this._parents,a=this._groups;typeof t!="function"&&(t=ei(t));for(var o=a.length,i=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var f=n[l],h=a[l],c=h.length,p=vc(t.call(f,f&&f.__data__,l,n)),x=p.length,y=s[l]=new Array(x),d=i[l]=new Array(x),g=u[l]=new Array(c);r(f,h,y,d,g,p,e);for(var M=0,k=0,w,S;M<x;++M)if(w=y[M]){for(M>=k&&(k=M+1);!(S=d[k])&&++k<x;);w._next=S||null}}return i=new nt(i,n),i._enter=s,i._exit=u,i}function vc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ni(){return new nt(this._exit||this._groups.map(jr),this._parents)}function ai(t,e,r){var n=this.enter(),a=this,o=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?o.remove():r(o),n&&a?n.merge(a).order():a}function oi(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,o=n.length,i=Math.min(a,o),s=new Array(a),u=0;u<i;++u)for(var l=r[u],f=n[u],h=l.length,c=s[u]=new Array(h),p,x=0;x<h;++x)(p=l[x]||f[x])&&(c[x]=p);for(;u<a;++u)s[u]=r[u];return new nt(s,this._parents)}function ii(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,o=n[a],i;--a>=0;)(i=n[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function si(t){t||(t=_c);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o){for(var i=r[o],s=i.length,u=a[o]=new Array(s),l,f=0;f<s;++f)(l=i[f])&&(u[f]=l);u.sort(e)}return new nt(a,this._parents).order()}function _c(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ui(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function li(){return Array.from(this)}function ci(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length;a<o;++a){var i=n[a];if(i)return i}return null}function fi(){let t=0;for(let e of this)++t;return t}function hi(){return!this.node()}function pi(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],o=0,i=a.length,s;o<i;++o)(s=a[o])&&t.call(s,s.__data__,o,a);return this}function bc(t){return function(){this.removeAttribute(t)}}function wc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Tc(t,e){return function(){this.setAttribute(t,e)}}function Cc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Mc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function kc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function mi(t,e){var r=Yt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?wc:bc:typeof e=="function"?r.local?kc:Mc:r.local?Cc:Tc)(r,e))}function Jr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ac(t){return function(){this.style.removeProperty(t)}}function Sc(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Dc(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function di(t,e,r){return arguments.length>1?this.each((e==null?Ac:typeof e=="function"?Dc:Sc)(t,e,r??"")):Jt(this.node(),t)}function Jt(t,e){return t.style.getPropertyValue(e)||Jr(t).getComputedStyle(t,null).getPropertyValue(e)}function Nc(t){return function(){delete this[t]}}function Ic(t,e){return function(){this[t]=e}}function Rc(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function gi(t,e){return arguments.length>1?this.each((e==null?Nc:typeof e=="function"?Rc:Ic)(t,e)):this.node()[t]}function xi(t){return t.trim().split(/^|\s+/)}function aa(t){return t.classList||new yi(t)}function yi(t){this._node=t,this._names=xi(t.getAttribute("class")||"")}yi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function vi(t,e){for(var r=aa(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function _i(t,e){for(var r=aa(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function Oc(t){return function(){vi(this,t)}}function Ec(t){return function(){_i(this,t)}}function $c(t,e){return function(){(e.apply(this,arguments)?vi:_i)(this,t)}}function bi(t,e){var r=xi(t+"");if(arguments.length<2){for(var n=aa(this.node()),a=-1,o=r.length;++a<o;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?$c:e?Oc:Ec)(r,e))}function Fc(){this.textContent=""}function Pc(t){return function(){this.textContent=t}}function zc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function wi(t){return arguments.length?this.each(t==null?Fc:(typeof t=="function"?zc:Pc)(t)):this.node().textContent}function Hc(){this.innerHTML=""}function Lc(t){return function(){this.innerHTML=t}}function Uc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ti(t){return arguments.length?this.each(t==null?Hc:(typeof t=="function"?Uc:Lc)(t)):this.node().innerHTML}function Xc(){this.nextSibling&&this.parentNode.appendChild(this)}function Ci(){return this.each(Xc)}function Yc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Mi(){return this.each(Yc)}function ki(t){var e=typeof t=="function"?t:Qr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Vc(){return null}function Ai(t,e){var r=typeof t=="function"?t:Qr(t),n=e==null?Vc:typeof e=="function"?e:de(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function qc(){var t=this.parentNode;t&&t.removeChild(this)}function Si(){return this.each(qc)}function Bc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Di(t){return this.select(t?Wc:Bc)}function Ni(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Zc(t){return function(e){t.call(this,e,this.__data__)}}function Qc(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Gc(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,o;r<a;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++n]=o;++n?e.length=n:delete this.__on}}}function jc(t,e,r){return function(){var n=this.__on,a,o=Zc(e);if(n){for(var i=0,s=n.length;i<s;++i)if((a=n[i]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=r),a.value=e;return}}this.addEventListener(t.type,o,r),a={type:t.type,name:t.name,value:e,listener:o,options:r},n?n.push(a):this.__on=[a]}}function Ii(t,e,r){var n=Qc(t+""),a,o=n.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,f;u<l;++u)for(a=0,f=s[u];a<o;++a)if((i=n[a]).type===f.type&&i.name===f.name)return f.value}return}for(s=e?jc:Gc,a=0;a<o;++a)this.each(s(n[a],e,r));return this}function Ri(t,e,r){var n=Jr(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Jc(t,e){return function(){return Ri(this,t,e)}}function Kc(t,e){return function(){return Ri(this,t,e.apply(this,arguments))}}function Oi(t,e){return this.each((typeof e=="function"?Kc:Jc)(t,e))}function*Ei(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length,i;a<o;++a)(i=n[a])&&(yield i)}var oa=[null];function nt(t,e){this._groups=t,this._parents=e}function $i(){return new nt([[document.documentElement]],oa)}function tf(){return this}nt.prototype=$i.prototype={constructor:nt,select:Qo,selectAll:Go,selectChild:jo,selectChildren:Jo,filter:Ko,data:ri,enter:ti,exit:ni,join:ai,merge:oi,selection:tf,order:ii,sort:si,call:ui,nodes:li,node:ci,size:fi,empty:hi,each:pi,attr:mi,style:di,property:gi,classed:bi,text:wi,html:Ti,raise:Ci,lower:Mi,append:ki,insert:Ai,remove:Si,clone:Di,datum:Ni,on:Ii,dispatch:Oi,[Symbol.iterator]:Ei};var Vt=$i;function Z(t){return typeof t=="string"?new nt([[document.querySelector(t)]],[document.documentElement]):new nt([[t]],oa)}function Fi(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qt(t,e){if(t=Fi(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}var Kr={capture:!0,passive:!1};function tn(t){t.preventDefault(),t.stopImmediatePropagation()}function ia(t){var e=t.document.documentElement,r=Z(t).on("dragstart.drag",tn,Kr);"onselectstart"in e?r.on("selectstart.drag",tn,Kr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function sa(t,e){var r=t.document.documentElement,n=Z(t).on("dragstart.drag",null);e&&(n.on("click.drag",tn,Kr),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function en(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ua(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function fr(){}var lr=.7,an=1/lr,Pe="\\s*([+-]?\\d+)\\s*",cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ef=/^#([0-9a-f]{3,8})$/,rf=new RegExp(`^rgb\\(${Pe},${Pe},${Pe}\\)$`),nf=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),af=new RegExp(`^rgba\\(${Pe},${Pe},${Pe},${cr}\\)$`),of=new RegExp(`^rgba\\(${$t},${$t},${$t},${cr}\\)$`),sf=new RegExp(`^hsl\\(${cr},${$t},${$t}\\)$`),uf=new RegExp(`^hsla\\(${cr},${$t},${$t},${cr}\\)$`),Pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};en(fr,Dt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zi,formatHex:zi,formatHex8:lf,formatHsl:cf,formatRgb:Hi,toString:Hi});function zi(){return this.rgb().formatHex()}function lf(){return this.rgb().formatHex8()}function cf(){return qi(this).formatHsl()}function Hi(){return this.rgb().formatRgb()}function Dt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=ef.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Li(e):r===3?new Ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?rn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?rn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=rf.exec(t))?new Ct(e[1],e[2],e[3],1):(e=nf.exec(t))?new Ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=af.exec(t))?rn(e[1],e[2],e[3],e[4]):(e=of.exec(t))?rn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=sf.exec(t))?Yi(e[1],e[2]/100,e[3]/100,1):(e=uf.exec(t))?Yi(e[1],e[2]/100,e[3]/100,e[4]):Pi.hasOwnProperty(t)?Li(Pi[t]):t==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Li(t){return new Ct(t>>16&255,t>>8&255,t&255,1)}function rn(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ct(t,e,r,n)}function ff(t){return t instanceof fr||(t=Dt(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function ze(t,e,r,n){return arguments.length===1?ff(t):new Ct(t,e,r,n??1)}function Ct(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}en(Ct,ze,ua(fr,{brighter(t){return t=t==null?an:Math.pow(an,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?lr:Math.pow(lr,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ct(xe(this.r),xe(this.g),xe(this.b),on(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ui,formatHex:Ui,formatHex8:hf,formatRgb:Xi,toString:Xi}));function Ui(){return`#${ge(this.r)}${ge(this.g)}${ge(this.b)}`}function hf(){return`#${ge(this.r)}${ge(this.g)}${ge(this.b)}${ge((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xi(){let t=on(this.opacity);return`${t===1?"rgb(":"rgba("}${xe(this.r)}, ${xe(this.g)}, ${xe(this.b)}${t===1?")":`, ${t})`}`}function on(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xe(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ge(t){return t=xe(t),(t<16?"0":"")+t.toString(16)}function Yi(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new St(t,e,r,n)}function qi(t){if(t instanceof St)return new St(t.h,t.s,t.l,t.opacity);if(t instanceof fr||(t=Dt(t)),!t)return new St;if(t instanceof St)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),o=Math.max(e,r,n),i=NaN,s=o-a,u=(o+a)/2;return s?(e===o?i=(r-n)/s+(r<n)*6:r===o?i=(n-e)/s+2:i=(e-r)/s+4,s/=u<.5?o+a:2-o-a,i*=60):s=u>0&&u<1?0:i,new St(i,s,u,t.opacity)}function Bi(t,e,r,n){return arguments.length===1?qi(t):new St(t,e,r,n??1)}function St(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}en(St,Bi,ua(fr,{brighter(t){return t=t==null?an:Math.pow(an,t),new St(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?lr:Math.pow(lr,t),new St(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Ct(la(t>=240?t-240:t+120,a,n),la(t,a,n),la(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new St(Vi(this.h),nn(this.s),nn(this.l),on(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=on(this.opacity);return`${t===1?"hsl(":"hsla("}${Vi(this.h)}, ${nn(this.s)*100}%, ${nn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Vi(t){return t=(t||0)%360,t<0?t+360:t}function nn(t){return Math.max(0,Math.min(1,t||0))}function la(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function ca(t,e,r,n,a){var o=t*t,i=o*t;return((1-3*t+3*o-i)*e+(4-6*o+3*i)*r+(1+3*t+3*o-3*i)*n+i*a)/6}function Wi(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),a=t[n],o=t[n+1],i=n>0?t[n-1]:2*a-o,s=n<e-1?t[n+2]:2*o-a;return ca((r-n/e)*e,i,a,o,s)}}function Zi(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),a=t[(n+e-1)%e],o=t[n%e],i=t[(n+1)%e],s=t[(n+2)%e];return ca((r-n/e)*e,a,o,i,s)}}var hr=t=>()=>t;function pf(t,e){return function(r){return t+r*e}}function mf(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Qi(t){return(t=+t)==1?sn:function(e,r){return r-e?mf(e,r,t):hr(isNaN(e)?r:e)}}function sn(t,e){var r=e-t;return r?pf(t,r):hr(isNaN(t)?e:t)}var ye=function t(e){var r=Qi(e);function n(a,o){var i=r((a=ze(a)).r,(o=ze(o)).r),s=r(a.g,o.g),u=r(a.b,o.b),l=sn(a.opacity,o.opacity);return function(f){return a.r=i(f),a.g=s(f),a.b=u(f),a.opacity=l(f),a+""}}return n.gamma=t,n}(1);function Gi(t){return function(e){var r=e.length,n=new Array(r),a=new Array(r),o=new Array(r),i,s;for(i=0;i<r;++i)s=ze(e[i]),n[i]=s.r||0,a[i]=s.g||0,o[i]=s.b||0;return n=t(n),a=t(a),o=t(o),s.opacity=1,function(u){return s.r=n(u),s.g=a(u),s.b=o(u),s+""}}}var df=Gi(Wi),gf=Gi(Zi);function ji(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(o){for(a=0;a<r;++a)n[a]=t[a]*(1-o)+e[a]*o;return n}}function Ji(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ki(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),o=new Array(r),i;for(i=0;i<n;++i)a[i]=Bt(t[i],e[i]);for(;i<r;++i)o[i]=e[i];return function(s){for(i=0;i<n;++i)o[i]=a[i](s);return o}}function ts(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function ct(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function es(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Bt(t[a],e[a]):n[a]=e[a];return function(o){for(a in r)n[a]=r[a](o);return n}}var ha=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fa=new RegExp(ha.source,"g");function xf(t){return function(){return t}}function yf(t){return function(e){return t(e)+""}}function pr(t,e){var r=ha.lastIndex=fa.lastIndex=0,n,a,o,i=-1,s=[],u=[];for(t=t+"",e=e+"";(n=ha.exec(t))&&(a=fa.exec(e));)(o=a.index)>r&&(o=e.slice(r,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(a=a[0])?s[i]?s[i]+=a:s[++i]=a:(s[++i]=null,u.push({i,x:ct(n,a)})),r=fa.lastIndex;return r<e.length&&(o=e.slice(r),s[i]?s[i]+=o:s[++i]=o),s.length<2?u[0]?yf(u[0].x):xf(e):(e=u.length,function(l){for(var f=0,h;f<e;++f)s[(h=u[f]).i]=h.x(l);return s.join("")})}function Bt(t,e){var r=typeof e,n;return e==null||r==="boolean"?hr(e):(r==="number"?ct:r==="string"?(n=Dt(e))?(e=n,ye):pr:e instanceof Dt?ye:e instanceof Date?ts:Ji(e)?ji:Array.isArray(e)?Ki:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?es:ct)(t,e)}function pa(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var rs=180/Math.PI,un={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ma(t,e,r,n,a,o){var i,s,u;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,u/=s),t*n<e*r&&(t=-t,e=-e,u=-u,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(e,t)*rs,skewX:Math.atan(u)*rs,scaleX:i,scaleY:s}}var ln;function ns(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?un:ma(e.a,e.b,e.c,e.d,e.e,e.f)}function as(t){return t==null?un:(ln||(ln=document.createElementNS("http://www.w3.org/2000/svg","g")),ln.setAttribute("transform",t),(t=ln.transform.baseVal.consolidate())?(t=t.matrix,ma(t.a,t.b,t.c,t.d,t.e,t.f)):un)}function os(t,e,r,n){function a(l){return l.length?l.pop()+" ":""}function o(l,f,h,c,p,x){if(l!==h||f!==c){var y=p.push("translate(",null,e,null,r);x.push({i:y-4,x:ct(l,h)},{i:y-2,x:ct(f,c)})}else(h||c)&&p.push("translate("+h+e+c+r)}function i(l,f,h,c){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),c.push({i:h.push(a(h)+"rotate(",null,n)-2,x:ct(l,f)})):f&&h.push(a(h)+"rotate("+f+n)}function s(l,f,h,c){l!==f?c.push({i:h.push(a(h)+"skewX(",null,n)-2,x:ct(l,f)}):f&&h.push(a(h)+"skewX("+f+n)}function u(l,f,h,c,p,x){if(l!==h||f!==c){var y=p.push(a(p)+"scale(",null,",",null,")");x.push({i:y-4,x:ct(l,h)},{i:y-2,x:ct(f,c)})}else(h!==1||c!==1)&&p.push(a(p)+"scale("+h+","+c+")")}return function(l,f){var h=[],c=[];return l=t(l),f=t(f),o(l.translateX,l.translateY,f.translateX,f.translateY,h,c),i(l.rotate,f.rotate,h,c),s(l.skewX,f.skewX,h,c),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,h,c),l=f=null,function(p){for(var x=-1,y=c.length,d;++x<y;)h[(d=c[x]).i]=d.x(p);return h.join("")}}}var da=os(ns,"px, ","px)","deg)"),ga=os(as,", ",")",")");var vf=1e-12;function is(t){return((t=Math.exp(t))+1/t)/2}function _f(t){return((t=Math.exp(t))-1/t)/2}function bf(t){return((t=Math.exp(2*t))-1)/(t+1)}var xa=function t(e,r,n){function a(o,i){var s=o[0],u=o[1],l=o[2],f=i[0],h=i[1],c=i[2],p=f-s,x=h-u,y=p*p+x*x,d,g;if(y<vf)g=Math.log(c/l)/e,d=function(P){return[s+P*p,u+P*x,l*Math.exp(e*P*g)]};else{var M=Math.sqrt(y),k=(c*c-l*l+n*y)/(2*l*r*M),w=(c*c-l*l-n*y)/(2*c*r*M),S=Math.log(Math.sqrt(k*k+1)-k),T=Math.log(Math.sqrt(w*w+1)-w);g=(T-S)/e,d=function(P){var E=P*g,N=is(S),R=l/(r*M)*(N*bf(e*E+S)-_f(S));return[s+R*p,u+R*x,l*N/is(e*E+S)]}}return d.duration=g*1e3*e/Math.SQRT2,d}return a.rho=function(o){var i=Math.max(.001,+o),s=i*i,u=s*s;return t(i,s,u)},a}(Math.SQRT2,2,4);var He=0,dr=0,mr=0,us=1e3,cn,gr,fn=0,ve=0,hn=0,xr=typeof performance=="object"&&performance.now?performance:Date,ls=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function vr(){return ve||(ls(wf),ve=xr.now()+hn)}function wf(){ve=0}function yr(){this._call=this._time=this._next=null}yr.prototype=pn.prototype={constructor:yr,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?vr():+r)+(e==null?0:+e),!this._next&&gr!==this&&(gr?gr._next=this:cn=this,gr=this),this._call=t,this._time=r,ya()},stop:function(){this._call&&(this._call=null,this._time=1/0,ya())}};function pn(t,e,r){var n=new yr;return n.restart(t,e,r),n}function cs(){vr(),++He;for(var t=cn,e;t;)(e=ve-t._time)>=0&&t._call.call(void 0,e),t=t._next;--He}function ss(){ve=(fn=xr.now())+hn,He=dr=0;try{cs()}finally{He=0,Cf(),ve=0}}function Tf(){var t=xr.now(),e=t-fn;e>us&&(hn-=e,fn=t)}function Cf(){for(var t,e=cn,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:cn=r);gr=t,ya(n)}function ya(t){if(!He){dr&&(dr=clearTimeout(dr));var e=t-ve;e>24?(t<1/0&&(dr=setTimeout(ss,t-xr.now()-hn)),mr&&(mr=clearInterval(mr))):(mr||(fn=xr.now(),mr=setInterval(Tf,us)),He=1,ls(ss))}}function mn(t,e,r){var n=new yr;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var Mf=or("start","end","cancel","interrupt"),kf=[],ps=0,fs=1,gn=2,dn=3,hs=4,xn=5,_r=6;function Kt(t,e,r,n,a,o){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;Af(t,r,{name:e,index:n,group:a,on:Mf,tween:kf,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ps})}function br(t,e){var r=it(t,e);if(r.state>ps)throw new Error("too late; already scheduled");return r}function ft(t,e){var r=it(t,e);if(r.state>dn)throw new Error("too late; already running");return r}function it(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Af(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=pn(o,0,r.time);function o(l){r.state=fs,r.timer.restart(i,r.delay,r.time),r.delay<=l&&i(l-r.delay)}function i(l){var f,h,c,p;if(r.state!==fs)return u();for(f in n)if(p=n[f],p.name===r.name){if(p.state===dn)return mn(i);p.state===hs?(p.state=_r,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete n[f]):+f<e&&(p.state=_r,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete n[f])}if(mn(function(){r.state===dn&&(r.state=hs,r.timer.restart(s,r.delay,r.time),s(l))}),r.state=gn,r.on.call("start",t,t.__data__,r.index,r.group),r.state===gn){for(r.state=dn,a=new Array(c=r.tween.length),f=0,h=-1;f<c;++f)(p=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(a[++h]=p);a.length=h+1}}function s(l){for(var f=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(u),r.state=xn,1),h=-1,c=a.length;++h<c;)a[h].call(t,f);r.state===xn&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=_r,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function te(t,e){var r=t.__transition,n,a,o=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){o=!1;continue}a=n.state>gn&&n.state<xn,n.state=_r,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}o&&delete t.__transition}}function ms(t){return this.each(function(){te(this,t)})}function Sf(t,e){var r,n;return function(){var a=ft(this,t),o=a.tween;if(o!==r){n=r=o;for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function Df(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var o=ft(this,t),i=o.tween;if(i!==n){a=(n=i).slice();for(var s={name:e,value:r},u=0,l=a.length;u<l;++u)if(a[u].name===e){a[u]=s;break}u===l&&a.push(s)}o.tween=a}}function ds(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=it(this.node(),r).tween,a=0,o=n.length,i;a<o;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((e==null?Sf:Df)(r,t,e))}function Le(t,e,r){var n=t._id;return t.each(function(){var a=ft(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return it(a,n).value[e]}}function yn(t,e){var r;return(typeof e=="number"?ct:e instanceof Dt?ye:(r=Dt(e))?(e=r,ye):pr)(t,e)}function Nf(t){return function(){this.removeAttribute(t)}}function If(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rf(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttribute(t);return i===a?null:i===n?o:o=e(n=i,r)}}function Of(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttributeNS(t.space,t.local);return i===a?null:i===n?o:o=e(n=i,r)}}function Ef(t,e,r){var n,a,o;return function(){var i,s=r(this),u;return s==null?void this.removeAttribute(t):(i=this.getAttribute(t),u=s+"",i===u?null:i===n&&u===a?o:(a=u,o=e(n=i,s)))}}function $f(t,e,r){var n,a,o;return function(){var i,s=r(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),u=s+"",i===u?null:i===n&&u===a?o:(a=u,o=e(n=i,s)))}}function gs(t,e){var r=Yt(t),n=r==="transform"?ga:yn;return this.attrTween(t,typeof e=="function"?(r.local?$f:Ef)(r,n,Le(this,"attr."+t,e)):e==null?(r.local?If:Nf)(r):(r.local?Of:Rf)(r,n,e))}function Ff(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Pf(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function zf(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&Pf(t,o)),r}return a._value=e,a}function Hf(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&Ff(t,o)),r}return a._value=e,a}function xs(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Yt(t);return this.tween(r,(n.local?zf:Hf)(n,e))}function Lf(t,e){return function(){br(this,t).delay=+e.apply(this,arguments)}}function Uf(t,e){return e=+e,function(){br(this,t).delay=e}}function ys(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Lf:Uf)(e,t)):it(this.node(),e).delay}function Xf(t,e){return function(){ft(this,t).duration=+e.apply(this,arguments)}}function Yf(t,e){return e=+e,function(){ft(this,t).duration=e}}function vs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Xf:Yf)(e,t)):it(this.node(),e).duration}function Vf(t,e){if(typeof e!="function")throw new Error;return function(){ft(this,t).ease=e}}function _s(t){var e=this._id;return arguments.length?this.each(Vf(e,t)):it(this.node(),e).ease}function qf(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;ft(this,t).ease=r}}function bs(t){if(typeof t!="function")throw new Error;return this.each(qf(this._id,t))}function ws(t){typeof t!="function"&&(t=sr(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],u,l=0;l<i;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&s.push(u);return new _t(n,this._parents,this._name,this._id)}function Ts(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,o=Math.min(n,a),i=new Array(n),s=0;s<o;++s)for(var u=e[s],l=r[s],f=u.length,h=i[s]=new Array(f),c,p=0;p<f;++p)(c=u[p]||l[p])&&(h[p]=c);for(;s<n;++s)i[s]=e[s];return new _t(i,this._parents,this._name,this._id)}function Bf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Wf(t,e,r){var n,a,o=Bf(e)?br:ft;return function(){var i=o(this,t),s=i.on;s!==n&&(a=(n=s).copy()).on(e,r),i.on=a}}function Cs(t,e){var r=this._id;return arguments.length<2?it(this.node(),r).on.on(t):this.each(Wf(r,t,e))}function Zf(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Ms(){return this.on("end.remove",Zf(this._id))}function ks(t){var e=this._name,r=this._id;typeof t!="function"&&(t=de(t));for(var n=this._groups,a=n.length,o=new Array(a),i=0;i<a;++i)for(var s=n[i],u=s.length,l=o[i]=new Array(u),f,h,c=0;c<u;++c)(f=s[c])&&(h=t.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),l[c]=h,Kt(l[c],e,r,c,l,it(f,r)));return new _t(o,this._parents,e,r)}function As(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ir(t));for(var n=this._groups,a=n.length,o=[],i=[],s=0;s<a;++s)for(var u=n[s],l=u.length,f,h=0;h<l;++h)if(f=u[h]){for(var c=t.call(f,f.__data__,h,u),p,x=it(f,r),y=0,d=c.length;y<d;++y)(p=c[y])&&Kt(p,e,r,y,c,x);o.push(c),i.push(f)}return new _t(o,i,e,r)}var Qf=Vt.prototype.constructor;function Ss(){return new Qf(this._groups,this._parents)}function Gf(t,e){var r,n,a;return function(){var o=Jt(this,t),i=(this.style.removeProperty(t),Jt(this,t));return o===i?null:o===r&&i===n?a:a=e(r=o,n=i)}}function Ds(t){return function(){this.style.removeProperty(t)}}function jf(t,e,r){var n,a=r+"",o;return function(){var i=Jt(this,t);return i===a?null:i===n?o:o=e(n=i,r)}}function Jf(t,e,r){var n,a,o;return function(){var i=Jt(this,t),s=r(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),Jt(this,t))),i===u?null:i===n&&u===a?o:(a=u,o=e(n=i,s))}}function Kf(t,e){var r,n,a,o="style."+e,i="end."+o,s;return function(){var u=ft(this,t),l=u.on,f=u.value[o]==null?s||(s=Ds(e)):void 0;(l!==r||a!==f)&&(n=(r=l).copy()).on(i,a=f),u.on=n}}function Ns(t,e,r){var n=(t+="")=="transform"?da:yn;return e==null?this.styleTween(t,Gf(t,n)).on("end.style."+t,Ds(t)):typeof e=="function"?this.styleTween(t,Jf(t,n,Le(this,"style."+t,e))).each(Kf(this._id,t)):this.styleTween(t,jf(t,n,e),r).on("end.style."+t,null)}function th(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function eh(t,e,r){var n,a;function o(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&th(t,i,r)),n}return o._value=e,o}function Is(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,eh(t,e,r??""))}function rh(t){return function(){this.textContent=t}}function nh(t){return function(){var e=t(this);this.textContent=e??""}}function Rs(t){return this.tween("text",typeof t=="function"?nh(Le(this,"text",t)):rh(t==null?"":t+""))}function ah(t){return function(e){this.textContent=t.call(this,e)}}function oh(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&ah(a)),e}return n._value=t,n}function Os(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,oh(t))}function Es(){for(var t=this._name,e=this._id,r=vn(),n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,u,l=0;l<s;++l)if(u=i[l]){var f=it(u,e);Kt(u,t,r,l,i,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new _t(n,this._parents,t,r)}function $s(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(o,i){var s={value:i},u={value:function(){--a===0&&o()}};r.each(function(){var l=ft(this,n),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),a===0&&o()})}var ih=0;function _t(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Fs(t){return Vt().transition(t)}function vn(){return++ih}var Wt=Vt.prototype;_t.prototype=Fs.prototype={constructor:_t,select:ks,selectAll:As,selectChild:Wt.selectChild,selectChildren:Wt.selectChildren,filter:ws,merge:Ts,selection:Ss,transition:Es,call:Wt.call,nodes:Wt.nodes,node:Wt.node,size:Wt.size,empty:Wt.empty,each:Wt.each,on:Cs,attr:gs,attrTween:xs,style:Ns,styleTween:Is,text:Rs,textTween:Os,remove:Ms,tween:ds,delay:ys,duration:vs,ease:_s,easeVarying:bs,end:$s,[Symbol.iterator]:Wt[Symbol.iterator]};function _n(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var sh={time:null,delay:0,duration:250,ease:_n};function uh(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Ps(t){var e,r;t instanceof _t?(e=t._id,t=t._name):(e=vn(),(r=sh).time=vr(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,u,l=0;l<s;++l)(u=i[l])&&Kt(u,t,e,l,i,r||uh(u,e));return new _t(n,this._parents,t,e)}Vt.prototype.interrupt=ms;Vt.prototype.transition=Ps;var{abs:Hv,max:Lv,min:Uv}=Math;function zs(t){return[+t[0],+t[1]]}function lh(t){return[zs(t[0]),zs(t[1])]}var Xv={name:"x",handles:["w","e"].map(va),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Yv={name:"y",handles:["n","s"].map(va),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Vv={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(va),input:function(t){return t==null?null:lh(t)},output:function(t){return t}};function va(t){return{type:t}}var _a=Math.PI,ba=2*_a,_e=1e-6,ch=ba-_e;function Hs(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function fh(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Hs;let r=10**e;return function(n){this._+=n[0];for(let a=1,o=n.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}var be=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Hs:fh(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,o,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+o},${this._y1=+i}`}arcTo(e,r,n,a,o){if(e=+e,r=+r,n=+n,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,s=this._y1,u=n-e,l=a-r,f=i-e,h=s-r,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(c>_e)if(!(Math.abs(h*u-l*f)>_e)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-i,x=a-s,y=u*u+l*l,d=p*p+x*x,g=Math.sqrt(y),M=Math.sqrt(c),k=o*Math.tan((_a-Math.acos((y+c-d)/(2*g*M)))/2),w=k/M,S=k/g;Math.abs(w-1)>_e&&this._append`L${e+w*f},${r+w*h}`,this._append`A${o},${o},0,0,${+(h*p>f*x)},${this._x1=e+S*u},${this._y1=r+S*l}`}}arc(e,r,n,a,o,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),u=n*Math.sin(a),l=e+s,f=r+u,h=1^i,c=i?a-o:o-a;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>_e||Math.abs(this._y1-f)>_e)&&this._append`L${l},${f}`,n&&(c<0&&(c=c%ba+ba),c>ch?this._append`A${n},${n},0,1,${h},${e-s},${r-u}A${n},${n},0,1,${h},${this._x1=l},${this._y1=f}`:c>_e&&this._append`A${n},${n},0,${+(c>=_a)},${h},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}};function Ls(){return new be}Ls.prototype=be.prototype;function Us(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function we(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Ft(t){return t=we(Math.abs(t)),t?t[1]:NaN}function Xs(t,e){return function(r,n){for(var a=r.length,o=[],i=0,s=t[0],u=0;a>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),o.push(r.substring(a-=s,a+s)),!((u+=s+1)>n));)s=t[i=(i+1)%t.length];return o.reverse().join(e)}}function Ys(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var hh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ee(t){if(!(e=hh.exec(t)))throw new Error("invalid format: "+t);var e;return new bn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ee.prototype=bn.prototype;function bn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}bn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vs(t){t:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var wa;function qs(t,e){var r=we(t,e);if(!r)return t+"";var n=r[0],a=r[1],o=a-(wa=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+we(t,Math.max(0,e+o-1))[0]}function Ta(t,e){var r=we(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}var Ca={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Us,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ta(t*100,e),r:Ta,s:qs,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ma(t){return t}var Bs=Array.prototype.map,Ws=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Zs(t){var e=t.grouping===void 0||t.thousands===void 0?Ma:Xs(Bs.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Ma:Ys(Bs.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(h){h=ee(h);var c=h.fill,p=h.align,x=h.sign,y=h.symbol,d=h.zero,g=h.width,M=h.comma,k=h.precision,w=h.trim,S=h.type;S==="n"?(M=!0,S="g"):Ca[S]||(k===void 0&&(k=12),w=!0,S="g"),(d||c==="0"&&p==="=")&&(d=!0,c="0",p="=");var T=y==="$"?r:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",P=y==="$"?n:/[%p]/.test(S)?i:"",E=Ca[S],N=/[defgprs%]/.test(S);k=k===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function R($){var v=T,C=P,m,D,b;if(S==="c")C=E($)+C,$="";else{$=+$;var I=$<0||1/$<0;if($=isNaN($)?u:E(Math.abs($),k),w&&($=Vs($)),I&&+$==0&&x!=="+"&&(I=!1),v=(I?x==="("?x:s:x==="-"||x==="("?"":x)+v,C=(S==="s"?Ws[8+wa/3]:"")+C+(I&&x==="("?")":""),N){for(m=-1,D=$.length;++m<D;)if(b=$.charCodeAt(m),48>b||b>57){C=(b===46?a+$.slice(m+1):$.slice(m))+C,$=$.slice(0,m);break}}}M&&!d&&($=e($,1/0));var z=v.length+$.length+C.length,H=z<g?new Array(g-z+1).join(c):"";switch(M&&d&&($=e(H+$,H.length?g-C.length:1/0),H=""),p){case"<":$=v+$+C+H;break;case"=":$=v+H+$+C;break;case"^":$=H.slice(0,z=H.length>>1)+v+$+C+H.slice(z);break;default:$=H+v+$+C;break}return o($)}return R.toString=function(){return h+""},R}function f(h,c){var p=l((h=ee(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Ft(c)/3)))*3,y=Math.pow(10,-x),d=Ws[8+x/3];return function(g){return p(y*g)+d}}return{format:l,formatPrefix:f}}var wn,mt,Tn;ka({thousands:",",grouping:[3],currency:["$",""]});function ka(t){return wn=Zs(t),mt=wn.format,Tn=wn.formatPrefix,wn}function Aa(t){return Math.max(0,-Ft(Math.abs(t)))}function Sa(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ft(e)/3)))*3-Ft(Math.abs(t)))}function Da(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ft(e)-Ft(t))+1}function ph(t){var e=0,r=t.children,n=r&&r.length;if(!n)e=1;else for(;--n>=0;)e+=r[n].value;t.value=e}function Qs(){return this.eachAfter(ph)}function Gs(t,e){let r=-1;for(let n of this)t.call(e,n,++r,this);return this}function js(t,e){for(var r=this,n=[r],a,o,i=-1;r=n.pop();)if(t.call(e,r,++i,this),a=r.children)for(o=a.length-1;o>=0;--o)n.push(a[o]);return this}function Js(t,e){for(var r=this,n=[r],a=[],o,i,s,u=-1;r=n.pop();)if(a.push(r),o=r.children)for(i=0,s=o.length;i<s;++i)n.push(o[i]);for(;r=a.pop();)t.call(e,r,++u,this);return this}function Ks(t,e){let r=-1;for(let n of this)if(t.call(e,n,++r,this))return n}function tu(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,n=e.children,a=n&&n.length;--a>=0;)r+=n[a].value;e.value=r})}function eu(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ru(t){for(var e=this,r=mh(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var a=n.length;t!==r;)n.splice(a,0,t),t=t.parent;return n}function mh(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),a=null;for(t=r.pop(),e=n.pop();t===e;)a=t,t=r.pop(),e=n.pop();return a}function nu(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function au(){return Array.from(this)}function ou(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function iu(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*su(){var t=this,e,r=[t],n,a,o;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,n=t.children)for(a=0,o=n.length;a<o;++a)r.push(n[a]);while(r.length)}function Pt(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=xh)):e===void 0&&(e=gh);for(var r=new Te(t),n,a=[r],o,i,s,u;n=a.pop();)if((i=e(n.data))&&(u=(i=Array.from(i)).length))for(n.children=i,s=u-1;s>=0;--s)a.push(o=i[s]=new Te(i[s])),o.parent=n,o.depth=n.depth+1;return r.eachBefore(vh)}function dh(){return Pt(this).eachBefore(yh)}function gh(t){return t.children}function xh(t){return Array.isArray(t)?t[1]:null}function yh(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function vh(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Te(t){this.data=t,this.depth=this.height=0,this.parent=null}Te.prototype=Pt.prototype={constructor:Te,count:Qs,each:Gs,eachAfter:Js,eachBefore:js,find:Ks,sum:tu,sort:eu,path:ru,ancestors:nu,descendants:au,leaves:ou,links:iu,copy:dh,[Symbol.iterator]:su};function uu(t){return t==null?null:Na(t)}function Na(t){if(typeof t!="function")throw new Error;return t}function Zt(){return 0}function re(t){return function(){return t}}function lu(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function cu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fu(t,e){let r=t.length,n,a;for(;r;)a=e()*r--|0,n=t[r],t[r]=t[a],t[a]=n;return t}function hu(t,e){for(var r=0,n=(t=fu(Array.from(t),e)).length,a=[],o,i;r<n;)o=t[r],i&&pu(i,o)?++r:(i=bh(a=_h(a,o)),r=0);return i}function _h(t,e){var r,n;if(Ia(e,t))return[e];for(r=0;r<t.length;++r)if(Cn(e,t[r])&&Ia(wr(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(Cn(wr(t[r],t[n]),e)&&Cn(wr(t[r],e),t[n])&&Cn(wr(t[n],e),t[r])&&Ia(mu(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error}function Cn(t,e){var r=t.r-e.r,n=e.x-t.x,a=e.y-t.y;return r<0||r*r<n*n+a*a}function pu(t,e){var r=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function Ia(t,e){for(var r=0;r<e.length;++r)if(!pu(t,e[r]))return!1;return!0}function bh(t){switch(t.length){case 1:return wh(t[0]);case 2:return wr(t[0],t[1]);case 3:return mu(t[0],t[1],t[2])}}function wh(t){return{x:t.x,y:t.y,r:t.r}}function wr(t,e){var r=t.x,n=t.y,a=t.r,o=e.x,i=e.y,s=e.r,u=o-r,l=i-n,f=s-a,h=Math.sqrt(u*u+l*l);return{x:(r+o+u/h*f)/2,y:(n+i+l/h*f)/2,r:(h+a+s)/2}}function mu(t,e,r){var n=t.x,a=t.y,o=t.r,i=e.x,s=e.y,u=e.r,l=r.x,f=r.y,h=r.r,c=n-i,p=n-l,x=a-s,y=a-f,d=u-o,g=h-o,M=n*n+a*a-o*o,k=M-i*i-s*s+u*u,w=M-l*l-f*f+h*h,S=p*x-c*y,T=(x*w-y*k)/(S*2)-n,P=(y*d-x*g)/S,E=(p*k-c*w)/(S*2)-a,N=(c*g-p*d)/S,R=P*P+N*N-1,$=2*(o+T*P+E*N),v=T*T+E*E-o*o,C=-(Math.abs(R)>1e-6?($+Math.sqrt($*$-4*R*v))/(2*R):v/$);return{x:n+T+P*C,y:a+E+N*C,r:C}}function du(t,e,r){var n=t.x-e.x,a,o,i=t.y-e.y,s,u,l=n*n+i*i;l?(o=e.r+r.r,o*=o,u=t.r+r.r,u*=u,o>u?(a=(l+u-o)/(2*l),s=Math.sqrt(Math.max(0,u/l-a*a)),r.x=t.x-a*n-s*i,r.y=t.y-a*i+s*n):(a=(l+o-u)/(2*l),s=Math.sqrt(Math.max(0,o/l-a*a)),r.x=e.x+a*n-s*i,r.y=e.y+a*i+s*n)):(r.x=e.x+r.r,r.y=e.y)}function gu(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function xu(t){var e=t._,r=t.next._,n=e.r+r.r,a=(e.x*r.r+r.x*e.r)/n,o=(e.y*r.r+r.y*e.r)/n;return a*a+o*o}function Mn(t){this._=t,this.next=null,this.previous=null}function yu(t,e){if(!(o=(t=cu(t)).length))return 0;var r,n,a,o,i,s,u,l,f,h,c;if(r=t[0],r.x=0,r.y=0,!(o>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(o>2))return r.r+n.r;du(n,r,a=t[2]),r=new Mn(r),n=new Mn(n),a=new Mn(a),r.next=a.previous=n,n.next=r.previous=a,a.next=n.previous=r;t:for(u=3;u<o;++u){du(r._,n._,a=t[u]),a=new Mn(a),l=n.next,f=r.previous,h=n._.r,c=r._.r;do if(h<=c){if(gu(l._,a._)){n=l,r.next=n,n.previous=r,--u;continue t}h+=l._.r,l=l.next}else{if(gu(f._,a._)){r=f,r.next=n,n.previous=r,--u;continue t}c+=f._.r,f=f.previous}while(l!==f.next);for(a.previous=r,a.next=n,r.next=n.previous=n=a,i=xu(r);(a=a.next)!==n;)(s=xu(a))<i&&(r=a,i=s);n=r.next}for(r=[n._],a=n;(a=a.next)!==n;)r.push(a._);for(a=hu(r,e),u=0;u<o;++u)r=t[u],r.x-=a.x,r.y-=a.y;return a.r}function Th(t){return Math.sqrt(t.value)}function Oa(){var t=null,e=1,r=1,n=Zt;function a(o){let i=lu();return o.x=e/2,o.y=r/2,t?o.eachBefore(vu(t)).eachAfter(Ra(n,.5,i)).eachBefore(_u(1)):o.eachBefore(vu(Th)).eachAfter(Ra(Zt,1,i)).eachAfter(Ra(n,o.r/Math.min(e,r),i)).eachBefore(_u(Math.min(e,r)/(2*o.r))),o}return a.radius=function(o){return arguments.length?(t=uu(o),a):t},a.size=function(o){return arguments.length?(e=+o[0],r=+o[1],a):[e,r]},a.padding=function(o){return arguments.length?(n=typeof o=="function"?o:re(+o),a):n},a}function vu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Ra(t,e,r){return function(n){if(a=n.children){var a,o,i=a.length,s=t(n)*e||0,u;if(s)for(o=0;o<i;++o)a[o].r+=s;if(u=yu(a,r),s)for(o=0;o<i;++o)a[o].r-=s;n.r=u+s}}}function _u(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function bu(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function wu(t,e,r,n,a){for(var o=t.children,i,s=-1,u=o.length,l=t.value&&(n-e)/t.value;++s<u;)i=o[s],i.y0=r,i.y1=a,i.x0=e,i.x1=e+=i.value*l}function Ch(t,e){return t.parent===e.parent?1:2}function Ea(t){var e=t.children;return e?e[0]:t.t}function $a(t){var e=t.children;return e?e[e.length-1]:t.t}function Mh(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function kh(t){for(var e=0,r=0,n=t.children,a=n.length,o;--a>=0;)o=n[a],o.z+=e,o.m+=e,e+=o.s+(r+=o.c)}function Ah(t,e,r){return t.a.parent===e.parent?t.a:r}function kn(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}kn.prototype=Object.create(Te.prototype);function Sh(t){for(var e=new kn(t,0),r,n=[e],a,o,i,s;r=n.pop();)if(o=r._.children)for(r.children=new Array(s=o.length),i=s-1;i>=0;--i)n.push(a=r.children[i]=new kn(o[i],i)),a.parent=r;return(e.parent=new kn(null,0)).children=[e],e}function Fa(){var t=Ch,e=1,r=1,n=null;function a(l){var f=Sh(l);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(i),n)l.eachBefore(u);else{var h=l,c=l,p=l;l.eachBefore(function(M){M.x<h.x&&(h=M),M.x>c.x&&(c=M),M.depth>p.depth&&(p=M)});var x=h===c?1:t(h,c)/2,y=x-h.x,d=e/(c.x+x+y),g=r/(p.depth||1);l.eachBefore(function(M){M.x=(M.x+y)*d,M.y=M.depth*g})}return l}function o(l){var f=l.children,h=l.parent.children,c=l.i?h[l.i-1]:null;if(f){kh(l);var p=(f[0].z+f[f.length-1].z)/2;c?(l.z=c.z+t(l._,c._),l.m=l.z-p):l.z=p}else c&&(l.z=c.z+t(l._,c._));l.parent.A=s(l,c,l.parent.A||h[0])}function i(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,f,h){if(f){for(var c=l,p=l,x=f,y=c.parent.children[0],d=c.m,g=p.m,M=x.m,k=y.m,w;x=$a(x),c=Ea(c),x&&c;)y=Ea(y),p=$a(p),p.a=l,w=x.z+M-c.z-d+t(x._,c._),w>0&&(Mh(Ah(x,l,h),l,w),d+=w,g+=w),M+=x.m,d+=c.m,k+=y.m,g+=p.m;x&&!$a(p)&&(p.t=x,p.m+=M-g),c&&!Ea(y)&&(y.t=c,y.m+=d-k,h=l)}return h}function u(l){l.x*=e,l.y=l.depth*r}return a.separation=function(l){return arguments.length?(t=l,a):t},a.size=function(l){return arguments.length?(n=!1,e=+l[0],r=+l[1],a):n?null:[e,r]},a.nodeSize=function(l){return arguments.length?(n=!0,e=+l[0],r=+l[1],a):n?[e,r]:null},a}function Tu(t,e,r,n,a){for(var o=t.children,i,s=-1,u=o.length,l=t.value&&(a-r)/t.value;++s<u;)i=o[s],i.x0=e,i.x1=n,i.y0=r,i.y1=r+=i.value*l}var Dh=(1+Math.sqrt(5))/2;function Nh(t,e,r,n,a,o){for(var i=[],s=e.children,u,l,f=0,h=0,c=s.length,p,x,y=e.value,d,g,M,k,w,S,T;f<c;){p=a-r,x=o-n;do d=s[h++].value;while(!d&&h<c);for(g=M=d,S=Math.max(x/p,p/x)/(y*t),T=d*d*S,w=Math.max(M/T,T/g);h<c;++h){if(d+=l=s[h].value,l<g&&(g=l),l>M&&(M=l),T=d*d*S,k=Math.max(M/T,T/g),k>w){d-=l;break}w=k}i.push(u={value:d,dice:p<x,children:s.slice(f,h)}),u.dice?wu(u,r,n,a,y?n+=x*d/y:o):Tu(u,r,n,y?r+=p*d/y:a,o),y-=d,f=h}return i}var Cu=function t(e){function r(n,a,o,i,s){Nh(e,n,a,o,i,s)}return r.ratio=function(n){return t((n=+n)>1?n:1)},r}(Dh);function Pa(){var t=Cu,e=!1,r=1,n=1,a=[0],o=Zt,i=Zt,s=Zt,u=Zt,l=Zt;function f(c){return c.x0=c.y0=0,c.x1=r,c.y1=n,c.eachBefore(h),a=[0],e&&c.eachBefore(bu),c}function h(c){var p=a[c.depth],x=c.x0+p,y=c.y0+p,d=c.x1-p,g=c.y1-p;d<x&&(x=d=(x+d)/2),g<y&&(y=g=(y+g)/2),c.x0=x,c.y0=y,c.x1=d,c.y1=g,c.children&&(p=a[c.depth+1]=o(c)/2,x+=l(c)-p,y+=i(c)-p,d-=s(c)-p,g-=u(c)-p,d<x&&(x=d=(x+d)/2),g<y&&(y=g=(y+g)/2),t(c,x,y,d,g))}return f.round=function(c){return arguments.length?(e=!!c,f):e},f.size=function(c){return arguments.length?(r=+c[0],n=+c[1],f):[r,n]},f.tile=function(c){return arguments.length?(t=Na(c),f):t},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(o=typeof c=="function"?c:re(+c),f):o},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(i=typeof c=="function"?c:re(+c),f):i},f.paddingRight=function(c){return arguments.length?(s=typeof c=="function"?c:re(+c),f):s},f.paddingBottom=function(c){return arguments.length?(u=typeof c=="function"?c:re(+c),f):u},f.paddingLeft=function(c){return arguments.length?(l=typeof c=="function"?c:re(+c),f):l},f}function ne(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var Mu=Symbol("implicit");function An(){var t=new $e,e=[],r=[],n=Mu;function a(o){let i=t.get(o);if(i===void 0){if(n!==Mu)return n;t.set(o,i=e.push(o)-1)}return r[i%r.length]}return a.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new $e;for(let i of o)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(o){return arguments.length?(r=Array.from(o),a):r.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return An(e,r).unknown(n)},ne.apply(a,arguments),a}function Tr(){var t=An().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,o,i,s=!1,u=0,l=0,f=.5;delete t.unknown;function h(){var c=e().length,p=a<n,x=p?a:n,y=p?n:a;o=(y-x)/Math.max(1,c-u+l*2),s&&(o=Math.floor(o)),x+=(y-x-o*(c-u))*f,i=o*(1-u),s&&(x=Math.round(x),i=Math.round(i));var d=qr(c).map(function(g){return x+o*g});return r(p?d.reverse():d)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([n,a]=c,n=+n,a=+a,h()):[n,a]},t.rangeRound=function(c){return[n,a]=c,n=+n,a=+a,s=!0,h()},t.bandwidth=function(){return i},t.step=function(){return o},t.round=function(c){return arguments.length?(s=!!c,h()):s},t.padding=function(c){return arguments.length?(u=Math.min(1,l=+c),h()):u},t.paddingInner=function(c){return arguments.length?(u=Math.min(1,c),h()):u},t.paddingOuter=function(c){return arguments.length?(l=+c,h()):l},t.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},t.copy=function(){return Tr(e(),[n,a]).round(s).paddingInner(u).paddingOuter(l).align(f)},ne.apply(h(),arguments)}function za(t){return function(){return t}}function Ha(t){return+t}var ku=[0,1];function Ue(t){return t}function La(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:za(isNaN(e)?NaN:.5)}function Ih(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Rh(t,e,r){var n=t[0],a=t[1],o=e[0],i=e[1];return a<n?(n=La(a,n),o=r(i,o)):(n=La(n,a),o=r(o,i)),function(s){return o(n(s))}}function Oh(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),o=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=La(t[i],t[i+1]),o[i]=r(e[i],e[i+1]);return function(s){var u=jn(t,s,1,n)-1;return o[u](a[u](s))}}function Sn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Eh(){var t=ku,e=ku,r=Bt,n,a,o,i=Ue,s,u,l;function f(){var c=Math.min(t.length,e.length);return i!==Ue&&(i=Ih(t[0],t[c-1])),s=c>2?Oh:Rh,u=l=null,h}function h(c){return c==null||isNaN(c=+c)?o:(u||(u=s(t.map(n),e,r)))(n(i(c)))}return h.invert=function(c){return i(a((l||(l=s(e,t.map(n),ct)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,Ha),f()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),f()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),r=pa,f()},h.clamp=function(c){return arguments.length?(i=c?!0:Ue,f()):i!==Ue},h.interpolate=function(c){return arguments.length?(r=c,f()):r},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,p){return n=c,a=p,f()}}function Cr(){return Eh()(Ue,Ue)}function Ua(t,e,r,n){var a=Fe(t,e,r),o;switch(n=ee(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=Sa(a,i))&&(n.precision=o),Tn(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=Da(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=Aa(a))&&(n.precision=o-(n.type==="%")*2);break}}return mt(n)}function $h(t){var e=t.domain;return t.ticks=function(r){var n=e();return Vr(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return Ua(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,o=n.length-1,i=n[a],s=n[o],u,l,f=10;for(s<i&&(l=i,i=s,s=l,l=a,a=o,o=l);f-- >0;){if(l=er(i,s,r),l===u)return n[a]=i,n[o]=s,e(n);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function At(){var t=Cr();return t.copy=function(){return Sn(t,At())},ne.apply(t,arguments),$h(t)}function Xa(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],o=t[n],i;return o<a&&(i=r,r=n,n=i,i=a,a=o,o=i),t[r]=e.floor(a),t[n]=e.ceil(o),t}var Ya=new Date,Va=new Date;function Q(t,e,r,n){function a(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(t(o=new Date(+o)),o),a.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),a.round=o=>{let i=a(o),s=a.ceil(o);return o-i<s-o?i:s},a.offset=(o,i)=>(e(o=new Date(+o),i==null?1:Math.floor(i)),o),a.range=(o,i,s)=>{let u=[];if(o=a.ceil(o),s=s==null?1:Math.floor(s),!(o<i)||!(s>0))return u;let l;do u.push(l=new Date(+o)),e(o,s),t(o);while(l<o&&o<i);return u},a.filter=o=>Q(i=>{if(i>=i)for(;t(i),!o(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;e(i,-1),!o(i););else for(;--s>=0;)for(;e(i,1),!o(i););}),r&&(a.count=(o,i)=>(Ya.setTime(+o),Va.setTime(+i),t(Ya),t(Va),Math.floor(r(Ya,Va))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(n?i=>n(i)%o===0:i=>a.count(0,i)%o===0):a)),a}var Mr=Q(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Mr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Q(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Mr);var yb=Mr.range;var zt=Q(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*1e3)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),Au=zt.range;var Xe=Q(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getMinutes()),Fh=Xe.range,Dn=Q(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes()),Ph=Dn.range;var Ye=Q(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getHours()),zh=Ye.range,Nn=Q(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours()),Hh=Nn.range;var Nt=Q(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Lh=Nt.range,Ar=Q(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>t.getUTCDate()-1),Uh=Ar.range,In=Q(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>Math.floor(t/864e5)),Xh=In.range;function ke(t){return Q(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}var It=ke(0),Ve=ke(1),Du=ke(2),Nu=ke(3),ae=ke(4),Iu=ke(5),Ru=ke(6),Ou=It.range,Yh=Ve.range,Vh=Du.range,qh=Nu.range,Bh=ae.range,Wh=Iu.range,Zh=Ru.range;function Ae(t){return Q(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/6048e5)}var Se=Ae(0),qe=Ae(1),Eu=Ae(2),$u=Ae(3),oe=Ae(4),Fu=Ae(5),Pu=Ae(6),zu=Se.range,Qh=qe.range,Gh=Eu.range,jh=$u.range,Jh=oe.range,Kh=Fu.range,tp=Pu.range;var ie=Q(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),ep=ie.range,Rn=Q(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),rp=Rn.range;var bt=Q(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Q(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});var np=bt.range,Rt=Q(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Q(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});var ap=Rt.range;function Lu(t,e,r,n,a,o){let i=[[zt,1,1e3],[zt,5,5*1e3],[zt,15,15*1e3],[zt,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[a,1,36e5],[a,3,3*36e5],[a,6,6*36e5],[a,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[e,1,2592e6],[e,3,3*2592e6],[t,1,31536e6]];function s(l,f,h){let c=f<l;c&&([l,f]=[f,l]);let p=h&&typeof h.range=="function"?h:u(l,f,h),x=p?p.range(l,+f+1):[];return c?x.reverse():x}function u(l,f,h){let c=Math.abs(f-l)/h,p=pe(([,,d])=>d).right(i,c);if(p===i.length)return t.every(Fe(l/31536e6,f/31536e6,h));if(p===0)return Mr.every(Math.max(Fe(l,f,h),1));let[x,y]=i[c/i[p-1][2]<i[p][2]/c?p-1:p];return x.every(y)}return[s,u]}var[ip,sp]=Lu(Rt,Rn,Se,In,Nn,Dn),[qa,Ba]=Lu(bt,ie,It,Nt,Ye,Xe);function Wa(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Za(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Sr(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Qa(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,o=t.days,i=t.shortDays,s=t.months,u=t.shortMonths,l=Dr(a),f=Nr(a),h=Dr(o),c=Nr(o),p=Dr(i),x=Nr(i),y=Dr(s),d=Nr(s),g=Dr(u),M=Nr(u),k={a:I,A:z,b:H,B:L,c:null,d:Bu,e:Bu,f:Np,g:Lp,G:Xp,H:Ap,I:Sp,j:Dp,L:ju,m:Ip,M:Rp,p:V,q:W,Q:Qu,s:Gu,S:Op,u:Ep,U:$p,V:Fp,w:Pp,W:zp,x:null,X:null,y:Hp,Y:Up,Z:Yp,"%":Zu},w={a:pt,A:tt,b:et,B:gt,c:null,d:Wu,e:Wu,f:Wp,g:nm,G:om,H:Vp,I:qp,j:Bp,L:Ku,m:Zp,M:Qp,p:lt,q:xt,Q:Qu,s:Gu,S:Gp,u:jp,U:Jp,V:Kp,w:tm,W:em,x:null,X:null,y:rm,Y:am,Z:im,"%":Zu},S={a:R,A:$,b:v,B:C,c:m,d:Vu,e:Vu,f:Tp,g:Yu,G:Xu,H:qu,I:qu,j:vp,L:wp,m:yp,M:_p,p:N,q:xp,Q:Mp,s:kp,S:bp,u:hp,U:pp,V:mp,w:fp,W:dp,x:D,X:b,y:Yu,Y:Xu,Z:gp,"%":Cp};k.x=T(r,k),k.X=T(n,k),k.c=T(e,k),w.x=T(r,w),w.X=T(n,w),w.c=T(e,w);function T(O,U){return function(Y){var A=[],Tt=-1,G=0,Mt=O.length,kt,ue,lo;for(Y instanceof Date||(Y=new Date(+Y));++Tt<Mt;)O.charCodeAt(Tt)===37&&(A.push(O.slice(G,Tt)),(ue=Uu[kt=O.charAt(++Tt)])!=null?kt=O.charAt(++Tt):ue=kt==="e"?" ":"0",(lo=U[kt])&&(kt=lo(Y,ue)),A.push(kt),G=Tt+1);return A.push(O.slice(G,Tt)),A.join("")}}function P(O,U){return function(Y){var A=Sr(1900,void 0,1),Tt=E(A,O,Y+="",0),G,Mt;if(Tt!=Y.length)return null;if("Q"in A)return new Date(A.Q);if("s"in A)return new Date(A.s*1e3+("L"in A?A.L:0));if(U&&!("Z"in A)&&(A.Z=0),"p"in A&&(A.H=A.H%12+A.p*12),A.m===void 0&&(A.m="q"in A?A.q:0),"V"in A){if(A.V<1||A.V>53)return null;"w"in A||(A.w=1),"Z"in A?(G=Za(Sr(A.y,0,1)),Mt=G.getUTCDay(),G=Mt>4||Mt===0?qe.ceil(G):qe(G),G=Ar.offset(G,(A.V-1)*7),A.y=G.getUTCFullYear(),A.m=G.getUTCMonth(),A.d=G.getUTCDate()+(A.w+6)%7):(G=Wa(Sr(A.y,0,1)),Mt=G.getDay(),G=Mt>4||Mt===0?Ve.ceil(G):Ve(G),G=Nt.offset(G,(A.V-1)*7),A.y=G.getFullYear(),A.m=G.getMonth(),A.d=G.getDate()+(A.w+6)%7)}else("W"in A||"U"in A)&&("w"in A||(A.w="u"in A?A.u%7:"W"in A?1:0),Mt="Z"in A?Za(Sr(A.y,0,1)).getUTCDay():Wa(Sr(A.y,0,1)).getDay(),A.m=0,A.d="W"in A?(A.w+6)%7+A.W*7-(Mt+5)%7:A.w+A.U*7-(Mt+6)%7);return"Z"in A?(A.H+=A.Z/100|0,A.M+=A.Z%100,Za(A)):Wa(A)}}function E(O,U,Y,A){for(var Tt=0,G=U.length,Mt=Y.length,kt,ue;Tt<G;){if(A>=Mt)return-1;if(kt=U.charCodeAt(Tt++),kt===37){if(kt=U.charAt(Tt++),ue=S[kt in Uu?U.charAt(Tt++):kt],!ue||(A=ue(O,Y,A))<0)return-1}else if(kt!=Y.charCodeAt(A++))return-1}return A}function N(O,U,Y){var A=l.exec(U.slice(Y));return A?(O.p=f.get(A[0].toLowerCase()),Y+A[0].length):-1}function R(O,U,Y){var A=p.exec(U.slice(Y));return A?(O.w=x.get(A[0].toLowerCase()),Y+A[0].length):-1}function $(O,U,Y){var A=h.exec(U.slice(Y));return A?(O.w=c.get(A[0].toLowerCase()),Y+A[0].length):-1}function v(O,U,Y){var A=g.exec(U.slice(Y));return A?(O.m=M.get(A[0].toLowerCase()),Y+A[0].length):-1}function C(O,U,Y){var A=y.exec(U.slice(Y));return A?(O.m=d.get(A[0].toLowerCase()),Y+A[0].length):-1}function m(O,U,Y){return E(O,e,U,Y)}function D(O,U,Y){return E(O,r,U,Y)}function b(O,U,Y){return E(O,n,U,Y)}function I(O){return i[O.getDay()]}function z(O){return o[O.getDay()]}function H(O){return u[O.getMonth()]}function L(O){return s[O.getMonth()]}function V(O){return a[+(O.getHours()>=12)]}function W(O){return 1+~~(O.getMonth()/3)}function pt(O){return i[O.getUTCDay()]}function tt(O){return o[O.getUTCDay()]}function et(O){return u[O.getUTCMonth()]}function gt(O){return s[O.getUTCMonth()]}function lt(O){return a[+(O.getUTCHours()>=12)]}function xt(O){return 1+~~(O.getUTCMonth()/3)}return{format:function(O){var U=T(O+="",k);return U.toString=function(){return O},U},parse:function(O){var U=P(O+="",!1);return U.toString=function(){return O},U},utcFormat:function(O){var U=T(O+="",w);return U.toString=function(){return O},U},utcParse:function(O){var U=P(O+="",!0);return U.toString=function(){return O},U}}}var Uu={"-":"",_:" ",0:"0"},ut=/^\s*\d+/,up=/^%/,lp=/[\\^$*+?|[\]().{}]/g;function q(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",o=a.length;return n+(o<r?new Array(r-o+1).join(e)+a:a)}function cp(t){return t.replace(lp,"\\$&")}function Dr(t){return new RegExp("^(?:"+t.map(cp).join("|")+")","i")}function Nr(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function fp(t,e,r){var n=ut.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function hp(t,e,r){var n=ut.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function pp(t,e,r){var n=ut.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function mp(t,e,r){var n=ut.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function dp(t,e,r){var n=ut.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Xu(t,e,r){var n=ut.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Yu(t,e,r){var n=ut.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function gp(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function xp(t,e,r){var n=ut.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function yp(t,e,r){var n=ut.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Vu(t,e,r){var n=ut.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function vp(t,e,r){var n=ut.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function qu(t,e,r){var n=ut.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function _p(t,e,r){var n=ut.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function bp(t,e,r){var n=ut.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function wp(t,e,r){var n=ut.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Tp(t,e,r){var n=ut.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Cp(t,e,r){var n=up.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Mp(t,e,r){var n=ut.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function kp(t,e,r){var n=ut.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function Bu(t,e){return q(t.getDate(),e,2)}function Ap(t,e){return q(t.getHours(),e,2)}function Sp(t,e){return q(t.getHours()%12||12,e,2)}function Dp(t,e){return q(1+Nt.count(bt(t),t),e,3)}function ju(t,e){return q(t.getMilliseconds(),e,3)}function Np(t,e){return ju(t,e)+"000"}function Ip(t,e){return q(t.getMonth()+1,e,2)}function Rp(t,e){return q(t.getMinutes(),e,2)}function Op(t,e){return q(t.getSeconds(),e,2)}function Ep(t){var e=t.getDay();return e===0?7:e}function $p(t,e){return q(It.count(bt(t)-1,t),e,2)}function Ju(t){var e=t.getDay();return e>=4||e===0?ae(t):ae.ceil(t)}function Fp(t,e){return t=Ju(t),q(ae.count(bt(t),t)+(bt(t).getDay()===4),e,2)}function Pp(t){return t.getDay()}function zp(t,e){return q(Ve.count(bt(t)-1,t),e,2)}function Hp(t,e){return q(t.getFullYear()%100,e,2)}function Lp(t,e){return t=Ju(t),q(t.getFullYear()%100,e,2)}function Up(t,e){return q(t.getFullYear()%1e4,e,4)}function Xp(t,e){var r=t.getDay();return t=r>=4||r===0?ae(t):ae.ceil(t),q(t.getFullYear()%1e4,e,4)}function Yp(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+q(e/60|0,"0",2)+q(e%60,"0",2)}function Wu(t,e){return q(t.getUTCDate(),e,2)}function Vp(t,e){return q(t.getUTCHours(),e,2)}function qp(t,e){return q(t.getUTCHours()%12||12,e,2)}function Bp(t,e){return q(1+Ar.count(Rt(t),t),e,3)}function Ku(t,e){return q(t.getUTCMilliseconds(),e,3)}function Wp(t,e){return Ku(t,e)+"000"}function Zp(t,e){return q(t.getUTCMonth()+1,e,2)}function Qp(t,e){return q(t.getUTCMinutes(),e,2)}function Gp(t,e){return q(t.getUTCSeconds(),e,2)}function jp(t){var e=t.getUTCDay();return e===0?7:e}function Jp(t,e){return q(Se.count(Rt(t)-1,t),e,2)}function tl(t){var e=t.getUTCDay();return e>=4||e===0?oe(t):oe.ceil(t)}function Kp(t,e){return t=tl(t),q(oe.count(Rt(t),t)+(Rt(t).getUTCDay()===4),e,2)}function tm(t){return t.getUTCDay()}function em(t,e){return q(qe.count(Rt(t)-1,t),e,2)}function rm(t,e){return q(t.getUTCFullYear()%100,e,2)}function nm(t,e){return t=tl(t),q(t.getUTCFullYear()%100,e,2)}function am(t,e){return q(t.getUTCFullYear()%1e4,e,4)}function om(t,e){var r=t.getUTCDay();return t=r>=4||r===0?oe(t):oe.ceil(t),q(t.getUTCFullYear()%1e4,e,4)}function im(){return"+0000"}function Zu(){return"%"}function Qu(t){return+t}function Gu(t){return Math.floor(+t/1e3)}var Be,dt,el,rl,nl;Ga({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ga(t){return Be=Qa(t),dt=Be.format,el=Be.parse,rl=Be.utcFormat,nl=Be.utcParse,Be}function sm(t){return new Date(t)}function um(t){return t instanceof Date?+t:+new Date(+t)}function al(t,e,r,n,a,o,i,s,u,l){var f=Cr(),h=f.invert,c=f.domain,p=l(".%L"),x=l(":%S"),y=l("%I:%M"),d=l("%I %p"),g=l("%a %d"),M=l("%b %d"),k=l("%B"),w=l("%Y");function S(T){return(u(T)<T?p:s(T)<T?x:i(T)<T?y:o(T)<T?d:n(T)<T?a(T)<T?g:M:r(T)<T?k:w)(T)}return f.invert=function(T){return new Date(h(T))},f.domain=function(T){return arguments.length?c(Array.from(T,um)):c().map(sm)},f.ticks=function(T){var P=c();return t(P[0],P[P.length-1],T??10)},f.tickFormat=function(T,P){return P==null?S:l(P)},f.nice=function(T){var P=c();return(!T||typeof T.range!="function")&&(T=e(P[0],P[P.length-1],T??10)),T?c(Xa(P,T)):f},f.copy=function(){return Sn(f,al(t,e,r,n,a,o,i,s,u,l))},f}function Ir(){return ne.apply(al(qa,Ba,bt,ie,It,Nt,Ye,Xe,zt,dt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function K(t){return function(){return t}}var ja=Math.abs,ht=Math.atan2,se=Math.cos,ol=Math.max,On=Math.min,Ot=Math.sin,De=Math.sqrt,wt=1e-12,We=Math.PI,Rr=We/2,Ze=2*We;function il(t){return t>1?0:t<-1?We:Math.acos(t)}function Ja(t){return t>=1?Rr:t<=-1?-Rr:Math.asin(t)}function En(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new be(e)}function lm(t){return t.innerRadius}function cm(t){return t.outerRadius}function fm(t){return t.startAngle}function hm(t){return t.endAngle}function pm(t){return t&&t.padAngle}function mm(t,e,r,n,a,o,i,s){var u=r-t,l=n-e,f=i-a,h=s-o,c=h*u-f*l;if(!(c*c<wt))return c=(f*(e-o)-h*(t-a))/c,[t+c*u,e+c*l]}function $n(t,e,r,n,a,o,i){var s=t-r,u=e-n,l=(i?o:-o)/De(s*s+u*u),f=l*u,h=-l*s,c=t+f,p=e+h,x=r+f,y=n+h,d=(c+x)/2,g=(p+y)/2,M=x-c,k=y-p,w=M*M+k*k,S=a-o,T=c*y-x*p,P=(k<0?-1:1)*De(ol(0,S*S*w-T*T)),E=(T*k-M*P)/w,N=(-T*M-k*P)/w,R=(T*k+M*P)/w,$=(-T*M+k*P)/w,v=E-d,C=N-g,m=R-d,D=$-g;return v*v+C*C>m*m+D*D&&(E=R,N=$),{cx:E,cy:N,x01:-f,y01:-h,x11:E*(a/S-1),y11:N*(a/S-1)}}function Ka(){var t=lm,e=cm,r=K(0),n=null,a=fm,o=hm,i=pm,s=null,u=En(l);function l(){var f,h,c=+t.apply(this,arguments),p=+e.apply(this,arguments),x=a.apply(this,arguments)-Rr,y=o.apply(this,arguments)-Rr,d=ja(y-x),g=y>x;if(s||(s=f=u()),p<c&&(h=p,p=c,c=h),!(p>wt))s.moveTo(0,0);else if(d>Ze-wt)s.moveTo(p*se(x),p*Ot(x)),s.arc(0,0,p,x,y,!g),c>wt&&(s.moveTo(c*se(y),c*Ot(y)),s.arc(0,0,c,y,x,g));else{var M=x,k=y,w=x,S=y,T=d,P=d,E=i.apply(this,arguments)/2,N=E>wt&&(n?+n.apply(this,arguments):De(c*c+p*p)),R=On(ja(p-c)/2,+r.apply(this,arguments)),$=R,v=R,C,m;if(N>wt){var D=Ja(N/c*Ot(E)),b=Ja(N/p*Ot(E));(T-=D*2)>wt?(D*=g?1:-1,w+=D,S-=D):(T=0,w=S=(x+y)/2),(P-=b*2)>wt?(b*=g?1:-1,M+=b,k-=b):(P=0,M=k=(x+y)/2)}var I=p*se(M),z=p*Ot(M),H=c*se(S),L=c*Ot(S);if(R>wt){var V=p*se(k),W=p*Ot(k),pt=c*se(w),tt=c*Ot(w),et;if(d<We)if(et=mm(I,z,pt,tt,V,W,H,L)){var gt=I-et[0],lt=z-et[1],xt=V-et[0],O=W-et[1],U=1/Ot(il((gt*xt+lt*O)/(De(gt*gt+lt*lt)*De(xt*xt+O*O)))/2),Y=De(et[0]*et[0]+et[1]*et[1]);$=On(R,(c-Y)/(U-1)),v=On(R,(p-Y)/(U+1))}else $=v=0}P>wt?v>wt?(C=$n(pt,tt,I,z,p,v,g),m=$n(V,W,H,L,p,v,g),s.moveTo(C.cx+C.x01,C.cy+C.y01),v<R?s.arc(C.cx,C.cy,v,ht(C.y01,C.x01),ht(m.y01,m.x01),!g):(s.arc(C.cx,C.cy,v,ht(C.y01,C.x01),ht(C.y11,C.x11),!g),s.arc(0,0,p,ht(C.cy+C.y11,C.cx+C.x11),ht(m.cy+m.y11,m.cx+m.x11),!g),s.arc(m.cx,m.cy,v,ht(m.y11,m.x11),ht(m.y01,m.x01),!g))):(s.moveTo(I,z),s.arc(0,0,p,M,k,!g)):s.moveTo(I,z),!(c>wt)||!(T>wt)?s.lineTo(H,L):$>wt?(C=$n(H,L,V,W,c,-$,g),m=$n(I,z,pt,tt,c,-$,g),s.lineTo(C.cx+C.x01,C.cy+C.y01),$<R?s.arc(C.cx,C.cy,$,ht(C.y01,C.x01),ht(m.y01,m.x01),!g):(s.arc(C.cx,C.cy,$,ht(C.y01,C.x01),ht(C.y11,C.x11),!g),s.arc(0,0,c,ht(C.cy+C.y11,C.cx+C.x11),ht(m.cy+m.y11,m.cx+m.x11),g),s.arc(m.cx,m.cy,$,ht(m.y11,m.x11),ht(m.y01,m.x01),!g))):s.arc(0,0,c,S,w,g)}if(s.closePath(),f)return s=null,f+""||null}return l.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-We/2;return[se(h)*f,Ot(h)*f]},l.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:K(+f),l):t},l.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:K(+f),l):e},l.cornerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:K(+f),l):r},l.padRadius=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:K(+f),l):n},l.startAngle=function(f){return arguments.length?(a=typeof f=="function"?f:K(+f),l):a},l.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:K(+f),l):o},l.padAngle=function(f){return arguments.length?(i=typeof f=="function"?f:K(+f),l):i},l.context=function(f){return arguments.length?(s=f??null,l):s},l}var Cw=Array.prototype.slice;function Fn(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function sl(t){this._context=t}sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ul(t){return new sl(t)}function ll(t){return t[0]}function cl(t){return t[1]}function Qe(t,e){var r=K(!0),n=null,a=ul,o=null,i=En(s);t=typeof t=="function"?t:t===void 0?ll:K(t),e=typeof e=="function"?e:e===void 0?cl:K(e);function s(u){var l,f=(u=Fn(u)).length,h,c=!1,p;for(n==null&&(o=a(p=i())),l=0;l<=f;++l)!(l<f&&r(h=u[l],l,u))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,l,u),+e(h,l,u));if(p)return o=null,p+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:K(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:K(+u),s):e},s.defined=function(u){return arguments.length?(r=typeof u=="function"?u:K(!!u),s):r},s.curve=function(u){return arguments.length?(a=u,n!=null&&(o=a(n)),s):a},s.context=function(u){return arguments.length?(u==null?n=o=null:o=a(n=u),s):n},s}function fl(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function hl(t){return t}function to(){var t=hl,e=fl,r=null,n=K(0),a=K(Ze),o=K(0);function i(s){var u,l=(s=Fn(s)).length,f,h,c=0,p=new Array(l),x=new Array(l),y=+n.apply(this,arguments),d=Math.min(Ze,Math.max(-Ze,a.apply(this,arguments)-y)),g,M=Math.min(Math.abs(d)/l,o.apply(this,arguments)),k=M*(d<0?-1:1),w;for(u=0;u<l;++u)(w=x[p[u]=u]=+t(s[u],u,s))>0&&(c+=w);for(e!=null?p.sort(function(S,T){return e(x[S],x[T])}):r!=null&&p.sort(function(S,T){return r(s[S],s[T])}),u=0,h=c?(d-l*k)/c:0;u<l;++u,y=g)f=p[u],w=x[f],g=y+(w>0?w*h:0)+k,x[f]={data:s[f],index:u,value:w,startAngle:y,endAngle:g,padAngle:M};return x}return i.value=function(s){return arguments.length?(t=typeof s=="function"?s:K(+s),i):t},i.sortValues=function(s){return arguments.length?(e=s,r=null,i):e},i.sort=function(s){return arguments.length?(r=s,e=null,i):r},i.startAngle=function(s){return arguments.length?(n=typeof s=="function"?s:K(+s),i):n},i.endAngle=function(s){return arguments.length?(a=typeof s=="function"?s:K(+s),i):a},i.padAngle=function(s){return arguments.length?(o=typeof s=="function"?s:K(+s),i):o},i}var Or=t=>()=>t;function eo(t,{sourceEvent:e,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Et(t,e,r){this.k=t,this.x=e,this.y=r}Et.prototype={constructor:Et,scale:function(t){return t===1?this:new Et(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Et(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Er=new Et(1,0,0);ro.prototype=Et.prototype;function ro(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Er;return t.__zoom}function Pn(t){t.stopImmediatePropagation()}function Ge(t){t.preventDefault(),t.stopImmediatePropagation()}function dm(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function gm(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function pl(){return this.__zoom||Er}function xm(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ym(){return navigator.maxTouchPoints||"ontouchstart"in this}function vm(t,e,r){var n=t.invertX(e[0][0])-r[0][0],a=t.invertX(e[1][0])-r[1][0],o=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function no(){var t=dm,e=gm,r=vm,n=xm,a=ym,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,u=xa,l=or("start","zoom","end"),f,h,c,p=500,x=150,y=0,d=10;function g(m){m.property("__zoom",pl).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",$).on("touchmove.zoom",v).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(m,D,b,I){var z=m.selection?m.selection():m;z.property("__zoom",pl),m!==z?S(m,D,b,I):z.interrupt().each(function(){T(this,arguments).event(I).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},g.scaleBy=function(m,D,b,I){g.scaleTo(m,function(){var z=this.__zoom.k,H=typeof D=="function"?D.apply(this,arguments):D;return z*H},b,I)},g.scaleTo=function(m,D,b,I){g.transform(m,function(){var z=e.apply(this,arguments),H=this.__zoom,L=b==null?w(z):typeof b=="function"?b.apply(this,arguments):b,V=H.invert(L),W=typeof D=="function"?D.apply(this,arguments):D;return r(k(M(H,W),L,V),z,i)},b,I)},g.translateBy=function(m,D,b,I){g.transform(m,function(){return r(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof b=="function"?b.apply(this,arguments):b),e.apply(this,arguments),i)},null,I)},g.translateTo=function(m,D,b,I,z){g.transform(m,function(){var H=e.apply(this,arguments),L=this.__zoom,V=I==null?w(H):typeof I=="function"?I.apply(this,arguments):I;return r(Er.translate(V[0],V[1]).scale(L.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof b=="function"?-b.apply(this,arguments):-b),H,i)},I,z)};function M(m,D){return D=Math.max(o[0],Math.min(o[1],D)),D===m.k?m:new Et(D,m.x,m.y)}function k(m,D,b){var I=D[0]-b[0]*m.k,z=D[1]-b[1]*m.k;return I===m.x&&z===m.y?m:new Et(m.k,I,z)}function w(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function S(m,D,b,I){m.on("start.zoom",function(){T(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(I).end()}).tween("zoom",function(){var z=this,H=arguments,L=T(z,H).event(I),V=e.apply(z,H),W=b==null?w(V):typeof b=="function"?b.apply(z,H):b,pt=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),tt=z.__zoom,et=typeof D=="function"?D.apply(z,H):D,gt=u(tt.invert(W).concat(pt/tt.k),et.invert(W).concat(pt/et.k));return function(lt){if(lt===1)lt=et;else{var xt=gt(lt),O=pt/xt[2];lt=new Et(O,W[0]-xt[0]*O,W[1]-xt[1]*O)}L.zoom(null,lt)}})}function T(m,D,b){return!b&&m.__zooming||new P(m,D)}function P(m,D){this.that=m,this.args=D,this.active=0,this.sourceEvent=null,this.extent=e.apply(m,D),this.taps=0}P.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,D){return this.mouse&&m!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var D=Z(this.that).datum();l.call(m,this.that,new eo(m,{sourceEvent:this.sourceEvent,target:g,type:m,transform:this.that.__zoom,dispatch:l}),D)}};function E(m,...D){if(!t.apply(this,arguments))return;var b=T(this,D).event(m),I=this.__zoom,z=Math.max(o[0],Math.min(o[1],I.k*Math.pow(2,n.apply(this,arguments)))),H=qt(m);if(b.wheel)(b.mouse[0][0]!==H[0]||b.mouse[0][1]!==H[1])&&(b.mouse[1]=I.invert(b.mouse[0]=H)),clearTimeout(b.wheel);else{if(I.k===z)return;b.mouse=[H,I.invert(H)],te(this),b.start()}Ge(m),b.wheel=setTimeout(L,x),b.zoom("mouse",r(k(M(I,z),b.mouse[0],b.mouse[1]),b.extent,i));function L(){b.wheel=null,b.end()}}function N(m,...D){if(c||!t.apply(this,arguments))return;var b=m.currentTarget,I=T(this,D,!0).event(m),z=Z(m.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",pt,!0),H=qt(m,b),L=m.clientX,V=m.clientY;ia(m.view),Pn(m),I.mouse=[H,this.__zoom.invert(H)],te(this),I.start();function W(tt){if(Ge(tt),!I.moved){var et=tt.clientX-L,gt=tt.clientY-V;I.moved=et*et+gt*gt>y}I.event(tt).zoom("mouse",r(k(I.that.__zoom,I.mouse[0]=qt(tt,b),I.mouse[1]),I.extent,i))}function pt(tt){z.on("mousemove.zoom mouseup.zoom",null),sa(tt.view,I.moved),Ge(tt),I.event(tt).end()}}function R(m,...D){if(t.apply(this,arguments)){var b=this.__zoom,I=qt(m.changedTouches?m.changedTouches[0]:m,this),z=b.invert(I),H=b.k*(m.shiftKey?.5:2),L=r(k(M(b,H),I,z),e.apply(this,D),i);Ge(m),s>0?Z(this).transition().duration(s).call(S,L,I,m):Z(this).call(g.transform,L,I,m)}}function $(m,...D){if(t.apply(this,arguments)){var b=m.touches,I=b.length,z=T(this,D,m.changedTouches.length===I).event(m),H,L,V,W;for(Pn(m),L=0;L<I;++L)V=b[L],W=qt(V,this),W=[W,this.__zoom.invert(W),V.identifier],z.touch0?!z.touch1&&z.touch0[2]!==W[2]&&(z.touch1=W,z.taps=0):(z.touch0=W,H=!0,z.taps=1+!!f);f&&(f=clearTimeout(f)),H&&(z.taps<2&&(h=W[0],f=setTimeout(function(){f=null},p)),te(this),z.start())}}function v(m,...D){if(this.__zooming){var b=T(this,D).event(m),I=m.changedTouches,z=I.length,H,L,V,W;for(Ge(m),H=0;H<z;++H)L=I[H],V=qt(L,this),b.touch0&&b.touch0[2]===L.identifier?b.touch0[0]=V:b.touch1&&b.touch1[2]===L.identifier&&(b.touch1[0]=V);if(L=b.that.__zoom,b.touch1){var pt=b.touch0[0],tt=b.touch0[1],et=b.touch1[0],gt=b.touch1[1],lt=(lt=et[0]-pt[0])*lt+(lt=et[1]-pt[1])*lt,xt=(xt=gt[0]-tt[0])*xt+(xt=gt[1]-tt[1])*xt;L=M(L,Math.sqrt(lt/xt)),V=[(pt[0]+et[0])/2,(pt[1]+et[1])/2],W=[(tt[0]+gt[0])/2,(tt[1]+gt[1])/2]}else if(b.touch0)V=b.touch0[0],W=b.touch0[1];else return;b.zoom("touch",r(k(L,V,W),b.extent,i))}}function C(m,...D){if(this.__zooming){var b=T(this,D).event(m),I=m.changedTouches,z=I.length,H,L;for(Pn(m),c&&clearTimeout(c),c=setTimeout(function(){c=null},p),H=0;H<z;++H)L=I[H],b.touch0&&b.touch0[2]===L.identifier?delete b.touch0:b.touch1&&b.touch1[2]===L.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(L=qt(L,this),Math.hypot(h[0]-L[0],h[1]-L[1])<d)){var V=Z(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return g.wheelDelta=function(m){return arguments.length?(n=typeof m=="function"?m:Or(+m),g):n},g.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Or(!!m),g):t},g.touchable=function(m){return arguments.length?(a=typeof m=="function"?m:Or(!!m),g):a},g.extent=function(m){return arguments.length?(e=typeof m=="function"?m:Or([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),g):e},g.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],g):[o[0],o[1]]},g.translateExtent=function(m){return arguments.length?(i[0][0]=+m[0][0],i[1][0]=+m[1][0],i[0][1]=+m[0][1],i[1][1]=+m[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(m){return arguments.length?(r=m,g):r},g.duration=function(m){return arguments.length?(s=+m,g):s},g.interpolate=function(m){return arguments.length?(u=m,g):u},g.on=function(){var m=l.on.apply(l,arguments);return m===l?g:m},g.clickDistance=function(m){return arguments.length?(y=(m=+m)*m,g):Math.sqrt(y)},g.tapDistance=function(m){return arguments.length?(d=+m,g):d},g}var X=(()=>{let e=class e{static get bodyFont(){if(!this._bodyFont){let n=getComputedStyle(document.body);this._bodyFont=`${n.fontSize} ${n.fontFamily}`}return this._bodyFont}static chartSize(n){if(!n)return{width:0,height:0};let a=n.parentNode;if(!a)return{width:0,height:0};let o=getComputedStyle(a);return{height:Math.round(a.clientHeight-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)),width:Math.round(a.clientWidth-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight))}}static xScale(n,a,o=!0,i=!1){let s;return i?s=Ir().domain(me(n)):s=At().domain(me(n)),o?s.rangeRound([0,a]):s.range([0,a]),s}static yScale(n,a,o=!0,i=!1){let s;return i?s=Ir().domain([0,Math.max(...n)]):s=At().domain([0,Math.max(...n)]),o?s.rangeRound([a,0]):s.range([a,0]),s}static colorScale(n,a){return a instanceof Array?At().domain(me(n)).range([a[0],a[1]]):At().domain(me(n)).rangeRound([0,a-1])}static arcTween(n,a,o){let i=Bt({startAngle:n.startAngle,endAngle:n.endAngle},{startAngle:a.startAngle,endAngle:a.endAngle});return s=>o(i(s))}static transitionsComplete(n,a){let o=0;n.each(()=>{o++}).on("end",()=>{o--,o===0&&a()})}static convertData(n,a){return n.map(o=>{let i=typeof o[a.value.toString()]=="number"?o[a.value.toString()]:o[a.value.toString()]instanceof Date?o[a.value.toString()].valueOf():parseInt(o[a.value.toString()],10);return{id:o[a.id],value:i,category:ot(a.category)?o[a.category]:void 0,label:ot(a.label)?o[a.label]:void 0,color:ot(a.color)?o[a.color]:void 0}})}static getTextWidth(n,a=this.bodyFont){if(!ot(n)||!n.length)return 0;let i=document.createElement("canvas").getContext("2d");return i.font=a,Math.ceil(i.measureText(n).width)}static getMaxTextWidth(n,a){if(!ot(n)||!n.length)return 0;let o=0;return n.forEach(i=>{let s=this.getTextWidth(i,a);s>o&&(o=s)}),o}static trimText(n,a,o=!0,i=this.bodyFont){if(!ot(n)||!n.length)return n;let u=document.createElement("canvas").getContext("2d");u.font=i;let l=Math.ceil(u.measureText(n).width);for(;l>a;)o?n=`${n.substring(0,n.length-4)}...`:n=n.slice(0,-1),l=Math.ceil(u.measureText(n).width);return n}static wrapText(n,a,o=this.bodyFont){if(!ot(n)||!n.length)return n;let i=[],u=document.createElement("canvas").getContext("2d");u.font=o;let l=Math.ceil(u.measureText(n).width);if(l<a)return[n];let f="";for(let h of n)f+=h,l=Math.ceil(u.measureText(f).width),l>a&&(i.push(f.slice(0,-1)),f=h);return f.length&&i.push(f),i}};e.svgNS="http://www.w3.org/2000/svg";let t=e;return t})();var zn=class{static buildBarChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.valueTicks=e.valueTicks||5;let a=0,o=Math.max(...e.data.map(w=>w.value))||0,i=Z(e.container),s=e.palette&&e.palette.length?X.colorScale(e.data.map(w=>w.value),e.palette.length===2?e.palette:e.palette.length):void 0,u=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,l=yt(e.valueTickValues)?e.valueTickValues:e.data.map(w=>ot(u)?u(w.value):w.value.toString()),f=ot(e.barPadding)?e.barPadding:20,h=ot(e.barWidth)?e.barWidth:20,c={top:16,bottom:16,left:16+X.getMaxTextWidth(l,`${_.strings.FONT_SIZE_SMALL} ${_.strings.FONT_FAMILY}`),right:16},p=X.chartSize(e.container);p.width=e.data.length*(h+f);let x=X.yScale(e.data.map(w=>w.value),p.height-c.top-c.bottom).nice(),y=ar(x).ticks(e.valueTicks).tickSize(-p.width);if(yt(e.valueTickValues)){let w=At().domain([0,e.valueTickValues.length-1]).range([a,o]);e.valueTicks=[],e.valueTickValues?.forEach((S,T)=>{e.valueTicks.push(w(T))}),y.tickFormat((S,T)=>e.valueTickValues[T]||"")}yt(e.valueTicks)?y.tickValues(e.valueTicks):y.ticks(e.valueTicks),e.valueFormat?.length&&y.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&y.tickFormat(dt(e.valueDateFormat));let d=i.select(`g.${_.classes.CHART_ROOT}`);if(d.node()||(d=i.append("g").classed(_.classes.CHART_ROOT,!0),d.append("g").classed(_.classes.CHART_YAXIS,!0),d.append("g").classed(_.classes.CHART_XAXIS,!0),d.append("g").classed(`${_.classes.CHART_PREFIX}__chart`,!0).classed(`${_.classes.CHART_PREFIX}__bar`,!0)),i.attr("width",p.width+c.left),i.attr("height",p.height),i.select(`g.${_.classes.CHART_YAXIS}`).attr("transform",`translate(${c.left}, ${c.top})`).call(y),i.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${c.left}, ${p.height-c.bottom})`),yt(e.categoryTickValues)&&e.categoryTickValues?.length){let w=nr(Tr().domain(e.categoryTickValues).range([0,p.width]));i.select(`g.${_.classes.CHART_XAXIS}`).call(w)}let g=d.select(`g.${_.classes.CHART_PREFIX}__bar`);g.attr("transform",`translate(${c.left}, -${c.bottom-c.top})`);let M=g.selectAll("rect").data(e.data,w=>w.id);M.exit().transition().duration(_.numbers.TRANSITION_DURATION).attr("y",w=>p.height-c.top).attr("height",0),M.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let k=M.enter();k.append("rect").attr("x",(w,S)=>S*(h+f)+f/2).attr("y",p.height-c.top).attr("width",w=>h).attr("height",0).merge(M).attr("id",w=>`${_.classes.CHART_PREFIX}__node-${w.id}`).transition().call(X.transitionsComplete,()=>{r()}).duration(_.numbers.TRANSITION_DURATION).attr("y",w=>w.value?x(w.value)+c.bottom:0).attr("height",w=>w.value?p.height-c.top-c.bottom-x(w.value):0).attr("fill",w=>w.color?w.color:s&&w.value&&e.palette?e.palette.length===2?s(w.value):e.palette[s(w.value)]:"#fff"),e.selectedCallback&&k.selectAll("rect").on("click",(w,S)=>e.selectedCallback(S,w.target)),e.hoverCallback&&(k.selectAll("rect").on("mouseenter",(w,S)=>e.hoverCallback(!0,S,w.target)),k.selectAll("rect").on("mouseleave",(w,S)=>e.hoverCallback(!1,S,w.target)))})}};var Hn=class{static buildBubbleChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=Z(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(d=>d.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=10,u=X.chartSize(e.container),l=Pt({children:e.data}).sum(d=>d.value).sort((d,g)=>g.value-d.value);Oa().size([Math.min(u.width,u.height),Math.min(u.width,u.height)])(l);let h=a.select(`g.${_.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(_.classes.CHART_ROOT,!0),h.append("g").classed(`${_.classes.CHART_PREFIX}__chart`,!0).classed(`${_.classes.CHART_PREFIX}__bubble`,!0)),a.attr("width",u.width),a.attr("height",u.height);let p=h.select(`g.${_.classes.CHART_PREFIX}__bubble`).selectAll("g").data(l.leaves(),d=>d.data.id);p.exit().select("text").remove(),p.exit().select("circle").transition().duration(_.numbers.TRANSITION_DURATION).attr("r",0),p.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("circle"),x.append("clipPath").attr("id",d=>`${_.classes.CHART_CLIP}-${d.data.id}`).append("circle"),x.append("text").classed(_.classes.CHART_TEXT,!0).attr("clip-path",d=>`url(#${_.classes.CHART_CLIP}-${d.data.id})`).style("text-anchor","middle"),e.selectedCallback&&x.on("click",(d,g)=>e.selectedCallback(g.data,d.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(d,g)=>e.hoverCallback(!0,g.data,d.target)),x.on("mouseleave",(d,g)=>e.hoverCallback(!1,g.data,d.target)));let y=x.merge(p);y.select("text").style("display","none").attr("y",".35em").text(d=>i?i(d.data.value):d.data.value),y.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",d=>"translate("+d.x+","+d.y+")"),y.select("g > circle").attr("fill",d=>d.data.color?d.data.color:o&&d.value&&e.palette?e.palette.length===2?o(d.value):e.palette[o(d.value)]:"#fff").attr("id",d=>`${_.classes.CHART_PREFIX}__node-${d.data.id}`).transition().call(X.transitionsComplete,()=>{y.select("clipPath > circle").attr("r",d=>d.r>s/2?d.r-s/2:0),y.select("text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).attr("r",d=>d.r)})}};function ml(t){return B(t).getDay()===0}function dl(t){let e;return t.forEach(function(r){let n=B(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function gl(t){let e;return t.forEach(r=>{let n=B(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function Ln(t,e){let r=B(t),n=B(e),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function xl(t,e){let r=B(t),n=B(e),a=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return a*12+o}function Un(t,e){let r=B(t),n=B(e),a=yl(r,n),o=Math.abs(Uo(r,n));r.setDate(r.getDate()-a*o);let i=+(yl(r,n)===-a),s=a*(o-i);return s===0?0:s}function yl(t,e){let r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function vl(t){return e=>{let n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function _l(t){let e=B(t);return e.setHours(23,59,59,999),e}function bl(t){let e=B(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function wl(t){let e=B(t);return+_l(e)==+bl(e)}function Tl(t,e){let r=B(t),n=B(e),a=Ln(r,n),o=Math.abs(xl(r,n)),i;if(o<1)i=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*o);let s=Ln(r,n)===-a;wl(B(t))&&o===1&&Ln(t,n)===1&&(s=!1),i=a*(o-Number(s))}return i===0?0:i}function Cl(t,e,r){let n=Un(t,e)/7;return vl(r?.roundingMethod)(n)}function Xn(t){return B(t).getDay()}function Ml(t){return B(t).getDay()===1}function kl(t,e){return Xr(t,-e)}function Al(t,e){let r=e-Xn(t);return r<=0&&(r+=7),Xr(t,r)}function Sl(t){return Al(t,0)}function Dl(t,e){let r=Xn(t)-e;return r<=0&&(r+=7),kl(t,r)}function Nl(t){return Dl(t,1)}var Yn=class{static buildGanttChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=gl(e.data.map(N=>N.startDate));Ml(a)||(a=Nl(a));let o=dl(e.data.map(N=>N.endDate));ml(o)||(o=Sl(o));let i=Z(e.container),s,u=16,l=40,f={top:16,bottom:16,left:16,right:16},h=X.chartSize(e.container);h.height=e.data.length*(l+u);let c=8,p={x:8,y:16},x=ie,y="",d=0;switch(e.categoryTimeSpan){case"year":x=bt,y="%Y";break;case"week":x=It,y="%m/%d",d=Cl(o,a);break;case"day":x=Nt,y="%m/%d",d=Un(o,a);break;default:y="%m/%y",d=Tl(o,a);break}h.width<d*48&&(h.width=d*48);let g=X.xScale([a,o],h.width-f.left-f.right,!1,!0).nice(),M=ea(g).ticks(x,y).tickSize(-h.height),k=i.select(`g.${_.classes.CHART_ROOT}`);k.node()||(k=i.append("g").classed(_.classes.CHART_ROOT,!0),k.append("g").classed(_.classes.CHART_XAXIS,!0),k.append("g").classed(`${_.classes.CHART_PREFIX}__gantt`,!0),s=Z(e.container.parentElement).append("div").classed(`${_.classes.CHART_POPOVER}`,!0)),i.attr("width",h.width),i.attr("height",h.height+f.bottom),i.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${f.left}, ${f.top})`).call(M);let w=k.select(`g.${_.classes.CHART_PREFIX}__gantt`);w.attr("transform",`translate(${f.left}, -${f.bottom-f.top})`);let S=w.selectAll("g").data(e.data,N=>N.id);S.exit().transition().duration(_.numbers.TRANSITION_DURATION).attr("width",0),S.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let T=S.enter().append("g").attr("id",N=>`${_.classes.CHART_PREFIX}__node-${N.id}`).on("mouseenter",(N,R)=>{let $=`
            <span style="grid-column: 1 / -1; font-weight: 700">${R.label}</span>
            <span>Start</span>
            <span style="justify-self: end">${Zn(R.startDate,"MM/dd/yyyy")}</span>
            <span>End</span>
            <span style="justify-self: end">${Zn(R.endDate,"MM/dd/yyyy")}</span>
            <span>Progress</span>
            <span style="justify-self: end">${R.progress||0}%</span>
          `;R.description?.length&&($+=`<span style="grid-column: 1 / -1; font-size: .75rem;">${R.description}</span>`),s.html($).style("top",`${N.layerY}px`).style("left",`${N.layerX}px`).style("visibility","visible"),e.hoverCallback&&e.hoverCallback(!0,R,N.target)}).on("mouseleave",(N,R)=>{s.style("visibility",null),e.hoverCallback&&e.hoverCallback(!1,R,N.target)});e.selectedCallback&&T.on("click",(N,R)=>e.selectedCallback(R,N.target.parentElement));let P=T.append("defs").append("linearGradient").attr("id",(N,R)=>`meter-gradient--${R}`);P.append("stop").attr("offset","0%").attr("stop-color",_.chartPalette.indigoA200),P.append("stop").attr("offset",N=>`${N.progress||0}%`).attr("stop-color",_.chartPalette.indigoA200),P.append("stop").attr("offset",N=>`${N.progress||0}%`).attr("stop-color",_.chartPalette.indigo200),P.append("stop").attr("offset","100%").attr("stop-color",_.chartPalette.indigo200),T.append("rect").classed(_.classes.CHART_NODE,!0).attr("width",0).attr("height",l).attr("rx",4).style("stroke",N=>N.color?.length?N.color:_.chartTheme.outlineMedium).style("fill",_.chartTheme.surfaceDim),T.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",p.x).attr("y",p.y).style("font-size",".85rem").style("stroke",_.chartTheme.surfaceDim).style("stroke-width",".5rem").style("fill",_.chartTheme.textHigh).style("paint-order","stroke").style("stroke-linejoin","round").style("display","none"),T.append("rect").classed(_.classes.CHART_METER,!0).attr("x",p.x).attr("y",l-c-p.x).attr("width",0).attr("height",c).style("fill",(N,R)=>`url(#meter-gradient--${R})`);let E=T.merge(S);E.attr("transform",(N,R)=>`translate(${g(N.startDate)}, ${R*(l+u)+f.top+u/2})`),E.select(`g > .${_.classes.CHART_NODE}`).transition().duration(_.numbers.TRANSITION_DURATION).attr("width",N=>{let R=g(N.endDate)-g(N.startDate);return R>0?R:0}),E.select(`g > .${_.classes.CHART_METER}`).transition().duration(_.numbers.TRANSITION_DURATION).attr("width",N=>{let R=g(N.endDate)-g(N.startDate)-p.x*2;return R>0?R:0}),E.select("g > text").transition().call(X.transitionsComplete,()=>{E.select("g > text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).text((N,R,$)=>`${N.label}`)})}};function Il(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _m(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Il(Object(r),!0).forEach(function(n){bm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Il(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $r(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$r=function(e){return typeof e}:$r=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$r(t)}function bm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vn(){return Vn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vn.apply(this,arguments)}function wm(t,e){if(t){if(typeof t=="string")return Rl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rl(t,e)}}function Rl(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $l(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=wm(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,i=!1,s;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return o=u.done,u},e:function(u){i=!0,s=u},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(i)throw s}}}}function Tm(t,e){var r=[],n=[];function a(o,i){if(o.length===1)r.push(o[0]),n.push(o[0]);else{for(var s=Array(o.length-1),u=0;u<s.length;u++)u===0&&r.push(o[0]),u===s.length-1&&n.push(o[u+1]),s[u]=[(1-i)*o[u][0]+i*o[u+1][0],(1-i)*o[u][1]+i*o[u+1][1]];a(s,i)}}return t.length&&a(t,e),{left:r,right:n.reverse()}}function Cm(t){var e={};return t.length===4&&(e.x2=t[2][0],e.y2=t[2][1]),t.length>=3&&(e.x1=t[1][0],e.y1=t[1][1]),e.x=t[t.length-1][0],e.y=t[t.length-1][1],t.length===4?e.type="C":t.length===3?e.type="Q":e.type="L",e}function Mm(t,e){e=e||2;for(var r=[],n=t,a=1/e,o=0;o<e-1;o++){var i=a/(1-a*o),s=Tm(n,i);r.push(s.left),n=s.right}return r.push(n),r}function km(t,e,r){var n=[[t.x,t.y]];return e.x1!=null&&n.push([e.x1,e.y1]),e.x2!=null&&n.push([e.x2,e.y2]),n.push([e.x,e.y]),Mm(n,r).map(Cm)}var Am=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,je={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(je).forEach(function(t){je[t.toLowerCase()]=je[t]});function ao(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=e;return r}function Sm(t){return"".concat(t.type).concat(je[t.type].map(function(e){return t[e]}).join(","))}function Dm(t,e){var r={x1:"x",y1:"y",x2:"x",y2:"y"},n=["xAxisRotation","largeArcFlag","sweepFlag"];if(t.type!==e.type&&e.type.toUpperCase()!=="M"){var a={};Object.keys(e).forEach(function(o){var i=e[o],s=t[o];s===void 0&&(n.includes(o)?s=i:(s===void 0&&r[o]&&(s=t[r[o]]),s===void 0&&(s=0))),a[o]=s}),a.type=e.type,t=a}return t}function Nm(t,e,r){var n=[];if(e.type==="L"||e.type==="Q"||e.type==="C")n=n.concat(km(t,e,r));else{var a=Vn({},t);a.type==="M"&&(a.type="L"),n=n.concat(ao(r-1).map(function(){return a})),n.push(e)}return n}function Ol(t,e,r){var n=t.length-1,a=e.length-1,o=n/a,i=ao(a).reduce(function(u,l,f){var h=Math.floor(o*f);if(r&&h<t.length-1&&r(t[h],t[h+1])){var c=o*f%1<.5;u[h]&&(c?h>0?h-=1:h<t.length-1&&(h+=1):h<t.length-1?h+=1:h>0&&(h-=1))}return u[h]=(u[h]||0)+1,u},[]),s=i.reduce(function(u,l,f){if(f===t.length-1){var h=ao(l,Vn({},t[t.length-1]));return h[0].type==="M"&&h.forEach(function(c){c.type="L"}),u.concat(h)}return u.concat(Nm(t[f],t[f+1],l))},[]);return s.unshift(t[0]),s}function El(t){for(var e=(t||"").match(Am)||[],r=[],n,a,o=0;o<e.length;++o)if(n=je[e[o]],n){a={type:e[o]};for(var i=0;i<n.length;++i)a[n[i]]=+e[o+i+1];o+=n.length,r.push(a)}return r}function Im(t,e,r){var n=t==null?[]:t.slice(),a=e==null?[]:e.slice(),o=$r(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return[]};var u=(n.length===0||n[n.length-1].type==="Z")&&(a.length===0||a[a.length-1].type==="Z");n.length>0&&n[n.length-1].type==="Z"&&n.pop(),a.length>0&&a[a.length-1].type==="Z"&&a.pop(),n.length?a.length||a.push(n[0]):n.push(a[0]);var l=Math.abs(a.length-n.length);l!==0&&(a.length>n.length?n=Ol(n,a,i):a.length<n.length&&(a=Ol(a,n,i))),n=n.map(function(h,c){return Dm(h,a[c])});var f=n.map(function(h){return _m({},h)});return u&&(f.push({type:"Z"}),n.push({type:"Z"})),function(c){if(c===1&&s)return e??[];if(c===0)return n;for(var p=0;p<f.length;++p){var x=n[p],y=a[p],d=f[p],g=$l(je[d.type]),M;try{for(g.s();!(M=g.n()).done;){var k=M.value;d[k]=(1-c)*x[k]+c*y[k],(k==="largeArcFlag"||k==="sweepFlag")&&(d[k]=Math.round(d[k]))}}catch(w){g.e(w)}finally{g.f()}}return f}}function Fr(t,e,r){var n=El(t),a=El(e),o=$r(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return""};var u=Im(n,a,{excludeSegment:i,snapEndsToInput:s});return function(f){if(f===1&&s)return e??"";var h=u(f),c="",p=$l(h),x;try{for(p.s();!(x=p.n()).done;){var y=x.value;c+=Sm(y)}}catch(d){p.e(d)}finally{p.f()}return c}}var qn=class{static buildLineChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.categoryTicks=e.categoryTicks||10,e.valueTicks=e.valueTicks||5;let a=e.data.map(E=>E.data).reduce((E,N)=>E.concat(N),[]),o=a.map(E=>E.value),i=a.map(E=>parseFloat(E.category)).filter((E,N,R)=>R.indexOf(E)===N).sort((E,N)=>E-N),s=Math.min(...o)||0,u=Math.max(...o)||0,l=Math.min(...i)||0,f=Math.max(...i)||0,h=Z(e.container),c=2,p={top:16,bottom:16,left:16+X.getTextWidth(u.toString(),`${_.strings.FONT_SIZE_SMALL} ${_.strings.FONT_FAMILY}`),right:16},x=X.chartSize(e.container),y=X.xScale([l,f],x.width-p.left-p.right),d=nr(y);if(yt(e.categoryTickValues)){let E=At().domain([0,e.categoryTickValues.length-1]).range([l,f]);e.categoryTicks=[],e.categoryTickValues?.forEach((N,R)=>{e.categoryTicks.push(E(R))}),d.tickFormat((N,R)=>e.categoryTickValues[R]||"")}yt(e.categoryTicks)?d.tickValues(e.categoryTicks):d.ticks(e.categoryTicks),e.categoryFormat&&d.tickFormat(mt(e.categoryFormat)),e.categoryDateFormat&&d.tickFormat(dt(e.categoryDateFormat));let g=X.yScale([s,u],x.height-p.top-p.bottom),M=ar(g).tickSize(-(x.width-p.left-p.right));if(yt(e.valueTickValues)){let E=At().domain([0,e.valueTickValues.length-1]).range([s,u]);e.valueTicks=[],e.valueTickValues?.forEach((N,R)=>{e.valueTicks.push(E(R))}),M.tickFormat((N,R)=>e.valueTickValues[R]||"")}yt(e.valueTicks)?M.tickValues(e.valueTicks):M.ticks(e.valueTicks),e.valueFormat&&M.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&M.tickFormat(dt(e.valueDateFormat));let k=Qe().x(E=>y(E.category)).y(E=>g(E.value)),w=Qe().x(E=>y(E.category)).y(x.height-p.top),S=h.select(`g.${_.classes.CHART_ROOT}`);S.node()||(S=h.append("g").classed(_.classes.CHART_ROOT,!0),S.append("g").classed(_.classes.CHART_XAXIS,!0),yt(e.categoryTickValues)&&S.select(`g.${_.classes.CHART_XAXIS}`).classed(`${_.classes.CHART_PREFIX}__xaxis--align-boundry-ticks`,!0),S.append("g").classed(_.classes.CHART_YAXIS,!0),S.append("g").classed(`${_.classes.CHART_PREFIX}__line`,!0)),h.attr("width",x.width),h.attr("height",x.height),h.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${p.left}, ${x.height-p.bottom})`).call(d),h.select(`g.${_.classes.CHART_YAXIS}`).attr("transform",`translate(${p.left}, ${p.top})`).call(M);let T=S.select(`g.${_.classes.CHART_PREFIX}__line`);T.attr("transform",`translate(${p.left+c}, ${p.top})`),e.data.forEach((E,N)=>{let R=T.selectAll(`path.path-${E.id}`).data([E],v=>v.id);R.exit().remove(),R.enter().append("path").classed(`path-${E.id}`,!0).style("fill","none").style("stroke-linejoin","round").style("stroke-linecap","round").attr("d",v=>w(v.data)).merge(R).attr("stroke",v=>v.color).transition().duration(_.numbers.TRANSITION_DURATION).call(X.transitionsComplete,()=>{N===e.data.length-1&&r()}).attrTween("d",(v,C,m)=>{let D=m[0].getAttribute("d"),b=k(v.data);return Fr(D,b)})});let P=T.selectAll("path").nodes();if(P.length>e.data.length)for(let E=P.length;E>e.data.length;E--)P[E-1]?.remove()})}};var Je=class{static buildPieChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=[],o=Z(e.container),i=e.palette&&e.palette.length?X.colorScale(e.data.map(g=>g.value),e.palette.length===2?e.palette:e.palette.length):void 0,s=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,u=X.chartSize(e.container),l={outer:Math.min(u.width,u.height)/2,inner:0};(e.type==="donut"||e.type==="donut-meter")&&(l.inner=l.outer-l.outer*.35);let f=Ka().outerRadius(l.outer).innerRadius(l.inner),h=to().value(g=>g.value).sort(null),c=o.select(`g.${_.classes.CHART_ROOT}`);c.node()||(c=o.append("g").classed(_.classes.CHART_ROOT,!0),c.append("g").classed(`${_.classes.CHART_PREFIX}__${e.type}`,!0)),o.attr("width",u.width),o.attr("height",u.height);let p=c.select(`g.${_.classes.CHART_PREFIX}__${e.type}`);p.attr("transform",`translate(${l.outer}, ${l.outer})`),p.selectAll("g").select("path").each(g=>{a[g.data.id]={startAngle:g.startAngle,endAngle:g.endAngle}});let x=p.selectAll("g").data(h(e.data),g=>g.data.id);x.exit().select("path").transition().duration(_.numbers.TRANSITION_DURATION).attrTween("d",g=>X.arcTween(g,{startAngle:0,endAngle:0},f)),x.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let y=x.enter().append("g");y.append("path"),e.selectedCallback&&y.on("click",(g,M)=>e.selectedCallback(M.data,g.target.parentElement)),e.hoverCallback&&(y.on("mouseenter",(g,M)=>e.hoverCallback(!0,M.data,g.target)),y.on("mouseleave",(g,M)=>e.hoverCallback(!1,M.data,g.target))),y.merge(x).select("g > path").attr("fill",g=>g.data.color?g.data.color:i&&g.value&&e.palette?e.palette.length===2?i(g.value):e.palette[i(g.value)]:"#fff").attr("id",g=>`${_.classes.CHART_PREFIX}__node-${g.data.id}`).transition().call(X.transitionsComplete,()=>{switch(e.type){case"donut-meter":if(!e.hideLabel){let g=p.select("."+_.classes.CHART_TEXT);g.node()||(g=p.append("text").style("fill",_.chartTheme.textHigh).style("text-anchor","middle").classed(_.classes.CHART_TEXT,!0),g.append("tspan").style("font-size","2rem").classed(_.classes.CHART_TEXT_VALUE,!0),g.append("tspan").attr("x",0).attr("y",0).attr("dy","1.25em").classed(_.classes.CHART_TEXT_LABEL,!0));let M="";e.centerValue?M=e.centerValue:s?M=s(e.data[0].value):M=e.data[0].value.toString(),g.select(`tspan.${_.classes.CHART_TEXT_VALUE}`).text(M),g.select(`tspan.${_.classes.CHART_TEXT_LABEL}`).text(ot(e.data[0].label)?e.data[0].label:"");break}}r()}).duration(_.numbers.TRANSITION_DURATION).style("stroke","#fff").attrTween("d",g=>X.arcTween(a[g.data.id]||{startAngle:0,endAngle:0},g,f))})}};var Fl=(()=>{let e=class e{static buildTreeChart(n){return new Promise((a,o)=>{if(!n.container||n.container.tagName!=="svg"){o();return}let i=Z(n.container),s={width:0,height:0},u=[],l=8,f="#212121",h={width:i.attr("width")?parseInt(i.attr("width"),10):0,height:i.attr("height")?parseInt(i.attr("height"),10):0},c=Pt(n.data),x=Fa().nodeSize([n.node.size.width+24,n.node.size.height+n.node.margin]).separation((v,C)=>v.parent===C.parent?1:1.25)(c),y=0,d=0;x.descendants().filter(v=>v.depth>0).forEach(v=>{if(!ot(v.data.nodeId)){let C=this.getParentDepths(v),m=[];this.getParentIds(v).forEach((D,b)=>{m.push(`${C[b]}-${D}`)}),m.push(`${v.depth}-${v.data.id}`),v.data.nodeId=m.join("--")}v.y=(v.depth-1)*(n.node.size.height+n.node.margin),v.y>s.height&&(s.height=v.y),v.x>d?d=v.x:v.x<y&&(y=v.x)});let g=i.select(`g.${_.classes.CHART_ROOT}`);g.node()||(g=i.append("g").classed(_.classes.CHART_ROOT,!0),g.append("g").classed(`${_.classes.CHART_PREFIX}__tree`,!0));let M=g.node().getCTM().a;if(s.width=(Math.abs(y)+d+n.node.size.width)*M+l*2,s.height=(s.height+n.node.size.height)*M+l*2,h.width<s.width&&i.attr("width",s.width),h.height<s.height&&i.attr("height",s.height),n.zoomScale){let v=_o(i.node().parentElement,!0),C={left:0,top:0,x:0,y:0};i.style("cursor","grab"),i.call(no().scaleExtent([n.zoomScale.min,n.zoomScale.max]).on("zoom",m=>{if(m.sourceEvent.type==="mousemove")v&&(v.scrollTop=C.top+(C.y-m.sourceEvent.clientY),v.scrollLeft=C.left+(C.x-m.sourceEvent.clientX));else if(m.sourceEvent.type==="wheel"){g.attr("transform",`scale(${m.transform.k},${m.transform.k})`);let D=g.node().getBBox();s.width=D.width*m.transform.k+l*2,s.height=D.height*m.transform.k+l*2,i.attr("width",s.width),i.attr("height",s.height)}}).on("start",m=>{m.sourceEvent.type==="mousedown"&&(C={left:v.scrollLeft,top:v.scrollTop,x:m.sourceEvent.clientX,y:m.sourceEvent.clientY})}))}let k=g.select(`g.${_.classes.CHART_PREFIX}__tree`);k.attr("transform",`translate(${Math.abs(y)+Math.round(n.node.size.width/2)+l}, ${l})`);let w=k.selectAll(`.${_.classes.CHART_PREFIX}__tree__node`).data(c.descendants().filter(v=>v.depth>0),v=>v.data.nodeId),S=w.exit();S.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",v=>v.parent?`translate(${this.nodeCenterHorizontal(v,n.node.size.width,v.parent.x)}, ${v.parent.y})`:`translate(${this.nodeCenterHorizontal(v,n.node.size.width)}, ${v.y})`).remove();let T=w.enter().append("g").classed(`${_.classes.CHART_PREFIX}__tree__node`,!0).attr("transform",v=>v.parent?`translate(${this.nodeCenterHorizontal(v,n.node.size.width,v.parent.x)}, ${v.parent.y})`:`translate(${this.nodeCenterHorizontal(v,n.node.size.width)}, ${v.y})`).attr("cursor",v=>v.data.children===!0||yt(v.data.children)&&v.data.children.length?"pointer":"default");T.append("rect").attr("width",n.node.size.width).attr("height",n.node.size.height).attr("rx",4).style("stroke",_.chartTheme.outlineMedium).style("fill",v=>n.palette[v.depth-Math.trunc(v.depth/n.palette.length)*n.palette.length]),n.nodeBuilder?n.nodeBuilder(T):T.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",n.node.padding).attr("y",n.node.size.height/2).style("pointer-events","none").style("dominant-baseline","middle").text((v,C)=>{if(!ot(v.data.label))return null;let m=n.node.size.width-n.node.padding*2;return n.popoverCallback&&(m=m-24),this.hasChildren(v)&&(m=m-24),X.trimText(v.data.label,m)}),n.selectedCallback&&T.on("click",(v,C)=>n.selectedCallback(C.data,this.getParentIds(C),v.target.parentElement)),n.hoverCallback&&(T.on("mouseenter",(v,C)=>n.hoverCallback(!0,C.data,this.getParentIds(C),v.target)),T.on("mouseleave",(v,C)=>n.hoverCallback(!1,C.data,this.getParentIds(C),v.target)));let P=T.merge(w);P.transition().call(X.transitionsComplete,()=>{h.width>s.width&&i.attr("width",s.width),h.height>s.height&&i.attr("height",s.height);let v=T.nodes().length?T.data()[0].parent:S.nodes().length?S.data().sort((C,m)=>C.depth<m.depth)[0].parent:null;if(ot(v)&&v.depth>0){let C=w.filter(m=>m.data.nodeId===v.data.nodeId).node();C&&C.scrollIntoView({behavior:"smooth"})}a()}).duration(_.numbers.TRANSITION_DURATION).attr("transform",v=>`translate(${this.nodeCenterHorizontal(v,n.node.size.width)}, ${v.y})`);let E=(v,C)=>{let m=(v.y-C.y)/2;return Qe()([[v.x,v.y],[v.x,v.y-m],[C.x,C.y+m],[C.x,C.y]])},N=k.selectAll(`.${_.classes.CHART_PREFIX}__tree__path`).data(c.descendants().filter(v=>v.depth>1),v=>v.data.nodeId);if(N.exit().transition().duration(_.numbers.TRANSITION_DURATION).attrTween("d",(v,C,m)=>{let D=m[C].getAttribute("d"),b=E({x:Math.round(v.parent.x),y:Math.round(v.parent.y+n.node.size.height)},{x:Math.round(v.parent.x),y:Math.round(v.parent.y+n.node.size.height)});return Fr(D,b)}).remove(),N.enter().insert("path").classed(`${_.classes.CHART_PREFIX}__tree__path`,!0).style("fill","none").style("stroke",_.chartTheme.outlineMedium).style("shape-rendering","crispEdges").style("stroke-width","2").merge(N).transition().call(X.transitionsComplete,()=>{k.selectAll(`.${_.classes.CHART_PREFIX}__tree__path-label`).raise()}).duration(_.numbers.TRANSITION_DURATION).attrTween("d",(v,C,m)=>{let D=m[C].getAttribute("d"),b=E({x:Math.round(v.parent.x),y:Math.round(v.parent.y+n.node.size.height)},{x:Math.round(v.x),y:Math.round(v.y)});return Fr(D,b)}),n.levelLabels.length){let v=k.selectAll(`.${_.classes.CHART_PREFIX}__tree__path-label`).data(c.descendants().filter(b=>b.depth>0&&yt(b.data.children)&&b.data.children.length),b=>b.data.nodeId),C=24,m=v.enter().insert("g").classed(`${_.classes.CHART_PREFIX}__tree__path-label`,!0).attr("visibility","hidden").attr("transform",b=>`translate(${this.nodeCenterHorizontal(b,n.node.size.width)}, ${b.y+n.node.size.height+n.node.padding})`);m.append("rect").attr("width",b=>{let I=b.depth-1,z=n.levelLabels[I];return!ot(z)||!z.length?(u[I]=0,0):(u[I]||(u[I]=X.getTextWidth(z,"14px Roboto, sans-serif")+C),u[I])}).attr("transform",b=>`translate(${n.node.size.width/2-u[b.depth-1]/2}, 0)`).attr("height",C).attr("rx",C/2).style("fill",_.chartTheme.outlineMedium),m.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",Math.round(n.node.size.width/2)).attr("y",C/2).style("pointer-events","none").style("dominant-baseline","middle").style("text-anchor","middle").style("font-size","14px").style("fill",_.chartTheme.textInverse).text(b=>n.levelLabels[b.depth-1]),v.exit().remove(),m.merge(v).transition().call(X.transitionsComplete,()=>{m.attr("visibility",null),a()}).duration(_.numbers.TRANSITION_DURATION).attr("transform",b=>`translate(${this.nodeCenterHorizontal(b,n.node.size.width)}, ${b.y+n.node.size.height+(n.node.margin-C)/2})`)}P.each((v,C)=>{let m=Z(P.nodes()[C]),D=Z(m.node()?.querySelector(`.${_.classes.CHART_PREFIX}__tree__node__children-icon`));if(this.hasChildren(v)?D.node()||m.append("path").classed(`${_.classes.CHART_PREFIX}__tree__node__children-icon`,!0).attr("d","M0,0L12,0L6,6,L0,0").attr("transform",`translate(${n.node.size.width-20}, ${n.node.size.height/2-4})`).style("fill",f):D.node()&&D.remove(),n.popoverCallback){let b=Z(m.node()?.querySelector(`.${_.classes.CHART_PREFIX}__tree__node__info-icon`));if(!b.node()){let I=this.hasChildren(v)?n.node.size.width-54:n.node.size.width-32;b=m.append("path").classed(`${_.classes.CHART_PREFIX}__tree__node__info-icon`,!0).attr("d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z").attr("transform",`translate(${I}, ${n.node.size.height/2-12})`).style("fill",f).attr("cursor","pointer").on("click",z=>{z.stopPropagation();let H=JSON.parse(JSON.stringify(v.data));delete H.children,delete H.nodeId,n.popoverCallback(H,this.getParentIds(v),b.node())})}}})})}};e.hasChildren=n=>n.data.children===!0||yt(n.data.children)&&n.data.children.length>0,e.getParentIds=n=>{let a=[],o=n.parent;for(;o;)a.push(o.data.id),o=o.parent;return a.reverse().slice(1)},e.getParentDepths=n=>{let a=[],o=n.parent;for(;o;)a.push(o.depth),o=o.parent;return a.reverse().slice(1)},e.nodeCenterHorizontal=(n,a,o=n.x)=>Math.round(o-a/2);let t=e;return t})();var Bn=class{static buildTreemapChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=Z(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(d=>d.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=8,u=X.chartSize(e.container),l=Pt({children:e.data}).sum(d=>d.value).sort((d,g)=>g.value-d.value);Pa().size([u.width,u.height])(l);let h=a.select(`g.${_.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(_.classes.CHART_ROOT,!0),h.append("g").classed(`${_.classes.CHART_PREFIX}__treemap`,!0)),a.attr("width",u.width),a.attr("height",u.height);let p=h.select(`g.${_.classes.CHART_PREFIX}__treemap`).selectAll("g").data(l.leaves(),d=>d.data.id);p.exit().select("text").remove(),p.exit().select("rect").transition().duration(_.numbers.TRANSITION_DURATION).attr("width",0).attr("height",0),p.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("rect"),x.append("clipPath").attr("id",d=>`${_.classes.CHART_CLIP}-${d.data.id}`).append("rect"),x.append("text").classed(_.classes.CHART_TEXT,!0).attr("clip-path",d=>`url(#${_.classes.CHART_CLIP}-${d.data.id})`).attr("dx",5).attr("dy",20),e.selectedCallback&&x.on("click",(d,g)=>e.selectedCallback(g.data,d.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(d,g)=>e.hoverCallback(!0,g.data,d.target)),x.on("mouseleave",(d,g)=>e.hoverCallback(!1,g.data,d.target)));let y=x.merge(p);y.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",d=>`translate(${d.x0}, ${d.y0})`),y.select("text").style("display","none").text(d=>i?i(d.data.value):d.data.value),y.select("rect").attr("fill",d=>d.color?d.color:o&&d.value&&e.palette?e.palette.length===2?o(d.value):e.palette[o(d.value)]:"#fff").style("stroke","#fff").attr("id",d=>`${_.classes.CHART_PREFIX}__node-${d.data.id}`).transition().call(X.transitionsComplete,()=>{y.select("clipPath > rect").attr("x",d=>s/2).attr("y",d=>s/2).attr("width",d=>d.x1-d.x0>s?d.x1-d.x0-s:0).attr("height",d=>d.y1-d.y0>s?d.y1-d.y0-s:0),y.select("text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).attr("width",d=>d.x1-d.x0).attr("height",d=>d.y1-d.y0)})}};var Om=["chartContainer"];function Em(t,e){if(t&1&&(j(0,"forge-list-item"),jt(1,"div",6),j(2,"span"),at(3),J(),j(4,"span",7),at(5),J()()),t&2){let r=e.$implicit;rt(),po("--item-color",r.color),rt(2),Wn(r.label),rt(2),Wn(r.value)}}function $m(t,e){if(t&1&&(j(0,"div",3)(1,"forge-list",4),Ke(2,Em,6,4,"forge-list-item",5),J()()),t&2){let r=tr();rt(2),st("ngForOf",r.legendData)}}var io=(()=>{var e;let r=class r{constructor(){Pr(this,e);this.destroyRef=Hr(Lr),this.chartPalette=Object.keys(_.chartPalette).map(a=>_.chartPalette[a]),Ne(this,e,F.bar),this.donutMeterChartData=0,this.showLegend=!1}set chartType(a){Ne(this,e,a),this.setChartData("create"),this.initializeChartContainer(),requestAnimationFrame(()=>{this.drawChart()}),Gt(this,e)===F.donutMeter||Gt(this,e)===F.gantt||Gt(this,e)===F.treemap||Gt(this,e)===F.tree?this.showLegend=!1:this.showLegend=!0}get chartType(){return Gt(this,e)}ngOnInit(){Ut(window,"resize").pipe(Xt(this.destroyRef),zr(100)).subscribe(()=>this.drawChart())}onAction(a){this.setChartData(a),this.drawChart()}initializeChartContainer(){(this.chartContainer?.nativeElement).querySelector("svg")?.remove();let a=document.createElementNS("http://www.w3.org/2000/svg","svg");(this.chartContainer?.nativeElement).appendChild(a)}setChartData(a){if(this.chartType===F.donutMeter){this.donutMeterChartData=this.randomNumber(20,80);return}switch(a){case"create":{this.chartType===F.line?this.lineChartData=[this.getData(10)]:this.chartType===F.tree?this.treeChartData={id:"0",children:[{id:"0-1",label:"Item 0-1",children:!0},{id:"0-2",label:"Item 0-2",children:!0}]}:this.chartData=this.getData(10);break}case"update":{this.chartType===F.line?this.lineChartData?.forEach((o,i)=>{this.getData(o.length).forEach((s,u)=>{o[u].value=s.value})}):this.getData(this.chartData.length).forEach((o,i)=>{this.chartData[i].value=o.value});break}case"add":{if(this.chartType===F.line)this.lineChartData?.push(this.getData(10));else{let o=Math.max(...this.chartData.map(i=>i.id))||0;o++,this.chartData=this.chartData?.concat(this.getData(10,o))}break}case"delete":{this.chartType===F.line?this.lineChartData?.pop():this.chartData.length>10&&(this.chartData=this.chartData?.slice(0,this.chartData.length-10));break}}(this.chartType===F.bubble||this.chartType===F.donut||this.chartType===F.pie||this.chartType===F.treemap)&&(this.chartData=this.chartData?.sort((o,i)=>o.category-i.category))}getData(a,o=0){let i=[],s=Date.now();for(let u=0;u<a;u++)i.push({id:u+o,value:this.randomNumber(0,1e3),label:`Item ${u+o}`,category:this.randomNumber(0,100)});return console.log(i.sort((u,l)=>u.category-l.category)),i.sort((u,l)=>u.category-l.category)}drawChart(){this.legendData=this.chartData?.map((o,i)=>({id:o.id,label:o.label,value:o.value,color:this.chartPalette[i%this.chartPalette.length]}));let a={container:this.chartContainer?.nativeElement.querySelector("svg"),data:this.chartData?.map((o,i)=>Qt(Lt({},o),{color:this.chartPalette[i%this.chartPalette.length]})),palette:this.chartPalette,selectedCallback:this.selectedCallback,hoverCallback:this.hoverCallback};switch(a.container.setAttribute("width","0"),a.container.setAttribute("height","0"),this.chartType){case F.bar:{let o=Lt({},a);zn.buildBarChart(o);break}case F.bubble:{Hn.buildBubbleChart(a);break}case F.donut:{let o=Qt(Lt({},a),{type:"donut"});Je.buildPieChart(o);break}case F.donutMeter:{let o=Qt(Lt({},a),{type:"donut-meter",data:[{id:0,value:this.donutMeterChartData,label:"percent",color:_.chartPalette.indigoA200},{id:1,value:100-this.donutMeterChartData,color:_.chartPalette.grey400}]});Je.buildPieChart(o);break}case F.line:{let o=this.lineChartData?.map((s,u)=>({id:u,label:`Item ${u}`,data:s,color:this.chartPalette[u%this.chartPalette.length]})),i=Qt(Lt({},a),{data:o});qn.buildLineChart(i),this.legendData=o?.map((s,u)=>({id:s.id,color:s.color,value:null,label:s.data[0].label}));break}case F.pie:{let o=Qt(Lt({},a),{type:"pie"});Je.buildPieChart(o);break}case F.treemap:{Bn.buildTreemapChart(a);break}case F.tree:{let o=Qt(Lt({},a),{data:this.treeChartData,node:{size:{width:200,height:48},padding:8,margin:48},palette:["#6f74dd","#8e99f3","#d1d9ff","#ede7f6","#e3f2fd","#e0f2f1","#f1f8e9","#eceff1","#f5f5f5"],levelLabels:["Level one","Level two","Level three"],zoomScale:{min:.5,max:1},selectedCallback:(i,s,u)=>{if(console.log(`selectedCallback: ${i.id}`),i.children){if(Array.isArray(i.children))i.children=!0;else{let l=this.randomNumber(5,10);i.children=[];for(let f=0;f<l;f++)i.children.push({id:`${s.length+1}-${f}`,label:`Item ${s.length+1} - ${f}`,children:!!this.randomNumber(0,10)})}this.drawChart()}}});Fl.buildTreeChart(o);break}case F.gantt:{let o=Qt(Lt({},a),{data:[{id:0,label:"Item 01",startDate:new Date(2024,0,1),endDate:new Date(2024,0,31),progress:10},{id:1,label:"Item 02",startDate:new Date(2024,1,1),endDate:new Date(2024,1,10),progress:20},{id:2,label:"Item 03",startDate:new Date(2024,1,1),endDate:new Date(2024,1,20),progress:30},{id:3,label:"Item 04",startDate:new Date(2024,3,15),endDate:new Date(2024,8,20),progress:40,color:"red"},{id:4,label:"Item 05",description:"Item 05 description goes here, blah blah blah.  This description should wrap at 320px",startDate:new Date(2024,10,1),endDate:new Date(2025,10,30),progress:90}]});Yn.buildGanttChart(o);break}}}randomNumber(a,o){return Math.floor(Math.random()*(o-a+1))+a}selectedCallback(a,o){console.log(a),console.log(o)}hoverCallback(a,o,i){console.log(o),console.log(i)}};e=new WeakMap,r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=Ie({type:r,selectors:[["app-charts-d3-chart"]],viewQuery:function(o,i){if(o&1&&le(Om,7),o&2){let s;ce(s=fe())&&(i.chartContainer=s.first)}},inputs:{chartType:"chartType"},standalone:!0,features:[Oe],decls:4,vars:1,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container","app-chart"],[1,"legend-container"],[1,"chart-legend"],[4,"ngFor","ngForOf"],["slot","start"],["slot","secondary-text"]],template:function(o,i){o&1&&(j(0,"div",1),jt(1,"div",2,0),J(),Ke(3,$m,3,1,"div",3)),o&2&&(rt(3),Ur(i.showLegend?3:-1))},dependencies:[Ee,vo,So,Ao,Do,ko],styles:[`[_nghost-%COMP%]{overflow-x:auto;overflow-y:hidden;height:100%;width:100%;display:grid;grid-template-columns:1fr auto;column-gap:16px}[_nghost-%COMP%]     .app-chart{--app-chart-text-high: var(--forge-theme-text-high, rgba(0, 0, 0, .87));--app-chart-text-medium: var(--forge-theme-text-medium, rgba(0, 0, 0, .6));--app-chart-text-inverse: var(--forge-theme-on-surface-inverse, #ffffff);--app-chart-outline: var(--forge-theme-outline, #e0e0e0);--app-chart-outline-medium: var(--forge-theme-outline-medium, #757575);--app-chart-surface: var(--forge-theme-surface, #ffffff);--app-chart-surface-dim: var(--forge-theme-surface-dim, #f5f5f5)}[_nghost-%COMP%]     .app-chart__xaxis, [_nghost-%COMP%]     .app-chart__yaxis{font-family:Roboto,sans-serif;font-size:10px}[_nghost-%COMP%]     .app-chart__xaxis .domain, [_nghost-%COMP%]     .app-chart__yaxis .domain{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis .tick line, [_nghost-%COMP%]     .app-chart__yaxis .tick line{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:first-of-type>text{text-anchor:start}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:last-of-type>text{text-anchor:end}[_nghost-%COMP%]     .app-chart__popover{position:absolute;border:1px solid var(--app-chart-outline);border-radius:4px;background-color:var(--app-chart-surface);padding:4px 8px;font-size:.85rem;display:grid;grid-template-columns:auto 1fr;column-gap:8px;pointer-events:none;visibility:hidden;min-width:176px;max-width:320px;word-break:break-word}.chart-card[_ngcontent-%COMP%]{padding:8px;margin:24px;background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border-color:var(--forge-theme-outline);box-shadow:var(--forge-elevation-1)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.legend-container[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;min-width:280px;max-height:100%;background-color:var(--forge-theme-surface);border-left:1px solid var(--forge-theme-outline);--forge-list-item-padding: 0;padding:16px}.legend-container[_ngcontent-%COMP%]   forge-list-item[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{background-color:var(--item-color);width:24px;height:24px}  .chart-legend [slot=leading]{width:16px;height:16px;background-color:var(--item-color)}






/*# sourceMappingURL=d3-chart.component-5O2YOFZK.css.map */`]});let t=r;return t})();var so=(()=>{let e=class e{static loadGoogleChartService(){return new co(n=>{let a=document.querySelector('script[src="https://www.gstatic.com/charts/loader.js"]');a?(n.next(),n.complete()):(a=document.createElement("script"),a.type="text/javascript",a.src="https://www.gstatic.com/charts/loader.js",a.onload=()=>{n.next(),n.complete()},document.body.appendChild(a))})}};e.\u0275fac=function(a){return new(a||e)},e.\u0275prov=ho({token:e,factory:e.\u0275fac});let t=e;return t})();var Fm=["chartContainer"],uo=(()=>{var e;let r=class r{constructor(){Pr(this,e);this.destroyRef=Hr(Lr),this.chartAnimation={startup:!0,duration:500},this.chartScale=1,this.googleChartsLoaded=!1,this.chartIsPanning=!1,Ne(this,e,F.bar)}set chartType(a){Ne(this,e,a),this.googleChartsLoaded&&this.drawChart("create")}get chartType(){return Gt(this,e)}ngOnInit(){so.loadGoogleChartService().subscribe(()=>{google.charts.load("current",{packages:["corechart","treemap","orgchart","gantt"]}).then(()=>{this.googleChartsLoaded=!0,this.drawChart("create")})}),Ut(window,"resize").pipe(Xt(this.destroyRef),zr(100)).subscribe(()=>this.drawChart("redraw")),Ut(this.chartContainer?.nativeElement,"wheel").pipe(Xt(this.destroyRef)).subscribe(a=>{let o=(this.chartContainer?.nativeElement).firstElementChild;a.deltaY>0&&this.chartScale<5.05?(this.chartScale+=.05,o.style.transform=`scale(${this.chartScale})`):a.deltaY<0&&this.chartScale>.1&&(this.chartScale-=.05,o.style.transform=`scale(${this.chartScale})`)})}ngOnDestroy(){this.chart?.clearChart()}onAction(a){this.drawChart(a)}drawChart(a){a!=="redraw"&&this.setChartData(a);let o=this.chartContainer?.nativeElement.clientWidth,i=this.chartContainer?.nativeElement.clientHeight;switch(this.chartType){case F.bar:{a==="create"&&(this.chart=new google.visualization.ColumnChart(this.chartContainer?.nativeElement),this.addChartEvents());let s={title:"Bar Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,s);break}case F.bubble:{a==="create"&&(this.chart=new google.visualization.BubbleChart(this.chartContainer?.nativeElement),this.addChartEvents());let s={title:"Bubble Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,s);break}case F.donut:{a==="create"&&(this.chart=new google.visualization.PieChart(this.chartContainer?.nativeElement),this.addChartEvents());let s={title:"Donut Chart",pieHole:.5};this.chart.draw(this.chartData,s);break}case F.pie:{a==="create"&&(this.chart=new google.visualization.PieChart(this.chartContainer?.nativeElement),this.addChartEvents());let s={title:"Pie Chart"};this.chart.draw(this.chartData,s);break}case F.line:{a==="create"&&(this.chart=new google.visualization.LineChart(this.chartContainer?.nativeElement),this.addChartEvents());let s={title:"Line Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,s);break}case F.treemap:{a==="create"&&(this.chart=new google.visualization.TreeMap(this.chartContainer?.nativeElement),this.addChartEvents());let s={title:"Treemap Chart"};this.chart.draw(this.chartData,s);break}case F.tree:{a==="create"&&(this.chart=new google.visualization.OrgChart(this.chartContainer?.nativeElement),this.addChartEvents());let s={allowCollapse:!0,allowHtml:!0,nodeClass:"app--chart--tree-node",selectedNodeClass:"app--chart--tree-node--selected"};this.chart.draw(this.chartData,s);break}case F.gantt:{a==="create"&&(this.chart=new google.visualization.Gantt(this.chartContainer?.nativeElement),this.addChartEvents());let s={};this.chart.draw(this.chartData,s)}}}setChartData(a){let o=this.chartData?.getNumberOfRows()||0,i=this.chartData?.getNumberOfColumns()||0;switch(a){case"create":{switch(this.chartData=new google.visualization.DataTable,this.chartType){case F.bar:case F.donut:case F.pie:this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Value","value"),this.chartData.addRows(this.getData(10,0).map(s=>[s.label,s.value]));break;case F.bubble:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Size","size");let s=[];for(let u=0;u<10;u++)s.push([u.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${u}`,this.randomNumber(0,1e3)]);this.chartData.addRows(s);break}case F.line:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Line 1","line1"),this.chartData.addColumn("number","Line 2","line2"),this.chartData.addColumn("number","Line 3","line3");let s=[];for(let u=0;u<10;u++)s.push([`Item ${u}`,this.randomNumber(0,1e3),this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);this.chartData.addRows(s);break}case F.treemap:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("string","Parent","parent"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addRow(["Root",null,0,0]),this.chartData.addRows(this.getData(20,0).map(s=>[s.label,"Root",s.value,s.category]));break}case F.tree:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","ParentId","parentId"),this.chartData.addRow([{v:"0",f:"Item 0"},null]),this.chartData.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}case F.gantt:this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","Name","name"),this.chartData.addColumn("string","Resource","resource"),this.chartData.addColumn("date","Start Date","startDate"),this.chartData.addColumn("date","End Date","endDate"),this.chartData.addColumn("number","Duration","duration"),this.chartData.addColumn("number","Progress","progress"),this.chartData.addColumn("string","Dependencies","dependencies"),this.chartData.addRows([["0","Item 01","",new Date(2024,0,1),new Date(2024,0,31),null,10,null],["1","Item 02","",new Date(2024,1,1),new Date(2024,1,10),null,20,null],["2","Item 03","",new Date(2024,1,1),new Date(2024,1,20),null,30,null],["3","Item 04","",new Date(2024,3,15),new Date(2024,8,20),null,40,null],["4","Item 05","",new Date(2024,10,1),new Date(2025,10,30),null,90,null]])}break}case"update":{switch(this.chartType){case F.bar:case F.donut:case F.pie:{this.getData(o).forEach((u,l)=>{this.chartData?.setValue(l,1,u.value)});break}case F.bubble:{for(let s=0;s<o;s++)this.chartData?.setValue(s,1,this.randomNumber(0,1e3)),this.chartData?.setValue(s,2,this.randomNumber(0,1e3)),this.chartData?.setValue(s,4,this.randomNumber(0,1e3));break}case F.line:{for(let s=0;s<o;s++)for(let u=1;u<i;u++)this.chartData?.setValue(s,u,this.randomNumber(0,1e3));break}case F.treemap:{for(let s=1;s<o;s++)this.chartData?.setValue(s,2,this.randomNumber(0,1e3)),this.chartData?.setValue(s,3,this.randomNumber(0,1e3));break}case F.tree:{this.chartData?.removeRows(0,this.chartData.getNumberOfRows()),this.chartData?.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}}break}case"add":{switch(this.chartType){case F.bar:case F.donut:case F.pie:{this.chartData?.addRows(this.getData(1,o).map(s=>[s.label,s.value]));break}case F.bubble:{this.chartData?.addRow([o.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${o}`,this.randomNumber(0,1e3)]);break}case F.line:{this.chartData?.addColumn("number",`Line ${i}`,`line${i}`);for(let s=0;s<10;s++)this.chartData?.setValue(s,i,this.randomNumber(0,1e3));break}case F.treemap:{this.chartData?.addRow([`Item ${o}`,"Root",this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);break}}break}case"delete":{if(o>1)switch(this.chartType){case F.bar:case F.bubble:case F.donut:case F.pie:case F.treemap:{this.chartData?.removeRow(o-1);break}case F.line:{this.chartData?.removeColumn(i-1);break}}break}}}getData(a,o=0){let i=[];for(let s=0;s<a;s++)i.push({id:s+o,value:this.randomNumber(0,1e3),label:`Item ${s+o}`,category:this.randomNumber(0,100)});return i}randomNumber(a,o){return Math.floor(Math.random()*(o-a+1))+a}addChartEvents(){google.visualization.events.addListener(this.chart,"ready",()=>{console.log("chart ready"),this.chartScale=1,this.addZoomPanEvents()}),google.visualization.events.addListener(this.chart,"select",()=>{console.log("chart item selected"),console.log(this.chart?.getSelection())}),google.visualization.events.addListener(this.chart,"mousedown",()=>{console.log("mousedown")})}buildTreeNodeData(a,o=1){let i=[],s=this.randomNumber(0,5);for(let u=0;u<s;u++)i.push([{v:`${a}-${u}`,f:`Item ${a}-${u}`},a]),o>1&&i.push(...this.buildTreeNodeData(`${a}-${u}`,o-1));return i}addZoomPanEvents(){let a=(this.chartContainer?.nativeElement).firstElementChild;Ut(a,"mousedown").pipe(Xt(this.destroyRef)).subscribe(o=>{this.chartIsPanning=!0,(this.chartContainer?.nativeElement).classList.add("app--chart--panning")}),Ut(a,"mousemove").pipe(Xt(this.destroyRef),fo(()=>this.chartIsPanning)).subscribe(o=>{(this.chartContainer?.nativeElement).scrollBy(o.movementX*-1,o.movementY*-1)}),Ut(a,"mouseup").pipe(Xt(this.destroyRef)).subscribe(()=>{this.chartIsPanning=!1,(this.chartContainer?.nativeElement).classList.remove("app--chart--panning")}),Ut(a,"mouseout").pipe(Xt(this.destroyRef)).subscribe(()=>{this.chartIsPanning=!1,(this.chartContainer?.nativeElement).classList.remove("app--chart--panning")})}};e=new WeakMap,r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=Ie({type:r,selectors:[["app-charts-google-chart"]],viewQuery:function(o,i){if(o&1&&le(Fm,7),o&2){let s;ce(s=fe())&&(i.chartContainer=s.first)}},inputs:{chartType:"chartType"},standalone:!0,features:[yo([so]),Oe],decls:3,vars:0,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container"]],template:function(o,i){o&1&&(j(0,"div",1),jt(1,"div",2,0),J())},dependencies:[Ee],styles:[`[_nghost-%COMP%]{display:block;height:100%;width:100%}  .app--chart--tree-node{border:1px solid var(--forge-theme-outline);white-space:nowrap;background-color:#e8eaf6}  .app--chart--tree-node--selected{background-color:#3f51b5;color:#fff}  .app--chart--panning{-webkit-user-select:none;user-select:none}.chart-card[_ngcontent-%COMP%]{margin:24px;height:calc(100% - 48px);background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border-color:var(--forge-theme-outline);box-shadow:var(--forge-elevation-1)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%}






/*# sourceMappingURL=google-chart.component-IP5VBJWV.css.map */`]});let t=r;return t})();function Pm(t,e){if(t&1&&jt(0,"app-charts-d3-chart",9),t&2){let r=tr();st("chartType",r.chartType)}}function zm(t,e){if(t&1&&jt(0,"app-charts-google-chart",9),t&2){let r=tr();st("chartType",r.chartType)}}var F=function(t){return t[t.bar=0]="bar",t[t.bubble=1]="bubble",t[t.donut=2]="donut",t[t.donutMeter=3]="donutMeter",t[t.gantt=4]="gantt",t[t.line=5]="line",t[t.pie=6]="pie",t[t.treemap=7]="treemap",t[t.tree=8]="tree",t}(F||{}),t2=(()=>{let e=class e{constructor(){this.chartTypesEnum=F,this.chartType=F.bar,this.activeTab=0}onAction(n){this.activeTab===0?this.d3Chart?.onAction(n):this.activeTab===1&&this.googleChart?.onAction(n)}onTabSelected(n){this.activeTab=n}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=Ie({type:e,selectors:[["app-charts"]],viewQuery:function(a,o){if(a&1&&(le(io,5),le(uo,5)),a&2){let i;ce(i=fe())&&(o.d3Chart=i.first),ce(i=fe())&&(o.googleChart=i.first)}},standalone:!0,features:[Oe],decls:37,vars:15,consts:[[1,"header"],["slot","start"],[1,"forge-typography--subheading4"],["aria-label","Change chart type",3,"ngModelChange","ngModel"],[3,"value"],["variant","outlined",3,"click","disabled"],["secondary","",3,"activeTab"],[3,"forge-tab-select"],[1,"body"],[3,"chartType"]],template:function(a,o){a&1&&(j(0,"forge-toolbar",0)(1,"div",1)(2,"h2",2),at(3,"Charts"),J(),j(4,"forge-select",3),xo("ngModelChange",function(s){return go(o.chartType,s)||(o.chartType=s),s}),j(5,"forge-option",4),at(6,"Bar"),J(),j(7,"forge-option",4),at(8,"Bubble"),J(),j(9,"forge-option",4),at(10,"Donut"),J(),j(11,"forge-option",4),at(12,"Donut Meter"),J(),j(13,"forge-option",4),at(14,"Gantt"),J(),j(15,"forge-option",4),at(16,"Line"),J(),j(17,"forge-option",4),at(18,"Pie"),J(),j(19,"forge-option",4),at(20,"Treemap"),J(),j(21,"forge-option",4),at(22,"Tree"),J()(),j(23,"forge-button",5),Re("click",function(){return o.onAction("update")}),at(24,"Update"),J(),j(25,"forge-button",5),Re("click",function(){return o.onAction("add")}),at(26,"Add"),J(),j(27,"forge-button",5),Re("click",function(){return o.onAction("delete")}),at(28,"Delete"),J()()(),j(29,"forge-tab-bar",6)(30,"forge-tab",7),Re("forge-tab-select",function(){return o.onTabSelected(0)}),at(31,"D3"),J(),j(32,"forge-tab",7),Re("forge-tab-select",function(){return o.onTabSelected(1)}),at(33,"Google"),J()(),j(34,"div",8),Ke(35,Pm,1,1,"app-charts-d3-chart",9)(36,zm,1,1,"app-charts-google-chart",9),J()),a&2&&(rt(4),mo("ngModel",o.chartType),rt(),st("value",o.chartTypesEnum.bar),rt(2),st("value",o.chartTypesEnum.bubble),rt(2),st("value",o.chartTypesEnum.donut),rt(2),st("value",o.chartTypesEnum.donutMeter),rt(2),st("value",o.chartTypesEnum.gantt),rt(2),st("value",o.chartTypesEnum.line),rt(2),st("value",o.chartTypesEnum.pie),rt(2),st("value",o.chartTypesEnum.treemap),rt(2),st("value",o.chartTypesEnum.tree),rt(2),st("disabled",o.activeTab===0&&o.chartType===o.chartTypesEnum.tree||o.chartType===o.chartTypesEnum.gantt),rt(2),st("disabled",o.chartType===o.chartTypesEnum.donutMeter||o.chartType===o.chartTypesEnum.tree||o.chartType===o.chartTypesEnum.gantt),rt(2),st("disabled",o.chartType===o.chartTypesEnum.donutMeter||o.chartType===o.chartTypesEnum.tree||o.chartType===o.chartTypesEnum.gantt),rt(2),st("activeTab",o.activeTab),rt(6),Ur(o.activeTab===0?35:o.activeTab===1?36:-1))},dependencies:[Ee,To,bo,wo,Mo,Co,Io,No,Eo,Oo,Ro,zo,Po,$o,Fo,Lo,Ho,io,uo],styles:[`[_nghost-%COMP%]{overflow:hidden;height:100%;display:grid;grid-template-rows:auto auto 1fr}.header[_ngcontent-%COMP%]{overflow:hidden}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:16px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]{width:320px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]::part(label){display:none}forge-tab-bar[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface)}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]{min-width:240px}.body[_ngcontent-%COMP%]{overflow:hidden;height:100%}






/*# sourceMappingURL=charts.component-EMGJOCOC.css.map */`]});let t=e;return t})();export{F as ChartTypes,t2 as ChartsComponent};
//# sourceMappingURL=chunk-V4TFZCAC.js.map
