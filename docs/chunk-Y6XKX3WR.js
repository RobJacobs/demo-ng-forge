import{a as qi}from"./chunk-Z32YY6GL.js";import{h as Qi}from"./chunk-PSWJZLWW.js";import{$c as wi,A as ut,Ab as Q,Ac as ot,Ad as Ui,B as ii,Bb as Je,Bd as $i,Hb as Ge,Jb as R,Kb as ci,Pc as Fi,Qc as _i,Rc as xi,Sc as Ei,Wc as Mi,Xb as di,Xc as Ti,Yb as fi,Yc as ki,Zc as Di,_c as Oi,ad as Si,bd as Ri,c as Jt,cd as Ai,dc as mi,dd as Ii,e as Ze,f as ei,fb as oi,fc as ui,gc as hi,gd as Pi,h as y,hd as Vi,ib as ri,mb as de,nc as gi,ob as ne,od as ji,pb as ni,pc as yi,pd as Gi,qb as q,qc as bi,qd as Li,rb as si,rc as Ci,rd as Bi,s as ti,sb as ai,sc as vi,sd as Ni,tb as ht,td as Hi,ub as Oe,ud as me,vb as fe,vd as ue,wb as li,xc as et,yb as pi,yc as tt,zc as it}from"./chunk-GBRF7Z4C.js";import{$ as It,$b as ze,Aa as ke,Ba as C,Cb as K,Da as se,Db as v,Eb as F,Fb as H,Gb as U,Gc as Zt,H as Ot,Hb as $,Hc as re,I as at,Ib as f,Jb as p,Jc as Ke,Kb as c,Kc as Xe,Lb as u,M as wt,Mb as qt,Nb as Qt,O as St,P as Ue,Pb as Wt,Q as Rt,Qb as zt,R as At,Sb as Fe,Ua as Lt,Vb as G,Wb as b,Xa as l,Xb as Qe,Y as lt,Yb as We,Z as pt,Za as qe,Zb as Yt,_ as N,_a as Ie,_b as dt,ab as ct,ac as Ye,bb as j,bc as ie,cc as oe,d as Dt,da as Ee,dc as ce,ea as Me,g as S,ga as Pt,gb as Pe,gc as Kt,ha as Te,hc as h,ia as _,ic as T,jc as z,kb as m,lb as De,mb as pe,na as Ce,oa as ve,ob as g,pa as Vt,pb as Bt,pc as ft,qa as jt,qb as Nt,r as D,ra as Gt,rc as Xt,sb as Ht,t as be,tb as Ut,tc as Ve,ub as $t,uc as je,x as L,yc as mt,za as $e}from"./chunk-YJ3NK6DP.js";import{a as B,b as Ae,c as kt,d as He}from"./chunk-OY7QI42D.js";var w=(()=>{let t=class t{constructor(){this.formMessage=new S}validateField(e,i){let r={invalid:!1,message:`Error from server: ${e}`};return D(r).pipe(Ue(1e3))}getFieldHelp(e,i){if(i.filters?.length)return D({count:0,data:[]}).pipe(Ue(1e3));{let r=[];for(let s=i.skip;s<i.skip+i.take;s++)r.push({id:s,address:`${s} street`,city:`${s} city`,state:`${s} state`});return D({count:75,data:r}).pipe(Ue(1e3))}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Ee({token:t,factory:t.\u0275fac});let o=t;return o})();var _o=[{props:{label:"Container",type:"grid",attributes:{columns:2}},fieldGroup:[{key:"name",type:"input",props:{label:"Name",type:"string",format:"###-##-####",required:!0,description:"Persons name",attributes:{width:480}}},{key:"age",type:"input",props:{label:"Age",type:"number",format:"#,###,###,##&.&&",required:!0,description:"Persons age",attributes:{width:480}}}]}],xo=[{props:{label:"Container",type:"grid",attributes:{columns:2}},fieldGroup:[{key:"firstName",type:"input",props:{label:"First name",required:!0,description:"Persons first name",attributes:{width:480}}},{key:"lastName",type:"input",props:{label:"Last name",description:"Persons last name",attributes:{width:320,column:1,row:2}}},{key:"age",type:"input",defaultValue:18,props:{label:"Age",type:"number"}},{key:"isActive",type:"checkbox",props:{label:"Is active"}},{key:"birthDate",type:"date-picker",props:{label:"DOB",description:"Persons date of birth",required:!0}},{key:"gender",type:"select",props:{label:"Gender",options:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}]}},{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{key:"size",type:"radio",props:{label:"Size",description:"What is your size?",options:[{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"}],required:!0}},{key:"officeLocation",type:"input-help",props:{label:"Office location",description:"What is your office location",optionsKey:"id",options:[{label:"Address",property:"address"},{label:"City",property:"city"},{label:"State",property:"state"}]}}]},{className:"form-divider",template:'<forge-divider style="margin: 16px 0"></forge-divider>',props:{safeHtml:!0}},{props:{type:"group",label:"Address"},fieldGroup:[{props:{type:"hbox"},fieldGroup:[{key:"address.street",type:"input",props:{label:"Street"}},{key:"address.city",type:"input",props:{label:"City"}},{key:"address.state",type:"input",props:{label:"State"}}]}]},{type:"tab",fieldGroup:[{props:{label:"Tab 1"},fieldGroup:[{props:{type:"hbox"},fieldGroup:[{key:"tab.field1",type:"input",props:{label:"Field 1"}},{key:"tab.field2",type:"input",props:{label:"Field 2"}}]}]},{props:{label:"Tab 2"},fieldGroup:[{props:{type:"vbox"},fieldGroup:[{key:"tab.field3",type:"input",props:{label:"Field 3"}},{key:"tab.field4",type:"input",props:{label:"Field 4"}}]}]}]},{key:"children",type:"table",props:{columns:[{label:"First name",key:"firstName",defaultValue:null},{label:"Last name",key:"lastName",defaultValue:null}]},fieldArray:{fieldGroup:[{key:"firstName",type:"input",props:{required:!0}},{key:"lastName",type:"input"}]}}],Eo=[{props:{type:"vbox"},fieldGroup:[{props:{type:"grid",attributes:{width:83,height:10}},fieldGroup:[{props:{type:"group",attributes:{posX:1,posY:1,gridWidth:83,gridHeight:6}},fieldGroup:[{type:"label",props:{label:"Year",attributes:{posX:2,posY:2,gridWidth:4}}},{key:"tax_year",type:"input",defaultValue:"2023",props:{type:"number",disabled:!0,attributes:{posX:20,posY:2,gridWidth:4,width:4}}},{key:"which_value",type:"radio",props:{description:"Value to use on report.",options:[{label:"Original full value",value:"O"},{label:"Current full value",value:"C"}],required:!0,attributes:{posX:2,posY:3,gridWidth:31,width:31}}},{type:"label",props:{label:"Minimum value",required:!0,attributes:{posX:2,posY:4,gridWidth:13}}},{key:"min_val",type:"input",props:{type:"number",required:!0,attributes:{posX:20,posY:4,gridWidth:13,width:13}}},{type:"label",props:{label:"Sort vehicles by",required:!0,attributes:{posX:2,posY:5,gridWidth:17}}},{key:"seq_sw",type:"select",props:{required:!0,options:[{label:"Sequence number",value:"S"},{label:"Owner name",value:"O"}],attributes:{posX:20,posY:5,gridWidth:17,width:15}}}]}]}]}],Wi={formDefinitionBasic:_o,formDefinitionAll:xo,formDefinitionLayout:Eo};var Mo=["container"];function To(o,t){}function ko(o,t){}var Do=["*"];function Oo(o,t){if(o&1&&u(0,"formly-field",0),o&2){let n=t.$implicit;f("field",n)}}function wo(o,t){let n=o._updateTreeValidity.bind(o);o._updateTreeValidity=()=>{},t(),o._updateTreeValidity=n}function So(o,t,n){if(t.id)return t.id;let e=t.type;return!e&&t.template&&(e="template"),e instanceof $e&&(e=e.prototype.constructor.name),[o,e,t.key,n].join("_")}function k(o){return!ge(o.key)&&o.key!==""&&(!Array.isArray(o.key)||o.key.length>0)}function xe(o){if(!k(o))return[];if(o._keyPath?.key!==o.key){let t=[];if(typeof o.key=="string"){let n=o.key.indexOf("[")===-1?o.key:o.key.replace(/\[(\w+)\]/g,".$1");t=n.indexOf(".")!==-1?n.split("."):[n]}else Array.isArray(o.key)?t=o.key.slice(0):t=[`${o.key}`];I(o,"_keyPath",{key:o.key,path:t})}return o._keyPath.path.slice(0)}var xt=["required","pattern","minLength","maxLength","min","max"];function Se(o,t){let n=xe(o);if(n.length===0)return;let e=o;for(;e.parent;)e=e.parent,n=[...xe(e),...n];if(t===void 0&&o.resetOnHide){let i=n.pop(),r=n.reduce((s,a)=>s[a]||{},e.model);delete r[i];return}Ro(e.model,n,t)}function Ro(o,t,n){for(let e=0;e<t.length-1;e++){let i=t[e];(!o[i]||!ee(o[i]))&&(o[i]=/^\d+$/.test(t[e+1])?[]:{}),o=o[i]}o[t[t.length-1]]=X(n)}function he(o){let t=o.parent?o.parent.model:o.model;for(let n of xe(o)){if(!t)return t;t=t[n]}return t}function we(o,...t){return t.forEach(n=>{for(let e in n)ge(o[e])||Ao(o[e])?o[e]=X(n[e]):Io(o[e],n[e])&&we(o[e],n[e])}),o}function ge(o){return o==null}function rt(o){return o===void 0}function Ao(o){return o===""}function gt(o){return typeof o=="function"}function Io(o,t){return ee(o)&&ee(t)&&Object.getPrototypeOf(o)===Object.getPrototypeOf(t)&&!(Array.isArray(o)||Array.isArray(t))}function ee(o){return o!=null&&typeof o=="object"}function Po(o){return!!o&&typeof o.then=="function"}function X(o){if(!ee(o)||be(o)||o instanceof qe||o.changingThisBreaksApplicationSecurity||["RegExp","FileList","File","Blob"].indexOf(o.constructor?.name)!==-1)return o;if(o instanceof Set)return new Set(o);if(o instanceof Map)return new Map(o);if(o instanceof Uint8Array)return new Uint8Array(o);if(o instanceof Uint16Array)return new Uint16Array(o);if(o instanceof Uint32Array)return new Uint32Array(o);if(o._isAMomentObject&&gt(o.clone))return o.clone();if(o instanceof ai)return null;if(o instanceof Date)return new Date(o.getTime());if(Array.isArray(o))return o.slice(0).map(e=>X(e));let t=Object.getPrototypeOf(o),n=Object.create(t);return n=Object.setPrototypeOf(n,t),Object.keys(o).reduce((e,i)=>{let r=Object.getOwnPropertyDescriptor(o,i);return r.get?Object.defineProperty(e,i,r):e[i]=X(o[i]),e},n)}function I(o,t,n){Object.defineProperty(o,t,{enumerable:!1,writable:!0,configurable:!0}),o[t]=n}function Et(o,t,n){let e=[],i=()=>{e.forEach(s=>s()),e=[]},r=A(o,t,({firstChange:s,currentValue:a})=>{!s&&n(),i(),ee(a)&&a.constructor.name==="Object"&&Object.keys(a).forEach(d=>{e.push(Et(o,[...t,d],n))})});return()=>{r.unsubscribe(),i()}}function A(o,t,n){o._observers||I(o,"_observers",{});let e=o;for(let a=0;a<t.length-1;a++)(!e[t[a]]||!ee(e[t[a]]))&&(e[t[a]]=/^\d+$/.test(t[a+1])?[]:{}),e=e[t[a]];let i=t[t.length-1],r=t.join(".");o._observers[r]||(o._observers[r]={value:e[i],onChange:[]});let s=o._observers[r];if(e[i]!==s.value&&(s.value=e[i]),n&&s.onChange.indexOf(n)===-1&&(s.onChange.push(n),n({currentValue:s.value,firstChange:!0}),s.onChange.length>=1&&ee(e))){let{enumerable:a}=Object.getOwnPropertyDescriptor(e,i)||{enumerable:!0};Object.defineProperty(e,i,{enumerable:a,configurable:!0,get:()=>s.value,set:d=>{if(d!==s.value){let M=s.value;s.value=d,s.onChange.forEach(P=>P({previousValue:M,currentValue:d,firstChange:!1}))}}})}return{setValue(a,d=!0){if(a===s.value)return;let M=s.value;s.value=a,s.onChange.forEach(P=>{P!==n&&d&&P({previousValue:M,currentValue:a,firstChange:!1})})},unsubscribe(){s.onChange=s.onChange.filter(a=>a!==n),s.onChange.length===0&&delete o._observers[r]}}}function Ki(o,t){if(t=Array.isArray(t)?t.join("."):t,!!o.fieldGroup)for(let n=0,e=o.fieldGroup.length;n<e;n++){let i=o.fieldGroup[n],r=Array.isArray(i.key)?i.key.join("."):i.key;if(r===t)return i;if(i.fieldGroup&&(ge(r)||t.indexOf(`${r}.`)===0)){let s=Ki(i,ge(r)?t:t.slice(r.length+1));if(s)return s}}}function yt(o){o._componentRefs?.forEach(t=>{t instanceof Ie?t.injector.get(Xe).markForCheck():t.markForCheck()})}function Vo(o){return o instanceof $t}function Xi(o){let t=e=>e.hide||e.expressions?.hide||e.hideExpression,n=!o.resetOnHide||!t(o);if(!t(o)&&o.resetOnHide){let e=o.parent;for(;e&&!t(e);)e=e.parent;n=!e||!t(e)}return!n}function st(){return+Ke.major>18||+Ke.major>=18&&+Ke.minor>=1}function jo(o,t){try{return Function(...t,`return ${o};`)}catch(n){console.error(n)}}function Go(o,t,n){return typeof o=="function"?o.apply(t,n):!!o}function bt(o,t=!1){let n=o.formControl,e=n._fields?n._fields.indexOf(o):-1;e!==-1&&n._fields.splice(e,1);let i=n.parent;if(!i)return;let r={emitEvent:t};if(i instanceof Ge){let s=i.controls.findIndex(a=>a===n);s!==-1&&i.removeAt(s,r)}else if(i instanceof Oe){let s=xe(o),a=s[s.length-1];i.get([a])===n&&i.removeControl(a,r)}n.setParent(null)}function Zi(o){return o.formControl?o.formControl:o.shareFormControl===!1?null:o.form?.get(xe(o))}function Mt(o,t,n=!1){if(t=t||o.formControl,t._fields||I(t,"_fields",[]),t._fields.indexOf(o)===-1&&t._fields.push(o),!o.formControl&&t){I(o,"formControl",t),t.setValidators(null),t.setAsyncValidators(null),o.props.disabled=!!o.props.disabled;let a=A(o,["props","disabled"],({firstChange:d,currentValue:M})=>{d||(M?o.formControl.disable():o.formControl.enable())});t instanceof fe&&t.registerOnDisabledChange(a.setValue)}if(!o.form||!k(o))return;let e=o.form,i=xe(o),r=he(o);!(ge(t.value)&&ge(r))&&t.value!==r&&t instanceof fe&&t.patchValue(r);for(let a=0;a<i.length-1;a++){let d=i[a];e.get([d])||e.setControl(d,new Oe({}),{emitEvent:n}),e=e.get([d])}let s=i[i.length-1];!o._hide&&e.get([s])!==t&&e.setControl(s,t,{emitEvent:n})}function Be(o,t=!1){let n=o.status,e=o.value;o.updateValueAndValidity({emitEvent:!1,onlySelf:t}),n!==o.status&&o.statusChanges.emit(o.status),e!==o.value&&o.valueChanges.emit(o.value)}function Ji(o){delete o?._fields,o.setValidators(null),o.setAsyncValidators(null),(o instanceof Oe||o instanceof Ge)&&Object.values(o.controls).forEach(t=>Ji(t))}var Ct=class{onPopulate(t){if(t._expressions)return;I(t,"_expressions",{}),A(t,["hide"],({currentValue:e,firstChange:i})=>{I(t,"_hide",!!e),(!i||i&&e===!0)&&(t.props.hidden=e,t.options._hiddenFieldsForCheck.push({field:t}))}),t.hideExpression&&A(t,["hideExpression"],({currentValue:e})=>{t._expressions.hide=this.parseExpressions(t,"hide",typeof e=="boolean"?()=>e:e)});let n=(e,i)=>{typeof i=="string"||gt(i)?t._expressions[e]=this.parseExpressions(t,e,i):i instanceof Dt&&(t._expressions[e]={value$:i.pipe(It(r=>{this.evalExpr(t,e,r),t.options._detectChanges(t)}))})};t.expressions=t.expressions||{};for(let e of Object.keys(t.expressions))A(t,["expressions",e],({currentValue:i})=>{n(e,gt(i)?(...r)=>i(t,r[3]):i)});t.expressionProperties=t.expressionProperties||{};for(let e of Object.keys(t.expressionProperties))A(t,["expressionProperties",e],({currentValue:i})=>n(e,i))}postPopulate(t){if(!t.parent&&!t.options.checkExpressions){let n=!1;t.options.checkExpressions=(e,i)=>{if(n)return;n=!0;let r=this.checkExpressions(e,i),s=t.options;s._hiddenFieldsForCheck.sort(a=>a.field.hide?-1:1).forEach(a=>this.changeHideState(a.field,a.field.hide??a.default,!i)),s._hiddenFieldsForCheck=[],r&&this.checkExpressions(t),n=!1}}}parseExpressions(t,n,e){let i;if(t.parent&&["hide","props.disabled"].includes(n)){let s=a=>n==="hide"?a.hide:a.props.disabled;i=()=>{let a=t.parent;for(;a.parent&&!s(a);)a=a.parent;return s(a)}}e=e||(()=>!1),typeof e=="string"&&(e=jo(e,["model","formState","field"]));let r;return{callback:s=>{try{let a=Go(i?(...d)=>i(t)||e(...d):e,{field:t},[t.model,t.options.formState,t,s]);return s||r!==a&&(!ee(a)||be(a)||JSON.stringify(a)!==JSON.stringify(r))?(r=a,this.evalExpr(t,n,a),!0):!1}catch(a){throw a.message=`[Formly Error] [Expression "${n}"] ${a.message}`,a}}}}checkExpressions(t,n=!1){if(!t)return!1;let e=!1;if(t._expressions)for(let i of Object.keys(t._expressions))t._expressions[i].callback?.(n)&&(e=!0);return t.fieldGroup?.forEach(i=>this.checkExpressions(i,n)&&(e=!0)),e}changeDisabledState(t,n){t.fieldGroup&&t.fieldGroup.filter(e=>!e._expressions.hasOwnProperty("props.disabled")).forEach(e=>this.changeDisabledState(e,n)),k(t)&&t.props.disabled!==n&&(t.props.disabled=n)}changeHideState(t,n,e){if(t.fieldGroup&&t.fieldGroup.filter(i=>i&&!i._expressions.hide).forEach(i=>this.changeHideState(i,n,e)),t.formControl&&k(t)){I(t,"_hide",!!(n||t.hide));let i=t.formControl;i._fields?.length>1&&Be(i),n===!0&&(!i._fields||i._fields.every(r=>!!r._hide))?(bt(t,!0),e&&t.resetOnHide&&(Se(t,void 0),t.formControl.reset({value:void 0,disabled:t.formControl.disabled}),t.options.fieldChanges.next({value:void 0,field:t,type:"valueChanges"}),t.fieldGroup&&t.formControl instanceof Ge&&(t.fieldGroup.length=0))):n===!1&&(t.resetOnHide&&!rt(t.defaultValue)&&rt(he(t))&&Se(t,t.defaultValue),Mt(t,void 0,!0),t.resetOnHide&&t.fieldArray&&t.fieldGroup?.length!==t.model?.length&&t.options.build(t))}t.options.fieldChanges&&t.options.fieldChanges.next({field:t,type:"hidden",value:n})}evalExpr(t,n,e){if(n.indexOf("model.")===0){let i=n.replace(/^model\./,""),r=t.fieldGroup?t:t.parent,s=t?.key===i?t.formControl:t.form.get(i);!s&&t.get(i)&&(s=t.get(i).formControl),Se({key:i,parent:r,model:t.model},e),s&&!(ge(s.value)&&ge(e))&&s.value!==e&&s.patchValue(e)}else{try{let i=t,r=this._evalExpressionPath(t,n),s=r.length-1;for(let a=0;a<s;a++)i=i[r[a]];i[r[s]]=e}catch(i){throw i.message=`[Formly Error] [Expression "${n}"] ${i.message}`,i}["templateOptions.disabled","props.disabled"].includes(n)&&k(t)&&this.changeDisabledState(t,e)}this.emitExpressionChanges(t,n,e)}emitExpressionChanges(t,n,e){t.options.fieldChanges&&t.options.fieldChanges.next({field:t,type:"expressionChanges",property:n,value:e})}_evalExpressionPath(t,n){if(t._expressions[n]&&t._expressions[n].paths)return t._expressions[n].paths;let e=[];return n.indexOf("[")===-1?e=n.split("."):n.split(/[[\]]{1,2}/).filter(i=>i).forEach(i=>{let r=i.match(/['|"](.*?)['|"]/);r?e.push(r[1]):e.push(...i.split(".").filter(s=>s))}),t._expressions[n]&&(t._expressions[n].paths=e),e}},vt=class{constructor(t){this.config=t,this.formId=0}prePopulate(t){let n=t.parent;this.initRootOptions(t),this.initFieldProps(t),n&&(Object.defineProperty(t,"options",{get:()=>n.options,configurable:!0}),Object.defineProperty(t,"model",{get:()=>k(t)&&t.fieldGroup?he(t):n.model,configurable:!0})),Object.defineProperty(t,"get",{value:e=>Ki(t,e),configurable:!0}),this.getFieldComponentInstance(t).prePopulate?.(t)}onPopulate(t){this.initFieldOptions(t),this.getFieldComponentInstance(t).onPopulate?.(t),t.fieldGroup&&t.fieldGroup.forEach((n,e)=>{n&&(Object.defineProperty(n,"parent",{get:()=>t,configurable:!0}),Object.defineProperty(n,"index",{get:()=>e,configurable:!0})),this.formId++})}postPopulate(t){this.getFieldComponentInstance(t).postPopulate?.(t)}initFieldProps(t){t.props??=t.templateOptions,Object.defineProperty(t,"templateOptions",{get:()=>t.props,set:n=>t.props=n,configurable:!0})}initRootOptions(t){if(t.parent)return;let n=t.options;t.options.formState=t.options.formState||{},n.showError||(n.showError=this.config.extras.showError),n.fieldChanges||I(n,"fieldChanges",new S),n._hiddenFieldsForCheck||(n._hiddenFieldsForCheck=[]),n._detectChanges=e=>{e._componentRefs&&yt(e),e.fieldGroup?.forEach(i=>i&&n._detectChanges(i))},n.detectChanges=e=>{e.options.checkExpressions?.(e),n._detectChanges(e)},n.resetModel=e=>{e=X(e??n._initialModel),t.model&&(Object.keys(t.model).forEach(i=>delete t.model[i]),Object.assign(t.model,e||{})),st()||A(n,["parentForm","submitted"]).setValue(!1,!1),n.build(t),t.form.reset(t.model)},n.updateInitialValue=e=>n._initialModel=X(e??t.model),t.options.updateInitialValue()}initFieldOptions(t){we(t,{id:So(`formly_${this.formId}`,t,t.index),hooks:{},modelOptions:{},validation:{messages:{}},props:!t.type||!k(t)?{}:{label:"",placeholder:"",disabled:!1}}),this.config.extras.resetFieldOnHide&&t.resetOnHide!==!1&&(t.resetOnHide=!0),t.type!=="formly-template"&&(t.template||t.expressions?.template||t.expressionProperties?.template)&&(t.type="formly-template"),!t.type&&t.fieldGroup&&(t.type="formly-group"),t.type&&this.config.getMergedField(t),k(t)&&!rt(t.defaultValue)&&rt(he(t))&&!Xi(t)&&Se(t,t.defaultValue),t.wrappers=t.wrappers||[]}getFieldComponentInstance(t){let n=()=>{let e=this.config.resolveFieldTypeRef(t),i=t._componentRefs?.slice(-1)[0];return i instanceof Ie&&i?.componentType===e?.componentType&&(e=i),e?.instance};return t._proxyInstance||I(t,"_proxyInstance",new Proxy({},{get:(e,i)=>n()?.[i],set:(e,i,r)=>n()[i]=r})),t._proxyInstance}},Ft=class{prePopulate(t){this.root||(this.root=t),t.parent&&Object.defineProperty(t,"form",{get:()=>t.parent.formControl,configurable:!0})}onPopulate(t){t.hasOwnProperty("fieldGroup")&&!k(t)?I(t,"formControl",t.form):this.addFormControl(t)}postPopulate(t){if(this.root!==t)return;if(this.root=null,this.setValidators(t)&&t.parent){let e=t.parent;for(;e;)(k(e)||!e.parent)&&Be(e.formControl,!0),e=e.parent}}addFormControl(t){let n=Zi(t);if(!t.fieldArray){if(n){if(n instanceof fe){let e=k(t)?he(t):t.defaultValue;n.defaultValue=e}}else{let e={updateOn:t.modelOptions.updateOn};if(t.fieldGroup)n=new Oe({},e);else{let i=k(t)?he(t):t.defaultValue;n=new li({value:i,disabled:!!t.props.disabled},Ae(B({},e),{initialValueIsDefault:!0}))}}Mt(t,n)}}setValidators(t,n=!1){n===!1&&k(t)&&t.props?.disabled&&(n=!0);let e=!1;if(t.fieldGroup?.forEach(i=>i&&this.setValidators(i,n)&&(e=!0)),k(t)||!t.parent||!k(t)&&!t.fieldGroup){let{formControl:i}=t;if(i&&(k(t)&&i instanceof fe&&(n&&i.enabled&&(i.disable({emitEvent:!1,onlySelf:!0}),e=!0),!n&&i.disabled&&(i.enable({emitEvent:!1,onlySelf:!0}),e=!0)),i.validator===null&&this.hasValidators(t,"_validators")&&(i.setValidators(()=>{let r=ne.compose(this.mergeValidators(t,"_validators"));return r?r(i):null}),e=!0),i.asyncValidator===null&&this.hasValidators(t,"_asyncValidators")&&(i.setAsyncValidators(()=>{let r=ne.composeAsync(this.mergeValidators(t,"_asyncValidators"));return r?r(i):D(null)}),e=!0),e)){Be(i,!0);let r=i.parent;for(let s=1;s<xe(t).length;s++)r&&(Be(r,!0),r=r.parent)}}return e}hasValidators(t,n){let e=t.formControl;return e?._fields?.length>1&&e._fields.some(i=>i[n].length>0)||t[n].length>0?!0:t.fieldGroup?.some(i=>i?.fieldGroup&&!k(i)&&this.hasValidators(i,n))}mergeValidators(t,n){let e=[],i=t.formControl;return i?._fields?.length>1?i._fields.filter(r=>!r._hide).forEach(r=>e.push(...r[n])):t[n]&&e.push(...t[n]),t.fieldGroup&&t.fieldGroup.filter(r=>r?.fieldGroup&&!k(r)).forEach(r=>e.push(...this.mergeValidators(r,n))),e}},_t=class{constructor(t){this.config=t}onPopulate(t){this.initFieldValidation(t,"validators"),this.initFieldValidation(t,"asyncValidators")}initFieldValidation(t,n){let e=[];if(n==="validators"&&!(t.hasOwnProperty("fieldGroup")&&!k(t))&&e.push(this.getPredefinedFieldValidation(t)),t[n])for(let i of Object.keys(t[n]))i==="validation"?e.push(...t[n].validation.map(r=>this.wrapNgValidatorFn(t,r))):e.push(this.wrapNgValidatorFn(t,t[n][i],i));I(t,"_"+n,e)}getPredefinedFieldValidation(t){let n=[];return xt.forEach(e=>A(t,["props",e],({currentValue:i,firstChange:r})=>{n=n.filter(s=>s!==e),e==="required"&&i!=null&&typeof i!="boolean"&&console.warn(`Formly: Invalid prop 'required' of type '${typeof i}', expected 'boolean' (Field:${t.key}).`),i!=null&&i!==!1&&n.push(e),!r&&t.formControl&&Be(t.formControl)})),e=>n.length===0?null:ne.compose(n.map(i=>()=>{let r=t.props[i];switch(i){case"required":return ne.required(e);case"pattern":return ne.pattern(r)(e);case"minLength":let s=ne.minLength(r)(e),a=this.config.getValidatorMessage("minlength")||t.validation?.messages?.minlength?"minlength":"minLength";return s?{[a]:s.minlength}:null;case"maxLength":let d=ne.maxLength(r)(e),M=this.config.getValidatorMessage("maxlength")||t.validation?.messages?.maxlength?"maxlength":"maxLength";return d?{[M]:d.maxlength}:null;case"min":return ne.min(r)(e);case"max":return ne.max(r)(e);default:return null}}))(e)}wrapNgValidatorFn(t,n,e){let i;if(typeof n=="string"&&(i=X(this.config.getValidator(n))),typeof n=="object"&&n.name&&(i=X(this.config.getValidator(n.name)),n.options&&(i.options=n.options)),typeof n=="object"&&n.expression){let r=n,{expression:s}=r,a=He(r,["expression"]);i={name:e,validation:s,options:Object.keys(a).length>0?a:null}}return typeof n=="function"&&(i={name:e,validation:n}),s=>{let a=i.validation(s,t,i.options);return Po(a)?a.then(d=>this.handleResult(t,e?!!d:d,i)):be(a)?a.pipe(L(d=>this.handleResult(t,e?!!d:d,i))):this.handleResult(t,e?!!a:a,i)}}handleResult(t,n,{name:e,options:i}){typeof n=="boolean"&&(n=n?null:{[e]:i||!0});let r=t.formControl;return r?._childrenErrors?.[e]?.(),ee(n)&&Object.keys(n).forEach(s=>{let a=n[s].errorPath?n[s].errorPath:i?.errorPath,d=a?t.formControl.get(a):null;if(d){let M=n[s],{errorPath:P}=M,le=He(M,["errorPath"]);d.setErrors(Ae(B({},d.errors||{}),{[s]:le})),!r._childrenErrors&&I(r,"_childrenErrors",{}),r._childrenErrors[s]=()=>{let Tt=d.errors||{},{[s]:V}=Tt,te=He(Tt,[kt(s)]);d.setErrors(Object.keys(te).length===0?null:te)}}}),n}},E=(()=>{let t=class t{constructor(){this.field={}}set _formlyControls(e){let i=this.field;i._localFields=e.map(r=>r.control._fields||[]).flat().filter(r=>r.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options?.formState||{}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=pe({type:t,viewQuery:function(i,r){if(i&1&&dt(ni,5),i&2){let s;ze(s=Ye())&&(r._formlyControls=s)}},inputs:{field:"field"},standalone:!1});let o=t;return o})(),Lo=(()=>{let t=class t extends E{get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}constructor(e){super(),this.sanitizer=e,this.innerHtml={}}};t.\u0275fac=function(i){return new(i||t)(j(ti))},t.\u0275cmp=m({type:t,selectors:[["formly-template"]],standalone:!1,features:[g],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(i,r){i&1&&u(0,"div",0),i&2&&f("innerHtml",r.template,Lt)},encapsulation:2,changeDetection:0});let o=t;return o})(),_e=(()=>{let t=class t{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError(e){return e.formControl?.invalid&&(e.formControl?.touched||e.options.parentForm?.submitted||!!e.field.validation?.show)}},this.extensions={},this.presets={},this.extensionsByPriority={},this.componentRefs={}}addConfig(e){if(Array.isArray(e)){e.forEach(i=>this.addConfig(i));return}e.types&&e.types.forEach(i=>this.setType(i)),e.validators&&e.validators.forEach(i=>this.setValidator(i)),e.wrappers&&e.wrappers.forEach(i=>this.setWrapper(i)),e.validationMessages&&e.validationMessages.forEach(i=>this.addValidatorMessage(i.name,i.message)),e.extensions&&this.setSortedExtensions(e.extensions),e.extras&&(this.extras=B(B({},this.extras),e.extras)),e.presets&&(this.presets=B(B({},this.presets),e.presets.reduce((i,r)=>Ae(B({},i),{[r.name]:r.config}),{})))}setType(e){Array.isArray(e)?e.forEach(i=>this.setType(i)):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions","wrappers"].forEach(i=>{e.hasOwnProperty(i)&&(this.types[e.name][i]=e[i])}))}getType(e,i=!1){if(e instanceof $e)return{component:e,name:e.prototype.constructor.name};if(!this.types[e]){if(i)throw new Error(`[Formly Error] The type "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(e),this.types[e]}getMergedField(e={}){let i=this.getType(e.type);if(!i)return;i.defaultOptions&&we(e,i.defaultOptions);let r=i.extends&&this.getType(i.extends).defaultOptions;r&&we(e,r),e?.optionsTypes&&e.optionsTypes.forEach(a=>{let d=this.getType(a).defaultOptions;d&&we(e,d)});let s=this.resolveFieldTypeRef(e);s?.instance?.defaultOptions&&we(e,s.instance.defaultOptions),!e.wrappers&&i.wrappers&&(e.wrappers=[...i.wrappers])}resolveFieldTypeRef(e={}){let i=this.getType(e.type);if(!i||!i.component)return null;if(!this.componentRefs[i.name]){let{_viewContainerRef:r,_injector:s}=e.options;if(!r||!s)return null;let a=r.createComponent(i.component,{injector:s});this.componentRefs[i.name]=a;try{a.destroy()}catch(d){console.error(`An error occurred while destroying the Formly component type "${e.type}"`,d)}}return this.componentRefs[i.name]}clearRefs(){this.componentRefs={}}setWrapper(e){this.wrappers[e.name]=e,e.types&&e.types.forEach(i=>{this.setTypeWrapper(i,e.name)})}getWrapper(e){if(e instanceof $e)return{component:e,name:e.prototype.constructor.name};if(!this.wrappers[e])throw new Error(`[Formly Error] The wrapper "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[e]}setTypeWrapper(e,i){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),this.types[e].wrappers.indexOf(i)===-1&&this.types[e].wrappers.push(i)}setValidator(e){this.validators[e.name]=e}getValidator(e){if(!this.validators[e])throw new Error(`[Formly Error] The validator "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[e]}addValidatorMessage(e,i){this.messages[e]=i}getValidatorMessage(e){return this.messages[e]}setSortedExtensions(e){e.forEach(i=>{let r=i.priority??1;this.extensionsByPriority[r]=Ae(B({},this.extensionsByPriority[r]),{[i.name]:i.extension})}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((i,r)=>i-r).reduce((i,r)=>B(B({},i),this.extensionsByPriority[r]),{})}mergeExtendedType(e){if(!this.types[e].extends)return;let i=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=i.component),this.types[e].wrappers||(this.types[e].wrappers=i.wrappers)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})(),Bo=(()=>{let t=class t{constructor(e){this.ref=e}ngOnChanges(){this.name=this.name||"formly-group"}};t.\u0275fac=function(i){return new(i||t)(j(qe))},t.\u0275dir=pe({type:t,selectors:[["","formlyTemplate",""]],inputs:{name:[0,"formlyTemplate","name"]},standalone:!1,features:[ke]});let o=t;return o})(),nt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=Ee({token:t,factory:t.\u0275fac});let o=t;return o})(),eo=(()=>{let t=class t{get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof Ie?this.componentRefs[0].location:null}constructor(e,i,r,s,a){this.config=e,this.renderer=i,this._elementRef=r,this.hostContainerRef=s,this.form=a,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(e=>e.unsubscribe()),this.hooksObservers.forEach(e=>e()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(e,i,r=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),r=this.field?.wrappers),r?.length>0){let[s,...a]=r,{component:d}=this.config.getWrapper(s),M=e.createComponent(d);this.attachComponentRef(M,i),A(M.instance,["fieldComponent"],({currentValue:P,previousValue:le,firstChange:V})=>{if(P){if(le&&le._lContainer===P._lContainer)return;let te=le?le.detach():null;te&&!te.destroyed?P.insert(te):this.renderField(P,i,a),!V&&M.changeDetectorRef.detectChanges()}})}else if(i?.type){let s=this.form?.templates?.find(d=>d.name===i.type),a;if(s)a=e.createEmbeddedView(s.ref,{$implicit:i});else{let{component:d}=this.config.getType(i.type,!0);a=e.createComponent(d)}this.attachComponentRef(a,i)}}triggerHook(e,i){if((e==="onInit"||e==="onChanges"&&i.field&&!i.field.firstChange)&&(this.valueChangesUnsubscribe(),this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[e]&&(!i||i.field)){let r=this.field.hooks[e](this.field);if(be(r)&&["onInit","afterContentInit","afterViewInit"].indexOf(e)!==-1){let s=r.subscribe();this.hooksObservers.push(()=>s.unsubscribe())}}e==="onChanges"&&i.field&&(this.resetRefs(i.field.previousValue),this.render())}attachComponentRef(e,i){this.componentRefs.push(e),i._componentRefs.push(e),e instanceof Ie&&Object.assign(e.instance,{field:i})}render(){if(this.field){if(!this.field.options){this.detectFieldBuild=!0;return}if(this.detectFieldBuild=!1,this.hostObservers.forEach(e=>e.unsubscribe()),this.hostObservers=[A(this.field,["hide"],({firstChange:e,currentValue:i})=>{let r=this.containerRef;this.config.extras.lazyRender===!1?(e&&this.renderField(r,this.field),(!e||e&&i)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",i?"none":"")):i?(r.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(r,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!e&&this.field.options.detectChanges(this.field)}),A(this.field,["className"],({firstChange:e,currentValue:i})=>{(!e||e&&i)&&(!this.config.extras.lazyRender||this.field.hide!==!0)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",i)})],!st())["touched","pristine","status"].forEach(e=>this.hostObservers.push(A(this.field,["formControl",e],({firstChange:i})=>!i&&yt(this.field))));else if(this.field.formControl){let e=this.field.formControl.events.subscribe(()=>yt(this.field));this.hostObservers.push(e)}}}resetRefs(e){e&&(e._localFields?e._localFields=[]:I(this.field,"_localFields",[]),e._componentRefs?e._componentRefs=e._componentRefs.filter(i=>this.componentRefs.indexOf(i)===-1):I(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(e){if(!e)return()=>{};let i=Et(e,["props"],()=>e.options.detectChanges(e)),r=[()=>{i()}];for(let a of Object.keys(e._expressions||{})){let d=A(e,["_expressions",a],({currentValue:M,previousValue:P})=>{P?.subscription&&(P.subscription.unsubscribe(),P.subscription=null),be(M.value$)&&(M.subscription=M.value$.subscribe())});r.push(()=>{e._expressions[a]?.subscription&&e._expressions[a].subscription.unsubscribe(),d.unsubscribe()})}for(let a of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){let d=A(e,a,({firstChange:M})=>!M&&e.options.detectChanges(e));r.push(()=>d.unsubscribe())}if(e.formControl&&!e.fieldGroup){let a=e.formControl,d=a.valueChanges.pipe(L(V=>(e.parsers?.map(te=>V=te(V,e)),Object.is(V,e.formControl.value)||e.formControl.setValue(V),V)),Rt((V,te)=>!(V!==te||Array.isArray(V)||ee(V))));a.value!==he(e)&&(d=d.pipe(lt(a.value)));let{updateOn:M,debounce:P}=e.modelOptions;(!M||M==="change")&&P?.default>0&&(d=d.pipe(wt(P.default)));let le=d.subscribe(V=>{a._fields?.length>1&&a instanceof fe&&a.patchValue(V,{emitEvent:!1,onlySelf:!0}),k(e)&&Se(e,V),e.options.fieldChanges.next({value:V,field:e,type:"valueChanges"})});r.push(()=>le.unsubscribe())}let s=[];return A(e,["_localFields"],({currentValue:a})=>{s.forEach(d=>d()),s=(a||[]).map(d=>this.fieldChanges(d))}),()=>{r.forEach(a=>a()),s.forEach(a=>a())}}};t.\u0275fac=function(i){return new(i||t)(j(_e),j(ct),j(se),j(Pe),j(nt,8))},t.\u0275cmp=m({type:t,selectors:[["formly-field"]],viewQuery:function(i,r){if(i&1&&dt(Mo,7,Pe),i&2){let s;ze(s=Ye())&&(r.viewContainerRef=s.first)}},inputs:{field:"field"},features:[ke],decls:2,vars:0,consts:[["container",""]],template:function(i,r){i&1&&Nt(0,To,0,0,"ng-template",null,0,mt)},styles:["[_nghost-%COMP%]:empty{display:none}"]});let o=t;return o})(),Z=(()=>{let t=class t extends eo{};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["formly-field"]],standalone:!1,features:[g],decls:2,vars:0,consts:[["container",""]],template:function(i,r){i&1&&Bt(0,ko,0,0,"ng-template",null,0,mt)},styles:["[_nghost-%COMP%]:empty{display:none}"]});let o=t;return o})(),No=(()=>{let t=class t extends E{};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["formly-group"]],hostVars:2,hostBindings:function(i,r){i&2&&Kt(r.field.fieldGroupClassName||"")},standalone:!1,features:[g],ngContentSelectors:Do,decls:3,vars:0,consts:[[3,"field"]],template:function(i,r){i&1&&(Qe(),U(0,Oo,1,1,"formly-field",0,H),We(2)),i&2&&$(r.field.fieldGroup)},dependencies:[Z],encapsulation:2,changeDetection:0});let o=t;return o})(),Le=new Pt("FORMLY_CONFIG");function zi(o){return{types:[{name:"formly-group",component:No},{name:"formly-template",component:Lo}],extensions:[{name:"core",extension:new vt(o),priority:-250},{name:"field-validation",extension:new _t(o),priority:-200},{name:"field-form",extension:new Ft,priority:-150},{name:"field-expression",extension:new Ct,priority:-100}]}}var Ne=(()=>{let t=class t{constructor(e,i,r,s,a=[]){this.config=e,this.injector=i,this.viewContainerRef=r,this.parentForm=s,a&&a.forEach(d=>e.addConfig(d))}buildForm(e,i=[],r,s){this.build({fieldGroup:i,model:r,form:e,options:s})}build(e){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");e.parent||this._setOptions(e),wo(e.form,()=>{if(this._build(e),!e.parent||e.fieldArray){let i=e.options;e.parent&&Xi(e)&&i._hiddenFieldsForCheck?.push({field:e,default:!1}),i.checkExpressions?.(e,!0),i._detectChanges?.(e)}})}_build(e){if(!e)return;let i=Object.values(this.config.extensions);i.forEach(r=>r.prePopulate?.(e)),i.forEach(r=>r.onPopulate?.(e)),e.fieldGroup?.forEach(r=>this._build(r)),i.forEach(r=>r.postPopulate?.(e))}_setOptions(e){e.form=e.form||new Oe({}),e.model=e.model||{},e.options=e.options||{};let i=e.options;i._viewContainerRef||I(i,"_viewContainerRef",this.viewContainerRef),i._injector||I(i,"_injector",this.injector),i.build||(i.build=(r=e)=>(this.build(r),r)),!i.parentForm&&this.parentForm&&(I(i,"parentForm",this.parentForm),st()||A(i,["parentForm","submitted"],({firstChange:r})=>{r||i.detectChanges(e)}))}};t.\u0275fac=function(i){return new(i||t)(Te(_e),Te(Vt),Te(Pe,8),Te(Je,8),Te(Le,8))},t.\u0275prov=Ee({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})(),Ho=(()=>{let t=class t{set form(e){this.field.form=e}get form(){return this.field.form}set model(e){this.config.extras.immutable&&this._modelChangeValue===e||this.setField({model:e})}get model(){return this.field.model}set fields(e){this.setField({fieldGroup:e})}get fields(){return this.field.fieldGroup}set options(e){this.setField({options:e})}get options(){return this.field.options}set templates(e){this.fieldTemplates.templates=e}constructor(e,i,r,s){this.builder=e,this.config=i,this.ngZone=r,this.fieldTemplates=s,this.modelChange=new Ht,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}ngDoCheck(){this.config.extras.checkExpressionOn==="changeDetectionCheck"&&this.checkExpressionChange()}ngOnChanges(e){e.fields&&this.form&&Ji(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe(),this.config.clearRefs()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();let e=null;if(st()){let s=this.options?.parentForm?.submitted;e=this.form.events.subscribe(()=>{s!==this.options?.parentForm?.submitted&&(this.options.detectChanges(this.field),s=this.options?.parentForm?.submitted)})}let i=[Et(this.field.options,["formState"],()=>this.field.options.detectChanges(this.field))],r=this.field.options.fieldChanges.pipe(at(({field:s,type:a})=>k(s)&&a==="valueChanges"),pt(()=>Vo(this.ngZone)?D(null):this.ngZone.onStable.asObservable().pipe(St(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=X(this.model))}));return()=>{i.forEach(s=>s()),e?.unsubscribe(),r.unsubscribe()}}setField(e){this.config.extras.immutable?this.field=B(B({},this.field),X(e)):Object.keys(e).forEach(i=>this.field[i]=e[i])}};t.\u0275fac=function(i){return new(i||t)(j(Ne),j(_e),j(Ut),j(nt))},t.\u0275cmp=m({type:t,selectors:[["formly-form"]],contentQueries:function(i,r,s){if(i&1&&Yt(s,Bo,4),i&2){let a;ze(a=Ye())&&(r.templates=a)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[ft([Ne,nt]),ke],decls:1,vars:1,consts:[[3,"field"]],template:function(i,r){i&1&&u(0,"formly-field",0),i&2&&f("field",r.field)},dependencies:[eo],encapsulation:2,changeDetection:0});let o=t;return o})(),to=(()=>{let t=class t extends Ho{};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["formly-form"]],standalone:!1,features:[ft([Ne,nt]),g],decls:1,vars:1,consts:[[3,"field"]],template:function(i,r){i&1&&u(0,"formly-field",0),i&2&&f("field",r.field)},dependencies:[Z],encapsulation:2,changeDetection:0});let o=t;return o})(),Uo=(()=>{let t=class t{get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}constructor(e,i,r){this.renderer=e,this.elementRef=i,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change","wheel"],callback:(s,a)=>{switch(s){case"focus":return this.onFocus(a);case"blur":return this.onBlur(a);case"change":return this.onChange(a);default:return this.props[s](this.field,a)}}},this.document=r}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(i=>i()),this.uiEvents.events.forEach(i=>{(this.props?.[i]||["focus","blur","change"].indexOf(i)!==-1)&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,i,r=>this.uiEvents.callback(i,r)))}),this.props?.attributes&&A(this.field,["props","attributes"],({currentValue:i,previousValue:r})=>{r&&Object.keys(r).forEach(s=>this.removeAttribute(s)),i&&Object.keys(i).forEach(s=>{i[s]!=null&&this.setAttribute(s,i[s])})}),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),this.fieldAttrElements.length===1&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=A(this.field,["focus"],({currentValue:i})=>{this.toggleFocus(i)}))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){let e=this.elementRef.nativeElement;this.uiAttributes=[...xt,"tabindex","placeholder","readonly","disabled","step"].filter(i=>!e.hasAttribute||!e.hasAttribute(i))}for(let e=0;e<this.uiAttributes.length;e++){let i=this.uiAttributes[e],r=this.props[i];this.uiAttributesCache[i]!==r&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(i.toLowerCase()))&&(this.uiAttributesCache[i]=r,r||r===0?this.setAttribute(i,r===!0?i:`${r}`):this.removeAttribute(i))}}ngOnDestroy(){this.uiEvents.listeners.forEach(e=>e()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(e){let i=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!i||!i.nativeElement.focus)return;let r=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:s})=>this.document.activeElement===s||s.contains(this.document.activeElement));e&&!r?Promise.resolve().then(()=>i.nativeElement.focus()):!e&&r&&Promise.resolve().then(()=>i.nativeElement.blur())}onFocus(e){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,e)}onBlur(e){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,e)}onHostChange(e){e instanceof Event||this.onChange(e)}onChange(e){this.props.change?.(this.field,e),this.field.formControl?.markAsDirty()}attachElementRef(e){e&&(e._elementRefs?.indexOf(this.elementRef)===-1?e._elementRefs.push(this.elementRef):I(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){let i=e?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;i!==-1&&e._elementRefs.splice(i,1)}setAttribute(e,i){this.renderer.setAttribute(this.elementRef.nativeElement,e,i)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}};t.\u0275fac=function(i){return new(i||t)(j(ct),j(se),j(jt))},t.\u0275dir=pe({type:t,selectors:[["","formlyAttributes",""]],hostBindings:function(i,r){i&1&&G("change",function(a){return r.onHostChange(a)})},inputs:{field:[0,"formlyAttributes","field"],id:"id"},features:[ke]});let o=t;return o})(),W=(()=>{let t=class t extends Uo{};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275dir=pe({type:t,selectors:[["","formlyAttributes",""]],hostBindings:function(i,r){i&1&&G("change",function(a){return r.onHostChange(a)})},standalone:!1,features:[g]});let o=t;return o})(),$o=(()=>{let t=class t{constructor(e){this.config=e}ngOnChanges(){let e=xt.map(i=>`templateOptions.${i}`);this.errorMessage$=Ot(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe(at(({field:i,type:r,property:s})=>i===this.field&&r==="expressionChanges"&&(s.indexOf("validation")!==-1||e.indexOf(s)!==-1))):D(null)).pipe(lt(null),pt(()=>be(this.errorMessage)?this.errorMessage:D(this.errorMessage)))}get errorMessage(){let e=this.field.formControl;for(let i in e.errors)if(e.errors.hasOwnProperty(i)){let r=this.config.getValidatorMessage(i);if(ee(e.errors[i])){if(e.errors[i].errorPath)return;e.errors[i].message&&(r=e.errors[i].message)}return this.field.validation?.messages?.[i]&&(r=this.field.validation.messages[i]),this.field.validators?.[i]?.message&&(r=this.field.validators[i].message),this.field.asyncValidators?.[i]?.message&&(r=this.field.asyncValidators[i].message),typeof r=="function"?r(e.errors[i],this.field):r}}};t.\u0275fac=function(i){return new(i||t)(j(_e))},t.\u0275cmp=m({type:t,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[ke],decls:2,vars:3,template:function(i,r){i&1&&(h(0),Ve(1,"async")),i&2&&T(je(1,1,r.errorMessage$))},dependencies:[Ze],encapsulation:2,changeDetection:0});let o=t;return o})(),J=(()=>{let t=class t extends $o{};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["formly-validation-message"]],standalone:!1,features:[g],decls:2,vars:3,template:function(i,r){i&1&&(h(0),Ve(1,"async")),i&2&&T(je(1,1,r.errorMessage$))},dependencies:[Ze],encapsulation:2,changeDetection:0});let o=t;return o})(),io=(()=>{let t=class t extends E{onPopulate(e){if(k(e)){let r=Zi(e);Mt(e,r||new Ge([],{updateOn:e.modelOptions.updateOn}))}e.fieldGroup=e.fieldGroup||[];let i=Array.isArray(e.model)?e.model.length:0;if(e.fieldGroup.length>i)for(let r=e.fieldGroup.length-1;r>=i;--r)bt(e.fieldGroup[r],!0),e.fieldGroup.splice(r,1);for(let r=e.fieldGroup.length;r<i;r++){let s=B({},X(typeof e.fieldArray=="function"?e.fieldArray(e):e.fieldArray));s.key!==null&&(s.key=`${r}`),e.fieldGroup.push(s)}}add(e,i,{markAsDirty:r}={markAsDirty:!0}){r&&this.formControl.markAsDirty(),e=e??this.field.fieldGroup.length,this.model||Se(this.field,[]),this.model.splice(e,0,i?X(i):void 0),this.markFieldForCheck(this.field.fieldGroup[e]),this._build()}remove(e,{markAsDirty:i}={markAsDirty:!0}){i&&this.formControl.markAsDirty(),this.model.splice(e,1);let r=this.field.fieldGroup[e];this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach((s,a)=>this.updateArrayElementKey(s,`${a}`)),bt(r,!0),this._build()}_build(){(this.field.formControl._fields??[this.field]).forEach(i=>this.options.build(i)),this.options.fieldChanges.next({field:this.field,value:he(this.field),type:"valueChanges"})}updateArrayElementKey(e,i){if(k(e)){e.key=i;return}if(e.fieldGroup?.length)for(let r=0;r<e.fieldGroup.length;r++)this.updateArrayElementKey(e.fieldGroup[r],i)}markFieldForCheck(e){e&&(e.fieldGroup?.forEach(i=>this.markFieldForCheck(i)),e.hide===!1&&this.options._hiddenFieldsForCheck.push({field:e}))}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275dir=pe({type:t,standalone:!1,features:[g]});let o=t;return o})();var x=(()=>{let t=class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:Le,multi:!0,useFactory:zi,deps:[_e]},{provide:Le,useValue:e,multi:!0},_e,Ne]}}static forChild(e={}){return{ngModule:t,providers:[{provide:Le,multi:!0,useFactory:zi,deps:[_e]},{provide:Le,useValue:e,multi:!0},Ne]}}};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=De({type:t}),t.\u0275inj=Me({imports:[y]});let o=t;return o})();function qo(o,t){if(o&1&&(u(0,"formly-form",4),p(1,"p"),h(2),Ve(3,"json"),c()),o&2){let n=b();f("form",n.formGroup)("model",n.model)("fields",n.formDefinition)("options",n.formOptions),l(2),z(" ",je(3,5,n.formGroup.value)," ")}}var oo=(()=>{let t=class t{constructor(){this.changeDetectorRef=_(Xe),this.destroyRef=_(Gt),this.moduleService=_(w),this.formGroup=new ht({}),this.formOptions={},this.model={},this.moduleService.formMessage.pipe(ci(this.destroyRef)).subscribe({next:e=>{this.formMessage=e}})}ngOnInit(){this.formDefinition=Wi.formDefinitionAll,this.changeDetectorRef.detectChanges()}getFormErrors(e){if(e instanceof fe)return e.errors?e:null;if(e instanceof ht){let i=e.errors?{groupError:e}:{};return Object.keys(e.controls).forEach(r=>{let s=this.getFormErrors(e.get(r));s&&(i[r]=s)}),Object.keys(i).length>0?i:null}return null}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=m({type:t,selectors:[["app-formly-demo"]],standalone:!1,decls:6,vars:3,consts:[[1,"body"],["novalidate","","autocomplete","off",1,"form",3,"formGroup"],["inverted","",1,"footer"],["slot","start",1,"forge-typography--label1"],[3,"form","model","fields","options"]],template:function(i,r){i&1&&(p(0,"div",0)(1,"form",1),v(2,qo,4,7),c()(),p(3,"forge-toolbar",2)(4,"span",3),h(5),c()()),i&2&&(l(),f("formGroup",r.formGroup),l(),F(r.formDefinition?2:-1),l(3),z(" ",r.formMessage==null?null:r.formMessage.message," "))},dependencies:[pi,si,Je,to,ei],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:1fr auto;overflow:hidden}  formly-form,   formly-group,   formly-field{display:block}.body[_ngcontent-%COMP%]{padding:24px;overflow:auto}.form[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline);padding:16px;min-width:680px;width:fit-content;height:fit-content;margin-left:auto;margin-right:auto}






/*# sourceMappingURL=formly-demo.component-NJGAARBF.css.map */`]});let o=t;return o})();var Qo=["formlyField"],ro=(()=>{let t=class t{constructor(){this.elementRef=_(se),this.formlyField=re("formlyField"),this.field=Zt()}ngOnInit(){}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=m({type:t,selectors:[["app-formly-field"]],viewQuery:function(i,r){i&1&&ie(r.formlyField,Qo,5),i&2&&oe()},inputs:{field:[1,"field"]},decls:2,vars:1,consts:[["formlyField",""],[3,"field"]],template:function(i,r){i&1&&u(0,"formly-field",1,0),i&2&&f("field",r.field())},dependencies:[y,x,Z],encapsulation:2});let o=t;return o})();var Re=(()=>{let t=class t{constructor(){this.elementRef=_(se),this.moduleService=_(w)}ngOnInit(){let e=this.elementRef.nativeElement;this.field?.props?.attributes&&(this.field.props.attributes&&this.field.props.attributes.width&&(e.style.width=`${this.field.props.attributes.width}px`),this.field.props.attributes.column&&(e.style.gridColumn=`${this.field.props.attributes.column}`),this.field.props.attributes.row&&(e.style.gridRow=`${this.field.props.attributes.row}`)),this.field?.props?.description?.length&&(e.addEventListener("focusin",()=>{this.moduleService.formMessage.next({id:this.field?.id,message:this.field?.props?.description})}),e.addEventListener("focusout",()=>{this.moduleService.formMessage.next({id:this.field?.id,message:""})})),this.field?.props?.required&&(this.field.validation.messages={required:`A ${this.field.props.label||"value"} is required`})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=pe({type:t,selectors:[["","formlyFieldDirective",""]],inputs:{field:"field",formlyFieldDirective:"formlyFieldDirective"}});let o=t;return o})();var Wo=["fieldContainer"],zo=["*"];function Yo(o,t){if(o&1&&(p(0,"div",2),h(1),c()),o&2){let n=b();l(),T(n.props.label)}}function Ko(o,t){if(o&1&&u(0,"formly-field",3,1),o&2){let n=t.$implicit,e=ce(1);f("field",n)("formlyFieldDirective",e)}}var no=(()=>{let t=class t extends E{constructor(){super(...arguments),this.elementRef=_(se),this.fieldContainer=re("fieldContainer")}ngOnInit(){let e=this.fieldContainer()?.nativeElement;switch(this.field.props?.type){case"grid":e.classList.add("form-grid"),this.props.attributes&&this.props.attributes.width&&(e.style.gridTemplateColumns=`repeat(${this.props.attributes.width}, 8px)`);break;case"vbox":e.classList.add("form-vbox");break;case"hbox":e.classList.add("form-hbox");break;case"group":e.classList.add("form-group"),this.props.attributes&&(this.props.attributes.gridWidth||this.props.attributes.gridHeight)&&(e.classList.add("form-grid"),this.props.attributes.gridWidth&&(e.style.gridTemplateColumns=`repeat(${this.props.attributes.gridWidth}, 8px)`));break}}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-group"]],viewQuery:function(i,r){i&1&&ie(r.fieldContainer,Wo,5),i&2&&oe()},features:[g],ngContentSelectors:zo,decls:6,vars:1,consts:[["fieldContainer",""],["formlyField",""],[1,"label"],[3,"field","formlyFieldDirective"]],template:function(i,r){i&1&&(Qe(),v(0,Yo,2,1,"div",2),p(1,"div",null,0),U(3,Ko,2,2,"formly-field",3,H),We(5),c()),i&2&&(F(r.props.label!=null&&r.props.label.length&&(r.field.parent==null?null:r.field.parent.type)!=="tab"?0:-1),l(3),$(r.field.fieldGroup))},dependencies:[y,x,Z,Re],styles:[`[_nghost-%COMP%]{display:block;height:fit-content}[_nghost-%COMP%]     .form-grid{display:grid!important;row-gap:8px!important}[_nghost-%COMP%]     .form-vbox{display:flex;flex-direction:column;row-gap:16px}[_nghost-%COMP%]     .form-hbox{display:flex;flex-direction:row;column-gap:16px}[_nghost-%COMP%]     .form-group{display:flex;flex-direction:column;row-gap:16px;border:var(--forge-theme-outline);border-radius:4px;padding:16px}.label[_ngcontent-%COMP%]{padding-bottom:8px}
/*# sourceMappingURL=group-type.component-A5ELVCTH.css.map */`]});let o=t;return o})();function Xo(o,t){if(o&1&&h(0),o&2){let n=b();z(" ",n.props.label," ")}}function Zo(o,t){if(o&1&&(p(0,"span",1),h(1),c()),o&2){let n=b();l(),T(n.props.description)}}var so=(()=>{let t=class t extends E{constructor(){super(...arguments),this.moduleService=_(w),this.unsubscribe=new S}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(N(this.unsubscribe),L(i=>i.invalid?{server:{message:i.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-checkbox"]],features:[g],decls:3,vars:6,consts:[[3,"id","readonly","formControl","formlyAttributes"],["slot","helper-text"]],template:function(i,r){i&1&&(p(0,"forge-checkbox",0),v(1,Xo,1,1),v(2,Zo,2,1,"span",1),c()),i&2&&(f("id",r.id)("readonly",r.props.readonly)("formControl",r.formControl)("formlyAttributes",r.field),l(),F(r.props.label?1:-1),l(),F(r.props.description?2:-1))},dependencies:[y,R,q,Q,x,W,hi,ui,mi],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=checkbox-type.component-DQTQGDAR.css.map */`]});let o=t;return o})();function Jo(o,t){if(o&1&&(p(0,"label",3),h(1),c()),o&2){let n=b();K("for",n.id),l(),T(n.props.label)}}function er(o,t){if(o&1&&(p(0,"span",4),u(1,"formly-validation-message",5),c()),o&2){let n=b();l(),f("field",n.field)}}var ao=(()=>{let t=class t extends E{constructor(){super(...arguments),this.moduleService=_(w),this.unsubscribe=new S}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):e.value&&!Qi(new Date(e.value))&&(e.setValue(null),this.field.props.required)?D({required:!0}):this.moduleService.validateField(this.field.key,e.value).pipe(N(this.unsubscribe),L(i=>i.invalid?{server:{message:i.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-date-picker"]],features:[g],decls:5,vars:11,consts:[[3,"max","min"],[3,"required","invalid"],["type","text",3,"id","placeholder","readonly","formControl","formlyAttributes"],["slot","label"],["slot","helper-text"],[3,"field"]],template:function(i,r){i&1&&(p(0,"forge-date-picker",0)(1,"forge-text-field",1),u(2,"input",2),v(3,Jo,2,2,"label",3),v(4,er,2,1,"span",4),c()()),i&2&&(f("max",r.props.max)("min",r.props.min),l(),f("required",r.props.required)("invalid",r.showError),l(),f("id",r.id)("placeholder",r.props.placeholder)("readonly",r.props.readonly)("formControl",r.formControl)("formlyAttributes",r.field),l(),F(r.props.label?3:-1),l(),F(r.showError?4:-1))},dependencies:[y,R,de,q,Q,x,W,J,yi,gi,ue,me],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=date-picker-type.component-AJLZJT6L.css.map */`]});let o=t;return o})();function tr(o,t){if(o&1&&(p(0,"label",2),h(1),c()),o&2){let n=b();K("for",n.id),l(),T(n.props.label)}}function ir(o,t){if(o&1&&(p(0,"span",3),u(1,"formly-validation-message",4),c()),o&2){let n=b();l(),f("field",n.field)}}var lo=(()=>{let t=class t extends E{constructor(){super(),this.moduleService=_(w),this.unsubscribe=new S,this.defaultOptions={props:{cols:1,rows:3}}}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(N(this.unsubscribe),L(i=>i.invalid?{server:{message:i.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=m({type:t,selectors:[["app-formly-textarea"]],features:[g],decls:5,vars:10,consts:[[3,"required","invalid"],[3,"id","cols","rows","readonly","formControl","formlyAttributes"],["slot","label"],["slot","helper-text"],[3,"field"]],template:function(i,r){i&1&&(p(0,"forge-text-field",0)(1,"textarea",1),h(2,"      "),c(),v(3,tr,2,2,"label",2),v(4,ir,2,1,"span",3),c()),i&2&&(f("required",r.props.required)("invalid",r.showError),l(),f("id",r.id)("cols",r.props.cols)("rows",r.props.rows)("readonly",r.props.readonly)("formControl",r.formControl)("formlyAttributes",r.field),l(2),F(r.props.label?3:-1),l(),F(r.showError?4:-1))},dependencies:[y,R,de,q,Q,x,W,J,ue,me],styles:[`[_nghost-%COMP%]{display:block}textarea[_ngcontent-%COMP%]{resize:none}
/*# sourceMappingURL=textarea-type.component-VUCGEPIX.css.map */`]});let o=t;return o})();function or(o,t){if(o&1){let n=Fe();p(0,"forge-tab",3),G("forge-tab-select",function(){let i=Ce(n).$implicit,r=b();return ve(r.onTabSelected(i))}),h(1),c()}if(o&2){let n=t.$implicit;l(),z(" ",n.props==null?null:n.props.label," ")}}var po=(()=>{let t=class t extends E{constructor(){super(...arguments),this.moduleService=_(w),this.activeTab=0}ngOnInit(){this.activeField=this.field.fieldGroup[0]}onTabSelected(e){this.activeField=e}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-tab"]],features:[g],decls:5,vars:3,consts:[["formlyField",""],["secondary","",3,"activeTab"],[3,"field","formlyFieldDirective"],[3,"forge-tab-select"]],template:function(i,r){if(i&1&&(p(0,"forge-tab-bar",1),U(1,or,2,1,"forge-tab",null,H),c(),u(3,"formly-field",2,0)),i&2){let s=ce(4);f("activeTab",r.activeTab),l(),$(r.field.fieldGroup),l(2),f("field",r.activeField)("formlyFieldDirective",s)}},dependencies:[y,R,x,Z,Bi,Li,ji,Gi],styles:[`[_nghost-%COMP%]{display:block}forge-tab-bar[_ngcontent-%COMP%]{margin:16px 0}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab[_ngcontent-%COMP%]{min-width:240px}
/*# sourceMappingURL=tab-type.component-DB5P4CAU.css.map */`]});let o=t;return o})();var rr=["table"];function nr(o,t){if(o&1&&(p(0,"th",4)(1,"div",8)(2,"span",9),h(3),c()()()),o&2){let n=t.$implicit;l(3),T(n.label)}}function sr(o,t){if(o&1&&(p(0,"td",10),u(1,"formly-field",14,1),c()),o&2){let n=t.$implicit,e=ce(2);l(),f("field",n)("formlyFieldDirective",e)}}function ar(o,t){if(o&1){let n=Fe();p(0,"tr",6),U(1,sr,3,2,"td",10,H),p(3,"td",11)(4,"forge-icon-button",12),G("click",function(){let i=Ce(n).$index,r=b();return ve(r.onRemove(i))}),u(5,"forge-icon",13),c()()()}if(o&2){let n=t.$implicit;l(),$(n.fieldGroup)}}var co=(()=>{let t=class t extends io{constructor(){super(...arguments),this.tableElement=re("table")}onAdd(){let e=this.props.columns.filter(i=>i.key?.length).map(i=>[i.key,i.defaultValue]);this.add(this.formControl.length,Object.fromEntries(e)),requestAnimationFrame(()=>{let i=Array.from(this.tableElement()?.nativeElement.querySelectorAll("tbody > tr")).reverse()[0];if(i){let r=i.querySelector(`[id*="${e[0][0]}"]`);r&&r.focus()}})}onRemove(e){this.remove(e)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-table"]],viewQuery:function(i,r){i&1&&ie(r.tableElement,rr,5),i&2&&oe()},features:[g],decls:15,vars:0,consts:[["table",""],["formlyField",""],[1,"forge-table"],[1,"forge-table-row","forge-table-head__row"],["scope","col",1,"forge-table-cell","forge-table-head__cell"],[1,"forge-table-cell","forge-table-head__cell","forge-table-cell__button"],[1,"forge-table-row","forge-table-body__row"],[3,"click"],[1,"forge-table-head__cell-container"],[1,"forge-table-head__cell-text"],[1,"forge-table-cell","forge-table-body__cell"],[1,"forge-table-cell","forge-table-body__cell","forge-table-cell__button"],["aria-label","Delete",3,"click"],["name","delete"],[3,"field","formlyFieldDirective"]],template:function(i,r){if(i&1){let s=Fe();p(0,"table",2,0)(2,"thead")(3,"tr",3),U(4,nr,4,1,"th",4,H),u(6,"th",5),c()(),p(7,"tbody"),U(8,ar,6,0,"tr",6,H),c(),p(10,"tfoot")(11,"tr")(12,"td")(13,"forge-button",7),G("click",function(){return Ce(s),ve(r.onAdd())}),h(14,"Add"),c()()()()()}i&2&&(l(4),$(r.props.columns),l(4),$(r.field.fieldGroup))},dependencies:[y,x,Z,Re],styles:[`[_nghost-%COMP%]{display:block}.forge-table-cell[_ngcontent-%COMP%]{padding-right:24px}.forge-table-cell[_ngcontent-%COMP%]:first-child{padding-left:0}.forge-table-cell[_ngcontent-%COMP%]:last-child{padding-right:0}.forge-table-cell__button[_ngcontent-%COMP%]{width:48px}.forge-table-body__cell[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px;vertical-align:top}.forge-table-body__cell[_ngcontent-%COMP%]   formly-field[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface)}
/*# sourceMappingURL=table-type.component-TMREJAMB.css.map */`]});let o=t;return o})();var lr=o=>({"app--hidden":o});function pr(o,t){o&1&&(p(0,"forge-page-state"),u(1,"img",8),p(2,"div",9),h(3,"No records were found."),c()())}function cr(o,t){o&1&&(Wt(0),u(1,"forge-skeleton",10)(2,"forge-skeleton",10)(3,"forge-skeleton",10)(4,"forge-skeleton",10),zt())}var fo=(()=>{let t=class t{constructor(){this.dialogConfig=_(bi),this.dialogRef=_(Ci),this.id=qi.elementId("app-"),this.data=[],this.paginator={pageIndex:0,pageSize:25,total:0},this.isBusy=!1,this.unsubscribe=new S,this.sort={property:"",direction:ri.Ascending},this.filters=[],this.dialogTitle=this.dialogConfig.title||"",this.columnConfigurations=this.dialogConfig.columnConfigurations||[],this.dataObservable=this.dialogConfig.dataObservable,this.key=this.dialogConfig.key||"",this.sort.property=this.columnConfigurations.find(e=>e.initialSort)?.property||this.columnConfigurations[0].property,this.dialogRef.nativeElement.setAttribute("aria-labelledby",`${this.id}--title`),this.getData()}onClose(){this.dialogRef.close()}onPaginatorChange(e){this.paginator.pageIndex=e.pageIndex,this.paginator.pageSize=e.pageSize,this.getData()}onTableSort(e){this.sort.property=this.columnConfigurations[e.columnIndex].property,this.sort.direction=e.direction,this.paginator.pageIndex=0,this.getData()}onTableFilter(e){let i=this.columnConfigurations[e.columnIndex].property;if(ii(e.value)&&e.value?.toString().length)this.filters.push({property:i,value:e.value});else{let r=this.filters.findIndex(s=>s.property===i);r!==-1&&this.filters.splice(r,1)}this.paginator.pageIndex=0,this.getData()}onTableRowClick(e){this.dialogRef.close(e.data[this.key])}getData(){this.unsubscribe.next(),this.unsubscribe.complete(),this.isBusy=!0;let e={filters:this.filters,sort:this.sort,skip:this.paginator.pageIndex*this.paginator.pageSize,take:this.paginator.pageSize};this.dataObservable(e).pipe(At(()=>this.isBusy=!1),N(this.unsubscribe)).subscribe(i=>{this.data=i.data,this.paginator.total=i.count})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=m({type:t,selectors:[["app-formly-field-help-dialog"]],decls:12,vars:13,consts:[["slot","header"],["slot","start",1,"forge-typography--heading4",3,"id"],["slot","end","aria-label","Close",1,"header__close",3,"click"],["name","close"],["slot","body"],["allow-row-click","","filter","true",3,"forge-table-row-click","forge-table-sort","forge-table-filter","ngClass","data","columnConfigurations"],["slot","footer","inverted","true"],["slot","end",3,"forge-paginator-change","pageIndex","pageSize","total","disabled"],["src","https://cdn.forge.tylertech.com/v1/images/spot/no-search-results-spot.svg","slot","graphic","alt","No records found"],["slot","message"],["list-item",""]],template:function(i,r){i&1&&(p(0,"forge-scaffold")(1,"forge-toolbar",0)(2,"h2",1),h(3),c(),p(4,"forge-icon-button",2),G("click",function(){return r.onClose()}),u(5,"forge-icon",3),c()(),p(6,"div",4)(7,"forge-table",5),G("forge-table-row-click",function(a){return r.onTableRowClick(a.detail)})("forge-table-sort",function(a){return r.onTableSort(a.detail)})("forge-table-filter",function(a){return r.onTableFilter(a.detail)}),c(),v(8,pr,4,0,"forge-page-state"),v(9,cr,5,0,"ng-container"),c(),p(10,"forge-toolbar",6)(11,"forge-paginator",7),G("forge-paginator-change",function(a){return r.onPaginatorChange(a.detail)}),c()()()),i&2&&(l(2),f("id",r.id+"--title"),l(),z(" ",r.dialogTitle," "),l(4),f("ngClass",Xt(11,lr,r.isBusy))("data",r.data)("columnConfigurations",r.columnConfigurations),l(),F(!r.isBusy&&!r.data.length?8:-1),l(),F(r.isBusy?9:-1),l(2),f("pageIndex",r.paginator.pageIndex)("pageSize",r.paginator.pageSize)("total",r.paginator.total)("disabled",r.isBusy||!r.data.length))},dependencies:[y,Jt,ot,it,et,tt,_i,Fi,Ei,xi,Si,wi,Vi,Pi,Hi,Ni,$i,Ui],styles:[`[_nghost-%COMP%]{display:contents}forge-scaffold[_ngcontent-%COMP%]{height:90vh;width:90vw}






/*# sourceMappingURL=field-help-dialog.component-6O5KWBBZ.css.map */`]});let o=t;return o})();function dr(o,t){if(o&1&&(p(0,"label",3),h(1),c()),o&2){let n=b();K("for",n.id),l(),T(n.props.label)}}function fr(o,t){if(o&1&&(p(0,"span",6),u(1,"formly-validation-message",7),c()),o&2){let n=b();l(),f("field",n.field)}}var mo=(()=>{let t=class t extends E{constructor(){super(...arguments),this.dialogService=_(vi),this.moduleService=_(w),this.unsubscribe=new S}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(N(this.unsubscribe),L(i=>i.invalid?{server:{message:i.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onShowDialog(){this.dialogService.open(fo,{data:{columnConfigurations:this.props.options.map(e=>({header:e.label,property:e.property,sortable:!0,filter:!0,filterDelegate:new oi})),dataObservable:e=>this.moduleService.getFieldHelp(this.key,e),key:this.props.optionsKey,title:`Select a ${this.props.label}`}}).afterClosed.subscribe({next:e=>{e&&this.formControl.setValue(e)}})}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-input-help"]],features:[g],decls:7,vars:10,consts:[["input",""],[3,"required","invalid"],["type","text",3,"id","placeholder","readonly","formControl","formlyAttributes"],["slot","label"],["slot","addon-end","dense","","aria-label","Browse options",3,"click","disabled"],["name","more_horiz"],["slot","helper-text"],[3,"field"]],template:function(i,r){if(i&1){let s=Fe();p(0,"forge-text-field",1),u(1,"input",2,0),v(3,dr,2,2,"label",3),p(4,"forge-icon-button",4),G("click",function(){return Ce(s),ve(r.onShowDialog())}),u(5,"forge-icon",5),c(),v(6,fr,2,1,"span",6),c()}i&2&&(f("required",r.props.required)("invalid",r.showError),l(),f("id",r.id)("placeholder",r.props.placeholder)("readonly",r.props.readonly)("formControl",r.formControl)("formlyAttributes",r.field),l(2),F(r.props.label?3:-1),l(),f("disabled",r.formControl.disabled),l(2),F(r.showError?6:-1))},dependencies:[y,R,de,q,Q,x,W,J,ot,it,et,tt,ue,me],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=input-help-type.component-CLCRKSDP.css.map */`]});let o=t;return o})();var uo=(()=>{let t=class t extends E{};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-label"]],features:[g],decls:2,vars:2,consts:[[1,"forge-typography--body1"]],template:function(i,r){i&1&&(qt(0,"label",0),h(1),Qt()),i&2&&(K("for",r.id),l(),T(r.props.label))},dependencies:[y,x],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=label-type.component-X32ALPUZ.css.map */`]});let o=t;return o})();function mr(o,t){if(o&1&&(p(0,"label",0),h(1),c()),o&2){let n=b();K("for",n.id),l(),T(n.props.label)}}function ur(o,t){if(o&1&&h(0),o&2){let n=b().$implicit;z(" ",n.label," ")}}function hr(o,t){if(o&1&&(p(0,"forge-radio",2),v(1,ur,1,1),c()),o&2){let n=t.$implicit,e=t.$index,i=b();f("id",i.id+"-"+e)("name",i.id+"-radio-group")("value",n.value)("formControl",i.formControl)("formlyAttributes",i.field),l(),F(n.label?1:-1)}}function gr(o,t){if(o&1&&(p(0,"div",3),u(1,"formly-validation-message",4),c()),o&2){let n=b();l(),f("field",n.field)}}var ho=(()=>{let t=class t extends E{};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-radio"]],features:[g],decls:5,vars:3,consts:[["slot","label"],[3,"name"],[3,"id","name","value","formControl","formlyAttributes"],[1,"forge-typography--label1"],[3,"field"]],template:function(i,r){i&1&&(v(0,mr,2,2,"label",0),p(1,"forge-radio-group",1),U(2,hr,2,6,"forge-radio",2,H),c(),v(4,gr,2,1,"div",3)),i&2&&(F(r.props.label?0:-1),l(),f("name",r.id+"-radio-group"),l(),$(r.props.options),l(2),F(r.showError?4:-1))},dependencies:[y,R,q,Q,x,W,J,Oi,Di,Ti,ki,Mi],styles:[`[_nghost-%COMP%]{display:block}[role=radiogroup][_ngcontent-%COMP%]{margin-left:-8px;display:flex;column-gap:16px;flex-direction:column}forge-radio[_ngcontent-%COMP%]::part(container){padding:4px}.forge-typography--label1[_ngcontent-%COMP%]{color:var(--forge-theme-error)}
/*# sourceMappingURL=radio-type.component-GNLV5QNE.css.map */`]});let o=t;return o})();function yr(o,t){if(o&1&&(p(0,"span",1),u(1,"formly-validation-message",2),c()),o&2){let n=b();l(),f("field",n.field)}}var go=(()=>{let t=class t extends E{constructor(){super(...arguments),this.moduleService=_(w),this.unsubscribe=new S}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(N(this.unsubscribe),L(i=>i.invalid?{server:{message:i.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-select"]],features:[g],decls:2,vars:8,consts:[[3,"id","options","label","placeholder","invalid","formControl","formlyAttributes"],["slot","helper-text"],[3,"field"]],template:function(i,r){i&1&&(p(0,"forge-select",0),v(1,yr,2,1,"span",1),c()),i&2&&(f("id",r.id)("options",r.props.options)("label",r.props.label)("placeholder",r.props.placeholder)("invalid",r.showError)("formControl",r.formControl)("formlyAttributes",r.field),l(),F(r.showError?1:-1))},dependencies:[y,R,q,Q,x,W,J,Ii,Ai,Ri],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=select-type.component-OSAQDJMJ.css.map */`]});let o=t;return o})();var yo={prePopulate(o){switch(o.type){case"date-picker":case"input":case"select":case"textarea":}}};var bo=(()=>{let t=class t extends E{onClick(e){console.log(e)}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-button"]],features:[g],decls:2,vars:1,consts:[["variant","filled",3,"click"]],template:function(i,r){i&1&&(p(0,"forge-button",0),G("click",function(a){return r.onClick(a)}),h(1),c()),i&2&&(l(),z(" ",r.props.label," "))},dependencies:[y,fi,di],encapsulation:2});let o=t;return o})();var br=["fieldContainer"];function Cr(o,t){if(o&1&&(p(0,"div",2),h(1),c()),o&2){let n=b();l(),T(n.props.label)}}function vr(o,t){if(o&1&&u(0,"formly-field",3,1),o&2){let n=t.$implicit,e=ce(1);f("field",n)("formlyFieldDirective",e)}}var Co=(()=>{let t=class t extends E{constructor(){super(...arguments),this.fieldContainer=re("fieldContainer")}ngOnInit(){let e=this.fieldContainer()?.nativeElement;switch(this.field.props?.type){case"grid":e.classList.add("form-grid"),this.props.attributes.columns&&(e.style.gridTemplateColumns=`repeat(${this.props.attributes.columns}, auto)`);break;case"vbox":e.classList.add("form-vbox");break;case"hbox":e.classList.add("form-hbox");break;case"group":e.classList.add("form-group");break}}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-container"]],viewQuery:function(i,r){i&1&&ie(r.fieldContainer,br,5),i&2&&oe()},features:[g],decls:5,vars:1,consts:[["fieldContainer",""],["formlyField",""],[1,"label"],[3,"field","formlyFieldDirective"]],template:function(i,r){i&1&&(v(0,Cr,2,1,"div",2),p(1,"div",null,0),U(3,vr,2,2,"formly-field",3,H),c()),i&2&&(F(r.props.label?0:-1),l(3),$(r.field.fieldGroup))},dependencies:[y,x,Z,Re],styles:[`[_nghost-%COMP%]{display:inline-block}  .form-grid{display:grid;gap:16px}  .form-vbox{display:flex;flex-direction:column;row-gap:16px}  .form-hbox{display:flex;flex-direction:row;column-gap:16px}  .form-group{display:flex;flex-direction:column;row-gap:16px;border:1px solid #e6e6e6;border-radius:4px;padding:16px}.label[_ngcontent-%COMP%]{padding:8px}
/*# sourceMappingURL=container-type.component-MQ3N6MD3.css.map */`]});let o=t;return o})();var Fr=["input"];function _r(o,t){if(o&1&&(p(0,"label",3),h(1),c()),o&2){let n=b();K("for",n.id),l(),T(n.props.label)}}function xr(o,t){if(o&1&&(p(0,"span",4),u(1,"formly-validation-message",5),c()),o&2){let n=b();l(),f("field",n.field)}}var vo=(()=>{let t=class t extends E{constructor(){super(...arguments),this.unsubscribe=new S,this.moduleService=_(w),this.inputElement=re("input"),this.inputType="text"}ngOnInit(){this.inputType=this.props?.type||"text",this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(N(this.unsubscribe),L(i=>i.invalid?{server:{message:i.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}};t.\u0275fac=(()=>{let e;return function(r){return(e||(e=C(t)))(r||t)}})(),t.\u0275cmp=m({type:t,selectors:[["app-formly-input"]],viewQuery:function(i,r){i&1&&ie(r.inputElement,Fr,5),i&2&&oe()},features:[g],decls:5,vars:10,consts:[["input",""],[3,"required","invalid"],[3,"id","type","placeholder","readonly","formControl","formlyAttributes"],["slot","label"],["slot","helper-text"],[3,"field"]],template:function(i,r){i&1&&(p(0,"forge-text-field",1),u(1,"input",2,0),v(3,_r,2,2,"label",3),v(4,xr,2,1,"span",4),c()),i&2&&(f("required",r.props.required)("invalid",r.showError),l(),f("id",r.id)("type",r.inputType)("placeholder",r.props.placeholder)("readonly",r.props.readonly)("formControl",r.formControl)("formlyAttributes",r.field),l(2),F(r.props.label?3:-1),l(),F(r.showError?4:-1))},dependencies:[y,R,de,q,Q,x,W,J,ue,me],styles:[`[_nghost-%COMP%]{display:block}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
/*# sourceMappingURL=input-type.component-W6SSNVSO.css.map */`]});let o=t;return o})();var Fo=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=De({type:t}),t.\u0275inj=Me({imports:[x.forRoot({extensions:[{name:"formly-field-extension",extension:yo}],types:[{name:"checkbox",component:so},{name:"date-picker",component:ao},{name:"input",component:vo},{name:"input-help",component:mo},{name:"radio",component:ho},{name:"select",component:go},{name:"textarea",component:lo},{name:"button",component:bo},{name:"container",component:Co},{name:"formly-group",component:no},{name:"tab",component:po},{name:"table",component:co},{name:"label",component:uo}]}),x]});let o=t;return o})();var Er=[{path:"**",component:oo}],Ua=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=De({type:t}),t.\u0275inj=Me({providers:[w],imports:[y,ut.forChild(Er),R,Fo,ro,ut]});let o=t;return o})();export{Ua as FormlyDemoModule};
//# sourceMappingURL=chunk-Y6XKX3WR.js.map
