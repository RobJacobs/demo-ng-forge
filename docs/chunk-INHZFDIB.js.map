{
  "version": 3,
  "sources": ["src/app/shared/directives/form-control-invalid/form-control-invalid.directive.ts"],
  "sourcesContent": ["import { DestroyRef, Directive, ElementRef, OnInit, Renderer2, inject, input } from '@angular/core';\r\nimport { AbstractControl } from '@angular/forms';\r\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\r\nimport { combineLatest, delay, distinctUntilChanged, fromEvent, map, startWith } from 'rxjs';\r\n\r\n@Directive({\r\n  selector: '[appFormControlInvalid]'\r\n})\r\nexport class FormControlInvalidDirective implements OnInit {\r\n  private destroyRef = inject(DestroyRef);\r\n  private elementRef = inject(ElementRef<HTMLElement>);\r\n  private renderer = inject(Renderer2);\r\n\r\n  public readonly control = input.required<AbstractControl>({ alias: 'appFormControlInvalid' });\r\n\r\n  public ngOnInit() {\r\n    if (!this.elementRef.nativeElement.querySelector('*[slot=\"support-text\"]:not(.app--form-control-invalid)')) {\r\n      this.elementRef.nativeElement.style.setProperty('--forge-field-support-text-margin-block', '0');\r\n    }\r\n    const blur$ = fromEvent<FocusEvent>(this.elementRef.nativeElement, 'focusout').pipe(delay(0));\r\n    const statusChanges$ = this.control().statusChanges.pipe(startWith(this.control().status));\r\n\r\n    combineLatest({ event: blur$, status: statusChanges$ })\r\n      .pipe(\r\n        map((value) => value.status === 'INVALID' && this.control().touched),\r\n        distinctUntilChanged(),\r\n        takeUntilDestroyed(this.destroyRef)\r\n      )\r\n      .subscribe((shouldMarkInvalid) => {\r\n        if (shouldMarkInvalid) {\r\n          this.renderer.setAttribute(this.elementRef.nativeElement, 'invalid', '');\r\n          this.renderer.addClass(this.elementRef.nativeElement, 'app--form-control-invalid');\r\n          (this.elementRef.nativeElement as HTMLElement).style.removeProperty('--forge-field-support-text-margin-block');\r\n        } else {\r\n          this.renderer.removeAttribute(this.elementRef.nativeElement, 'invalid');\r\n          this.renderer.removeClass(this.elementRef.nativeElement, 'app--form-control-invalid');\r\n          if (!this.elementRef.nativeElement.querySelector('*[slot=\"support-text\"]:not(.app--form-control-invalid)')) {\r\n            this.elementRef.nativeElement.style.setProperty('--forge-field-support-text-margin-block', '0');\r\n          }\r\n        }\r\n      });\r\n  }\r\n}\r\n"],
  "mappings": "oKAQA,IAAaA,GAA2B,IAAA,CAAlC,MAAOA,CAA2B,CAHxCC,aAAA,CAIU,KAAAC,WAAaC,EAAOC,CAAU,EAC9B,KAAAC,WAAaF,EAAOG,CAAuB,EAC3C,KAAAC,SAAWJ,EAAOK,CAAS,EAEnB,KAAAC,QAAUC,EAAMC,SAA0B,CAAEC,MAAO,uBAAuB,CAAE,EAErFC,UAAQ,CACR,KAAKR,WAAWS,cAAcC,cAAc,wDAAwD,GACvG,KAAKV,WAAWS,cAAcE,MAAMC,YAAY,0CAA2C,GAAG,EAEhG,IAAMC,EAAQC,EAAsB,KAAKd,WAAWS,cAAe,UAAU,EAAEM,KAAKC,EAAM,CAAC,CAAC,EACtFC,EAAiB,KAAKb,QAAO,EAAGc,cAAcH,KAAKI,EAAU,KAAKf,QAAO,EAAGgB,MAAM,CAAC,EAEzFC,EAAc,CAAEC,MAAOT,EAAOO,OAAQH,CAAc,CAAE,EACnDF,KACCQ,EAAKC,GAAUA,EAAMJ,SAAW,WAAa,KAAKhB,QAAO,EAAGqB,OAAO,EACnEC,EAAoB,EACpBC,EAAmB,KAAK9B,UAAU,CAAC,EAEpC+B,UAAWC,GAAqB,CAC3BA,GACF,KAAK3B,SAAS4B,aAAa,KAAK9B,WAAWS,cAAe,UAAW,EAAE,EACvE,KAAKP,SAAS6B,SAAS,KAAK/B,WAAWS,cAAe,2BAA2B,EAChF,KAAKT,WAAWS,cAA8BE,MAAMqB,eAAe,yCAAyC,IAE7G,KAAK9B,SAAS+B,gBAAgB,KAAKjC,WAAWS,cAAe,SAAS,EACtE,KAAKP,SAASgC,YAAY,KAAKlC,WAAWS,cAAe,2BAA2B,EAC/E,KAAKT,WAAWS,cAAcC,cAAc,wDAAwD,GACvG,KAAKV,WAAWS,cAAcE,MAAMC,YAAY,0CAA2C,GAAG,EAGpG,CAAC,CACL,iDAjCWjB,EAA2B,CAAA,+BAA3BA,EAA2BwC,UAAA,CAAA,CAAA,GAAA,wBAAA,EAAA,CAAA,EAAAC,OAAA,CAAAhC,QAAA,CAAA,EAAA,wBAAA,SAAA,CAAA,CAAA,CAAA,CAAA,SAA3BT,CAA2B,GAAA",
  "names": ["FormControlInvalidDirective", "constructor", "destroyRef", "inject", "DestroyRef", "elementRef", "ElementRef", "renderer", "Renderer2", "control", "input", "required", "alias", "ngOnInit", "nativeElement", "querySelector", "style", "setProperty", "blur$", "fromEvent", "pipe", "delay", "statusChanges$", "statusChanges", "startWith", "status", "combineLatest", "event", "map", "value", "touched", "distinctUntilChanged", "takeUntilDestroyed", "subscribe", "shouldMarkInvalid", "setAttribute", "addClass", "removeProperty", "removeAttribute", "removeClass", "selectors", "inputs"]
}
