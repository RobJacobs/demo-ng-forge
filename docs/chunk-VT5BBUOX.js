import{a as c}from"./chunk-WTEGRGZ6.js";import{a as l}from"./chunk-Y5FC5JZC.js";import{C as D,E as p,n as a,q as C}from"./chunk-WGIND62E.js";import{C as g,F as h,I as d,K as f,L as S,Z as k,ca as b,d as s,e as m,t as u,u as i}from"./chunk-UXY6XTJ4.js";var H=(()=>{class n{constructor(){this.httpClient=b(C)}getProfile(){return this.httpClient.get("mock-data/profile.json")}getPeople(e){return this.httpClient.get("mock-data/people.json").pipe(S(1e3),i(t=>{let o=t.length;return e&&(e.filters?.length&&(t=c.filterData(t,e.filters.map(r=>({key:r.property,value:r.value,strict:r.strict}))),o=t.length),e.sort&&(t=c.sortData(t,e.sort.property,"string",e.sort.direction)),p(e.skip)&&p(e.take)&&(t=t.slice(e.skip,e.skip+e.take))),{count:o,data:t}}))}getPerson(e){return this.httpClient.get("mock-data/people.json").pipe(i(t=>t.find(o=>o.id.toString()===e.toString())))}getSearches(e){return new s(t=>{let o=localStorage.getItem(e);D(o)&&(o=JSON.parse(o)),t.next(o),t.complete()})}saveSearches(e,t){return new s(o=>{localStorage.setItem(e,JSON.stringify(t)),o.next(!0),o.complete()})}getLongRequest(){return this.httpClient.get("http://localhost:5000/long-request",{context:new a().set(l,!0)})}getFile(e){return this.httpClient.get(`mock-data/${e}`,{context:new a().set(l,!0),responseType:"blob"})}pollingRequest(e){let t=new m,o=new Date;return o.setSeconds(o.getSeconds()+e),g(0,100).pipe(d(()=>this.getLongRequest()),h(r=>new Date(r.data)>o),f(1),u(6e4)).subscribe({next:r=>{t.next(r.data),t.complete()},error:r=>{t.error(r),t.complete()}}),t}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();export{H as a};
//# sourceMappingURL=chunk-VT5BBUOX.js.map
