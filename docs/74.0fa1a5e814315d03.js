"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[74],{685:(I,T,s)=>{s.r(T),s.d(T,{QueryBuilderModule:()=>J});var g=s(6575),b=s(1076),h=s(9189),a=s(2024),m=s(4135),Z=s(5162),e=s(1699),r=s(8189),u=s(353);function o(n,_){1&n&&e.GkF(0)}const p=function(n,_){return{formGroup:n,index:_}};function d(n,_){if(1&n&&(e.ynx(0),e.TgZ(1,"div",8),e.YNc(2,o,1,0,"ng-container",9),e.qZA(),e.BQk()),2&n){const t=_.$implicit,i=_.index;e.oxw();const l=e.MAs(11);e.xp6(2),e.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",e.WLB(2,p,t,i))}}function P(n,_){1&n&&e.GkF(0)}const E=function(n){return{formGroup:n}};function c(n,_){if(1&n&&(e.ynx(0),e.YNc(1,P,1,0,"ng-container",9),e.BQk()),2&n){const t=e.oxw().formGroup;e.oxw();const i=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,E,t))}}function x(n,_){if(1&n&&(e.TgZ(0,"forge-option",29),e._uU(1),e.qZA()),2&n){const t=_.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function v(n,_){if(1&n&&(e.TgZ(0,"forge-text-field",14),e._UZ(1,"input",30),e.TgZ(2,"label",31),e._uU(3,"Value"),e.qZA(),e.TgZ(4,"span",18),e._uU(5,"A value is required"),e.qZA()()),2&n){const t=e.oxw(),l=t.index;e.Q6J("appFormControlInvalid",t.formGroup.get("value")),e.xp6(1),e.s9C("id","app--query-builder--filter-value-"+l),e.xp6(1),e.s9C("for","app--query-builder--filter-value-"+l)}}function C(n,_){if(1&n&&(e.TgZ(0,"div",32)(1,"forge-text-field",14),e._UZ(2,"input",33),e.TgZ(3,"label",31),e._uU(4,"Minimum"),e.qZA(),e.TgZ(5,"span",18),e._uU(6,"A minimum value is required"),e.qZA()(),e.TgZ(7,"forge-text-field",14),e._UZ(8,"input",34),e.TgZ(9,"label",31),e._uU(10,"Maximum"),e.qZA(),e.TgZ(11,"span",18),e._uU(12),e.qZA()()()),2&n){const t=e.oxw(),i=t.formGroup,l=t.index;e.xp6(1),e.Q6J("appFormControlInvalid",i.get("minValue")),e.xp6(1),e.s9C("id","app--query-builder--filter-min-"+l),e.xp6(1),e.s9C("for","app--query-builder--filter-min-"+l),e.xp6(4),e.Q6J("appFormControlInvalid",i.get("maxValue")),e.xp6(1),e.s9C("id","app--query-builder--filter-max-"+l),e.xp6(1),e.s9C("for","app--query-builder--filter-max-"+l),e.xp6(3),e.hij(" ",i.get("maxValue").errors.required?"A maximum value is required":i.get("maxValue").errors.range?"Max value must be greater or equal to min value":""," ")}}function A(n,_){1&n&&e.GkF(0)}function B(n,_){1&n&&e.GkF(0)}function y(n,_){if(1&n&&(e.ynx(0),e.YNc(1,A,1,0,"ng-container",9),e.TgZ(2,"div",8),e.YNc(3,B,1,0,"ng-container",9),e.qZA(),e.BQk()),2&n){const t=_.$implicit,i=_.index;e.oxw(3);const l=e.MAs(13),f=e.MAs(11);e.xp6(1),e.Q6J("ngTemplateOutlet",l)("ngTemplateOutletContext",e.VKq(4,E,t)),e.xp6(2),e.Q6J("ngTemplateOutlet",f)("ngTemplateOutletContext",e.WLB(6,p,t,i))}}function M(n,_){if(1&n&&(e.ynx(0,1),e.YNc(1,y,4,9,"ng-container",2),e.BQk()),2&n){const t=e.oxw().formGroup;let i;e.xp6(1),e.Q6J("ngForOf",null==(i=t.get("filters"))?null:i.controls)}}function F(n,_){if(1&n){const t=e.EpF();e.YNc(0,c,2,4,"ng-container",10),e.ynx(1,11),e.TgZ(2,"div",12)(3,"forge-autocomplete",13)(4,"forge-text-field",14),e._UZ(5,"input",15),e.TgZ(6,"label",16),e._uU(7,"Property"),e.qZA(),e._UZ(8,"forge-icon",17),e.TgZ(9,"span",18),e._uU(10,"A property is required"),e.qZA()()(),e.TgZ(11,"forge-select",19),e.YNc(12,x,2,2,"forge-option",20),e.TgZ(13,"span",18),e._uU(14,"An operator is required"),e.qZA()(),e.YNc(15,v,6,3,"forge-text-field",21),e.YNc(16,C,13,7,"div",22),e.TgZ(17,"div",23)(18,"forge-menu",24),e.NdJ("forge-menu-select",function(l){const O=e.CHM(t).formGroup,Q=e.oxw();return e.KtG(Q.onAddFilter(O,l.detail.value))}),e.TgZ(19,"forge-icon-button")(20,"button",25),e._UZ(21,"forge-icon",5),e.qZA()()(),e.TgZ(22,"forge-icon-button")(23,"button",26),e.NdJ("click",function(){const f=e.CHM(t).formGroup,O=e.oxw();return e.KtG(O.onDeleteFilter(f))}),e._UZ(24,"forge-icon",27),e.qZA()()()(),e.YNc(25,M,2,1,"ng-container",28),e.BQk()}if(2&n){const t=_.formGroup,i=_.index,l=e.oxw();let f;e.Q6J("ngIf",i>0),e.xp6(1),e.Q6J("formGroup",t),e.xp6(2),e.Q6J("options",l.propertyOptions)("filter",l.propertyFilter),e.xp6(1),e.Q6J("appFormControlInvalid",t.get("property")),e.xp6(1),e.s9C("id","app--query-builder--filter-property"+i),e.xp6(1),e.s9C("for","app--query-builder--filter-property"+i),e.xp6(5),e.Q6J("appFormControlInvalid",t.get("operator")),e.xp6(1),e.Q6J("ngForOf",l.operatorOptions),e.xp6(3),e.Q6J("ngIf",6!==t.get("operator").value),e.xp6(1),e.Q6J("ngIf",6===t.get("operator").value),e.xp6(2),e.Q6J("options",l.filterOptions),e.xp6(7),e.Q6J("ngIf",null==(f=t.get("filters"))||null==f.controls?null:f.controls.length)}}function w(n,_){if(1&n&&(e.TgZ(0,"forge-option",29),e._uU(1),e.qZA()),2&n){const t=_.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function G(n,_){if(1&n&&(e.TgZ(0,"div",35)(1,"forge-select",36),e.YNc(2,w,2,2,"forge-option",20),e.qZA()()),2&n){const t=_.formGroup,i=e.oxw();e.xp6(1),e.Q6J("formControl",t.get("condition")),e.xp6(1),e.Q6J("ngForOf",i.conditionOptions)}}const N=[{path:"**",component:(()=>{class n{constructor(){this.formGroup=new a.cw({filters:new a.Oe([this.buildFilterFormGroup()])}),this.conditionOptions=[{value:"and",label:"And"},{value:"or",label:"Or"}],this.propertyOptions=[{value:"firstName",label:"First name"},{value:"lastName",label:"Last name"},{value:"dateOfBirth",label:"Date of birth"},{value:"gender",label:"Gender"},{value:"occupation",label:"Occupation"}],this.operatorOptions=[{value:0,label:"Equal"},{value:1,label:"Not equal"},{value:2,label:"Greater than"},{value:3,label:"Less than"},{value:4,label:"Greater than equal to"},{value:5,label:"Less than equal to"},{value:6,label:"Range"},{value:7,label:"Contains"},{value:8,label:"Not contains"},{value:9,label:"Empty"}],this.filterOptions=[{value:"condition",label:"Add condition"},{value:"group",label:"Add group"}],this.propertyFilter=t=>Z.c.filterData(this.propertyOptions,[{key:"label",value:t}])}onAddFilter(t,i){if(t===this.formGroup)this.formGroup.get("filters").push(this.buildFilterFormGroup());else switch(i){case"condition":{const l=t.parent.controls.indexOf(t)+1;t.parent.insert(l,this.buildFilterFormGroup());break}case"group":t.get("filters").push(this.buildFilterFormGroup())}}onDeleteFilter(t){const i=t.parent,l=i.controls.indexOf(t);-1!==l&&i.removeAt(l)}buildFilterFormGroup(t){return new a.cw({property:new a.NI(t?.property,{validators:[a.kI.required]}),condition:new a.NI(t?.condition||"and",{validators:[a.kI.required]}),operator:new a.NI(t?.operator,{validators:[a.kI.required]}),value:new a.NI(t?.value,{validators:[this.validateFilterValue("value")]}),minValue:new a.NI(t?.minValue,{validators:[this.validateFilterValue("minValue")]}),maxValue:new a.NI(t?.minValue,{validators:[this.validateFilterValue("maxValue")]}),filters:new a.Oe([])})}validateFilterValue(t){return i=>{const l=i.parent;if(!l)return null;const f=l.value.operator;if(!(0,m.$K)(f))return null;if(6===f){if("value"===t)return null;if(!(0,m.$K)(i.value)||!i.value.toString().length)return{required:!0};const O=l.value.minValue,Q=l.value.maxValue;if("minValue"===t&&(0,m.$K)(Q)&&O.localeCompare(Q,navigator.language,{numeric:!0,ignorePunctuation:!0})<1&&l.get("maxValue")?.setErrors(null),"maxValue"===t){if(!(0,m.$K)(O))return null;if(O.localeCompare(Q,navigator.language,{numeric:!0,ignorePunctuation:!0})>0)return{range:!0}}return null}return"minValue"===t||"maxValue"===t||(0,m.$K)(i.value)&&i.value.toString().length?null:{required:!0}}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-query-builder"]],decls:14,vars:5,consts:[["novalidate","","autocomplete","off",3,"formGroup"],["formArrayName","filters"],[4,"ngFor","ngForOf"],[1,"filter__group__add"],["type","button",3,"click"],["name","add_circle"],["filterFormTemplate",""],["filterHeaderTemplate",""],[1,"filter__group"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[3,"formGroup"],[1,"filter__form"],["formControlName","property",3,"options","filter"],["required","",3,"appFormControlInvalid"],["type","text",3,"id"],[3,"for"],["slot","trailing","name","arrow_drop_down",1,"forge-dropdown-icon"],["slot","helper-text",1,"app-form-control-invalid"],["formControlName","operator","label","Operator","required","",3,"appFormControlInvalid"],[3,"value",4,"ngFor","ngForOf"],["required","",3,"appFormControlInvalid",4,"ngIf"],["class","filter__form__range",4,"ngIf"],[1,"filter__form__action"],[3,"options","forge-menu-select"],["type","button","aria-label","add filter item"],["type","button","aria-label","Delete filter",3,"click"],["name","delete"],["formArrayName","filters",4,"ngIf"],[3,"value"],["type","text","formControlName","value",3,"id"],["slot","label",3,"for"],[1,"filter__form__range"],["type","text","formControlName","minValue",3,"id"],["type","text","formControlName","maxValue",3,"id"],[1,"filter__header"],[1,"filter__header__condition",3,"formControl"]],template:function(i,l){if(1&i&&(e.TgZ(0,"form",0)(1,"div",1),e.YNc(2,d,3,5,"ng-container",2),e.qZA(),e.TgZ(3,"forge-button",3)(4,"button",4),e.NdJ("click",function(){return l.onAddFilter(l.formGroup,"condition")}),e._UZ(5,"forge-icon",5),e._uU(6," Add a new condition "),e.qZA()(),e.TgZ(7,"p"),e._uU(8),e.ALo(9,"json"),e.qZA()(),e.YNc(10,F,26,13,"ng-template",null,6,e.W1O),e.YNc(12,G,3,2,"ng-template",null,7,e.W1O)),2&i){let f;e.Q6J("formGroup",l.formGroup),e.xp6(2),e.Q6J("ngForOf",null==(f=l.formGroup.get("filters"))?null:f.controls),e.xp6(6),e.Oqu(e.lcZ(9,3,l.formGroup.getRawValue()))}},dependencies:[g.sg,g.O5,g.tP,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.oH,a.sg,a.u,a.CE,r.$RD,r.YRL,r.r0F,r.oJW,r.r2H,r.Mnp,r.x8v,r.QIx,r.Hr0,r.afy,u.c,g.Ts],styles:["\n\n\n\n\n[_nghost-%COMP%]{display:block;padding:24px}.filter__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;margin:8px 0}.filter__header__condition[_ngcontent-%COMP%]{width:96px;background-color:#eee;border-radius:4px}.filter__header__condition[_ngcontent-%COMP%]::part(container):before{border:none}.filter__header__condition[_ngcontent-%COMP%]::part(text){padding:0 16px}.filter__form[_ngcontent-%COMP%]{display:grid;grid-gap:0 16px;grid-template-columns:216px 168px minmax(400px,1fr) 96px;align-items:start}.filter__form__range[_ngcontent-%COMP%]{display:grid;grid-gap:0 16px;grid-template-columns:minmax(192px,1fr) minmax(192px,1fr);align-items:start}.filter__form__action[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.filter__group[_ngcontent-%COMP%]{background-color:#fff;background-color:var(--mdc-theme-surface, #ffffff);border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);border:1px solid var(--forge-theme-border-color);padding:16px;border-left:4px solid #3f51b5;margin:16px 0}.filter__group[_ngcontent-%COMP%]   .filter__group[_ngcontent-%COMP%]{border:1px dashed #9e9e9e;margin:8px 0;padding:8px 16px}.filter__group[_ngcontent-%COMP%]:first-of-type{margin-top:0}.filter__group__add[_ngcontent-%COMP%]{border:1px dashed #9e9e9e;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);background-color:#f5f5f5;width:100%}.filter__group__add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;padding:16px;height:auto}.app-form-control-invalid[_ngcontent-%COMP%]{display:none}.app-form-control-invalid[invalid][_ngcontent-%COMP%], .app-form-control-invalid[invalid][_ngcontent-%COMP%]   .app-form-control-invalid[_ngcontent-%COMP%]{display:block}"]})}return n})()}];let J=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#r=this.\u0275inj=e.cJS({imports:[g.ez,b.Bz.forChild(N),h.F,b.Bz]})}return n})()},5162:(I,T,s)=>{s.d(T,{c:()=>m});var g=s(6575),b=s(4860),h=s(6907),a=s(4135);class m{static sortData(e,r,u,o){return e&&e.length?(u=u||"string","DESC"!==o&&(o="ASC"),e.slice().sort((p,d)=>(p=(0,h.SX)(p,r),d=(0,h.SX)(d,r),"DESC"===o?this.comparator(d,p,u):this.comparator(p,d,u)))):e}static groupData(e,r){return(0,a.kJ)(e)&&e.length&&r?.length?e.reduce((u,o)=>{const p=o[r];return u[p]||(u[p]=[]),u[p].push(o),u},{}):e}static filterData(e,r){if(!((0,a.kJ)(e)&&e.length&&(0,a.kJ)(r)&&r.length))return e;r=r.map(o=>{if((0,a.HD)(o.value)&&o.value.length){let p;if("<>"===o.value.substring(0,2)){if(2===o.value.length)return o.value="",o;p=o.value.substring(0,2),o.value=o.value.substring(2)}else if("<"===o.value.substring(0,1)||">"===o.value.substring(0,1)){if(1===o.value.length)return o.value="",o;p=o.value.substring(0,1),o.value=o.value.substring(1)}p&&Object.defineProperty(o,"operator",{value:p})}return o.value=(""+o.value).toLowerCase(),o});const u=o=>r.every(p=>{if(!p.value.length)return!0;const d=(""+(0,h.SX)(o,p.key)).toLowerCase();if(!d.length)return!1;if(p.strict)return d===p.value;switch(p.operator){case"<>":return 0!==this.comparator(d,p.value,p.type);case">":return this.comparator(d,p.value,p.type)>0;case"<":return this.comparator(d,p.value,p.type)<0;default:return d.indexOf(p.value)>-1}});return e.filter(o=>u(o))}static comparator(e,r,u="string"){if(e==r)return 0;if(!(0,a.$K)(e))return-1;if(!(0,a.$K)(r))return 1;switch(u){case"boolean":return e?-1:1;case"date":if(e=new Date(e).getTime(),isNaN(e))return-1;if(r=new Date(r).getTime(),isNaN(r))return 1;break;case"number":if(e=parseFloat(e),isNaN(e))return-1;if(r=parseFloat(r),isNaN(r))return 1;break;default:return isNaN(parseFloat(e))||isNaN(parseFloat(r))?(""+e).localeCompare(""+r):(""+e).localeCompare(""+r,navigator.language,{numeric:!0})}return e<r?-1:e>r?1:0}static navigateBack(e,r,u){1===e.getState()?.navigationId?r.navigate(u):e.back()}static elementId(e){return e+Math.random().toString(36).replace(/[^a-z]+/g,"")}static formatDate(e,r="MM/dd/yyyy"){return(0,a.$K)(e)?(0,g.p6)(e,r,navigator.language):""}static formatNumber(e,r="1.2-2"){return(0,g.uf)(e,navigator.language,r)}static uniqueId(){return Math.random().toString(36).substring(2)}static parseQueryStringParameters(){const e={};if(window.location.search.length){const r=new b.LE({fromString:window.location.search.substring(1)});r.keys().forEach(u=>{const o=r.getAll(u);o.length&&Object.defineProperty(e,u.toLowerCase(),{value:1===o.length?o[0]:o,enumerable:!0,writable:!0})})}return e}static reduceObject(e){const r={};return Object.keys(e).forEach(u=>{(0,a.$K)(e[u])&&((0,a.kJ)(e[u])?e[u].length&&(r[u]=e[u]):(e[u]+"").trim().length&&(r[u]="string"==typeof e[u]?e[u].trim():e[u]))}),r}}},9016:(I,T,s)=>{s.d(T,{R:()=>o});var g=s(384),b=s(2235),h=s(9912),a=s(1287),m=s(2602),Z=s(7825);const e=["addListener","removeListener"],r=["addEventListener","removeEventListener"],u=["on","off"];function o(c,x,v,C){if((0,m.m)(v)&&(C=v,v=void 0),C)return o(c,x,v).pipe((0,Z.Z)(C));const[A,B]=function E(c){return(0,m.m)(c.addEventListener)&&(0,m.m)(c.removeEventListener)}(c)?r.map(y=>M=>c[y](x,M,v)):function d(c){return(0,m.m)(c.addListener)&&(0,m.m)(c.removeListener)}(c)?e.map(p(c,x)):function P(c){return(0,m.m)(c.on)&&(0,m.m)(c.off)}(c)?u.map(p(c,x)):[];if(!A&&(0,a.z)(c))return(0,h.z)(y=>o(y,x,v))((0,g.Xf)(c));if(!A)throw new TypeError("Invalid event target");return new b.y(y=>{const M=(...F)=>y.next(1<F.length?F:F[0]);return A(M),()=>B(M)})}function p(c,x){return v=>C=>c[v](x,C)}}}]);
//# sourceMappingURL=74.0fa1a5e814315d03.js.map