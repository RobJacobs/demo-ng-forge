{"version":3,"file":"2501.0fccff8333331f04.js","mappings":"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","names":["B","C","b","U","R","w","O","S","_","j","a","s","L","g","T","v","constructor","e","super","this","listMode","isReference","operationalLayerType","resampling","sourceJSON","spatialReference","path","sublayers","type","url","normalizeCtorArgs","r","load","o","signal","addResolvingPromise","loadFromPortal","supportedTypes","catch","l","then","_fetchService","Promise","resolve","attributionDataUrl","parsedUrl","toLowerCase","_getDefaultAttribution","_getMapName","readSpatialReference","tileInfo","f","writeSublayers","t","loaded","i","slice","reverse","flatten","toArray","writeSublayerStructure","forEach","write","push","some","Object","keys","length","layers","tileServers","_getDefaultTileServers","castTileServers","Array","isArray","map","n","fetchTile","getTileUrl","responseType","query","refreshParameters","data","fetchImageBitmapTile","_this","_asyncToGenerator","M","tilemapCache","supportsBlankTile","p","blankTile","customParameters","token","apiKey","loadAll","allSublayers","bandCount","pixelSizeX","P","serverType","ssl","replace","read","origin","version","x","_fetchServerVersion","currentVersion","A","reject","match","includes","c","search","hasOverriddenFetchTile","__isDefault__","u","readOnly","prototype","json","Boolean","enabled","overridePolicy","h","String","origins","y","W","m","I","d","D"],"sourceRoot":"webpack:///","sources":["./node_modules/@arcgis/core/layers/TileLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../core/Error.js\";import{HandleOwnerMixin as s}from\"../core/HandleOwner.js\";import{loadAll as i}from\"../core/loadAll.js\";import{isSome as o}from\"../core/maybe.js\";import{MultiOriginJSONMixin as a}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as l}from\"../core/promiseUtils.js\";import{urlToObject as n,objectToQuery as p,makeAbsolute as c}from\"../core/urlUtils.js\";import{property as u}from\"../core/accessorSupport/decorators/property.js\";import{cast as m}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/arrayUtils.js\";import{reader as h}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as d}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as y}from\"../core/accessorSupport/decorators/writer.js\";import f from\"../geometry/SpatialReference.js\";import v from\"./Layer.js\";import{APIKeyMixin as g}from\"./mixins/APIKeyMixin.js\";import{ArcGISCachedService as S}from\"./mixins/ArcGISCachedService.js\";import{ArcGISMapService as _}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as j}from\"./mixins/ArcGISService.js\";import{BlendLayer as b}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as T}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as w}from\"./mixins/OperationalLayer.js\";import{PortalLayer as O}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as L}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as R}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as U}from\"./mixins/SublayersOwner.js\";import{parse as P,isHostedAgolService as x,isArcGISUrl as A}from\"./support/arcgisLayerUrl.js\";import{url as I}from\"./support/commonProperties.js\";import{createBitmap as M}from\"./support/imageBitmapUtils.js\";import W from\"./support/Sublayer.js\";const B=[\"Canvas/World_Dark_Gray_Base\",\"Canvas/World_Dark_Gray_Reference\",\"Canvas/World_Light_Gray_Base\",\"Canvas/World_Light_Gray_Reference\",\"Elevation/World_Hillshade\",\"Elevation/World_Hillshade_Dark\",\"Ocean/World_Ocean_Base\",\"Ocean/World_Ocean_Reference\",\"Ocean_Basemap\",\"Reference/World_Boundaries_and_Places\",\"Reference/World_Boundaries_and_Places_Alternate\",\"Reference/World_Transportation\",\"World_Imagery\",\"World_Street_Map\",\"World_Topo_Map\"];let C=class extends(b(U(R(w(O(S(_(j(a(s(L(g(T(v)))))))))))))){constructor(...e){super(...e),this.listMode=\"show\",this.isReference=null,this.operationalLayerType=\"ArcGISTiledMapServiceLayer\",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type=\"tile\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=o(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(l).then((()=>this._fetchService(r)))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,r){return(e=e||r.tileInfo&&r.tileInfo.spatialReference)&&f.fromJSON(e)}writeSublayers(e,r,t,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray(),o=[],a={writeSublayerStructure:!1,...s};i.forEach((e=>{const r=e.write({},a);o.push(r)}));o.some((e=>Object.keys(e).length>1))&&(r.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map((e=>n(e).path)):null}fetchTile(e,t,s,i={}){const{signal:o}=i,a=this.getTileUrl(e,t,s),l={responseType:\"image\",signal:o,query:{...this.refreshParameters}};return r(a,l).then((e=>e.data))}async fetchImageBitmapTile(e,t,s,i={}){const{signal:o}=i,a=this.getTileUrl(e,t,s),l={responseType:\"blob\",signal:o,query:{...this.refreshParameters}},{data:n}=await r(a,l);return M(n,a)}getTileUrl(e,r,t){const s=!this.tilemapCache&&this.supportsBlankTile,i=p({...this.parsedUrl?.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[r%o.length]:this.parsedUrl?.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}loadAll(){return i(this,(e=>{e(this.allSublayers)}))}_fetchService(e){return new Promise(((s,i)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");return void s({data:this.sourceJSON})}if(!this.parsedUrl)throw new t(\"tile-layer:undefined-url\",\"layer's url is not defined\");const a=P(this.parsedUrl.path);if(o(a)&&\"ImageServer\"===a.serverType)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e}).then(s,i)})).then((r=>{let t=this.url;if(r.ssl&&(t=this.url=t.replace(/^http:/i,\"https:\")),this.sourceJSON=r.data,this.read(r.data,{origin:\"service\",url:this.parsedUrl}),10.1===this.version&&!x(t))return this._fetchServerVersion(t,e).then((e=>{this.read({currentVersion:e})})).catch((()=>{}))}))}_fetchServerVersion(e,s){if(!A(e))return Promise.reject();const i=e.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";return r(i,{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:s}).then((e=>{if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new t(\"tile-layer:version-not-available\")}))}_getMapName(e){const r=e.match(/^(?:https?:)?\\/\\/(server\\.arcgisonline\\.com|services\\.arcgisonline\\.com|ibasemaps-api\\.arcgis\\.com)\\/arcgis\\/rest\\/services\\/([^\\/]+(\\/[^\\/]+)*)\\/mapserver/i);return r?r[2]:void 0}_getDefaultAttribution(e){if(null==e)return null;let r;e=e.toLowerCase();for(let t=0,s=B.length;t<s;t++)if(r=B[t],r.toLowerCase().includes(e))return c(\"//static.arcgis.com/attribution/\"+r);return null}_getDefaultTileServers(e){if(null==e)return[];const r=-1!==e.search(/^(?:https?:)?\\/\\/server\\.arcgisonline\\.com/i),t=-1!==e.search(/^(?:https?:)?\\/\\/services\\.arcgisonline\\.com/i);return r||t?[e,e.replace(r?/server\\.arcgisonline/i:/services\\.arcgisonline/i,r?\"services.arcgisonline\":\"server.arcgisonline\")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};e([u({readOnly:!0})],C.prototype,\"attributionDataUrl\",null),e([u({type:[\"show\",\"hide\",\"hide-children\"]})],C.prototype,\"listMode\",void 0),e([u({json:{read:!0,write:!0}})],C.prototype,\"blendMode\",void 0),e([u({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],C.prototype,\"isReference\",void 0),e([u({readOnly:!0,type:[\"ArcGISTiledMapServiceLayer\"]})],C.prototype,\"operationalLayerType\",void 0),e([u({type:Boolean})],C.prototype,\"resampling\",void 0),e([u()],C.prototype,\"sourceJSON\",void 0),e([u({type:f})],C.prototype,\"spatialReference\",void 0),e([h(\"spatialReference\",[\"spatialReference\",\"tileInfo\"])],C.prototype,\"readSpatialReference\",null),e([u({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],C.prototype,\"path\",void 0),e([u({readOnly:!0})],C.prototype,\"sublayers\",void 0),e([y(\"sublayers\",{layers:{type:[W]}})],C.prototype,\"writeSublayers\",null),e([u({json:{read:!1,write:!1}})],C.prototype,\"popupEnabled\",void 0),e([u()],C.prototype,\"tileServers\",null),e([m(\"tileServers\")],C.prototype,\"castTileServers\",null),e([u({readOnly:!0,json:{read:!1}})],C.prototype,\"type\",void 0),e([u(I)],C.prototype,\"url\",void 0),C=e([d(\"esri.layers.TileLayer\")],C),C.prototype.fetchTile.__isDefault__=!0;const D=C;export{D as default};\n"],"x_google_ignoreList":[0]}