{"version":3,"file":"6360.ec6f88b889ae7106.js","mappings":"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","names":["u","e","t","s","r","o","geometry","toJSON","where","m","p","constructor","super","arguments","this","_enabledEventTypes","Set","_isUserPaused","errorString","connectionStatus","initialize","addHandles","i","layer","customParameters","_proxy","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","purgeOptions","_update","suspended","pauseStream","resumeStream","connectionError","pause","resume","Array","isArray","map","includes","add","enableEvent","remove","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","trackIdField","_cleanUpQuery","then","c","features","forEach","sourceLayer","detach","_createClientOptions","setProperty","set","propertyName","value","_createTileRendererHash","JSON","stringify","definitionExpression","geometryDefinition","_createServiceOptions","_this","_asyncToGenerator","objectIdField","fields","l","geometryType","spatialReference","type","source","parsedUrl","serviceFilter","enabledEventTypes","from","values","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","n","prototype","readOnly","a","y"],"sourceRoot":"webpack:///","sources":["./node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{handlesGroup as r}from\"../../../core/handleUtils.js\";import{isNone as s,isSome as o}from\"../../../core/maybe.js\";import{watch as i}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../rest/support/FeatureSet.js\";import p from\"./FeatureLayerView2D.js\";import{toJSONGeometryType as l}from\"./support/util.js\";function u(e,t){if(s(e)&&s(t))return null;const r={};return o(t)&&(r.geometry=t.toJSON()),o(e)&&(r.where=e),r}let m=class extends p{constructor(){super(...arguments),this._enabledEventTypes=new Set,this._isUserPaused=!1,this.errorString=null,this.connectionStatus=\"disconnected\"}initialize(){this.addHandles([i((()=>this.layer.customParameters),(e=>this._proxy.updateCustomParameters(e))),this.layer.on(\"send-message-to-socket\",(e=>this._proxy.sendMessageToSocket(e))),this.layer.on(\"send-message-to-client\",(e=>this._proxy.sendMessageToClient(e))),i((()=>this.layer.purgeOptions),(()=>this._update())),i((()=>this.suspended),(e=>{e?this._proxy.pauseStream():this._isUserPaused||this._proxy.resumeStream()}))],\"constructor\")}get connectionError(){if(this.errorString)return new t(\"stream-controller\",this.errorString)}pause(){this._isUserPaused=!0,this._proxy.pauseStream()}resume(){this._isUserPaused=!1,this._proxy.resumeStream()}on(e,t){if(Array.isArray(e))return r(e.map((e=>this.on(e,t))));const s=[\"data-received\",\"message-received\"].includes(e);s&&(this._enabledEventTypes.add(e),this._proxy.enableEvent(e,!0));const o=super.on(e,t),i=this;return{remove(){o.remove(),s&&(i._proxy.closed||i.hasEventListener(e)||i._proxy.enableEvent(e,!1))}}}queryLatestObservations(e,r){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new t(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),r).then((e=>{const t=c.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.connectionStatus=\"disconnected\"}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(u(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),s=l(e.geometryType),o=e.timeInfo&&e.timeInfo.toJSON()||null,i=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",fields:r,geometryType:s,objectIdField:t,timeInfo:o,source:this.layer.parsedUrl,serviceFilter:u(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enabledEventTypes:Array.from(this._enabledEventTypes.values()),spatialReference:i,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}};e([n()],m.prototype,\"errorString\",void 0),e([n({readOnly:!0})],m.prototype,\"connectionError\",null),e([n()],m.prototype,\"connectionStatus\",void 0),m=e([a(\"esri.views.2d.layers.StreamLayerView2D\")],m);const y=m;export{y as default};\n"],"x_google_ignoreList":[0]}