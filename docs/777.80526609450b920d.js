"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[777],{65341:(Y,I,u)=>{function O(a){return a&&"getAtOrigin"in a&&"originOf"in a}u.d(I,{l:()=>O})},25465:(Y,I,u)=>{u.r(I),u.d(I,{default:()=>le});var O=u(71670),a=u(18100),$=u(5403),l=u(53661);function A(i,r){return U(i)===U(r)}function U(i){if((0,l.Wi)(i))return null;let s=null;return s=null!=i.objectId?i.objectId:null!=i.layer&&"objectIdField"in i.layer&&null!=i.layer.objectIdField&&null!=i.attributes?i.attributes[i.layer.objectIdField]:i.uid,null==s?null:`o-${null!=i.layer?i.layer.id:""}-${s}`}const z={json:{write:{writer:function G(i,r){(0,l.Wi)(i)||null==i.layer?.objectIdField||null==i.attributes||(r.feature={layerId:i.layer.id,objectId:i.attributes[i.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function D(i){if(null!=i.layerId&&null!=i.objectId)return{uid:null,layer:{id:i.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:i.objectId}}}}}}};var K=u(6365),F=u(94904),T=u(44480),d=u(9497),x=(u(83382),u(19420),u(20891)),j=u(2153),w=u(35787),B=u(13691);let C=class extends((0,T.eC)((0,F.J)(K.Z))){constructor(i){super(i),this.position=null,this.elevationInfo=null,this.feature=null}equals(i){return(0,l._W)(this.position,i.position)&&(0,l._W)(this.elevationInfo,i.elevationInfo)&&A(this.feature,i.feature)}};(0,a._)([(0,d.Cb)({type:w.Z}),(0,j.B)()],C.prototype,"position",void 0),(0,a._)([(0,d.Cb)({type:B.Z}),(0,j.B)()],C.prototype,"elevationInfo",void 0),(0,a._)([(0,d.Cb)(z)],C.prototype,"feature",void 0),C=(0,a._)([(0,x.j)("esri.analysis.LineOfSightAnalysisObserver")],C);const N=C;let m=class extends((0,T.eC)(F.j)){constructor(i){super(i),this.position=null,this.elevationInfo=null,this.feature=null}equals(i){return(0,l._W)(this.position,i.position)&&(0,l._W)(this.elevationInfo,i.elevationInfo)&&A(this.feature,i.feature)}};(0,a._)([(0,d.Cb)({type:w.Z}),(0,j.B)()],m.prototype,"position",void 0),(0,a._)([(0,d.Cb)({type:B.Z}),(0,j.B)()],m.prototype,"elevationInfo",void 0),(0,a._)([(0,d.Cb)(z)],m.prototype,"feature",void 0),m=(0,a._)([(0,x.j)("esri.analysis.LineOfSightAnalysisTarget")],m);const H=m;var L=u(97621),E=u(40434),Z=u(7521),Q=u(21789),S=u(73327);function R(i,r){return function V(i,r){return(0,l.Wi)(r)||!r.mode?function J(i){return i?te:ne}(i).mode:r.mode}(!!(0,l.pC)(i)&&i.hasZ,r)}u(55821);const te={mode:"absolute-height",offset:0},ne={mode:"on-the-ground",offset:null},W=L.Z.ofType(H);let g=class extends $.Z{constructor(i){super(i),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles((0,Z.YP)(()=>this._computeExtent(),i=>{((0,l.Wi)(i)||(0,l.Wi)(i.pending))&&this._set("extent",(0,l.pC)(i)?i.extent:null)},Z.tX))}get targets(){return this._get("targets")||new W}set targets(i){this._set("targets",(0,E.Z)(i,this.targets,W))}get spatialReference(){return(0,l.pC)(this.observer)&&(0,l.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,l.yw)(this.observer,i=>i.position)]}waitComputeExtent(){var i=this;return(0,O.Z)(function*(){const r=i._computeExtent();return(0,l.pC)(r)?(0,l.Wg)(r.pending):Promise.resolve()})()}_computeExtent(){const i=this.spatialReference;if((0,l.Wi)(this.observer)||(0,l.Wi)(this.observer.position)||(0,l.Wi)(i))return null;const r=v=>"absolute-height"===R(v.position,v.elevationInfo),s=this.observer.position,f=(0,S.al)(s.x,s.y,s.z,s.x,s.y,s.z);for(const v of this.targets)if((0,l.pC)(v.position)){const p=(0,Q.dz)(v.position,i);if((0,l.pC)(p.pending))return{pending:p.pending,extent:null};if((0,l.pC)(p.geometry)){const{x:c,y:b,z:ae}=p.geometry;(0,S.pp)(f,[c,b,ae])}}const y=(0,S.HH)(f,i);return r(this.observer)&&this.targets.every(r)||(y.zmin=void 0,y.zmax=void 0),{pending:null,extent:y}}clear(){this.observer=null,this.targets.removeAll()}};(0,a._)([(0,d.Cb)({type:["line-of-sight"]})],g.prototype,"type",void 0),(0,a._)([(0,d.Cb)({type:N,json:{read:!0,write:!0}})],g.prototype,"observer",void 0),(0,a._)([(0,d.Cb)({cast:E.R,type:W,nonNullable:!0,json:{read:!0,write:!0}})],g.prototype,"targets",null),(0,a._)([(0,d.Cb)({value:null,readOnly:!0})],g.prototype,"extent",void 0),(0,a._)([(0,d.Cb)({readOnly:!0})],g.prototype,"spatialReference",null),(0,a._)([(0,d.Cb)({readOnly:!0})],g.prototype,"requiredPropertiesForEditing",null),g=(0,a._)([(0,x.j)("esri.analysis.LineOfSightAnalysis")],g);const X=g;var oe=u(90642),ie=u(22735),re=u(33829);const se=L.Z.ofType(H);let h=class extends((0,re.q)((0,oe.R)(ie.Z))){constructor(i){super(i),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new X,this.opacity=1}initialize(){this.addHandles((0,Z.YP)(()=>this.analysis,(i,r)=>{(0,l.pC)(r)&&r.parent===this&&(r.parent=null),(0,l.pC)(i)&&(i.parent=this)},Z.tX))}load(){var i=this;return(0,O.Z)(function*(){return(0,l.pC)(i.analysis)&&i.addResolvingPromise(i.analysis.waitComputeExtent()),i})()}get observer(){return(0,l.yw)(this.analysis,i=>i.observer)}set observer(i){(0,l.yw)(this.analysis,r=>r.observer=i)}get targets(){return(0,l.pC)(this.analysis)?this.analysis.targets:new L.Z}set targets(i){(0,E.Z)(i,this.analysis?.targets)}get fullExtent(){return(0,l.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,l.pC)(this.analysis)?(0,l.Wg)(this.analysis.spatialReference):null}releaseAnalysis(i){this.analysis===i&&(this.analysis=new X)}};(0,a._)([(0,d.Cb)({json:{read:!1},readOnly:!0})],h.prototype,"type",void 0),(0,a._)([(0,d.Cb)({type:["LineOfSightLayer"]})],h.prototype,"operationalLayerType",void 0),(0,a._)([(0,d.Cb)({type:N,json:{read:!0,write:{ignoreOrigin:!0}}})],h.prototype,"observer",null),(0,a._)([(0,d.Cb)({type:se,json:{read:!0,write:{ignoreOrigin:!0}}})],h.prototype,"targets",null),(0,a._)([(0,d.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],h.prototype,"analysis",void 0),(0,a._)([(0,d.Cb)({readOnly:!0})],h.prototype,"fullExtent",null),(0,a._)([(0,d.Cb)({readOnly:!0})],h.prototype,"spatialReference",null),(0,a._)([(0,d.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],h.prototype,"opacity",void 0),(0,a._)([(0,d.Cb)({type:["show","hide"]})],h.prototype,"listMode",void 0),h=(0,a._)([(0,x.j)("esri.layers.LineOfSightLayer")],h);const le=h}}]);
//# sourceMappingURL=777.80526609450b920d.js.map