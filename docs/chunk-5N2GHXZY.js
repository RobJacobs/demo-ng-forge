import{a as T}from"./chunk-BPL7HX3P.js";import{E as G,F as I,H as g,Hb as Y,Jb as ee,eb as j,gb as z,ic as te,j as U,jc as ne,jd as ue,kb as K,kd as me,mc as ie,nc as oe,oc as re,pb as J,pc as ae,uc as le,vc as se,wc as ge,xc as pe,zb as X}from"./chunk-CNI7K2GC.js";import{$b as W,Aa as V,Ab as L,Da as _,Eb as k,Fb as H,Gb as $,Hb as N,Ib as a,Jb as r,Kb as m,Ob as M,Rb as h,Sb as s,_a as l,_b as C,aa as B,bc as c,cc as E,dc as q,fc as O,gc as b,ha as R,hb as P,hc as A,ic as Q,rc as Z,sa as p,sb as D,ta as u,ub as x,yb as y,za as S,zb as d}from"./chunk-5VCAQWVT.js";var ce=["rangeAutocomplete"],de=["rangeTemplate"],he=["filterInput"];function fe(o,v){if(o&1&&(a(0,"div",14),c(1),r()),o&2){let t=s(2);l(),E(t.rangeMessage)}}function _e(o,v){if(o&1){let t=M();a(0,"forge-list-item")(1,"forge-icon-button",16),h("click",function(){let e=p(t).$implicit,i=s(2);return u(i.onDeleteRangeOption(e))}),m(2,"forge-icon",17),r(),c(3),r()}if(o&2){let t=v.$implicit;l(3),q(" ",t.label," ")}}function xe(o,v){if(o&1){let t=M();a(0,"div",6)(1,"div",7)(2,"span",8),c(3,"Enter a search range"),r(),a(4,"div",9)(5,"forge-text-field")(6,"input",10),A("ngModelChange",function(e){p(t);let i=s();return b(i.rangeMin,e)||(i.rangeMin=e),u(e)}),r()(),a(7,"span"),c(8,"to"),r(),a(9,"forge-text-field")(10,"input",11),A("ngModelChange",function(e){p(t);let i=s();return b(i.rangeMax,e)||(i.rangeMax=e),u(e)}),r()(),a(11,"forge-icon-button",12),h("click",function(){p(t);let e=s();return u(e.onAddRangeOption())}),m(12,"forge-icon",13),r()(),y(13,fe,2,1,"div",14),r(),a(14,"forge-list",15),$(15,_e,4,1,"forge-list-item",null,H),r(),m(17,"forge-divider"),r()}if(o&2){let t=s();l(6),O("ngModel",t.rangeMin),d("maxlength",t.maxlength()),l(4),O("ngModel",t.rangeMax),d("maxlength",t.maxlength()),l(3),k(t.rangeMessage?13:-1),l(2),N(t.rangeOptions)}}var Be=(()=>{class o{constructor(){this.ngZone=R(V),this.viewContainerRef=R(D),this.autocompleteRef=x("rangeAutocomplete"),this.rangeTemplateRef=x("rangeTemplate"),this.filterInputRef=x("filterInput"),this.optionFilter=_(),this.valueChange=new S,this.label=_(),this.maxlength=_(null),this.rangeOptions=[],this.elementId=T.uniqueId(),this.filter="",this.onChange=t=>{},this.onTouched=()=>{},this.onFilter=t=>(this.filter=t,new Promise((n,e)=>{let i=this.optionFilter();i&&i(this.filter).subscribe({next:f=>{let F=[];f.forEach(w=>g(w.value)?this.rangeOptions.push(w):F.push(w)),n(F)},error:()=>e()})})),this.optionHeaderBuilder=()=>(this.ngZone.run(()=>{this.rangeMin=void 0,this.rangeMax=void 0,this.rangeMessage=void 0}),this.rangeRef?.rootNodes[0]),this.selectedTextBuilder=t=>{if(this.autocompleteRef()?.nativeElement.open&&this.filter.length)return this.filter;let n=t?.length,e=this.rangeOptions?.length;return n>0&&e>0?`${n} option(s) selected, ${e} range(s)`:n>0?`${n} option(s) selected`:e>0?`${e} range(s)`:""}}autocompleteBlur(){this.onTouched()}set value(t){this.writeValue(t)}writeValue(t){let n=[];this.rangeOptions.length=0,g(t)&&t.forEach(e=>{if(g(e)||g(e.value)){let i=G(e.value)?e.value:e;this.rangeOptions.push({label:`${i[0]} to ${i[1]}`,value:i})}else n.push(e)}),window.requestAnimationFrame(()=>{this.autocompleteRef().nativeElement.value=n})}ngAfterViewInit(){window.requestAnimationFrame(()=>{this.rangeRef=this.viewContainerRef.createEmbeddedView(this.rangeTemplateRef()),this.rangeRef.rootNodes[0].remove()})}ngOnDestroy(){this.rangeRef?.destroy()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onAutocompleteChange(){this.emitChangeEvents()}onAddRangeOption(){if(!this.rangeMin?.length&&!this.rangeMax?.length){this.rangeMessage="A min or max value is required.";return}if(this.rangeMin=I(this.rangeMin)?this.rangeMin?.trim():this.rangeMin,this.rangeMax=I(this.rangeMax)?this.rangeMax?.trim():this.rangeMax,this.rangeMin?.length&&this.rangeMax?.length){let e=T.comparator(this.rangeMin,this.rangeMax,"string");if(e===0){this.rangeMessage="Min and Max cannot be the same value.";return}if(e===1){this.rangeMessage="Min value cannot be greater than Max value.";return}}if(this.rangeOptions.findIndex(e=>e.value[0]===this.rangeMin&&e.value[1]===this.rangeMax)!==-1){this.rangeMessage="This range is already defined.";return}this.rangeMessage=void 0;let n=this.rangeMin?.length&&this.rangeMax?.length?`${this.rangeMin} to ${this.rangeMax}`:this.rangeMin?.length?`Greater than ${this.rangeMin}`:`Less than ${this.rangeMax}`;this.rangeOptions.push({label:n,value:[this.rangeMin,this.rangeMax]}),this.emitChangeEvents(),this.rangeMin=void 0,this.rangeMax=void 0,this.filterInputRef().nativeElement.value=this.selectedTextBuilder(this.autocompleteRef()?.nativeElement.value)}onDeleteRangeOption(t){(this.rangeRef?.rootNodes[0]).focus();let n=this.rangeOptions.findIndex(e=>e.value===t.value);n!==-1&&(this.rangeOptions.splice(n,1),this.filterInputRef().nativeElement.value=this.selectedTextBuilder(this.autocompleteRef()?.nativeElement.value),this.emitChangeEvents())}emitChangeEvents(){let t=[];g(this.rangeOptions)&&this.rangeOptions.length&&t.push(...this.rangeOptions.map(e=>e.value));let n=this.autocompleteRef()?.nativeElement.value;g(n)&&n.length&&t.push(...n),this.onChange(t),this.valueChange.emit(t)}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=P({type:o,selectors:[["app-autocomplete-range"]],viewQuery:function(n,e){n&1&&(C(e.autocompleteRef,ce,5),C(e.rangeTemplateRef,de,5),C(e.filterInputRef,he,5)),n&2&&W(3)},hostBindings:function(n,e){n&1&&h("focusout",function(f){return e.autocompleteBlur(f)})},inputs:{optionFilter:[1,"optionFilter"],value:"value",label:[1,"label"],maxlength:[1,"maxlength"]},outputs:{valueChange:"valueChange"},features:[Q([{provide:j,useExisting:B(()=>o),multi:!0}])],decls:10,vars:6,consts:[["rangeAutocomplete",""],["filterInput",""],["rangeTemplate",""],["multiple","",3,"forge-autocomplete-change","filter","selectedTextBuilder","popupHeaderBuilder"],["type","text"],["slot","end","name","arrow_drop_down",1,"forge-dropdown-icon"],["tabindex","-1",1,"range"],[1,"range__input"],[1,"forge-typography--subheading2","range__input__header"],[1,"range__input__body"],["type","text","placeholder","min",3,"ngModelChange","ngModel"],["type","text","placeholder","max",3,"ngModelChange","ngModel"],["aria-label","Add search range",3,"click"],["name","add"],[1,"forge-typography--label1"],[1,"range__options"],["slot","start","aria-label","Delete search range",3,"click"],["name","delete"]],template:function(n,e){if(n&1){let i=M();a(0,"forge-autocomplete",3,0),h("forge-autocomplete-change",function(){return p(i),u(e.onAutocompleteChange())}),a(2,"forge-text-field"),m(3,"input",4,1),a(5,"label"),c(6),r(),m(7,"forge-icon",5),r()(),y(8,xe,18,5,"ng-template",null,2,Z)}n&2&&(L("filter",e.onFilter)("selectedTextBuilder",e.selectedTextBuilder)("popupHeaderBuilder",e.optionHeaderBuilder),l(3),d("id",e.elementId),l(2),d("for",e.elementId),l(),E(e.label()))},dependencies:[U,X,z,K,J,ee,Y,ne,te,ae,re,ie,oe,ge,se,pe,le,me,ue],styles:[`[_nghost-%COMP%]{display:block}.range[_ngcontent-%COMP%]{outline:none}.range__input[_ngcontent-%COMP%]{padding-left:16px;padding-bottom:8px;--forge-field-height: 2.5rem}.range__input__header[_ngcontent-%COMP%]{font-size:14px}.range__input__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr auto;column-gap:8px;align-items:center}.range__input[_ngcontent-%COMP%]   .forge-typography--label1[_ngcontent-%COMP%]{color:var(--forge-theme-error)}.range__options[_ngcontent-%COMP%]{--forge-list-item-padding: 0 16px 0 4px;--forge-list-item-leading-margin-right: 4px}






/*# sourceMappingURL=autocomplete-range.component-MZKIMPW7.css.map */`]})}}return o})();export{Be as a};
//# sourceMappingURL=chunk-5N2GHXZY.js.map
