{"version":3,"file":"2598.d465d36b20cbc330.js","mappings":"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","names":["k","w","P","L","M","x","S","O","T","p","E","v","I","o","j","constructor","e","super","this","dateFieldsTimeReference","datesInUnknownTimezone","dpi","gdbVersion","imageFormat","imageMaxHeight","imageMaxWidth","imageTransparency","isReference","labelsVisible","operationalLayerType","preferredTimeReference","sourceJSON","sublayers","type","url","normalizeCtorArgs","r","load","a","signal","addResolvingPromise","loadFromPortal","supportedTypes","catch","n","then","_fetchService","Promise","resolve","readImageFormat","t","supportedImageFormatTypes","includes","writeSublayers","i","loaded","slice","reverse","flatten","toArray","s","capabilities","operations","supportsExportMap","exportMap","supportsDynamicLayers","h","origin","f","createSublayersForOrigin","F","writeSublayerStructure","forEach","write","push","originOf","some","Object","keys","length","layers","visibleLayers","filter","visible","map","id","createExportImageParameters","pixelRatio","version","clone","shiftCentralMeridian","U","layer","floors","scale","b","extent","width","toJSON","destroy","rotation","spatialReference","m","wkid","JSON","stringify","l","timeExtent","start","end","time","timeInfo","hasLiveData","bbox","xmin","ymin","xmax","ymax","bboxSR","imageSR","size","fetchImage","_this","_asyncToGenerator","data","_fetchImage","fetchImageBitmap","_this2","N","fetchRecomputedExtents","_this3","query","returnUpdates","customParameters","token","apiKey","fullExtent","g","loadAll","allSublayers","serviceSupportsSpatialReference","J","_this4","responseType","parsedUrl","refreshParameters","path","dynamicLayers","error","_this5","read","ssl","replace","q","prototype","Boolean","y","json","origins","service","source","enabled","overridePolicy","ignoreOrigin","d","A","c","readOnly","value","R","u","_","floorInfo","floorField","view","join"],"sourceRoot":"webpack:///","sources":["./node_modules/@arcgis/core/layers/MapImageLayer.js","./node_modules/@arcgis/core/layers/support/floorFilterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../TimeExtent.js\";import i from\"../core/Error.js\";import{HandleOwnerMixin as o}from\"../core/HandleOwner.js\";import{loadAll as s}from\"../core/loadAll.js\";import{isSome as a}from\"../core/maybe.js\";import{MultiOriginJSONMixin as p}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as n,isAbortError as m}from\"../core/promiseUtils.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{Integer as c}from\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import{reader as y}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../core/accessorSupport/decorators/writer.js\";import{nameToId as h,OriginId as f}from\"../core/accessorSupport/PropertyOrigin.js\";import g from\"../geometry/Extent.js\";import{getScale as b}from\"../geometry/support/scaleUtils.js\";import j from\"./Layer.js\";import{APIKeyMixin as v}from\"./mixins/APIKeyMixin.js\";import{ArcGISMapService as x}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as S}from\"./mixins/ArcGISService.js\";import{BlendLayer as w}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as I}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as O}from\"./mixins/OperationalLayer.js\";import{PortalLayer as T}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as E}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as M}from\"./mixins/SublayersOwner.js\";import{TemporalLayer as P}from\"./mixins/TemporalLayer.js\";import{url as R}from\"./support/commonProperties.js\";import{ExportImageParameters as U}from\"./support/ExportImageParameters.js\";import{createBitmap as N}from\"./support/imageBitmapUtils.js\";import A from\"./support/Sublayer.js\";import{shouldWriteSublayerStructure as F}from\"./support/sublayerUtils.js\";import{serviceSupportsSpatialReference as J}from\"./support/versionUtils.js\";import q from\"../time/TimeReference.js\";let k=class extends(w(P(L(M(x(S(O(T(p(E(v(I(o(j)))))))))))))){constructor(...e){super(...e),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat=\"png24\",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType=\"ArcGISMapServiceLayer\",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type=\"map-image\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=a(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(n).then((()=>this._fetchService(r)))),Promise.resolve(this)}readImageFormat(e,r){const t=r.supportedImageFormatTypes;return t&&t.includes(\"PNG32\")?\"png32\":\"png24\"}writeSublayers(e,r,t,i){if(!this.loaded||!e)return;const o=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray();let s=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap?.supportsDynamicLayers){const e=h(i.origin);if(e===f.PORTAL_ITEM){const e=this.createSublayersForOrigin(\"service\").sublayers;s=F(o,e,f.SERVICE)}else if(e>f.PORTAL_ITEM){const e=this.createSublayersForOrigin(\"portal-item\");s=F(o,e.sublayers,h(e.origin))}}const a=[],p={writeSublayerStructure:s,...i};let n=s;o.forEach((e=>{const r=e.write({},p);a.push(r),n=n||\"user\"===e.originOf(\"visible\")}));a.some((e=>Object.keys(e).length>1))&&(r.layers=a),n&&(r.visibleLayers=o.filter((e=>e.visible)).map((e=>e.id)))}createExportImageParameters(e,r,t,i){const o=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const s=new U({layer:this,floors:i?.floors,scale:b({extent:e,width:r})*o}),a=s.toJSON();s.destroy();const p=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},n=e&&e.spatialReference,m=n.wkid||JSON.stringify(n.toJSON());a.dpi*=o;const l={};if(i?.timeExtent){const{start:e,end:r}=i.timeExtent.toJSON();l.time=e&&r&&e===r?\"\"+e:`${e??\"null\"},${r??\"null\"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(l.time=\"null,null\");return{bbox:e&&e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:m,imageSR:m,size:r+\",\"+t,...a,...p,...l}}async fetchImage(e,r,t,i){const{data:o}=await this._fetchImage(\"image\",e,r,t,i);return o}async fetchImageBitmap(e,r,t,i){const{data:o,url:s}=await this._fetchImage(\"blob\",e,r,t,i);return N(o,s)}async fetchRecomputedExtents(e={}){const i={...e,query:{returnUpdates:!0,f:\"json\",...this.customParameters,token:this.apiKey}},{data:o}=await r(this.url,i),{extent:s,fullExtent:a,timeExtent:p}=o,n=s||a;return{fullExtent:n&&g.fromJSON(n),timeExtent:p&&t.fromJSON({start:p[0],end:p[1]})}}loadAll(){return s(this,(e=>{e(this.allSublayers)}))}serviceSupportsSpatialReference(e){return J(this,e)}async _fetchImage(e,t,o,s,a){const p={responseType:e,signal:a?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(t,o,s,a),f:\"image\",...this.refreshParameters,...this.customParameters,token:this.apiKey}},n=this.parsedUrl.path+\"/export\";if(null!=p.query?.dynamicLayers&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new i(\"mapimagelayer:dynamiclayer-not-supported\",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:p.query});try{const{data:e}=await r(n,p);return{data:e,url:n}}catch(l){if(m(l))throw l;throw new i(\"mapimagelayer:image-fetch-error\",`Unable to load image: ${n}`,{error:l})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:\"service\",url:this.parsedUrl});const{data:t,ssl:i}=await r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});i&&(this.url=this.url.replace(/^http:/i,\"https:\")),this.sourceJSON=t,this.read(t,{origin:\"service\",url:this.parsedUrl})}};e([l({type:q})],k.prototype,\"dateFieldsTimeReference\",void 0),e([l({type:Boolean})],k.prototype,\"datesInUnknownTimezone\",void 0),e([l()],k.prototype,\"dpi\",void 0),e([l()],k.prototype,\"gdbVersion\",void 0),e([l()],k.prototype,\"imageFormat\",void 0),e([y(\"imageFormat\",[\"supportedImageFormatTypes\"])],k.prototype,\"readImageFormat\",null),e([l({json:{origins:{service:{read:{source:\"maxImageHeight\"}}}}})],k.prototype,\"imageMaxHeight\",void 0),e([l({json:{origins:{service:{read:{source:\"maxImageWidth\"}}}}})],k.prototype,\"imageMaxWidth\",void 0),e([l()],k.prototype,\"imageTransparency\",void 0),e([l({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],k.prototype,\"isReference\",void 0),e([l({json:{read:!1,write:!1}})],k.prototype,\"labelsVisible\",void 0),e([l({type:[\"ArcGISMapServiceLayer\"]})],k.prototype,\"operationalLayerType\",void 0),e([l({json:{read:!1,write:!1}})],k.prototype,\"popupEnabled\",void 0),e([l({type:q})],k.prototype,\"preferredTimeReference\",void 0),e([l()],k.prototype,\"sourceJSON\",void 0),e([l({json:{write:{ignoreOrigin:!0}}})],k.prototype,\"sublayers\",void 0),e([d(\"sublayers\",{layers:{type:[A]},visibleLayers:{type:[c]}})],k.prototype,\"writeSublayers\",null),e([l({type:[\"show\",\"hide\",\"hide-children\"]})],k.prototype,\"listMode\",void 0),e([l({json:{read:!1},readOnly:!0,value:\"map-image\"})],k.prototype,\"type\",void 0),e([l(R)],k.prototype,\"url\",void 0),k=e([u(\"esri.layers.MapImageLayer\")],k);const _=k;export{_ as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction o(o){const n=o.layer;if(\"floorInfo\"in n&&n.floorInfo?.floorField&&\"floors\"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return\"floorInfo\"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter((o=>\"\"!==o)).map((o=>`'${o}'`));return l.push(\"''\"),`${n} IN (${l.join(\",\")}) OR ${n} IS NULL`}export{o as getFloorFilterClause,n as getLayerFloorFilterClause};\n"],"x_google_ignoreList":[0,1]}