import{a as Z}from"./chunk-7ANSU654.js";import"./chunk-WPAM5E2U.js";import"./chunk-YF5MWJQS.js";import{Fb as x,Sb as K,Tb as T,ec as G,fc as Q,i as w,qc as V,rc as H,sc as X,tc as Y,td as P,ud as R,w as A,x as M}from"./chunk-LAD3HRCK.js";import{$b as d,Db as C,Eb as s,Fb as a,Gb as m,Nb as b,R as W,Wa as g,a as I,ac as z,b as N,ca as J,d as D,g as j,gb as S,h as L,ha as h,j as y,qa as U,yb as k,zb as v}from"./chunk-BPFPFXGP.js";import"./chunk-OY7QI42D.js";var $=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=S({type:e,selectors:[["app-test"]],decls:1,vars:0,template:function(i,n){i&1&&m(0,"router-outlet")},dependencies:[A],styles:[`[_nghost-%COMP%]{display:block;overflow:hidden}
/*# sourceMappingURL=test.component-73MJ2LX3.css.map */`]});let o=e;return o})();var ne={url:"",deserializer:o=>JSON.parse(o.data),serializer:o=>JSON.stringify(o)},ie="WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }",E=class o extends L{constructor(e,c){if(super(),this._socket=null,e instanceof D)this.destination=c,this.source=e;else{let t=this._config=Object.assign({},ne);if(this._output=new j,typeof e=="string")t.url=e;else for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);if(!t.WebSocketCtor&&WebSocket)t.WebSocketCtor=WebSocket;else if(!t.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new y}}lift(e){let c=new o(this._config,this.destination);return c.operator=e,c.source=this,c}_resetState(){this._socket=null,this.source||(this.destination=new y),this._output=new j}multiplex(e,c,t){let i=this;return new D(n=>{try{i.next(e())}catch(p){n.error(p)}let r=i.subscribe({next:p=>{try{t(p)&&n.next(p)}catch(l){n.error(l)}},error:p=>n.error(p),complete:()=>n.complete()});return()=>{try{i.next(c())}catch(p){n.error(p)}r.unsubscribe()}})}_connectSocket(){let{WebSocketCtor:e,protocol:c,url:t,binaryType:i}=this._config,n=this._output,r=null;try{r=c?new e(t,c):new e(t),this._socket=r,i&&(this._socket.binaryType=i)}catch(l){n.error(l);return}let p=new I(()=>{this._socket=null,r&&r.readyState===1&&r.close()});r.onopen=l=>{let{_socket:u}=this;if(!u){r.close(),this._resetState();return}let{openObserver:B}=this._config;B&&B.next(l);let O=this.destination;this.destination=N.create(f=>{if(r.readyState===1)try{let{serializer:_}=this._config;r.send(_(f))}catch(_){this.destination.error(_)}},f=>{let{closingObserver:_}=this._config;_&&_.next(void 0),f&&f.code?r.close(f.code,f.reason):n.error(new TypeError(ie)),this._resetState()},()=>{let{closingObserver:f}=this._config;f&&f.next(void 0),r.close(),this._resetState()}),O&&O instanceof y&&p.add(O.subscribe(this.destination))},r.onerror=l=>{this._resetState(),n.error(l)},r.onclose=l=>{r===this._socket&&this._resetState();let{closeObserver:u}=this._config;u&&u.next(l),l.wasClean?n.complete():n.error(l)},r.onmessage=l=>{try{let{deserializer:u}=this._config;n.next(u(l))}catch(u){n.error(u)}}}_subscribe(e){let{source:c}=this;return c?c.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add(()=>{let{_socket:t}=this;this._output.observers.length===0&&(t&&(t.readyState===1||t.readyState===0)&&t.close(),this._resetState())}),e)}unsubscribe(){let{_socket:e}=this;e&&(e.readyState===1||e.readyState===0)&&e.close(),this._resetState(),super.unsubscribe()}};function F(o){return new E(o)}var ee=(()=>{let e=class e{constructor(){this.webSocketSubject=F("http://localhost:5001")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();function se(o,e){o&1&&m(0,"forge-circular-progress")}function ae(o,e){o&1&&m(0,"forge-circular-progress")}function ce(o,e){o&1&&m(0,"forge-circular-progress")}var te=(()=>{let e=class e{constructor(){this.router=h(M),this.destroyRef=h(U),this.appDataService=h(Z),this.appWebSocketService=h(ee),this.isRequesting=!1,this.isPolling=!1,this.isMessaging=!1}ngOnInit(){this.appWebSocketService.webSocketSubject.pipe(x(this.destroyRef)).subscribe({next:t=>{this.isMessaging=!1,console.log(t),this.response=JSON.stringify(t)}})}ngOnDestroy(){this.appWebSocketService.webSocketSubject.complete()}onNavigate(t){this.router.navigate([t],{state:{id:0,name:"name"}})}onMakeLongRequest(){this.isRequesting=!0,this.response=void 0,this.appDataService.getLongRequest().pipe(x(this.destroyRef),W(()=>this.isRequesting=!1)).subscribe({next:t=>{console.log(t),this.response=JSON.stringify(t)},error:t=>console.log(t)})}onMakePollingRequest(){this.isPolling=!0,this.response=void 0,this.appDataService.pollingRequest("simpson").pipe(x(this.destroyRef),W(()=>this.isPolling=!1)).subscribe({next:t=>{console.log(t),this.response=JSON.stringify(t)}})}onSendMessage(){this.isMessaging=!0,this.response=void 0,this.appWebSocketService.webSocketSubject.next({data:"message from front end.",date:new Date})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=S({type:e,selectors:[["app-test-parent"]],decls:23,vars:7,consts:[[1,"header"],["slot","start",1,"forge-typography--subheading4"],[1,"body"],[2,"display","flex","flex-wrap","wrap","gap","8px 16px","padding-block","16px"],["variant","raised",3,"click"],["variant","outlined",3,"click","disabled"],[2,"overflow-wrap","break-word"]],template:function(i,n){i&1&&(s(0,"forge-toolbar",0)(1,"h2",1),d(2,"Parent"),a()(),s(3,"div",2)(4,"div"),d(5,"Parent content"),a(),s(6,"div",3)(7,"forge-button",4),b("click",function(){return n.onNavigate("test/child")}),d(8,"View child"),a(),s(9,"forge-button",5),b("click",function(){return n.onSendMessage()}),s(10,"span"),d(11,"Send message"),a(),k(12,se,1,0,"forge-circular-progress"),a(),s(13,"forge-button",5),b("click",function(){return n.onMakeLongRequest()}),s(14,"span"),d(15,"Make long request"),a(),k(16,ae,1,0,"forge-circular-progress"),a(),s(17,"forge-button",5),b("click",function(){return n.onMakePollingRequest()}),s(18,"span"),d(19,"Make polling request"),a(),k(20,ce,1,0,"forge-circular-progress"),a()(),s(21,"div",6),d(22),a()()),i&2&&(g(9),C("disabled",n.isMessaging),g(3),v(n.isMessaging?12:-1),g(),C("disabled",n.isRequesting),g(3),v(n.isRequesting?16:-1),g(),C("disabled",n.isPolling),g(3),v(n.isPolling?20:-1),g(2),z(n.response))},dependencies:[w,T,K,Q,G,R,P],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px}forge-button[_ngcontent-%COMP%]{--forge-circular-progress-size: 1rem}
/*# sourceMappingURL=parent.component-NJ5BBFET.css.map */`]});let o=e;return o})();var oe=(()=>{let e=class e{constructor(){this.router=h(M)}onNavigate(t){this.router.navigate([t])}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=S({type:e,selectors:[["app-test-child"]],decls:7,vars:0,consts:[[1,"header"],["slot","start"],["aria-label","Go back",3,"click"],["name","arrow_back"],[1,"forge-typography--subheading4"],[1,"body"]],template:function(i,n){i&1&&(s(0,"forge-toolbar",0)(1,"div",1)(2,"forge-icon-button",2),b("click",function(){return n.onNavigate("test/parent")}),m(3,"forge-icon",3),a(),s(4,"h2",4),d(5,"Child"),a()()(),m(6,"div",5))},dependencies:[w,T,Y,X,V,H,R,P],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto auto 1fr;overflow:hidden;height:100%}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px;display:flex;flex-direction:column;row-gap:16px}






/*# sourceMappingURL=child.component-AHQQLBK5.css.map */`]});let o=e;return o})();var Ue=[{path:"",component:$,children:[{path:"parent",component:te},{path:"child",component:oe},{path:"",redirectTo:"parent",pathMatch:"full"}]}];export{Ue as TEST_ROUTES};
//# sourceMappingURL=chunk-CLOLEOMN.js.map
