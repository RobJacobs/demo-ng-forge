"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[9645],{59645:(ze,M,i)=>{i.r(M),i.d(M,{default:()=>Je});var u=i(71670),n=i(18100),A=i(97621),b=i(32995),Q=i(31882),se=i(40070),oe=i(93205),F=i(53661),B=i(90642),H=i(30801),J=i(7521),R=i(96204),Y=i(55050),o=i(9497),I=(i(83382),i(19420),i(66508)),G=i(20891),P=i(61434),ae=i(22735),le=i(450),de=i(6363),ue=i(29812),pe=i(55123),ye=i(79465),he=i(30914),ce=i(33829),fe=i(16617),be=i(17085),ve=i(72450),me=i(37302),ge=i(4583),Z=i(51299),h=i(86456),z=i(86465),K=i(21230),Ce=i(44480),X=i(70425),Se=i(47016);let m=class extends Ce.wq{constructor(){super(...arguments),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const t={};for(const r of Object.keys(e))t[r]=(0,Se.im)(e[r]);return t}writeDomains(e,t){if(!e)return;const r={};for(const s of Object.keys(e))e[s]&&(r[s]=e[s]?.toJSON());t.domains=r}};(0,n._)([(0,o.Cb)({type:Number,json:{write:!0}})],m.prototype,"code",void 0),(0,n._)([(0,o.Cb)({type:Object,json:{write:!0}})],m.prototype,"defaultValues",void 0),(0,n._)([(0,o.Cb)({json:{write:!0}})],m.prototype,"domains",void 0),(0,n._)([(0,I.r)("domains")],m.prototype,"readDomains",null),(0,n._)([(0,X.c)("domains")],m.prototype,"writeDomains",null),(0,n._)([(0,o.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),m=(0,n._)([(0,G.j)("esri.layers.support.Subtype")],m);const Fe=m;var Oe=i(73889),Ie=i(53108),Ze=(i(72750),i(11822),i(75993),i(33098),i(57712)),U=i(79191),je=i(70383),Te=(i(59574),i(67087),i(20711)),j=i(88684),Le=i(48500),Ee=i(28191),Pe=i(44054),we=i(77729),xe=i(57697),W=i(99295),Ae=i(85770),Re=i(1586),q=i(28665),Ge=i(67056),D=i(32682);const Ue=["charts","editingEnabled","formTemplate","labelsVisible","labelingInfo","legendEnabled","minScale","maxScale","opacity","popupEnabled","popupTemplate","renderer","subtypeCode","templates","title","visible"],k={key:"type",base:Ze.Z,errorContext:"renderer",typeMap:{simple:U.Z,"unique-value":je.Z,"class-breaks":Ie.Z}},_=(0,z.v)(),ee=(0,we.d)({types:k});let De=0;function T(e){const t=e.json.write;return"object"==typeof t?t.ignoreOrigin=!0:e.json.write={ignoreOrigin:!0},e}function Ve(e){switch(e){case"point":case"multipoint":return D.xA.clone();case"polyline":return D.CJ.clone();case"polygon":case"multipatch":return D.z3.clone();default:return null}}function te(e,t){return null==e?null:t.subtypes?.find(r=>r.code===e)}function Me(e,t){let r=null;switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":r="point";break;case"esriGeometryPolyline":r="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":r="polygon";break;default:r=null}const s={},l=te(e,t);if((0,F.pC)(l)){const{defaultValues:d}=l;for(const y in d)s[y]=d[y]}return s[t.subtypeField]=e,new W.Z({name:"New Feature",drawingTool:r,prototype:{attributes:s}})}const re="esri.layers.support.SubtypeSublayer";let a=class extends((0,Q.p)((0,B.R)((0,Te.IG)(Le.Z)))){constructor(e){super(e),this.charts=null,this.editingEnabled=!0,this.fieldOverrides=null,this.fieldsIndex=null,this.formTemplate=null,this.id=`${Date.now().toString(16)}-subtype-sublayer-${De++}`,this.type="subtype-sublayer",this.labelsVisible=!0,this.labelingInfo=null,this.layerType="ArcGISFeatureLayer",this.legendEnabled=!0,this.listMode="show",this.minScale=0,this.maxScale=0,this.opacity=1,this.popupEnabled=!0,this.popupTemplate=null,this.subtypeCode=null,this.templates=null,this.title=null,this.visible=!0}get capabilities(){return this.parent?.capabilities}get effectiveCapabilities(){return this.parent?.effectiveCapabilities}get effectiveEditingEnabled(){const{parent:e}=this;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}get elevationInfo(){return this.parent?.elevationInfo}writeFieldOverrides(e,t,r){const{fields:s,parent:l}=this;let d;if(s){d=[];let y=0;s.forEach(({name:c,alias:g,editable:L,visible:E})=>{if(!E)return;const f=l?.fields?.find(V=>V.name===c);if(!f)return;const C={name:c};let O=!1;g!==f.alias&&(C.alias=g,O=!0),L!==f.editable&&(C.editable=L,O=!0),d.push(C),O&&y++}),0===y&&d.length===s.length&&(d=null)}else d=(0,j.d9)(e);d?.length&&(0,Pe.RB)(r,d,t)}get fields(){const{parent:e,fieldOverrides:t,subtypeCode:r}=this,s=e?.fields;if(!e||!s?.length)return null;const{subtypes:l,subtypeField:d}=e,y=l?.find(E=>E.code===r),c=y?.defaultValues,g=y?.domains,L=[];for(const E of s){const f=E.clone(),{name:C}=f,O=t?.find(x=>x.name===C);if(f.visible=!t||!!O,O){const{alias:x,editable:Ye}=O;x&&(f.alias=x),!1===Ye&&(f.editable=!1)}f.defaultValue=C===d?r:c?.[C]??null;const $=g?.[C]??null;f.domain=C===d?null:$?"inherited"===$.type?f.domain:$.clone():null,L.push(f)}return L}get geometryType(){return this.parent?.geometryType}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get objectIdField(){return this.parent||Ee.Z.getLogger(re).error(S("objectIdField")),this.parent?.objectIdField}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){(0,K.YN)(e,this.fieldsIndex),this._override("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const{parent:e}=this;return e&&!e.isTable&&"mesh"!==e.geometryType?function Ne(e){return new U.Z({symbol:Ve(e)})}(e.geometryType):null}readRendererFromService(e,t,r){if("Table"===t.type)return null;const s=t.drawingInfo?.renderer,l=ee(s,t,r);let d;const{subtypeCode:y}=this;if(null!=y&&function $e(e,t){return!(!t||"unique-value"!==e?.type||"string"!=typeof e.field||e.field.toLowerCase()!==t.toLowerCase()||e.field2||e.field3||e.valueExpression)}(l,t.subtypeField)){const c=l.uniqueValueInfos?.find(({value:g})=>(g="number"==typeof g?String(g):g)===String(y));c&&(d=new U.Z({symbol:c.symbol}))}else"simple"!==l?.type||l.visualVariables?.length||(d=l);return d}readRenderer(e,t,r){const s=t?.layerDefinition?.drawingInfo?.renderer;return s?s.visualVariables?.some(d=>"rotationInfo"!==d.type)?void 0:ee(s,t,r)||void 0:void 0}get spatialReference(){return this.parent?.spatialReference}readTemplatesFromService(e,t){return[Me(this.subtypeCode,t)]}readTitleFromService(e,t){const r=te(this.subtypeCode,t);return(0,F.pC)(r)?r.name:null}get url(){return this.parent?.url}get userHasUpdateItemPrivileges(){return!!this.parent?.userHasUpdateItemPrivileges}addAttachment(e,t){var r=this;return(0,u.Z)(function*(){const{parent:s}=r;if(!s)throw S("addAttachment");if(e.getAttribute(s.subtypeField)!==r.subtypeCode)throw new b.Z("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");return s.addAttachment(e,t)})()}updateAttachment(e,t,r){var s=this;return(0,u.Z)(function*(){const{parent:l}=s;if(!l)throw S("updateAttachment");if(e.getAttribute(l.subtypeField)!==s.subtypeCode)throw new b.Z("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");return l.updateAttachment(e,t,r)})()}deleteAttachments(e,t){var r=this;return(0,u.Z)(function*(){const{parent:s}=r;if(!s)throw S("deleteAttachments");if(e.getAttribute(s.subtypeField)!==r.subtypeCode)throw new b.Z("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");return s.deleteAttachments(e,t)})()}applyEdits(e,t){var r=this;return(0,u.Z)(function*(){if(!r.parent)throw S("applyEdits");return r.parent.applyEdits(e,t)})()}createPopupTemplate(e){let t=this;const{parent:r,fields:s,title:l}=this;if(r){const{displayField:d,editFieldsInfo:y,objectIdField:c}=r;t={displayField:d,editFieldsInfo:y,fields:s,objectIdField:c,title:l}}return(0,Ge.eZ)(t,e)}createQuery(){if(!this.parent)throw S("createQuery");const e=(0,h.rP)(this.parent);return e.where=(0,R._)(`${this.parent.subtypeField}=${this.subtypeCode}`,this.parent.definitionExpression),e}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e){return this._getLayerDomain(e)}hasUserOverrides(){return Ue.some(e=>this.originIdOf(e)===P.s3.USER)}queryAttachments(e,t){var r=this;return(0,u.Z)(function*(){const s=yield r.load();if(!s.parent)throw S("queryAttachments");const l=e.clone();return l.where=ie(l.where,s.parent.subtypeField,s.subtypeCode),s.parent.queryAttachments(e,t)})()}queryFeatures(e,t){var r=this;return(0,u.Z)(function*(){const s=yield r.load();if(!s.parent)throw S("queryFeatures");const l=q.Z.from(e)??s.createQuery();return(0,F.pC)(e)&&(l.where=ie(l.where,s.parent.subtypeField,s.subtypeCode)),s.parent.queryFeatures(l,t)})()}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};(0,n._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],a.prototype,"capabilities",null),(0,n._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],a.prototype,"effectiveCapabilities",null),(0,n._)([(0,o.Cb)({json:{write:{ignoreOrigin:!0}}})],a.prototype,"charts",void 0),(0,n._)([(0,o.Cb)({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:{ignoreOrigin:!0}}})],a.prototype,"editingEnabled",void 0),(0,n._)([(0,o.Cb)({type:Boolean,readOnly:!0})],a.prototype,"effectiveEditingEnabled",null),(0,n._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],a.prototype,"elevationInfo",null),(0,n._)([(0,o.Cb)({readOnly:!0,json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],a.prototype,"fieldOverrides",void 0),(0,n._)([(0,X.c)("fieldOverrides")],a.prototype,"writeFieldOverrides",null),(0,n._)([(0,o.Cb)({..._.fields,readOnly:!0,json:{read:!1}})],a.prototype,"fields",null),(0,n._)([(0,o.Cb)(_.fieldsIndex)],a.prototype,"fieldsIndex",void 0),(0,n._)([(0,o.Cb)({type:xe.Z,json:{name:"formInfo",write:{ignoreOrigin:!0}}})],a.prototype,"formTemplate",void 0),(0,n._)([(0,o.Cb)({type:String,readOnly:!0,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],a.prototype,"id",void 0),(0,n._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],a.prototype,"geometryType",null),(0,n._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0),(0,n._)([(0,o.Cb)(T((0,j.d9)(Z.iR)))],a.prototype,"labelsVisible",void 0),(0,n._)([(0,o.Cb)({type:[Ae.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:Re.r},write:{ignoreOrigin:!0}}})],a.prototype,"labelingInfo",void 0),(0,n._)([(0,o.Cb)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],a.prototype,"layerType",void 0),(0,n._)([(0,o.Cb)(T((0,j.d9)(Z.rn)))],a.prototype,"legendEnabled",void 0),(0,n._)([(0,o.Cb)({type:["show","hide"]})],a.prototype,"listMode",void 0),(0,n._)([(0,o.Cb)((()=>{const e=(0,j.d9)(Z.rO);return e.json.origins.service.read=!1,T(e)})())],a.prototype,"minScale",void 0),(0,n._)([(0,o.Cb)((()=>{const e=(0,j.d9)(Z.u1);return e.json.origins.service.read=!1,T(e)})())],a.prototype,"maxScale",void 0),(0,n._)([(0,o.Cb)({readOnly:!0})],a.prototype,"effectiveScaleRange",null),(0,n._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],a.prototype,"objectIdField",null),(0,n._)([(0,o.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{write:{ignoreOrigin:!0}}})],a.prototype,"opacity",void 0),(0,n._)([(0,o.Cb)()],a.prototype,"parent",void 0),(0,n._)([(0,o.Cb)(T((0,j.d9)(Z.C_)))],a.prototype,"popupEnabled",void 0),(0,n._)([(0,o.Cb)({type:Oe.Z,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],a.prototype,"popupTemplate",void 0),(0,n._)([(0,o.Cb)({readOnly:!0})],a.prototype,"defaultPopupTemplate",null),(0,n._)([(0,o.Cb)({types:k,json:{write:{target:"layerDefinition.drawingInfo.renderer",ignoreOrigin:!0}}})],a.prototype,"renderer",null),(0,n._)([(0,I.r)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],a.prototype,"readRendererFromService",null),(0,n._)([(0,I.r)("renderer",["layerDefinition.drawingInfo.renderer"])],a.prototype,"readRenderer",null),(0,n._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],a.prototype,"spatialReference",null),(0,n._)([(0,o.Cb)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],a.prototype,"subtypeCode",void 0),(0,n._)([(0,o.Cb)({type:[W.Z],json:{name:"layerDefinition.templates",write:{ignoreOrigin:!0}}})],a.prototype,"templates",void 0),(0,n._)([(0,I.r)("service","templates",["geometryType","subtypeField","subtypes","type"])],a.prototype,"readTemplatesFromService",null),(0,n._)([(0,o.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],a.prototype,"title",void 0),(0,n._)([(0,I.r)("service","title",["subtypes"])],a.prototype,"readTitleFromService",null),(0,n._)([(0,o.Cb)({readOnly:!0,json:{read:!1}})],a.prototype,"url",null),(0,n._)([(0,o.Cb)({readOnly:!0})],a.prototype,"userHasUpdateItemPrivileges",null),(0,n._)([(0,o.Cb)({type:Boolean,nonNullable:!0,json:{name:"visibility",write:{ignoreOrigin:!0}}})],a.prototype,"visible",void 0),a=(0,n._)([(0,G.j)(re)],a);const ie=(e,t,r)=>{const s=new RegExp(`${t}=[0-9]`),l=`${t}=${r}`,d=(0,F.Pt)(e,"");return s.test(d)?d.replace(s,l):(0,R._)(l,d)},S=e=>new b.Z(`This sublayer must have a parent SubtypeGroupLayer in order to use ${e}`),w=a;var Qe=i(59657),Be=i(49067);const v="SubtypeGroupLayer";function ne(e,t){return new b.Z("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}const N=(0,z.v)();let p=class extends((0,he.B)((0,ye.o1)((0,ue.h)((0,me.n)((0,ve.M)((0,be.Q)((0,de.Y)((0,ce.q)((0,fe.I)((0,B.R)((0,pe.N)((0,le.V)((0,Q.p)(ae.Z)))))))))))))){constructor(...e){super(...e),this._handles=new se.Z,this._sublayersCollectionChanged=!1,this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.subtypes=null,this.sublayers=new(A.Z.ofType(w)),this.timeInfo=null,this.title="Layer",this.type="subtype-group",this.addHandles((0,J.YP)(()=>this.sublayers,(t,r)=>this._handleSublayersChange(t,r),J.Z_))}destroy(){this.source?.destroy(),this._handles=(0,F.SC)(this._handles)}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){var t=this;const r=(0,F.pC)(e)?e.signal:null,s=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(H.r9).then((0,u.Z)(function*(){if(!t.url)throw new b.Z("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");if(null==t.layerId)throw new b.Z("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");return t._initLayerProperties(yield t.createGraphicsSource(r))})).then(()=>this._setUserPrivileges(this.serviceItemId,e)).then(()=>(0,h.nU)(this,e));return this.addResolvingPromise(s),Promise.resolve(this)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return(0,h.sX)(this)}get parsedUrl(){const e=(0,Y.mN)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,Y.v_)(e.path,this.layerId.toString())),e}set source(e){this._get("source")!==e&&this._set("source",e)}readTitleFromService(e,{name:t}){return this.url?(0,ge.a7)(this.url,t):t}addAttachment(e,t){var r=this;return(0,u.Z)(function*(){return(0,h.JD)(r,e,t,v)})()}updateAttachment(e,t,r){var s=this;return(0,u.Z)(function*(){return(0,h.Y5)(s,e,t,r,v)})()}applyEdits(e,t){var r=this;return(0,u.Z)(function*(){return(0,h.Jj)(r,e,t)})()}on(e,t){return super.on(e,t)}createGraphicsSource(e){var t=this;return(0,u.Z)(function*(){const{default:r}=yield(0,H.Hl)(Promise.all([i.e(8592),i.e(1205)]).then(i.bind(i,41205)),e);return new r({layer:t}).load({signal:e})})()}createQuery(){const e=(0,h.rP)(this),t=this.sublayers.map(r=>r.subtypeCode);return e.where=(0,R._)(`${this.subtypeField} IN (${t.join(",")})`,this.definitionExpression),e}deleteAttachments(e,t){var r=this;return(0,u.Z)(function*(){return(0,h.FV)(r,e,t,v)})()}fetchRecomputedExtents(e){var t=this;return(0,u.Z)(function*(){return(0,h.Ci)(t,e,v)})()}getFieldDomain(e,t){return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}findSublayerForFeature(e){const t=this.fieldsIndex.get(this.subtypeField);return this._sublayerLookup.get(e.attributes[t.name])}loadAll(){return(0,oe.G)(this,e=>{e(this.sublayers)})}queryAttachments(e,t){var r=this;return(0,u.Z)(function*(){return(0,h.SU)(r,e,t,v)})()}queryFeatures(e,t){var r=this;return(0,u.Z)(function*(){const s=yield r.load(),l=q.Z.from(e)??s.createQuery(),d=(0,F.Pt)(l.outFields,[]);d.includes(r.subtypeField)||(d.push(r.subtypeField),l.outFields=d);const y=yield s.source.queryFeatures(l,t);if(y?.features)for(const c of y.features)c.layer=c.sourceLayer=r.findSublayerForFeature(c);return y})()}queryObjectIds(e,t){var r=this;return(0,u.Z)(function*(){return(0,h.tD)(r,e,t,v)})()}queryFeatureCount(e,t){var r=this;return(0,u.Z)(function*(){return(0,h.VG)(r,e,t,v)})()}queryExtent(e,t){var r=this;return(0,u.Z)(function*(){return(0,h.KE)(r,e,t,v)})()}queryRelatedFeatures(e,t){var r=this;return(0,u.Z)(function*(){return(0,h.kp)(r,e,t,v)})()}queryRelatedFeaturesCount(e,t){var r=this;return(0,u.Z)(function*(){return(0,h.C9)(r,e,t,v)})()}write(e,t){const{origin:r,layerContainerType:s,messages:l}=t;if(this.isTable){if("web-scene"===r||"web-map"===r&&"tables"!==s)return l?.push(ne(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===r&&"tables"===s)return l?.push(ne(this,"using a non-table source cannot be written to tables in web maps")),null;return this.sublayers?.length?super.write(e,t):(l?.push(new b.Z("web-document-write:invalid-property",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`,{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&(0,Be.D)(this,e)}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_initLayerProperties(e){var t=this;return(0,u.Z)(function*(){t._set("source",e);const{sourceJSON:r}=e;if(r&&(t.sourceJSON=r,t.read(r,{origin:"service",url:t.parsedUrl})),t.isTable)throw new b.Z("subtype-grouplayer:unsupported-source","SubtypeGroupLayer cannot be created using a layer with table source");if(!t.subtypes?.length)throw new b.Z("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");t._verifyFields(),(0,K.UF)(t.timeInfo,t.fieldsIndex)})()}hasDataChanged(){var e=this;return(0,u.Z)(function*(){return(0,h.gG)(e)})()}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||-1!==e.search(/\/FeatureServer\//i)||this.fields?.some(t=>"geometry"===t.type)||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_handleSublayersChange(e,t){t&&(t.forEach(r=>{r.parent=null}),this.handles.remove("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach(r=>{r.parent=this,this._sublayerLookup.set(r.subtypeCode,r)}),this._sublayersCollectionChanged=!1,this.handles.add([e.on("after-add",({item:r})=>{r.parent=this,this._sublayerLookup.set(r.subtypeCode,r)}),e.on("after-remove",({item:r})=>{r.parent=null,this._sublayerLookup.delete(r.subtypeCode)}),e.on("after-changes",()=>{this._sublayersCollectionChanged=!0})],"sublayers-owner"))}};(0,n._)([(0,o.Cb)({readOnly:!0})],p.prototype,"createQueryVersion",null),(0,n._)([(0,o.Cb)({readOnly:!0})],p.prototype,"editingEnabled",null),(0,n._)([(0,o.Cb)({readOnly:!0})],p.prototype,"effectiveEditingEnabled",null),(0,n._)([(0,o.Cb)({...N.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],p.prototype,"fields",void 0),(0,n._)([(0,o.Cb)(N.fieldsIndex)],p.prototype,"fieldsIndex",void 0),(0,n._)([(0,o.Cb)(Z.id)],p.prototype,"id",void 0),(0,n._)([(0,o.Cb)({type:["show","hide","hide-children"]})],p.prototype,"listMode",void 0),(0,n._)([(0,o.Cb)({value:"SubtypeGroupLayer",type:["SubtypeGroupLayer"]})],p.prototype,"operationalLayerType",void 0),(0,n._)([(0,o.Cb)(N.outFields)],p.prototype,"outFields",void 0),(0,n._)([(0,o.Cb)({readOnly:!0})],p.prototype,"parsedUrl",null),(0,n._)([(0,o.Cb)()],p.prototype,"source",null),(0,n._)([(0,o.Cb)({type:[Fe],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],p.prototype,"subtypes",void 0),(0,n._)([(0,o.Cb)({type:A.Z.ofType(w),json:{origins:{service:{read:{source:"subtypes",reader:(e,t,r)=>{const s=e.map(({code:l})=>{const d=new w({subtypeCode:l});return d.read(t,r),d});return new(A.Z.ofType(w))(s)}}}},name:"layers",write:{overridePolicy(e,t,r){const s=this.originOf("sublayers"),l=P.s3.PORTAL_ITEM;let d=!0;if((0,P.M9)(s)===l&&(0,P.M9)(r.origin)>l){const y=e.some(c=>c.hasUserOverrides());d=this._sublayersCollectionChanged||y}return{enabled:d,ignoreOrigin:!0}}}}})],p.prototype,"sublayers",void 0),(0,n._)([(0,o.Cb)({type:Qe.Z})],p.prototype,"timeInfo",void 0),(0,n._)([(0,o.Cb)({json:{origins:{"portal-item":{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],p.prototype,"title",void 0),(0,n._)([(0,I.r)("service","title",["name"])],p.prototype,"readTitleFromService",null),(0,n._)([(0,o.Cb)({json:{read:!1}})],p.prototype,"type",void 0),p=(0,n._)([(0,G.j)("esri.layers.SubtypeGroupLayer")],p);const Je=p}}]);
//# sourceMappingURL=9645.6c796b42efda7ac2.js.map