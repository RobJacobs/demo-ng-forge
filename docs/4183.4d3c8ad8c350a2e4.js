"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[4183],{55820:(I,M,r)=>{r.d(M,{AM:()=>u});var c=r(18100),_=r(6365),s=r(67087),g=r(88684),E=r(28191),m=r(9497),i=(r(83382),r(20891)),S=r(76550),n=r(6517);const o=-1;let u=class extends _.Z{constructor(a){super(a),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=(0,s.Z)("mapview-transitions-duration"),this.effects=[]}set effect(a){if(this._get("effect")!==(a=a||"")){this._set("effect",a);try{this._transitionTo(T(a))}catch(d){this._transitionTo([]),E.Z.getLogger(this.declaredClass).warn("Invalid Effect",{effect:a,error:d})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(a){this._updateForScale(a)}get transitioning(){return null!==this._to}canTransitionTo(a){try{return this.scale>0&&V(this._current,T(a),this.scale)}catch{return!1}}transitionStep(a,d){this._applyTimeTransition(a),this._updateForScale(d)}endTransitions(){this._applyTimeTransition(this.duration)}_transitionTo(a){this.scale>0&&V(this._current,a,this.scale)?(this._final=a,this._to=(0,g.d9)(a),function b(a,d,v){const h=a.length>d.length?a:d,C=a.length>d.length?d:a,P=C[C.length-1],f=P?.scale??v,A=P?.effects??[];for(let y=C.length;y<h.length;y++)C.push({scale:f,effects:[...A]});for(let y=0;y<h.length;y++)C[y].scale=C[y].scale===o?v:C[y].scale,h[y].scale=h[y].scale===o?v:h[y].scale,(0,n.uF)(C[y].effects,h[y].effects)}(this._current,this._to,this.scale),this._from=(0,g.d9)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=a),this._set("effects",this._current[0]?(0,g.d9)(this._current[0].effects):[])}_applyTimeTransition(a){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=a;const d=Math.min(1,this._time/this.duration);for(let v=0;v<this._current.length;v++){const h=this._current[v],C=this._from[v],P=this._to[v];h.scale=L(C.scale,P.scale,d);for(let f=0;f<h.effects.length;f++)h.effects[f].interpolate(C.effects[f],P.effects[f],d)}1===d&&(this._current=this._final,this._set("effects",this._current[0]?(0,g.d9)(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(a){if(this._set("scale",a),0===this._current.length)return;const d=this._current,v=this._current.length-1;let h,C,P=1;if(1===d.length||a>=d[0].scale)C=h=d[0].effects;else if(a<=d[v].scale)C=h=d[v].effects;else for(let f=0;f<v;f++){const A=d[f],y=d[f+1];if(A.scale>=a&&y.scale<=a){P=(a-A.scale)/(y.scale-A.scale),h=A.effects,C=y.effects;break}}for(let f=0;f<this.effects.length;f++)this.effects[f].interpolate(h[f],C[f],P)}};function T(a){const d=(0,S.Q)(a)||[];return function O(a){const d=a[0];return!!d&&"type"in d}(d)?[{scale:o,effects:d}]:d}function V(a,d,v){return!a[0]?.effects||!d[0]?.effects||!((a[0]?.scale===o||d[0]?.scale===o)&&(a.length>1||d.length>1)&&v<=0)&&(0,n.AS)(a[0].effects,d[0].effects)}function L(a,d,v){return a+(d-a)*v}(0,c._)([(0,m.Cb)()],u.prototype,"_to",void 0),(0,c._)([(0,m.Cb)()],u.prototype,"duration",void 0),(0,c._)([(0,m.Cb)({value:""})],u.prototype,"effect",null),(0,c._)([(0,m.Cb)({readOnly:!0})],u.prototype,"effects",void 0),(0,c._)([(0,m.Cb)({readOnly:!0})],u.prototype,"hasEffects",null),(0,c._)([(0,m.Cb)({value:0})],u.prototype,"scale",null),(0,c._)([(0,m.Cb)({readOnly:!0})],u.prototype,"transitioning",null),u=(0,c._)([(0,i.j)("esri.layers.effects.EffectView")],u)},98806:(I,M,r)=>{r.d(M,{W:()=>E});var c=r(40334),_=r(55820),s=r(99390),g=r(73041);class E extends s.s{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null,this._highlightOptions=null,this._highlightGradient=null}get blendMode(){return this._blendMode}set blendMode(t){this._blendMode=t,this.requestRender()}get clips(){return this._clips}set clips(t){this._clips=t,this.children.forEach(i=>i.clips=t)}get computedEffects(){return this._effectView?.effects??null}get effect(){return this._effectView?.effect??""}set effect(t){(this._effectView||t)&&(this._effectView||(this._effectView=new _.AM),this._effectView.effect=t,this.requestRender())}get highlightOptions(){return this._highlightOptions}set highlightOptions(t){if(!t)return this._highlightOptions=null,void(this._highlightGradient&&(this._highlightGradient.destroy(),this._highlightGradient=null,this.requestRender()));this._highlightOptions&&this._highlightOptions.equals(t)||(this._highlightOptions=t,this._highlightGradient||(this._highlightGradient=new g.Z),this._highlightGradient.setHighlightOptions(t),this.requestRender())}updateTransitionProperties(t,i){super.updateTransitionProperties(t,i),this._effectView&&(this._effectView.transitionStep(t,i),this._effectView.transitioning&&this.requestRender())}doRender(t){const i=this.createRenderParams(t);this.renderChildren(i)}addChild(t){return this.addChildAt(t,this.children.length)}addChildAt(t,i=this.children.length){if(!t||this.contains(t))return t;this._needsSort=!0;const S=t.parent;return S&&S!==this&&S.removeChild(t),i>=this.children.length?this.children.push(t):this.children.splice(i,0,t),this._childrenSet.add(t),t.parent=this,t.stage=this.stage,this!==this.stage&&(t.clips=this.clips),this.requestRender(),t}contains(t){return this._childrenSet.has(t)}endTransitions(){super.endTransitions(),this._effectView&&(this._effectView.endTransitions(),this.requestRender())}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const t of this.children)this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null;this.children.length=0}removeChild(t){return this.contains(t)?this.removeChildAt(this.children.indexOf(t)):t}removeChildAt(t){if(t<0||t>=this.children.length)return null;this._needsSort=!0;const i=this.children.splice(t,1)[0];return this._childrenSet.delete(i),this!==this.stage&&(i.clips=null),i.stage=null,i.parent=null,i}sortChildren(t){this._needsSort&&(this.children.sort(t),this._needsSort=!1)}beforeRender(t){super.beforeRender(t);for(const i of this.children)i.beforeRender(t)}afterRender(t){super.afterRender(t);for(const i of this.children)i.afterRender(t)}_createTransforms(){return{dvs:(0,c.c)()}}onAttach(){super.onAttach();const t=this.stage;for(const i of this.children)i.stage=t}onDetach(){super.onDetach();for(const t of this.children)t.stage=null}renderChildren(t){for(const i of this.children)i.processRender(t)}createRenderParams(t){return{...t,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||t.highlightGradient}}}},99390:(I,M,r)=>{r.d(M,{s:()=>m});var c=r(95442),_=r(67087),s=r(53661),g=r(30801);const E=1/(0,_.Z)("mapview-transitions-duration");class m extends c.Z{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this.parent=null,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(i){this._clips=i,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(i){this._opacity!==i&&(this._opacity=Math.min(1,Math.max(i,0)),this.requestRender())}get stage(){return this._stage}set stage(i){if(this._stage===i)return;const S=this._stage;this._stage=i,i?this._stage?.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):S?.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return(0,s.Wi)(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(i){this._visible!==i&&(this._visible=i,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.opacity=1,this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,g.hh)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this.opacity=0,this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,g.hh)(),this.requestRender()),this._fadeOutResolver.promise}endTransitions(){this._fadeInResolver?.(),this._fadeInResolver=null,this._fadeOutResolver?.(),this._fadeOutResolver=null,this.computedOpacity=this.visible?this.opacity:0,this.requestRender()}beforeRender(i){this.updateTransitionProperties(i.deltaTime,i.state.scale)}afterRender(i){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){this.parent?.removeChild(this)}setTransform(i){}processRender(i){this.stage&&this.computedVisible&&this.doRender(i)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(i,S){if(this.fadeTransitionEnabled){const n=this._fadeOutResolver||!this.visible?0:this.opacity,o=this.computedOpacity;if(o===n)this.computedVisible=this.visible;else{const u=i*E;this.computedOpacity=o>n?Math.max(n,o-u):Math.min(n,o+u),this.computedVisible=this.computedOpacity>0;const T=n===this.computedOpacity;this.inFadeTransition=!T,T||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(i){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},81925:(I,M,r)=>{var c,_,n;function s(n){switch(n){case"left":return c.Left;case"right":return c.Right;case"center":return c.Center}}function g(n){switch(n){case"top":return _.Top;case"middle":return _.Center;case"baseline":return _.Baseline;case"bottom":return _.Bottom}}function E(n){switch(n){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[c.Right,_.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[c.Center,_.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[c.Left,_.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[c.Right,_.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[c.Center,_.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[c.Left,_.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[c.Right,_.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[c.Center,_.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[c.Left,_.Top];default:return console.debug(`Found invalid placement type ${n}`),[c.Center,_.Center]}}function m(n){switch(n){case c.Right:return-1;case c.Center:return 0;case c.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${n}`),0}}function t(n){switch(n){case _.Top:return 1;case _.Center:return 0;case _.Bottom:case _.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${n}`),0}}function i(n){switch(n){case"left":return c.Left;case"right":return c.Right;case"center":return c.Center}}function S(n){switch(n){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}r.d(M,{Hd:()=>i,M7:()=>c,NS:()=>S,TR:()=>_,b7:()=>g,g:()=>m,kH:()=>s,qv:()=>E,tf:()=>t}),(n=c||(c={}))[n.Left=-1]="Left",n[n.Center=0]="Center",n[n.Right=1]="Right",function(n){n[n.Top=1]="Top",n[n.Center=0]="Center",n[n.Bottom=-1]="Bottom",n[n.Baseline=2]="Baseline"}(_||(_={}))},73041:(I,M,r)=>{r.d(M,{Z:()=>S});var c=r(28191),_=r(80696),s=r(76042),g=r(69923),E=r(74697);const m=c.Z.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient"),i=[0,0,0,0];class S{constructor(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:s.OQ.outlinePosition,outlineWidth:s.OQ.outlineWidth,innerHaloWidth:s.OQ.innerHaloWidth,outerHaloWidth:s.OQ.outerHaloWidth},this._shadeTexChanged=!0,this._texelData=new Uint8Array(4*s.Ft),this._minMaxDistance=[0,0]}setHighlightOptions(o){const u=this._convertedHighlightOptions;!function t(n,o){o.fillColor[0]=n.color.r/255,o.fillColor[1]=n.color.g/255,o.fillColor[2]=n.color.b/255,o.fillColor[3]=n.color.a,n.haloColor?(o.outlineColor[0]=n.haloColor.r/255,o.outlineColor[1]=n.haloColor.g/255,o.outlineColor[2]=n.haloColor.b/255,o.outlineColor[3]=n.haloColor.a):(o.outlineColor[0]=o.fillColor[0],o.outlineColor[1]=o.fillColor[1],o.outlineColor[2]=o.fillColor[2],o.outlineColor[3]=o.fillColor[3]),o.fillColor[3]*=n.fillOpacity,o.outlineColor[3]*=n.haloOpacity,o.fillColor[0]*=o.fillColor[3],o.fillColor[1]*=o.fillColor[3],o.fillColor[2]*=o.fillColor[3],o.outlineColor[0]*=o.outlineColor[3],o.outlineColor[1]*=o.outlineColor[3],o.outlineColor[2]*=o.outlineColor[3],o.outlineWidth=s.OQ.outlineWidth,o.outerHaloWidth=s.OQ.outerHaloWidth,o.innerHaloWidth=s.OQ.innerHaloWidth,o.outlinePosition=s.OQ.outlinePosition}(o,u);const T=u.outlinePosition-u.outlineWidth/2-u.outerHaloWidth,V=u.outlinePosition-u.outlineWidth/2,b=u.outlinePosition+u.outlineWidth/2,L=u.outlinePosition+u.outlineWidth/2+u.innerHaloWidth,O=Math.sqrt(Math.PI/2)*s.tM,a=Math.abs(T)>O?Math.round(10*(Math.abs(T)-O))/10:0,d=Math.abs(L)>O?Math.round(10*(Math.abs(L)-O))/10:0;let v;a&&!d?m.error("The outer rim of the highlight is "+a+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!a&&d?m.error("The inner rim of the highlight is "+d+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):a&&d&&m.error("The highlight is "+Math.max(a,d)+"px away from the edge of the feature; consider reducing some width values.");const h=[void 0,void 0,void 0,void 0];function C(f,A,y){h[0]=(1-y)*f[0]+y*A[0],h[1]=(1-y)*f[1]+y*A[1],h[2]=(1-y)*f[2]+y*A[2],h[3]=(1-y)*f[3]+y*A[3]}const{_texelData:P}=this;for(let f=0;f<s.Ft;++f)v=T+f/(s.Ft-1)*(L-T),v<T?(h[4*f+0]=0,h[4*f+1]=0,h[4*f+2]=0,h[4*f+3]=0):v<V?C(i,u.outlineColor,(v-T)/(V-T)):v<b?[h[0],h[1],h[2],h[3]]=u.outlineColor:v<L?C(u.outlineColor,u.fillColor,(v-b)/(L-b)):[h[4*f+0],h[4*f+1],h[4*f+2],h[4*f+3]]=u.fillColor,P[4*f+0]=255*h[0],P[4*f+1]=255*h[1],P[4*f+2]=255*h[2],P[4*f+3]=255*h[3];this._minMaxDistance[0]=T,this._minMaxDistance[1]=L,this._shadeTexChanged=!0}applyHighlightOptions(o,u){this._shadeTex||(this._shadeTex=new E.x(o,{target:g.No.TEXTURE_2D,pixelFormat:g.VI.RGBA,dataType:g.Br.UNSIGNED_BYTE,wrapMode:g.e8.CLAMP_TO_EDGE,width:s.Ft,height:1,samplingMode:g.cw.LINEAR})),this._shadeTexChanged&&(this._shadeTex.updateData(0,0,0,s.Ft,1,this._texelData),this._shadeTexChanged=!1),o.bindTexture(this._shadeTex,_.Jw),u.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}}},76042:(I,M,r)=>{r.d(M,{Ft:()=>g,OQ:()=>E,QU:()=>s,n5:()=>_,tM:()=>c});const c=1,_=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g=256,E={outlineWidth:1.3,outerHaloWidth:.4,innerHaloWidth:.4,outlinePosition:0}},21605:(I,M,r)=>{r.d(M,{CA:()=>y,Gq:()=>z,Xp:()=>A,a:()=>w,dk:()=>W,hF:()=>X,jj:()=>H,jy:()=>f,m2:()=>B,mE:()=>x,qr:()=>F});var c=r(32995),_=r(81925),s=r(20753);const C=Object.keys(s.mD).filter(p=>"number"==typeof s.mD[p]).reduce((p,e)=>({...p,[e]:s.mD[e]}),{});function f(p){return p===s.mD.OUTLINE_FILL||p===s.mD.OUTLINE_FILL_SIMPLE}function A(p){return function P(p){return p===s.mD.SIMPLE||p===s.mD.OUTLINE_FILL_SIMPLE}(p.symbologyType)}function y(p){return f(p.symbologyType)}function H(p,e){switch(p){case s.LW.FILL:return W.from(e);case s.LW.LINE:return w.from(e);case s.LW.MARKER:return x.from(e);case s.LW.TEXT:return F.from(e);case s.LW.LABEL:return z.from(e);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${p}`)}}function X(p){switch(B.load(p).geometryType){case s.LW.MARKER:return new x(p);case s.LW.FILL:return new W(p);case s.LW.LINE:return new w(p);case s.LW.TEXT:return new F(p);case s.LW.LABEL:return new z(p)}}class B{static load(e){const l=this.shared;return l.data=e,l}constructor(e){this._data=0,this._data=e}set data(e){this._data=e??0}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(e){this.setBits(e,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(e){this.setBit(20,e)}get sdf(){return!!this.bit(11)}set sdf(e){this.setBit(11,e??!1)}get pattern(){return!!this.bit(12)}set pattern(e){this.setBit(12,e)}get textureBinding(){return this.bits(0,8)}set textureBinding(e){this.setBits(e,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(e){this.setBits(e,21,26)}get geometryTypeString(){switch(this.geometryType){case s.LW.FILL:return"fill";case s.LW.MARKER:return"marker";case s.LW.LINE:return"line";case s.LW.TEXT:return"text";case s.LW.LABEL:return"label";default:throw new c.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(e,l){const D=1<<e;l?this._data|=D:this._data&=~D}bit(e){return(this._data&1<<e)>>e}setBits(e,l,D){for(let R=l,j=0;R<D;R++,j++)this.setBit(R,0!=(e&1<<j))}bits(e,l){let D=0;for(let R=e,j=0;R<l;R++,j++)D|=this.bit(R)<<j;return D}hasVV(){return!1}setVV(e,l){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:s.mD[this.symbologyType],options:C,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}}B.shared=new B(0);const U=p=>class extends p{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(e){this.setBit(16,e)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(e){this.setBit(17,e)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(e){this.setBit(18,e)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(e){this.setBit(19,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,l){super.setVV(e,l);const D=function g(p,e,l){const D=s.X.SIZE_FIELD_STOPS|s.X.SIZE_MINMAX_VALUE|s.X.SIZE_SCALE_STOPS|s.X.SIZE_UNIT_VALUE,R=(e&(s.mf.FIELD_TARGETS_OUTLINE|s.mf.MINMAX_TARGETS_OUTLINE|s.mf.SCALE_TARGETS_OUTLINE|s.mf.UNIT_TARGETS_OUTLINE))>>>4;return p===s.LW.LINE&&l.isOutline||p===s.LW.FILL&&f(l.symbologyType)?D&R:D&~R}(this.geometryType,e,l)&e;this.vvSizeMinMaxValue=!!(D&s.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(D&s.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(D&s.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(D&s.X.SIZE_SCALE_STOPS)}},G=p=>class extends p{get vvRotation(){return 0!==this.bit(15)}set vvRotation(e){this.setBit(15,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,l){super.setVV(e,l),this.vvRotation=!l.isOutline&&!!(e&s.X.ROTATION)}},K=p=>class extends p{get vvColor(){return 0!==this.bit(13)}set vvColor(e){this.setBit(13,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,l){super.setVV(e,l),this.vvColor=!l.isOutline&&!!(e&s.X.COLOR)}},N=p=>class extends p{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(e){this.setBit(14,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,l){super.setVV(e,l),this.vvOpacity=!l.isOutline&&!!(e&s.X.OPACITY)}};class W extends(K(N(U(B)))){static load(e){const l=this.shared;return l.data=e,l}static from(e){const{symbologyType:l,vvFlags:D}=e,R=this.load(0);return R.geometryType=s.LW.FILL,R.symbologyType=l,l!==s.mD.DOT_DENSITY&&R.setVV(D,e),R.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}W.shared=new W(0);class x extends(K(N(G(U(B))))){static load(e){const l=this.shared;return l.data=e,l}static from(e){const{symbologyType:l,vvFlags:D}=e,R=this.load(0);return R.geometryType=s.LW.MARKER,R.symbologyType=l,l!==s.mD.HEATMAP&&R.setVV(D,e),R.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}x.shared=new x(0);class w extends(K(N(U(B)))){static load(e){const l=this.shared;return l.data=e,l}static from(e){const l=this.load(0);return l.geometryType=s.LW.LINE,l.symbologyType=e.symbologyType,l.setVV(e.vvFlags,e),l.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}w.shared=new w(0);class F extends(K(N(G(U(B))))){static load(e){const l=this.shared;return l.data=e,l}static from(e){const l=this.load(0);return l.geometryType=s.LW.TEXT,l.symbologyType=e.symbologyType,l.setVV(e.vvFlags,e),l.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}F.shared=new F(0);class z extends(U(B)){static load(e){const l=this.shared;return l.data=e,l}static from(e){const l=this.load(0);return l.geometryType=s.LW.LABEL,l.symbologyType=e.symbologyType,l.setVV(e.vvFlags,e),l.mapAligned=(0,_.NS)(e.placement),l.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}z.shared=new z(0)},70260:(I,M,r)=>{r.d(M,{v:()=>_});var c=r(53661);class _{static getStorageSpec(g){return null}static createOrUpdateRendererSchema(g,E){return(0,c.pC)(g)&&"default"===g.type?g:{type:"default"}}static getVariation(g){return{}}static getVariationHash(g){return 0}}_.type="default",_.programSpec=null},40790:(I,M,r)=>{r.d(M,{T:()=>m});var c=r(53661),_=r(9203),s=r(80696),g=r(70260),E=r(69923);class m extends g.v{static getStorageSpec({attributes:i}){return{visualVariables:!1,attributes:i??null}}static _createRendererSchema(){return{type:"dot-density",colors:new Float32Array(32),dotValue:-1,dotSize:-1,dotScale:-1,dotBlending:!1,backgroundColor:new Float32Array(4),activeDots:new Float32Array(8),seed:-1}}static createOrUpdateRendererSchema(i,S){const{attributes:n,dotValue:o,referenceScale:u,dotSize:T,dotBlendingEnabled:V,seed:b,backgroundColor:L}=S,O=(0,c.pC)(i)&&"dot-density"===i.type?i:this._createRendererSchema();O.dotValue=o,O.dotSize=T,O.dotScale=u,O.dotBlending=V,O.seed=b;const{colors:a,activeDots:d,backgroundColor:v}=O;for(let h=0;h<s.$0;h++)(0,_.Vs)(a,h>=n.length?null:n[h].color,4*h);for(let h=0;h<8;h++)d[h]=h<S.attributes.length?1:0;return(0,_.Vs)(v,L),O}static getVariation(i){return{ddDotBlending:i.dotBlending}}static getVariationHash(i){return i.dotBlending?1:0}}m.type="dot-density",m.programSpec={shader:"materials/fill",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:E.g.SHORT},{location:1,name:"a_id",count:3,type:E.g.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:E.g.UNSIGNED_BYTE},{location:3,name:"a_inverseArea",count:1,type:E.g.FLOAT}]}}},25160:(I,M,r)=>{r.d(M,{h:()=>m});var c=r(53661),_=r(55798),s=r(45811),g=r(70260),E=r(69923);class m extends g.v{static getStorageSpec({field:i,valueExpression:S}){return{visualVariables:!1,attributes:i||S?[{field:i,valueExpression:S}]:null}}static _createRendererSchema(){return{type:"heatmap",radius:-1,referenceScale:-1,isFieldActive:0,minDensity:-1,densityRange:-1,kernel:null,gradient:null,gradientHash:"invalid"}}static createOrUpdateRendererSchema(i,S){const{radius:n,minDensity:o,maxDensity:u,referenceScale:T,field:V,valueExpression:b,colorStops:L}=S,O=u-o,a=V||b?1:0,d=L.map(({color:C,ratio:P})=>`${P}:${C.toString()}`).join();let v,h=!0;return(0,c.pC)(i)&&"heatmap"===i.type?(v=i,h=d!==i.gradientHash):v=this._createRendererSchema(),v.radius=(0,_.F2)(n),v.minDensity=o,v.densityRange=O,v.referenceScale=T,v.isFieldActive=a,h&&(v.gradient=(0,s.uI)(L),v.gradientHash=d),v}}m.type="heatmap",m.programSpec={shader:"materials/icon/heatmapAccumulate",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:E.g.SHORT},{location:1,name:"a_vertexOffset",count:2,type:E.g.SHORT},{location:4,name:"a_id",count:4,type:E.g.UNSIGNED_BYTE}]}}},6610:(I,M,r)=>{r.d(M,{c:()=>i});var c=r(25764),_=r(53661),s=r(55798),g=r(9203),E=r(80696),m=r(70260),t=r(69923);class i extends m.v{static getStorageSpec({attributes:n}){return{visualVariables:!0,attributes:n??null}}static _createRendererSchema(){return{type:"pie-chart",colors:new Float32Array(4*E.eV),defaultColor:new Float32Array(4),othersColor:new Float32Array(4),outlineColor:new Float32Array(4),holePercentage:0,sectorThreshold:0,outlineWidth:1,numberOfFields:10}}static createOrUpdateRendererSchema(n,o){const{attributes:u,defaultColor:T,holePercentage:V,othersCategory:b,outline:L}=o,O=(0,_.pC)(n)&&"pie-chart"===n.type?n:this._createRendererSchema();for(let a=0;a<E.eV;a++){const d=a>=u.length?new c.Z([0,0,0,0]):u[a].color;(0,g.Vs)(O.colors,d,4*a)}return(0,g.Vs)(O.defaultColor,T),(0,g.Vs)(O.othersColor,b?.color),(0,g.Vs)(O.outlineColor,L?.color),O.outlineWidth=(0,s.F2)(L?.width||0),O.holePercentage=V,O.sectorThreshold=b?.threshold||0,O.numberOfFields=u.length,O}static getVariation(n){return{numberOfFields:n.numberOfFields}}static getVariationHash(n){return n.numberOfFields}}i.type="pie-chart",i.programSpec={shader:"materials/pie",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:t.g.SHORT},{location:1,name:"a_vertexOffset",count:2,type:t.g.SHORT},{location:2,name:"a_texCoords",count:2,type:t.g.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:t.g.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:t.g.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:t.g.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:t.g.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:t.g.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:t.g.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]}},51399:(I,M,r)=>{r.d(M,{EJ:()=>S,a1:()=>n,t4:()=>i});var c=r(32995),_=r(20753),s=r(21605),g=r(70260),E=r(40790),m=r(25160),t=r(6610);function i(o,u){if(o.type!==u)throw new c.Z("material-view-model:unexpected-renderer-schema",`expected to find renderer schema of type "${u}" but found type "${o.type}"`)}function S(o){switch(o?.type){case"dot-density":return E.T;case"heatmap":return m.h;case"pie-chart":return t.c;default:return g.v}}function n(o){const{geometryType:u,symbologyType:T}=s.m2.load(o);switch(u){case _.LW.FILL:if(T===_.mD.DOT_DENSITY)return E.T;break;case _.LW.MARKER:switch(T){case _.mD.HEATMAP:return m.h;case _.mD.PIE_CHART:return t.c}}return g.v}}}]);
//# sourceMappingURL=4183.4d3c8ad8c350a2e4.js.map