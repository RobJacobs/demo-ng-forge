import{a as yt,c as wt,d as Dt,f as ve,h as St}from"./chunk-JNEFTJSA.js";import{a as pt}from"./chunk-MM3YURSG.js";import"./chunk-F55BD32M.js";import{a as Ft}from"./chunk-6TJZ6S64.js";import{b as gt,d as _t,e as bt,j as Ct,m as ke,n as xt,o as vt}from"./chunk-YZXUHQVA.js";import{a as ut,c as ft,e as ht}from"./chunk-JHJLSUDM.js";import{a as mt}from"./chunk-P4NTETCS.js";import{a as N}from"./chunk-6VOI2BBA.js";import"./chunk-HP46DOOR.js";import"./chunk-IJTEU5B7.js";import"./chunk-PSWJZLWW.js";import"./chunk-BJ26DAUS.js";import"./chunk-3WV5GJ3R.js";import{a as dt}from"./chunk-KGLI3JET.js";import{Ab as Y,Ac as ce,B as Ue,Bc as de,Cc as pe,Cd as st,Db as ee,Dd as ct,Eb as Ke,Ed as Ce,Fb as Qe,Fd as xe,Gb as te,Hc as me,Ic as ge,Jc as _e,Kc as ue,Lb as ie,Mb as Je,Pc as Ze,Tc as Ye,Uc as et,Vc as tt,Wc as it,Xc as fe,Zb as oe,_b as ne,c as K,d as Be,dd as ot,ed as nt,fd as rt,h as Q,ic as Xe,id as lt,jb as J,jd as at,kb as G,ob as X,qb as j,sb as W,sc as je,tb as Z,tc as We,uc as re,vb as He,vc as le,w as qe,wc as ae,wd as he,xb as P,xd as be,zc as se}from"./chunk-LBARSMJT.js";import{$a as Ie,$b as Ne,Bb as S,Cb as b,D as $,Db as C,Eb as y,Fb as w,G as Ve,Gb as D,Gc as H,Hb as p,Ib as a,Jb as l,Kb as _,Ob as M,Pb as O,Q as ye,Qb as B,Rb as x,Ub as h,Va as d,Vb as c,Y as we,Z as De,Zb as ze,_b as Ge,ac as q,bc as $e,cc as R,dc as Se,g as Re,gc as m,ha as v,hc as T,ic as Te,ma as u,na as f,ob as L,pc as V,qa as Ae,qc as U,rc as z,sc as Le,tb as I,tc as E,vc as k,yc as Ee}from"./chunk-UQ3J2UFU.js";import"./chunk-OY7QI42D.js";var Ot=()=>({name:"firstName"}),Rt=()=>({name:"lastName"}),Vt=()=>({name:"occupation"}),At=i=>({"operator__addon--selected":i});function It(i,r){if(i&1&&(a(0,"forge-option",20),m(1),l()),i&2){let e=r.$implicit;p("value",e.id),d(),T(e.name)}}function zt(i,r){if(i&1&&(a(0,"span",21),m(1),l()),i&2){let e=c(2);d(),T(e.userFilter==null?null:e.userFilter.description)}}function Gt(i,r){if(i&1){let e=x();a(0,"forge-select",19),h("change",function(o){u(e);let n=c();return f(n.onFilterChange(o))}),w(1,It,2,2,"forge-option",20,y),b(3,zt,2,1,"span",21),a(4,"forge-icon-button",22),h("click",function(){u(e);let o=c();return f(o.onFilterDelete())}),_(5,"forge-icon",23),l(),a(6,"forge-tooltip",24),m(7,"Delete filter"),l()(),_(8,"forge-divider")}if(i&2){let e=c();p("value",e.userFilter==null?null:e.userFilter.id),d(),D(e.cache.userFilters),d(2),C(!(e.userFilter==null||e.userFilter.description==null)&&e.userFilter.description.length?3:-1),d(),p("disabled",!e.userFilter)}}function Nt(i,r){i&1&&B(0)}function $t(i,r){i&1&&B(0)}function Lt(i,r){i&1&&B(0)}function Bt(i,r){if(i&1){let e=x();a(0,"forge-icon-button",25,2),h("click",function(o){let n=u(e).name,s=R(1),g=c();return f(g.onOperatorPopoverOpen(o,s,n))}),_(2,"forge-icon",26),l(),a(3,"forge-tooltip"),m(4,"Filter operators"),l()}if(i&2){let e,t=r.name,o=c(),n=R(32);p("ngClass",U(2,At,(e=o.cache.recordsetFilterFormGroup.get(t))==null||e.value==null?null:e.value.operator))("forgePopover",n)}}function qt(i,r){if(i&1&&_(0,"forge-icon",30),i&2){let e=c().$implicit;S("aria-label",e.label+" selected")}}function Ut(i,r){if(i&1&&(a(0,"forge-list-item",28)(1,"button",29),m(2),l(),b(3,qt,1,1,"forge-icon",30),l()),i&2){let e=r.$implicit,t=c(2);p("value",e.value)("selected",(t.operatorPopoverFormGroup==null?null:t.operatorPopoverFormGroup.value.operator)===e.value),d(2),T(e.label),d(),C((t.operatorPopoverFormGroup==null?null:t.operatorPopoverFormGroup.value.operator)===e.value?3:-1)}}function Ht(i,r){if(i&1){let e=x();a(0,"forge-list",27),h("forge-list-item-select",function(o){u(e);let n=c();return f(n.onOperatorSelected(o.detail.value))}),w(1,Ut,4,4,"forge-list-item",28,y),l()}if(i&2){let e=c();d(),D(e.operatorOptions)}}var Tt=(()=>{let r=class r{constructor(){this.dialogService=v(re),this.dialogData=v(je),this.dialogRef=v(We),this.genderOptions=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Unknown",value:"U"}],this.operatorOptions=[{value:null,label:"None"},{value:0,label:"Equal"},{value:1,label:"Not equal"},{value:2,label:"Greater than"},{value:3,label:"Less than"},{value:4,label:"Greater than equal to"},{value:5,label:"Less than equal to"},{value:6,label:"Range"},{value:7,label:"Contains"},{value:8,label:"Not contains"},{value:9,label:"Empty"}]}ngOnInit(){this.cache=this.dialogData.cache,this.userFilter=this.cache.activeUserFilter,this.userFilter&&this.cache.recordsetFilterFormGroup.patchValue(this.userFilter.filters)}onFilterChange(t){this.userFilter=this.cache.userFilters?.find(o=>o.id===t.detail),this.cache.recordsetFilterFormGroup.patchValue(this.userFilter.filters)}onFilterDelete(){let t=this.cache.userFilters.findIndex(o=>o.id===this.userFilter.id);t!==-1&&this.cache.userFilters.splice(t,1),this.cache.activeUserFilter=void 0,this.userFilter=void 0,this.dialogData.saveCallback()}onApply(){this.cache.activeUserFilter=this.userFilter,this.dialogRef.close(!0)}onClear(){this.userFilter=void 0,this.cache.recordsetFilterFormGroup.reset(),this.cache.recordsetFilterFormGroup.markAsPristine()}onSave(){let t={description:this.userFilter?.description,isDefault:this.userFilter?.isDefault,name:this.userFilter?.name};this.dialogService.open(Ct,{data:t,options:{persistent:!0}}).afterClosed.subscribe({next:o=>{if(o){let n={filters:this.cache.recordsetFilterFormGroup.value,description:o.description,id:this.userFilter?.id||N.uniqueId(),isDefault:o.isDefault,name:o.name},s=this.cache.userFilters.findIndex(g=>g.id===n.id);s!==-1?this.cache.userFilters[s]=n:this.cache.userFilters.push(n),n.isDefault&&this.cache.userFilters.filter(g=>g.id!==n.id).forEach(g=>g.isDefault=!1),this.userFilter=this.dialogData.cache.userFilters?.find(g=>g.id===n.id)}this.dialogData.saveCallback()}})}onCancel(){this.dialogRef.close(!1)}onOperatorPopoverOpen(t,o,n){t.stopPropagation(),this.operatorPopoverFormGroup=this.cache.recordsetFilterFormGroup.get(n),this.operatorPopover=o,this.operatorPopover.open()}onOperatorSelected(t){t=parseInt(t,10),this.operatorPopoverFormGroup?.get("operator")?.setValue(t),this.operatorPopover?.close()}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=L({type:r,selectors:[["app-filter-dialog"]],decls:33,vars:12,consts:[["opertatorAddonTemplate",""],["operatorPopoverTemplate",""],["operatorPopover","forgePopover"],["dialogTitle","Filter records","dialogLabel","Filter records",3,"dialogClose"],["novalidate","","autocomplete","off",1,"form-grid",3,"keydown.enter","formGroup"],["formGroupName","firstName"],["for","filter-dialog--first-name","slot","label"],["type","text","id","filter-dialog--first-name","formControlName","value","appAutoFocus",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["formGroupName","lastName"],["for","filter-dialog--last-name","slot","label"],["type","text","id","filter-dialog--last-name","formControlName","value"],["label","Gender","formControlName","gender","multiple","true",3,"options"],["formGroupName","occupation"],["for","filter-dialog--occupation","slot","label"],["type","text","id","filter-dialog--occupation","formControlName","value"],["app-dialog-footer",""],["slot","end","variant","outlined",3,"click"],["slot","end","variant","filled",3,"click"],["slot","center","label","Saved filters",3,"change","value"],[3,"value"],["slot","support-text",1,"forge-typography--label2"],["slot","addon-end","density","medium","aria-label","Delete filter",3,"click","disabled"],["name","delete","aria-hidden","true"],["slot","addon-end"],["slot","addon-end","density","medium","aria-label","Filter operators",1,"operator__addon",3,"click","ngClass","forgePopover"],["name","bolt","aria-hidden","true"],[1,"operator-popover",3,"forge-list-item-select"],[3,"value","selected"],["type","button"],["name","check","slot","end"]],template:function(o,n){if(o&1){let s=x();a(0,"app-dialog-template",3),h("dialogClose",function(){return u(s),f(n.onCancel())}),a(1,"form",4),h("keydown.enter",function(){return u(s),f(n.onApply())}),b(2,Gt,9,3),M(3,5),a(4,"forge-text-field")(5,"label",6),m(6,"First name"),l(),_(7,"input",7),I(8,Nt,1,0,"ng-container",8),l(),O(),M(9,9),a(10,"forge-text-field")(11,"label",10),m(12,"Last name"),l(),_(13,"input",11),I(14,$t,1,0,"ng-container",8),l(),O(),_(15,"forge-select",12),M(16,13),a(17,"forge-text-field")(18,"label",14),m(19,"Occupation"),l(),_(20,"input",15),I(21,Lt,1,0,"ng-container",8),l(),O(),l(),M(22,16),a(23,"forge-button",17),h("click",function(){return u(s),f(n.onSave())}),m(24,"Save"),l(),a(25,"forge-button",17),h("click",function(){return u(s),f(n.onClear())}),m(26,"Clear"),l(),a(27,"forge-button",18),h("click",function(){return u(s),f(n.onApply())}),m(28,"Apply"),l(),O(),l(),I(29,Bt,5,4,"ng-template",null,0,Ee)(31,Ht,3,0,"ng-template",null,1,Ee)}if(o&2){let s=R(30);d(),p("formGroup",n.cache.recordsetFilterFormGroup),d(),C(n.cache.userFilters!=null&&n.cache.userFilters.length?2:-1),d(6),p("ngTemplateOutlet",s)("ngTemplateOutletContext",V(9,Ot)),d(6),p("ngTemplateOutlet",s)("ngTemplateOutletContext",V(10,Rt)),d(),p("options",n.genderOptions),d(6),p("ngTemplateOutlet",s)("ngTemplateOutletContext",V(11,Vt))}},dependencies:[Q,K,Be,ie,Y,X,W,Z,ee,te,Ke,ne,oe,ae,le,pe,de,se,ce,_e,ge,ue,me,fe,it,rt,nt,ot,Ze,be,he,xe,Ce,_t,ut],styles:[`[_nghost-%COMP%]{display:contents}  .operator-popover{min-width:200px}  .operator-popover forge-list-item{cursor:pointer}.form-grid[_ngcontent-%COMP%]{padding:16px;display:grid;grid-template-columns:repeat(auto-fill,320px);gap:16px}.form-grid--row-break[_ngcontent-%COMP%]{grid-column-start:1}.form-grid--col-span[_ngcontent-%COMP%]{grid-column:1/-1}.form-grid--col-span.form-grid--col-span[_ngcontent-%COMP%]{width:auto}.form-grid--col-span2[_ngcontent-%COMP%]{grid-column:span 2}.form-grid--col-span2.form-grid--col-span2[_ngcontent-%COMP%]{width:656px}.form-grid--col-span3[_ngcontent-%COMP%]{grid-column:span 3}.form-grid--col-span3.form-grid--col-span3[_ngcontent-%COMP%]{width:992px}.form-grid[_ngcontent-%COMP%]   [slot=value][_ngcontent-%COMP%]:empty:before{content:"n/a";color:var(--forge-theme-text-medium);font-style:italic}.operator__addon--selected[_ngcontent-%COMP%]{color:var(--forge-theme-warning)}






/*# sourceMappingURL=filter-dialog.component-MUKSRP5O.css.map */`]});let i=r;return i})();var Kt=["bodyTable"],Qt=["table"],Jt=["columnsEditPopover"],Xt=(i,r,e)=>({"forge-table-head__cell--sortable":i,"forge-table-cell--frozen-left":r,"forge-table-cell--frozen-right":e}),Pe=(i,r)=>({"forge-table-cell--center":i,"forge-table-cell--right":r}),jt=()=>[1,2,3],Wt=i=>({"forge-table-row--expanded":i}),Zt=(i,r)=>({"forge-table-cell--frozen-left":i,"forge-table-cell--frozen-right":r});function Yt(i,r){if(i&1){let e=x();a(0,"forge-button",13),h("click",function(o){u(e);let n=c();return f(n.onEdit(o,!1))}),_(1,"forge-icon",14),m(2," Cancel "),l(),a(3,"forge-button",15),h("click",function(o){u(e);let n=c();return f(n.onSubmit(o))}),_(4,"forge-icon",16),m(5," Submit "),l()}if(i&2){let e=c();d(3),p("disabled",!e.cache.recordsetFormGroup.dirty||e.cache.recordsetFormGroup.invalid)}}function ei(i,r){if(i&1&&(a(0,"span",17),m(1),l()),i&2){let e=c(2);d(),T(e.cache.activeUserFilter.description)}}function ti(i,r){if(i&1&&(a(0,"forge-list-item",27),_(1,"forge-icon",31),a(2,"button",29),m(3),l()()),i&2){let e=r.$implicit;p("value",e),d(),p("name",e.hidden?"check_box_outline_blank":"check_box"),d(),S("aria-label",e.header+e.hidden?+" hidden":" visible"),d(),T(e.header)}}function ii(i,r){if(i&1){let e=x();b(0,ei,2,1,"span",17),a(1,"forge-icon-button",18),h("click",function(o){u(e);let n=c();return f(n.onFilter(o))}),_(2,"forge-icon",19),l(),a(3,"forge-tooltip",20),m(4,"Filter records"),l(),a(5,"forge-icon-button",21),h("click",function(o){u(e);let n=c();return f(n.onEdit(o,!0))}),_(6,"forge-icon",22),l(),a(7,"forge-tooltip",20),m(8,"Edit records"),l(),a(9,"forge-icon-button",23),h("click",function(o){u(e);let n=c();return f(n.onColumnsEdit(o))}),_(10,"forge-icon",24),l(),a(11,"forge-tooltip",20),m(12,"Edit columns"),l(),a(13,"forge-popover",25,1)(15,"forge-list",26),h("forge-list-item-select",function(o){u(e);let n=c();return f(n.onColumnsEditPopoverSelected(o.detail.value))}),w(16,ti,4,4,"forge-list-item",27,y),E(18,"appCallback"),_(19,"forge-divider"),a(20,"forge-list-item",28)(21,"button",29),m(22,"Reset column widths"),l()(),_(23,"forge-divider"),a(24,"forge-list-item",30)(25,"button",29),m(26,"Delete table cache"),l()()()()}if(i&2){let e=c();C(!(e.cache.activeUserFilter==null||e.cache.activeUserFilter.description==null)&&e.cache.activeUserFilter.description.length?0:-1),d(),p("disabled",e.isBusy)("theme",!(e.cache.filter==null||e.cache.filter.filters==null)&&e.cache.filter.filters.length?"warning":""),d(4),p("disabled",e.isBusy),d(4),p("disabled",e.isBusy),d(7),D(k(18,5,e.tableColumns,e.optionalColumns))}}function oi(i,r){if(i&1&&(_(0,"app-table-mobile",8),E(1,"appCallback")),i&2){let e=c();p("data",e.cache.recordsetFormGroup.controls.recordsetFormArray.getRawValue())("formArray",e.cache.recordsetFormGroup.controls.recordsetFormArray)("columnConfigurations",k(1,4,e.tableColumns,e.visibleColumns))("isEditing",e.isEditing)}}function ni(i,r){if(i&1&&_(0,"forge-icon",40),i&2){let e=c().$implicit;p("name",e.sortDirection==="DESC"?"arrow_downward":e.sortDirection==="ASC"?"arrow_upward":"")}}function ri(i,r){i&1&&(a(0,"forge-icon-button",42),_(1,"forge-icon",43),l(),a(2,"forge-tooltip"),m(3,"Move column"),l())}function li(i,r){if(i&1){let e=x();a(0,"forge-icon-button",44),h("mousedown",function(o){u(e);let n=c(2),s=n.$implicit,g=n.$index,F=c(2);return f(F.onColumnHeaderResize(o,g+1,s))}),_(1,"forge-icon",45),l(),a(2,"forge-tooltip"),m(3,"Resize column"),l()}}function ai(i,r){if(i&1&&(a(0,"div",41),b(1,ri,4,0),b(2,li,4,0),l()),i&2){let e=c().$implicit;d(),C(e.moveable!==!1?1:-1),d(),C(e.resizable!==!1?2:-1)}}function si(i,r){if(i&1){let e=x();a(0,"th",37),h("cdkDragStarted",function(){u(e);let o=c(2);return f(o.onColumnHeaderDragStart())})("click",function(o){let n=u(e).$implicit,s=c(2);return f(s.onColumnSort(o,n))}),a(1,"div",38)(2,"span",39),m(3),l(),b(4,ni,1,1,"forge-icon",40),b(5,ai,3,2,"div",41),l()()}if(i&2){let e=r.$implicit,t=c(2);Se("--table-column-width",e.width),p("ngClass",Le(7,Xt,e.sortable!==!1,e.frozen==="left",e.frozen==="right")),d(),p("ngClass",z(11,Pe,e.align===t.cellAlignEnum.Center,e.align===t.cellAlignEnum.Right)),d(2),T(e.header),d(),C(e.sortDirection!=null&&e.sortDirection.length?4:-1),d(),C(!t.isBusy&&!t.isEditing&&(e.moveable!==!1||e.resizable!==!1)?5:-1)}}function ci(i,r){if(i&1&&(a(0,"tr",46)(1,"td",47),E(2,"appCallback"),_(3,"forge-skeleton",48),l()()),i&2){let e=c(3);d(),S("colspan",k(2,1,e.tableColumns,e.visibleColumns).length+1)}}function di(i,r){i&1&&w(0,ci,4,4,"tr",46,y),i&2&&D(V(0,jt))}function pi(i,r){if(i&1){let e=x();a(0,"div",57,3),h("loaded",function(){u(e);let o=R(1),n=c().$implicit,s=c(),g=s.$implicit,F=s.$index;return f(n.template(F,o,g.getRawValue()))}),l()}if(i&2){let e=c().$implicit,t=c(4);p("ngClass",z(1,Pe,e.align===t.cellAlignEnum.Center,e.align===t.cellAlignEnum.Right))}}function mi(i,r){if(i&1&&(a(0,"forge-text-field",58),_(1,"input",59),l()),i&2){let e=c(2).$implicit,t=c(),o=t.$implicit,n=t.$index;p("appFormControlInvalid",o.get(e.property)),d(),p("id","app-table-demo--"+e.property+"--"+n)("formControlName",e.property),S("aria-label",e.property+" "+n)}}function gi(i,r){if(i&1&&m(0),i&2){let e=c(3).$implicit,t=c().$implicit;Te(" ",e.transform(t.get(e.property).value)," ")}}function _i(i,r){if(i&1&&m(0),i&2){let e=c(3).$implicit,t=c().$implicit;Te(" ",t.get(e.property).value," ")}}function ui(i,r){if(i&1&&b(0,gi,1,1)(1,_i,1,1),i&2){let e=c(2).$implicit;C(e.transform?0:1)}}function fi(i,r){if(i&1&&(a(0,"div",56),b(1,mi,2,4,"forge-text-field",58)(2,ui,2,1),l()),i&2){let e=c().$implicit,t=c(4);p("ngClass",z(2,Pe,e.align===t.cellAlignEnum.Center,e.align===t.cellAlignEnum.Right)),d(),C(t.isEditing&&e.editable!==!1?1:2)}}function hi(i,r){if(i&1&&(a(0,"td",53),b(1,pi,2,4,"div",55)(2,fi,3,5,"div",56),l()),i&2){let e=r.$implicit;p("ngClass",z(2,Zt,e.frozen==="left",e.frozen==="right")),d(),C(e.template?1:2)}}function bi(i,r){if(i&1&&(a(0,"tr",54)(1,"td",60),E(2,"appCallback"),_(3,"app-table-detail",61),l()()),i&2){let e=c().$index,t=c(3);d(),S("colspan",k(2,3,t.tableColumns,t.visibleColumns).length+1),d(2),p("data",t.cache.expandedRows[e])("rowIndex",e)}}function Ci(i,r){if(i&1){let e=x();a(0,"tr",49)(1,"td",50)(2,"forge-icon-button",51),h("click",function(){let o=u(e).$index,n=c(3);return f(n.onExpandRow(o))}),_(3,"forge-icon",52),l(),a(4,"forge-tooltip"),m(5,"View person details"),l()(),w(6,hi,3,5,"td",53,y),E(8,"appCallback"),l(),b(9,bi,4,6,"tr",54)}if(i&2){let e=r.$implicit,t=r.$index,o=c(3);p("formGroup",e)("ngClass",U(7,Wt,o.cache.expandedRows[t])),d(3),p("name",o.cache.expandedRows[t]?"expand_less":"expand_more"),d(3),D(k(8,4,o.tableColumns,o.visibleColumns)),d(3),C(o.cache.expandedRows[t]?9:-1)}}function xi(i,r){if(i&1&&(M(0,36),w(1,Ci,10,9,null,null,y),O()),i&2){let e=c(2);d(),D(e.cache.recordsetFormGroup.controls.recordsetFormArray.controls)}}function vi(i,r){if(i&1&&(a(0,"tfoot")(1,"tr",62)(2,"td",63),E(3,"appCallback"),a(4,"div",64),m(5,"Footer row"),l()()()()),i&2){let e=c(2);d(2),S("colspan",k(3,1,e.tableColumns,e.visibleColumns).length+1)}}function Fi(i,r){if(i&1){let e=x();a(0,"table",32,2)(2,"thead")(3,"tr",33),h("cdkDropListDropped",function(o){u(e);let n=c();return f(n.onColumnHeaderDragDrop(o))}),_(4,"th",34),w(5,si,6,14,"th",35,y),E(7,"appCallback"),l()(),a(8,"tbody"),b(9,di,2,1)(10,xi,3,0,"ng-container",36),l(),b(11,vi,6,4,"tfoot"),l()}if(i&2){let e=c();Se("--table-body-cell-inline-padding",e.isEditing?"4px":"8px"),p("formGroup",e.cache.recordsetFormGroup),d(5),D(k(7,5,e.tableColumns,e.visibleColumns)),d(4),C(e.isBusy?9:10),d(2),C(!e.isBusy&&(e.cache.recordsetFormGroup.controls.recordsetFormArray.controls!=null&&e.cache.recordsetFormGroup.controls.recordsetFormArray.controls.length)?11:-1)}}function yi(i,r){i&1&&(a(0,"div",10),_(1,"img",65),a(2,"div"),m(3,"No records found."),l()())}var eo=(()=>{let r=class r{constructor(){this.destroyRef=v(Ae),this.ngZone=v(Ie),this.router=v(qe),this.dialogService=v(re),this.appDataService=v(mt),this.busyIndicatorService=v(gt),this.appCache=v(dt),this.cache=v(pt),this.bodyTableElementRef=H("bodyTable"),this.tableElementRef=H("table"),this.columnsEditPopover=H("columnsEditPopover"),this.tableColumnResize$=new Re,this.isColumnResizing=!1,this.tableStateStorageKey="app--table-demo--table-state",this.filtersStateStorageKey="app--table-demo--filters-state",this.isBusy=!1,this.isFiltering=!1,this.isEditing=!1,this.cellAlignEnum=J,this.tableColumns=[{property:"image",editable:!1,sortable:!1,resizable:!1,moveable:!1,optional:!1,align:J.Center,width:48,template:(t,o,n)=>{let s=document.createElement("img");return s.src=`mock-data/${N.formatNumber(n.id,"2.0-0")}-small.png`,s.setAttribute("alt",""),s.classList.add("forge-table-cell__image"),o.appendChild(s),null}},{header:"Id",property:"id",width:48},{header:"First",property:"firstName",moveable:!1},{header:"Last",property:"lastName",resizable:!1},{header:"Gender",property:"gender"},{header:"Occupation",property:"occupation"},{header:"Actions",property:"actions",editable:!1,sortable:!1,resizable:!1,moveable:!1,optional:!1,align:J.Center,width:120,frozen:"right",template:(t,o,n)=>(this.ngZone.run(()=>{o.classList.add("forge-table-body__cell__actions"),o.appendChild(ke.createIconButton("delete",s=>{this.dialogService.open(bt,{options:{persistent:!0},data:{title:"Delete record",message:"Are you sure you want to delete this record?"}}).afterClosed.subscribe({next:g=>{if(g){let F={message:"Deleting...",progress:"circular"};this.busyIndicatorService.show(F),setTimeout(()=>{this.busyIndicatorService.hide(),this.cache.recordsetFormGroup.controls.recordsetFormArray.removeAt(t)},2e3)}}})},"Delete person")),o.appendChild(ke.createIconButton("keyboard_arrow_right",s=>{this.router.navigate([`people/detail/${n.id}`])},"View person details"))}),null)}],this.visibleColumns=t=>N.sortData(t.filter(o=>o.hidden!==!0),"order","number","ASC"),this.optionalColumns=t=>t.filter(o=>o.optional!==!1)}ngOnInit(){this.loadTableState(),this.loadFiltersState(),this.getRecords()}ngOnDestroy(){this.tableColumnResize$.next(),this.tableColumnResize$.complete()}onFilter(t){t.preventDefault(),this.isFiltering=!this.isFiltering;let o={cache:this.cache,saveCallback:()=>this.saveFiltersState()};this.dialogService.open(Tt,{data:o,options:{preset:"right-sheet"}}).afterClosed.subscribe({next:n=>{n&&(this.cache.filter.skip=0,this.cache.expandedRows.length=0,this.cache.filter.filters=this.cache.convertRecordsetFilterFormGroup(),this.getRecords()),this.cache.filter.filters.length||this.cache.recordsetFilterFormGroup.markAsPristine()}})}onEdit(t,o){t.preventDefault(),this.isEditing=o,this.cdkDropList.disabled=this.isEditing,this.tableColumns.find(n=>n.header==="Actions").hidden=this.isEditing,this.tableColumns=[...this.tableColumns]}onSubmit(t){t.preventDefault();let o={message:"Submitting...",progress:"circular"};this.busyIndicatorService.show(o),setTimeout(()=>{this.busyIndicatorService.hide(),this.isEditing=!1},2e3)}onColumnHeaderDragStart(){this.bodyTableElementRef().nativeElement.scrollTo(0,0)}onColumnHeaderDragDrop(t){this.tableColumns[t.currentIndex]?.moveable!==!1&&(yt(this.tableColumns,t.previousIndex,t.currentIndex),this.saveTableState(),this.tableColumns.forEach((o,n)=>o.order=n),this.tableColumns=[...this.tableColumns])}onColumnHeaderResize(t,o,n){t.stopPropagation(),t.preventDefault(),this.tableColumnResize$.next();let s=this.tableElementRef(),g=(s?.nativeElement).querySelectorAll("thead tr th")[o],F=(s?.nativeElement).querySelectorAll(`tbody tr td:nth-child(${o+1})`),Me=t.clientX;if(g){this.isColumnResizing=!0,s?.nativeElement.querySelector(".forge-table-head__row")?.classList.add("forge-table-row--resizing"),g.classList.add("forge-table-cell--resizing"),F.forEach(A=>A.classList.add("forge-table-cell--resizing")),$(document.body,"mousemove").pipe(we(this.tableColumnResize$),De(A=>{n.width=g.offsetWidth+(A.clientX-Me),Me=A.clientX})).subscribe();let Oe=s?.nativeElement.querySelector("thead");Ve($(Oe,"mouseup"),$(Oe,"mouseleave")).pipe(ye(()=>requestAnimationFrame(()=>{this.isColumnResizing=!1,g=void 0,F=void 0,this.saveTableState()})),we(this.tableColumnResize$),De(A=>{this.tableColumnResize$.next(),this.tableElementRef()?.nativeElement.querySelectorAll(".forge-table-row--resizing").forEach(Fe=>Fe.classList.remove("forge-table-row--resizing")),this.tableElementRef()?.nativeElement.querySelectorAll(".forge-table-cell--resizing").forEach(Fe=>Fe.classList.remove("forge-table-cell--resizing"))})).subscribe()}}onColumnsEdit(t){t.preventDefault()}onColumnsEditPopoverSelected(t){switch(t){case"reset-column-width":this.tableColumnDefaultWidths.forEach((n,s)=>{this.tableColumns[s].width=n}),this.saveTableState();break;case"delete-table-cache":this.deleteTableState();break;default:{let n=this.tableColumns.find(s=>s.property===t.property);n&&(this.tableColumns.filter(s=>!s.hidden).length&&(n.hidden=Ue(n.hidden)?!n.hidden:!0,n.sortDirection=void 0,this.tableColumns=[...this.tableColumns]),this.saveTableState());break}}let o=this.columnsEditPopover();o.nativeElement.open=!1,o.nativeElement.anchor=""}onColumnSort(t,o){t.stopPropagation(),!(t.target.classList.contains("forge-table-head__cell-dragger")||t.target.classList.contains("forge-table-head__cell-resizer")||this.isColumnResizing||this.isBusy||this.isEditing||o.sortable===!1)&&(this.tableColumns.filter(n=>n.property!==o.property).forEach(n=>n.sortDirection=void 0),o.sortDirection===G.Ascending?o.sortDirection=G.Descending:o.sortDirection===G.Descending?o.sortDirection=void 0:o.sortDirection=G.Ascending,this.cache.filter.sort=o.sortDirection?{property:o.property,direction:o.sortDirection}:void 0,this.cache.filter.skip=0,this.cache.expandedRows.length=0,this.saveTableState(),this.getRecords())}onPaginatorChange(t){this.cache.filter.skip=t.pageIndex*t.pageSize,this.cache.filter.take=t.pageSize,this.cache.expandedRows.length=0,this.getRecords()}onExpandRow(t){this.cache.expandedRows[t]?this.cache.expandedRows[t]=void 0:this.cache.expandedRows[t]=this.cache.recordsetFormGroup.controls.recordsetFormArray.at(t).getRawValue()}getRecords(){this.isBusy||(this.isBusy=!0,this.cache.recordsetFormGroup.controls.recordsetFormArray.clear(),this.cache.expandedRows=[],this.appDataService.getPeople({sort:this.cache.filter.sort,skip:this.cache.filter.skip,take:this.cache.filter.take,filters:this.cache.filter.filters}).pipe(Je(this.destroyRef),ye(()=>this.isBusy=!1)).subscribe({next:t=>{this.cache.totalRecords=t.count,t.data.forEach(o=>{this.cache.recordsetFormGroup.controls.recordsetFormArray.push(this.buildRecordForm(o),{emitEvent:!1})})}}))}buildRecordForm(t){return new He({id:new P(t.id,{validators:[j.required]}),firstName:new P(t.firstName,{validators:[j.required]}),lastName:new P(t.lastName,{validators:[j.required]}),gender:new P(t.gender),occupation:new P(t.occupation),quote:new P(t.quote),url:new P(t.url)})}loadTableState(){this.tableColumnDefaultWidths=this.tableColumns.map(o=>o.width);let t=localStorage.getItem(this.tableStateStorageKey);if(t?.length){let o=JSON.parse(t);o.columns.forEach(n=>{let s=this.tableColumns.find(g=>g.property===n.property);s&&(s.order=n.order,s.width=n.width,s.hidden=n.hidden,o.sort?.property===s.property&&(s.sortDirection=o.sort.direction))}),this.tableColumns=[...this.tableColumns],this.cache.filter.sort=o.sort,this.cache.filter.take=o.take}}saveTableState(){localStorage.setItem(this.tableStateStorageKey,JSON.stringify({columns:this.tableColumns.map((t,o)=>({property:t.property,order:o,width:t.width,hidden:t.hidden})),sort:this.cache.filter.sort,take:this.cache.filter.take}))}deleteTableState(){localStorage.removeItem(this.tableStateStorageKey)}loadFiltersState(){let t=localStorage.getItem(this.filtersStateStorageKey);if(t?.length){this.cache.userFilters=JSON.parse(t);let o=this.cache.userFilters?.find(n=>n.isDefault);o&&(this.cache.recordsetFilterFormGroup.patchValue(o.filters),this.cache.recordsetFilterFormGroup.markAsDirty(),this.cache.filter.filters=this.cache.convertRecordsetFilterFormGroup(),this.cache.activeUserFilter=o)}}saveFiltersState(){localStorage.setItem(this.filtersStateStorageKey,JSON.stringify(this.cache.userFilters))}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=L({type:r,selectors:[["app-table-demo"]],viewQuery:function(o,n){if(o&1&&(q(n.bodyTableElementRef,Kt,5),q(n.tableElementRef,Qt,5),q(n.columnsEditPopover,Jt,5),ze(ve,5)),o&2){$e(3);let s;Ge(s=Ne())&&(n.cdkDropList=s.first)}},decls:13,vars:7,consts:[["bodyTable",""],["columnsEditPopover",""],["table",""],["elementRef",""],[1,"header"],["slot","start",1,"forge-typography--subheading4"],[1,"body"],["novalidate","","autocomplete","off",1,"body__table"],[3,"data","formArray","columnConfigurations","isEditing"],[1,"forge-table",3,"formGroup","--table-body-cell-inline-padding"],[1,"empty-state"],["inverted","true",1,"footer"],["slot","end",3,"forge-paginator-change","pageIndex","pageSize","total","disabled"],["slot","end","variant","outlined",3,"click"],["name","cancel","aria-hidden","true"],["slot","end","variant","filled",3,"click","disabled"],["name","check","aria-hidden","true"],["slot","end",1,"forge-typography--subheading1"],["variant","tonal","slot","end","aria-label","Filter records",3,"click","disabled","theme"],["name","filter_list","aria-hidden","true"],["slot","end"],["variant","tonal","slot","end","aria-label","Edit records",3,"click","disabled"],["name","edit","aria-hidden","true"],["id","table-demo--btn--edit-columns","variant","tonal","slot","end","aria-label","Edit columns",3,"click","disabled"],["name","list_alt","aria-hidden","true"],["slot","end","anchor","table-demo--btn--edit-columns","placement","right-end","animation-type","none","open","false"],[1,"column-popover",3,"forge-list-item-select"],[3,"value"],["value","reset-column-width"],["type","button"],["value","delete-table-cache"],["slot","start","aria-hidden","true",3,"name"],[1,"forge-table",3,"formGroup"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"forge-table-row","forge-table-head__row",3,"cdkDropListDropped"],[1,"forge-table-cell","forge-table-head__cell","forge-table-row__expander"],["scope","col","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",1,"forge-table-cell","forge-table-head__cell",3,"ngClass","--table-column-width"],["formArrayName","recordsetFormArray"],["scope","col","cdkDrag","","cdkDragLockAxis","x","tabindex","-1",1,"forge-table-cell","forge-table-head__cell",3,"cdkDragStarted","click","ngClass"],[1,"forge-table-head__cell-container",3,"ngClass"],[1,"forge-table-head__cell-text"],["aria-hidden","true",1,"forge-table-head__cell-sort-icon",3,"name"],["aria-hidden","true",1,"forge-table-head__cell-actions"],["variant","tonal","cdkDragHandle","","density","small",1,"forge-table-head__cell-dragger"],["external","","name","cursor_move"],["variant","tonal","cdkDragHandle","","density","small",1,"forge-table-head__cell-resizer",3,"mousedown"],["external","","name","arrow_expand_horizontal"],[1,"forge-table-row","forge-table-body__row"],[1,"forge-table-cell","forge-table-body__cell"],["list-item",""],[1,"forge-table-row","forge-table-body__row",3,"formGroup","ngClass"],[1,"forge-table-cell","forge-table-body__cell","forge-table-row__expander"],["aria-label","Toggle details",3,"click"],[3,"name"],[1,"forge-table-cell","forge-table-body__cell",3,"ngClass"],[1,"forge-table-row","forge-table-body__row","forge-table-row__expandable-content"],["appOnLoad","",1,"forge-table-cell__container",3,"ngClass"],[1,"forge-table-cell__container",3,"ngClass"],["appOnLoad","",1,"forge-table-cell__container",3,"loaded","ngClass"],[3,"appFormControlInvalid"],["type","text",3,"id","formControlName"],[1,"forge-table-row__expandable-content-cell"],[3,"data","rowIndex"],[1,"forge-table-row","forge-table-foot__row"],[1,"forge-table-cell","forge-table-foot__cell"],[1,"forge-table-cell__container"],["src","https://cdn.forge.tylertech.com/v1/images/spot-hero/general-empty-state-spot-hero.svg","alt",""]],template:function(o,n){if(o&1){let s=x();a(0,"forge-toolbar",4)(1,"h2",5),m(2,"Table demo"),l(),b(3,Yt,6,1)(4,ii,27,8),l(),a(5,"div",6)(6,"form",7,0),b(8,oi,2,7,"app-table-mobile",8)(9,Fi,12,8,"table",9),b(10,yi,4,0,"div",10),l(),a(11,"forge-toolbar",11)(12,"forge-paginator",12),h("forge-paginator-change",function(F){return u(s),f(n.onPaginatorChange(F.detail))}),l()()()}o&2&&(d(3),C(n.isEditing?3:4),d(5),C(n.appCache.layoutMode==="sm"?8:9),d(2),C(!n.isBusy&&!(n.cache.recordsetFormGroup.controls.recordsetFormArray.controls!=null&&n.cache.recordsetFormGroup.controls.recordsetFormArray.controls.length)?10:-1),d(2),p("pageIndex",n.cache.filter.skip/n.cache.filter.take)("pageSize",n.cache.filter.take)("total",n.cache.totalRecords)("disabled",n.isEditing||n.isBusy))},dependencies:[Q,K,ie,Y,X,W,Z,ee,te,Qe,St,ve,Dt,wt,ne,oe,Xe,ae,le,pe,de,se,ce,_e,ge,ue,me,et,Ye,fe,tt,at,lt,be,he,ct,st,xe,Ce,xt,vt,ft,ht,Ft],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%;background-color:var(--forge-theme-surface)}[_nghost-%COMP%]     .forge-table{--table-row-height: 48px;--table-head-cell-inline-padding: 8px;--table-body-cell-inline-padding: 8px;min-width:100%;width:max-content;position:relative}[_nghost-%COMP%]     .forge-table thead, [_nghost-%COMP%]     .forge-table tfoot{position:sticky;background-color:var(--forge-theme-surface);z-index:calc(var(--forge-z-index-surface) + 2)}[_nghost-%COMP%]     .forge-table thead{inset-block-start:0}[_nghost-%COMP%]     .forge-table tfoot{inset-block-end:0}[_nghost-%COMP%]     .forge-table-head__cell{padding-left:var(--table-head-cell-inline-padding);padding-right:var(--table-head-cell-inline-padding);min-width:calc(var(--table-column-width, 200) * 1px);max-width:calc(var(--table-column-width, 200) * 1px)}[_nghost-%COMP%]     .forge-table-head__cell:first-child, [_nghost-%COMP%]     .forge-table-head__cell:last-child{padding-left:var(--table-head-cell-inline-padding)!important;padding-right:var(--table-head-cell-inline-padding)!important}[_nghost-%COMP%]     .forge-table-head__cell:hover .forge-table-head__cell-actions{transition-delay:.5s;max-width:72px}[_nghost-%COMP%]     .forge-table-head__cell-container{position:relative}[_nghost-%COMP%]     .forge-table-head__cell-sort-icon{display:inline!important}[_nghost-%COMP%]     .forge-table-head__cell-actions{position:absolute;right:4px;margin-block:auto;overflow:hidden;display:flex;align-items:center;max-width:0;transition:max-width .25s}[_nghost-%COMP%]     .forge-table-body__cell{padding-left:var(--table-body-cell-inline-padding);padding-right:var(--table-body-cell-inline-padding)}[_nghost-%COMP%]     .forge-table-body__cell:first-child, [_nghost-%COMP%]     .forge-table-body__cell:last-child{padding-left:var(--table-body-cell-inline-padding)!important;padding-right:var(--table-body-cell-inline-padding)!important}[_nghost-%COMP%]     .forge-table-body__cell forge-text-field{width:100%;--forge-field-background: var(--forge-theme-surface)}[_nghost-%COMP%]     .forge-table-body__cell forge-text-field::part(label){display:none}[_nghost-%COMP%]     .forge-table-body__cell forge-skeleton{margin:4px 0}[_nghost-%COMP%]     .forge-table-body__cell__actions{display:flex;flex-direction:row}[_nghost-%COMP%]     .forge-table-foot__row{height:48px}[_nghost-%COMP%]     .forge-table-foot__cell{color:var(--forge-theme-text-medium, rgba(0, 0, 0, .6));font-weight:700;text-align:left;font-size:calc(var(--forge-typography-font-size, 1rem) * .75);box-sizing:border-box;padding-left:var(--table-head-cell-inline-padding);padding-right:var(--table-head-cell-inline-padding);border-top:var(--forge-border-thin) solid var(--forge-theme-outline)}[_nghost-%COMP%]     .forge-table-foot__cell:first-child, [_nghost-%COMP%]     .forge-table-foot__cell:last-child{padding-left:var(--table-head-cell-inline-padding)!important;padding-right:var(--table-head-cell-inline-padding)!important}[_nghost-%COMP%]     .forge-table-row__expander{min-width:48px;max-width:48px;--table-body-cell-inline-padding: 0;text-align:center}[_nghost-%COMP%]     .forge-table-row__expandable-content{background-color:#e8eaf6!important;border-bottom:1px solid var(--forge-theme-outline)}[_nghost-%COMP%]     .forge-table-cell--frozen-left{position:sticky;left:0;background-color:var(--forge-theme-surface);z-index:calc(var(--forge-z-index-surface) + 0);border-right:var(--forge-border-medium) solid var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-cell--frozen-right{position:sticky;right:0;background-color:var(--forge-theme-surface);z-index:calc(var(--forge-z-index-surface) + 0);border-left:var(--forge-border-medium) solid var(--forge-theme-primary)}[_nghost-%COMP%]     .forge-table-cell--resizing .forge-table-head__cell-dragger{display:none}[_nghost-%COMP%]     .forge-table-cell__image{width:48px;height:48px;border-radius:50%}  .column-popover{min-width:280px;--forge-list-padding: 0}  .column-popover forge-list-item{cursor:pointer}.header[_ngcontent-%COMP%]::part(section-start), .header[_ngcontent-%COMP%]::part(section-center), .header[_ngcontent-%COMP%]::part(section-end){column-gap:16px}.body[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr auto;overflow:hidden;height:100%}.body__table[_ngcontent-%COMP%]{overflow:auto}.footer[_ngcontent-%COMP%]::part(section-start), .footer[_ngcontent-%COMP%]::part(section-center), .footer[_ngcontent-%COMP%]::part(section-end){column-gap:16px}.cdk-drag-preview[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline);border:solid 2px #3f51b5;display:flex;padding:0 24px}.cdk-drag-preview[_ngcontent-%COMP%]   .forge-table-head__cell-actions[_ngcontent-%COMP%]{display:none}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#e8eaf6}.cdk-drag-placeholder[_ngcontent-%COMP%]   .forge-table-head__cell-container[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;align-items:center;padding:24px}.empty-state[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:256px}






/*# sourceMappingURL=table-demo.component-SAGAE6AE.css.map */`]});let i=r;return i})();export{eo as TableDemoComponent};
//# sourceMappingURL=chunk-77DQG57M.js.map
