(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[7943],{57943:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{MapViewModule:()=>Cy});var Y,E=g(86477),T=g(51046),w=g(18100),Z=g(51186),x=g(71670),se=g(25764),V=g(97621),W=g(40434),A=g(31385),U=g(32995),N=g(44480),J=g(88684),Q=g(48500),G=g(93205),k=g(28191),z=g(30801),C=g(9497),D=g(83382),F=g(20891),B=g(70425),$=g(19420),X=g(67087),q=g(4139);let ae=Y=class extends N.wq{constructor(v){super(v),this.type="none"}clone(){return new Y({type:this.type})}};(0,w._)([(0,q.J)({none:"none",stayAbove:"stay-above"})],ae.prototype,"type",void 0),ae=Y=(0,w._)([(0,F.j)("esri.ground.NavigationConstraint")],ae);var he=g(6365);let ne=class extends he.Z{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};(0,w._)([(0,C.Cb)()],ne.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"DECONFLICTOR_SHOW_GRID",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"LABELS_SHOW_BORDER",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"TEXT_SHOW_BASELINE",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"TEXT_SHOW_BORDER",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"OVERLAY_SHOW_CENTER",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"SHOW_POI",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"I3S_TREE_SHOW_TILES",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"I3S_SHOW_MODIFICATIONS",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"LINE_WIREFRAMES",void 0),(0,w._)([(0,C.Cb)()],ne.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),ne=(0,w._)([(0,F.j)("esri.views.3d.support.DebugFlags")],ne);const ue=new ne;var ie,te=g(7721);let fe=ie=class extends((0,N.eC)(Q.Z)){constructor(v){super(v),this.opacity=1,this.shading=!ue.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new V.Z;const M=R=>{R.parent&&R.parent!==this&&"remove"in R.parent&&R.parent.remove(R),R.parent=this,"elevation"!==R.type&&"base-elevation"!==R.type&&k.Z.getLogger(this.declaredClass).error(`Layer '${R.title}, id:${R.id}' of type '${R.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",R=>M(R.item)),this.layers.on("after-remove",R=>(R=>{R.parent=null})(R.item))}initialize(){this.when().catch(v=>{k.Z.getLogger(this.declaredClass).error("#load()","Failed to load ground",v)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const v=this.layers.removeAll();for(const M of v)M.destroy();this.layers.destroy()}normalizeCtorArgs(v){return v&&"resourceInfo"in v&&(this._set("resourceInfo",v.resourceInfo),delete(v={...v}).resourceInfo),v}set layers(v){this._set("layers",(0,W.Z)(v,this._get("layers")))}writeLayers(v,M,I,R){const ee=[];v&&(R={...R,layerContainerType:"ground"},v.forEach(pe=>{if("write"in pe){const Me={};(0,A.sM)(pe)().write(Me,R)&&ee.push(Me)}else R&&R.messages&&R.messages.push(new U.Z("layer:unsupported",`Layers (${pe.title}, ${pe.id}) of type '${pe.declaredClass}' cannot be persisted in the ground`,{layer:pe}))})),M.layers=ee}load(v){return this.addResolvingPromise(this._loadFromSource(v)),Promise.resolve(this)}loadAll(){return(0,G.G)(this,v=>{v(this.layers)})}queryElevation(v,M){var I=this;return(0,x.Z)(function*(){yield I.load({signal:M?.signal});const{ElevationQuery:R}=yield g.e(2755).then(g.bind(g,72755));(0,z.k_)(M);const ee=new R,pe=I.layers.filter(de).toArray();return ee.queryAll(pe,v,M)})()}createElevationSampler(v,M){var I=this;return(0,x.Z)(function*(){yield I.load({signal:M?.signal});const{ElevationQuery:R}=yield g.e(2755).then(g.bind(g,72755));(0,z.k_)(M);const ee=new R,pe=I.layers.filter(de).toArray();return ee.createSamplerAll(pe,v,M)})()}clone(){const v={opacity:this.opacity,surfaceColor:(0,J.d9)(this.surfaceColor),navigationConstraint:(0,J.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(v.loadStatus="loaded"),new ie({resourceInfo:this.resourceInfo}).set(v)}read(v,M){this.resourceInfo||this._set("resourceInfo",{data:v,context:M}),super.read(v,M)}_loadFromSource(v){const M=this.resourceInfo;return M?this._loadLayersFromJSON(M.data,M.context,v):Promise.resolve()}_loadLayersFromJSON(v,M,I){const R=M&&M.origin||"web-scene",ee=M&&M.portal||null,pe=M&&M.url||null;return Promise.all([g.e(2517),g.e(7587)]).then(g.bind(g,27587)).then(({populateOperationalLayers:Me})=>{(0,z.k_)(I);const xe=[];return v.layers&&Array.isArray(v.layers)&&xe.push(Me(this.layers,v.layers,{context:{origin:R,url:pe,portal:ee,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"})),(0,z.as)(xe)}).then(()=>{})}};function de(v){return"elevation"===v.type||function _e(v){return v&&"createElevationSampler"in v}(v)}(0,w._)([(0,C.Cb)({json:{read:!1}})],fe.prototype,"layers",null),(0,w._)([(0,B.c)("layers")],fe.prototype,"writeLayers",null),(0,w._)([(0,C.Cb)({readOnly:!0})],fe.prototype,"resourceInfo",void 0),(0,w._)([(0,C.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:D.z8,read:{reader:te.b,source:"transparency"},write:{writer:(v,M)=>{M.transparency=(0,te.a)(v)},target:"transparency"}}})],fe.prototype,"opacity",void 0),(0,w._)([(0,C.Cb)({type:Boolean,nonNullable:!0,json:{read:!1}})],fe.prototype,"shading",void 0),(0,w._)([(0,C.Cb)({type:se.Z,json:{type:[D.z8],write:(v,M)=>{M.surfaceColor=v.toJSON().slice(0,3)}}})],fe.prototype,"surfaceColor",void 0),(0,w._)([(0,C.Cb)({type:ae,json:{write:!0}})],fe.prototype,"navigationConstraint",void 0),fe=ie=(0,w._)([(0,F.j)("esri.Ground")],fe);const Oe=fe;var re=g(47384),le=g(95442),ce=g(53661),ve=g(36734),Te=g(63719);function ge(v){return!(!v?.loaded||!(0,Te.S1)(v)?.operations?.supportsEditing||"editingEnabled"in v&&!(0,Te.ln)(v))}var Ae=g(68327),Se=(g(55050),g(91118));const me=k.Z.getLogger("esri.support.basemapUtils");var ct=g(48604);const _t={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var qt=g(38270),rs=g(88801);let ss=class extends((0,rs.Q)((0,qt.K)(le.Z.EventedMixin(he.Z)))){constructor(v){super(v),this.allLayers=new re.Z({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:M=>"layers"in M?M.layers:null}),this.allTables=(0,ct.a)(this),this.basemap=null,this.editableLayers=new re.Z({getCollections:()=>[this.allLayers],itemFilterFunction:ge}),this.ground=new Oe,this._basemapCache={}}destroy(){this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.ground?.destroy(),this.basemap?.destroy(),function we(v){for(const M in v){const I=v[M];!1===I?.destroyed&&I.destroy(),delete v[M]}}(this._basemapCache),this._basemapCache=null}castBasemap(v){return function $e(v,M){let I;if("string"==typeof v){if(!(v in Se.s)){const R=Object.entries(Se.s).filter(([ee,pe])=>Ae.default.apiKey&&!pe.classic||!Ae.default.apiKey&&pe.classic&&!pe.deprecated).map(([ee])=>`"${ee}"`).join(", ");return me.warn(`Unable to find basemap definition for: ${v}. Try one of these: ${R}`),null}M&&(I=M[v]),I||(I=Z.default.fromId(v),M&&(M[v]=I))}else I=(0,D.se)(Z.default,v);return I?.destroyed&&(me.warn("The provided basemap is already destroyed",{basemap:I}),I=null),I}(v,this._basemapCache)}castGround(v){const M=function Rt(v){let M=null;return"string"==typeof v?v in _t?M=new Oe({resourceInfo:{data:{layers:[_t[v]]}}}):k.Z.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${v}. Try "world-elevation"`):M=(0,D.se)(Oe,v),M}(v);return(0,ce.Wi)(M)?this._get("ground"):M}findLayerById(v){return this.allLayers.find(M=>M.id===v)}findTableById(v){return this.allTables.find(M=>M.id===v)}};(0,w._)([(0,C.Cb)({readOnly:!0,dependsOn:[]})],ss.prototype,"allLayers",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],ss.prototype,"allTables",void 0),(0,w._)([(0,C.Cb)({type:Z.default})],ss.prototype,"basemap",void 0),(0,w._)([(0,ve.p)("basemap")],ss.prototype,"castBasemap",null),(0,w._)([(0,C.Cb)({readOnly:!0})],ss.prototype,"editableLayers",void 0),(0,w._)([(0,C.Cb)({type:Oe,nonNullable:!0})],ss.prototype,"ground",void 0),(0,w._)([(0,ve.p)("ground")],ss.prototype,"castGround",null),ss=(0,w._)([(0,F.j)("esri.Map")],ss);const vs=ss;var Wt=g(26763),as=g(50231),ys=g(91800),bt=g(7521),Ts=g(55798),nt=g(23476),mt=g(28502),Tt=g(10465),It=g(35787),Zt=g(21789),Kt=g(53492),Vt=g(51015),Nt=g(93113),ls=g(40070);const ts={widthBreakpoint:{getValue(v){const M=v.viewSize[0],I=v.breakpoints,R=this.values;return M<=I.xsmall?R.xsmall:M<=I.small?R.small:M<=I.medium?R.medium:M<=I.large?R.large:R.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(v){const M=v.viewSize[1],I=v.breakpoints,R=this.values;return M<=I.xsmall?R.xsmall:M<=I.small?R.small:M<=I.medium?R.medium:M<=I.large?R.large:R.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(v){const M=v.viewSize,ee=this.values;return M[1]>=M[0]?ee.portrait:ee.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},ms={xsmall:544,small:768,medium:992,large:1200};function pt(v,M){return M?ts[v].valueToClassName[M].split(" "):[]}const Pt=v=>{let M=class extends v{constructor(...I){super(...I),this._breakpointsHandles=new ls.Z,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=ms}initialize(){this._breakpointsHandles.add((0,bt.YP)(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),bt.nn))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=(0,ce.SC)(this._breakpointsHandles))}set breakpoints(I){if(I===this._get("breakpoints"))return;const R=function Os(v){return v&&v.xsmall<v.small&&v.small<v.medium&&v.medium<v.large}(I);if(!R){const ee=JSON.stringify(ms,null,2);console.warn("provided breakpoints are not valid, using defaults:"+ee)}I=R?I:ms,this._set("breakpoints",{...I})}_updateClassNames(){if(!this.container)return;const I=Nt.Z.acquire(),R=Nt.Z.acquire();let ee,pe=!1;for(ee in ts){const Me=this[ee],xe=ts[ee].getValue({viewSize:this.size,breakpoints:this.breakpoints});Me!==xe&&(pe=!0,this[ee]=xe,pt(ee,Me).forEach(ze=>R.push(ze)),pt(ee,xe).forEach(ze=>I.push(ze)))}pe&&(this._applyClassNameChanges(I,R),Nt.Z.release(I),Nt.Z.release(R))}_applyClassNameChanges(I,R){const ee=this.container;ee&&(R.forEach(pe=>ee.classList.remove(pe)),I.forEach(pe=>ee.classList.add(pe)))}_removeActiveClassNames(){const I=this.container;if(!I)return;let R;for(R in ts)pt(R,this[R]).forEach(ee=>I.classList.remove(ee))}};return(0,w._)([(0,C.Cb)()],M.prototype,"breakpoints",null),(0,w._)([(0,C.Cb)()],M.prototype,"orientation",void 0),(0,w._)([(0,C.Cb)()],M.prototype,"widthBreakpoint",void 0),(0,w._)([(0,C.Cb)()],M.prototype,"heightBreakpoint",void 0),M=(0,w._)([(0,F.j)("esri.views.BreakpointsOwner")],M),M};var jt=g(15079),us=g(91409),et=g(67353),Bt=(g(29969),g(47508));let Ht=class extends he.Z{constructor(){super(...arguments),this.items=new V.Z,this._watchUpdatingTracking=new et.t,this._callbacks=new Map,this._projector=(0,Bt.E)(),this._hiddenProjector=(0,Bt.E)()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const v=document.createElement("div");v.className="esri-overlay-surface",this._set("surface",v),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),v.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,M=>{for(const I of M.added){const R=()=>I.render();this._callbacks.set(I,R),this._projector.append(this.surface,R)}for(const I of M.removed){const R=this._projector.detach(this._callbacks.get(I));this.surface.removeChild(R.domNode),this._callbacks.delete(I)}})}addItem(v){this.items.add(v)}removeItem(v){this.items.remove(v)}destroy(){this.items.removeAll(),this._callbacks.forEach(v=>this._projector.detach(v)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(v){const M=this._hiddenSurface,I=this._hiddenProjector;let R;const ee=()=>(R=v.render(),R);I.append(M,ee),I.renderNow();const pe={left:0,top:0,right:0,bottom:0};if(R&&R.domNode){const Me=R.domNode.getBoundingClientRect();pe.left=Me.left,pe.top=Me.top,pe.right=Me.right,pe.bottom=Me.bottom}for(I.detach(ee);M.firstChild;)M.removeChild(M.firstChild);return pe}overlaps(v,M){const I=this.computeBoundingRect(v),R=this.computeBoundingRect(M);return Math.max(I.left,R.left)<=Math.min(I.right,R.right)&&Math.max(I.top,R.top)<=Math.min(I.bottom,R.bottom)}get hasVisibleItems(){return this.items.some(v=>v.visible)}prepare(){var v=this;return(0,x.Z)(function*(){yield document.fonts.load(v._fontString()).catch(()=>{})})()}renderCanvas(v){if(!this.items.some(I=>I.visible))return;const M=v.getContext("2d");M.save(),M.font=this._fontString(),this.items.forEach(I=>{M.save(),I.renderCanvas(M),M.restore()}),M.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};(0,w._)([(0,C.Cb)({readOnly:!0})],Ht.prototype,"surface",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ht.prototype,"items",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ht.prototype,"needsRender",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ht.prototype,"_watchUpdatingTracking",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ht.prototype,"updating",null),Ht=(0,w._)([(0,F.j)("esri.views.overlay.ViewOverlay")],Ht);const cs=Ht;g(25288);var Us=g(83627),mr=g(60756),fs=g(85698),Le=g(84625),We=(g(59257),g(93142)),ke=g(3758),Et=g(82769),Ut=g(39634);const hr=["B","kB","MB","GB","TB"];var qr=g(25634),lt=g(35981),gt=g(84836),it=g(21230),Dt=g(34674),kt=g(77238);const ws=k.Z.getLogger("esri.widgets.Feature.support.featureUtils"),gs=/href=(""|'')/gi,Ds=/(\{([^\{\r\n]+)\})/g,Vs=/\'/g,ks=/^\s*expression\//i,Qs=/(\n)/gi,_r=/[\u00A0-\u9999<>\&]/gim,tr=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,en=/^(?:mailto:|tel:)/,js="relationships/",zr=(0,gt.Ze)("short-date-short-time");function Dr(v){if(!(0,ce.Wi)(v))return v.get("sourceLayer")||v.get("layer")}function Cn(v,M){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,x.Z)(function*(v,M){return"function"==typeof v?v.call(null,M):v})).apply(this,arguments)}function Br(v=""){if(v)return!en.test(v.trim().toLowerCase())}function tn(v){return!!v&&ks.test(v)}function yt(v,M){const I=function Nr(v,M){if(!tn(M)||!v)return null;const I=M.replace(ks,"").toLowerCase();let R=null;return v.some(ee=>ee.name.toLowerCase()===I&&(R=ee,!0)),R}(M,v?.fieldName);return I?I.title||null:v?v.label||v.fieldName:null}function Fs(v,M){const I=yr(M,v);return I?I.name:v}function yr(v,M){return v&&"function"==typeof v.getField&&M?v.getField(M)??null:null}function kr(v){return`${v}`.trim()}function rn({attributes:v,globalAttributes:M,layer:I,text:R,expressionAttributes:ee,fieldInfoMap:pe}){return R?Ze({formattedAttributes:M,template:xt(R,{...M,...ee,...v},I),fieldInfoMap:pe}):""}function Ze({formattedAttributes:v,template:M,fieldInfoMap:I}){return kr(function ds(v){return v.replace(gs,"")}((0,ke.gx)((0,ke.gx)(M,R=>function Xt(v,M){const I=M.get(v.toLowerCase());return`{${I&&I.fieldName||v}}`}(R,I)),v)))}function Ot(v,M){return v.replace(Ds,(I,R,ee)=>{const pe=yr(M,ee);return pe?`{${pe.name}}`:R})}function xt(v,M,I){const R=Ot(v,I);return R&&R.replace(tr,(ee,pe,Me)=>function vt(v,M,I){const R=(M=kr(M))&&"{"!==M[0];return(0,ke.gx)(v,function at(v,M=!1){const I={...v};return Object.keys(I).forEach(R=>function Ye(v,M,I=!1){const R=M[v];if("string"==typeof R){const ee="%27",pe=(I?encodeURIComponent(R):R).replace(Vs,ee);M[v]=pe}}(R,I,M)),I}(I,R||!1))}(ee,pe||Me,M))}function Yt(v){return!!v?.layer}function Ls(v,M){if(!v||!v.length||!M)return;const I=M.toLowerCase();let R;return v.some(ee=>!(!ee.fieldName||ee.fieldName.toLowerCase()!==I||(R=ee,0))),R}function Gr(v){const M=[];if(!v)return M;const{fieldInfos:I,content:R}=v;return I&&M.push(...I),R&&Array.isArray(R)&&R.forEach(ee=>{if("fields"===ee.type){const pe=ee&&ee.fieldInfos;pe&&M.push(...pe)}}),M}function ei(v){return v.replace(_r,M=>`&#${M.charCodeAt(0)};`)}function An(v){return"string"==typeof v?v.replace(Qs,'<br class="esri-text-new-line" />'):v}function nn(v){const{value:M,fieldName:I,fieldInfos:R,fieldInfoMap:ee,layer:pe,graphic:Me}=v;if(null==M)return"";const xe=function Ir({fieldName:v,value:M,graphic:I,layer:R}){if(Jn(v)||!R||"function"!=typeof R.getFieldDomain)return null;const ee=I&&R.getFieldDomain(v,{feature:I});return ee&&"coded-value"===ee.type?ee.getName(M):null}({fieldName:I,value:M,graphic:Me,layer:pe});if(xe)return xe;const ze=function qs({fieldName:v,graphic:M,layer:I}){if(Jn(v)||!I||"function"!=typeof I.getFeatureType)return null;const{typeIdField:R}=I;if(!R||v!==R)return null;const ee=I.getFeatureType(M);return ee?ee.name:null}({fieldName:I,graphic:Me,layer:pe});if(ze)return ze;if(ee.get(I.toLowerCase()))return function Ss(v,M){const I=M.fieldInfos,R=M.fieldName,ee=Ls(I,R)?.clone(),pe=M.preventPlacesFormatting,Me=M.layer,xe=yr(Me,R);if(ee&&"date"===xe?.type){const st=ee.format||new Dt.Z;st.dateFormat=st.dateFormat||"short-date-short-time",st.dateTimeFormatOptions=!Yt(Me)&&function Qt(v){return"feature"===v?.type}(Me)&&Me.datesInUnknownTimezone||Yt(Me)&&function ns(v){return"map-image"===v?.type}(Me.layer)&&Me.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,ee.format=st}const ze=ee&&ee.format;return"string"==typeof v&&(0,it.Ec)(R)&&ze?ze.formatRasterPixelValue(v):"string"==typeof(v=function $t(v,M){if("string"==typeof v&&M&&null==M.dateFormat&&(null!=M.places||null!=M.digitSeparator)){const I=Number(v);if(!isNaN(I))return I}return v}(v,ze))||null==v||null==ze?An(v):pe?(0,Ut.uf)(v,{...(0,Ut.sh)(ze),minimumFractionDigits:0,maximumFractionDigits:20}):ze.format(v)}(M,{fieldInfos:R||Array.from(ee.values()),fieldName:I,layer:pe});const st=pe&&pe.fieldsIndex;return st&&st.isDateField(I)?(0,gt.p6)(M,zr):An(M)}function ta({fieldInfos:v,attributes:M,layer:I,graphic:R,fieldInfoMap:ee,relatedInfos:pe}){const Me={};return pe?.forEach(xe=>function Il({attributes:v,relatedInfo:M,fieldInfoMap:I,fieldInfos:R,layer:ee}){v&&M&&(M.relatedFeatures&&M.relatedFeatures&&M.relatedFeatures.forEach(pe=>Ia({attributes:v,graphic:pe,relatedInfo:M,fieldInfoMap:I,fieldInfos:R,layer:ee})),M.relatedStatsFeatures&&M.relatedStatsFeatures&&M.relatedStatsFeatures.forEach(pe=>Ia({attributes:v,graphic:pe,relatedInfo:M,fieldInfoMap:I,fieldInfos:R,layer:ee})))}({attributes:Me,relatedInfo:xe,fieldInfoMap:ee,fieldInfos:v,layer:I})),M&&Object.keys(M).forEach(xe=>{Me[xe]=nn({fieldName:xe,fieldInfos:v,fieldInfoMap:ee,layer:I,value:M[xe],graphic:R})}),Me}function yn(v,M){return ti.apply(this,arguments)}function ti(){return(ti=(0,x.Z)(function*(v,M){const{layer:I,graphic:R,outFields:ee,objectIds:pe,returnGeometry:Me,spatialReference:xe}=v,ze=pe[0];if("number"!=typeof ze&&"string"!=typeof ze)return ws.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:I,graphic:R,objectId:ze,requiredFields:ee}),null;if(!(0,Te.S1)(I)?.operations?.supportsQuery)return ws.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:I,graphic:R,requiredFields:ee,returnGeometry:Me}),null;const st=I.createQuery();return st.objectIds=pe,st.outFields=ee?.length?ee:[I.objectIdField],st.returnGeometry=!!Me,st.returnZ=!!Me,st.returnM=!!Me,st.outSpatialReference=xe,(yield I.queryFeatures(st,M)).features[0]})).apply(this,arguments)}function kn(){return(kn=(0,x.Z)(function*(v){if(!v.expressionInfos?.length)return!1;const M=yield(0,kt.LC)(),{arcadeUtils:{hasGeometryFunctions:I}}=M;return I(v)})).apply(this,arguments)}function Wn(){return Wn=(0,x.Z)(function*({graphic:v,popupTemplate:M,layer:I,spatialReference:R},ee){if(!I||!M||("function"==typeof I.load&&(yield I.load(ee)),!v.attributes))return;const pe=v.attributes[I.objectIdField];if(null==pe)return;const Me=[pe],xe=yield M.getRequiredFields(I.fieldsIndex),ze=(0,it.R9)(xe,v),st=ze?[]:xe,ut=M.returnGeometry||(yield function Sl(v){return kn.apply(this,arguments)}(M));if(ze&&!ut)return;const Ct=yield yn({layer:I,graphic:v,outFields:st,objectIds:Me,returnGeometry:ut,spatialReference:R},ee);Ct&&(Ct.geometry&&(v.geometry=Ct.geometry),Ct.attributes&&(v.attributes={...v.attributes,...Ct.attributes}))}),Wn.apply(this,arguments)}function Jn(v=""){return!!v&&v.includes(js)}function Ia({attributes:v,graphic:M,relatedInfo:I,fieldInfos:R,fieldInfoMap:ee,layer:pe}){v&&M&&I&&Object.keys(M.attributes).forEach(Me=>{const xe=function Ta(v){return v?`${js}${v.layerId}/${v.fieldName}`:""}({layerId:I.relation.id.toString(),fieldName:Me});v[xe]=nn({fieldName:xe,fieldInfos:R,fieldInfoMap:ee,layer:pe,value:M.attributes[Me],graphic:M})})}const vr=v=>{if(!v)return!1;const M=v.toUpperCase();return M.includes("CURRENT_TIMESTAMP")||M.includes("CURRENT_DATE")||M.includes("CURRENT_TIME")},ai=({layer:v,method:M,query:I,definitionExpression:R})=>{if(!v.capabilities?.query?.supportsCacheHint||"attachments"===M)return;const ee=(0,ce.pC)(I.where)?I.where:null,pe=(0,ce.pC)(I.geometry)?I.geometry:null;vr(R)||vr(ee)||"extent"===pe?.type||"tile"===I.resultType||(I.cacheHint=!0)};function sa(v,M,I){return v.find(R=>R!==M&&"feature"===R.type&&R.url===M.url&&R.layerId===I.relatedTableId)}const wa={editing:!1,operations:{add:!0,update:!0,delete:!0}},Da=V.Z.ofType(qr.Z);let sn=class extends he.Z{constructor(v){super(v),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...wa},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new Da,this.fileInfos=new V.Z,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles((0,bt.YP)(()=>this.graphic,()=>this._graphicChanged(),bt.nn))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(v){return{...wa,...v}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:v}=this;if(!v)return!1;const M=v.layer||v.sourceLayer;return M?.loaded&&"capabilities"in M&&M.capabilities&&"operations"in M.capabilities&&"supportsResizeAttachments"in M.capabilities.operations&&M.capabilities.operations.supportsResizeAttachments||!1}getAttachments(){var v=this;return(0,x.Z)(function*(){const{_attachmentLayer:M,attachmentInfos:I}=v;if(!M||"function"!=typeof M.queryAttachments)throw new U.Z("invalid-layer","getAttachments(): A valid layer is required.");const R=v._getObjectId(),ee=new lt.Z({objectIds:[R],returnMetadata:!0}),pe=[],Me=M.queryAttachments(ee).then(ze=>ze[R]||pe).catch(()=>pe);v._getAttachmentsPromise=Me,v.notifyChange("state");const xe=yield Me;return I.removeAll(),xe.length&&I.addMany(xe),v._getAttachmentsPromise=null,v.notifyChange("state"),xe})()}addAttachment(v,M=this.graphic){var I=this;return(0,x.Z)(function*(){const{_attachmentLayer:R,attachmentInfos:ee,abilities:pe}=I;if(!M)throw new U.Z("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:M});if(!v)throw new U.Z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:v});if(!pe.operations?.add)throw new U.Z("invalid-abilities","addAttachment(): add abilities are required.");if(!R||"function"!=typeof R.addAttachment)throw new U.Z("invalid-layer","addAttachment(): A valid layer is required.");const Me=R.addAttachment(M,v).then(ze=>I._queryAttachment(ze.objectId,M)),xe=yield Me;return ee.add(xe),xe})()}deleteAttachment(v){var M=this;return(0,x.Z)(function*(){const{_attachmentLayer:I,attachmentInfos:R,graphic:ee,abilities:pe}=M;if(!v)throw new U.Z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:v});if(!pe.operations?.delete)throw new U.Z("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!I||"function"!=typeof I.deleteAttachments)throw new U.Z("invalid-layer","deleteAttachment(): A valid layer is required.");if(!ee)throw new U.Z("invalid-graphic","deleteAttachment(): A graphic is required.");const Me=I.deleteAttachments(ee,[v.id]).then(()=>v),xe=yield Me;return R.remove(xe),xe})()}updateAttachment(v,M=this.activeAttachmentInfo){var I=this;return(0,x.Z)(function*(){const{_attachmentLayer:R,attachmentInfos:ee,graphic:pe,abilities:Me}=I;if(!v)throw new U.Z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:v});if(!M)throw new U.Z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:M});if(!Me.operations?.update)throw new U.Z("invalid-abilities","updateAttachment(): Update abilities are required.");const xe=ee.findIndex(ut=>ut===M);if(!R||"function"!=typeof R.updateAttachment)throw new U.Z("invalid-layer","updateAttachment(): A valid layer is required.");if(!pe)throw new U.Z("invalid-graphic","updateAttachment(): A graphic is required.");const ze=R.updateAttachment(pe,M.id,v).then(ut=>I._queryAttachment(ut.objectId)),st=yield ze;return ee.splice(xe,1,st),st})()}commitFiles(){var v=this;return(0,x.Z)(function*(){return yield Promise.all(v.fileInfos.items.map(M=>v.addAttachment(M.form))),v.fileInfos.removeAll(),v.getAttachments()})()}addFile(v,M){if(!v||!M)return null;const I={file:v,form:M};return this.fileInfos.add(I),I}updateFile(v,M,I=this.activeFileInfo){if(!v||!M||!I)return null;const R=this.fileInfos.findIndex(ee=>I===ee);return R>-1&&this.fileInfos.splice(R,1,{file:v,form:M}),this.fileInfos.items[R]}deleteFile(v){const M=this.fileInfos.find(I=>I.file===v);return M?(this.fileInfos.remove(M),M):null}_queryAttachment(v,M){var I=this;return(0,x.Z)(function*(){const{_attachmentLayer:R}=I;if(!v||!R?.queryAttachments)throw new U.Z("invalid-attachment-id","Could not query attachment.");const ee=I._getObjectId(M),pe=new lt.Z({objectIds:[ee],attachmentsWhere:`AttachmentId=${v}`,returnMetadata:!0});return R.queryAttachments(pe).then(Me=>Me[ee][0])})()}_getObjectId(v=this.graphic){return v?.getObjectId()??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:v}=this,M=Dr(v);this._attachmentLayer=M?"scene"===M.type&&(0,ce.pC)(M.associatedLayer)?M.associatedLayer:M:null}};(0,w._)([(0,C.Cb)()],sn.prototype,"abilities",void 0),(0,w._)([(0,ve.p)("abilities")],sn.prototype,"castAbilities",null),(0,w._)([(0,C.Cb)()],sn.prototype,"activeAttachmentInfo",void 0),(0,w._)([(0,C.Cb)()],sn.prototype,"activeFileInfo",void 0),(0,w._)([(0,C.Cb)({readOnly:!0,type:Da})],sn.prototype,"attachmentInfos",void 0),(0,w._)([(0,C.Cb)()],sn.prototype,"fileInfos",void 0),(0,w._)([(0,C.Cb)({type:Wt.Z})],sn.prototype,"graphic",void 0),(0,w._)([(0,C.Cb)()],sn.prototype,"mode",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],sn.prototype,"state",null),(0,w._)([(0,C.Cb)()],sn.prototype,"filesEnabled",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],sn.prototype,"supportsResizeAttachments",null),sn=(0,w._)([(0,F.j)("esri.widgets.Attachments.AttachmentsViewModel")],sn);const bo=sn;var Aa=g(74792);function xa(v){const M=v.toLowerCase();return"image/bmp"===M||"image/emf"===M||"image/exif"===M||"image/gif"===M||"image/x-icon"===M||"image/jpeg"===M||"image/png"===M||"image/tiff"===M||"image/x-wmf"===M}var Ar=g(89400),Hs=g(10432),Mt=g(22609);const ra={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},gr="esri-attachments",li="esri-button",Cs={base:gr,loaderContainer:`${gr}__loader-container`,loader:`${gr}__loader`,fadeIn:`${gr}--fade-in`,container:`${gr}__container`,containerList:`${gr}__container--list`,containerPreview:`${gr}__container--preview`,actions:`${gr}__actions`,deleteButton:`${gr}__delete-button`,addAttachmentButton:`${gr}__add-attachment-button`,errorMessage:`${gr}__error-message`,items:`${gr}__items`,item:`${gr}__item`,itemButton:`${gr}__item-button`,itemMask:`${gr}__item-mask`,itemMaskIcon:`${gr}__item-mask--icon`,itemImage:`${gr}__image`,itemImageResizable:`${gr}__image--resizable`,itemLabel:`${gr}__label`,itemFilename:`${gr}__filename`,itemChevronIcon:`${gr}__item-chevron-icon`,itemLink:`${gr}__item-link`,itemLinkOverlay:`${gr}__item-link-overlay`,itemLinkOverlayIcon:`${gr}__item-link-overlay-icon`,itemEditIcon:`${gr}__item-edit-icon`,itemAddIcon:`${gr}__item-add-icon`,itemAddButton:`${gr}__item-add-button`,formNode:`${gr}__form-node`,fileFieldset:`${gr}__file-fieldset`,fileLabel:`${gr}__file-label`,fileName:`${gr}__file-name`,fileInput:`${gr}__file-input`,metadata:`${gr}__metadata`,metadataFieldset:`${gr}__metadata-fieldset`,progressBar:`${gr}__progress-bar`,esriWidget:"esri-widget",esriButton:li,buttonDisabled:`${li}--disabled`,esriButtonSecondary:`${li}--secondary`,esriButtonTertiary:`${li}--tertiary`,esriButtonThird:`${li}--third`,esriButtonSmall:`${li}--small`,esriButtonHalf:`${li}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},gn=window.CSS;let Qr=class extends fs.Z{constructor(v,M){super(v,M),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...ra},this._supportsImageOrientation=gn&&gn.supports&&gn.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new bo),this.addHandles([(0,bt.on)(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),(0,bt.on)(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),(0,bt.YP)(()=>this.viewModel?.mode,()=>this._modeChanged(),bt.nn)])}loadDependencies(){return Promise.all([g.e(9024).then(g.bind(g,89024))])}get abilities(){return this.viewModel.abilities}set abilities(v){this.viewModel.abilities=v}get effectiveDisplayType(){const{displayType:v}=this;return v&&"auto"!==v?v:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(v){this.viewModel.graphic=v}get label(){return this.messages?.widgetLabel??""}set label(v){this._overrideIfSome("label",v)}castVisibleElements(v){return{...ra,...v}}addAttachment(){const{_addAttachmentForm:v,viewModel:M}=this;return this._set("submitting",!0),this._set("error",null),M.addAttachment(v).then(I=>(this._set("submitting",!1),this._set("error",null),M.mode="view",I)).catch(I=>{throw this._set("submitting",!1),this._set("error",new U.Z("attachments:add-attachment",this.messages.addErrorMessage,I)),I})}deleteAttachment(v){const{viewModel:M}=this;return this._set("submitting",!0),this._set("error",null),M.deleteAttachment(v).then(I=>(this._set("submitting",!1),this._set("error",null),M.mode="view",I)).catch(I=>{throw this._set("submitting",!1),this._set("error",new U.Z("attachments:delete-attachment",this.messages.deleteErrorMessage,I)),I})}updateAttachment(){const{viewModel:v}=this,{_updateAttachmentForm:M}=this;return this._set("submitting",!0),this._set("error",null),v.updateAttachment(M).then(I=>(this._set("submitting",!1),this._set("error",null),v.mode="view",I)).catch(I=>{throw this._set("submitting",!1),this._set("error",new U.Z("attachments:update-attachment",this.messages.updateErrorMessage,I)),I})}addFile(){const v=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",v}updateFile(){const{viewModel:v}=this,M=v.updateFile(this.selectedFile,this._updateAttachmentForm,v.activeFileInfo);return v.mode="view",M}deleteFile(v){const M=this.viewModel.deleteFile(v||this.viewModel.activeFileInfo?.file);return this.viewModel.mode="view",M}render(){const{submitting:v,viewModel:M}=this,{state:I}=M;return(0,Mt.u)("div",{class:this.classes(Cs.base,Cs.esriWidget)},v?this.renderProgressBar():null,"loading"===I?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:v,visibleElements:M}=this;return v&&M.errorMessage?(0,Mt.u)("div",{key:"error-message",class:Cs.errorMessage},v.message):null}renderAttachments(){const{activeFileInfo:v,mode:M,activeAttachmentInfo:I}=this.viewModel;return"add"===M?this.renderAddForm():"edit"===M?this.renderDetailsForm(I||v):this.renderAttachmentContainer()}renderLoading(){return(0,Mt.u)("div",{class:Cs.loaderContainer,key:"loader"},(0,Mt.u)("div",{class:Cs.loader}))}renderProgressBar(){return this.visibleElements.progressBar?(0,Mt.u)("div",{class:Cs.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:v,selectedFile:M}=this,I=v||!M,R=this.visibleElements.cancelAddButton?(0,Mt.u)("button",{type:"button",bind:this,disabled:v,onclick:this._cancelForm,class:this.classes(Cs.esriButton,Cs.esriButtonTertiary,Cs.esriButtonSmall,Cs.esriButtonHalf,v&&Cs.buttonDisabled)},this.messages.cancel):null,ee=this.visibleElements.addSubmitButton?(0,Mt.u)("button",{type:"submit",disabled:I,class:this.classes(Cs.esriButton,Cs.esriButtonSecondary,Cs.esriButtonSmall,Cs.esriButtonHalf,{[Cs.buttonDisabled]:I})},this.messages.add):null,pe=M?(0,Mt.u)("span",{key:"file-name",class:Cs.fileName},M.name):null,Me=(0,Mt.u)("form",{bind:this,afterCreate:Ar.Yo,afterRemoved:Ar.pV,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},(0,Mt.u)("fieldset",{class:Cs.fileFieldset},pe,(0,Mt.u)("label",{class:this.classes(Cs.fileLabel,Cs.esriButton,Cs.esriButtonSecondary)},M?this.messages.changeFile:this.messages.selectFile,(0,Mt.u)("input",{class:Cs.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),ee,R);return(0,Mt.u)("div",{key:"add-form-container",class:Cs.formNode},Me)}renderDetailsForm(v){const{visibleElements:M,viewModel:I,selectedFile:R,submitting:ee}=this,{abilities:pe}=I,Me=ee||!R;let xe,ze,st,ut;R?(xe=R.type,ze=R.name,st=R.size):v&&"file"in v?(xe=v.file.type,ze=v.file.name,st=v.file.size):v&&"contentType"in v&&(xe=v.contentType,ze=v.name,st=v.size,ut=v.url);const Ct=pe.editing&&pe.operations?.delete&&M.deleteButton?(0,Mt.u)("button",{key:"delete-button",type:"button",disabled:ee,bind:this,onclick:Ys=>this._submitDeleteAttachment(Ys,v),class:this.classes(Cs.esriButton,Cs.esriButtonSmall,Cs.esriButtonTertiary,Cs.deleteButton,{[Cs.buttonDisabled]:ee})},this.messages.delete):void 0,Gt=pe.editing&&pe.operations?.update&&M.updateButton?(0,Mt.u)("button",{disabled:Me,key:"update-button",type:"submit",class:this.classes(Cs.esriButton,Cs.esriButtonSmall,Cs.esriButtonThird,{[Cs.buttonDisabled]:Me})},this.messages.update):void 0,Ft=this.visibleElements.cancelUpdateButton?(0,Mt.u)("button",{disabled:ee,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Cs.esriButton,Cs.esriButtonSmall,Cs.esriButtonTertiary,Cs.esriButtonThird,{[Cs.buttonDisabled]:ee})},this.messages.cancel):void 0,ps=pe.editing&&pe.operations?.update?(0,Mt.u)("fieldset",{key:"file",class:Cs.fileFieldset},(0,Mt.u)("span",{key:"file-name",class:Cs.fileName},ze),(0,Mt.u)("label",{class:this.classes(Cs.fileLabel,Cs.esriButton,Cs.esriButtonSecondary)},this.messages.changeFile,(0,Mt.u)("input",{class:Cs.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,Ps=(0,Mt.u)("fieldset",{key:"size",class:Cs.metadataFieldset},(0,Mt.u)("label",null,function xs(v,M){let I=0===M?0:Math.floor(Math.log(M)/Math.log(Le.Y8.KILOBYTES));I=(0,We.uZ)(I,0,hr.length-1);const R=(0,Ut.uf)(M/Le.Y8.KILOBYTES**I,{maximumFractionDigits:2});return(0,ke.gx)(v.units.bytes[hr[I]],{fileSize:R})}(this.messagesUnits,st??0))),Is=(0,Mt.u)("fieldset",{key:"content-type",class:Cs.metadataFieldset},(0,Mt.u)("label",null,xe)),zs=(0,ce.pC)(ut)?(0,Mt.u)("a",{class:Cs.itemLink,href:ut,rel:"noreferrer",target:"_blank"},this.renderImageMask(v,400),(0,Mt.u)("div",{class:Cs.itemLinkOverlay},(0,Mt.u)("span",{class:Cs.itemLinkOverlayIcon},(0,Mt.u)("calcite-icon",{icon:"launch"})))):this.renderImageMask(v,400),fr=(0,Mt.u)("form",{bind:this,afterCreate:Ar.Yo,afterRemoved:Ar.pV,"data-node-ref":"_updateAttachmentForm",onsubmit:Ys=>this._submitUpdateAttachment(Ys,v)},(0,Mt.u)("div",{class:Cs.metadata},Ps,Is),ps,(0,Mt.u)("div",{class:Cs.actions},Ct,Ft,Gt));return(0,Mt.u)("div",{key:"edit-form-container",class:Cs.formNode},zs,fr)}renderImageMask(v,M){return v?"file"in v?this.renderGenericImageMask(v.file.name,v.file.type):this.renderImageMaskForAttachment(v,M):null}renderGenericImageMask(v,M){const{supportsResizeAttachments:I}=this.viewModel,R=function xn(v){const M=(0,Aa.V)("esri/themes/base/images/files/");return v?"text/plain"===v?`${M}text-32.svg`:"application/pdf"===v?`${M}pdf-32.svg`:"text/csv"===v?`${M}csv-32.svg`:"application/gpx+xml"===v?`${M}gpx-32.svg`:"application/x-dwf"===v?`${M}cad-32.svg`:"application/postscript"===v||"application/json"===v||"text/xml"===v||"model/vrml"===v?`${M}code-32.svg`:"application/x-zip-compressed"===v||"application/x-7z-compressed"===v||"application/x-gzip"===v||"application/x-tar"===v||"application/x-gtar"===v||"application/x-bzip2"===v||"application/gzip"===v||"application/x-compress"===v||"application/x-apple-diskimage"===v||"application/x-rar-compressed"===v||"application/zip"===v?`${M}zip-32.svg`:v.includes("image/")?`${M}image-32.svg`:v.includes("audio/")?`${M}sound-32.svg`:v.includes("video/")?`${M}video-32.svg`:v.includes("msexcel")||v.includes("ms-excel")||v.includes("spreadsheetml")?`${M}excel-32.svg`:v.includes("msword")||v.includes("ms-word")||v.includes("wordprocessingml")?`${M}word-32.svg`:v.includes("powerpoint")||v.includes("presentationml")?`${M}report-32.svg`:`${M}generic-32.svg`:`${M}generic-32.svg`}(M),ee={[Cs.itemImageResizable]:I};return(0,Mt.u)("div",{class:this.classes(Cs.itemMaskIcon,Cs.itemMask)},(0,Mt.u)("img",{title:v,alt:v,src:R,class:this.classes(ee,Cs.itemImage)}))}renderImageMaskForAttachment(v,M){const{supportsResizeAttachments:I}=this.viewModel;if(!v)return null;const{contentType:R,name:ee,url:pe}=v;if(!I||!xa(R))return this.renderGenericImageMask(ee,R);const Me=this._getCSSTransform(v),xe=Me?{transform:Me,"image-orientation":"none"}:{},ze=`${pe}${pe?.includes("?")?"&":"?"}w=${M}`,st={[Cs.itemImageResizable]:I};return(0,Mt.u)("div",{class:this.classes(Cs.itemMask)},(0,Mt.u)("img",{styles:xe,alt:ee,title:ee,src:ze,class:this.classes(st,Cs.itemImage)}))}renderFile(v){const{file:M}=v;return(0,Mt.u)("li",{class:Cs.item,key:M},(0,Mt.u)("button",{key:"details-button",bind:this,class:Cs.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(v),type:"button"},this.renderImageMask(v),(0,Mt.u)("label",{class:Cs.itemLabel},(0,Mt.u)("span",{class:Cs.itemFilename},M.name||this.messages.noTitle),(0,Mt.u)("span",{"aria-hidden":"true",class:this.classes(Cs.itemChevronIcon,(0,Ar.dZ)(this.container)?Cs.iconLeft:Cs.iconRight)}))))}renderAttachmentInfo({attachmentInfo:v,displayType:M}){const{viewModel:I,effectiveDisplayType:R}=this,{abilities:ee,supportsResizeAttachments:pe}=I,{contentType:Me,name:xe,url:ze}=v,st=this.renderImageMask(v,"list"===M?48:400),ut=ee.editing?(0,Mt.u)("span",{"aria-hidden":"true",class:this.classes(Cs.itemChevronIcon,(0,Ar.dZ)(this.container)?Cs.iconLeft:Cs.iconRight)}):null,Ct=[st,"preview"===R&&pe&&xa(Me)?null:(0,Mt.u)("label",{class:Cs.itemLabel},(0,Mt.u)("span",{class:Cs.itemFilename},xe||this.messages.noTitle),ut)],Gt=ee.editing?(0,Mt.u)("button",{key:"details-button",bind:this,class:Cs.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":v.id,onclick:()=>this._startEditAttachment(v),type:"button"},Ct):(0,Mt.u)("a",{key:"details-link",class:Cs.itemButton,href:ze??void 0,target:"_blank"},Ct);return(0,Mt.u)("li",{class:Cs.item,key:v},Gt)}renderAttachmentContainer(){const{effectiveDisplayType:v,viewModel:M,visibleElements:I}=this,{attachmentInfos:R,abilities:ee,fileInfos:pe}=M,Me=!!R?.length,xe=!!pe?.length,ze={[Cs.containerList]:"preview"!==v,[Cs.containerPreview]:"preview"===v},st=ee.editing&&ee.operations?.add&&I.addButton?(0,Mt.u)("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Cs.esriButton,Cs.esriButtonTertiary,Cs.addAttachmentButton),type:"button"},(0,Mt.u)("span",{"aria-hidden":"true",class:this.classes(Cs.itemAddIcon,Cs.iconPlus)}),this.messages.add):void 0,ut=Me?(0,Mt.u)("ul",{key:"attachments-list",class:Cs.items},R.toArray().map(Ft=>this.renderAttachmentInfo({attachmentInfo:Ft,displayType:v}))):void 0,Ct=xe?(0,Mt.u)("ul",{key:"file-list",class:Cs.items},pe.toArray().map(Ft=>this.renderFile(Ft))):void 0,Gt=xe||Me?void 0:(0,Mt.u)("div",{class:Cs.empty},this.messages.noAttachments);return(0,Mt.u)("div",{key:"attachments-container",class:this.classes(Cs.container,ze)},ut,Ct,Gt,st)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(v){const M=v.target,I=M&&M.files&&M.files.item(0);this._set("selectedFile",I)}_submitDeleteAttachment(v,M){v.preventDefault(),M&&("file"in M?this.deleteFile(M.file):M&&this.deleteAttachment(M))}_submitAddAttachment(v){v.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(v,M){v.preventDefault(),M&&"file"in M?this.updateFile():this.updateAttachment()}_startEditAttachment(v){const{viewModel:M}=this;M.activeFileInfo=null,M.activeAttachmentInfo=v,M.mode="edit"}_startEditFile(v){const{viewModel:M}=this;M.activeAttachmentInfo=null,M.activeFileInfo=v,M.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(v){v.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(v){const{orientationInfo:M}=v;return!this._supportsImageOrientation&&M?[M.rotation?`rotate(${M.rotation}deg)`:"",M.mirrored?"scaleX(-1)":""].join(" "):""}};(0,w._)([(0,C.Cb)()],Qr.prototype,"abilities",null),(0,w._)([(0,C.Cb)()],Qr.prototype,"displayType",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Qr.prototype,"effectiveDisplayType",null),(0,w._)([(0,C.Cb)()],Qr.prototype,"graphic",null),(0,w._)([(0,C.Cb)()],Qr.prototype,"label",null),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Attachments/t9n/Attachments")],Qr.prototype,"messages",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/core/t9n/Units")],Qr.prototype,"messagesUnits",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Qr.prototype,"selectedFile",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Qr.prototype,"submitting",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Qr.prototype,"error",void 0),(0,w._)([(0,C.Cb)({type:bo})],Qr.prototype,"viewModel",void 0),(0,w._)([(0,C.Cb)()],Qr.prototype,"visibleElements",void 0),(0,w._)([(0,ve.p)("visibleElements")],Qr.prototype,"castVisibleElements",null),Qr=(0,w._)([(0,F.j)("esri.widgets.Attachments")],Qr);const na=Qr;let Qi=class extends bo{constructor(v){super(v),this.description=null,this.title=null}};(0,w._)([(0,C.Cb)()],Qi.prototype,"description",void 0),(0,w._)([(0,C.Cb)()],Qi.prototype,"title",void 0),Qi=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Qi);const ia=Qi;function oa({level:v,class:M,...I},R){const ee=function La(v){return(0,We.uZ)(Math.ceil(v),1,6)}(v);return(0,Mt.u)(`h${ee}`,{...I,class:(0,Ar.Sh)("esri-widget__heading",M),role:"heading","aria-level":String(ee)},R)}const aa="esri-feature-element-info",Xi={base:aa,title:`${aa}__title`,description:`${aa}__description`};let Ti=class extends fs.Z{constructor(v,M){super(v,M),this.description=null,this.headingLevel=2,this.title=null}render(){return(0,Mt.u)("div",{class:Xi.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:v}=this;return v?(0,Mt.u)(oa,{level:this.headingLevel,class:Xi.title},v):null}renderDescription(){const{description:v}=this;return v?(0,Mt.u)("div",{key:"description",class:Xi.description},v):null}};(0,w._)([(0,C.Cb)()],Ti.prototype,"description",void 0),(0,w._)([(0,C.Cb)()],Ti.prototype,"headingLevel",void 0),(0,w._)([(0,C.Cb)()],Ti.prototype,"title",void 0),Ti=(0,w._)([(0,F.j)("esri.widgets.Feature.support.FeatureElementInfo")],Ti);const Mo=Ti;let Ln=class extends fs.Z{constructor(v,M){super(v,M),this._featureElementInfo=null,this.attachmentsWidget=new na,this.headingLevel=2,this.viewModel=new ia}initialize(){this._featureElementInfo=new Mo,this.addHandles([(0,bt.YP)(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),bt.nn),(0,bt.YP)(()=>this.viewModel,v=>this.attachmentsWidget.viewModel=v,bt.nn)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo?.destroy()}get description(){return this.viewModel.description}set description(v){this.viewModel.description=v}get displayType(){return this.attachmentsWidget.displayType}set displayType(v){this.attachmentsWidget.displayType=v}get graphic(){return this.viewModel.graphic}set graphic(v){this.viewModel.graphic=v}get title(){return this.viewModel.title}set title(v){this.viewModel.title=v}render(){const{attachmentsWidget:v}=this;return(0,Mt.u)("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),v?.render())}_setupFeatureElementInfo(){const{description:v,title:M,headingLevel:I}=this;this._featureElementInfo?.set({description:v,title:M,headingLevel:I})}};(0,w._)([(0,C.Cb)({readOnly:!0})],Ln.prototype,"attachmentsWidget",void 0),(0,w._)([(0,C.Cb)()],Ln.prototype,"description",null),(0,w._)([(0,C.Cb)()],Ln.prototype,"displayType",null),(0,w._)([(0,C.Cb)()],Ln.prototype,"graphic",null),(0,w._)([(0,C.Cb)()],Ln.prototype,"headingLevel",void 0),(0,w._)([(0,C.Cb)()],Ln.prototype,"title",null),(0,w._)([(0,C.Cb)({type:ia})],Ln.prototype,"viewModel",void 0),Ln=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureAttachments")],Ln);const Al=Ln;var ui=g(31882);let Yn=class extends((0,ui.p)(he.Z)){constructor(v){super(v),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add((0,bt.YP)(()=>this.creator,M=>{this._destroyContent(),this._createContent(M)},bt.nn))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:v,graphic:M,destroyer:I}=this;v&&M&&(Cn(I,{graphic:M}).catch(()=>null),this._set("created",null))}_createContent(v){var M=this;return(0,x.Z)(function*(){const I=M.graphic;if(!I||!v)return;const R=Cn(v,{graphic:I}).catch(()=>null);M._loadingPromise=R,M.notifyChange("state");const ee=yield R;R===M._loadingPromise&&(M._loadingPromise=null,M.notifyChange("state"),M._set("created",ee))})()}};(0,w._)([(0,C.Cb)({readOnly:!0})],Yn.prototype,"created",void 0),(0,w._)([(0,C.Cb)()],Yn.prototype,"creator",void 0),(0,w._)([(0,C.Cb)()],Yn.prototype,"destroyer",void 0),(0,w._)([(0,C.Cb)({type:Wt.Z})],Yn.prototype,"graphic",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Yn.prototype,"state",null),Yn=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Yn);const qi=Yn;var un=g(2404);const Co="esri-feature-content",Oo={base:Co,loaderContainer:`${Co}__loader-container`,loader:`${Co}__loader`};let ci=class extends fs.Z{constructor(v,M){super(v,M),this.viewModel=null,this._addTargetToAnchors=I=>{Array.from(I.querySelectorAll("a")).forEach(R=>{Br(R.href)&&!R.hasAttribute("target")&&R.setAttribute("target","_blank")})}}get creator(){return this.viewModel?.creator}set creator(v){this.viewModel&&(this.viewModel.creator=v)}get graphic(){return this.viewModel?.graphic}set graphic(v){this.viewModel&&(this.viewModel.graphic=v)}renderLoading(){return(0,Mt.u)("div",{class:Oo.loaderContainer,key:"loader"},(0,Mt.u)("div",{class:Oo.loader}))}renderCreated(){const v=this.viewModel?.created;return v?v instanceof HTMLElement?(0,Mt.u)("div",{key:v,bind:v,afterCreate:this._attachToNode}):(0,un.Qd)(v)?(0,Mt.u)("div",{key:v},!v.destroyed&&v.render()):(0,Mt.u)("div",{key:v,innerHTML:v,afterCreate:this._addTargetToAnchors}):null}render(){const v=this.viewModel?.state;return(0,Mt.u)("div",{class:Oo.base},"loading"===v?this.renderLoading():this.renderCreated())}_attachToNode(v){v.appendChild(this)}};(0,w._)([(0,C.Cb)()],ci.prototype,"creator",null),(0,w._)([(0,C.Cb)()],ci.prototype,"graphic",null),(0,w._)([(0,C.Cb)({type:qi})],ci.prototype,"viewModel",void 0),ci=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureContent")],ci);const Ii=ci;var ja=g(32596),Po=g(17398);let Nn=class extends he.Z{constructor(v){super(v),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:v,fieldInfos:M}=this,I=[];return M?.forEach(R=>{if(R.hasOwnProperty("visible")&&!R.visible)return;const ee=R.clone();ee.label=yt(ee,v),I.push(ee)}),I}};(0,w._)([(0,C.Cb)()],Nn.prototype,"attributes",void 0),(0,w._)([(0,C.Cb)({type:[ja.Z]})],Nn.prototype,"expressionInfos",void 0),(0,w._)([(0,C.Cb)()],Nn.prototype,"description",void 0),(0,w._)([(0,C.Cb)({type:[Po.Z]})],Nn.prototype,"fieldInfos",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Nn.prototype,"formattedFieldInfos",null),(0,w._)([(0,C.Cb)()],Nn.prototype,"title",void 0),Nn=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Nn);const So=Nn,xl=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];const wi="esri-feature-fields",Di={base:wi,fieldHeader:`${wi}__field-header`,fieldData:`${wi}__field-data`,fieldDataDate:`${wi}__field-data--date`,esriTable:"esri-widget__table"};let cn=class extends fs.Z{constructor(v,M){super(v,M),this._featureElementInfo=null,this.viewModel=new So,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Mo,this.addHandles((0,bt.YP)(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),bt.nn))}destroy(){this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(v){this.viewModel.attributes=v}get description(){return this.viewModel.description}set description(v){this.viewModel.description=v}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(v){this.viewModel.expressionInfos=v}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(v){this.viewModel.fieldInfos=v}get title(){return this.viewModel.title}set title(v){this.viewModel.title=v}renderFieldInfo(v,M){const{attributes:I}=this.viewModel,R=v.fieldName,ee=v.label||R,pe=I?null==I[R]?"":I[R]:"",Me=!(!v.format||!v.format.dateFormat),xe="number"!=typeof pe||Me?function Fa(v,M){if("string"!=typeof M||!M)return M;const I=function Ua(v){let M=null;return xl.some(I=>(I.pattern.test(v)&&(M=I),!!M)),M}(M);if(!I)return M;const R=M.match(I.pattern),pe=(0,ke.gx)((0,ke.gx)(I.label,{messages:v,hierPart:R&&R[2]}),{appName:I.appName});return M.replace(I.pattern,`<a${I.target?` target="${I.target}"`:""} href="$1"${"_blank"===I.target?' rel="noreferrer"':""}>${pe}</a>`)}(this.messagesURIUtils,pe):this._forceLTR(pe),ze={[Di.fieldDataDate]:Me};return(0,Mt.u)("tr",{key:`fields-element-info-row-${R}-${M}`},(0,Mt.u)("th",{key:`fields-element-info-row-header-${R}-${M}`,class:Di.fieldHeader,innerHTML:ee}),(0,Mt.u)("td",{key:`fields-element-info-row-data-${R}-${M}`,class:this.classes(Di.fieldData,ze),innerHTML:xe}))}renderFields(){const{formattedFieldInfos:v}=this.viewModel;return v?.length?(0,Mt.u)("table",{class:Di.esriTable,summary:this.messages.fieldsSummary},(0,Mt.u)("tbody",null,v.map((M,I)=>this.renderFieldInfo(M,I)))):null}render(){return(0,Mt.u)("div",{class:Di.base},this._featureElementInfo?.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:v,title:M}=this;this._featureElementInfo?.set({description:v,title:M})}_forceLTR(v){return`&lrm;${v}`}};(0,w._)([(0,C.Cb)()],cn.prototype,"attributes",null),(0,w._)([(0,C.Cb)()],cn.prototype,"description",null),(0,w._)([(0,C.Cb)()],cn.prototype,"expressionInfos",null),(0,w._)([(0,C.Cb)()],cn.prototype,"fieldInfos",null),(0,w._)([(0,C.Cb)()],cn.prototype,"title",null),(0,w._)([(0,C.Cb)({type:So,nonNullable:!0})],cn.prototype,"viewModel",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Feature/t9n/Feature")],cn.prototype,"messages",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/support/t9n/uriUtils")],cn.prototype,"messagesURIUtils",void 0),cn=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureFields")],cn);const To=cn;var Qn=g(20359);const $a={maximumFractionDigits:20};g(27969);var On=g(80065),Rl=(g(97708),g(21225));const jl="<",Va=">",za=(0,gt.Ze)("short-date");const Ee=new se.Z([64,64,64]);function Re(v,M){const I=[],R=v.length-1;return 5===v.length?I.push(0,2,4):I.push(0,R),v.map((ee,pe)=>I.includes(pe)?function Ga(v,M,I,R){let ee="";0===M?ee=`${jl} `:M===I&&(ee=`${Va} `);let pe=null;return pe=R?(0,gt.p6)(v,za):function Ka(v){return(0,Ut.uf)(v,$a)}(v),ee+pe}(ee,pe,R,M):null)}function Ge(v,M,I){return ht.apply(this,arguments)}function ht(){return ht=(0,x.Z)(function*(v,M,I){let R=!1,ee=[],pe=[];if(v.stops){const st=v.stops;ee=st.map(ut=>ut.value),R=st.some(ut=>!!ut.label),R&&(pe=st.map(ut=>ut.label))}if(null==ee[0]&&null==ee[ee.length-1])return null;const ze=R?null:Re(ee,I??!1);return(yield Promise.all(ee.map(function(){var st=(0,x.Z)(function*(ut,Ct){return{value:ut,color:"opacity"===v.type?yield Lt(ut,v,M):(yield Promise.resolve().then(g.bind(g,35162))).getColor(v,ut),label:R?pe[Ct]:ze?.[Ct]??""}});return function(ut,Ct){return st.apply(this,arguments)}}()))).reverse()}),ht.apply(this,arguments)}function Lt(v,M){return St.apply(this,arguments)}function St(){return(St=(0,x.Z)(function*(v,M,I=Ee){const R=new se.Z(I),ee=(yield Promise.resolve().then(g.bind(g,35162))).getOpacity(M,v);return null!=ee&&(R.a=ee),R})).apply(this,arguments)}var xr=g(22713);function _n(v,M,I){return Do.apply(this,arguments)}function Do(){return(Do=(0,x.Z)(function*(v,M,I){(0,Qn.s1)(v,M,()=>[]).push(...I)})).apply(this,arguments)}function ua(){return(ua=(0,x.Z)(function*(v){const M=new Map;if(!v)return M;if("visualVariables"in v&&v.visualVariables){const I=v.visualVariables.filter(R=>"color"===R.type);for(const R of I){const ee=((yield Ge(R))??[]).map(pe=>pe.color);yield _n(M,R.field||R.valueExpression,ee)}}if("heatmap"===v.type){const I=function Zr(v){if(!v.colorStops)return[];const M=[...v.colorStops].filter(R=>R.color?.a>0);let I=M.length-1;if(M&&M[0]){const R=M[I];R&&1!==R.ratio&&(M.push(new xr.Z({ratio:1,color:R.color})),I++)}return M.map((R,ee)=>{let pe="";return 0===ee?pe=v.legendOptions?.minLabel||"low":ee===I&&(pe=v.legendOptions?.maxLabel||"high"),{color:R.color,label:pe,ratio:R.ratio}}).reverse()}(v).map(R=>R.color);yield _n(M,v.field||v.valueExpression,I)}else if("pie-chart"===v.type){for(const I of v.attributes)yield _n(M,I.field||I.valueExpression,[I.color]);yield _n(M,"default",[v?.othersCategory?.color,(0,On._h)(v.backgroundFillSymbol,null)])}else if("dot-density"===v.type){for(const I of v.attributes)yield _n(M,I.field||I.valueExpression,[I.color]);yield _n(M,"default",[v.backgroundColor])}else if("unique-value"===v.type)if("predominance"===v.authoringInfo?.type)for(const I of v.uniqueValueInfos??[])yield _n(M,I.value.toString(),[(0,On._h)(I.symbol,null)]);else{const I=(v.uniqueValueInfos??[]).map(xe=>(0,On._h)(xe.symbol,null)),{field:R,field2:ee,field3:pe,valueExpression:Me}=v;(R||Me)&&(yield _n(M,R||Me,I)),ee&&(yield _n(M,ee,I)),pe&&(yield _n(M,pe,I))}else if("class-breaks"===v.type){const I=v.classBreakInfos.map(pe=>(0,On._h)(pe.symbol,null)),{field:R,valueExpression:ee}=v;yield _n(M,R??ee,I)}else"simple"===v.type&&(yield _n(M,"default",[(0,On._h)(v.symbol,null)]));return"defaultSymbol"in v&&v.defaultSymbol&&(yield _n(M,"default",[(0,On._h)(v.defaultSymbol,null)])),M.forEach((I,R)=>{const ee=(0,$.Tw)(I.filter(Boolean),(pe,Me)=>JSON.stringify(pe)===JSON.stringify(Me));M.set(R,ee)}),M})).apply(this,arguments)}k.Z.getLogger("esri.renderers.support.utils"),(0,gt.Ze)("short-date");var Gh=g(32312),ka=g(1897),Wl=(g(38491),g(60355)),Nl=(g(84489),g(50805),g(70535),g(23675),g(55733)),_c=g(7913),Zl=(g(42758),g(74617),g(87096),g(28665)),$l=(g(6010),g(76356)),Hh=(g(15354),g(58469));const vc=k.Z.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),Ec=new Map;function Ja(v){if(!Jn(v))return null;const[M,I]=v.split("/").slice(1);return{layerId:M,fieldName:I}}function Kl(){return(Kl=(0,x.Z)(function*(v,M,I,R){const ee=I.layerId.toString(),{layerInfo:pe,relation:Me,relatedFields:xe,outStatistics:ze,url:st,sourceSpatialReference:ut}=M;if(!pe||!Me)return null;const Ct=function Yh({originRelationship:v,relationships:M,layerId:I}){let R=null;return M&&M.some(ee=>(`${ee.relatedTableId}`===I&&ee.id===v?.id&&(R=ee),!!R)),R}({originRelationship:Me,relationships:pe.relationships,layerId:ee});if(Ct?.relationshipTableId&&Ct.keyFieldInRelationshipTable){const Ft=(yield function ep(v,M,I,R){const ee=new $l.default;return ee.outFields=["*"],ee.relationshipId="number"==typeof M.id?M.id:parseInt(M.id,10),ee.objectIds=[v.attributes[I.objectIdField]],I.queryRelatedFeatures?.(ee,R)??Promise.resolve({})}(v,Ct,I,R))[v.attributes[I.objectIdField]];if(!Ft)return null;const ps=Ft.features.map(Ps=>Ps.attributes[pe.objectIdField]);if(ze?.length&&pe.supportsStatistics){const Ps=new Zl.Z;Ps.where=function tp(v,M,I){let R=0;const ee=[];for(;R<M.length;)ee.push(`${v} IN (${M.slice(R,I+R)})`),R+=I;return ee.join(" OR ")}(pe.objectIdField,ps,1e3),Ps.outFields=xe,Ps.outStatistics=ze,Ps.sourceSpatialReference=ut;const Is={features:Promise.resolve(Ft),statsFeatures:(0,Wl.e)(st,Ps)};return(0,z.as)(Is)}}const Gt=Ct?.keyField;if(Gt){const Ft=(0,it.H7)(function ap(v,M){if(null!=v){M=M.toLowerCase();for(const I of v)if(I&&I.name.toLowerCase()===M)return I}return null}(pe.fields,Gt)),ps=function Qh(v,M){const I=M.toLowerCase();for(const R in v)if(R.toLowerCase()===I)return v[R];return null}(v.attributes,Me.keyField),Ps=Ft?`${Gt}=${ps}`:`${Gt}='${ps}'`,Is=(0,Wl.e)(st,new Zl.Z({where:Ps,outFields:M.relatedFields,sourceSpatialReference:ut}),R),zs=M.outStatistics&&M.outStatistics.length>0&&pe.supportsStatistics?(0,Wl.e)(st,new Zl.Z({where:Ps,outFields:M.relatedFields,outStatistics:M.outStatistics,sourceSpatialReference:ut}),R):null,fr={features:Is};return zs&&(fr.statsFeatures=zs),(0,z.as)(fr)}return null})).apply(this,arguments)}const bc={chartAnimation:!0};let Jr=class extends he.Z{constructor(v){super(v),this.abilities={...bc},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(v){return{...bc,...v}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(v){this._setContentElementMedia(v)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(v){const{formattedMediaInfoCount:M}=this;this.activeMediaInfoIndex=(v+M)%M}_pageContentElementMedia(v){const{activeMediaInfoIndex:M}=this;this._setContentElementMedia(M+v)}_formatMediaInfos(){const{mediaInfos:v,layer:M}=this,I=this.attributes??{},R=this.formattedAttributes??{},ee=this.expressionAttributes??{},pe=this.fieldInfoMap??new Map;return v?.map(Me=>{const xe=Me?.clone();if(!xe)return null;if(xe.title=rn({attributes:I,fieldInfoMap:pe,globalAttributes:R,expressionAttributes:ee,layer:M,text:xe.title}),xe.caption=rn({attributes:I,fieldInfoMap:pe,globalAttributes:R,expressionAttributes:ee,layer:M,text:xe.caption}),xe.altText=rn({attributes:I,fieldInfoMap:pe,globalAttributes:R,expressionAttributes:ee,layer:M,text:xe.altText}),"image"===xe.type){const{value:ze}=xe;return this._setImageValue({value:ze,formattedAttributes:R,layer:M}),xe.value.sourceURL?xe:void 0}if("pie-chart"===xe.type||"line-chart"===xe.type||"column-chart"===xe.type||"bar-chart"===xe.type){const{value:ze}=xe;return this._setChartValue({value:ze,chartType:xe.type,attributes:I,formattedAttributes:R,layer:M,expressionAttributes:ee}),xe}return null}).filter(ce.pC)??[]}_setImageValue(v){const M=this.fieldInfoMap??new Map,{value:I,formattedAttributes:R,layer:ee}=v,{linkURL:pe,sourceURL:Me}=I;if(Me){const xe=Ot(Me,ee);I.sourceURL=Ze({formattedAttributes:R,template:xe,fieldInfoMap:M})}if(pe){const xe=Ot(pe,ee);I.linkURL=Ze({formattedAttributes:R,template:xe,fieldInfoMap:M})}}_setChartValue(v){const{value:M,attributes:I,formattedAttributes:R,chartType:ee,layer:pe,expressionAttributes:Me}=v,{popupTemplate:xe,relatedInfos:ze}=this,{fields:st,normalizeField:ut}=M,Ct=pe;if(M.fields=function Cr(v,M){return v&&v.map(I=>Fs(I,M))}(st,Ct),ut&&(M.normalizeField=Fs(ut,Ct)),!st.some(Ft=>!!(null!=R[Ft]||Jn(Ft)&&ze?.size)))return;const Gt=xe?.fieldInfos??[];st.forEach(Ft=>{if(Jn(Ft))return void(M.series=[...M.series,...this._getRelatedChartInfos({fieldInfos:Gt,fieldName:Ft,formattedAttributes:R,chartType:ee,value:M})]);const ps=this._getChartOption({value:M,attributes:I,chartType:ee,formattedAttributes:R,expressionAttributes:Me,fieldName:Ft,fieldInfos:Gt});M.series.push(ps)})}_getRelatedChartInfos(v){const{fieldInfos:M,fieldName:I,formattedAttributes:R,chartType:ee,value:pe}=v,Me=[],xe=Ja(I),ze=xe&&this.relatedInfos?.get(xe.layerId.toString());if(!ze)return Me;const{relatedFeatures:st,relation:ut}=ze;if(!ut||!st)return Me;const{cardinality:Ct}=ut;return st.forEach(Gt=>{const{attributes:Ft}=Gt;Ft&&Object.keys(Ft).forEach(ps=>{ps===xe.fieldName&&Me.push(this._getChartOption({value:pe,attributes:Ft,formattedAttributes:R,fieldName:I,chartType:ee,relatedFieldName:ps,hasMultipleRelatedFeatures:st?.length>1,fieldInfos:M}))})}),"one-to-many"===Ct||"many-to-many"===Ct?Me:[Me[0]]}_getTooltip({label:v,value:M,chartType:I}){return"pie-chart"===I?`${v}`:`${v}: ${M}`}_getChartOption(v){const{value:M,attributes:I,formattedAttributes:R,expressionAttributes:ee,fieldName:pe,relatedFieldName:Me,fieldInfos:xe,chartType:ze,hasMultipleRelatedFeatures:st}=v,ut=this.layer,Ct=this.fieldInfoMap??new Map,{normalizeField:Gt,tooltipField:Ft}=M,ps=Gt?Jn(Gt)?I[Ja(Gt).fieldName]:I[Gt]:null,Ps=tn(pe)&&ee&&void 0!==ee[pe]?ee[pe]:Me&&void 0!==I[Me]?I[Me]:void 0!==I[pe]?I[pe]:R[pe],Is=new Gh.Z({fieldName:pe,value:void 0===Ps?null:Ps&&ps?Ps/ps:Ps});if(Jn(pe)){const rr=Ct.get(pe.toLowerCase()),Mr=Ft&&Ct.get(Ft.toLowerCase()),Sr=rr?.fieldName??pe,oi=st&&Ft?Ja(Ft).fieldName:Mr?.fieldName??Ft;return Is.tooltip=this._getTooltip({label:st&&oi?I[oi]:R[oi]??rr?.label??rr?.fieldName??Me,value:st&&Me?I[Me]:R[Sr],chartType:ze}),Is}const zs=Ls(xe,pe),fr=Fs(pe,ut),Ys=Ft&&void 0!==R[Ft]?R[Ft]:yt(zs||new Po.Z({fieldName:fr}),this.popupTemplate?.expressionInfos);return Is.tooltip=this._getTooltip({label:Ys,value:R[fr],chartType:ze}),Is}};(0,w._)([(0,C.Cb)()],Jr.prototype,"abilities",void 0),(0,w._)([(0,ve.p)("abilities")],Jr.prototype,"castAbilities",null),(0,w._)([(0,C.Cb)()],Jr.prototype,"activeMediaInfoIndex",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Jr.prototype,"activeMediaInfo",null),(0,w._)([(0,C.Cb)()],Jr.prototype,"attributes",void 0),(0,w._)([(0,C.Cb)()],Jr.prototype,"description",void 0),(0,w._)([(0,C.Cb)()],Jr.prototype,"fieldInfoMap",void 0),(0,w._)([(0,C.Cb)()],Jr.prototype,"formattedAttributes",void 0),(0,w._)([(0,C.Cb)()],Jr.prototype,"expressionAttributes",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Jr.prototype,"formattedMediaInfos",null),(0,w._)([(0,C.Cb)()],Jr.prototype,"isAggregate",void 0),(0,w._)([(0,C.Cb)()],Jr.prototype,"layer",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Jr.prototype,"formattedMediaInfoCount",null),(0,w._)([(0,C.Cb)()],Jr.prototype,"mediaInfos",void 0),(0,w._)([(0,C.Cb)()],Jr.prototype,"popupTemplate",void 0),(0,w._)([(0,C.Cb)()],Jr.prototype,"relatedInfos",void 0),(0,w._)([(0,C.Cb)()],Jr.prototype,"title",void 0),Jr=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Jr);const eo=Jr;var Mc=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],up=[{name:"default",colors:[].concat(Mc.slice(30,39),Mc.slice(28,30).reverse())},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],Ya=g(92051);const Cc="en-us",Vl=new Map([["ar",()=>Promise.all([g.e(8592),g.e(7102)]).then(g.bind(g,17102)).then(v=>v.a)],["bg-bg",()=>Promise.all([g.e(8592),g.e(9623)]).then(g.bind(g,99623)).then(v=>v.b)],["bs-ba",()=>Promise.all([g.e(8592),g.e(4862)]).then(g.bind(g,94862)).then(v=>v.b)],["ca-es",()=>Promise.all([g.e(8592),g.e(5156)]).then(g.bind(g,35156)).then(v=>v.c)],["cs-cz",()=>Promise.all([g.e(8592),g.e(6393)]).then(g.bind(g,16393)).then(v=>v.c)],["da-dk",()=>Promise.all([g.e(8592),g.e(6349)]).then(g.bind(g,26349)).then(v=>v.d)],["de-de",()=>Promise.all([g.e(8592),g.e(1132)]).then(g.bind(g,71132)).then(v=>v.d)],["de-ch",()=>Promise.all([g.e(8592),g.e(1344)]).then(g.bind(g,11344)).then(v=>v.d)],["el-gr",()=>Promise.all([g.e(8592),g.e(141)]).then(g.bind(g,20141)).then(v=>v.e)],["en-us",()=>Promise.all([g.e(8592),g.e(4991)]).then(g.bind(g,4991)).then(v=>v.e)],["en-ca",()=>Promise.all([g.e(8592),g.e(9836)]).then(g.bind(g,59836)).then(v=>v.e)],["es-es",()=>Promise.all([g.e(8592),g.e(920)]).then(g.bind(g,80920)).then(v=>v.e)],["et-ee",()=>Promise.all([g.e(8592),g.e(5838)]).then(g.bind(g,55838)).then(v=>v.e)],["fi-fi",()=>Promise.all([g.e(8592),g.e(4298)]).then(g.bind(g,94298)).then(v=>v.f)],["fr-fr",()=>Promise.all([g.e(8592),g.e(9046)]).then(g.bind(g,19046)).then(v=>v.f)],["he-il",()=>Promise.all([g.e(8592),g.e(9257)]).then(g.bind(g,99257)).then(v=>v.h)],["hr-hr",()=>Promise.all([g.e(8592),g.e(6326)]).then(g.bind(g,46326)).then(v=>v.h)],["hu-hu",()=>Promise.all([g.e(8592),g.e(1825)]).then(g.bind(g,51825)).then(v=>v.h)],["id-id",()=>Promise.all([g.e(8592),g.e(8408)]).then(g.bind(g,58408)).then(v=>v.i)],["it-it",()=>Promise.all([g.e(8592),g.e(9433)]).then(g.bind(g,19433)).then(v=>v.i)],["ja-jp",()=>Promise.all([g.e(8592),g.e(5012)]).then(g.bind(g,5012)).then(v=>v.j)],["ko-kr",()=>Promise.all([g.e(8592),g.e(3743)]).then(g.bind(g,93743)).then(v=>v.k)],["lt-lt",()=>Promise.all([g.e(8592),g.e(6545)]).then(g.bind(g,86545)).then(v=>v.l)],["lv-lv",()=>Promise.all([g.e(8592),g.e(4303)]).then(g.bind(g,4303)).then(v=>v.l)],["nb-no",()=>Promise.all([g.e(8592),g.e(7488)]).then(g.bind(g,69024)).then(v=>v.n)],["nl-nl",()=>Promise.all([g.e(8592),g.e(8058)]).then(g.bind(g,38058)).then(v=>v.n)],["pl-pl",()=>Promise.all([g.e(8592),g.e(1712)]).then(g.bind(g,51712)).then(v=>v.p)],["pt-br",()=>Promise.all([g.e(8592),g.e(6850)]).then(g.bind(g,66850)).then(v=>v.p)],["pt-pt",()=>Promise.all([g.e(8592),g.e(9181)]).then(g.bind(g,59181)).then(v=>v.p)],["ro-ro",()=>Promise.all([g.e(8592),g.e(9291)]).then(g.bind(g,49291)).then(v=>v.r)],["ru-ru",()=>Promise.all([g.e(8592),g.e(9165)]).then(g.bind(g,39165)).then(v=>v.r)],["sk-sk",()=>Promise.all([g.e(8592),g.e(2511)]).then(g.bind(g,92511)).then(v=>v.s)],["sl-sl",()=>Promise.all([g.e(8592),g.e(4870)]).then(g.bind(g,24870)).then(v=>v.s)],["sr-rs",()=>Promise.all([g.e(8592),g.e(4829)]).then(g.bind(g,54829)).then(v=>v.s)],["sv-se",()=>Promise.all([g.e(8592),g.e(2176)]).then(g.bind(g,32176)).then(v=>v.s)],["th-th",()=>Promise.all([g.e(8592),g.e(1730)]).then(g.bind(g,11730)).then(v=>v.t)],["tr-tr",()=>Promise.all([g.e(8592),g.e(2079)]).then(g.bind(g,72079)).then(v=>v.t)],["uk-ua",()=>Promise.all([g.e(8592),g.e(222)]).then(g.bind(g,90222)).then(v=>v.u)],["vi-vn",()=>Promise.all([g.e(8592),g.e(9590)]).then(g.bind(g,29590)).then(v=>v.v)],["zh-cn",()=>Promise.all([g.e(8592),g.e(7780)]).then(g.bind(g,17780)).then(v=>v.z)],["zh-hk",()=>Promise.all([g.e(8592),g.e(173)]).then(g.bind(g,30173)).then(v=>v.z)],["zh-tw",()=>Promise.all([g.e(8592),g.e(173)]).then(g.bind(g,30173)).then(v=>v.z)]]);let xo=null,ca=null;function zl(){return(zl=(0,x.Z)(function*(v=(0,Ya.Kd)()){if(v=function dp(v){return v?Vl.has(v.toLowerCase())?v.toLowerCase():function cp(v){const M=v.split("-")[0].toLowerCase();let I=null;for(const R of Vl.keys())if(R.startsWith(M)){I=R;break}return I}(v)||Cc:Cc}(v),xo&&v===ca)return xo;xo=g.e(6445).then(g.bind(g,86445)).then(M=>M.i),ca=v;try{const[M,I]=yield Promise.all([xo,Vl.get(ca)()]);ca===v&&(M.am4core.options.defaultLocale=I.default),M.am4core.options.suppressWarnings=!0,M.am4core.options.autoDispose=!0}catch{return xo=null,ca=null,null}return xo})).apply(this,arguments)}const Oc="calcite-mode-";function Qa(){return function fp(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replace(/\s|'|"/g,"")}().startsWith("dark")}const vn="esri-feature-media",Wr={base:vn,mediaContainer:`${vn}__container`,mediaItemContainer:`${vn}__item-container`,mediaItem:`${vn}__item`,mediaItemTitle:`${vn}__item-title`,mediaItemCaption:`${vn}__item-caption`,mediaPrevious:`${vn}__previous`,mediaPreviousIconLTR:`${vn}__previous-icon`,mediaPreviousIconRTL:`${vn}__previous-icon--rtl`,mediaNext:`${vn}__next`,mediaNextIconLTR:`${vn}__next-icon`,mediaNextIconRTL:`${vn}__next-icon--rtl`,mediaChart:`${vn}__chart`,mediaButton:`${vn}__button`,mediaIcon:`${vn}__icon`,iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},pi="color",Li="tooltip",da="value",Pc="default-line-value";let Pn=class extends fs.Z{constructor(v,M){var I;super(v,M),I=this,this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new eo,this.messages=null,this._getChartDependencies=function(){var R=(0,x.Z)(function*(ee){const pe=yield function hp(){return zl.apply(this,arguments)}(),{destroyed:Me,viewModel:xe}=I;if(Me||!xe||!ee)return;const{activeMediaInfo:ze}=xe,st=yield I._getRendererColors(pe);I._renderChart({chartDiv:ee,mediaInfo:ze,chartsModule:pe,colorMap:st})});return function(ee){return R.apply(this,arguments)}}()}initialize(){this._featureElementInfo=new Mo,this.addHandles([(0,bt.YP)(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),bt.nn),(0,bt.YP)(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),bt.nn)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(v){this.viewModel.attributes=v}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(v){this.viewModel.activeMediaInfoIndex=v}get description(){return this.viewModel.description}set description(v){this.viewModel.description=v}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(v){this.viewModel.fieldInfoMap=v}get layer(){return this.viewModel.layer}set layer(v){this.viewModel.layer=v}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(v){this.viewModel.mediaInfos=v}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(v){this.viewModel.popupTemplate=v}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(v){this.viewModel.relatedInfos=v}get title(){return this.viewModel.title}set title(v){this.viewModel.title=v}render(){return(0,Mt.u)("div",{bind:this,class:Wr.base,onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:v}=this.viewModel;return v?(0,Mt.u)("div",{key:"media-element-container",class:Wr.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(v){const{_refreshIntervalInfo:M}=this,{activeMediaInfoIndex:I,formattedMediaInfoCount:R}=this.viewModel,{value:ee,refreshInterval:pe,altText:Me,title:xe,type:ze}=v,{sourceURL:st,linkURL:ut}=ee,Ct=Br(ut??void 0)?"_blank":"_self",Gt="_blank"===Ct?"noreferrer":"",Ft=pe?M:null,Is=(0,Mt.u)("img",{alt:Me||xe,key:`media-${ze}-${I}-${R}-${Ft?Ft.timestamp:0}`,src:(Ft?Ft.sourceURL:st)??void 0});return(ut?(0,Mt.u)("a",{title:xe,href:ut,rel:Gt,target:Ct},Is):null)||Is}renderChartMediaInfo(v){const{activeMediaInfoIndex:M,formattedMediaInfoCount:I}=this.viewModel;return(0,Mt.u)("div",{key:`media-${v.type}-${M}-${I}`,bind:this,class:Wr.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:v}=this.viewModel;return v?"image"===v.type?this.renderImageMediaInfo(v):v.type.includes("chart")?this.renderChartMediaInfo(v):null:null}renderMediaInfo(){const{activeMediaInfo:v}=this.viewModel;if(!v)return null;const M=v.title?(0,Mt.u)("div",{key:"media-title",class:Wr.mediaItemTitle,innerHTML:v.title}):null,I=v.caption?(0,Mt.u)("div",{key:"media-caption",class:Wr.mediaItemCaption,innerHTML:v.caption}):null;return(0,Mt.u)("div",{key:"media-container",class:Wr.mediaItemContainer},(0,Mt.u)("div",{key:"media-item-container",class:Wr.mediaItem},this.renderMediaInfoType()),M,I)}renderMediaPageButton(v){if(this.viewModel.formattedMediaInfoCount<2)return null;const M="previous"===v,I=M?this.messages.previous:this.messages.next,R=this.classes(Wr.mediaButton,M?Wr.mediaPrevious:Wr.mediaNext),ee=M?this.classes(Wr.mediaIcon,Wr.mediaPreviousIconLTR,Wr.iconLeftTriangleArrow):this.classes(Wr.mediaIcon,Wr.mediaNextIconLTR,Wr.iconRightTriangleArrow),pe=M?this.classes(Wr.mediaIcon,Wr.mediaPreviousIconRTL,Wr.iconRightTriangleArrow):this.classes(Wr.mediaIcon,Wr.mediaNextIconRTL,Wr.iconLeftTriangleArrow);return(0,Mt.u)("button",{type:"button",key:M?"media-previous":"media-next",title:I,"aria-label":I,tabIndex:0,class:R,bind:this,onclick:M?this._previous:this._next},(0,Mt.u)("span",{"aria-hidden":"true",class:ee}),(0,Mt.u)("span",{"aria-hidden":"true",class:pe}))}_setupFeatureElementInfo(){const{description:v,title:M}=this;this._featureElementInfo?.set({description:v,title:M})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:v,layer:M}=this.viewModel;return v&&M?.featureReduction&&"renderer"in M.featureReduction?M.featureReduction.renderer:M?.renderer}_getRendererColors(v){var M=this;return(0,x.Z)(function*(){const{am4core:I}=v,R=new Map,ee=M._getRenderer();if(!ee)return R;const Me=yield function Fl(v){return ua.apply(this,arguments)}(ee);return Me.delete("default"),Array.from(Me.values()).every(xe=>1===xe?.length)&&(R.set(Pc,I.color({r:50,g:50,b:50,a:1})),Array.from(Me.keys()).forEach(xe=>{xe&&R.set(xe,I.color(Me.get(xe)?.[0].toCss(!0)))})),R})()}_handleMediaKeyup(v){const M=(0,Us.kK)(v);"ArrowLeft"===M&&(v.stopPropagation(),this.viewModel.previous()),"ArrowRight"===M&&(v.stopPropagation(),this.viewModel.next())}_renderChart(v){const{abilities:M}=this.viewModel,{chartsModule:I,chartDiv:R,mediaInfo:ee,colorMap:pe}=v,{value:Me,type:xe}=ee,{am4core:ze}=I,st=function pp(v,M="default"){const I=up.find(R=>R.name===M);return I?I.colors.map(R=>v.color(R)):null}(ze);Qa()&&ze.useTheme(I.am4themes_dark);const Ct=window.matchMedia("(prefers-reduced-motion: reduce)");M.chartAnimation&&!Ct.matches?ze.useTheme(I.am4themes_animated):ze.unuseTheme(I.am4themes_animated),ze.useTheme(function ut(Ft){Ft instanceof ze.ColorSet&&st&&(Ft.list=st)});const Gt="pie-chart"===xe?this._createPieChart(v):this._createXYChart(v);R.setAttribute("aria-label",ee.altText||ee.title),Gt.data=Me.series.map(Ft=>({[Li]:Ft.tooltip,[da]:Ft.value,[pi]:pe.get(Ft.fieldName)})).filter(Ft=>"pie-chart"!==xe||null!=Ft.value&&Ft.value>0)}_customizeChartTooltip(v,M){v&&(v.label.wrap=!0,v.label.maxWidth=200,v.autoTextColor=!1,v.getFillFromObject=!1,v.label.fill=M.color("#ffffff"),v.background.fill=M.color({r:0,g:0,b:0,a:.7}))}_createPieChart(v){const{chartDiv:M,chartsModule:I}=v,{am4core:R,am4charts:ee}=I,pe=R.create(M,ee.PieChart);pe.rtl=(0,Ar.dZ)(this.container);const Me=pe.series.push(new ee.PieSeries);return Me.labels.template.disabled=!0,Me.ticks.template.disabled=!0,Me.dataFields.value=da,Me.dataFields.category=Li,this._customizeChartTooltip(Me.tooltip,R),Me.slices.template.propertyFields.fill=pi,Me.slices.template.propertyFields.stroke=pi,pe}_getMinSeriesValue(v){let M=0;return v.forEach(I=>M=Math.min(I.value,M)),M}_createColumnChart(v,M){const{chartsModule:I,mediaInfo:R}=M,{value:ee}=R,{am4core:pe,am4charts:Me}=I,xe=v.xAxes.push(new Me.CategoryAxis);xe.dataFields.category=Li,xe.renderer.labels.template.disabled=!0;const ze=xe.tooltip;this._customizeChartTooltip(ze,pe),ze.events.on("sizechanged",()=>{ze.dy=-ze.contentHeight});const st=v.yAxes.push(new Me.ValueAxis),ut=st.renderer.labels.template;st.renderer.minLabelPosition=.05,st.renderer.maxLabelPosition=.95,st.min=this._getMinSeriesValue(ee.series),this._customizeChartTooltip(st.tooltip,pe),ut.wrap=!0;const Ct=v.series.push(new Me.ColumnSeries);Ct.dataFields.valueY=da,Ct.dataFields.categoryX=Li,Ct.columns.template.propertyFields.fill=pi,Ct.columns.template.propertyFields.stroke=pi,v.cursor=new Me.XYCursor,ee.series.length>15&&(v.scrollbarX=new pe.Scrollbar)}_createBarChart(v,M){const{chartsModule:I,mediaInfo:R}=M,{value:ee}=R,{am4core:pe,am4charts:Me}=I,xe=v.yAxes.push(new Me.CategoryAxis);xe.dataFields.category=Li,xe.renderer.inversed=!0,xe.renderer.labels.template.disabled=!0;const ze=xe.tooltip;this._customizeChartTooltip(ze,pe),ze.events.on("sizechanged",()=>{ze.dx=ze.contentWidth});const st=v.xAxes.push(new Me.ValueAxis),ut=st.renderer.labels.template;st.renderer.minLabelPosition=.05,st.renderer.maxLabelPosition=.95,st.min=this._getMinSeriesValue(ee.series),this._customizeChartTooltip(st.tooltip,pe),ut.wrap=!0;const Ct=v.series.push(new Me.ColumnSeries);Ct.dataFields.valueX=da,Ct.dataFields.categoryY=Li,Ct.columns.template.propertyFields.fill=pi,Ct.columns.template.propertyFields.stroke=pi,v.cursor=new Me.XYCursor,ee.series.length>15&&(v.scrollbarY=new pe.Scrollbar)}_createLineChart(v,M){const{chartsModule:I,mediaInfo:R,colorMap:ee}=M,{value:pe}=R,{am4core:Me,am4charts:xe}=I,ze=v.xAxes.push(new xe.CategoryAxis);ze.dataFields.category=Li,ze.renderer.labels.template.disabled=!0;const st=ze.tooltip;this._customizeChartTooltip(st,Me),st.events.on("sizechanged",()=>{st.dy=-st.contentHeight});const ut=v.yAxes.push(new xe.ValueAxis),Ct=ut.renderer.labels.template;ut.renderer.minLabelPosition=.05,ut.renderer.maxLabelPosition=.95,ut.min=this._getMinSeriesValue(pe.series),this._customizeChartTooltip(ut.tooltip,Me),Ct.wrap=!0;const Gt=v.series.push(new xe.LineSeries);Gt.dataFields.categoryX=Li,Gt.dataFields.valueY=da,Gt.strokeWidth=1;const Ft=ee.get(Pc);Ft&&(Gt.stroke=Ft);const ps=Gt.bullets.push(new xe.CircleBullet);ps.propertyFields.fill=pi,ps.propertyFields.stroke=pi,v.cursor=new xe.XYCursor,pe.series.length>15&&(v.scrollbarX=new Me.Scrollbar)}_createXYChart(v){const{chartDiv:M,chartsModule:I,mediaInfo:R}=v,{type:ee}=R,{am4core:pe,am4charts:Me}=I,xe=pe.create(M,Me.XYChart);return xe.rtl=(0,Ar.dZ)(this.container),"column-chart"===ee&&this._createColumnChart(xe,v),"bar-chart"===ee&&this._createBarChart(xe,v),"line-chart"===ee&&this._createLineChart(xe,v),xe}_clearMediaRefreshTimer(){const{_refreshTimer:v}=this;v&&(clearTimeout(v),this._refreshTimer=null)}_updateMediaInfoTimestamp(v){const M=Date.now();this._refreshIntervalInfo={timestamp:M,sourceURL:v&&this._getImageSource(v,M)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:v}=this.viewModel;v&&"image"===v.type&&v.refreshInterval&&this._setRefreshTimeout(v)}_setRefreshTimeout(v){const{refreshInterval:M,value:I}=v;if(!M)return;const R=6e4*M;this._updateMediaInfoTimestamp(I.sourceURL);const ee=setInterval(()=>{this._updateMediaInfoTimestamp(I.sourceURL)},R);this._refreshTimer=ee}_getImageSource(v,M){const I=v.includes("?")?"&":"?",[R,ee=""]=v.split("#");return`${R}${I}timestamp=${M}${ee?"#":""}${ee}`}};(0,w._)([(0,C.Cb)()],Pn.prototype,"attributes",null),(0,w._)([(0,C.Cb)()],Pn.prototype,"activeMediaInfoIndex",null),(0,w._)([(0,C.Cb)()],Pn.prototype,"description",null),(0,w._)([(0,C.Cb)()],Pn.prototype,"fieldInfoMap",null),(0,w._)([(0,C.Cb)()],Pn.prototype,"layer",null),(0,w._)([(0,C.Cb)()],Pn.prototype,"mediaInfos",null),(0,w._)([(0,C.Cb)()],Pn.prototype,"popupTemplate",null),(0,w._)([(0,C.Cb)()],Pn.prototype,"relatedInfos",null),(0,w._)([(0,C.Cb)()],Pn.prototype,"title",null),(0,w._)([(0,C.Cb)({type:eo})],Pn.prototype,"viewModel",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Feature/t9n/Feature")],Pn.prototype,"messages",void 0),Pn=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureMedia")],Pn);const Sc=Pn;g(21777),g(72560),g(47709),g(10825);var _p=g(8810),vp=g(21303),Tc=(g(60647),g(82797)),Ep=g(53986),bp=g(36102);const Mp=["$datastore","$map","$layer","$aggregatedfeatures"],Op=k.Z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function Pp(v){return"string"==typeof v?An(ei(v)):Array.isArray(v)?function Sp(v){return`<ul class="esri-widget__list">${v.map(M=>`<li>${"string"==typeof M?An(ei(M)):M}</li>`).join("")}</ul>`}(v):"esri.arcade.Dictionary"===v?.declaredClass?function Tp(v){return`<table class="esri-widget__table">${v.keys().map(M=>{const I=v.field(M);return`<tr><th>${M}</th><td>${"string"==typeof I?An(ei(I)):I}</td></tr>`}).join("")}</table>`}(v):v}function Ic(){return Promise.all([g.e(8592),g.e(5425)]).then(g.bind(g,55425))}function Dp(v){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,x.Z)(function*({graphic:v,view:M}){const{isAggregate:I,layer:R}=v;if(!I||!R||"2d"!==M?.type)return[];const ee=yield M.whenLayerView(R);if(!function wp(v){return"createQuery"in v&&"queryFeatures"in v}(ee))return[];const pe=ee.createQuery(),Me=v.getObjectId();pe.aggregateIds=null!=Me?[Me]:[];const{features:xe}=yield ee.queryFeatures(pe);return xe})).apply(this,arguments)}function wc(v){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,x.Z)(function*({expressionInfo:v,arcadeUtils:M,interceptor:I,spatialReference:R,map:ee,graphic:pe,view:Me}){if(!v||!v.expression)return null;const xe=M.createSyntaxTree(v.expression),ze=Mp.filter(Ft=>M.hasVariable(xe,Ft)),[st]=yield Promise.all([Dp({graphic:pe,view:Me}),M.loadScriptDependencies(xe,!0,ze)]),ut=M.getViewInfo({spatialReference:R}),Ct=M.createExecContext(pe,ut);Ct.interceptor=I,Ct.useAsync=!0,function Ip({aggregatedFeatures:v,arcadeUtils:M,featureSetVars:I,context:R,viewInfo:ee,map:pe,graphic:Me,interceptor:xe}){I.forEach(ze=>{const st=ze.toLowerCase(),ut=ee.sr;if("$map"===st&&(R.vars[st]=M.convertMapToFeatureSetCollection({map:pe,spatialReference:ut,interceptor:xe})),"$layer"===st&&(R.vars[st]=M.convertFeatureLayerToFeatureSet({layer:Me.sourceLayer,spatialReference:ut,interceptor:xe})),"$datastore"===st&&(R.vars[st]=M.convertServiceUrlToWorkspace({url:Me.sourceLayer.url,spatialReference:ut,interceptor:xe})),"$aggregatedfeatures"===st){const Gt=Me.layer,{fields:Ft,objectIdField:ps,geometryType:Ps,spatialReference:Is,displayField:zs}=Gt,fr=new bp.default({fields:Ft,objectIdField:ps,geometryType:Ps,spatialReference:Is,displayField:zs,..."feature"===Gt.type?{templates:Gt.templates,typeIdField:Gt.typeIdField,types:Gt.types}:null,source:v});R.vars[st]=M.convertFeatureLayerToFeatureSet({layer:fr,spatialReference:Is,interceptor:xe})}})}({aggregatedFeatures:st,arcadeUtils:M,featureSetVars:ze,context:Ct,viewInfo:ut,map:ee,graphic:pe,interceptor:I});const Gt=M.createFunction(xe,Ct);return M.executeAsyncFunction(Gt,Ct).catch(Ft=>Op.error("arcade-execution-error",{error:Ft,graphic:pe,expressionInfo:v}))})).apply(this,arguments)}function Ap(v){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,x.Z)(function*({expressionInfos:v,spatialReference:M,graphic:I,interceptor:R,map:ee,view:pe}){if(!v||!v.length)return{};const Me=yield Ic(),xe={};for(const ut of v)xe[`expression/${ut.name}`]=wc({expressionInfo:ut,arcadeUtils:Me,interceptor:R,spatialReference:M,map:ee,graphic:I,view:pe});const ze=yield(0,z.as)(xe),st={};for(const ut in ze)st[ut]=Pp(ze[ut].value);return st})).apply(this,arguments)}let jn=class extends((0,ui.p)(he.Z)){constructor(v){var M;super(v),M=this,this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:I}=this;I&&I.abort(),this._abortController=null},this._createVM=()=>{const I=this.contentElement?.type;this.contentElementViewModel?.destroy();const R="fields"===I?new So:"media"===I?new eo:"text"===I?new qi:null;this._set("contentElementViewModel",R)},this._compile=(0,x.Z)(function*(){M._cancelQuery();const I=new AbortController;M._abortController=I,yield M._compileExpression(),M._abortController===I&&(M._abortController=null)}),this._compileThrottled=(0,mr.P)(this._compile,1,this),this._compileExpression=(0,x.Z)(function*(){const{expressionInfo:I,graphic:R,interceptor:ee,spatialReference:pe,map:Me,view:xe,_abortController:ze}=M;if(!(I&&R&&pe&&Me))return void M._set("contentElement",null);const st=yield Ic();if(ze!==M._abortController)return;const ut=yield wc({arcadeUtils:st,expressionInfo:I,graphic:R,interceptor:ee,map:Me,spatialReference:pe,view:xe});if(!ut||"esri.arcade.Dictionary"!==ut.declaredClass)return void M._set("contentElement",null);const Ct=yield ut.castAsJsonAsync(ze?.signal),Gt=Ct?.type,Ft="media"===Gt?vp.Z.fromJSON(Ct):"text"===Gt?Tc.Z.fromJSON(Ct):"fields"===Gt?_p.Z.fromJSON(Ct):null;M._set("contentElement",Ft)}),this.handles.add([(0,bt.YP)(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),bt.nn),(0,bt.YP)(()=>[this.contentElement],()=>this._createVM(),bt.nn)])}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(v){this._override("spatialReference",v)}get state(){const{_abortController:v,contentElement:M,contentElementViewModel:I}=this;return v?"loading":M||I?"ready":"disabled"}get map(){return this.view?.map??null}set map(v){this._override("map",v)}};(0,w._)([(0,C.Cb)()],jn.prototype,"_abortController",void 0),(0,w._)([(0,C.Cb)({type:Ep.Z})],jn.prototype,"expressionInfo",void 0),(0,w._)([(0,C.Cb)({type:Wt.Z})],jn.prototype,"graphic",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],jn.prototype,"contentElement",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],jn.prototype,"contentElementViewModel",void 0),(0,w._)([(0,C.Cb)()],jn.prototype,"interceptor",void 0),(0,w._)([(0,C.Cb)()],jn.prototype,"spatialReference",null),(0,w._)([(0,C.Cb)({readOnly:!0})],jn.prototype,"state",null),(0,w._)([(0,C.Cb)()],jn.prototype,"map",null),(0,w._)([(0,C.Cb)()],jn.prototype,"view",void 0),jn=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],jn);const Xl=jn;let qa=class extends fs.Z{constructor(v,M){super(v,M),this._contentWidget=null,this.viewModel=new Xl}initialize(){this.addHandles((0,bt.YP)(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),bt.nn))}destroy(){this._destroyContentWidget()}renderLoading(){return(0,Mt.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},(0,Mt.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}render(){const{state:v}=this.viewModel;return(0,Mt.u)("div",{class:"esri-feature-expression"},"loading"===v?this.renderLoading():"disabled"===v?null:this._contentWidget?.render())}_destroyContentWidget(){const{_contentWidget:v}=this;v&&(v.viewModel=null,v.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:v,contentElement:M}=this.viewModel,I=M?.type;this._destroyContentWidget();const R=v?"fields"===I?new To({viewModel:v}):"media"===I?new Sc({viewModel:v}):"text"===I?new Ii({viewModel:v}):null:null;this._contentWidget=R,this.scheduleRender()}};(0,w._)([(0,C.Cb)({type:Xl})],qa.prototype,"viewModel",void 0),qa=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureExpression")],qa);const Lp=qa;var Rp=g(94904),Lo=g(20711);let Or=class extends((0,Rp.J)((0,Lo.IG)((0,ui.p)(he.Z)))){constructor(v){var M;super(v),M=this,this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:I}=this;I&&I.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:I}=this;I&&I.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:I}=this;I&&I.abort(),this._queryPageAbortController=null},this._queryController=(0,x.Z)(function*(){M._cancelQuery();const I=new AbortController;M._queryAbortController=I,yield(0,z.R8)(M._query()),M._queryAbortController===I&&(M._queryAbortController=null)}),this._queryFeatureCountController=(0,x.Z)(function*(){M._cancelQueryFeatureCount();const I=new AbortController;M._queryFeatureCountAbortController=I,yield(0,z.R8)(M._queryFeatureCount()),M._queryFeatureCountAbortController===I&&(M._queryFeatureCountAbortController=null)}),this._queryPageController=(0,x.Z)(function*(){const I=new AbortController;M._queryPageAbortController=I,yield(0,z.R8)(M._queryPage()),M._queryPageAbortController===I&&(M._queryPageAbortController=null)}),this._queryThrottled=(0,mr.P)(this._queryController,100,this),this._queryFeatureCountThrottled=(0,mr.P)(this._queryFeatureCountController,100,this),this._queryPageThrottled=(0,mr.P)(this._queryPageController,100,this),this._query=(0,x.Z)(function*(){const{_queryAbortController:I,relatedFeatures:R}=M;M._destroyRelatedFeatureViewModels(),M.featurePage=1,R.removeAll(),R.addMany(M._sliceFeatures(yield M._queryRelatedFeatures({signal:I?.signal})))}),this.handles.add([(0,bt.YP)(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryThrottled(),bt.nn),(0,bt.YP)(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),(0,bt.YP)(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(v){const{featuresPerPage:M,featureCount:I}=this,ee=Math.ceil(I/M)||1;this._set("featurePage",Math.min(Math.max(v,1),ee))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:v,relatedLayer:M}=this;return v&&M?.loaded?v.map(I=>{const R=I.clone(),ee=Fs(I.field,M);return R.field=ee,R}):v??[]}get supportsCacheHint(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}get canQuery(){const v=this.layer?.capabilities?.queryRelated;return!!(this.relatedLayer&&this.relationship&&"number"==typeof this.relationshipId&&"number"==typeof this.objectId&&v?.supportsCount&&v?.supportsPagination)}get itemDescriptionFieldName(){return this.orderByFieldsFixedCasing?.[0]?.field||null}set displayCount(v){this._set("displayCount",Math.min(Math.max(v,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){return(this.objectIdField&&this.graphic?.attributes?.[this.objectIdField])??null}get objectIdField(){return this.layer?.objectIdField||null}get relatedFeatures(){return this._get("relatedFeatures")||new V.Z}get relatedLayer(){const{layer:v,map:M,relationship:I}=this;return v?.loaded&&M&&I?function Eo(v,M,I){return v&&M&&I?sa(v.allLayers,M,I)||sa(v.allTables,M,I):null}(M,v,I)??null:null}get relationship(){const{relationshipId:v,layer:M}=this;return"number"==typeof v?M?.relationships?.find(({id:I})=>I===v)??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new V.Z}get state(){const{_queryAbortController:v,_queryFeatureCountAbortController:M,_queryPageAbortController:I,canQuery:R}=this;return M?"loading":v||I?"querying":R?"ready":"disabled"}_destroyRelatedFeatureViewModels(){this.relatedFeatureViewModels?.forEach(v=>!v.destroyed&&v.destroy()),this.relatedFeatureViewModels.removeAll()}_queryFeatureCount(){var v=this;return(0,x.Z)(function*(){const{layer:M,relatedLayer:I,relationshipId:R,objectId:ee,_queryFeatureCountAbortController:pe,canQuery:Me,supportsCacheHint:xe}=v;if(yield M?.load(),yield I?.load(),!Me||!M||!I)return void v._set("featureCount",0);const ze=I.createQuery(),st=new $l.default({cacheHint:xe,relationshipId:R,returnGeometry:!1,objectIds:[ee],where:(0,ce.yl)(ze.where,void 0)}),ut=yield M.queryRelatedFeaturesCount(st,{signal:pe?.signal});v._set("featureCount",ut[ee]||0)})()}_sliceFeatures(v){const{showAllEnabled:M,displayCount:I}=this;return M?v:I?v.slice(0,I):[]}_queryPage(){var v=this;return(0,x.Z)(function*(){const{relatedFeatures:M,featurePage:I,showAllEnabled:R,_queryPageAbortController:ee}=v;!R||I<2||M.addMany(yield v._queryRelatedFeatures({signal:ee?.signal}))})()}_queryRelatedFeatures(v){var M=this;return(0,x.Z)(function*(){const{orderByFieldsFixedCasing:I,showAllEnabled:R,featuresPerPage:ee,displayCount:pe,layer:Me,relationshipId:xe,featurePage:ze,featureCount:st,relatedLayer:ut,supportsCacheHint:Ct}=M,{canQuery:Gt,objectId:Ft}=M;if(!Gt||!Me||!ut)return[];const ps=R?((ze-1)*ee+st)%st:0,Ps=R?ee:pe,Is=ut.objectIdField,zs=[...I?.map(Mr=>Mr.field),Is].filter(ce.pC),fr=I?.map(Mr=>`${Mr.field} ${Mr.order}`),Ys=ut.createQuery(),ar=new $l.default({orderByFields:fr,start:ps,num:Ps,outFields:zs,cacheHint:Ct,relationshipId:xe,returnGeometry:!1,objectIds:[Ft],where:(0,ce.yl)(Ys.where,void 0)}),rr=(yield Me.queryRelatedFeatures(ar,{signal:v?.signal}))[Ft]?.features||[];return rr.forEach(Mr=>{Mr.sourceLayer=ut,Mr.layer=ut}),rr})()}};(0,w._)([(0,C.Cb)()],Or.prototype,"_queryAbortController",void 0),(0,w._)([(0,C.Cb)()],Or.prototype,"_queryPageAbortController",void 0),(0,w._)([(0,C.Cb)()],Or.prototype,"_queryFeatureCountAbortController",void 0),(0,w._)([(0,C.Cb)({value:1})],Or.prototype,"featurePage",null),(0,w._)([(0,C.Cb)()],Or.prototype,"featuresPerPage",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"orderByFieldsFixedCasing",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"supportsCacheHint",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"canQuery",null),(0,w._)([(0,C.Cb)()],Or.prototype,"description",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"itemDescriptionFieldName",null),(0,w._)([(0,C.Cb)({value:3})],Or.prototype,"displayCount",null),(0,w._)([(0,C.Cb)({type:Wt.Z})],Or.prototype,"graphic",void 0),(0,w._)([(0,C.Cb)()],Or.prototype,"layer",void 0),(0,w._)([(0,C.Cb)()],Or.prototype,"map",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"objectId",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"objectIdField",null),(0,w._)([(0,C.Cb)()],Or.prototype,"orderByFields",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"relatedFeatures",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"relatedLayer",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"relationship",null),(0,w._)([(0,C.Cb)()],Or.prototype,"featureCount",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Or.prototype,"relatedFeatureViewModels",null),(0,w._)([(0,C.Cb)()],Or.prototype,"relationshipId",void 0),(0,w._)([(0,C.Cb)()],Or.prototype,"showAllEnabled",void 0),(0,w._)([(0,C.Cb)()],Or.prototype,"state",null),(0,w._)([(0,C.Cb)()],Or.prototype,"title",void 0),Or=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],Or);const eu=Or;var Zn=g(55713);const ha="esri-feature",tu=`${ha}-relationship`,fi={base:tu,esriWidget:"esri-widget",listContainer:`${tu}__list`,listContainerQuerying:`${tu}__list--querying`,featureObserver:`${ha}__feature-observer`,stickySpinnerContainer:`${ha}__sticky-loading-container`,loadingSpinnerContainer:`${ha}__loading-container`,spinner:`${ha}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},Dc={title:!0,description:!0};let En=class extends fs.Z{constructor(v,M){super(v,M),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([I])=>{I?.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new eu,this.messages=null,this.messagesCommon=null,this.visibleElements={...Dc},this._increaseFeaturePage=()=>{const{state:I,showAllEnabled:R,relatedFeatures:ee,featuresPerPage:pe,featurePage:Me}=this.viewModel;"ready"===I&&R&&ee.length>=pe*Me&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new Mo,this.addHandles([(0,bt.YP)(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),bt.nn),(0,bt.YP)(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),(0,bt.on)(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([Promise.all([g.e(3740),g.e(8592),g.e(6279)]).then(g.bind(g,36279)),Promise.all([g.e(8592),g.e(2322)]).then(g.bind(g,62322)),g.e(9024).then(g.bind(g,89024)),Promise.all([g.e(3740),g.e(1592)]).then(g.bind(g,11592))])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=(0,ce.SC)(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:v,featureCount:M,displayCount:I}=this.viewModel;return!v&&!!M&&(M>I||0===I)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(v){this.viewModel.description=v}get featureCountDescription(){const{messages:v}=this,{featureCount:M}=this.viewModel;return(0,Zn.n)(1===M?v?.numberRecord:v?.numberRecords,{number:M})}get title(){return this.viewModel.title}set title(v){this.viewModel.title=v}castVisibleElements(v){return{...Dc,...v}}renderStickyLoading(){return"querying"===this.viewModel.state?(0,Mt.u)("div",{key:"sticky-loader",class:fi.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return(0,Mt.u)("span",{class:this.classes(fi.iconLoading,fi.spinner)})}renderLoading(){return(0,Mt.u)("div",{key:"loading-container",class:fi.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return(0,Mt.u)("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const v=(0,Ar.dZ)(this.container)?"chevron-left":"chevron-right";return(0,Mt.u)("calcite-icon",{scale:"s",icon:v,slot:"content-end"})}renderRelatedFeature(v){const{itemDescriptionFieldName:M}=this.viewModel,I=v.title;v.description=M&&v.formattedAttributes?.global[M];const R="loading"===v.state;return(0,Mt.u)("calcite-list-item",{key:v.uid,label:R?`${this.messagesCommon?.loading}\u2026`:I,description:R?"\u2026":v.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:v})},this.renderChevronIconNode())}renderShowAllListItem(){return this.displayShowAllButton?(0,Mt.u)("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){return(0,Mt.u)("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},(0,Mt.u)("div",{slot:"message"},this.messages?.noRelatedFeatures))}renderFeatureObserver(){return(0,Mt.u)("div",{key:"feature-observer",class:fi.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:v}=this.viewModel;return(0,Mt.u)("calcite-list",null,v.toArray().map(M=>this.renderRelatedFeature(M)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:v}=this,{state:M}=this.viewModel;return(0,Mt.u)("div",{key:"list-container",class:this.classes(fi.listContainer,{[fi.listContainerQuerying]:"querying"===M})},v?this.renderList():"ready"===M?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){return(0,Mt.u)("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},(0,Mt.u)("div",{slot:"message"},this.messages?.relationshipNotFound))}render(){const{state:v}=this.viewModel;return(0,Mt.u)("div",{class:this.classes(fi.base,fi.esriWidget)},this._featureElementInfo?.render(),"loading"===v?this.renderLoading():"disabled"===v?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:v}=this.viewModel,M="related-feature-viewmodels";this.removeHandles(M),v?.forEach(I=>{this.addHandles((0,bt.YP)(()=>[I.title,I.state],()=>this.scheduleRender(),bt.nn),M)}),this.scheduleRender()}_setupFeatureElementInfo(){const{headingLevel:v,visibleElements:M}=this,I=M.description&&this.description,R=M.title&&this.title;this._featureElementInfo?.set({description:I,title:R,headingLevel:v})}_handleRelatedFeatureObserverChange(){var v=this;return(0,x.Z)(function*(){v._unobserveRelatedFeatureObserver();const{state:M,showAllEnabled:I}=v.viewModel;yield(0,z.e4)(0),v._relatedFeatureIntersectionObserverNode&&"ready"===M&&I&&v._relatedFeatureIntersectionObserver.observe(v._relatedFeatureIntersectionObserverNode)})()}_relatedFeatureIntersectionObserverCreated(v){this._relatedFeatureIntersectionObserverNode=v}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};(0,w._)([(0,C.Cb)()],En.prototype,"_relatedFeatureIntersectionObserverNode",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],En.prototype,"displayShowAllButton",null),(0,w._)([(0,C.Cb)({readOnly:!0})],En.prototype,"displayListItems",null),(0,w._)([(0,C.Cb)()],En.prototype,"description",null),(0,w._)([(0,C.Cb)({readOnly:!0})],En.prototype,"featureCountDescription",null),(0,w._)([(0,C.Cb)()],En.prototype,"headingLevel",void 0),(0,w._)([(0,C.Cb)()],En.prototype,"title",null),(0,w._)([(0,C.Cb)({type:eu})],En.prototype,"viewModel",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Feature/t9n/Feature")],En.prototype,"messages",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/t9n/common")],En.prototype,"messagesCommon",void 0),(0,w._)([(0,C.Cb)()],En.prototype,"visibleElements",void 0),(0,w._)([(0,ve.p)("visibleElements")],En.prototype,"castVisibleElements",null),En=(0,w._)([(0,F.j)("esri.widgets.Feature.FeatureRelationship")],En);const Ac=En;var pa;const xc="content-view-models",Lc="relationship-view-models",Rc={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let Rr=pa=class extends((0,Lo.IG)(he.Z)){constructor(v){super(v),this._handles=new ls.Z,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=(0,mr.P)(this._graphicChanged,1,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...Rc},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=M=>{const{abilities:I}=this;return"attachments"===M.type&&!!I.attachmentsContent||"custom"===M.type&&!!I.customContent||"fields"===M.type&&!!I.fieldsContent||"media"===M.type&&!!I.mediaContent||"text"===M.type&&!!I.textContent||"expression"===M.type&&!!I.expressionContent||"relationship"===M.type&&!!I.relationshipContent},this._handles.add((0,bt.YP)(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),bt.nn))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return(0,ce.pC)(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return function mn(v,M){const I=new Map;return v&&v.forEach(R=>{const ee=Fs(R.fieldName,M);R.fieldName=ee,I.set(ee.toLowerCase(),R)}),I}(Gr(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return Dr(this.graphic)}castAbilities(v){return{...Rc,...v}}get isTable(){return this._sourceLayer?.isTable||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(v){this._set("graphic",v?v.clone():null)}get spatialReference(){return this.view?.spatialReference??null}set spatialReference(v){this._override("spatialReference",v)}get map(){return this.view?.map||null}set map(v){this._override("map",v)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(v,M){const I=this.contentViewModels[v];I instanceof eo&&I.setActiveMedia(M)}nextMedia(v){const M=this.contentViewModels[v];M instanceof eo&&M.next()}previousMedia(v){const M=this.contentViewModels[v];M instanceof eo&&M.previous()}updateGeometry(){var v=this;return(0,x.Z)(function*(){const{graphic:M,spatialReference:I,_sourceLayer:R}=v;yield R?.load();const ee=R?.objectIdField;if(!ee||!M||!R)return;const pe=M?.attributes?.[ee];if(null==pe)return;const Me=[pe];if(!M.geometry){const xe=(yield yn({layer:R,graphic:M,outFields:[],objectIds:Me,returnGeometry:!0,spatialReference:I}))?.geometry;xe&&(M.geometry=xe)}})()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}_graphicChanged(){var v=this;return(0,x.Z)(function*(){v._cancelFeatureQuery(),v._error=null,v._clear();const{graphic:M}=v;if(!M)return;const I=new AbortController;v._featureAbortController=I;try{yield v._queryFeature({signal:I.signal})}catch(R){(0,z.D_)(R)||(v._error=R,k.Z.getLogger(v.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:R,graphic:M,popupTemplate:v._effectivePopupTemplate}))}v._featureAbortController===I&&(v._featureAbortController=null)})()}_cancelFeatureQuery(){const{_featureAbortController:v}=this;v&&v.abort(),this._featureAbortController=null}_compileContentElement(v,M){return"attachments"===v.type?this._compileAttachments(v,M):"custom"===v.type?this._compileCustom(v,M):"fields"===v.type?this._compileFields(v,M):"media"===v.type?this._compileMedia(v,M):"text"===v.type?this._compileText(v,M):"expression"===v.type?this._compileExpression(v,M):"relationship"===v.type?this._compileRelationship(v,M):void 0}_compileContent(v){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(v)?v.filter(this._isAllowedContentType).map((M,I)=>this._compileContentElement(M,I)).filter(ce.pC):"string"==typeof v?this._compileText(new Tc.Z({text:v}),0).text:v}_destroyContentViewModels(){this._handles?.remove(Lc),this._handles?.remove(xc),this.contentViewModels.forEach(v=>v&&!v.destroyed&&v.destroy()),this._set("contentViewModels",[])}_matchesFeature(v,M){const I=v?.graphic?.getObjectId(),R=M?.getObjectId();return(0,ce.pC)(I)&&(0,ce.pC)(R)&&I===R}_setRelatedFeaturesViewModels({relatedFeatureViewModels:v,relatedFeatures:M,map:I}){const{view:R,spatialReference:ee}=this;M?.filter(Boolean).forEach(pe=>{v.find(Me=>this._matchesFeature(Me,pe))||v.add(new pa({abilities:{relationshipContent:!1},map:I,view:R,spatialReference:ee,graphic:pe}))}),v.forEach(pe=>{M?.find(xe=>this._matchesFeature(pe,xe))||v.remove(pe)})}_setExpressionContentVM(v,M){const I=this.formattedAttributes,{contentElement:R,contentElementViewModel:ee}=v,pe=R?.type;ee&&pe&&("fields"===pe&&(this._createFieldsFormattedAttributes({contentElement:R,contentElementIndex:M,formattedAttributes:I}),ee.set(this._createFieldsVMParams(R,M))),"media"===pe&&(this._createMediaFormattedAttributes({contentElement:R,contentElementIndex:M,formattedAttributes:I}),ee.set(this._createMediaVMParams(R,M))),"text"===pe&&ee.set(this._createTextVMParams(R)))}_compileRelationship(v,M){const{displayCount:I,orderByFields:R,relationshipId:ee,title:pe,description:Me}=v,{_sourceLayer:xe,graphic:ze,map:st}=this,ut=new eu({displayCount:I,graphic:ze,orderByFields:R,relationshipId:ee,layer:xe,map:st,...this._compileTitleAndDesc({title:pe,description:Me})});return this.contentViewModels[M]=ut,this._handles.add((0,bt.on)(()=>ut.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(ut)),Lc),v}_compileExpression(v,M){const{expressionInfo:I}=v,{graphic:R,map:ee,spatialReference:pe,view:Me}=this,xe=new Xl({expressionInfo:I,graphic:R,interceptor:pa.interceptor,map:ee,spatialReference:pe,view:Me});return this.contentViewModels[M]=xe,this._handles.add((0,bt.YP)(()=>xe.contentElementViewModel,()=>this._setExpressionContentVM(xe,M),bt.nn),xc),v}_compileAttachments(v,M){const{graphic:I}=this,{description:R,title:ee}=v;return this.contentViewModels[M]=new ia({graphic:I,...this._compileTitleAndDesc({title:ee,description:R})}),v}_compileCustom(v,M){const{graphic:I}=this,{creator:R,destroyer:ee}=v;return this.contentViewModels[M]=new qi({graphic:I,creator:R,destroyer:ee}),v}_compileTitleAndDesc({title:v,description:M}){const{_fieldInfoMap:I,_sourceLayer:R,graphic:ee,formattedAttributes:pe}=this,Me=ee?.attributes,xe=this._expressionAttributes,ze=pe.global;return{title:rn({attributes:Me,fieldInfoMap:I,globalAttributes:ze,expressionAttributes:xe,layer:R,text:v}),description:rn({attributes:Me,fieldInfoMap:I,globalAttributes:ze,expressionAttributes:xe,layer:R,text:M})}}_createFieldsVMParams(v,M){const I=this._effectivePopupTemplate,R=this.formattedAttributes,ee={...R?.global,...R?.content[M]},pe=(v?.fieldInfos||I?.fieldInfos)?.filter(({fieldName:st})=>tn(st)||Jn(st)||ee.hasOwnProperty(st)),Me=I?.expressionInfos,{description:xe,title:ze}=v;return{attributes:ee,expressionInfos:Me,fieldInfos:pe,...this._compileTitleAndDesc({title:ze,description:xe})}}_compileFields(v,M){const I=v.clone(),R=new So(this._createFieldsVMParams(v,M));return this.contentViewModels[M]=R,I.fieldInfos=R.formattedFieldInfos.slice(0),I}_createMediaVMParams(v,M){const{abilities:I,graphic:R,_fieldInfoMap:ee,_effectivePopupTemplate:pe,relatedInfos:Me,_sourceLayer:xe,_expressionAttributes:ze}=this,st=this.formattedAttributes,ut=R?.attributes??{},{description:Ct,mediaInfos:Gt,title:Ft}=v;return{abilities:{chartAnimation:I.chartAnimation},activeMediaInfoIndex:v.activeMediaInfoIndex||0,attributes:ut,isAggregate:R?.isAggregate,layer:xe,fieldInfoMap:ee,formattedAttributes:{...st?.global,...st?.content[M]},expressionAttributes:ze,mediaInfos:Gt,popupTemplate:pe,relatedInfos:Me,...this._compileTitleAndDesc({title:Ft,description:Ct})}}_compileMedia(v,M){const I=v.clone(),R=new eo(this._createMediaVMParams(v,M));return I.mediaInfos=R.formattedMediaInfos.slice(0),this.contentViewModels[M]=R,I}_createTextVMParams(v){const{graphic:M,_fieldInfoMap:I,_sourceLayer:R,_expressionAttributes:ee}=this;return v&&v.text&&(v.text=rn({attributes:M?.attributes??{},fieldInfoMap:I,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:ee,layer:R,text:v.text})),{graphic:M,creator:v.text}}_compileText(v,M){const I=v.clone();return this.contentViewModels[M]=new qi(this._createTextVMParams(I)),I}_compileLastEditInfo(){const{_effectivePopupTemplate:v,_sourceLayer:M,graphic:I}=this;if(!v)return;const{lastEditInfoEnabled:R}=v,ee=M?.editFieldsInfo;return R&&ee?function fn(v,M){const{creatorField:I,creationDateField:R,editorField:ee,editDateField:pe}=v;if(!M)return;const Me=M[pe];if("number"==typeof Me){const ze=M[ee];return{type:"edit",date:(0,gt.p6)(Me,zr),user:ze}}const xe=M[R];if("number"==typeof xe){const ze=M[I];return{type:"create",date:(0,gt.p6)(xe,zr),user:ze}}return null}(ee,I?.attributes):void 0}_compileTitle(v){const{_fieldInfoMap:M,_sourceLayer:I,graphic:R,_expressionAttributes:ee}=this;return rn({attributes:R?.attributes??{},fieldInfoMap:M,globalAttributes:this.formattedAttributes?.global??{},expressionAttributes:ee,layer:I,text:v})}_getTitle(){var v=this;return(0,x.Z)(function*(){const{_effectivePopupTemplate:M,graphic:I}=v;if(!I)return null;const R=M?.title;return Cn(R,{graphic:I})})()}_getContent(){var v=this;return(0,x.Z)(function*(){const{_effectivePopupTemplate:M,graphic:I}=v;if(!I)return null;const R=M?.content;return Cn(R,{graphic:I})})()}_queryFeature(v){var M=this;return(0,x.Z)(function*(){const{_featureAbortController:I,_sourceLayer:R,graphic:ee,_effectivePopupTemplate:pe}=M,Me=M.map,xe=M.view,ze=M.spatialReference;if(I!==M._featureAbortController||!ee)return;yield function Tl(v,M){return Wn.apply(this,arguments)}({graphic:ee,popupTemplate:pe,layer:R,spatialReference:ze},v);const{content:{value:st},title:{value:ut}}=yield(0,z.as)({content:M._getContent(),title:M._getTitle()}),{expressionAttributes:{value:Ct}}=yield(0,z.as)({checkForRelatedFeatures:M._checkForRelatedFeatures(v),expressionAttributes:Ap({expressionInfos:pe?.expressionInfos,spatialReference:ze,graphic:ee,map:Me,interceptor:pa.interceptor,view:xe})});I===M._featureAbortController&&ee&&(M._expressionAttributes=Ct,M._graphicExpressionAttributes={...ee.attributes,...Ct},M._set("formattedAttributes",M._createFormattedAttributes(st)),M._set("title",M._compileTitle(ut)),M._set("lastEditInfo",M._compileLastEditInfo()||null),M._set("content",M._compileContent(st)||null))})()}_createMediaFormattedAttributes({contentElement:v,contentElementIndex:M,formattedAttributes:I}){const{_effectivePopupTemplate:R,graphic:ee,relatedInfos:pe,_sourceLayer:Me,_fieldInfoMap:xe,_graphicExpressionAttributes:ze}=this;I.content[M]=ta({fieldInfos:R?.fieldInfos,graphic:ee,attributes:{...ze,...v.attributes},layer:Me,fieldInfoMap:xe,relatedInfos:pe})}_createFieldsFormattedAttributes({contentElement:v,contentElementIndex:M,formattedAttributes:I}){if(v.fieldInfos){const{graphic:R,relatedInfos:ee,_sourceLayer:pe,_fieldInfoMap:Me,_graphicExpressionAttributes:xe}=this;I.content[M]=ta({fieldInfos:v.fieldInfos,graphic:R,attributes:{...xe,...v.attributes},layer:pe,fieldInfoMap:Me,relatedInfos:ee})}}_createFormattedAttributes(v){const{_effectivePopupTemplate:M,graphic:I,relatedInfos:R,_sourceLayer:ee,_fieldInfoMap:pe,_graphicExpressionAttributes:Me}=this,xe=M?.fieldInfos,ze={global:ta({fieldInfos:xe,graphic:I,attributes:Me,layer:ee,fieldInfoMap:pe,relatedInfos:R}),content:[]};return Array.isArray(v)&&v.forEach((st,ut)=>{"fields"===st.type&&this._createFieldsFormattedAttributes({contentElement:st,contentElementIndex:ut,formattedAttributes:ze}),"media"===st.type&&this._createMediaFormattedAttributes({contentElement:st,contentElementIndex:ut,formattedAttributes:ze})}),ze}_checkForRelatedFeatures(v){const{graphic:M,_effectivePopupTemplate:I}=this;return this._queryRelatedInfos(M,Gr(I),v)}_queryRelatedInfos(v,M,I){var R=this;return(0,x.Z)(function*(){const{relatedInfos:ee,_sourceLayer:pe}=R;ee.clear();const Me=(0,ce.pC)(pe?.associatedLayer)?yield pe?.associatedLayer.load(I):pe;if(!Me||!v)return;const xe=M.filter(ut=>ut&&Jn(ut.fieldName));if(!xe||!xe.length)return;M.forEach(ut=>R._configureRelatedInfo(ut,Me));const ze=yield function np({relatedInfos:v,layer:M},I){const R={};return v.forEach((ee,pe)=>{const{relation:Me}=ee;if(!Me){const Ct=new U.Z("relation-required","A relation is required on a layer to retrieve related records.");throw vc.error(Ct),Ct}const{relatedTableId:xe}=Me;if("number"!=typeof xe){const Ct=new U.Z("A related table ID is required on a layer to retrieve related records.");throw vc.error(Ct),Ct}const ze=`${M.url}/${xe}`,st=Ec.get(ze),ut=st||function rp(v,M){return(0,ka.default)(v,{query:{f:"json"},signal:M&&M.signal})}(ze);st||Ec.set(ze,ut),R[pe]=ut}),(0,z.Hl)((0,z.as)(R),I)}({relatedInfos:ee,layer:Me},I);Object.keys(ze).forEach(ut=>{const Ct=ee.get(ut.toString()),Gt=ze[ut]?.value;Ct&&Gt&&(Ct.layerInfo=Gt.data)});const st=yield function ip({graphic:v,relatedInfos:M,layer:I},R){const ee={};return M.forEach((pe,Me)=>{pe.layerInfo&&(ee[Me]=function sp(v,M,I,R){return Kl.apply(this,arguments)}(v,pe,I,R))}),(0,z.as)(ee)}({graphic:v,relatedInfos:ee,layer:Me},I);Object.keys(st).forEach(ut=>{!function qh(v,M){if(!M||!v)return;const{features:I,statsFeatures:R}=v,ee=I&&I.value;M.relatedFeatures=ee?ee.features:[];const pe=R&&R.value;M.relatedStatsFeatures=pe?pe.features:[]}(st[ut]?.value,ee.get(ut.toString()))})})()}_configureRelatedInfo(v,M){const{relatedInfos:I}=this,R=Ja(v.fieldName);if(!R)return;const{layerId:ee,fieldName:pe}=R;if(!ee)return;const Me=I.get(ee.toString())||function Xh(v,M){const I=function Jh(v,M){if(!M.relationships)return null;let I=null;const{relationships:R}=M;return R.some(ee=>ee.id===parseInt(v,10)&&(I=ee,!0)),I}(v,M);if(I)return{url:`${M.url}/${I.relatedTableId}`,sourceSpatialReference:M.spatialReference,relation:I,relatedFields:[],outStatistics:[]}}(ee,M);Me&&(function op({relatedInfo:v,fieldName:M,fieldInfo:I}){if(v.relatedFields?.push(M),I.statisticType){const R=new Hh.Z({statisticType:I.statisticType,onStatisticField:M,outStatisticFieldName:M});v.outStatistics?.push(R)}}({relatedInfo:Me,fieldName:pe,fieldInfo:v}),this.relatedInfos.set(ee,Me))}};Rr.interceptor=new class jp{constructor(M,I){this.preLayerQueryCallback=M,this.preRequestCallback=I,this.preLayerQueryCallback||(this.preLayerQueryCallback=R=>{}),this.preRequestCallback||(this.preLayerQueryCallback=R=>{})}}(({query:v,layer:M,method:I})=>{ai({layer:M,method:I,query:v,definitionExpression:`${M.definitionExpression} ${M.serviceDefinitionExpression}`})},({queryPayload:v,layer:M,method:I})=>{ai({layer:M,method:I,query:v,definitionExpression:`${M.definitionExpression} ${M.serviceDefinitionExpression}`})}),(0,w._)([(0,C.Cb)()],Rr.prototype,"_error",void 0),(0,w._)([(0,C.Cb)()],Rr.prototype,"_featureAbortController",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"_effectivePopupTemplate",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"_fieldInfoMap",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"_sourceLayer",null),(0,w._)([(0,C.Cb)()],Rr.prototype,"abilities",void 0),(0,w._)([(0,ve.p)("abilities")],Rr.prototype,"castAbilities",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"content",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"contentViewModels",void 0),(0,w._)([(0,C.Cb)()],Rr.prototype,"description",void 0),(0,w._)([(0,C.Cb)({type:Boolean})],Rr.prototype,"defaultPopupTemplateEnabled",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"isTable",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"state",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"formattedAttributes",void 0),(0,w._)([(0,C.Cb)({type:Wt.Z,value:null})],Rr.prototype,"graphic",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"lastEditInfo",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"relatedInfos",void 0),(0,w._)([(0,C.Cb)()],Rr.prototype,"spatialReference",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"title",void 0),(0,w._)([(0,C.Cb)()],Rr.prototype,"map",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Rr.prototype,"waitingForContent",null),(0,w._)([(0,C.Cb)()],Rr.prototype,"view",void 0),Rr=pa=(0,w._)([(0,F.j)("esri.widgets.FeatureViewModel")],Rr);const su=Rr,on="esri-feature",Fr={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:on,container:`${on}__size-container`,title:`${on}__title`,main:`${on}__main-container`,btn:`${on}__button`,icon:`${on}__icon`,content:`${on}__content`,contentNode:`${on}__content-node`,contentElement:`${on}__content-element`,text:`${on}__text`,lastEditedInfo:`${on}__last-edited-info`,fields:`${on}__fields`,fieldHeader:`${on}__field-header`,fieldData:`${on}__field-data`,fieldDataDate:`${on}__field-data--date`,loadingSpinnerContainer:`${on}__loading-container`,spinner:`${on}__loading-spinner`},jc=v=>{let M=class extends v{constructor(){super(...arguments),this.renderNodeContent=I=>(0,un.Qd)(I)&&!I.destroyed?(0,Mt.u)("div",{class:Fr.contentNode,key:I},I.render()):I instanceof HTMLElement?(0,Mt.u)("div",{class:Fr.contentNode,key:I,bind:I,afterCreate:this._attachToNode}):(0,un.o)(I)?(0,Mt.u)("div",{class:Fr.contentNode,key:I,bind:I.domNode,afterCreate:this._attachToNode}):null}_attachToNode(I){I.appendChild(this)}};return M=(0,w._)([(0,F.j)("esri.widgets.Feature.ContentMixin")],M),M};var ru;const Uc={title:!0,content:!0,lastEditedInfo:!0},Fc="relationship-handles";let Xr=ru=class extends(jc(fs.Z)){constructor(v,M){super(v,M),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...Uc},this.viewModel=new su}initialize(){this.addHandles((0,bt.YP)(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),bt.nn))}loadDependencies(){return Promise.all([g.e(3740),g.e(1592)]).then(g.bind(g,11592))}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(v){this.viewModel.graphic=v}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(v){this.viewModel.defaultPopupTemplateEnabled=v}get isTable(){return this.viewModel.isTable}get label(){return this.messages?.widgetLabel??""}set label(v){this._overrideIfSome("label",v)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(v){this.viewModel.spatialReference=v}get title(){return this.viewModel.title}castVisibleElements(v){return{...Uc,...v}}get map(){return this.viewModel.map}set map(v){this.viewModel.map=v}get view(){return this.viewModel.view}set view(v){this.viewModel.view=v}render(){const{state:v}=this.viewModel,M=(0,Mt.u)("div",{class:Fr.container,key:"container"},this.renderTitle(),"error"===v?this.renderError():"loading"===v?this.renderLoading():this.renderContentContainer());return(0,Mt.u)("div",{class:this.classes(Fr.base,Fr.esriWidget)},M)}setActiveMedia(v,M){return this.viewModel.setActiveMedia(v,M)}nextMedia(v){return this.viewModel.nextMedia(v)}previousMedia(v){return this.viewModel.previousMedia(v)}renderError(){const{messagesCommon:v,messages:M,visibleElements:I}=this;return(0,Mt.u)("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},I.title?(0,Mt.u)("div",{key:"error-title",slot:"title"},v.errorMessage):null,(0,Mt.u)("div",{key:"error-message",slot:"message"},M.loadingError))}renderLoading(){return(0,Mt.u)("div",{key:"loading-container",class:Fr.loadingSpinnerContainer},(0,Mt.u)("span",{class:this.classes(Fr.iconLoading,Fr.spinner)}))}renderContentContainer(){const{visibleElements:v}=this;return v.content?(0,Mt.u)("div",{class:Fr.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:v,title:M}=this;return v.title?(0,Mt.u)(oa,{level:this.headingLevel,class:Fr.title,innerHTML:M}):null}renderContent(){const v=this.viewModel.content,M="content";if(!v)return null;if(Array.isArray(v))return v.length?(0,Mt.u)("div",{class:Fr.contentNode,key:`${M}-content-elements`},v.map(this.renderContentElement,this)):null;if("string"==typeof v){const I=this._contentWidgets[0];return!I||I.destroyed?null:(0,Mt.u)("div",{class:Fr.contentNode,key:`${M}-content`},I.render())}return this.renderNodeContent(v)}renderContentElement(v,M){const{visibleElements:I}=this;if("boolean"!=typeof I.content&&!I.content?.[v.type])return null;switch(v.type){case"attachments":return this.renderAttachments(M);case"custom":return this.renderCustom(v,M);case"fields":return this.renderFields(M);case"media":return this.renderMedia(M);case"text":return this.renderText(v,M);case"expression":return this.renderExpression(M);case"relationship":return this.renderRelationship(M);default:return null}}renderAttachments(v){const M=this._contentWidgets[v];if(!M||M.destroyed)return null;const{state:I,attachmentInfos:R}=M.viewModel;return"loading"===I||R.length>0?(0,Mt.u)("div",{key:this._buildKey("attachments-element",v),class:this.classes(Fr.contentElement)},M.render()):null}renderRelationship(v){const M=this._contentWidgets[v];return M&&!M.destroyed&&this.flowItems?(0,Mt.u)("div",{key:this._buildKey("relationship-element",v),class:Fr.contentElement},M.render()):null}renderExpression(v){const M=this._contentWidgets[v];return!M||M.destroyed?null:(0,Mt.u)("div",{key:this._buildKey("expression-element",v),class:Fr.contentElement},M.render())}renderCustom(v,M){const{creator:I}=v,R=this._contentWidgets[M];return!R||R.destroyed?null:I?(0,Mt.u)("div",{key:this._buildKey("custom-element",M),class:Fr.contentElement},R.render()):null}renderFields(v){const M=this._contentWidgets[v];return!M||M.destroyed?null:(0,Mt.u)("div",{key:this._buildKey("fields-element",v),class:Fr.contentElement},M.render())}renderMedia(v){const M=this._contentWidgets[v];return!M||M.destroyed?null:(0,Mt.u)("div",{key:this._buildKey("media-element",v),class:Fr.contentElement},M.render())}renderLastEditInfo(){const{visibleElements:v,messages:M}=this,{lastEditInfo:I}=this.viewModel;if(!I||!v.lastEditedInfo)return null;const{date:R,user:ee}=I,Me=(0,Zn.n)("edit"===I.type?ee?M.lastEditedByUser:M.lastEdited:ee?M.lastCreatedByUser:M.lastCreated,{date:R,user:ee});return(0,Mt.u)("div",{key:"edit-info-element",class:this.classes(Fr.lastEditedInfo,Fr.contentElement)},Me)}renderText(v,M){const R=this._contentWidgets[M];return!R||R.destroyed?null:v.text?(0,Mt.u)("div",{key:this._buildKey("text-element",M),class:this.classes(Fr.contentElement,Fr.text)},R.render()):null}_buildKey(v,...M){return`${v}__${this.get("viewModel.graphic.uid")||"0"}-${M.join("-")}`}_destroyContentWidget(v){v&&(v.viewModel=null,!v.destroyed&&v.destroy())}_destroyContentWidgets(){this.removeHandles(Fc),this._contentWidgets.forEach(v=>this._destroyContentWidget(v)),this._contentWidgets=[]}_addFeatureRelationshipHandles(v){const{flowItems:M,visibleElements:I}=this;this.addHandles([(0,bt.on)(()=>v,"select-record",({featureViewModel:R})=>{M&&(R.abilities={relationshipContent:!0},M.push(new ru({flowItems:M,viewModel:R,visibleElements:I})))}),(0,bt.on)(()=>v,"show-all-records",()=>{if(!M)return;const{viewModel:R}=v;R.showAllEnabled=!0;const ee=new Ac({visibleElements:{title:!1,description:!1},viewModel:R});this._addFeatureRelationshipHandles(ee),M.push(ee)})],Fc)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:v,visibleElements:M}=this,I=this.get("viewModel.content"),{contentViewModels:R}=this.viewModel;if(Array.isArray(I))I.forEach((ee,pe)=>{if("attachments"===ee.type&&(this._contentWidgets[pe]=new Al({displayType:ee.displayType,headingLevel:M.title?v+1:v,viewModel:R[pe]})),"fields"===ee.type&&(this._contentWidgets[pe]=new To({viewModel:R[pe]})),"media"===ee.type&&(this._contentWidgets[pe]=new Sc({viewModel:R[pe]})),"text"===ee.type&&(this._contentWidgets[pe]=new Ii({viewModel:R[pe]})),"custom"===ee.type&&(this._contentWidgets[pe]=new Ii({viewModel:R[pe]})),"expression"===ee.type&&(this._contentWidgets[pe]=new Lp({viewModel:R[pe]})),"relationship"===ee.type){const Me=new Ac({viewModel:R[pe]});this._addFeatureRelationshipHandles(Me),this._contentWidgets[pe]=Me}},this);else{const ee=R[0];ee&&!ee.destroyed&&(this._contentWidgets[0]=new Ii({viewModel:ee}))}this.scheduleRender()}};(0,w._)([(0,C.Cb)()],Xr.prototype,"graphic",null),(0,w._)([(0,C.Cb)()],Xr.prototype,"defaultPopupTemplateEnabled",null),(0,w._)([(0,C.Cb)()],Xr.prototype,"flowItems",void 0),(0,w._)([(0,C.Cb)()],Xr.prototype,"headingLevel",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Xr.prototype,"isTable",null),(0,w._)([(0,C.Cb)()],Xr.prototype,"label",null),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Feature/t9n/Feature")],Xr.prototype,"messages",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/t9n/common")],Xr.prototype,"messagesCommon",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/support/t9n/uriUtils")],Xr.prototype,"messagesURIUtils",void 0),(0,w._)([(0,C.Cb)()],Xr.prototype,"spatialReference",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Xr.prototype,"title",null),(0,w._)([(0,C.Cb)()],Xr.prototype,"visibleElements",void 0),(0,w._)([(0,ve.p)("visibleElements")],Xr.prototype,"castVisibleElements",null),(0,w._)([(0,C.Cb)()],Xr.prototype,"map",null),(0,w._)([(0,C.Cb)()],Xr.prototype,"view",null),(0,w._)([(0,C.Cb)({type:su})],Xr.prototype,"viewModel",void 0),Xr=ru=(0,w._)([(0,F.j)("esri.widgets.Feature")],Xr);const Fp=Xr;var Bc;const el=Symbol("anchorHandles");let to=class extends le.Z.EventedAccessor{constructor(v){super(v),this[Bc]=new ls.Z,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[el].add([(0,bt.gx)(()=>(0,ce.yw)(this.screenLocationEnabled?this.view:null,M=>[M.size,"3d"===M.type?M.camera:M.viewpoint]),()=>this.notifyChange("screenLocation")),(0,bt.YP)(()=>this.screenLocation,(M,I)=>{(0,ce.pC)(M)&&(0,ce.pC)(I)&&this.emit("view-change")})])}destroy(){this.view=null,this[el]=(0,ce.SC)(this[el])}get screenLocation(){const{location:v,view:M,screenLocationEnabled:I}=this;return I&&(0,ce.pC)(v)&&(0,ce.pC)(M)&&M.ready?M.toScreen?.(v):null}};Bc=el,(0,w._)([(0,C.Cb)()],to.prototype,"location",void 0),(0,w._)([(0,C.Cb)()],to.prototype,"screenLocation",null),(0,w._)([(0,C.Cb)()],to.prototype,"screenLocationEnabled",void 0),(0,w._)([(0,C.Cb)()],to.prototype,"view",void 0),to=(0,w._)([(0,F.j)("esri.widgets.support.AnchorElementViewModel")],to);const Wc=to;let tl=class extends Wc{constructor(v){super(v),this.visible=!1}};(0,w._)([(0,C.Cb)()],tl.prototype,"visible",void 0),tl=(0,w._)([(0,F.j)("esri.widgets.CompassViewModel")],tl);const Nc=tl,nu="esri-spinner",iu_base=nu,iu_spinnerStart=`${nu}--start`,iu_spinnerFinish=`${nu}--finish`;let so=class extends fs.Z{constructor(v,M){super(v,M),this._animationDelay=500,this._animationPromise=null,this.viewModel=new Nc}initialize(){this.addHandles((0,bt.YP)(()=>this.visible,v=>this._visibleChange(v)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(v){this.viewModel.location=v}get view(){return this.viewModel.view}set view(v){this.viewModel.view=v}get visible(){return this.viewModel.visible}set visible(v){this.viewModel.visible=v}show(v){const{location:M,promise:I}=v??{};M&&(this.viewModel.location=M),this.visible=!0,I&&I.catch(()=>{}).then(()=>this.hide())}hide(){this.visible=!1}render(){const{visible:v}=this,{screenLocation:M}=this.viewModel,I=!!M,pe={[iu_spinnerStart]:v&&I,[iu_spinnerFinish]:!v&&I},Me=this._getPositionStyles();return(0,Mt.u)("div",{class:this.classes(iu_base,pe),styles:Me})}_visibleChange(v){if(v)return void(this.viewModel.screenLocationEnabled=!0);const M=(0,z.e4)(this._animationDelay);this._animationPromise=M,M.catch(()=>{}).then(()=>{this._animationPromise===M&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:v,view:M}=this.viewModel;if((0,ce.Wi)(M)||(0,ce.Wi)(v))return{};const{padding:I}=M;return{left:v.x-I.left+"px",top:v.y-I.top+"px"}}};(0,w._)([(0,C.Cb)()],so.prototype,"location",null),(0,w._)([(0,C.Cb)()],so.prototype,"view",null),(0,w._)([(0,C.Cb)({type:Nc})],so.prototype,"viewModel",void 0),(0,w._)([(0,C.Cb)()],so.prototype,"visible",null),so=(0,w._)([(0,F.j)("esri.widgets.Spinner")],so);const Wp=so;var fa=g(82844);const sl_iconZoom="esri-icon-zoom-in-magnifying-glass",Ri=new fa.Z({id:"zoom-to-feature",title:"{messages.zoom}",className:sl_iconZoom}),ou=new fa.Z({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),ro=new fa.Z({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:sl_iconZoom}),no=new fa.Z({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"}),rl=k.Z.getLogger("esri.widgets.Popup.PopupViewModel"),Zp=v=>{const{event:M,view:I}=v,{action:R}=M,ee=I&&I.popup;if(!R)return Promise.reject(new U.Z("trigger-action:missing-arguments","Event has no action"));if(!ee)return Promise.reject(new U.Z("trigger-action:missing-arguments","view.popup is missing"));const{disabled:pe,id:Me}=R;if(!Me)return Promise.reject(new U.Z("trigger-action:invalid-action","action.id is missing"));if(pe)return Promise.reject(new U.Z("trigger-action:invalid-action","Action is disabled"));if(Me===Ri.id)return function Kp(v){return lu.apply(this,arguments)}(ee.viewModel).catch(z.H9);if(Me===ro.id)return function Vp(v){return uu.apply(this,arguments)}(ee.viewModel);if(Me===no.id)return ee.featureMenuOpen=!ee.featureMenuOpen,ee.viewModel.browseClusterEnabled=!ee.viewModel.browseClusterEnabled,Promise.resolve();if(ee.viewModel.browseClusterEnabled=!1,Me===ou.id){ee.close();const{selectedFeature:xe}=ee;if(!xe)return Promise.reject(new U.Z(`trigger-action:${ou.id}`,"selectedFeature is required",{selectedFeature:xe}));const{sourceLayer:ze}=xe;return ze?ze.remove(xe):I.graphics.remove(xe),Promise.resolve()}return Promise.resolve()};function Zc(v){const{selectedFeature:M,location:I,view:R}=v;return R?"3d"===R.type?M??I??null:v.get("selectedFeature.geometry")||I:null}function io(v){return!!v&&v.isAggregate&&"cluster"===v.sourceLayer?.featureReduction?.type}function au(){return(au=(0,x.Z)(function*(v,M){if("3d"!==M?.type||!v||"esri.Graphic"!==v.declaredClass)return!0;const I=M.getViewForGraphic(v);if(I&&"whenGraphicBounds"in I){let R;try{R=yield I.whenGraphicBounds(v,{useViewElevation:!0})}catch{}return!R||!R.boundingBox||R.boundingBox[0]===R.boundingBox[3]&&R.boundingBox[1]===R.boundingBox[4]&&R.boundingBox[2]===R.boundingBox[5]}return!0})).apply(this,arguments)}function lu(){return lu=(0,x.Z)(function*(v){const{location:M,selectedFeature:I,view:R,zoomFactor:ee}=v,pe=Zc(v);if(!R||!pe){const ut=new U.Z("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:pe,view:R});throw rl.error(ut),ut}const Me=R.scale/ee,xe=v.selectedFeature?.geometry,ze=xe??M,st=(0,ce.pC)(ze)&&"point"===ze.type&&(yield function $p(v,M){return au.apply(this,arguments)}(I,R));Ri.active=!0,Ri.disabled=!0;try{yield v.zoomTo({target:{target:pe,scale:st?Me:void 0}})}catch{const Ct=new U.Z("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:I});rl.error(Ct)}finally{Ri.active=!1,Ri.disabled=!1,v.zoomToLocation=null,st&&(v.location=ze)}}),lu.apply(this,arguments)}function uu(){return(uu=(0,x.Z)(function*(v){const{selectedFeature:M,view:I}=v;if("2d"!==I?.type){const Me=new U.Z("zoomToCluster:invalid-view","View must be 2d MapView.",{view:I});throw rl.error(Me),Me}if(!M||!io(M)){const Me=new U.Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:M});throw rl.error(Me),Me}const[R,ee]=yield hu(I,M);ro.active=!0,ro.disabled=!0;const{extent:pe}=yield R.queryExtent(ee);yield v.zoomTo({target:pe}),ro.active=!1,ro.disabled=!1})).apply(this,arguments)}function cu(){return(cu=(0,x.Z)(function*(v){const{view:M,selectedFeature:I}=v;if(!M||!I)return;const[R,ee]=yield hu(M,I),{extent:pe}=yield R.queryExtent(ee);v.selectedClusterBoundaryFeature.geometry=pe,M.graphics.add(v.selectedClusterBoundaryFeature)})).apply(this,arguments)}function du(){return(du=(0,x.Z)(function*(v){const{selectedFeature:M,view:I}=v;if(!I||!M)return;const[R,ee]=yield hu(I,M);no.active=!0,no.disabled=!0;const{features:pe}=yield R.queryFeatures(ee);no.active=!1,no.disabled=!1,I.popup?.open({features:[M].concat(pe),featureMenuOpen:!0})})).apply(this,arguments)}function hu(v,M){return pu.apply(this,arguments)}function pu(){return(pu=(0,x.Z)(function*(v,M){const I=yield v.whenLayerView(M.sourceLayer),R=I.createQuery(),ee=M.getObjectId();return R.aggregateIds=null!=ee?[ee]:[],[I,R]})).apply(this,arguments)}function $c(v){if((0,ce.Wi)(v))return null;switch(v.type){case"point":return v;case"extent":return v.center;case"polygon":return v.centroid;case"multipoint":case"polyline":return v.extent?.center;default:return null}}const Bs="esri-popup",ma=`${Bs}__header`,oo=`${Bs}--is-docked`,hs={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:Bs,widget:"esri-widget",main:`${Bs}__main-container`,loadingContainer:`${Bs}__loading-container`,isCollapsible:`${Bs}--is-collapsible`,isCollapsed:`${Bs}--is-collapsed`,shadow:`${Bs}--shadow`,isDocked:oo,isDockedTopLeft:`${oo}-top-left`,isDockedTopCenter:`${oo}-top-center`,isDockedTopRight:`${oo}-top-right`,isDockedBottomLeft:`${oo}-bottom-left`,isDockedBottomCenter:`${oo}-bottom-center`,isDockedBottomRight:`${oo}-bottom-right`,alignTopCenter:`${Bs}--aligned-top-center`,alignBottomCenter:`${Bs}--aligned-bottom-center`,alignTopLeft:`${Bs}--aligned-top-left`,alignBottomLeft:`${Bs}--aligned-bottom-left`,alignTopRight:`${Bs}--aligned-top-right`,alignBottomRight:`${Bs}--aligned-bottom-right`,isFeatureMenuOpen:`${Bs}--feature-menu-open`,isActionsMenuOpen:`${Bs}--actions-menu-open`,hasFeatureUpdated:`${Bs}--feature-updated`,header:ma,headerButtons:`${ma}-buttons`,headerContainer:`${ma}-container`,headerContainerButton:`${ma}-container--button`,headerTitle:`${ma}-title`,content:`${Bs}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${Bs}__footer`,footerHasPagination:`${Bs}__footer--has-pagination`,footerHasActions:`${Bs}__footer--has-actions`,footerHasActionsMenu:`${Bs}__footer--has-actions-menu`,button:`${Bs}__button`,buttonDisabled:`${Bs}__button--disabled`,buttonDock:`${Bs}__button--dock`,icon:`${Bs}__icon`,iconDock:`${Bs}__icon--dock-icon`,inlineActionsContainer:`${Bs}__inline-actions-container`,actionsMenuButton:`${Bs}__actions-menu-button`,actions:`${Bs}__actions`,action:`${Bs}__action`,actionImage:`${Bs}__action-image`,actionText:`${Bs}__action-text`,actionToggle:`${Bs}__action-toggle`,actionToggleOn:`${Bs}__action-toggle--on`,actionExit:`${Bs}__action--exit`,actionSelectFeature:`${Bs}__action--select-feature`,pointer:`${Bs}__pointer`,pointerDirection:`${Bs}__pointer-direction`,navigation:`${Bs}__navigation`,paginationPrevious:`${Bs}__pagination-previous`,paginationNext:`${Bs}__pagination-next`,paginationPreviousIconLTR:`${Bs}__pagination-previous-icon`,paginationPreviousIconRTL:`${Bs}__pagination-previous-icon--rtl`,paginationNextIconLTR:`${Bs}__pagination-next-icon`,paginationNextIconRTL:`${Bs}__pagination-next-icon--rtl`,featureMenu:`${Bs}__feature-menu`,featureMenuList:`${Bs}__feature-menu-list`,featureMenuItem:`${Bs}__feature-menu-item`,featureMenuViewport:`${Bs}__feature-menu-viewport`,featureMenuHeader:`${Bs}__feature-menu-header`,featureMenuNote:`${Bs}__feature-menu-note`,featureMenuSelected:`${Bs}__feature-menu-item--selected`,featureMenuButton:`${Bs}__feature-menu-button`,featureMenuTitle:`${Bs}__feature-menu-title`,featureMenuObserver:`${Bs}__feature-menu-observer`,featureMenuLoader:`${Bs}__feature-menu-loader`,collapseButton:`${Bs}__collapse-button`,collapseIcon:`${Bs}__collapse-icon`};var nl=g(83550),Kc=g(22735),Jp=g(47949),Yp=g(23648);function mu(v){return v&&"opacity"in v?v.opacity*mu(v.parent):1}function yu(){return(yu=(0,x.Z)(function*(v,M){if(!v)return;const I=v.sourceLayer,R=((0,ce.pC)(M)&&M.useSourceLayer?I:v.layer)??I,ee=mu(R);if((0,ce.pC)(v.symbol)&&(!(0,ce.pC)(M)||!0!==M.ignoreGraphicSymbol)){const Is="web-style"===v.symbol.type?yield(0,On.Q8)(v.symbol,{...M,cache:(0,ce.pC)(M)?M.webStyleCache:null}):v.symbol.clone();return(0,On.tb)(Is,null,ee),Is}const pe=((0,ce.pC)(M)?M.renderer:null)??(R&&"renderer"in R?R.renderer:null);let Me=pe&&"getSymbolAsync"in pe?yield pe.getSymbolAsync(v,M):null;if(!Me)return;if(Me="web-style"===Me.type?yield Me.fetchSymbol({...M,cache:(0,ce.pC)(M)?M.webStyleCache:null}):Me.clone(),!(pe&&"visualVariables"in pe&&pe.visualVariables&&pe.visualVariables.length))return(0,On.tb)(Me,null,ee),Me;if("arcadeRequiredForVisualVariables"in pe&&pe.arcadeRequiredForVisualVariables&&((0,ce.Wi)(M)||(0,ce.Wi)(M.arcade))){const Is={...(0,ce.Wg)(M)};Is.arcade=yield(0,kt.LC)(),M=Is}const xe=yield Promise.resolve().then(g.bind(g,35162)),ze=[],st=[],ut=[],Ct=[];for(const Is of pe.visualVariables)switch(Is.type){case"color":ze.push(Is);break;case"opacity":st.push(Is);break;case"rotation":Ct.push(Is);break;case"size":Is.target||ut.push(Is)}const Gt=!!ze.length&&ze[ze.length-1],Ft=Gt?xe.getColor(Gt,v,M):null,ps=!!st.length&&st[st.length-1];let Ps=ps?xe.getOpacity(ps,v,M):null;if(null!=ee&&(Ps=null!=Ps?Ps*ee:ee),(0,On.tb)(Me,Ft,Ps),ut.length){const Is=xe.getAllSizes(ut,v,M);yield(0,On.e3)(Me,Is)}for(const Is of Ct)(0,On.BR)(Me,xe.getRotationAngle(Is,v,M),Is.axis);return Me})).apply(this,arguments)}g(64702),g(10532),g(31319),g(33484),g(32502);var Uo=g(88682);function _u(v){return v&&"function"==typeof v.highlight}const vu=v=>{let M=class extends v{constructor(...I){super(...I),this.goToOverride=null,this.view=null}callGoTo(I){const{view:R}=this;return(0,ce.O3)(R),this.goToOverride?this.goToOverride(R,I):R.goTo(I.target,I.options)}};return(0,w._)([(0,C.Cb)()],M.prototype,"goToOverride",void 0),(0,w._)([(0,C.Cb)()],M.prototype,"view",void 0),M=(0,w._)([(0,F.j)("esri.widgets.support.GoTo")],M),M};var Jc=g(54084);const ya=V.Z.ofType({key:"type",defaultKeyValue:"button",base:Jp.Z,typeMap:{button:fa.Z,toggle:Yp.Z}});let pr=class extends(vu(Wc)){get isLoadingFeature(){return this.featureViewModels.some(v=>v.waitingForContent)}constructor(v){super(v),this._handles=new ls.Z,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new ya,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new Wt.Z({symbol:new Jc.Z({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([(0,bt.YP)(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),(0,bt.YP)(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),(0,bt.YP)(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),(0,bt.YP)(()=>this.view?.animation?.state,v=>this._animationStateChange(v)),(0,bt.YP)(()=>this.location,v=>this._locationChange(v)),(0,bt.YP)(()=>this.selectedFeature,v=>this._selectedFeatureChange(v)),(0,bt.YP)(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),(0,bt.YP)(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),(0,bt.YP)(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",v=>Zp({event:v,view:this.view})),(0,bt.gx)(()=>!this.waitingForResult,()=>this._waitingForResultChange(),bt.Z_),(0,bt.YP)(()=>[this.features,this.view?.map,this.view?.spatialReference],()=>this._updateFeatureVMs()),(0,bt.YP)(()=>this.view?.scale,()=>this._viewScaleChange()),(0,bt.gx)(()=>!this.visible,()=>this.browseClusterEnabled=!1),(0,bt.YP)(()=>this.browseClusterEnabled,v=>v?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const v=this._get("allActions")||new ya;v.removeAll();const{actions:M,defaultActions:I,defaultPopupTemplateEnabled:R,includeDefaultActions:ee,selectedFeature:pe}=this,Me=ee?I.concat(M):M,xe=pe&&("function"==typeof pe.getEffectivePopupTemplate&&pe.getEffectivePopupTemplate(R)||pe.popupTemplate),ze=xe&&xe.actions,st=xe&&xe.overwriteActions?ze:ze?ze.concat(Me):Me;return st&&st.filter(Boolean).forEach(ut=>v.add(ut)),v}get defaultActions(){const v=this._get("defaultActions")||new ya;return v.removeAll(),v.addMany(io(this.selectedFeature)?[ro.clone(),no.clone()]:[Ri.clone()]),v}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(v){const M=v||[];this._set("features",M);const{pendingPromisesCount:I,promiseCount:R,selectedFeatureIndex:ee}=this,pe=R&&M.length;pe&&I&&-1===ee?this.selectedFeatureIndex=0:pe&&-1!==ee||(this.selectedFeatureIndex=M.length?0:-1)}get location(){return this._get("location")||null}set location(v){let M=v;const I=this.view?.spatialReference?.isWebMercator;v&&v?.spatialReference?.isWGS84&&I&&(M=(0,nl.$)(v)),this._set("location",M)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(v){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(v)||!v.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",v),(v=v.slice(0)).forEach(M=>{this._pendingPromises.add(M),M.then(ee=>{this._pendingPromises.has(M)&&this._updateFeatures(ee),this._updatePendingPromises(M)},()=>this._updatePendingPromises(M))}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:v,selectedFeatureIndex:M}=this;return-1===M?null:v[M]||null}get selectedFeatureIndex(){const v=this._get("selectedFeatureIndex");return"number"==typeof v?v:-1}set selectedFeatureIndex(v){const{featureCount:M}=this;v=isNaN(v)||v<-1||!M?-1:(v+M)%M,this.activeFeature=null,this._set("selectedFeatureIndex",v)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:v}=this,M=Zc(this);return M&&v?this.callGoTo({target:{target:M,scale:v.scale}}):Promise.reject(new U.Z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:M,view:v}))}zoomTo(v){return this.callGoTo(v)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(v,M){const{view:I}=this;if(!I||!v)throw new U.Z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:v,view:I});return I.fetchPopupFeatures(v,{event:M&&M.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:M&&M.signal})}open(v){const M={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...v,visible:!0},{fetchFeatures:I}=M;delete M.fetchFeatures,I&&this._setFetchFeaturesPromises(M.location);const R=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const ee of R)delete M[ee];this.set(M)}triggerAction(v){const M=this.allActions.getItemAt(v);M&&!M.disabled&&this.emit("trigger-action",{action:M})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){(function Hp(v){const M=v.features.filter(I=>io(I));M.length&&(v.features=M)})(this),this._clearBrowsedClusterGraphics()}enableClusterBrowsing(){var v=this;return(0,x.Z)(function*(){const{view:M,selectedFeature:I}=v;"2d"===M?.type?io(I)?(yield function zp(v){return cu.apply(this,arguments)}(v),yield function Gp(v){return du.apply(this,arguments)}(v)):k.Z.getLogger(v.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",I):k.Z.getLogger(v.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",I)})()}_animationStateChange(v){this.zoomToLocation||(Ri.disabled="waiting-for-target"===v)}_clearBrowsedClusterGraphics(){const v=this.view?.graphics;v&&(v.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&v.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(io(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(v){const{selectedFeature:M,updateLocationEnabled:I}=this;I&&v&&(!M||M.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:v,featureCount:M,featurePage:I,featuresPerPage:R,featureViewModels:ee}=this;if(null===I)return;const pe=((I-1)*R+M)%M;ee.slice(pe,pe+R).forEach((xe,ze)=>{xe&&!xe.graphic&&(xe.graphic=v[pe+ze])})}_selectedFeatureChange(v){var M=this;return(0,x.Z)(function*(){const{location:I,updateLocationEnabled:R,view:ee}=M;if(v&&ee){if(M.browseClusterEnabled)return M._selectedClusterFeature&&(ee.graphics.remove(M._selectedClusterFeature),M._selectedClusterFeature=null),io(v)?void 0:(v.symbol=yield function i0(v,M){return yu.apply(this,arguments)}(v),M._selectedClusterFeature=v,void ee.graphics.add(M._selectedClusterFeature));!R&&I||!v.geometry?R&&!v.geometry&&M.centerAtLocation().then(()=>{const pe=ee.center?.clone();pe&&(M.location=pe)}):M.location=(0,ce.Wg)($c(v.geometry))}})()}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(v){return this._fetchFeaturesWithController(this._getScreenPoint(v||this.location)).then(M=>{const{clientOnlyGraphics:I,promisesPerLayerView:R}=M,ee=Promise.resolve(I),pe=R.map(Me=>Me.promise);this.promises=[ee,...pe]})}_destroyFeatureVMs(){this.featureViewModels.forEach(v=>v&&!v.destroyed&&v.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:v,features:M,featureViewModels:I}=this;if(io(v)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!M||!M.length)return;const R=I.slice(0),ee=[];M.forEach((pe,Me)=>{if(!pe)return;let xe=null;if(R.some((ze,st)=>(ze&&ze.graphic===pe&&(xe=ze,R.splice(st,1)),!!xe)),xe)ee[Me]=xe;else{const ze=new su({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:this.view?.spatialReference,graphic:pe===v?pe:null,map:this.view?.map,view:this.view});ee[Me]=ze}}),R.forEach(pe=>pe&&!pe.destroyed&&pe.destroy()),this._set("featureViewModels",ee)}_getScreenPoint(v){const{view:M}=this;return M&&v&&"function"==typeof M.toScreen?M.toScreen(v):null}_autoOpenEnabledChange(){const v="auto-fetch-features",{_handles:M,autoOpenEnabled:I}=this;if(M.remove(v),I&&this.view){const R=this.view.on("click",ee=>{"mouse"===ee.pointerType&&0!==ee.button||this._fetchFeaturesAndOpen(ee)},Uo.f.WIDGET);M.add(R,v)}}_cancelFetchingFeatures(){const v=this._fetchFeaturesController;v&&v.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(v,M){this._cancelFetchingFeatures();const I=new AbortController,{signal:R}=I;this._fetchFeaturesController=I,this.notifyChange("waitingForResult");const ee=this.fetchFeatures(v,{signal:R,event:M});return ee.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),ee}_fetchFeaturesAndOpen(v){const{screenPoint:M,mapPoint:I}=v,{view:R}=this;this._fetchFeaturesWithController(M,v).then(ee=>{const{clientOnlyGraphics:pe,promisesPerLayerView:Me,location:xe}=ee,ze=[Promise.resolve(pe),...Me.map(st=>st.promise)];return R?.popup?.open({location:xe||I,promises:ze}),ee})}_updatePendingPromises(v){v&&this._pendingPromises.has(v)&&(this._pendingPromises.delete(v),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getLayerView(v,M){return(0,x.Z)(function*(){return yield v.when(),v.whenLayerView(M)})()}_getHighlightLayer(v){const{layer:M,sourceLayer:I}=v;return I&&"layer"in I&&I.layer?I.layer:"map-notes"===I?.type||"subtype-group"===I?.type?I:M}_getHighlightTarget(v,M){const I="imagery"===M.type?void 0:"objectIdField"in M?M.objectIdField||"OBJECTID":null,R=v.attributes;return R&&I&&R[I]||v}_highlightActiveFeature(){var v=this;return(0,x.Z)(function*(){const M="highlight-active-feature";v._handles.remove(M);const{highlightEnabled:I,view:R,activeFeature:ee,visible:pe}=v;if(!(ee&&R&&I&&pe))return;const Me=v._getHighlightLayer(ee);if(!(Me&&Me instanceof Kc.Z))return;const xe=v._getLayerView(R,Me);v._highlightActiveFeaturePromise=xe;const ze=yield xe;if(!(ze&&_u(ze)&&v._highlightActiveFeaturePromise===xe&&v.activeFeature&&v.highlightEnabled))return;const st=ze.highlight(v._getHighlightTarget(ee,Me));v._handles.add(st,M)})()}_highlightSelectedFeature(){var v=this;return(0,x.Z)(function*(){const M="highlight-selected-feature";v._handles.remove(M);const{selectedFeature:I,highlightEnabled:R,view:ee,visible:pe}=v;if(!(I&&ee&&R&&pe))return;const Me=v._getHighlightLayer(I);if(!(Me&&Me instanceof Kc.Z))return;const xe=v._getLayerView(ee,Me);v._highlightSelectedFeaturePromise=xe;const ze=yield xe;if(!(ze&&_u(ze)&&v._highlightSelectedFeaturePromise===xe&&v.selectedFeature&&v.highlightEnabled&&v.visible))return;const st=ze.highlight(v._getHighlightTarget(I,Me));v._handles.add(st,M)})()}_updateFeatures(v){const{features:M}=this;if(!v||!v.length)return;if(!M.length)return void(this.features=v);const I=v.filter(R=>!M.includes(R));this.features=M.concat(I)}};(0,w._)([(0,C.Cb)()],pr.prototype,"featurePage",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"isLoadingFeature",null),(0,w._)([(0,C.Cb)({type:ya})],pr.prototype,"actions",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"active",null),(0,w._)([(0,C.Cb)()],pr.prototype,"activeFeature",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"allActions",null),(0,w._)([(0,C.Cb)({type:Boolean})],pr.prototype,"defaultPopupTemplateEnabled",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"autoCloseEnabled",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"autoOpenEnabled",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"browseClusterEnabled",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"content",void 0),(0,w._)([(0,C.Cb)({type:ya,readOnly:!0})],pr.prototype,"defaultActions",null),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"featureCount",null),(0,w._)([(0,C.Cb)()],pr.prototype,"features",null),(0,w._)([(0,C.Cb)()],pr.prototype,"featuresPerPage",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"featureViewModelAbilities",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"featureViewModels",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"highlightEnabled",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"includeDefaultActions",void 0),(0,w._)([(0,C.Cb)({type:It.Z})],pr.prototype,"location",null),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"pendingPromisesCount",null),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"selectedClusterBoundaryFeature",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"waitingForResult",null),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"promiseCount",null),(0,w._)([(0,C.Cb)()],pr.prototype,"promises",null),(0,w._)([(0,C.Cb)({value:null,readOnly:!0})],pr.prototype,"selectedFeature",null),(0,w._)([(0,C.Cb)({value:-1})],pr.prototype,"selectedFeatureIndex",null),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"selectedFeatureViewModel",null),(0,w._)([(0,C.Cb)({readOnly:!0})],pr.prototype,"state",null),(0,w._)([(0,C.Cb)()],pr.prototype,"title",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"updateLocationEnabled",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"view",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"visible",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"zoomFactor",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"zoomToLocation",void 0),(0,w._)([(0,C.Cb)()],pr.prototype,"centerAtLocation",null),pr=(0,w._)([(0,F.j)("esri.widgets.Popup.PopupViewModel")],pr);const Yc=pr;var Sn=g(6408);function Qc(v){return M=>{M.hasOwnProperty("_delegatedEventNames")||(M._delegatedEventNames=M._delegatedEventNames?M._delegatedEventNames.slice():[]);const I=M._delegatedEventNames,R=Array.isArray(v)?v:function l0(v){return v.split(",").map(M=>M.trim())}(v);I.push(...R)}}const Xc="selected-index",qc="popup-spinner",ed={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},td="esri-popup";function mi(v,M){return void 0===M?`${td}__${v}`:`${td}__${v}-${M}`}const sd={closeButton:!0,featureNavigation:!0};let Ws=class extends(jc(fs.Z)){constructor(v,M){super(v,M),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new ls.Z,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([I])=>{I?.isIntersecting&&null!=this.viewModel.featurePage&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=(0,mr.P)(()=>this._displaySpinner(),0),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new V.Z,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new Yc,this.visibleElements={...sd},this._handleOpenRelatedFeature=I=>{this._openRelatedFeature(I)},this._addSelectedFeatureIndexHandle(),this.addHandles([(0,bt.YP)(()=>this.viewModel?.screenLocation,()=>this._positionContainer()),(0,bt.YP)(()=>[this.viewModel?.active,this.dockEnabled],()=>this._toggleScreenLocationEnabled()),(0,bt.YP)(()=>this.viewModel?.screenLocation,(I,R)=>{!!I!=!!R&&this.reposition()}),(0,bt.YP)(()=>[this.viewModel?.view?.padding,this.viewModel?.view?.size,this.viewModel?.active,this.viewModel?.location,this.alignment],()=>this.reposition()),(0,bt.YP)(()=>this.spinnerEnabled,I=>this._spinnerEnabledChange(I)),(0,bt.YP)(()=>this.viewModel?.view?.size,(I,R)=>this._updateDockEnabledForViewSize(I,R)),(0,bt.YP)(()=>this.viewModel?.view,(I,R)=>this._viewChange(I,R)),(0,bt.YP)(()=>this.viewModel?.view?.ready,(I,R)=>this._viewReadyChange(I??!1,R??!1)),(0,bt.YP)(()=>[this.viewModel?.waitingForResult,this.viewModel?.location],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),(0,bt.YP)(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),(0,bt.YP)(()=>[this.selectedFeatureWidget?.viewModel?.title,this.selectedFeatureWidget?.viewModel?.state],()=>this._setTitleFromFeatureWidget()),(0,bt.YP)(()=>[this.selectedFeatureWidget?.viewModel?.content,this.selectedFeatureWidget?.viewModel?.state],()=>this._setContentFromFeatureWidget()),(0,bt.gx)(()=>!this.collapsed,()=>{"xsmall"===this.viewModel?.view?.widthBreakpoint&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),(0,bt.on)(()=>this.viewModel?.allActions,"change",()=>this._watchActions()),(0,bt.YP)(()=>this.viewModel?.allActions,()=>this._watchActions(),bt.nn),(0,bt.YP)(()=>this.viewModel?.featureViewModels,()=>this._featureMenuViewportScrollTop()),(0,bt.on)(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),(0,bt.YP)(()=>[this._activeFlowItemWidget?.viewModel?.state,this._activeFlowItemWidget?.viewModel?.title],()=>this.scheduleRender())])}loadDependencies(){return Promise.all([g.e(9446).then(g.bind(g,19446)),Promise.all([g.e(3740),g.e(8793),g.e(694),g.e(8592),g.e(448)]).then(g.bind(g,40448)),Promise.all([g.e(3740),g.e(694),g.e(6791)]).then(g.bind(g,37)),Promise.all([g.e(8793),g.e(4081)]).then(g.bind(g,4081)),g.e(9024).then(g.bind(g,89024))])}destroy(){this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),this._handles?.destroy(),this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver?.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:v,viewModel:M}=this;if(!v)return!!M?.content;const I=v.viewModel;if(I?.waitingForContent||"error"===I?.state)return!0;const R=I?.content;return Array.isArray(R)?!!R.length:!!R}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&null!=this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:v}=this;return v.getItemAt(v.length-1)||null}get actions(){return this.viewModel.actions}set actions(v){this.viewModel.actions=v}set actionsMenuOpen(v){this._set("actionsMenuOpen",!!v)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(v){this.viewModel.autoCloseEnabled=v}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(v){this.viewModel.autoOpenEnabled=v}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(v){this.viewModel.defaultPopupTemplateEnabled=v}get content(){return this.viewModel.content}set content(v){this.viewModel.content=v}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||ed}set dockOptions(v){const M={...ed},I=this.viewModel?.view?.breakpoints,R={};I&&(R.width=I.xsmall,R.height=I.xsmall);const ee={...M,...v},pe={...M.breakpoint,...R},{breakpoint:Me}=ee;"object"==typeof Me?ee.breakpoint={...pe,...Me}:Me&&(ee.breakpoint=pe),this._set("dockOptions",ee),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(v){this.viewModel.features=v}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(v){this.viewModel.goToOverride=v}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(v){this.viewModel.highlightEnabled=v}get location(){return this.viewModel.location}set location(v){this.viewModel.location=v}get label(){return this.messages?.widgetLabel??""}set label(v){this._overrideIfSome("label",v)}get promises(){return this.viewModel.promises}set promises(v){this.viewModel.promises=v}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(v){this.viewModel.selectedFeatureIndex=v}get selectedFeatureWidget(){const{_feature:v,visibleElements:M,headingLevel:I,_flowItems:R}=this,{selectedFeatureViewModel:ee}=this.viewModel,pe={...M,title:!1};return ee?(v?(v.viewModel=ee,v.visibleElements=pe):this._feature=new Fp({flowItems:R,headingLevel:I+1,viewModel:ee,visibleElements:pe}),this._feature):null}get title(){return this.viewModel.title}set title(v){this.viewModel.title=v}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(v){this.viewModel.updateLocationEnabled=v}get view(){return this.viewModel.view}set view(v){this.viewModel.view=v}get visible(){return this.viewModel.visible}set visible(v){this.viewModel.visible=v}castVisibleElements(v){return{...sd,...v}}blur(){const{active:v}=this.viewModel;v||k.Z.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(v,M){return this.viewModel.fetchFeatures(v,M)}focus(){const{active:v}=this.viewModel;v||k.Z.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(v){this._handles.remove(Xc);const R={collapsed:!!v&&!!v.collapsed,actionsMenuOpen:!!v&&!!v.actionsMenuOpen,featureMenuOpen:!!v&&!!v.featureMenuOpen};"xsmall"===this.viewModel?.view?.widthBreakpoint&&(R.collapsed=!0),this.set(R),this.viewModel.open(v),this._shouldFocus(v),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(v){return this.viewModel.triggerAction(v)}render(){const{actionsMenuOpen:v,dockEnabled:M,featureMenuVisible:I,dividedActions:R,currentAlignment:ee,currentDockPosition:pe}=this,{active:Me}=this.viewModel,{menuActions:xe}=R,ze=Me&&xe.length>1&&v,st=Me&&M,ut=Me&&!M,Ct=this.selectedFeature?.layer?.title,Gt=this.selectedFeature?.layer?.id;return(0,Mt.u)("div",{class:this.classes(hs.base,{[hs.alignTopCenter]:"top-center"===ee,[hs.alignBottomCenter]:"bottom-center"===ee,[hs.alignTopLeft]:"top-left"===ee,[hs.alignBottomLeft]:"bottom-left"===ee,[hs.alignTopRight]:"top-right"===ee,[hs.alignBottomRight]:"bottom-right"===ee,[hs.isDocked]:st,[hs.shadow]:ut,[hs.isDockedTopLeft]:"top-left"===pe,[hs.isDockedTopCenter]:"top-center"===pe,[hs.isDockedTopRight]:"top-right"===pe,[hs.isDockedBottomLeft]:"bottom-left"===pe,[hs.isDockedBottomCenter]:"bottom-center"===pe,[hs.isDockedBottomRight]:"bottom-right"===pe,[hs.isFeatureMenuOpen]:I,[hs.isActionsMenuOpen]:ze}),role:"presentation","data-layer-title":Ct,"data-layer-id":Gt,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},Me?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return(0,Mt.u)("span",{"aria-hidden":"true",class:this.classes(hs.icon,hs.iconLoading,hs.rotating)})}renderNavigationLoading(){const{messagesCommon:v}=this;return this.viewModel.pendingPromisesCount?(0,Mt.u)("div",{key:mi("loading-container"),role:"presentation",class:hs.loadingContainer,"aria-label":v.loading,title:v.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const v=(0,Ar.dZ)(this.container);return(0,Mt.u)("span",{"aria-hidden":"true",class:this.classes(hs.icon,{[hs.iconRightTriangleArrow]:v,[hs.paginationPreviousIconRTL]:v,[hs.iconLeftTriangleArrow]:!v,[hs.paginationPreviousIconLTR]:!v})})}renderPreviousButton(){const{messages:v}=this;return(0,Mt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(hs.button,hs.paginationPrevious),"aria-label":v.previous,title:v.previous},this.renderPreviousIcon())}renderNextIcon(){const v=(0,Ar.dZ)(this.container);return(0,Mt.u)("span",{"aria-hidden":"true",class:this.classes(hs.icon,{[hs.iconLeftTriangleArrow]:v,[hs.paginationNextIconRTL]:v,[hs.iconRightTriangleArrow]:!v,[hs.paginationNextIconLTR]:!v})})}renderNextButton(){const{messages:v}=this;return(0,Mt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(hs.button,hs.paginationNext),"aria-label":v.next,title:v.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:v,featureMenuId:M,messagesCommon:I}=this,{featureCount:R,selectedFeatureIndex:ee}=this.viewModel;return(0,Mt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(hs.button,hs.featureMenuButton),"aria-haspopup":"true","aria-controls":M,"aria-expanded":v.toString(),"aria-label":I.menu,title:I.menu},this._getPageText(R,ee))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]}renderDockIcon(){const{dockEnabled:v}=this,M=this._wouldDockTo();return(0,Mt.u)("span",{"aria-hidden":"true",class:this.classes({[hs.iconUndock]:v,[hs.iconDock]:!v,[hs.iconDockToRight]:!v&&("top-right"===M||"bottom-right"===M),[hs.iconDockToLeft]:!v&&("top-left"===M||"bottom-left"===M),[hs.iconDockToTop]:!v&&"top-center"===M,[hs.iconDockToBottom]:!v&&"bottom-center"===M},hs.icon)})}renderDockButton(){const{dockEnabled:v,messages:M}=this,I=this.viewModel?.view?.widthBreakpoint,R=v?M.undock:M.dock;return"xsmall"!==I&&this.dockOptions?.buttonEnabled?(0,Mt.u)("div",{role:"button","aria-label":R,title:R,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(hs.button,hs.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:v}=this.viewModel,{titleId:M,collapsible:I,contentCollapsed:R,messagesCommon:ee}=this,pe={[hs.headerContainerButton]:I},Me=(0,Mt.u)(oa,{level:this.headingLevel,class:hs.headerTitle,innerHTML:v??""}),xe=I?(0,Mt.u)("button",{key:`${v}--collapsible`,id:M,title:R?ee.expand:ee.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(hs.headerContainer,pe),"aria-expanded":R?"false":"true",onclick:this._toggleCollapsed,type:"button"},Me,(0,Mt.u)("calcite-icon",{class:hs.collapseIcon,key:"collapse-icon",icon:R?"chevron-down":"chevron-up",scale:"m"})):(0,Mt.u)("div",{key:v??"title",id:M,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(hs.headerContainer,pe)},Me);return v?xe:null}renderCloseIcon(){return(0,Mt.u)("span",{"aria-hidden":"true",class:this.classes(hs.icon,hs.iconClose)})}renderCloseButton(){const{visibleElements:v,messagesCommon:M}=this;return v.closeButton?(0,Mt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:hs.button,"aria-label":M.close,title:M.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return(0,Mt.u)("header",{class:hs.header},this.renderTitle(),(0,Mt.u)("div",{class:hs.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:v,hasContent:M,contentCollapsed:I,_flowItems:R}=this,{content:ee}=this.viewModel,pe=R.toArray(),Me={[hs.contentHasFlows]:!!pe.length};return M&&!I?(0,Mt.u)("div",{key:ee??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:v,class:this.classes(hs.content,Me)},(0,Mt.u)("calcite-flow",{bind:this},(0,Mt.u)("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:Ar.Yo,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),pe.map(xe=>this.renderFlowItem(xe))),pe.map(xe=>this.renderFlowItemTooltips(xe))):null}renderFlowItem(v){const{messages:M}=this,I=Qa(),R="graphic"in v&&!v.isTable;return(0,Mt.u)("calcite-flow-item",{bind:this,class:this.classes({[hs.calciteThemeDark]:!I,[hs.calciteThemeLight]:I}),heading:v.title??"",description:this._getFlowItemDescription(v),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${v.viewModel.uid}`},(0,Mt.u)("calcite-action",{class:hs.actionExit,icon:"move-up",label:M?.exitRelatedRecords,text:M?.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:ee=>this._storeExitRelatedRecordsAction(v,ee),onclick:this._destroyFlowItemWidgets}),R?(0,Mt.u)("calcite-action",{class:hs.actionSelectFeature,icon:"zoom-to-object",label:M?.selectFeature,text:M?.selectFeature,slot:"header-actions-end",bind:this,afterCreate:ee=>this._storeFeatureSelectionAction(v,ee),onclick:()=>this._handleOpenRelatedFeature(v)}):null,(0,Mt.u)("div",{class:this.classes(hs.contentFlowItem,{[hs.calciteThemeDark]:I,[hs.calciteThemeLight]:!I})},v.render()))}renderFlowItemTooltips(v){const{messages:M,_exitRelatedRecordsActions:I,_featureSelectionActions:R}=this,ee=Qa(),pe=R.get(v);return[(0,Mt.u)("calcite-tooltip",{class:this.classes({[hs.calciteThemeDark]:!ee,[hs.calciteThemeLight]:ee}),key:`exit-related-records-tooltip-${v.viewModel.uid}`,label:M?.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:I.get(v),placement:"top"},M?.exitRelatedRecords),pe?(0,Mt.u)("calcite-tooltip",{class:this.classes({[hs.calciteThemeDark]:!ee,[hs.calciteThemeLight]:ee}),key:`select-related-record-tooltip-${v.viewModel.uid}`,label:M?.selectFeature,overlayPositioning:"fixed",referenceElement:pe,placement:"top"},M?.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:v,actionsMenuButtonId:M,actionsMenuOpen:I,dividedActions:R,messagesCommon:ee}=this,pe=I?ee.close:ee.open,{menuActions:Me}=R;return Me.length?(0,Mt.u)("div",{key:mi("actions-menu-button"),class:this.classes(hs.button,hs.actionsMenuButton),role:"button",id:M,"aria-haspopup":"true","aria-controls":I?v:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":pe,title:pe},(0,Mt.u)("span",{"aria-hidden":"true",class:hs.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:v,actionsMenuButtonId:M,actionsMenuOpen:I,dividedActions:R}=this,{menuActions:ee}=R;return ee.length&&I?(0,Mt.u)("ul",{id:v,role:"menu","aria-labelledby":M,key:mi("actions"),class:hs.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},ee.toArray().map(pe=>this.renderAction({action:pe,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:v}=this.dividedActions;return v.length?v.toArray().map(M=>this.renderAction({action:M,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:v,menuActions:M}=this.dividedActions,I=!!v.length,R=!!M.length;return I||R?(0,Mt.u)("div",{key:"inline-actions-container","data-inline-actions":I.toString(),"data-menu-actions":R.toString(),class:hs.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?(0,Mt.u)("section",{key:mi("navigation"),class:this.classes(hs.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:v,dividedActions:M}=this,{inlineActions:I,menuActions:R}=M,ee=!!I.length,Me={[hs.footerHasPagination]:v,[hs.footerHasActions]:ee,[hs.footerHasActionsMenu]:!!R.length};return v||ee?(0,Mt.u)("div",{key:mi("feature-buttons"),class:this.classes(hs.footer,Me)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:v}=this,{featureViewModels:M,isLoadingFeature:I}=this.viewModel,R=(0,Zn.n)(v.selectedFeatures,{total:M.length});return(0,Mt.u)("section",{key:mi("menu"),class:hs.featureMenu},(0,Mt.u)("strong",{class:hs.featureMenuHeader},R),(0,Mt.u)("nav",{bind:this,class:hs.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Ar.Yo},this.renderFeatureMenu(),(0,Mt.u)("div",{class:hs.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),I?(0,Mt.u)("div",{class:hs.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:(0,Mt.u)("div",{key:mi("pointer"),class:hs.pointer,role:"presentation"},(0,Mt.u)("div",{class:this.classes(hs.pointerDirection,hs.shadow)}))}renderMainContainer(){const{dockEnabled:v,currentAlignment:M,currentDockPosition:I,titleId:R,contentId:ee,collapsible:pe,hasContent:Me,contentCollapsed:xe,visibleElements:ze}=this,{title:st}=this.viewModel,ut="bottom-left"===M||"bottom-center"===M||"bottom-right"===M||"top-left"===I||"top-center"===I||"top-right"===I,Ct="top-left"===M||"top-center"===M||"top-right"===M||"bottom-left"===I||"bottom-center"===I||"bottom-right"===I;return(0,Mt.u)("div",{class:this.classes(hs.main,hs.widget,{[hs.shadow]:v,[hs.isCollapsible]:pe,[hs.isCollapsed]:xe}),tabIndex:ze.closeButton?void 0:-1,role:"dialog","aria-labelledby":st?R:"","aria-describedby":Me&&!xe?ee:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},ut?this.renderFooter():null,ut?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),Ct?this.renderFooter():null,Ct?this.renderFeatureMenuContainer():null)}renderContent(){const v=this.viewModel?.content;return v?"string"==typeof v?(0,Mt.u)("div",{class:Fr.contentNode,key:v,innerHTML:v}):this.renderNodeContent(v):null}renderActionText(v){return(0,Mt.u)("span",{key:"text",class:hs.actionText},v)}renderActionIcon(v){const M=this._getActionClass(v),I=this._getActionImage(v),R={[hs.iconLoading]:v.active,[hs.rotating]:v.active,[hs.icon]:!!M,[hs.actionImage]:!v.active&&!!I};return M&&(R[M]=!v.active),(0,Mt.u)("span",{key:"icon","aria-hidden":"true",class:this.classes(hs.icon,R),styles:this._getIconStyles(I)})}renderAction(v){const{action:M,type:I}=v,R=this._getActionTitle(M),ee={[hs.action]:"toggle"!==M.type,[hs.actionToggle]:"toggle"===M.type,[hs.actionToggleOn]:"toggle"===M.type&&M.value,[hs.buttonDisabled]:M.disabled},pe=[this.renderActionIcon(M),this.renderActionText(R)],Me="menu-item"===I?(0,Mt.u)("li",{key:M.uid,role:"menuitem",tabIndex:0,title:R,"aria-label":R,class:this.classes(hs.button,ee),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":M.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},pe):(0,Mt.u)("div",{key:M.uid,role:"button",tabIndex:0,title:R,"aria-label":R,class:this.classes(hs.button,ee),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":M.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},pe);return M.visible?Me:null}renderFeatureMenuItem(v,M){const{messages:I,messagesCommon:R}=this,{selectedFeatureIndex:ee,selectedFeatureViewModel:pe}=this.viewModel,Me=v===pe,xe={[hs.featureMenuSelected]:Me},ze=Me?(0,Mt.u)("span",{key:mi(`feature-menu-selected-feature-${ee}`),title:I.selectedFeature,"aria-label":I.selectedFeature,class:hs.iconCheckMark}):null,st=(0,Mt.u)("span",{innerHTML:v.title||R.untitled});return(0,Mt.u)("li",{role:"menuitem",tabIndex:-1,key:mi(`feature-menu-feature-${ee}`),class:this.classes(xe,hs.featureMenuItem),bind:this,"data-feature-index":M,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},(0,Mt.u)("span",{class:hs.featureMenuTitle},st,ze))}renderFeatureMenu(){const{featureMenuId:v}=this,{featureViewModels:M}=this.viewModel;return M.length>1?(0,Mt.u)("ol",{class:hs.featureMenuList,id:v,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},M.filter(I=>!!I.graphic).map((I,R)=>this.renderFeatureMenuItem(I,R))):null}_storeFeatureSelectionAction(v,M){this._featureSelectionActions.set(v,M),this.scheduleRender()}_storeExitRelatedRecordsAction(v,M){this._exitRelatedRecordsActions.set(v,M),this.scheduleRender()}_getFlowItemDescription(v){return"featureCountDescription"in v?v.featureCountDescription:v.viewModel.description??""}_openRelatedFeature(v){var M=this;return(0,x.Z)(function*(){yield v.viewModel.updateGeometry();const I=v.graphic,R=I?.geometry;if((0,ce.Wi)(R)||(0,ce.Wi)(I))return;M._destroyFlowItemWidgets(),yield M.viewModel.zoomTo({target:R});const ee=$c(R);M.open({features:[I],location:(0,ce.pC)(ee)?ee:void 0})})()}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(v=>{"showAllEnabled"in v.viewModel&&(v.viewModel.showAllEnabled=!1),v.viewModel=null,v.destroy()})}_handleBackClick(){const v=this._flowItems.pop();v&&(this._exitRelatedRecordsActions.delete(v),this._featureSelectionActions.delete(v),"showAllEnabled"in v.viewModel&&(v.viewModel.showAllEnabled=!1),v&&(v.viewModel=null,v.destroy()))}_getActionTitle(v){const{messages:M,selectedFeature:I,messagesCommon:R}=this,{id:ee}=v,pe=I?.attributes,Me=v.title??"",xe="zoom-to-feature"===ee?(0,Zn.n)(Me,{messages:M}):"remove-selected-feature"===ee?(0,Zn.n)(Me,{messages:R}):"zoom-to-clustered-features"===ee||"browse-clustered-features"===ee?(0,Zn.n)(Me,{messages:M}):v.title;return xe&&pe?(0,Zn.n)(xe,pe):xe??""}_getActionClass(v){const{selectedFeature:M}=this,I=M?.attributes,{className:R,image:ee}=v,pe=ee||R?R:hs.iconDefaultAction;return pe&&I?(0,Zn.n)(pe,I):pe??""}_getActionImage(v){const{selectedFeature:M}=this,I=M?.attributes,{image:R}=v;return R&&I?(0,Zn.n)(R,I):R??""}_createFeatureUpdatedAnimation(){return(0,Ar.vU)("enter",hs.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:v,featureNavigationVisible:M}=this;if("number"!=typeof v)return null;const I=Math.round(v);return Math.max(M?I-1:I,0)}_watchActions(){const{allActions:v}=this.viewModel;this.notifyChange("dividedActions");const M="actions";this._handles.remove(M),v&&v.forEach(I=>{this._handles.add((0,bt.YP)(()=>[I.uid,I.active,I.className,I.disabled,I.id,I.title,I.image,I.visible],()=>this.scheduleRender()),M)})}_divideActions(){const{allActions:v}=this.viewModel,M=v.filter(pe=>pe.visible),I=this._getInlineActionCount(),R=null===I,ee=0===I;return{inlineActions:R?M.slice(0):ee?new V.Z:M.slice(0,I),menuActions:R?new V.Z:M.slice(ee?0:I)}}_featureMenuOpenChanged(v){v?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(v){v?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:v,messagesCommon:M}=this;v&&(this.viewModel.title="error"===v.viewModel?.state?M.errorMessage:v.viewModel?.title||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:v}=this;v&&(this.viewModel.content=v)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(v){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(v),this._featureMenuIntersectionObserverNode=v}_handleFeatureMenuKeyup(v){"Escape"===(0,Us.kK)(v)&&(v.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(v){"Escape"===(0,Us.kK)(v)&&(v.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(v){const{viewModel:M}=this;M.activeFeature=M.features[v.currentTarget["data-feature-index"]]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(v){const M=(0,Us.kK)(v),{_featureMenuNode:I}=this,R=v.currentTarget["data-feature-index"];if(!I)return;const ee=I.querySelectorAll("li"),pe=ee.length;"ArrowUp"!==M?"ArrowDown"!==M?"Home"!==M?"End"!==M||(v.stopPropagation(),ee[ee.length-1].focus()):(v.stopPropagation(),ee[0].focus()):(v.stopPropagation(),ee[(R+1+pe)%pe].focus()):(v.stopPropagation(),ee[(R-1+pe)%pe].focus())}_handleActionMenuItemKeyup(v){const M=(0,Us.kK)(v),{_actionsMenuNode:I}=this,R=v.currentTarget.dataset.actionUid,{menuActions:ee}=this.dividedActions,pe=ee.findIndex(ze=>ze.uid===R);if(!I)return;const Me=I.querySelectorAll("li"),xe=Me.length;"ArrowUp"!==M?"ArrowDown"!==M?"Home"!==M?"End"!==M||(v.stopPropagation(),Me[Me.length-1].focus()):(v.stopPropagation(),Me[0].focus()):(v.stopPropagation(),Me[(pe+1+xe)%xe].focus()):(v.stopPropagation(),Me[(pe-1+xe)%xe].focus())}_handleMainKeyup(v){const M=(0,Us.kK)(v);"ArrowLeft"===M&&(v.stopPropagation(),this.previous()),"ArrowRight"===M&&(v.stopPropagation(),this.next())}_spinnerEnabledChange(v){if(this._destroySpinner(),!v)return;const M=this.get("viewModel.view");this._createSpinner(M)}_hideSpinner(){const{_spinner:v}=this;v&&(v.location=null,v.hide())}_displaySpinner(){const{_spinner:v}=this;if(!v)return;const{location:M,waitingForResult:I}=this.viewModel;I&&M?v.show({location:M}):v.hide()}_getIconStyles(v){return{"background-image":v?`url(${v})`:""}}_shouldFocus(v){var M=this;return(0,x.Z)(function*(){v?.shouldFocus&&(yield(0,bt.N1)(()=>!0===M.viewModel?.active),M.focus())})()}_addSelectedFeatureIndexHandle(){const v=(0,bt.YP)(()=>this.viewModel?.selectedFeatureIndex,(M,I)=>this._selectedFeatureIndexUpdated(M,I));this._handles.add(v,Xc)}_selectedFeatureIndexUpdated(v,M){const{featureCount:I}=this;I&&v!==M&&-1!==v&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:v}=this;v&&(v.viewModel=null,v&&!v.destroyed&&v.destroy()),this._feature=null}_isScreenLocationWithinView(v,M){return v.x>-1&&v.y>-1&&v.x<=M.width&&v.y<=M.height}_isOutsideView(v){const{popupHeight:M,popupWidth:I,screenLocation:R,side:ee,view:pe}=v;if(isNaN(I)||isNaN(M)||!pe||!R)return!1;const Me=pe.padding;return"right"===ee&&R.x+I/2>pe.width-Me.right||"left"===ee&&R.x-I/2<Me.left||"top"===ee&&R.y-M<Me.top||"bottom"===ee&&R.y+M>pe.height-Me.bottom}_calculateAutoAlignment(v){if("auto"!==v)return v;const{_pointerOffsetInPx:M,_containerNode:I,_mainContainerNode:R,viewModel:ee}=this,{screenLocation:pe,view:Me}=ee;if((0,ce.Wi)(pe)||!Me||!I)return"top-center";if(!this._isScreenLocationWithinView(pe,Me))return this._get("currentAlignment")||"top-center";function xe(Ys){return parseInt(Ys.replace(/[^-\d\.]/g,""),10)}const ze=R?window.getComputedStyle(R,null):null,st=ze?xe(ze.getPropertyValue("max-height")):0,ut=ze?xe(ze.getPropertyValue("height")):0,{height:Ct,width:Gt}=I.getBoundingClientRect(),Ft=Gt+M,ps=Math.max(Ct,st,ut)+M,Ps=this._isOutsideView({popupHeight:ps,popupWidth:Ft,screenLocation:pe,side:"right",view:Me}),Is=this._isOutsideView({popupHeight:ps,popupWidth:Ft,screenLocation:pe,side:"left",view:Me}),zs=this._isOutsideView({popupHeight:ps,popupWidth:Ft,screenLocation:pe,side:"top",view:Me}),fr=this._isOutsideView({popupHeight:ps,popupWidth:Ft,screenLocation:pe,side:"bottom",view:Me});return Is?zs?"bottom-right":"top-right":Ps?zs?"bottom-left":"top-left":zs?fr?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(v){return"function"==typeof v?v.call(this):v}_getCurrentAlignment(){const{alignment:v,dockEnabled:M}=this;return M||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(v)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(v){const M=["left","right"];return(0,Ar.dZ)(this.container)&&M.reverse(),v.replace(/leading/gi,M[0]).replace(/trailing/gi,M[1])}_callDockPosition(v){return"function"==typeof v?v.call(this):v}_getDockPosition(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(v){if("auto"!==v)return v;const M=this.viewModel?.view,I=(0,Ar.dZ)(this.container)?"top-left":"top-right";if(!M)return I;const R=M.padding||{left:0,right:0,top:0,bottom:0},ee=M.width-R.left-R.right,{breakpoints:pe}=M;return pe&&ee<=pe.xsmall?"bottom-center":I}_positionContainer(v=this._containerNode){if(v&&(this._containerNode=v),!this._containerNode)return;const{screenLocation:M}=this.viewModel,{width:I}=this._containerNode.getBoundingClientRect(),R=this._calculatePositionStyle(M,I);R&&Object.assign(this._containerNode.style,R)}_calculateFullWidth(v){const{currentAlignment:M,_pointerOffsetInPx:I}=this;return"top-left"===M||"bottom-left"===M||"top-right"===M||"bottom-right"===M?v+I:v}_calculateAlignmentPosition(v,M,I,R){const{currentAlignment:ee,_pointerOffsetInPx:pe}=this;if(!I)return;const{padding:Me}=I,xe=R/2,ze=I.height-M,st=I.width-v;return"bottom-center"===ee?{top:M+pe-Me.top,left:v-xe-Me.left}:"top-left"===ee?{bottom:ze+pe-Me.bottom,right:st+pe-Me.right}:"bottom-left"===ee?{top:M+pe-Me.top,right:st+pe-Me.right}:"top-right"===ee?{bottom:ze+pe-Me.bottom,left:v+pe-Me.left}:"bottom-right"===ee?{top:M+pe-Me.top,left:v+pe-Me.left}:"top-center"===ee?{bottom:ze+pe-Me.bottom,left:v-xe-Me.left}:void 0}_calculatePositionStyle(v,M){const{dockEnabled:I,view:R}=this;if(!R)return;if(I)return{left:"",top:"",right:"",bottom:""};if((0,ce.Wi)(v)||!M)return;const ee=this._calculateFullWidth(M),pe=this._calculateAlignmentPosition(v.x,v.y,R,ee);return pe?{top:void 0!==pe.top?`${pe.top}px`:"auto",left:void 0!==pe.left?`${pe.left}px`:"auto",bottom:void 0!==pe.bottom?`${pe.bottom}px`:"auto",right:void 0!==pe.right?`${pe.right}px`:"auto"}:void 0}_viewChange(v,M){v&&M&&(this.close(),this.clear())}_viewReadyChange(v,M){if(v){const I=this.get("viewModel.view");this._wireUpView(I)}else M&&(this.close(),this.clear())}_wireUpView(v){if(this._destroySpinner(),!v)return;const{spinnerEnabled:M}=this;M&&this._createSpinner(v),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(v,M,I){const[R,ee]=v,[pe,Me]=M,{width:xe=0,height:ze=0}=I??{};return R<=xe&&pe>xe||R>xe&&pe<=xe||ee<=ze&&Me>ze||ee>ze&&Me<=ze}_updateDockEnabledForViewSize(v,M){if(!v||!M)return;const I=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},R=I.left+I.right,ee=I.top+I.bottom,pe=[],Me=[];pe[0]=v[0]-R,pe[1]=v[1]-ee,Me[0]=M[0]-R,Me[1]=M[1]-ee;const{dockOptions:xe}=this;this._dockingThresholdCrossed(pe,Me,xe.breakpoint)&&this._setDockEnabledForViewSize(xe),this._setCurrentDockPosition()}_focusDockButtonNode(v){this._focusDockButton&&(this._focusDockButton=!1,v.focus())}_closeButtonNodeUpdated(v){return this._focusClose?(this._focusClose=!1,void v.focus()):this._blurClose?(this._blurClose=!1,void v.blur()):void 0}_mainContainerNodeUpdated(v){return this._mainContainerNode=v,this._focusContainer?(this._focusContainer=!1,void v.focus()):this._blurContainer?(this._blurContainer=!1,void v.blur()):void 0}_featureMenuNodeUpdated(v){if(this._featureMenuNode=v,!v||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const M=v.querySelectorAll("li");M.length&&M[0].focus()}_actionsMenuNodeUpdated(v){if(this._actionsMenuNode=v,!v||!this._focusFirstAction)return;this._focusFirstAction=!1;const M=v.querySelectorAll("li");M.length&&M[0].focus()}_focusFeatureMenuButtonNode(v){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,v.focus())}_focusActionsMenuButtonNode(v){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,v.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:v,viewModel:M}=this;M&&(M.screenLocationEnabled=M.active&&!v)}_shouldDockAtCurrentViewSize(v){const M=v.breakpoint,I=this.viewModel?.view?.ui;if(!I)return!1;const{width:R,height:ee}=I;if(isNaN(R)||isNaN(ee)||!M)return!1;const pe=M.hasOwnProperty("width")&&R<=(M.width??0),Me=M.hasOwnProperty("height")&&ee<=(M.height??0);return pe||Me}_setDockEnabledForViewSize(v){v.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(v))}_getPageText(v,M){return this.featureNavigationVisible?(0,Zn.n)(this.messages.pageText,{index:M+1,total:v}):null}_destroySpinner(){const{_spinner:v,view:M}=this;v&&(M&&M.ui&&M.ui.remove(v,qc),v.destroy(),this._spinner=null)}_createSpinner(v){v&&(this._spinner=new Wp({view:v}),v.ui.add(this._spinner,{key:qc,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const v=!this.featureMenuOpen;this._featureMenuOpenChanged(v),this.actionsMenuOpen=!1,this.featureMenuOpen=v}_toggleActionsMenu(){const v=!this.actionsMenuOpen;this._actionsMenuOpenChanged(v),this.featureMenuOpen=!1,this.actionsMenuOpen=v}_triggerAction(v){const M=v.currentTarget.dataset.actionUid,{allActions:I}=this.viewModel,R=I.findIndex(pe=>pe.uid===M),ee=I.getItemAt(R);ee&&"toggle"===ee.type&&(ee.value=!ee.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(R)}_selectFeature(v){const M=v.currentTarget["data-feature-index"];isNaN(M)||(this.viewModel.selectedFeatureIndex=M),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"actionsMenuId",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"actionsMenuButtonId",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"featureMenuId",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"titleId",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"contentId",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"hasContent",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"featureNavigationVisible",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"collapsible",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"featureMenuVisible",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"contentCollapsed",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"dividedActions",null),(0,w._)([(0,C.Cb)({readOnly:!0,dependsOn:["_flowItems.length"]})],Ws.prototype,"_activeFlowItemWidget",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"actions",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"actionsMenuOpen",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"alignment",void 0),(0,w._)([(0,C.Cb)()],Ws.prototype,"autoCloseEnabled",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"autoOpenEnabled",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"defaultPopupTemplateEnabled",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"content",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"collapsed",void 0),(0,w._)([(0,C.Cb)()],Ws.prototype,"collapseEnabled",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"currentAlignment",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"currentDockPosition",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"dockOptions",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"dockEnabled",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"featureCount",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"featureMenuOpen",void 0),(0,w._)([(0,C.Cb)()],Ws.prototype,"features",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"goToOverride",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"headingLevel",void 0),(0,w._)([(0,C.Cb)()],Ws.prototype,"highlightEnabled",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"location",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"label",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"maxInlineActions",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Popup/t9n/Popup")],Ws.prototype,"messages",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/t9n/common")],Ws.prototype,"messagesCommon",void 0),(0,w._)([(0,C.Cb)()],Ws.prototype,"promises",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"selectedFeature",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"selectedFeatureIndex",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ws.prototype,"selectedFeatureWidget",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"spinnerEnabled",void 0),(0,w._)([(0,C.Cb)()],Ws.prototype,"title",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"updateLocationEnabled",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"view",null),(0,w._)([(0,C.Cb)({type:Yc}),Qc(["triggerAction","trigger-action"])],Ws.prototype,"viewModel",void 0),(0,w._)([(0,C.Cb)()],Ws.prototype,"visible",null),(0,w._)([(0,C.Cb)()],Ws.prototype,"visibleElements",void 0),(0,w._)([(0,ve.p)("visibleElements")],Ws.prototype,"castVisibleElements",null),(0,w._)([(0,Sn.h)()],Ws.prototype,"_close",null),(0,w._)([(0,Sn.h)()],Ws.prototype,"_toggleDockEnabled",null),(0,w._)([(0,Sn.h)()],Ws.prototype,"_toggleFeatureMenu",null),(0,w._)([(0,Sn.h)()],Ws.prototype,"_toggleActionsMenu",null),(0,w._)([(0,Sn.h)()],Ws.prototype,"_triggerAction",null),(0,w._)([(0,Sn.h)()],Ws.prototype,"_selectFeature",null),(0,w._)([(0,Sn.h)()],Ws.prototype,"_next",null),(0,w._)([(0,Sn.h)()],Ws.prototype,"_previous",null),Ws=(0,w._)([(0,F.j)("esri.widgets.Popup")],Ws);const rd=Ws,Eu=[0,0];function nd(v){v&&((0,jt.cS)(v),v.parentNode&&v.parentNode.removeChild(v))}const f0=v=>{let M=class extends v{constructor(...I){super(...I),this._freqInfo={freq:16,time:750},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,0!==I.length&&void 0!==I[0]?.popup||(this.popup=new rd({view:this})),this.handles.add([(0,bt.YP)(()=>this.cursor,R=>{const{surface:ee}=this;ee&&ee.setAttribute("data-cursor",R)}),(0,bt.YP)(()=>this.interacting,R=>{const{surface:ee}=this;ee&&ee.setAttribute("data-interacting",R.toString())})])}initialize(){this.handles.add((0,bt.YP)(()=>this.ui,(I,R)=>this._handleUIChange(I,R))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=(0,ce.SC)(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(I){const R=this._get("container"),ee=(0,jt.L7)(I);if(ee||"string"!=typeof I||k.Z.getLogger(this.declaredClass).error("#container",`element with id '${I}' not found`),R===ee)return;const pe="dom-size";if(this.handles.remove(pe),this._stopMeasuring(),R&&(R.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(nd(this.root),this._set("root",null)),this.userContent&&((0,jt.YD)(this.userContent,R),nd(this.userContent),this._set("userContent",null))),!ee)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);ee.classList.add("esri-view");const Me=document.createElement("div");Me.className="esri-view-user-storage",(0,jt.YD)(ee,Me),ee.appendChild(Me),this._set("userContent",Me);const xe=document.createElement("div");xe.className="esri-view-root",ee.insertBefore(xe,ee.firstChild),this._set("root",xe);const ze=document.createElement("div");ze.className="esri-view-surface",ze.setAttribute("role","application"),ze.tabIndex=0,xe.appendChild(ze),this._set("surface",ze);const st=new cs;xe.appendChild(st.surface),this._set("overlay",st),(0,bt.YP)(()=>st.needsRender,ut=>{this._overlayRenderTaskHandle=ut&&!this._overlayRenderTaskHandle?(0,us.A)({render:()=>this.overlay?.render()}):(0,ce.hw)(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add((0,bt.YP)(()=>this.size,ut=>{const[Ct,Gt]=ut,Ft="esri-view-surface--inset-outline";Ct>=document.body.clientWidth||Gt>=document.body.clientHeight?ze.classList.add(Ft):ze.classList.remove(Ft)},bt.nn),pe),this._set("container",ee),this._startMeasuring()}get focused(){const I=document.activeElement===this.surface;return document.hasFocus()&&I}set popup(I){const R=this._get("popup");R&&R!==I&&R.destroy(),this._set("popup",I)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(I,R,ee){const pe=this.position;return I-=pe?pe[0]:0,R-=pe?pe[1]:0,ee?(ee[0]=I,ee[1]=R):ee=[I,R],ee}containerToPage(I,R,ee){const pe=this.position;return I+=pe?pe[0]:0,R+=pe?pe[1]:0,ee?(ee[0]=I,ee[1]=R):ee=[I,R],ee}_handleUIChange(I,R){R&&(this.handles.remove("ui"),R.destroy()),I&&this._wireUI(I),this._set("ui",I)}_wireUI(I){this.handles.remove("ui"),I&&(I.view=this,this.handles.add([(0,bt.YP)(()=>this.root,R=>{I.container=R?function d0(v){const M=document.createElement("div");return v.appendChild(M),M}(R):null},bt.nn),(0,bt.YP)(()=>this.popup,(R,ee)=>{ee&&I.remove(ee,"popup"),R&&(R.view=I.view,I.add(R,{key:"popup",position:"manual"}))},bt.nn)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const I=this._freqInfo;I.freq=16,I.time=750,this.handles.add([(()=>{const R=()=>{I.freq=16,I.time=750};return window.addEventListener("resize",R),{remove(){window.removeEventListener("resize",R)}}})(),(0,us.A)({prepare:R=>{const ee=this._measure(),pe=this._freqInfo;if(pe.time+=R.deltaTime,ee&&(pe.freq=16,this._get("resizing")||this._set("resizing",!0)),pe.time<pe.freq)return;pe.time=0;const Me=this._position();pe.freq=Me||ee?16:Math.min(750,2*pe.freq),!ee&&pe.freq>=512&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const I=this.container,R=I?I.clientWidth:0,ee=I?I.clientHeight:0;if(0===R||0===ee)return this.suspended||this._set("suspended",!0),!1;const pe=this.width,Me=this.height;return R===pe&&ee===Me?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",R),this._set("height",ee),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:pe,oldHeight:Me,width:R,height:ee}),!0)}_position(){const I=this.container,R=this.position,ee=I&&function c0(v){const M=(v.ownerDocument||window.document).defaultView,I=v.getBoundingClientRect();return Eu[0]=I.left+(M?.pageXOffset??0),Eu[1]=I.top+(M?.pageYOffset??0),Eu}(I);return!(!ee||R&&ee[0]===R[0]&&ee[1]===R[1]||(this._set("position",[ee[0],ee[1]]),0))}forceDOMReadyCycle(){}};return(0,w._)([(0,C.Cb)()],M.prototype,"container",null),(0,w._)([(0,C.Cb)({readOnly:!0})],M.prototype,"focused",null),(0,w._)([(0,C.Cb)({readOnly:!0})],M.prototype,"height",void 0),(0,w._)([(0,C.Cb)({type:rd})],M.prototype,"popup",null),(0,w._)([(0,C.Cb)({type:cs})],M.prototype,"overlay",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],M.prototype,"position",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],M.prototype,"resizing",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],M.prototype,"root",void 0),(0,w._)([(0,C.Cb)({value:null,readOnly:!0})],M.prototype,"size",null),(0,w._)([(0,C.Cb)({readOnly:!0})],M.prototype,"surface",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],M.prototype,"suspended",void 0),(0,w._)([(0,C.Cb)()],M.prototype,"ui",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],M.prototype,"userContent",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],M.prototype,"width",void 0),(0,w._)([(0,C.Cb)()],M.prototype,"widthBreakpoint",void 0),M=(0,w._)([(0,F.j)("esri.views.DOMContainer")],M),M},m0=v=>{let M=class extends v{fetchPopupFeatures(I,R){var ee=this;return(0,x.Z)(function*(){yield ee.when();const{location:pe,queryArea:Me,layerViewsAndGraphics:xe,clientOnlyGraphics:ze}=yield ee._prepareFetchPopupFeatures(I,R),st=Promise.resolve(ze),ut=ee._queryLayerPopupFeatures(Me,xe,R),Ct=ut.map(Gt=>Gt.promise);return{location:pe,clientOnlyGraphics:ze,allGraphicsPromise:(0,z.WW)([st,...Ct]).then(Gt=>Array.from(new Set(Gt.flat()))),promisesPerLayerView:ut}})()}_queryLayerPopupFeatures(I,R,ee){return R.map(({layerView:pe,graphics:Me})=>{const xe={clientGraphics:Me,event:(0,ce.pC)(ee)?ee.event:void 0,signal:(0,ce.pC)(ee)?ee.signal:void 0,defaultPopupTemplateEnabled:!!(0,ce.pC)(ee)&&!!ee.defaultPopupTemplateEnabled},ze=pe.fetchPopupFeatures(I,xe);return{layerView:pe,promise:ze}})}_isValidPopupGraphic(I,R){return I&&!!I.getEffectivePopupTemplate((0,ce.pC)(R)&&R.defaultPopupTemplateEnabled)}_prepareFetchPopupFeatures(I,R){var ee=this;return(0,x.Z)(function*(){const{clientGraphics:pe,queryArea:Me,location:xe}=yield ee._popupHitTestGraphics(I,R),ze=ee._getFetchPopupLayerViews(),{layerViewsAndGraphics:st,clientOnlyGraphics:ut}=ee._graphicsPerFetchPopupLayerView(pe,ze);return{clientOnlyGraphics:ut,layerViewsAndGraphics:st,queryArea:Me,location:xe}})()}_popupHitTestGraphics(I,R){var ee=this;return(0,x.Z)(function*(){const pe=yield ee.popupHitTest(I),xe=pe.mapPoint,ze=pe.results.filter(ut=>"graphic"===ut.type&&ee._isValidPopupGraphic(ut.graphic,R)),st=ze.length?ze[0].mapPoint:null;return{clientGraphics:ze.map(ut=>ut.graphic),queryArea:xe,location:xe||st}})()}_getFetchPopupLayerViews(){const I=[];return this.allLayerViews.forEach(R=>{this._isValidPopupLayerView(R)&&I.push(R)}),(0,ce.pC)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&I.push(this.graphicsView),I.reverse()}_isValidPopupLayerView(I){return(0,ce.pC)(I)&&(!("layer"in I)||!I.suspended)&&"fetchPopupFeatures"in I}_graphicsPerFetchPopupLayerView(I,R){const ee=[],pe=new Map,Me=R.map(xe=>{const ze=[];return pe.set("layer"in xe?xe.layer:xe.graphics,ze),{layerView:xe,graphics:ze}});for(const xe of I){const ze=pe.get(xe.layer)||pe.get(xe.sourceLayer)||null;ze?ze.push(xe):ee.push(xe)}return{layerViewsAndGraphics:Me,clientOnlyGraphics:ee}}};return M=(0,w._)([(0,F.j)("esri.views.PopupView")],M),M};var y0=g(55025),bu=g(11823),id=g(70120),od=g(99508),Mu=g(55625),Cu=g(96095),Fo=g(68230);let ol=class extends Mu.a{constructor(v){super(v),this.handles.add(this.on("before-add",M=>{(0,ce.Wi)(M.item)||M.item.parent===this.owner&&(k.Z.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),M.preventDefault())}))}_own(v){v.parent=this.owner}_release(v){v.parent=null}};ol=(0,w._)([(0,F.j)("esri.support.AnalysesCollection")],ol);var ad=g(33928),ld=g(27655);let Ui=class extends he.Z{constructor(v){super(v),this.view=null,this.baseLayerViews=new V.Z,this.referenceLayerViews=new V.Z,this._loadingHandle=(0,bt.YP)(()=>this.view?.map?.basemap,M=>{M&&M.load().catch(()=>{})},bt.nn)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;const v=this.view?.map?.basemap;return!!v&&!!v.loaded&&(this.baseLayerViews.some(M=>M.updating)||this.referenceLayerViews.some(M=>M.updating))}};(0,w._)([(0,C.Cb)({constructOnly:!0})],Ui.prototype,"view",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ui.prototype,"baseLayerViews",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ui.prototype,"referenceLayerViews",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ui.prototype,"suspended",null),(0,w._)([(0,C.Cb)({type:Boolean,readOnly:!0})],Ui.prototype,"updating",null),Ui=(0,w._)([(0,F.j)("esri.views.BasemapView")],Ui);class _0{constructor(M,I,R){this.layer=M,this.view=I,this.layerViewImporter=R,this._controller=new AbortController,this._deferred=(0,z.dD)(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,(0,z.fu)(this._controller.signal,()=>{const ee=new U.Z("cancelled:layerview-create","layerview creation cancelled",{layer:M});this._deferred.reject(ee)})}tryRecycle(M){if(!this.done||!this.layerView||!function g0(v){return"tryRecycleWith"in v}(this.layerView))return null;const I=this.layer.type,R=this._controller.signal;for(let ee=0;ee<M.length;ee++){const pe=M[ee];if(pe.type!==I)continue;const Me=this.layerView.tryRecycleWith(pe,{signal:R});if(Me){M.splice(ee,1),this.layer=pe;const xe=this.layerView,ze=xe.view;return this.promise=Promise.race([Me.then(()=>((0,z.k_)(this._controller.signal),pe.emit("layerview-destroy",{view:ze,layerView:xe}),ze.emit("layerview-destroy",{view:ze,layerView:xe}),pe.emit("layerview-create",{view:ze,layerView:xe}),ze.emit("layerview-create",{view:ze,layerView:xe}),xe)),new Promise((st,ut)=>(0,z.fu)(this._controller.signal,()=>ut((0,z.zE)())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:M}=this;if(!M)return;const{layer:I,view:R}=this;I.emit("layerview-destroy",{view:R,layerView:M}),R.emit("layerview-destroy",{layer:I,layerView:M}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}start(){var M=this;return(0,x.Z)(function*(){if(M._started)return;M._started=!0;const{_controller:{signal:I},layer:R,view:ee}=M;M._map=ee.map;try{let pe,Me;if(yield R.load({signal:I}),"prefetchResources"in R&&(yield R.prefetchResources?.({signal:I})),function E0(v){return"createLayerView"in v&&null!=v.createLayerView}(R))pe=yield R.createLayerView(ee,{signal:I});else{if(!M.layerViewImporter.hasLayerViewModule(R))throw new U.Z("layer:view-not-supported","No layerview implementation was found");const st=yield M.layerViewImporter.importLayerView(R);(0,z.k_)(I),pe="default"in st?new st.default({layer:R,view:ee}):new st({layer:R,view:ee})}const xe=()=>{Me=(0,ce.hw)(Me),pe.destroyed||pe.destroy(),pe.layer=null,pe.parent=null,pe.view=null,M.done=!0};Me=(0,z.fu)(I,xe),(0,z.k_)(I);try{yield pe.when()}catch(st){throw xe(),st}if(!M._map?.allLayers?.includes(R))return xe(),void M._deferred.reject(new U.Z("view:no-layerview-for-layer","The layer has been removed from the map",{layer:R}));M.layerView=pe,R.emit("layerview-create",{view:ee,layerView:pe}),ee.emit("layerview-create",{layer:R,layerView:pe}),M.done=!0,M._deferred.resolve(pe)}catch(pe){R.emit("layerview-create-error",{view:ee,error:pe}),ee.emit("layerview-create-error",{layer:R,error:pe}),M.done=!0,M._deferred.reject(new U.Z("layerview:create-error","layerview creation failed",{layer:R,error:pe}))}})()}}let $n=class extends he.Z{constructor(v){super(v),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new et.t,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const M=this.view.map?.allLayers;if(M)for(const I of M)this.layerViewImporter.hasLayerViewModule(I)&&this.layerViewImporter.importLayerView(I)},this._reschedule=()=>((0,ce.Wi)(this._workPromise)&&(this._workPromise=(0,z.dD)(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles((0,us.Os)(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{const M=this.view.map;if(this._map!==M&&(this.clear(),this._map=M),(0,ce.Wi)(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const I=new Set,R=[],ee=this.view.ready,pe=xe=>{if(!(0,ce.Wi)(xe))for(const ze of xe)if(ze){I.add(ze);const st=this._layerLayerViewInfoMap.get(ze);st&&ee?st.start():st||this._recyclingInfoMap.has(ze)||R.push(ze),"layers"in ze&&ze.layers&&pe(ze.layers)}};for(const xe of this._rootCollectionNames)pe(this.get(xe));for(const[xe,ze]of this._layerLayerViewInfoMap)if(!I.has(xe)){this._layerLayerViewInfoMap.delete(ze.layer);const st=ze.tryRecycle(R);st?(this._recyclingInfoMap.set(ze.layer,ze),st.then(()=>{this._recyclingInfoMap.delete(ze.layer),this._layerLayerViewInfoMap.set(ze.layer,ze),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(ze.layer),ze.destroy(),this._reschedule()})):ze.destroy()}for(const[xe,ze]of this._recyclingInfoMap)I.has(xe)||(this._recyclingInfoMap.delete(ze.layer),ze.destroy());for(const xe of R)this._createLayerView(xe);this._refreshCollections();const Me=[M?.ground?.layers,M?.basemap?.baseLayers,M?.basemap?.referenceLayers,M?.layers].filter(xe=>!!xe);I.forEach(xe=>"layers"in xe&&Me.push(xe.layers)),this.addHandles(Me.map(xe=>this._watchUpdatingTracking.addOnCollectionChange(()=>xe,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([(0,bt.on)(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),(0,bt.YP)(()=>{const v=this.view,M=v?.map;return[M?.basemap,M?.ground,M?.layers,v?.ready]},()=>this._reschedule(),bt.tX)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,(0,ce.pC)(this._workPromise)&&(this._workPromise.reject((0,z.zE)()),this._workPromise=null)}get _layersToLayerViews(){const v=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&v.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(v)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return(0,ce.pC)(this._workPromise)||this._watchUpdatingTracking.updating||(0,Qn.oE)(this._layerLayerViewInfoMap,v=>!v.done)}get updatingRemaining(){let v=0;for(const M of this._layerLayerViewInfoMap.values())M.done||++v;return v}clear(){if(!this.destroyed){for(const v of this._layerLayerViewInfoMap.values())v.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}whenLayerView(v){var M=this;return(0,x.Z)(function*(){if(yield M._reschedule(),!M._layerLayerViewInfoMap.has(v)){if(M._recyclingInfoMap.has(v))return M._recyclingInfoMap.get(v).promise;throw new U.Z("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:v})}return M._layerLayerViewInfoMap.get(v).promise})()}_refreshCollections(){for(const[v,M]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(v),this.get(M),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(v,M,I){if(!v||!M)return void(M&&M.removeAll());let R=0;for(const ee of v){const pe=this._layerLayerViewInfoMap.get(ee);if(!pe||!pe.layerView)continue;const Me=pe.layerView;Me.layer=ee,Me.parent=I,M.getItemAt(R)!==Me&&M.splice(R,0,Me),ee.layers&&this._populateLayerViewsOwners(ee.layers,Me.layerViews,Me),R+=1}R<M.length&&M.splice(R,M.length)}_createLayerView(v){v.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(v)&&this.layerViewImporter.importLayerView(v);const M=new _0(v,this.view,this.layerViewImporter);M.promise.then(()=>this._refreshCollections(),I=>{I&&((0,z.D_)(I)||"cancelled:layerview-create"===I.name)||k.Z.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${v.title??"no title"}', id:'${v.id??"no id"}' of type '${v.type}'.`,{layer:v,error:I}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(v,M),this.view.ready&&M.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};(0,w._)([(0,C.Cb)()],$n.prototype,"_workPromise",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],$n.prototype,"_watchUpdatingTracking",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],$n.prototype,"_layersToLayerViews",null),(0,w._)([(0,C.Cb)({readOnly:!0})],$n.prototype,"_rootCollectionNames",null),(0,w._)([(0,C.Cb)()],$n.prototype,"layerViewImporter",void 0),(0,w._)([(0,C.Cb)()],$n.prototype,"supportsGround",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],$n.prototype,"updating",null),(0,w._)([(0,C.Cb)({readOnly:!0})],$n.prototype,"updatingRemaining",null),(0,w._)([(0,C.Cb)({constructOnly:!0})],$n.prototype,"view",void 0),$n=(0,w._)([(0,F.j)("esri.views.LayerViewManager")],$n);const v0=$n;let Un=class extends he.Z{constructor(v){super(v),this.factor=1.5,this.offset=(0,Ts.vW)(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};(0,w._)([(0,C.Cb)({type:Number})],Un.prototype,"factor",void 0),(0,w._)([(0,C.Cb)({nonNullable:!0})],Un.prototype,"offset",void 0),(0,w._)([(0,C.Cb)()],Un.prototype,"position",void 0),(0,w._)([(0,C.Cb)({type:Number,range:{min:0}})],Un.prototype,"size",void 0),(0,w._)([(0,C.Cb)()],Un.prototype,"maskUrl",void 0),(0,w._)([(0,C.Cb)()],Un.prototype,"maskEnabled",void 0),(0,w._)([(0,C.Cb)()],Un.prototype,"overlayUrl",void 0),(0,w._)([(0,C.Cb)()],Un.prototype,"overlayEnabled",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Un.prototype,"version",null),(0,w._)([(0,C.Cb)({type:Boolean})],Un.prototype,"visible",void 0),Un=(0,w._)([(0,F.j)("esri.views.Magnifier")],Un);const ud=Un;var cd=g(81905);let _a=class extends he.Z{constructor(v,M){super({}),this._stage=v,this._textureRequests=new Map,this._frameTask=M?.registerTask(cd.T8.TEXTURE_UNLOAD)??cd.sq}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(v=>this._releaseTextureRequest(v)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(v,M,I){const R=this.makeUid(v);let ee=this._textureRequests.get(R);if(!ee){const pe=M();ee={referenceCount:0,texture:pe,textureAsync:null,abortController:null,onRemove:I},this._stage&&(this._stage.add(pe),this._stage.loadImmediate(pe)),this._textureRequests.set(R,ee)}return ee.referenceCount++,{uid:R,texture:ee.texture,release:()=>this._release(R)}}_release(v){const M=this._textureRequests.get(v);M?(M.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+v),M.referenceCount--,M.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(v))):console.warn(`TextureCollection: texture doesn't exist: '${v}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(v){if(!this._textureRequests)return;const M=this._textureRequests.get(v);!M||M.referenceCount>0||(this._releaseTextureRequest(M),this._textureRequests.delete(v))}_releaseTextureRequest(v){v.onRemove&&v.onRemove(),v.texture?this._stage?.remove(v.texture):v.abortController&&(v.abortController.abort(),v.abortController=null)}makeUid(v,M=null){return(0,ce.pC)(M)?`${v}.${M}px`:v}};(0,w._)([(0,C.Cb)()],_a.prototype,"_frameTask",void 0),(0,w._)([(0,C.Cb)()],_a.prototype,"updating",null),_a=(0,w._)([(0,F.j)("esri.views.3d.support.TextureCollection")],_a);var dd,v,an=g(15237);(v=dd||(dd={}))[v.Left=0]="Left",v[v.Middle=1]="Middle",v[v.Right=2]="Right";const hd=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],pd={};function fd(v){return!!pd[v]}hd.forEach(v=>{pd[v]=!0});class M0{constructor(M){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=M,this.inputManager=null}connect(M){M&&this.disconnect(),this.inputManager=M,this._handlers.forEach(({handler:I,priority:R},ee)=>this.inputManager?.installHandlers(ee,[I],R))}disconnect(){this.inputManager&&this._handlers.forEach((M,I)=>this.inputManager?.uninstallHandlers(I)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(M,I,R,ee){const pe=Array.isArray(M)?M:M.split(",");if(!function b0(v){for(const M of v)if(!fd(M))return!1;return!0}(pe))return pe.some(fd)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let Me,xe;Array.isArray(I)?xe=I:(Me=I,xe=[]),"function"==typeof R?Me=R:ee=R,ee=ee??Uo.f.DEFAULT;const ze=this._createUniqueGroupName(),st=new C0(this.view,pe,xe,Me);this._handlers.set(ze,{handler:st,priority:ee});for(const ut of pe){const Ct=this._handlerCounts.get(ut)||0;this._handlerCounts.set(ut,Ct+1)}return this.inputManager&&this.inputManager.installHandlers(ze,[st],ee),{remove:()=>this._removeHandler(ze,pe)}}hasHandler(M){return!!this._handlerCounts.get(M)}_removeHandler(M,I){if(this._handlers.has(M)){this._handlers.delete(M);for(const R of I){const ee=this._handlerCounts.get(R);void 0===ee?console.error("Trying to remove handler for event that has no handlers registered: ",R):1===ee?this._handlerCounts.delete(R):this._handlerCounts.set(R,ee-1)}}this.inputManager&&this.inputManager.uninstallHandlers(M)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class C0 extends an.a{constructor(M,I,R,ee){super(!0),this._latestDragStart=void 0,this.view=M;for(const pe of I)switch(pe){case"click":this.registerIncoming("click",R,Me=>ee(this._wrapClick(Me)));break;case"double-click":this.registerIncoming("double-click",R,Me=>ee(this._wrapDoubleClick(Me)));break;case"immediate-click":this.registerIncoming("immediate-click",R,Me=>ee(this._wrapImmediateClick(Me)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",R,Me=>ee(this._wrapImmediateDoubleClick(Me)));break;case"hold":this.registerIncoming("hold",R,Me=>ee(this._wrapHold(Me)));break;case"drag":this.registerIncoming("drag",R,Me=>{const xe=this._wrapDrag(Me);xe&&ee(xe)});break;case"key-down":this.registerIncoming("key-down",R,Me=>ee(this._wrapKeyDown(Me)));break;case"key-up":this.registerIncoming("key-up",R,Me=>ee(this._wrapKeyUp(Me)));break;case"pointer-down":this.registerIncoming("pointer-down",R,Me=>ee(this._wrapPointer(Me,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",R,Me=>ee(this._wrapPointer(Me,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",R,Me=>ee(this._wrapPointer(Me,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",R,Me=>ee(this._wrapPointerDrag(Me)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",R,Me=>ee(this._wrapMouseWheel(Me)));break;case"pointer-enter":this.registerIncoming("pointer-enter",R,Me=>ee(this._wrapPointer(Me,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",R,Me=>ee(this._wrapPointer(Me,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",R,Me=>{ee(this._wrapGamepad(Me))});break;case"focus":this.registerIncoming("focus",R,Me=>{ee(this._wrapFocus(Me))});break;case"blur":this.registerIncoming("blur",R,Me=>{ee(this._wrapBlur(Me))})}}_wrapFocus(M){return{type:"focus",timestamp:M.timestamp,native:M.data.native,cancelable:M.cancelable,stopPropagation:()=>M.stopPropagation(),async:I=>M.async(I),preventDefault:()=>M.preventDefault()}}_wrapBlur(M){return{type:"blur",timestamp:M.timestamp,native:M.data.native,cancelable:M.cancelable,stopPropagation:()=>M.stopPropagation(),async:I=>M.async(I),preventDefault:()=>M.preventDefault()}}_wrapClick(M){const{pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe,eventId:ze}=M.data,{cancelable:st,timestamp:ut}=M;return{type:"click",pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe,timestamp:ut,screenPoint:(0,Ts.vW)(pe,Me),mapPoint:this._getMapPoint(pe,Me),eventId:ze,cancelable:st,stopPropagation:()=>M.stopPropagation(),async:Ct=>M.async(Ct),preventDefault:()=>M.preventDefault()}}_wrapDoubleClick(M){const{pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe,eventId:ze}=M.data,{cancelable:st,timestamp:ut}=M;return{type:"double-click",pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe,timestamp:ut,mapPoint:this._getMapPoint(pe,Me),eventId:ze,cancelable:st,stopPropagation:()=>M.stopPropagation(),async:Ct=>M.async(Ct),preventDefault:()=>M.preventDefault()}}_wrapImmediateClick(M){const{pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe,eventId:ze}=M.data,st=xe.pointerId,{cancelable:ut,timestamp:Ct}=M;return{type:"immediate-click",pointerId:st,pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe,timestamp:Ct,mapPoint:this._getMapPoint(pe,Me),eventId:ze,cancelable:ut,stopPropagation:()=>M.stopPropagation(),async:Gt=>M.async(Gt),preventDefault:()=>M.preventDefault()}}_wrapImmediateDoubleClick(M){const{pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe,eventId:ze}=M.data,st=xe.pointerId,{cancelable:ut,timestamp:Ct}=M;return{type:"immediate-double-click",pointerId:st,pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe,timestamp:Ct,mapPoint:this._getMapPoint(pe,Me),eventId:ze,cancelable:ut,stopPropagation:()=>M.stopPropagation(),async:Gt=>M.async(Gt),preventDefault:()=>M.preventDefault()}}_wrapHold(M){const{pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe}=M.data,{cancelable:ze,timestamp:st}=M;return{type:"hold",pointerType:I,button:R,buttons:ee,x:pe,y:Me,native:xe,timestamp:st,mapPoint:this._getMapPoint(pe,Me),cancelable:ze,stopPropagation:()=>M.stopPropagation(),async:ut=>M.async(ut),preventDefault:()=>M.preventDefault()}}_getMapPoint(M,I){return this.view.toMap((0,Ts.vW)(M,I),{exclude:[]})}_wrapDrag(M){const I=M.data,{x:R,y:ee}=I.center,{action:pe,pointerType:Me,button:xe}=I;if("start"===pe&&(this._latestDragStart=I),!this._latestDragStart)return;const ze=I.pointer.native,st=I.buttons,{cancelable:ut,timestamp:Ct}=M,Gt={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return"end"===pe&&(this._latestDragStart=void 0),{type:"drag",action:pe,x:R,y:ee,origin:Gt,pointerType:Me,button:xe,buttons:st,radius:I.radius,angle:(0,We.BV)(I.angle),native:ze,timestamp:Ct,cancelable:ut,stopPropagation:()=>M.stopPropagation(),async:Ft=>M.async(Ft),preventDefault:()=>M.preventDefault()}}_wrapKeyDown(M){const{key:I,repeat:R,native:ee}=M.data,{cancelable:pe,timestamp:Me}=M;return{type:"key-down",key:I,repeat:R,native:ee,timestamp:Me,cancelable:pe,stopPropagation:()=>M.stopPropagation(),async:xe=>M.async(xe),preventDefault:()=>M.preventDefault()}}_wrapKeyUp(M){const{key:I,native:R}=M.data,{cancelable:ee,timestamp:pe}=M;return{type:"key-up",key:I,native:R,timestamp:pe,cancelable:ee,stopPropagation:()=>M.stopPropagation(),async:Me=>M.async(Me),preventDefault:()=>M.preventDefault()}}_wrapPointer(M,I){const{x:R,y:ee,button:pe,buttons:Me,native:xe,eventId:ze}=M.data,st=xe.pointerId,ut=xe.pointerType,{cancelable:Ct,timestamp:Gt}=M;return{type:I,x:R,y:ee,pointerId:st,pointerType:ut,button:pe,buttons:Me,native:xe,timestamp:Gt,eventId:ze,cancelable:Ct,stopPropagation:()=>M.stopPropagation(),async:Ft=>M.async(Ft),preventDefault:()=>M.preventDefault()}}_wrapPointerDrag(M){const{x:I,y:R,buttons:ee,native:pe,eventId:Me}=M.data.currentEvent,{button:xe}=M.data.startEvent,ze=M.data.startEvent.native.pointerId,st=M.data.startEvent.native.pointerType,ut=M.data.action,Ct={x:M.data.startEvent.x,y:M.data.startEvent.y},{cancelable:Gt,timestamp:Ft}=M;return{type:"pointer-drag",x:I,y:R,pointerId:ze,pointerType:st,button:xe,buttons:ee,action:ut,origin:Ct,native:pe,timestamp:Ft,eventId:Me,cancelable:Gt,stopPropagation:()=>M.stopPropagation(),async:ps=>M.async(ps),preventDefault:()=>M.preventDefault()}}_wrapMouseWheel(M){const{cancelable:I,data:R,timestamp:ee}=M,{x:pe,y:Me,deltaY:xe,native:ze}=R;return{type:"mouse-wheel",x:pe,y:Me,deltaY:xe,native:ze,timestamp:ee,cancelable:I,stopPropagation:()=>M.stopPropagation(),async:st=>M.async(st),preventDefault:()=>M.preventDefault()}}_wrapGamepad(M){const{action:I,state:R,device:ee}=M.data,{cancelable:pe,timestamp:Me}=M,{buttons:xe,axes:ze}=R;return{type:"gamepad",device:ee,timestamp:Me,action:I,buttons:xe,axes:ze,cancelable:pe,stopPropagation:()=>M.stopPropagation(),async:st=>M.async(st),preventDefault:()=>M.preventDefault()}}}var va,md,yd;function O0(v){return[v.on("before-add",M=>{const I=M.item;if(null==I||v.includes(I))return k.Z.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void M.preventDefault();I.onAdd()}),v.on("after-remove",M=>{const I=M.item;I.active&&(I.view.activeTool=null),I.destroy()})]}function Ou(v){return v.visible&&null!=v.getEditableFlag&&v.getEditableFlag(va.USER)&&v.getEditableFlag(va.MANAGER)}function si(v){return(0,Ts.vW)(v.x,v.y)}function gd(v,M){const I=(v instanceof HTMLElement?v:v.surface)?.getBoundingClientRect();return I?(0,Ts.vW)(M.clientX-I.left,M.clientY-I.top):(0,Ts.vW)(0,0)}function _d(v,M){return M instanceof Event?gd(v,M):si(M)}function vd(v){if(v instanceof Event)return!0;if("object"==typeof v&&"type"in v)switch(v.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}(function(v){v[v.USER=0]="USER",v[v.MANAGER=1]="MANAGER"})(va||(va={})),function(v){v[v.None=0]="None",v[v.Unfocused=1]="Unfocused",v[v.Focused=2]="Focused",v[v.Unselected=4]="Unselected",v[v.Selected=8]="Selected",v[v.All=15]="All"}(md||(md={})),function(v){v[v.None=0]="None",v[v.Custom1=16]="Custom1",v[v.Custom2=32]="Custom2",v[v.Custom3=64]="Custom3",v[v.Custom4=128]="Custom4",v[v.Custom5=256]="Custom5",v[v.Custom6=512]="Custom6",v[v.Custom7=1024]="Custom7",v[v.Custom8=2048]="Custom8",v[v.Custom9=4096]="Custom9",v[v.Custom10=8192]="Custom10",v[v.Custom11=16384]="Custom11",v[v.Custom12=32768]="Custom12",v[v.All=65520]="All"}(yd||(yd={}));class P0{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(M,I){const R=()=>M.stopPropagation();switch(M.type){case"pointer-move":Ed(M.pointerType)&&this._pointerLocations.set(M.pointerId,{x:M.x,y:M.y,pointerType:M.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(R(),"end"===M.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!bd(M))break;const ee=si(M),pe=this._intersect(ee,M.pointerType,I.forEachTool);if((0,ce.Wi)(pe))break;const Me=pe.manipulator,xe=pe.tool;!((0,ce.pC)(Me)&&(0,ce.pC)(xe)&&Me.interactive)||Me.grabbable&&Me.grabbableForEvent(M)||!Me.grabbing||Me.dragging||this._ungrabManipulatorBeforeDragging(Me,M,I),(0,ce.pC)(Me)&&(0,ce.pC)(xe)&&Me.interactive&&Me.grabbable&&Me.grabbableForEvent(M)&&!Me.grabbing&&(this._grabbedManipulators.set(M.pointerId,{manipulator:Me,tool:xe,start:ee,pointerType:M.pointerType}),1===this._grabbedManipulators.size&&(0,ce.Wi)(I.activeTool)&&(this._revertToNullActiveTool=!0,I.setActiveTool(pe.tool)),Me.grabbing=!0,Me.events.emit("grab-changed",{action:"start",pointerType:M.pointerType,screenPoint:ee}),R());break}case"pointer-up":this._draggedManipulators.has(M.pointerId)||this._handlePointerEnd(M,I);break;case"pointer-drag":{if(!bd(M))break;const ee=this._grabbedManipulators.get(M.pointerId),pe=(0,ce.yw)(ee,({manipulator:ut})=>ut),Me=(0,ce.yw)(ee,({tool:ut})=>ut);if((0,ce.Wi)(pe)||(0,ce.Wi)(Me))break;const xe=si(M);xe.x=(0,We.uZ)(xe.x,0,I.view.width),xe.y=(0,We.uZ)(xe.y,0,I.view.height);const ze=(0,ce.Wg)(ee).start,st=this._draggedManipulators.get(M.pointerId);switch(M.action){case"start":case"update":"update"!==M.action&&1!==this._grabbedManipulators.size||(pe.dragging=!0,pe.events.emit("drag",st?{action:"update",start:ze,screenPoint:xe}:{action:"start",start:ze,screenPoint:xe,pointerType:M.pointerType}),this._draggedManipulators.set(M.pointerId,{tool:Me,manipulator:pe,start:ze}));break;case"end":pe.dragging=!1,st&&pe.events.emit("drag",{action:"end",start:ze,screenPoint:xe}),this._draggedManipulators.delete(M.pointerId),this._handlePointerEnd(M,I)}R();break}case"immediate-click":{const ee=si(M),pe=this._intersect(ee,M.pointerType,I.forEachTool);if(function S0(v){return!!v.native.shiftKey}(M)||I.forEachTool(st=>{if((!(0,ce.pC)(pe)||pe.tool!==st||st.automaticManipulatorSelection)&&st.manipulators){let ut=!1;st.manipulators.forEach(({manipulator:Ct})=>{Ct.selected&&(Ct.selected=!1,ut=!0)}),ut&&st.onManipulatorSelectionChanged&&st.onManipulatorSelectionChanged()}}),(0,ce.Wi)(pe))break;const{manipulator:Me,tool:xe}=pe;if(!Me.interactive)break;Me.selectable&&xe.automaticManipulatorSelection&&(Me.selected=!Me.selected,xe.onManipulatorSelectionChanged&&xe.onManipulatorSelectionChanged()),Me.events.emit("immediate-click",{screenPoint:ee,button:M.button,pointerType:M.pointerType,shiftKey:M.native.shiftKey,stopPropagation:R});break}case"click":{const ee=si(M),pe=this._intersect(ee,M.pointerType,I.forEachTool),Me=(0,ce.pC)(pe)?pe.manipulator:null;if((0,ce.Wi)(Me)||!Me.interactive)break;Me.events.emit(M.type,{screenPoint:ee,button:M.button,pointerType:M.pointerType,shiftKey:M.native.shiftKey}),R();break}case"double-click":{const ee=si(M),pe=this._intersect(ee,M.pointerType,I.forEachTool),Me=(0,ce.pC)(pe)?pe.manipulator:null;if((0,ce.Wi)(Me)||!Me.interactive)break;Me.events.emit("double-click",{screenPoint:ee,button:M.button,pointerType:M.pointerType,shiftKey:M.native.shiftKey,stopPropagation:R});break}case"immediate-double-click":{const ee=si(M),pe=this._intersect(ee,M.pointerType,I.forEachTool),Me=(0,ce.pC)(pe)?pe.manipulator:null;if((0,ce.Wi)(Me)||!Me.interactive)break;Me.events.emit("immediate-double-click",{screenPoint:ee,button:M.button,pointerType:M.pointerType,shiftKey:M.native.shiftKey,stopPropagation:R});break}}this._onFocusChange(I.forEachTool)}_ungrabManipulatorBeforeDragging(M,I,R){M.grabbing=!1,M.events.emit("grab-changed",{action:"end",pointerType:I.pointerType,screenPoint:si(I)}),this._grabbedManipulators.forEach(({manipulator:ee},pe)=>{ee===M&&this._grabbedManipulators.delete(pe)}),this._afterManipulatorUngrab(R.setActiveTool)}_handlePointerEnd(M,I){const R=(0,ce.yw)(this._grabbedManipulators.get(M.pointerId),({manipulator:ee})=>ee);(0,ce.Wi)(R)||R.grabbing&&(R.grabbing=!1,R.events.emit("grab-changed",{action:"end",pointerType:M.pointerType,screenPoint:si(M)}),this._grabbedManipulators.delete(M.pointerId),this._afterManipulatorUngrab(I.setActiveTool))}_cursorFromMap(M){let I=null;return(0,Qn.oE)(M,({manipulator:R})=>!((0,ce.Wi)(R)||!R.interactive||(R.grabbing&&R.grabCursor?(I=R.grabCursor,0):!R.cursor||(I=R.cursor,0)))),I}_onFocusChange(M){this._updateCursor(),this._updateFocusedManipulatorTools(M)}_updateCursor(){this._cursor=this._grabbedManipulators.size>0?this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursorFromMap(this._hoveredManipulators)||"pointer":null}_updateFocusedManipulatorTools(M){const I=new Set,R=new Set;this._grabbedManipulators.forEach(({tool:ee})=>{I.add(ee)}),this._hoveredManipulators.forEach(({tool:ee})=>{R.add(ee)}),M(ee=>{ee.hasGrabbedManipulators=I.has(ee),ee.hasHoveredManipulators=R.has(ee);const pe=this._grabbedManipulators.values(),Me=(0,ys.sE)(pe,({tool:xe})=>xe===ee);ee.firstGrabbedManipulator=(0,ce.pC)(Me)?Me.manipulator:null})}clearPointers(M,{forEachTool:I,setActiveTool:R},ee=!0,pe){const Me=(xe,ze)=>xe===M&&((0,ce.Wi)(pe)||pe===ze);this._grabbedManipulators.forEach(({tool:xe,manipulator:ze,pointerType:st},ut)=>{Me(xe,ze)&&(this._grabbedManipulators.delete(ut),ze.grabbing=!1,ze.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:st}))}),this._draggedManipulators.forEach(({tool:xe,manipulator:ze},st)=>{Me(xe,ze)&&(this._draggedManipulators.delete(st),ze.dragging=!1,ze.events.emit("drag",{action:"cancel"}))}),ee&&this._hoveredManipulators.forEach(({tool:xe,manipulator:ze},st)=>{Me(xe,ze)&&(this._hoveredManipulators.delete(st),ze.hovering=!1)}),this._afterManipulatorUngrab(R),this._onFocusChange(I)}_intersect(M,I,R){let ee=null;return R(pe=>{if(null==pe.manipulators||!Ou(pe))return!1;const Me=pe.manipulators.intersect(M,I);return!(0,ce.Wi)(Me)&&(ee={tool:pe,manipulator:Me},!0)}),ee}updateHoveredStateFromKnownPointers(M){this._pointerLocations.forEach((I,R)=>{this._updateHoveredStateForPointerAtScreenPosition((0,Ts.vW)(I.x,I.y),R,I.pointerType,M)})}handleHoverEvent(M,I){"pointer-up"!==M.type&&"immediate-click"!==M.type&&"pointer-move"!==M.type||!Ed(M.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(si(M),M.pointerId,M.pointerType,I)}_updateHoveredStateForPointerAtScreenPosition(M,I,R,ee){let pe=this._intersect(M,R,ee);const Me=(0,ce.yw)(this._hoveredManipulators.get(I),({manipulator:xe})=>xe);(0,ce.pC)(pe)&&!pe.manipulator.interactive&&(pe=null),(0,ce.pC)(pe)&&Me===pe.manipulator||((0,ce.pC)(Me)&&(Me.hovering=!1),(0,ce.pC)(pe)?(pe.manipulator.hovering=!0,this._hoveredManipulators.set(I,pe)):this._hoveredManipulators.delete(I),this._onFocusChange(ee))}_afterManipulatorUngrab(M){0===this._grabbedManipulators.size&&this._revertToNullActiveTool&&(M(null),this._revertToNullActiveTool=!1)}}function Ed(v){return"mouse"===v}function bd(v){return"mouse"!==v.pointerType||0===v.button}const Md="attached",Pu="tools";let yi=class extends ui.r{constructor(v){super(v),this._manipulatorState=new P0,this.tools=new V.Z,this.cursor=null,this._forEachTool=M=>{for(const I of this.tools.items)if(M(I))return}}initialize(){this.handles.add([this.view.on(hd,v=>{this._handleInputEvent(v)},Uo.f.TOOL),...O0(this.tools),this.tools.on("before-add",({item:v})=>{this._updateToolEditableFlag(v)}),this.tools.on("before-remove",({item:v})=>{this._manipulatorState.clearPointers(v,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:v=>{this.activeTool=v},view:this.view}}set activeTool(v){if((0,ce.pC)(v)&&!this.view.ready)return void k.Z.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(v===this.activeTool)return;const M=this.activeTool;this._set("activeTool",v),(0,ce.pC)(M)&&M.deactivate(),(0,ce.pC)(v)&&v.activate(),this._removeIncompleteTools(v);for(const I of this.tools){this._updateToolEditableFlag(I);const R=Ou(I);!(0,ce.Wi)(this.activeTool)&&R||this._manipulatorState.clearPointers(I,this._manipulatorStateEventArgs,!R)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some(v=>v.updating)||(this.textures?.updating??!1)}attach(){"3d"===this.view.type?(this._set("textures",new _a(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([(0,bt.YP)(()=>{const{state:v}=this.view;return"camera"in v&&v.camera},()=>this._forEachManipulator(v=>v.onViewChange())),this.view.elevationProvider?.on("elevation-change",v=>this._forEachManipulator(M=>M.onElevationChange(v))),(0,id.kB)(()=>this._set("textures",(0,ce.SC)(this.textures)))],Md)):this.handles.add((0,bt.YP)(()=>this.view.extent,()=>this._forEachManipulator(v=>v.onViewChange())))}detach(){(0,ce.pC)(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(Md)}_forEachManipulator(v){this._forEachTool(M=>{M.manipulators&&M.manipulators.forEach(({manipulator:I})=>v(I,M))})}_handleInputEvent(v){let M=!1;const I={...v,stopPropagation:()=>{M=!0,v.stopPropagation()}};(0,ce.pC)(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(I):this._forEachTool(R=>{!M&&R.visible&&R.handleInputEvent(I)}),!M&&"key-down"===v.type&&"Escape"===v.key&&this.activeTool&&(v.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(I,this._manipulatorStateEventArgs),!M&&(0,ce.pC)(this.activeTool)&&this.activeTool.handleInputEventAfter(I),this._manipulatorState.handleHoverEvent(I,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(Pu),this._forEachTool(v=>{if(v instanceof he.Z){const M=(0,bt.YP)(()=>[v.cursor,v.visible,v.editable],()=>{Ou(v)||this._manipulatorState.clearPointers(v,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(M,Pu)}v.manipulators&&this.handles.add([v.manipulators.on("after-remove",M=>{this._manipulatorState.clearPointers(v,this._manipulatorStateEventArgs,!0,M.item.manipulator)}),v.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Pu)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(v){v.setEditableFlag?.(va.MANAGER,(0,ce.Wi)(this.activeTool)||v===this.activeTool)}_updateCursor(){let v=this._manipulatorState.cursor;(0,ce.Wi)(v)&&this._forEachTool(M=>!(!(0,ce.pC)(M.cursor)||!M.visible||(v=M.cursor,0))),this._get("cursor")!==v&&this._set("cursor",v)}_removeIncompleteTools(v){this.tools.filter(M=>((0,ce.Wi)(v)||M!==v)&&!M.created&&M.removeIncompleteOnCancel).forEach(M=>{this.tools.remove(M)})}};(0,w._)([(0,C.Cb)({constructOnly:!0,nonNullable:!0})],yi.prototype,"view",void 0),(0,w._)([(0,C.Cb)({readOnly:!0,nonNullable:!0})],yi.prototype,"textures",void 0),(0,w._)([(0,C.Cb)({value:null})],yi.prototype,"activeTool",null),(0,w._)([(0,C.Cb)({readOnly:!0,type:V.Z})],yi.prototype,"tools",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],yi.prototype,"cursor",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],yi.prototype,"updating",null),yi=(0,w._)([(0,F.j)("esri.views.ToolViewManager")],yi);const T0=yi;let Bo=class extends he.Z{constructor(v){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",this._detectedDeviceType="standard"===v.mapping?"standard":I0.test(v.id)?"spacemouse":"unknown",this.nativeIndex=v.index}get native(){const v=navigator.getGamepads?navigator.getGamepads():[];return null!=this.nativeIndex&&this.nativeIndex<v.length?v[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return w0[this.deviceType]}};(0,w._)([(0,C.Cb)({nonNullable:!0,readOnly:!0})],Bo.prototype,"nativeIndex",void 0),(0,w._)([(0,C.Cb)({type:String,readOnly:!0})],Bo.prototype,"deviceType",null),(0,w._)([(0,C.Cb)({type:Number,readOnly:!0})],Bo.prototype,"axisThreshold",null),Bo=(0,w._)([(0,F.j)("esri.views.input.gamepad.GamepadInputDevice")],Bo);const I0=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),w0={standard:.15,spacemouse:.025,unknown:0},Su=Bo;let Ea=class extends he.Z{constructor(...v){super(...v),this.devices=new V.Z,this.enabledFocusMode="document"}};(0,w._)([(0,C.Cb)({type:V.Z.ofType(Su),readOnly:!0})],Ea.prototype,"devices",void 0),(0,w._)([(0,C.Cb)({type:["document","view","none"]})],Ea.prototype,"enabledFocusMode",void 0),Ea=(0,w._)([(0,F.j)("esri.views.input.gamepad.GamepadSettings")],Ea);const D0=Ea;let al=class extends he.Z{constructor(){super(...arguments),this.gamepad=new D0}};(0,w._)([(0,C.Cb)({readOnly:!0})],al.prototype,"gamepad",void 0),al=(0,w._)([(0,F.j)("esri.views.input.Input")],al);const A0=al;let Fi=class extends he.Z{constructor(v){super(v),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};(0,w._)([(0,C.Cb)({type:Boolean,nonNullable:!0})],Fi.prototype,"enabled",void 0),(0,w._)([(0,C.Cb)({type:Su})],Fi.prototype,"device",void 0),(0,w._)([(0,C.Cb)({type:["pan","zoom"],nonNullable:!0})],Fi.prototype,"mode",void 0),(0,w._)([(0,C.Cb)({type:["forward-down","forward-up"],nonNullable:!0})],Fi.prototype,"tiltDirection",void 0),(0,w._)([(0,C.Cb)({type:Number,nonNullable:!0})],Fi.prototype,"velocityFactor",void 0),Fi=(0,w._)([(0,F.j)("esri.views.navigation.gamepad.GamepadSettings")],Fi);const Cd=Fi;let ao=class extends he.Z{constructor(v){super(v),this.browserTouchPanEnabled=!0,this.gamepad=new Cd,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};(0,w._)([(0,C.Cb)({type:Boolean})],ao.prototype,"browserTouchPanEnabled",void 0),(0,w._)([(0,C.Cb)({type:Cd,nonNullable:!0})],ao.prototype,"gamepad",void 0),(0,w._)([(0,C.Cb)({type:Boolean})],ao.prototype,"momentumEnabled",void 0),(0,w._)([(0,C.Cb)({type:Boolean})],ao.prototype,"mouseWheelZoomEnabled",void 0),ao=(0,w._)([(0,F.j)("esri.views.navigation.Navigation")],ao);const Od=ao;var Tn,x0=g(4583);function Pd(v){const M=v.url?(0,x0.Qc)(v.url):void 0;return null==v.spatialReference?.vcsWkid&&(0,ce.pC)(M)&&"ImageServer"===M.serverType||!Sd(v)||!v.heightModelInfo?function Id(v){return Td(v)?!!(v.capabilities&&v.capabilities.data&&v.capabilities.data.supportsZ):wd(v)}(v)?Cu.Z.deriveUnitFromSR(U0,v.spatialReference):null:v.heightModelInfo}function Sd(v){return"heightModelInfo"in v}function Td(v){if("unknown"===v.type||!("capabilities"in v))return!1;switch(v.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function j0(v){return null!=v.layers||wd(v)||Td(v)||Sd(v)}function wd(v){switch(v.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}!function(v){v[v.Ok=0]="Ok",v[v.Units=1]="Units",v[v.HeightModel=2]="HeightModel",v[v.CRS=3]="CRS",v[v.Unsupported=4]="Unsupported"}(Tn||(Tn={}));const U0=new Cu.Z({heightModel:"gravity-related-height"});var Dd=g(56108);let Iu,wu=null;function F0(v){return Du.apply(this,arguments)}function Du(){return Du=(0,x.Z)(function*(v){wu||(wu=g.e(1567).then(g.bind(g,11567)).then(M=>Iu=M)),yield wu,(0,z.k_)(v)}),Du.apply(this,arguments)}function Ad(v,M,I,R){return Au.apply(this,arguments)}function Au(){return Au=(0,x.Z)(function*(v,M,I,R){if(!v)return null;const ee=v.spatialReference;return(0,Zt.kR)()||(0,Zt.Up)(ee,M)?(0,Zt.iV)(v,M):Iu?Iu.projectGeometry(v,M,I,R):(yield Promise.race([F0(R),(0,Zt.zD)(R)]),Ad(v,M,I,R))}),Au.apply(this,arguments)}let Pr=class extends he.Z{constructor(v){super(v),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=(0,ce.IM)(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return(0,ce.pC)(this.userSpatialReference)?this.userSpatialReference:(0,ce.Wg)(this._spatialReferenceTask.spatialReference)}get extent(){return(0,ce.Wg)(this._extentTask.extent)}get heightModelInfo(){return(0,ce.Wg)(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return(0,ce.Wg)(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return(0,ce.Wg)(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return(0,ce.Wi)(this.userSpatialReference)||this.userSpatialReference.equals((0,ce.Wg)(this._spatialReferenceTask.spatialReference))?(0,ce.Wg)(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return(0,ce.Wg)(this._tileInfoTask.tileInfo)}get mapCollections(){const v=this.map?.(),M=[];return(0,ce.pC)(this.priorityCollection)&&M.push(this.priorityCollection),M.push({parent:v?.basemap,layers:v?.basemap?.baseLayers},{layers:v?.layers},{parent:v?.ground,layers:v?.ground?.layers},{parent:v?.basemap,layers:v?.basemap?.referenceLayers}),M}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:v,updating:M}=this._allLayers;let I=null;for(const ee of v){const pe=this._getSupportedSpatialReferences(ee);if(pe.length>0){const Me=this._narrowDownSpatialReferenceCandidates(I,pe);(0,ce.pC)(Me)&&(I=Me)}if((0,ce.pC)(I)&&1===I.length)break}if(M&&((0,ce.Wi)(I)||1!==I.length))return{updating:!0};const R=this._pickSpatialReferenceCandidate(I);return{spatialReference:(0,ce.pC)(R)?R.spatialReference:null,viewingMode:(0,ce.pC)(R)?R.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:v,updating:M}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(v&&v.length>0&&"tileInfo"in v[0]){const I=v[0].tileInfo;return{tileInfo:I&&I.spatialReference.equals(this.spatialReference)?I:null,updating:!1}}return{updating:M}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:v,updating:M}=this._allLayers;for(const I of v)if(j0(I)){const R=Pd(I);if(R)return{heightModelInfo:R,vcsWkid:I.spatialReference?.vcsWkid,latestVcsWkid:I.spatialReference?.latestVcsWkid,updating:!1}}return{updating:M}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const v=this._allLayers,M=v.updating,I=[];for(const R of v.layers){const ee="fullExtents"in R&&R.fullExtents||((0,ce.pC)(R.fullExtent)?[R.fullExtent]:[]),pe=this.requiresExtentInSpatialReference?null:ee[0],Me=ee.find(xe=>xe.spatialReference.equals(this.spatialReference))??pe;if(Me)return{candidates:[{extent:Me,layer:R}],updating:!1};if(this._getSupportedSpatialReferences(R).length>0)for(const xe of ee)I.push({extent:xe,layer:R})}return{candidates:I,updating:M}}get _extentTask(){var v=this;const{candidates:M,updating:I}=this._extentCandidatesTask;if(I)return{updating:I};if((0,ce.Wi)(M)||0===M.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const R=this._pickExtentCandidate(M),ee=this.spatialReference;return R.extent.equals(this._projectExtentTask.input)&&ee.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:(0,ce.pC)(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:((0,ce.pC)(this._projectExtentTask.task)&&(this._projectExtentTask.task=(0,ce.IM)(this._projectExtentTask.task)),this._projectExtentTask={input:R.extent.clone(),output:null,spatialReference:ee.clone(),task:(0,bu.vr)(function(){var pe=(0,x.Z)(function*(Me){try{const xe=yield Ad(R.extent,ee,R.layer.portalItem,Me);v._projectExtentTask={...v._projectExtentTask,task:null,output:xe}}catch{if((0,z.Hc)(Me))return;v._projectExtentTask={...v._projectExtentTask,task:null}}});return function(Me){return pe.apply(this,arguments)}}())},{updating:!0})}_narrowDownSpatialReferenceCandidates(v,M){if((0,ce.Wi)(v))return M;const I=[],R=(ee,pe)=>(0,ce.pC)(ee)?(0,ce.pC)(pe)?ee===pe&&ee:ee:pe;for(const ee of v)for(const pe of M){if(!ee.spatialReference.equals(pe.spatialReference))continue;const Me=R(ee.viewingMode,pe.viewingMode);if(!1!==Me){I.push({spatialReference:ee.spatialReference,viewingMode:Me});break}}return I.length>0?I:null}_pickSpatialReferenceCandidate(v){const M=this.defaultSpatialReference;return(0,ce.Wi)(v)||v.length<1?(0,ce.pC)(M)?{spatialReference:M,viewingMode:null}:null:((0,ce.pC)(M)&&v.length>1&&v.some(({spatialReference:I})=>I.equals(M))&&(v=v.filter(({spatialReference:I})=>I.equals(M))),v.length>1&&v.some(({viewingMode:I})=>I!==Dd.JY.Local)&&(v=v.filter(({viewingMode:I})=>I!==Dd.JY.Local)),v[0])}_getSupportedSpatialReferences(v){const M="supportedSpatialReferences"in v&&v.supportedSpatialReferences||(v.spatialReference?[v.spatialReference]:[]);if(0===M.length)return[];const I=[];for(const R of M){const ee=this.getSpatialReferenceSupport({spatialReference:R,layer:v});if((0,ce.pC)(ee)){const pe=(0,ce.pC)(ee.constraints)?ee.constraints:[{spatialReference:R,viewingMode:null}];for(const{spatialReference:Me,viewingMode:xe}of pe)(!this.requiresExtentInSpatialReference||(0,ce.Wi)(this.userSpatialReference)||Me.equals(this.userSpatialReference))&&I.push({spatialReference:Me,viewingMode:xe})}}return I}_pickExtentCandidate(v){const M=this.spatialReference;return v.find(({extent:I})=>M.equals(I.spatialReference))||v[0]}_collectLayers(v){if("loaded"!==this._loadMaybe(this.map?.()))return{layers:[],updating:!0};const M={layers:[],preloading:-1,updating:!1};for(const I of v)if(this._collectCollection(I,M),M.preloading===this.sourcePreloadCount)break;return{layers:M.layers,updating:M.updating}}_collectCollection(v,M){if(v.layers){switch(this._loadMaybe(v.parent)){case"loading":return M.updating=!0,void++M.preloading;case"failed":return}for(const I of v.layers){switch(this._loadMaybe(I)){case"failed":continue;case"loading":M.updating=!0,++M.preloading;break;case"loaded":M.updating||M.layers.push(I),"layers"in I&&this._collectCollection({layers:I.layers},M)}if(M.preloading===this.sourcePreloadCount)break}}}_loadMaybe(v){return v&&"loadStatus"in v&&null!=v.loadStatus?"not-loaded"===v.loadStatus?(v.load().catch(()=>{}),"loading"):v.loadStatus:"loaded"}};var ll;(0,w._)([(0,C.Cb)()],Pr.prototype,"required",void 0),(0,w._)([(0,C.Cb)({constructOnly:!0})],Pr.prototype,"map",void 0),(0,w._)([(0,C.Cb)({constructOnly:!0})],Pr.prototype,"getSpatialReferenceSupport",void 0),(0,w._)([(0,C.Cb)()],Pr.prototype,"defaultSpatialReference",void 0),(0,w._)([(0,C.Cb)()],Pr.prototype,"userSpatialReference",void 0),(0,w._)([(0,C.Cb)()],Pr.prototype,"sourcePreloadCount",void 0),(0,w._)([(0,C.Cb)()],Pr.prototype,"priorityCollection",void 0),(0,w._)([(0,C.Cb)()],Pr.prototype,"requiresExtentInSpatialReference",void 0),(0,w._)([(0,C.Cb)()],Pr.prototype,"suspended",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"ready",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"heightModelInfoReady",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"spatialReference",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"extent",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"heightModelInfo",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"vcsWkid",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"latestVcsWkid",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"viewingMode",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"tileInfo",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"mapCollections",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"_allLayers",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"_spatialReferenceTask",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"_tileInfoTask",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"_heightModelInfoTask",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Pr.prototype,"_extentCandidatesTask",null),(0,w._)([(0,C.Cb)()],Pr.prototype,"_extentTask",null),(0,w._)([(0,C.Cb)()],Pr.prototype,"_projectExtentTask",void 0),Pr=(0,w._)([(0,F.j)("esri.views.support.DefaultsFromMap")],Pr);let Ks=ll=class extends((0,ui.p)(le.Z.EventedMixin((0,od.v)(he.Z)))){constructor(v){super(v),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new re.Z({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:M=>M.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new ad.J,this.analyses=new ol,this.typeSpecificPreconditionsReady=!0,this.layerViews=new V.Z,this.magnifier=new ud,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new ld.Z,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new A0,this.navigation=new Od,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new M0(this),this.persistableViewModels=new V.Z,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add((0,bt.YP)(()=>this.preconditionsReady,M=>{M?(this._currentSpatialReference=this.spatialReference,ll.views.add(this)):(this._currentSpatialReference=null,ll.views.remove(this)),this.notifyChange("spatialReference"),!M&&this.ready?(this.toolViewManager?.detach(),(0,ce.pC)(this.analysisViewManager)&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown()):M&&!this.ready&&(this._startup(),(0,ce.pC)(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},bt.Z_))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,(0,bt.N1)(()=>this.ready)))),this.basemapView=new Ui({view:this}),this.layerViewManager=new v0({view:this,layerViewImporter:{importLayerView:v=>this.importLayerView(v),hasLayerViewModule:v=>this.hasLayerViewModule(v)},supportsGround:this.supportsGround}),this.toolViewManager=new T0({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([(0,bt.YP)(()=>this.initialExtentRequired,v=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:v},{sync:!0,initial:!0}),(0,bt.YP)(()=>this.ready,v=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=v,this.defaultsFromMap.userSpatialReference=v?this.spatialReference:this._userSpatialReference)},{sync:!0}),(0,bt.YP)(()=>this._userSpatialReference,v=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=v)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){var v=this;let M=null;this.handles.add([(0,bt.YP)(()=>this.defaultsFromMap?.ready,I=>{if(I&&!this.spatialReference&&this.map?.allLayers.length>0){if((0,ce.pC)(M))return;const ee=(0,id.kB)(()=>M=(0,ce.IM)(M));M=(0,bu.vr)(function(){var pe=(0,x.Z)(function*(Me){try{yield(0,z.e4)(v.spatialReferenceWarningDelay,null,Me)}catch{return}finally{M=null}k.Z.getLogger(v.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")});return function(Me){return pe.apply(this,arguments)}}()),this.handles.add(ee,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=(0,ce.SC)(this.graphics),this.analyses=(0,ce.SC)(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),(0,ce.SC)(this.analysisViewManager),this.toolViewManager=(0,ce.SC)(this.toolViewManager),this.layerViewManager=(0,ce.SC)(this.layerViewManager),this.basemapView=(0,ce.SC)(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const v=this.map;this.map=null,v?.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return k.Z.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(v){this.toolViewManager&&(this.toolViewManager.activeTool=v)}get animation(){return this._get("animation")}set animation(v){this._set("animation",v)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Pr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:v=>this.getSpatialReferenceSupport(v),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(v){this._set("extent",v)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Q.Z.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(v){v!==this._get("map")&&(v?.destroyed&&(k.Z.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:v}),v=null),Q.Z.isLoadable(v)&&v.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",v))}get spatialReference(){let v=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return v&&this.defaultsFromMap?.required?.heightModelInfo&&(v=v.clone(),v.vcsWkid=this.defaultsFromMap.vcsWkid,v.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),v}set spatialReference(v){const M=!(0,Kt.fS)(v,this._get("spatialReference"));this._set("_userSpatialReference",v),M&&(this._set("spatialReference",v),this._spatialReferenceChanged(v))}_spatialReferenceChanged(v){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){const v=this.toolViewManager?this.toolViewManager.cursor:null;return(0,ce.pC)(v)?v:this._cursor||"default"}set cursor(v){this._cursor=v,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(v){return this.layerViewManager.whenLayerView(v)}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}importLayerView(v){throw new U.Z("importLayerView() not implemented")}hasLayerViewModule(v){return!1}validate(){return(0,x.Z)(function*(){})()}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(v){return(0,ce.pC)(this.getSpatialReferenceSupport({spatialReference:v}))}when(v,M){return this.isResolved()&&!this.ready&&k.Z.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(v,M)}forceReadyCycle(){this.ready&&((0,bt.gx)(()=>!1===this.preconditionsReady,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(v){this.toolViewManager.tools.add(v),this.activeTool=v}tryFatalErrorRecovery(){this.fatalError=null}};Ks.views=new V.Z,(0,w._)([(0,C.Cb)()],Ks.prototype,"_userSpatialReference",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"activeTool",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"allLayerViews",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"groundView",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"animation",null),(0,w._)([(0,C.Cb)()],Ks.prototype,"basemapView",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"center",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"_defaultsFromMapSettings",null),(0,w._)([(0,C.Cb)()],Ks.prototype,"defaultsFromMap",null),(0,w._)([(0,C.Cb)()],Ks.prototype,"fatalError",void 0),(0,w._)([(0,C.Cb)({type:Tt.Z})],Ks.prototype,"extent",null),(0,w._)([(0,C.Cb)((0,Mu.z)(ad.J,"graphics"))],Ks.prototype,"graphics",void 0),(0,w._)([(0,C.Cb)((0,Mu.z)(ol,"analyses"))],Ks.prototype,"analyses",void 0),(0,w._)([(0,C.Cb)({readOnly:!0,type:Cu.Z})],Ks.prototype,"heightModelInfo",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"interacting",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"navigating",null),(0,w._)([(0,C.Cb)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ks.prototype,"preconditionsReady",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"typeSpecificPreconditionsReady",void 0),(0,w._)([(0,C.Cb)({type:V.Z,readOnly:!0})],Ks.prototype,"layerViews",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"resolution",null),(0,w._)([(0,C.Cb)({type:ud})],Ks.prototype,"magnifier",void 0),(0,w._)([(0,C.Cb)({value:null,type:vs})],Ks.prototype,"map",null),(0,w._)([(0,C.Cb)()],Ks.prototype,"padding",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"ready",void 0),(0,w._)([(0,C.Cb)({type:Fo.Z})],Ks.prototype,"spatialReference",null),(0,w._)([(0,C.Cb)()],Ks.prototype,"spatialReferenceWarningDelay",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"stationary",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"supportsGround",void 0),(0,w._)([(0,C.Cb)({type:y0.Z})],Ks.prototype,"timeExtent",void 0),(0,w._)([(0,C.Cb)({type:ld.Z,nonNullable:!0})],Ks.prototype,"timeReference",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"tools",null),(0,w._)([(0,C.Cb)()],Ks.prototype,"toolViewManager",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"type",void 0),(0,w._)([(0,C.Cb)({type:Number})],Ks.prototype,"scale",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"updating",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"initialExtentRequired",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"initialExtent",null),(0,w._)([(0,C.Cb)()],Ks.prototype,"cursor",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"input",void 0),(0,w._)([(0,C.Cb)({type:Od,nonNullable:!0})],Ks.prototype,"navigation",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"layerViewManager",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"analysisViewManager",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"width",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"height",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"resizing",void 0),(0,w._)([(0,C.Cb)({value:null,readOnly:!0})],Ks.prototype,"size",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"suspended",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"viewEvents",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Ks.prototype,"persistableViewModels",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"_isValid",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"_readyCycleForced",void 0),(0,w._)([(0,C.Cb)()],Ks.prototype,"_currentSpatialReference",void 0),Ks=ll=(0,w._)([(0,F.j)("esri.views.View")],Ks);const B0=Ks;let Bi=class extends od.D{constructor(v){super(v),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((v,M)=>this._dfd={resolve:v,reject:M}))}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd?.reject(new U.Z("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd?.resolve())}update(v,M){M||(M=(0,z.y8)(v)?"waiting-for-target":"running"),this._set("target",v),this._set("state",M)}};(0,w._)([(0,C.Cb)({readOnly:!0})],Bi.prototype,"done",null),(0,w._)([(0,C.Cb)({readOnly:!0,type:String})],Bi.prototype,"state",void 0),(0,w._)([(0,C.Cb)()],Bi.prototype,"target",void 0),Bi=(0,w._)([(0,F.j)("esri.views.ViewAnimation")],Bi),function(v){v.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Bi||(Bi={}));const xu=Bi;var ul=g(52978),$r=g(63056);class W0{constructor(M,I,R,ee){const pe=M.targetGeometry,Me=I.targetGeometry;ee?"string"==typeof ee&&(ee=(0,ul.Qc)(ee)||ul.LI.ease):ee=ul.LI.ease,this.easing=ee,this.duration=R,this.sCenterX=pe.x,this.sCenterY=pe.y,this.sScale=M.scale,this.sRotation=M.rotation,this.tCenterX=Me.x,this.tCenterY=Me.y,this.tScale=I.scale,this.tRotation=I.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(M,I){const R=this.easing(I);let ee,pe,Me,xe;I>=1?(ee=this.tCenterX,pe=this.tCenterY,Me=this.tRotation,xe=this.tScale):(ee=this.sCenterX+R*this.dCenterX,pe=this.sCenterY+R*this.dCenterY,Me=this.sRotation+R*this.dRotation,xe=this.sScale+R*this.dScale),M.targetGeometry.x=ee,M.targetGeometry.y=pe,M.scale=xe,M.rotation=Me}}let gi=class extends he.Z{constructor(v){super(v),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=ul.LI.ease,this.view=null,this.viewpoint=new as.Z({targetGeometry:new It.Z,scale:0,rotation:0}),this._updateTask=(0,us.A)({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=(0,ce.hw)(this._updateTask)}animate(v,M,I){this.stop(),(0,$r.JG)(this.viewpoint,M),this.transition=new W0(this.viewpoint,v.target,I&&I.duration||this.duration,I&&I.easing||this.easing);const ee=()=>{this.animation===v&&this._updateTask&&("finished"===v.state&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return v.when(ee,ee),this._startTime=performance.now(),this._updateTask.resume(),this.animation=v,v}animateContinous(v,M){this.stop(),this.updateFunction=M,this.viewpoint=v;const I=new xu({target:v.clone()}),R=()=>{this.animation===I&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return I.when(R,R),this._startTime=performance.now(),this._updateTask.resume(),this.animation=I,I}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(v){const M=this.animation;if(M&&M.state!==xu.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,v.deltaTime);else{const I=this.transition,R=(performance.now()-this._startTime)/I.duration,ee=R>=1;I.applyRatio(this.viewpoint,R),ee&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,w._)([(0,C.Cb)()],gi.prototype,"animation",void 0),(0,w._)([(0,C.Cb)()],gi.prototype,"duration",void 0),(0,w._)([(0,C.Cb)()],gi.prototype,"transition",void 0),(0,w._)([(0,C.Cb)()],gi.prototype,"easing",void 0),(0,w._)([(0,C.Cb)()],gi.prototype,"view",void 0),(0,w._)([(0,C.Cb)()],gi.prototype,"viewpoint",void 0),gi=(0,w._)([(0,F.j)("esri.views.2d.AnimationManager")],gi);const N0=gi;class Z0{constructor(M){this.view=M,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{this._updateRequested=!1;const{basemapView:I,graphicsView:R,labelManager:ee,layerViews:pe,state:{id:Me}}=this.view;I?.baseLayerViews.forEach(this._updateLayerView,this),pe.forEach(this._updateLayerView,this),I?.referenceLayerViews.forEach(this._updateLayerView,this),(0,ce.pC)(ee)&&(ee.lastUpdateId!==Me&&(ee.viewChange(),ee.lastUpdateId=Me),ee.updateRequested&&ee.processUpdate(this._updateParameters)),(0,ce.pC)(R)&&(R.lastUpdateId!==Me&&(R.viewChange(),R.lastUpdateId=Me),R.updateRequested&&R.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const M=this.view;this.stationary=M.stationary,this._updateParameters={state:M.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:M.renderingOptions},this._stationaryHandle=(0,bt.YP)(()=>M.stationary,I=>{this.stationary=I,this.requestFrame()}),this._frameTaskHandle=(0,us.A)(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(M){if(!M.attached)return void this.requestUpdate();const I=this.view.state,R=M.lastUpdateId;null!=R&&(this.stationary||M.moving)||(M.moving=!0,M.moveStart()),R!==I.id&&M.viewChange(),this.stationary&&M.moving&&(M.moving=!1,M.moveEnd()),M.lastUpdateId=I.id,M.updateRequested&&M.processUpdate(this._updateParameters),"layerViews"in M&&M.layerViews.forEach(this._updateLayerView,this)}}function Kr(){return Promise.all([Promise.all([g.e(4697),g.e(1967),g.e(1988),g.e(7362)]).then(g.bind(g,47362)),Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(4477),g.e(8450),g.e(366),g.e(4159),g.e(8592),g.e(9569)]).then(g.bind(g,59569))])}const ba=()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(4477),g.e(8450),g.e(366),g.e(6402),g.e(2225),g.e(1468)]).then(g.bind(g,61468))),Wo=()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(323),g.e(1850),g.e(250),g.e(4725)]).then(g.bind(g,74241))),xd={"base-dynamic":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(9878),g.e(8592),g.e(172)]).then(g.bind(g,172))),"base-tile":ba,"bing-maps":ba,csv:Wo,"geo-rss":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(1122)]).then(g.bind(g,1122))),feature:Wo,geojson:Wo,graphics:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(6842)]).then(g.bind(g,66842))),group:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(8592),g.e(459)]).then(g.bind(g,60459))),imagery:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(2043),g.e(3110),g.e(9878),g.e(6716),g.e(8592),g.e(1405)]).then(g.bind(g,81405))),"imagery-tile":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(2043),g.e(3110),g.e(6716),g.e(8592),g.e(9265)]).then(g.bind(g,39265))),kml:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(3110),g.e(9878),g.e(8450),g.e(4159),g.e(8592),g.e(9852)]).then(g.bind(g,89852))),"knowledge-graph":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(2256)]).then(g.bind(g,12256))),"link-chart":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(2256)]).then(g.bind(g,12256))),"knowledge-graph-sublayer":Wo,"map-image":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(9878),g.e(6402),g.e(8592),g.e(4484)]).then(g.bind(g,14484))),"map-notes":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(8592),g.e(7397)]).then(g.bind(g,17397))),media:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(4477),g.e(8450),g.e(366),g.e(8592),g.e(912)]).then(g.bind(g,20912))),"ogc-feature":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(323),g.e(1850),g.e(250),g.e(4725),g.e(9781)]).then(g.bind(g,19781))),"open-street-map":ba,"oriented-imagery":Wo,route:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(8431),g.e(4260)]).then(g.bind(g,44260))),stream:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(323),g.e(1850),g.e(250),g.e(4725),g.e(6360)]).then(g.bind(g,66360))),"subtype-group":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(323),g.e(1850),g.e(250),g.e(4725),g.e(6962)]).then(g.bind(g,96962))),tile:ba,"vector-tile":()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(292),g.e(2791)]).then(g.bind(g,68411))),wcs:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(2043),g.e(3110),g.e(6716),g.e(8592),g.e(9265)]).then(g.bind(g,39265))),"web-tile":ba,wfs:Wo,wms:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(9878),g.e(8592),g.e(4749)]).then(g.bind(g,94749))),wmts:()=>Kr().then(()=>Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(2225),g.e(9194)]).then(g.bind(g,54728))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};var Ru,K0=g(2547),Lu=g(30446),Kn=g(80775),V0=g(12818);let lo=Ru=class extends((0,Lo.iv)(he.Z)){constructor(v){super(v),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if((0,ce.Wi)(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return(0,Zt.iV)(this.geometry,this.spatialReference)}catch(v){return k.Z.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:v}),null}return this.geometry}constrain(v,M){if((0,ce.Wi)(this.normalizedGeometry))return v;const I=v.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,Lu.aV)(this.normalizedGeometry,I):(0,Lu.CI)(this.normalizedGeometry,I))return v;const{coordinate:R}=function z0(v,M){const{spatialReference:I}=M,R=[M.x,M.y];let ee=Number.POSITIVE_INFINITY,pe=0,Me=0;const xe=[0,0],ze="extent"===v.type?[[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]]:v.rings;for(const st of ze)for(let ut=0;ut<st.length-1;ut++){(0,V0.Tx)(xe,R,st,ut);const Ct=(0,Kn.d)(R,xe);Ct<ee&&(ee=Ct,pe=xe[0],Me=xe[1])}return{coordinate:new It.Z({x:pe,y:Me,spatialReference:I}),distance:ee}}(this.normalizedGeometry,I);return R&&(v.targetGeometry=R),v}clone(){return new Ru({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};var ju;(0,w._)([(0,C.Cb)({constructOnly:!0})],lo.prototype,"geometry",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],lo.prototype,"normalizedGeometry",null),(0,w._)([(0,C.Cb)({constructOnly:!0})],lo.prototype,"spatialReference",void 0),lo=Ru=(0,w._)([(0,F.j)("esri.views.2d.constraints.GeometryConstraint")],lo);let Ma=ju=class extends((0,Lo.iv)(he.Z)){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(v,M){return this.enabled&&M&&(this.rotationEnabled||(v.rotation=M.rotation)),v}clone(){return new ju({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,w._)([(0,C.Cb)()],Ma.prototype,"enabled",void 0),(0,w._)([(0,C.Cb)()],Ma.prototype,"rotationEnabled",void 0),Ma=ju=(0,w._)([(0,F.j)("esri.views.2d.constraints.RotationConstraint")],Ma);const Rd=Ma;var Uu;let In=Uu=class extends((0,Lo.iv)(he.Z)){constructor(v){super(v),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let v,{lods:M,minScale:I,maxScale:R,minZoom:ee,maxZoom:pe}=this,Me=-1,xe=-1,ze=!1,st=!1;if(0!==I&&0!==R&&I<R&&([I,R]=[R,I]),!M||!M.length)return this._set("effectiveMinScale",I),void this._set("effectiveMaxScale",R);M=M.map(ut=>ut.clone()),M.sort((ut,Ct)=>Ct.scale-ut.scale),M.forEach((ut,Ct)=>ut.level=Ct);for(const ut of M)!ze&&I>0&&I>=ut.scale&&(Me=ut.level,ze=!0),!st&&R>0&&R>=ut.scale&&(xe=v?v.level:-1,st=!0),v=ut;-1===ee&&(ee=0===I?0:Me),-1===pe&&(pe=0===R?M.length-1:xe),ee=Math.max(ee,0),ee=Math.min(ee,M.length-1),pe=Math.max(pe,0),pe=Math.min(pe,M.length-1),ee>pe&&([ee,pe]=[pe,ee]),I=M[ee].scale,R=M[pe].scale,M.splice(0,ee),M.splice(pe-ee+1,M.length),M.forEach((ut,Ct)=>{this._lodByScale[ut.scale]=ut,this._scales[Ct]=ut.scale}),this._set("effectiveLODs",M),this._set("effectiveMinZoom",ee),this._set("effectiveMaxZoom",pe),this._set("effectiveMinScale",I),this._set("effectiveMaxScale",R)}constrain(v,M){if(M&&v.scale===M.scale)return v;const I=this.effectiveMinScale,R=this.effectiveMaxScale,ee=v.targetGeometry,pe=M&&M.targetGeometry,xe=0!==I&&v.scale>I;if(0!==R&&v.scale<R||xe){const ze=xe?I:R;if(M&&pe){const st=(ze-M.scale)/(v.scale-M.scale);ee.x=pe.x+(ee.x-pe.x)*st,ee.y=pe.y+(ee.y-pe.y)*st}v.scale=ze}return this.snapToZoom&&this.effectiveLODs&&(v.scale=this._getClosestScale(v.scale)),v}fit(v){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(v,null);const M=this.scaleToZoom(v.scale),I=Math.abs(M-Math.floor(M));return v.scale=this.zoomToScale(I>.99?Math.round(M):Math.floor(M)),v}zoomToScale(v){if(!this.effectiveLODs)return 0;v-=this.effectiveMinZoom,v=Math.max(0,v);const M=this._scales;if(v<=0)return M[0];if(v>=M.length)return M[M.length-1];const I=Math.round(v-.5),R=Math.round(v);return M[R]+(R-v)*(M[I]-M[R])}scaleToZoom(v){if(!this.effectiveLODs)return-1;const M=this._scales;let I,R;if(v>=M[0])return this.effectiveMinZoom;if(v<=M[M.length-1])return this.effectiveMaxZoom;for(let ee=0;ee<M.length-1;ee++){if(I=M[ee],R=M[ee+1],R===v)return ee+this.effectiveMinZoom+1;if(I>v&&R<v)return ee+this.effectiveMinZoom+1-(v-R)/(I-R)}return-1}snapToClosestScale(v){if(!this.effectiveLODs)return v;const M=this.scaleToZoom(v);return this.zoomToScale(Math.round(M))}snapToNextScale(v,M=.5){if(!this.effectiveLODs)return v*M;const I=Math.round(this.scaleToZoom(v));return this.zoomToScale(I+1)}snapToPreviousScale(v,M=2){if(!this.effectiveLODs)return v*M;const I=Math.round(this.scaleToZoom(v));return this.zoomToScale(I-1)}clone(){return new Uu({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(v){return this._lodByScale[v]||(v=this._scales.reduce((M,I)=>Math.abs(I-v)<=Math.abs(M-v)?I:M,this._scales[0])),this._lodByScale[v].scale}};(0,w._)([(0,C.Cb)({readOnly:!0})],In.prototype,"effectiveLODs",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],In.prototype,"effectiveMinZoom",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],In.prototype,"effectiveMaxZoom",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],In.prototype,"effectiveMinScale",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],In.prototype,"effectiveMaxScale",void 0),(0,w._)([(0,C.Cb)()],In.prototype,"lods",void 0),(0,w._)([(0,C.Cb)()],In.prototype,"minZoom",void 0),(0,w._)([(0,C.Cb)()],In.prototype,"maxZoom",void 0),(0,w._)([(0,C.Cb)()],In.prototype,"minScale",void 0),(0,w._)([(0,C.Cb)()],In.prototype,"maxScale",void 0),(0,w._)([(0,C.Cb)()],In.prototype,"snapToZoom",void 0),In=Uu=(0,w._)([(0,F.j)("esri.views.2d.constraints.ZoomConstraint")],In);const jd=In,G0={base:null,key:"type",typeMap:{extent:Tt.Z,polygon:Nl.Z}};let Vr=class extends he.Z{constructor(v){super(v),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(v){this._set("geometry",v||null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _defaultLODs(){const v=this.view?.defaultsFromMap?.tileInfo,M=this.view?.spatialReference;return v&&M&&v.spatialReference.equals(M)?v.lods:null}get _geometry(){return new lo({geometry:this.geometry,spatialReference:this.view?.spatialReference})}get _rotation(){return new Rd({rotationEnabled:this.rotationEnabled})}get _zoom(){const v=this._get("_zoom"),M=this.lods||this._defaultLODs,I=this.minZoom,R=this.maxZoom,ee=this.minScale,pe=this.maxScale,Me=this.snapToZoom;return v&&v.lods===M&&v.minZoom===I&&v.maxZoom===R&&v.minScale===ee&&v.maxScale===pe&&v.snapToZoom===Me?v:new jd({lods:M,minZoom:I,maxZoom:R,minScale:ee,maxScale:pe,snapToZoom:Me})}canZoomInTo(v){const M=this.effectiveMaxScale;return 0===M||v>=M}canZoomOutTo(v){const M=this.effectiveMinScale;return 0===M||v<=M}constrain(v,M){return this._zoom.constrain(v,M),this._rotation.constrain(v,M),this._geometry.constrain(v,M),v}constrainByGeometry(v){return this._geometry.constrain(v)}fit(v){return this._zoom.fit(v)}zoomToScale(v){return this._zoom.zoomToScale(v)}scaleToZoom(v){return this._zoom.scaleToZoom(v)}snapScale(v){return this._zoom.snapToClosestScale(v)}snapToNextScale(v){return this._zoom.snapToNextScale(v)}snapToPreviousScale(v){return this._zoom.snapToPreviousScale(v)}};(0,w._)([(0,C.Cb)({readOnly:!0})],Vr.prototype,"effectiveLODs",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Vr.prototype,"effectiveMinScale",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Vr.prototype,"effectiveMaxScale",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Vr.prototype,"effectiveMinZoom",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Vr.prototype,"effectiveMaxZoom",null),(0,w._)([(0,C.Cb)({types:G0,value:null})],Vr.prototype,"geometry",null),(0,w._)([(0,C.Cb)({type:[K0.Z]})],Vr.prototype,"lods",void 0),(0,w._)([(0,C.Cb)()],Vr.prototype,"minScale",void 0),(0,w._)([(0,C.Cb)()],Vr.prototype,"maxScale",void 0),(0,w._)([(0,C.Cb)()],Vr.prototype,"minZoom",void 0),(0,w._)([(0,C.Cb)()],Vr.prototype,"maxZoom",void 0),(0,w._)([(0,C.Cb)()],Vr.prototype,"rotationEnabled",void 0),(0,w._)([(0,C.Cb)()],Vr.prototype,"snapToZoom",void 0),(0,w._)([(0,C.Cb)()],Vr.prototype,"view",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Vr.prototype,"version",null),(0,w._)([(0,C.Cb)()],Vr.prototype,"_defaultLODs",null),(0,w._)([(0,C.Cb)({type:lo})],Vr.prototype,"_geometry",null),(0,w._)([(0,C.Cb)({type:Rd})],Vr.prototype,"_rotation",null),(0,w._)([(0,C.Cb)({readOnly:!0,type:jd})],Vr.prototype,"_zoom",null),Vr=(0,w._)([(0,F.j)("esri.views.2d.MapViewConstraints")],Vr);const Ud=Vr;var Nu,Fd=g(83457),H0=g(33980),cl=g(53072),k0=g(80309),Fu=g(7562),No=g(38974),Bu=g(40334),Bd=g(12288);function Wu(v){return function J0(v){return v instanceof Float32Array&&v.length>=2}(v)||function Y0(v){return Array.isArray(v)&&v.length>=2}(v)}const _i=[0,0];let Wi=Nu=class extends N.wq{constructor(v){super(v),this._viewpoint2D={center:(0,Fd.a)(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Tt.Z,this.id=0,this.inverseTransform=(0,Fu.c)(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=(0,Fu.c)(),this.transformNoRotation=(0,Fu.c)(),this.displayMat3=(0,Bu.c)(),this.displayViewMat3=(0,Bu.c)(),this.viewMat3=(0,Bu.c)(),this.viewMat2d=(0,k0.c)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(v){this._set("pixelRatio",v),this._update()}set size(v){this._set("size",v),this._update()}set viewpoint(v){if(v){const M=this._viewpoint2D,I=v.targetGeometry;M.center[0]=I.x,M.center[1]=I.y,M.rotation=v.rotation,M.scale=v.scale,M.spatialReference=I.spatialReference}this._update()}copy(v){const M=this.size,I=this.viewpoint;return I&&M?(this.viewpoint=(0,$r.JG)(I,v.viewpoint),this._set("size",(0,Kn.c)(M,v.size))):(this.viewpoint=v.viewpoint.clone(),this._set("size",[v.size[0],v.size[1]])),this._set("pixelRatio",v.pixelRatio),this}clone(){return new Nu({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(v,M,I){return Wu(M)?(0,Kn.t)(v,M,this.inverseTransform):(_i[0]=M,_i[1]=I,(0,Kn.t)(v,_i,this.inverseTransform))}toScreen(v,M,I){return Wu(M)?(0,Kn.t)(v,M,this.transform):(_i[0]=M,_i[1]=I,(0,Kn.t)(v,_i,this.transform))}toScreenNoRotation(v,M,I){return Wu(M)?(0,Kn.t)(v,M,this.transformNoRotation):(_i[0]=M,_i[1]=I,(0,Kn.t)(v,_i,this.transformNoRotation))}getScreenTransform(v,M){const{center:I}=this._viewpoint2D,R=this._get("pixelRatio")||1,ee=this._get("size");return(0,$r.Rb)(v,I,ee,M,0,R),v}_update(){const{center:v,spatialReference:M,scale:I,rotation:R}=this._viewpoint2D,ee=this._get("pixelRatio")||1,pe=this._get("size"),Me=new as.Z({targetGeometry:new It.Z(v[0],v[1],M),scale:I,rotation:R});if(this._set("viewpoint",Me),!pe||!M||!I)return;this.resolution=(0,$r.uG)(Me),this.rotation=R,this.scale=I,this.spatialReference=M,(0,Kn.c)(this.center,v),(0,No.s)(this.displayMat3,0!==pe[0]?2/pe[0]:0,0,0,0,0!==pe[1]?-2/pe[1]:0,0,-1,1,1);const st=(0,No.g)(this.viewMat3),ut=(0,Bd.f)(pe[0]/2,pe[1]/2),Ct=(0,Bd.f)(-pe[0]/2,-pe[1]/2),Gt=(0,H0.t)(R);(0,No.h)(st,st,ut),(0,No.r)(st,st,Gt),(0,No.h)(st,st,Ct),(0,No.m)(this.displayViewMat3,this.displayMat3,st);const Ft=(0,cl.a)(this.viewMat2d,ut);return(0,cl.r)(Ft,Ft,Gt),(0,cl.t)(Ft,Ft,Ct),(0,$r.bk)(this.extent,Me,pe),(0,$r.Ck)(this.transform,Me,pe,ee),(0,cl.c)(this.inverseTransform,this.transform),(0,$r.Jp)(this.transformNoRotation,Me,pe,ee),this.worldScreenWidth=(0,$r.L2)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};(0,w._)([(0,C.Cb)({readOnly:!0})],Wi.prototype,"id",void 0),(0,w._)([(0,C.Cb)({value:1,json:{write:!0}})],Wi.prototype,"pixelRatio",null),(0,w._)([(0,C.Cb)({json:{write:!0}})],Wi.prototype,"size",null),(0,w._)([(0,C.Cb)()],Wi.prototype,"spatialReference",void 0),(0,w._)([(0,C.Cb)({type:as.Z,json:{write:!0}})],Wi.prototype,"viewpoint",null),Wi=Nu=(0,w._)([(0,F.j)("esri.views.2d.ViewState")],Wi);const Wd=Wi;var Zu,$u;let vi=Zu=class extends he.Z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Zu({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};(0,w._)([(0,C.Cb)()],vi.prototype,"left",void 0),(0,w._)([(0,C.Cb)()],vi.prototype,"top",void 0),(0,w._)([(0,C.Cb)()],vi.prototype,"right",void 0),(0,w._)([(0,C.Cb)()],vi.prototype,"bottom",void 0),vi=Zu=(0,w._)([(0,F.j)("esri.views.2d.PaddedViewState.Padding")],vi);let Zo=$u=class extends Wd{constructor(...v){super(...v),this.paddedViewState=new Wd,this._updateContent=(()=>{const M=(0,Fd.a)();return()=>{const I=this._get("size"),R=this._get("padding");if(!I||!R)return;const ee=this.paddedViewState;(0,Kn.s)(M,R.left+R.right,R.top+R.bottom),(0,Kn.a)(M,I,M),(0,Kn.c)(ee.size,M);const pe=ee.viewpoint;pe&&(this.viewpoint=pe)}})(),this.addHandles((0,bt.YP)(()=>[this.size,this.padding],()=>this._updateContent(),bt.Z_)),this.padding=new vi,this.size=[0,0]}set padding(v){this._set("padding",v||new vi)}set viewpoint(v){if(v){const M=v.clone();this.paddedViewState.viewpoint=v,(0,$r.H4)(M,v,this._get("size"),this._get("padding"));const I=this._viewpoint2D,R=M.targetGeometry;I.center[0]=R.x,I.center[1]=R.y,I.rotation=M.rotation,I.scale=M.scale,I.spatialReference=R.spatialReference,this._update()}}clone(){return new $u({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};(0,w._)([(0,C.Cb)()],Zo.prototype,"paddedViewState",void 0),(0,w._)([(0,C.Cb)({type:vi})],Zo.prototype,"padding",null),(0,w._)([(0,C.Cb)()],Zo.prototype,"viewpoint",null),Zo=$u=(0,w._)([(0,F.j)("esri.views.2d.PaddedViewState")],Zo);const Q0=Zo;g(22504);var X0=g(45396);function Ku(v,M){switch(M){case"primary":return"touch"===v.pointerType||0===v.button;case"secondary":return"touch"!==v.pointerType&&2===v.button;case"tertiary":return"touch"!==v.pointerType&&1===v.button}}g(67026),g(90026),g(58988);class Nd extends an.a{constructor(M,I){super(!0),this._view=M,this.registerIncoming("double-click",I,R=>this._handleDoubleClick(R,I))}_handleDoubleClick(M,I){Ku(M.data,"primary")&&(M.stopPropagation(),I?this._view.mapViewNavigation.zoomOut([M.data.x,M.data.y]):this._view.mapViewNavigation.zoomIn([M.data.x,M.data.y]))}}class q0 extends an.a{constructor(M,I,R){super(!0),this.view=M,this.pointerType=I,this.registerIncoming("double-tap-drag",R,ee=>this._handleDoubleTapDrag(ee))}_handleDoubleTapDrag(M){const{data:I}=M,{pointerType:R}=I;if(R!==this.pointerType)return;M.stopPropagation();const{action:ee,delta:pe}=I,{view:Me}=this,{mapViewNavigation:xe}=Me;switch(ee){case"begin":{const{scale:ze}=Me;this._startScale=ze,this._currentScale=ze,this._previousDelta=pe,xe.begin();break}case"update":{if(this._previousDelta.y===pe.y)return;this._previousDelta=pe;const st=this._startScale*1.015**pe.y;xe.setViewpointImmediate(st/this._currentScale),this._currentScale=st;break}case"end":{const{constraints:ze}=Me,{effectiveLODs:st,snapToZoom:ut}=ze;if(!ut||!st)return void xe.end();const Ct=ze.snapScale(this._currentScale),Gt=(pe.y>0?Math.max(Ct,ze.snapToPreviousScale(this._startScale)):Math.min(Ct,ze.snapToNextScale(this._startScale)))/this._currentScale;xe.zoom(Gt);break}}}}class dl{constructor(M){this._callbacks=M,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(M){const I=M.data,R=I.pointers.size;switch(I.action){case"start":this._currentCount=R,this._emitStart(M);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=R,this._emitStart(M);break;case"update":this._emitUpdate(M);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=R,this._emitStart(M);break;case"end":this._emitEnd(M),this._currentCount=0}this._previousEvent=M}_emitStart(M){this._startEvent=M,this._callbacks.condition?.(this._currentCount,M)&&this._callbacks.start(this._currentCount,M,this._startEvent)}_emitUpdate(M){this._callbacks.condition?.(this._currentCount,M)&&this._callbacks.update(this._currentCount,M,this._startEvent)}_emitEnd(M){this._callbacks.condition?.(this._currentCount,M)&&this._callbacks.end(this._currentCount,M,this._startEvent),this._startEvent=null}}class ef extends an.a{constructor(M,I,R){super(!0),this.view=M,this.pointerAction=I,this.registerIncoming("drag",R,ee=>this._handleDrag(ee)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(M){super.onInstall(M),this._dragEventSeparator=new dl({start:(I,R)=>{this.view.mapViewNavigation.pan.begin(this.view,R.data),R.stopPropagation()},update:(I,R)=>{this.view.mapViewNavigation.pan.update(this.view,R.data),R.stopPropagation()},end:(I,R)=>{this.view.mapViewNavigation.pan.end(this.view,R.data),R.stopPropagation()},condition:(I,R)=>1===I&&Ku(R.data,this.pointerAction)})}_handleDrag(M){const I=this.view.mapViewNavigation;I.pinch.zoomMomentum||I.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(M)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class tf extends an.a{constructor(M,I,R){super(!0),this._view=M,this.pointerAction=I;const ee=this._view.mapViewNavigation;this._dragEventSeparator=new dl({start:(pe,Me)=>{ee.rotate.begin(this._view,Me.data),Me.stopPropagation()},update:(pe,Me)=>{ee.rotate.update(this._view,Me.data),Me.stopPropagation()},end:(pe,Me)=>{ee.rotate.end(),Me.stopPropagation()},condition:(pe,Me)=>1===pe&&Ku(Me.data,this.pointerAction)}),this.registerIncoming("drag",R,pe=>this._dragEventSeparator.handle(pe))}}var sf=g(92950);function Xn(v){let M=v*v;return v<0&&(M*=-1),M}class af extends an.a{constructor(M){super(!0),this._view=M,this._frameTask=null,this._watchHandles=new ls.Z,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",I=>this._handleGamePadEvent(I)),this._handle.pause()}onInstall(M){super.onInstall(M),this._watchHandles.add([(0,bt.YP)(()=>this._view.navigation.gamepad?.enabled,I=>{I?(this._handle.resume(),this._frameTask||(this._frameTask=(0,us.A)({update:R=>this._frameUpdate(R.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},bt.nn)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(M){const I=this._view.navigation.gamepad.device;I&&M.data.device!==I||this._currentDevice&&this._currentDevice!==M.data.device||("end"===M.data.action?(this._currentDevice=null,function rf(v){v.translation[0]=0,v.translation[1]=0,v.translation[2]=0,v.heading=0,v.tilt=0}(this._transformation)):(this._currentDevice=M.data.device,function nf(v,M,I){const R=I,ee=v.state,pe=v.device,Me="forward-down"===M.tiltDirection?1:-1;"standard"===pe.deviceType?(R.translation[0]=Xn(ee.axes[0]),R.translation[1]=Xn(ee.axes[1]),R.translation[2]=Xn(ee.buttons[7])-Xn(ee.buttons[6]),R.heading=Xn(ee.axes[2]),R.tilt=Xn(ee.axes[3])):"spacemouse"===pe.deviceType&&(R.translation[0]=1.2*Xn(ee.axes[0]),R.translation[1]=1.2*Xn(ee.axes[1]),R.translation[2]=2*-Xn(ee.axes[2]),R.heading=1.2*Xn(ee.axes[5]),R.tilt=1.2*Xn(ee.axes[3])),R.tilt*=Me,(0,sf.g)(R.translation,R.translation,1)}(M.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(M){const I=this._transformation;if(function of(v){return 0===v.translation[0]&&0===v.translation[1]&&0===v.translation[2]&&0===v.heading&&0===v.tilt&&0===v.zoom}(I))return;const R=this._view.viewpoint.clone(),pe=uf*this._view.navigation.gamepad.velocityFactor*M;(0,$r.Rx)(R,R,[I.translation[0]*pe,-I.translation[1]*pe]);const ze=this._view.size;(0,$r.UZ)(R,R,1+I.translation[2]*cf*M,this._view.constraints.rotationEnabled?-I.heading*lf*M:0,[ze[0]/2,ze[1]],ze);const ut=this._view.constraints.constrain(R,this._view.viewpoint);this._view.viewpoint=ut}}const lf=.06,uf=.7,cf=6e-4;class df extends an.a{constructor(M,I,R){super(!0),this.view=M,this.keys=I,this._pressed=!1,this._keyMap={[I.left]:"left",[I.right]:"right",[I.up]:"up",[I.down]:"down"},this.registerIncoming("key-down",R,ee=>this._handleKeyDown(ee)),this.registerIncoming("key-up",R,ee=>this._handleKeyUp(ee)),this.registerIncoming("blur",R,()=>this._handleBlur())}_handleKeyDown(M){M.data.repeat||this._handleKey(M,!0)}_handleKeyUp(M){this._handleKey(M,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(M,I){const R=this._keyMap[M.data.key];if(this._pressed=null!=R,this._pressed){if(I)switch(this.view.mapViewNavigation.begin(),R){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();M.stopPropagation()}}}class hf extends an.a{constructor(M,I,R){super(!0),this.view=M,this.keys=I,this._pressed=!1,this._keyToDirection={[I.clockwiseOption1]:"clockwise",[I.clockwiseOption2]:"clockwise",[I.counterClockwiseOption1]:"counterClockwise",[I.counterClockwiseOption2]:"counterClockwise",[I.resetOption1]:"reset",[I.resetOption2]:"reset"},this.registerIncoming("key-down",R,ee=>this._handleKeyDown(ee)),this.registerIncoming("key-up",R,ee=>this._handleKeyUp(ee)),this.registerIncoming("blur",R,()=>this._handleBlur())}_handleKeyDown(M){M.data.repeat||this._handleKey(M,!0)}_handleKeyUp(M){this._handleKey(M,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(M,I){const R=M.modifiers;if(R.size>0&&!R.has("Shift")||!this.view.constraints.rotationEnabled)return;const ee=this._keyToDirection[M.data.key];if(this._pressed=null!=ee,this._pressed){if(I)switch(this.view.mapViewNavigation.begin(),ee){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();M.stopPropagation()}}}var $o;!function(v){v[v.IN=0]="IN",v[v.OUT=1]="OUT"}($o||($o={}));class pf extends an.a{constructor(M,I,R){super(!0),this.view=M,this.keys=I,this._keysToZoomAction={},this.registerIncoming("key-down",R,ee=>this._handleKeyDown(ee)),I.zoomIn.forEach(ee=>this._keysToZoomAction[ee]=$o.IN),I.zoomOut.forEach(ee=>this._keysToZoomAction[ee]=$o.OUT)}_handleKeyDown(M){this._handleKey(M)}_handleKey(M){const I=M.modifiers;if(I.size>0&&!I.has("Shift"))return;const{key:R}=M.data;if(!(R in this._keysToZoomAction))return;const ee=this._keysToZoomAction[R],{mapViewNavigation:pe}=this.view;let Me=null;switch(ee){case $o.IN:Me=pe.zoomIn();break;case $o.OUT:Me=pe.zoomOut();break;default:return}pe.begin(),Me.then(()=>pe.end()),M.stopPropagation()}}class mf extends an.a{constructor(M,I){super(!0),this._view=M,this._canZoom=!0,this.registerIncoming("mouse-wheel",I,R=>this._handleMouseWheel(R))}_handleMouseWheel(M){if(!this._view.navigation.mouseWheelZoomEnabled||(M.preventDefault(),M.stopPropagation(),!this._canZoom))return;const I=this._view.mapViewNavigation,{x:R,y:ee,deltaY:pe}=M.data,xe=I.zoom(1/.6**(1/60*pe),[R,ee]);xe&&(this._canZoom=!1,xe.catch(()=>{}).then(()=>{this._canZoom=!0,I.end()}))}}class yf extends an.a{constructor(M){super(!0),this.view=M,this.registerIncoming("drag",R=>this._handleDrag(R)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const I=this.view.mapViewNavigation;this._dragEventSeparator=new dl({start:(R,ee)=>{I.pinch.begin(this.view,ee.data),ee.stopPropagation()},update:(R,ee)=>{I.pinch.update(this.view,ee.data),ee.stopPropagation()},end:(R,ee)=>{I.pinch.end(this.view),ee.stopPropagation()},condition:R=>R>=2})}_handleDrag(M){this._dragEventSeparator.handle(M)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}var gf=g(52010);function Zd(v){const M=v.native;return M?{buttons:M.buttons.map(I=>I.pressed?I.value?I.value:1:0),axes:M.axes.map(I=>function Ef(v,M){const I=Math.abs(v);return I<M?0:Math.sign(v)*(I-M)/(1-M)}(I,v.axisThreshold))}:{buttons:[],axes:[]}}class bf{constructor(M,I){this._element=M,this._input=I,this._hasEventListeners=!1,this._onConnectGamepad=pe=>{this._connectGamepad(pe.gamepad)},this._onDisconnectGamepad=pe=>{const Me=pe.gamepad,xe=Me.index,ze=this._inputDevices[xe];ze&&(this._emitGamepadEvent(Me,Zd(ze),!1),this._inputDevices.splice(xe,1),this._latestUpdate.splice(xe,1),this._input.gamepad.devices.remove(ze),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const R="getGamepads"in window.navigator,ee=window.isSecureContext;this.supported=R&&ee,this.supported&&(this._forEachGamepad(pe=>this._connectGamepad(pe)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(M){this._hasEventListeners!==M&&(this._hasEventListeners=M,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(M){this._callback=M}_connectGamepad(M){const I=new Su(M);"unknown"!==I.deviceType&&(this._inputDevices[M.index]=I,this._input.gamepad.devices.add(I)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=(0,us.A)({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const M=document.hasFocus(),I=this._element.contains(document.activeElement),R="document"===this._input.gamepad.enabledFocusMode&&!M||"view"===this._input.gamepad.enabledFocusMode&&!I;this._forEachGamepad(ee=>{const pe=this._inputDevices[ee.index];if(!pe)return;const Me=this._latestUpdate[ee.index],xe=Zd(pe),ze=R||function vf(v){for(let M=0;M<v.axes.length;M++)if(0!==v.axes[M])return!1;for(let M=0;M<v.buttons.length;M++)if(0!==v.buttons[M])return!1;return!0}(xe);Me&&(Me.timestamp===ee.timestamp||!Me.active&&ze||function _f(v,M){if(v.axes.length!==M.axes.length||v.buttons.length!==M.buttons.length)return!1;for(let I=0;I<v.axes.length;I++)if(v.axes[I]!==M.axes[I])return!1;for(let I=0;I<v.buttons.length;I++)if(v.buttons[I]!==M.buttons[I])return!1;return!0}(Me.state,xe))||this._emitGamepadEvent(ee,xe,!ze)})}_forEachGamepad(M){const I=window.navigator.getGamepads();for(let R=0;R<I.length;R++){const ee=I[R];this._validate(ee)&&M(ee)}}_emitGamepadEvent(M,I,R){const ee=this._latestUpdate[M.index],pe=ee&&ee.active;if(!pe&&!R)return;const Me=!pe&&R?"start":pe&&R?"update":"end";this._latestUpdate[M.index]={timestamp:M.timestamp,state:I,active:R},this._callback&&this._callback({device:this._inputDevices[M.index],state:I,action:Me})}_validate(M){if(!M||!M.connected)return!1;for(let I=0;I<M.axes.length;I++)if(isNaN(M.axes[I]))return!1;return!0}}const $d=(0,X.Z)("edge"),Mf=(0,X.Z)("chrome"),Cf=(0,X.Z)("ff"),Of=(0,X.Z)("safari"),Kd="esri-view-surface",Ko={touchNone:`${Kd}--touch-none`,touchPan:`${Kd}--touch-pan`};let Pf=(()=>{class v{constructor(I,R){this._input=R,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=I,I.getAttribute("tabindex")||I.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new bf(I,this._input),this._gamepadSource.onEvent=ee=>this._callback("gamepad",ee)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(I=>{this._releasePointerCaptureSafe(I)}),this._gamepadSource=(0,ce.SC)(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(I){this._browserTouchPanningEnabled=I,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(I){this._callback=I}set activeEvents(I){for(const R in this._active)I&&I.has(R)||(this._element.removeEventListener(Vu[R],this._active[R]),delete this._active[R]);I&&I.forEach(R=>{if(!this._active[R]&&Vu[R]){const ee=(this._eventHandlers[R]||this._handleDefault).bind(this,R);this._element.addEventListener(Vu[R],ee),this._active[R]=ee}}),this._gamepadSource.hasEventListeners=I?.has("gamepad")??!1}setPointerCapture(I,R){R?(this._element.setPointerCapture(I.pointerId),this._activePointerCaptures.add(I.pointerId)):(this._releasePointerCaptureSafe(I.pointerId),this._activePointerCaptures.delete(I.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Ko.touchNone:Ko.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Ko.touchPan:Ko.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Ko.touchNone),this._element.classList.remove(Ko.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(I){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(I))return;this._element.releasePointerCapture(I)}catch{}}_updateNormalizedPointerLikeEvent(I,R){const ee=gd(this._element,I);return v.test.disableSubpixelCoordinates&&(ee.x=Math.round(ee.x),ee.y=Math.round(ee.y)),R.x=ee.x,R.y=ee.y,R}_handleKey(I,R){const ee=(0,gf.kK)(R);ee&&"key-up"===I&&this._keyDownState.delete(ee);const pe={native:R,key:ee,repeat:!!ee&&this._keyDownState.has(ee)};ee&&"key-down"===I&&this._keyDownState.add(pe.key),this._callback(I,pe)}_handlePointer(I,R){const ee=this._updateNormalizedPointerLikeEvent(R,{native:R,x:0,y:0,pointerType:R.pointerType,button:R.button,buttons:R.buttons,eventId:this._eventId++});this._callback(I,ee)}_handlePointerPreventDefault(I,R){const ee=this._updateNormalizedPointerLikeEvent(R,{native:R,x:0,y:0,pointerType:R.pointerType,button:R.button,buttons:R.buttons,eventId:this._eventId++});R.preventDefault(),this._callback(I,ee)}_handleMouseWheel(I,R){let ee=R.deltaY;switch(R.deltaMode){case 0:$d&&(ee=ee/document.documentElement.clientHeight*600);break;case 1:ee*=30;break;case 2:ee*=900}$d?ee*=.7:Mf||Of?ee*=.6:Cf&&(ee*=1.375);const Me=Math.abs(ee);Me>100&&(ee=ee/Me*200/(1+Math.exp(-.02*(Me-100))));const xe=this._updateNormalizedPointerLikeEvent(R,{native:R,x:0,y:0,deltaY:ee});this._callback(I,xe)}_handlePointerCaptureLost(I,R){this._activePointerCaptures.delete(R.pointerId),this._handleDefault(I,R)}_handleDefault(I,R){const ee={native:R};R.preventDefault(),this._callback(I,ee)}_preventAltKeyDefault(I){"Alt"===I.key&&I.preventDefault()}_preventMultiTouchPanning(I){I.touches.length>1&&I.preventDefault()}}return v.test={disableSubpixelCoordinates:!1},v})();const Vu={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class Sf extends an.a{constructor(){super(!0),this.registerIncoming("context-menu",M=>{M.data.native.preventDefault()})}}var hl=g(75419);function zu(v,M){return Math.abs(M.x-v.x)+Math.abs(M.y-v.y)}function uo(v){const{native:M}=v,{pointerId:I,button:R,pointerType:ee}=M;return"mouse"===ee?`${I}:${R}`:`${ee}`}class wf extends an.a{constructor(M=250,I=10,R=350,ee=35,pe=hl.m){super(!1),this._maximumDoubleClickDelay=M,this._maximumDoubleClickDistance=I,this._maximumDoubleTouchDelay=R,this._maximumDoubleTouchDistance=ee,this._clock=pe,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(M=>M.doubleClickTimer=(0,ce.hw)(M.doubleClickTimer))}get hasPendingInputs(){return(0,Qn.oE)(this._pointerState,M=>null!=M.doubleClickTimer)}_clearDoubleClickTimer(M,I){const R=this._pointerState.get(M);R&&(R.doubleClickTimer=(0,ce.hw)(R.doubleClickTimer),I&&this._click.emit(R.event.data,void 0,R.event.modifiers),this._pointerState.delete(M),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(M){const I=this._pointerState.get(M);1===I.pointerDownCount&&this._click.emit(I.event.data,void 0,I.event.modifiers),I.doubleClickTimer=null,this._pointerState.delete(M),this.refreshHasPendingInputs()}_getPointerId(M){const{pointerId:I,pointerType:R,button:ee}=M.native;return"mouse"===R?`${I}:${ee}`:`${R}`}_handleImmediateClick(M){const I=M.data,{pointerType:R}=I.native,ee=this._getPointerId(I);if(!this._pointerState.has(ee))return void this._startClick(M);const pe=this._pointerState.get(ee),{data:Me,modifiers:xe}=pe.event,ze="touch"===R?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;zu(Me,I)>ze?(this._clearDoubleClickTimer(ee,!0),this._startClick(M)):(this._clearDoubleClickTimer(ee,!1),2===pe.pointerDownCount&&this._doubleClick.emit(Me,void 0,xe))}_handlePointerDown(M){const I=uo(M.data),R=this._pointerState.get(I);R&&(R.pointerDownCount+=1)}_startClick(M){const{data:I}=M,{native:{pointerType:R}}=I,ee=uo(I),Me=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(ee),"touch"===R?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(ee,{event:M,doubleClickTimer:Me,pointerDownCount:1}),this.refreshHasPendingInputs()}}class Df extends an.a{constructor(M=250,I=10,R=350,ee=35,pe=hl.m){super(!1),this._maximumDoubleClickDelay=M,this._maximumDoubleClickDistance=I,this._maximumDoubleTouchDelay=R,this._maximumDoubleTouchDistance=ee,this._clock=pe,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,Ts.vW)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new dl({start:(Me,xe)=>this._dragStart(Me,xe),update:(Me,xe)=>this._dragUpdate(xe),end:(Me,xe)=>this._dragEnd(xe)}),this.registerIncoming("drag",Me=>this._dragEventSeparator.handle(Me)),this.registerIncoming("pointer-down",Me=>this._handlePointerDown(Me)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(M=>{M.doubleTapTimeout=(0,ce.hw)(M.doubleTapTimeout)})}get hasPendingInputs(){return(0,Qn.oE)(this._pointerState,M=>null!=M.doubleTapTimeout)}_clearPointerDown(M){const I=this._pointerState.get(M);I&&(I.doubleTapTimeout=(0,ce.hw)(I.doubleTapTimeout),this._pointerState.delete(M),this.refreshHasPendingInputs())}_createDoubleTapDragData(M,I,R){const{button:ee,buttons:pe,pointer:Me,pointers:xe,pointerType:ze,timestamp:st}=R;return{action:M,delta:I,button:ee,buttons:pe,pointer:Me,pointers:xe,pointerType:ze,timestamp:st}}_dragStart(M,I){if(!this._doubleTapDragReady||1!==M)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:R,modifiers:ee}=I,{center:pe}=R;this._dragStartCenter=pe;const Me=this._createDoubleTapDragData("begin",(0,Ts.vW)(0,0),R);this._doubleTapDrag.emit(Me,void 0,ee),I.stopPropagation()}_dragUpdate(M){if(!this._doubleTapDragActive)return;const{data:I,modifiers:R}=M,{center:ee}=I,pe=(0,Ts.vW)(ee.x-this._dragStartCenter.x,ee.y-this._dragStartCenter.y),Me=this._createDoubleTapDragData("update",pe,I);this._doubleTapDrag.emit(Me,void 0,R),M.stopPropagation()}_dragEnd(M){if(!this._doubleTapDragActive)return;const{data:I,modifiers:R}=M,{center:ee}=I,pe=(0,Ts.vW)(ee.x-this._dragStartCenter.x,ee.y-this._dragStartCenter.y),Me=this._createDoubleTapDragData("end",pe,I);this._doubleTapDrag.emit(Me,void 0,R),this._doubleTapDragActive=!1,M.stopPropagation()}_handlePointerDown(M){const{data:I}=M,R=uo(I),ee=this._pointerState.get(R),{pointerType:pe}=I.native;if(ee){const Me="touch"===pe?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(R),zu(ee.event.data,I)>Me?this._storePointerDown(M):this._doubleTapDragReady=!0}else this._storePointerDown(M)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(M){const{data:I}=M,{pointerType:R}=I.native,ee=uo(I),Me=this._clock.setTimeout(()=>this._clearPointerDown(ee),"touch"===R?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(ee,{event:M,doubleTapTimeout:Me}),this.refreshHasPendingInputs()}}var zd,Gu=g(69354);class Af extends an.a{constructor(M){super(!1),this._navigationTouch=M,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(M,I,R,ee){return{action:M,pointerType:this._pointerType,button:this._mouseButton,buttons:I.buttons,timestamp:ee,pointers:xf(this._activePointerMap),pointer:I,angle:R.angle,radius:R.radius,center:R.center}}_addPointer(M){const I=M.native.pointerId,R=pl(this._activePointerMap).angle,ee={event:M,initialAngle:0,lastAngle:0};this._activePointerMap.set(I,ee);const pe=fl(ee,Vd(this._activePointerMap));ee.initialAngle=pe,ee.lastAngle=pe,this._updatePointerAngles(R)}_updatePointer(M){if(M&&null==M.x&&null==M.y)return;const R=this._activePointerMap.get(M.native.pointerId);R?R.event=M:this._addPointer(M)}_removePointer(M){const I=pl(this._activePointerMap).angle;this._activePointerMap.delete(M),this._updatePointerAngles(I)}_updatePointerAngles(M){const I=pl(this._activePointerMap);this._activePointerMap.forEach(R=>{R.initialAngle=fl(R,I)-M,R.lastAngle=fl(R,I)-M})}_emitEvent(M,I,R){const ee=pl(this._activePointerMap);this._drag.emit(this._createPayload(M,I,ee,R),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(M){const I=M.data.native.pointerId,R=(0,Gu.HA)(M.timestamp);this._activePointerMap.get(I)&&(1===this._activePointerMap.size?(this._updatePointer(M.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",M.data,R),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(I)):(this._removePointer(I),this._emitEvent("removed",M.data,(0,Gu.HA)(M.timestamp))))}_handlePointerDrag(M){const I=M.data,R=I.currentEvent,ee=(0,Gu.HA)(M.timestamp);switch(I.action){case"start":case"update":this._isDragging?this._activePointerMap.has(R.native.pointerId)?(this._updatePointer(R),!this._isCurrentDragSuppressed&&this._emitEvent("update",R,ee)):(this._addPointer(R),this._emitEvent("added",R,ee),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(R),this._pointerType=M.data.startEvent.pointerType,this._mouseButton=M.data.startEvent.button,this._startStateModifiers=M.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",R,ee))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}function Vd(v){const M=[];return v.forEach(I=>{M.push((0,Ts.vW)(I.event.x,I.event.y))}),function If(v,M){if(M?(M.radius=0,M.center.x=0,M.center.y=0):M={radius:0,center:(0,Ts.vW)()},0===v.length)return M;if(1===v.length)return M.center.x=v[0].x,M.center.y=v[0].y,M;if(2===v.length){const[Ys,ar]=v,[rr,Mr]=[ar.x-Ys.x,ar.y-Ys.y];return M.radius=Math.sqrt(rr*rr+Mr*Mr)/2,M.center.x=(Ys.x+ar.x)/2,M.center.y=(Ys.y+ar.y)/2,M}let I=0,R=0;for(let Ys=0;Ys<v.length;Ys++)I+=v[Ys].x,R+=v[Ys].y;I/=v.length,R/=v.length;const ee=v.map(Ys=>Ys.x-I),pe=v.map(Ys=>Ys.y-R);let Me=0,xe=0,ze=0,st=0,ut=0,Ct=0,Gt=0;for(let Ys=0;Ys<ee.length;Ys++){const ar=ee[Ys],rr=pe[Ys],Mr=ar*ar,Sr=rr*rr;Me+=Mr,xe+=Sr,ze+=ar*rr,st+=Mr*ar,ut+=Sr*rr,Ct+=ar*Sr,Gt+=rr*Mr}const Ft=.5*(st+Ct),ps=.5*(ut+Gt),Ps=Me*xe-ze*ze,Is=(Ft*xe-ps*ze)/Ps,zs=(Me*ps-ze*Ft)/Ps,fr=(0,Ts.vW)(Is+I,zs+R);return{radius:Math.sqrt(Is*Is+zs*zs+(Me+xe)/v.length),center:fr}}(M)}function pl(v){const M=Vd(v);let I=0;return v.forEach(R=>{let ee=fl(R,M),pe=ee-R.lastAngle;for(;pe>Math.PI;)pe-=2*Math.PI;for(;pe<-Math.PI;)pe+=2*Math.PI;ee=R.lastAngle+pe,R.lastAngle=ee,I+=ee-R.initialAngle}),I/=v.size||1,{angle:I,radius:M.radius,center:M.center}}function xf(v){const M=new Map;return v.forEach((I,R)=>M.set(R,I.event)),M}function fl(v,M){const I=v.event;return Math.atan2(I.y-M.center.y,I.x-M.center.x)}!function(v){v[v.Left=0]="Left",v[v.Middle=1]="Middle",v[v.Right=2]="Right",v[v.Back=3]="Back",v[v.Forward=4]="Forward",v[v.Undefined=-1]="Undefined"}(zd||(zd={}));class Lf extends an.a{constructor(M=250,I=10,R=350,ee=35,pe=hl.m){super(!1),this._maximumDoubleClickDelay=M,this._maximumDoubleClickDistance=I,this._maximumDoubleTouchDelay=R,this._maximumDoubleTouchDistance=ee,this._clock=pe,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(M=>{M.immediateDoubleClick&&M.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(M){const I=M.data,R=uo(I);this._pointerState.has(R)||(this._pointerState.set(R,{downButton:I.native.button,immediateDoubleClick:null}),this.startCapturingPointer(I.native))}_handlePointerUp(M){const I=M.data,R=uo(I),ee=this._pointerState.get(R);if(ee&&ee.downButton===I.native.button){const pe=ee.immediateDoubleClick;if(pe){pe.timeoutHandle.remove();const Me="touch"===M.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;zu(pe,M.data)>Me?this._startImmediateDoubleClick(M,ee):(this._immediateDoubleClick.emit(M.data,void 0,pe.modifiers),this._removeState(I))}else this._startImmediateDoubleClick(M,ee)}}_startImmediateDoubleClick(M,I){I.immediateDoubleClick={x:M.data.x,y:M.data.y,modifiers:M.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(M.data),"touch"===M.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}}_removeState(M){const I=uo(M);this._pointerState.delete(I),this.stopCapturingPointer(M.native),this.refreshHasPendingInputs()}}class Rf extends an.a{constructor(M=300,I=1.5,R=6,ee=6,pe=500,Me=hl.m){super(!1),this._maximumClickDelay=M,this._movementUntilMouseDrag=I,this._movementUntilPenDrag=R,this._movementUntilTouchDrag=ee,this._holdDelay=pe,this._clock=Me,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",xe=>{this._handlePointerLoss(xe,"pointer-up")}),this.registerIncoming("pointer-capture-lost",xe=>{this._handlePointerLoss(xe,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",xe=>{this._handlePointerLoss(xe,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(M=>{M.holdTimeout=(0,ce.hw)(M.holdTimeout)}),super.onUninstall()}_handlePointerDown(M){const I=M.data,R=I.native.pointerId;let ee=null;0===this._pointerState.size&&(ee=this._clock.setTimeout(()=>{const Me=this._pointerState.get(R);Me&&(Me.isDragging||(this._pointerHold.emit(Me.previousEvent,void 0,M.modifiers),Me.holdEmitted=!0),Me.holdTimeout=null)},this._holdDelay)),this._pointerState.set(R,{startEvent:I,previousEvent:I,startTimestamp:M.timestamp,isDragging:!1,downButton:I.native.button,holdTimeout:ee,modifiers:new Set}),this.startCapturingPointer(I.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(M)}_createPointerDragData(M,I,R){return{action:M,startEvent:I.startEvent,previousEvent:I.previousEvent,currentEvent:R}}_handlePointerMove(M){const I=M.data,ee=this._pointerState.get(I.native.pointerId);ee&&(ee.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",ee,I),void 0,ee.modifiers):function Tf(v,M){const I=M.x-v.x,R=M.y-v.y;return Math.sqrt(I*I+R*R)}(I,ee.startEvent)>this._getDragThreshold(I.native.pointerType)&&this._startDragging(M),ee.previousEvent=I)}_getDragThreshold(M){switch(M){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(M){const I=M.data,R=I.native.pointerId;this._pointerState.forEach(ee=>{null!=ee.holdTimeout&&(ee.holdTimeout.remove(),ee.holdTimeout=null),ee.isDragging||(ee.modifiers=M.modifiers,ee.isDragging=!0,R===ee.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",ee,I)):this._pointerDrag.emit(this._createPointerDragData("start",ee,ee.previousEvent),M.timestamp))})}_handlePointerLoss(M,I){const R=M.data,ee=R.native.pointerId,pe=this._pointerState.get(ee);pe&&(null!=pe.holdTimeout&&(pe.holdTimeout.remove(),pe.holdTimeout=null),pe.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",pe,"pointer-up"===I?R:pe.previousEvent),void 0,pe.modifiers):"pointer-up"===I&&pe.downButton===R.native.button&&M.timestamp-pe.startTimestamp<=this._maximumClickDelay&&!pe.holdEmitted&&this._immediateClick.emit(R),this._pointerState.delete(ee),this.stopCapturingPointer(R.native),0===this._pointerState.size&&this._moveHandle.pause())}}const ml_pan={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},ml_zoom={zoomIn:["=","+"],zoomOut:["-","_"]},ml_rotate={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let co=class extends he.Z{constructor(){super(...arguments),this._handles=new ls.Z}initialize(){const v=()=>this.view?.ready;this._handles.add([(0,bt.gx)(()=>!v(),()=>this._disconnect()),(0,bt.gx)(v,()=>this._connect())])}destroy(){this._handles=(0,ce.SC)(this._handles),this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=(0,ce.SC)(this._inputManager)}_connect(){const M=new Pf(this.view.surface,this.view.input),I=[new Lf,new Rf,new wf,new Af(this.view.navigation),new Df],R=new Uo.$({eventSource:M,recognizers:I});R.installHandlers("prevent-context-menu",[new Sf],Uo.f.INTERNAL),R.installHandlers("navigation",[new yf(this.view),new af(this.view),new mf(this.view),new Nd(this.view),new Nd(this.view,["Ctrl"]),new ef(this.view,"primary"),new df(this.view,ml_pan),new pf(this.view,ml_zoom),new hf(this.view,ml_rotate),new tf(this.view,"secondary"),new q0(this.view,"touch")],Uo.f.INTERNAL),this.view.viewEvents.connect(R),this._source=M,this._inputManager=R,(0,bt.YP)(()=>this.view?.navigation?.browserTouchPanEnabled,ee=>{this._source&&(this._source.browserTouchPanningEnabled=!ee)},bt.nn)}get test(){return{inputManager:this._inputManager}}};(0,w._)([(0,C.Cb)()],co.prototype,"view",void 0),(0,w._)([(0,C.Cb)()],co.prototype,"latestPointerType",null),(0,w._)([(0,C.Cb)()],co.prototype,"latestPointerLocation",null),(0,w._)([(0,C.Cb)()],co.prototype,"multiTouchActive",null),co=(0,w._)([(0,F.j)("esri.views.2d.input.MapViewInputManager")],co);const jf=co;var Uf=g(43908),Gd=g(21795),Hd=g(86508),yl=g(24465),Bf=g(86626),Wf=g(87652);let ho=class extends he.Z{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(v){const M=this._get("node");v!==M&&(v&&v.classList.add("esri-component"),M&&M.classList.remove("esri-component"),this._set("node",v))}castNode(v){return v?"string"==typeof v||function Zf(v){return v&&"nodeType"in v}(v)?(this._set("widget",null),(0,jt.L7)(v)):(function $f(v){return v&&"function"==typeof v.render}(v)&&!v.domNode&&(v.domNode=document.createElement("div")),this._set("widget",v),v.domNode):(this._set("widget",null),null)}};(0,w._)([(0,C.Cb)({dependsOn:[]})],ho.prototype,"id",null),(0,w._)([(0,C.Cb)()],ho.prototype,"node",null),(0,w._)([(0,ve.p)("node")],ho.prototype,"castNode",null),(0,w._)([(0,C.Cb)({readOnly:!0})],ho.prototype,"widget",void 0),ho=(0,w._)([(0,F.j)("esri.views.ui.Component")],ho);const gl=ho,Kf={left:0,top:0,bottom:0,right:0},Jd={bottom:30,top:15,right:15,left:15},Hu="manual",Ei="esri-ui",bn={ui:Ei,corner:`${Ei}-corner`,innerContainer:`${Ei}-inner-container`,manualContainer:`${Ei}-manual-container`,cornerContainer:`${Ei}-corner-container`,topLeft:`${Ei}-top-left`,topRight:`${Ei}-top-right`,bottomLeft:`${Ei}-bottom-left`,bottomRight:`${Ei}-bottom-right`};function ku(v){const M=v,I="object"==typeof M&&null!==M&&Object.getPrototypeOf(M);return null!==I&&I!==Object.prototype||!("component"in M||"index"in M||"position"in M)?null:v}function Ju(v,{top:M,bottom:I,left:R,right:ee}){v.style.top=M,v.style.bottom=I,v.style.left=R,v.style.right=ee}let ri=class extends le.Z.EventedAccessor{constructor(v){super(v),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=(0,Ya.Kd)(),this.view=null,this._applyViewPadding=()=>{const M=this.container;M&&Ju(M,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const M=this._innerContainer;M&&Ju(M,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([(0,bt.YP)(()=>[this.view?.padding,this.container],this._applyViewPadding,bt.nn),(0,bt.YP)(()=>this.padding,this._applyUIPadding,bt.nn),(0,bt.YP)(()=>[this.container,this._locale],([v,M])=>{v&&v.setAttribute("lang",M)},bt.nn),(0,Ya.qe)(v=>{this._locale=v})])}destroy(){this.container=null;for(const v of this._components)v.destroy();this._components.length=0,this._componentToKey.clear()}set container(v){const M=this._get("container");v!==M&&(v&&(v.classList.add(bn.ui),function yp(v){(function gp(v){Array.from(v.classList).forEach(M=>{M.startsWith(Oc)&&v.classList.remove(M)})})(v),v.classList.add(function mp(){return`${Oc}${Qa()?"dark":"light"}`}())}(v),this._attachContainers(v)),M&&(M.classList.remove(bn.ui),Ju(M,{top:"",bottom:"",left:"",right:""}),(0,jt.cS)(M)),this._set("container",v))}get height(){const v=this.get("view.height")||0;if(0===v)return v;const M=this._getViewPadding();return Math.max(v-(M.top+M.bottom),0)}get padding(){return this._get("padding")}set padding(v){this._overrideIfSome("padding",v)}castPadding(v){return"number"==typeof v?{bottom:v,top:v,right:v,left:v}:{...Jd,...v}}get width(){const v=this.get("view.width")||0;if(0===v)return v;const M=this._getViewPadding();return Math.max(v-(M.left+M.right),0)}add(v,M){let I,R;if(Array.isArray(v))return void v.forEach(pe=>this.add(pe,M));const ee=ku(v);ee&&({index:I,position:M,component:v,key:R}=ee),M&&"object"==typeof M&&({index:I,key:R,position:M}=M),!v||M&&!this._isValidPosition(M)||this._add(v,M,I,R)}remove(v,M){if(!v)return;if(Array.isArray(v))return v.map(R=>this.remove(R,M));const I=this._find(v);if(I){const R=this._componentToKey;if(R.has(v)&&R.get(v)!==M)return;const ee=this._components.indexOf(I);return I.node.parentNode&&I.node.parentNode.removeChild(I.node),this._componentToKey.delete(v),this._components.splice(ee,1)[0]}}empty(v){return Array.isArray(v)?v.map(M=>this.empty(M)).reduce((M,I)=>M.concat(I)):(v=v||Hu)===Hu?Array.prototype.slice.call(this._manualContainer.children).filter(M=>!M.classList.contains(bn.corner)).map(M=>this.remove(M)):this._isValidPosition(v)?Array.prototype.slice.call(this._cornerNameToContainerLookup[v].children).map(this.remove,this):null}move(v,M){if(Array.isArray(v)&&v.forEach(pe=>this.move(pe,M)),!v)return;let I;const R=ku(v)||ku(M);if(R&&(I=R.index,M=R.position,v=R.component||v),M&&!this._isValidPosition(M))return;const ee=this.remove(v);ee&&this.add(ee,{position:M,index:I})}find(v){if(!v)return null;const M=this._findById(v);return M&&(M.widget||M.node)}getPosition(v){for(const M in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[M].contains(v))return M;return null}_add(v,M,I,R){v instanceof gl||(v=new gl({node:v})),this._place({component:v,position:M,index:I}),this._components.push(v),R&&this._componentToKey.set(v,R)}_find(v){return v?v instanceof gl?this._findByComponent(v):"string"==typeof v?this._findById(v):this._findByNode(v.domNode||v):null}_getViewPadding(){return this.get("view.padding")||Kf}_attachContainers(v){v.appendChild(this._innerContainer),v.appendChild(this._manualContainer)}_initContainers(){const v=document.createElement("div");v.classList.add(bn.innerContainer),v.classList.add(bn.cornerContainer);const M=document.createElement("div");M.classList.add(bn.innerContainer),M.classList.add(bn.manualContainer);const I=document.createElement("div");I.classList.add(bn.topLeft),I.classList.add(bn.corner),v.appendChild(I);const R=document.createElement("div");R.classList.add(bn.topRight),R.classList.add(bn.corner),v.appendChild(R);const ee=document.createElement("div");ee.classList.add(bn.bottomLeft),ee.classList.add(bn.corner),v.appendChild(ee);const pe=document.createElement("div");pe.classList.add(bn.bottomRight),pe.classList.add(bn.corner),v.appendChild(pe),this._innerContainer=v,this._manualContainer=M;const Me=(0,Ar.dZ)();this._cornerNameToContainerLookup={"top-left":I,"top-right":R,"bottom-left":ee,"bottom-right":pe,"top-leading":Me?R:I,"top-trailing":Me?I:R,"bottom-leading":Me?pe:ee,"bottom-trailing":Me?ee:pe},this._positionNameToContainerLookup={manual:M,...this._cornerNameToContainerLookup}}_isValidPosition(v){return!!this._positionNameToContainerLookup[v]}_place(v){const M=v.component,R=v.index,ee=this._positionNameToContainerLookup[v.position||Hu],pe=null!=R&&R>-1;if(function Vf(v){return v&&!v._started&&"function"==typeof v.postMixInProperties&&"function"==typeof v.buildRendering&&"function"==typeof v.postCreate&&"function"==typeof v.startup}(M.widget)&&M.widget.startup(),!pe)return void ee.appendChild(M.node);const Me=Array.prototype.slice.call(ee.children);0!==R?R>=Me.length?ee.appendChild(M.node):(0,jt.Vt)(M.node,Me[R]):ee.firstChild?(0,jt.Vt)(M.node,ee.firstChild):ee.appendChild(M.node)}_toPxPosition(v){return{top:this._toPxUnit(v.top),left:this._toPxUnit(v.left),right:this._toPxUnit(v.right),bottom:this._toPxUnit(v.bottom)}}_toPxUnit(v){return 0===v?"0":v+"px"}_findByComponent(v){let M,I=null;return this._components.some(R=>(M=R===v,M&&(I=R),M)),I}_findById(v){let M,I=null;return this._components.some(R=>(M=R.id===v,M&&(I=R),M)),I}_findByNode(v){let M,I=null;return this._components.some(R=>(M=R.node===v,M&&(I=R),M)),I}};(0,w._)([(0,C.Cb)()],ri.prototype,"_locale",void 0),(0,w._)([(0,C.Cb)()],ri.prototype,"container",null),(0,w._)([(0,C.Cb)()],ri.prototype,"height",null),(0,w._)([(0,C.Cb)({value:Jd})],ri.prototype,"padding",null),(0,w._)([(0,ve.p)("padding")],ri.prototype,"castPadding",null),(0,w._)([(0,C.Cb)()],ri.prototype,"view",void 0),(0,w._)([(0,C.Cb)()],ri.prototype,"width",null),ri=(0,w._)([(0,F.j)("esri.views.ui.UI")],ri);const zf=ri;function Yd(v,M){return v&&"copyright"in v&&(!M||"function"==typeof v.originOf&&"user"===v.originOf("copyright"))}function _l(v,M,I){!I||!M||v.find(R=>R.layerView===M&&R.text===I)||v.push({text:I,layerView:M})}const Ni=[];let Vo=class extends ui.r{constructor(v){super(v),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new V.Z,this.view=null,this._allLayerViewsChange=M=>{this.handles.remove("suspension");const I=this.get("view.allLayerViews");I&&this.handles.add(I.map(R=>(0,bt.YP)(()=>[R.suspended,R.layer?.attributionVisible],()=>this._updateAttributionItems())),"suspension"),M&&M.removed&&M.removed.forEach(R=>{this._pendingAttributions.delete(R),this._fetchedAttributionData.delete(R)}),this._updateAttributionItems()},this.handles.add([(0,bt.on)(()=>this.view?.allLayerViews,"change",M=>this._allLayerViewsChange(M),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),(0,bt.gx)(()=>!0===this.view?.stationary,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const v=this.view,M=v?.allLayerViews;Ni.length=0,v&&M?(M.forEach(I=>{if(I.suspended||!I.layer?.attributionVisible)return;const R=I.layer;if(Yd(R,"user"))return void _l(Ni,I,R.copyright);if(R.hasAttributionData){if(this._fetchedAttributionData.has(I)){const pe=this._fetchedAttributionData.get(I);return void(pe?_l(Ni,I,this._getDynamicAttribution(pe,v,R)):Yd(R)&&_l(Ni,I,R.copyright))}return void this._fetchAttributionData(I)}const ee=R.get("portalItem.accessInformation");_l(Ni,I,ee||R.copyright)}),function Gf(v,M){return v.length!==M.length||v.some((I,R)=>I.text!==M[R].text)}(this.items,Ni)&&(this.items.removeAll(),this.items.addMany(Ni)),Ni.length=0,this.notifyChange("state")):this._clear()}_fetchAttributionData(v){var M=this;return(0,x.Z)(function*(){if(M._pendingAttributions.has(v))return;M._pendingAttributions.add(v);const I=yield(0,bu.q6)(v.layer.fetchAttributionData());if(M._pendingAttributions.has(v)){const R=I.ok?M._createContributionIndex(I.value,function Hf(v){return"bing-maps"===v.type}(v.layer)):null;M._pendingAttributions.delete(v),M._fetchedAttributionData.set(v,R)}M._updateAttributionItems()})()}_createContributionIndex(v,M){const I=v.contributors,R={};if(!I)return R;for(let ee=0;ee<I.length;ee++){const pe=I[ee],Me=pe.coverageAreas;if(!Me)return;for(const xe of Me){const ze=xe.bbox,st=xe.zoomMin-(M&&xe.zoomMin?1:0),ut=xe.zoomMax-(M&&xe.zoomMax?1:0),Gt={extent:(0,nl.$)({xmin:ze[1],ymin:ze[0],xmax:ze[3],ymax:ze[2],spatialReference:Fo.Z.WGS84}),attribution:pe.attribution||"",score:null!=xe.score?xe.score:100,id:ee};for(let Ft=st;Ft<=ut;Ft++)R[Ft]=R[Ft]||[],R[Ft].push(Gt)}}return R.maxKey=Math.max.apply(null,Object.keys(R)),R}_getDynamicAttribution(v,M,I){const{extent:R,scale:ee}=M;let pe=I.tileInfo?.scaleToZoom(ee)??0;if(pe=Math.min(v.maxKey??0,Math.round(pe)),!R||null==pe||pe<=-1)return"";const Me=v[pe],xe=(0,nl.iV)(R.center.clone().normalize(),M.spatialReference),ze={};return Me?Me.filter(st=>{const ut=st.id,Ct=!ze[ut]&&xe&&st.extent&&(0,Lu.aV)(st.extent,xe);return Ct&&(ze[ut]=!0),Ct}).sort((st,ut)=>ut.score-st.score||st.objectId-ut.objectId).map(st=>st.attribution).join(", "):""}};(0,w._)([(0,C.Cb)({readOnly:!0,type:V.Z})],Vo.prototype,"items",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Vo.prototype,"state",null),(0,w._)([(0,C.Cb)()],Vo.prototype,"view",void 0),Vo=(0,w._)([(0,F.j)("esri.widgets.Attribution.AttributionViewModel")],Vo);const Qd=Vo,zo="esri-attribution",Zi={base:`${zo} esri-widget`,poweredBy:`${zo}__powered-by`,sources:`${zo}__sources`,open:`${zo}--open`,sourcesOpen:`${zo}__sources--open`,link:`${zo}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Mn=class extends fs.Z{constructor(v,M){super(v,M),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(I=>I.forEach(({target:R})=>this._checkSourceTextOverflow(R))),this.iconClass=Zi.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Qd}initialize(){this.addHandles((0,bt.on)(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((v,M)=>(v.includes(M.text)||v.push(M.text),v),[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(v){this._overrideIfSome("label",v)}get view(){return this.viewModel.view}set view(v){this.viewModel.view=v}render(){return(0,Mt.u)("div",{bind:this,class:this.classes(Zi.base,{[Zi.open]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return(0,Mt.u)("div",{class:Zi.poweredBy},"Powered by"," ",(0,Mt.u)("a",{class:Zi.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const v=this._isOpen,M=this._isInteractive,I=M?"0":"",{attributionText:R}=this;return(0,Mt.u)("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Zi.sources,{[Zi.sourcesOpen]:v,[Zi.interactive]:M}),innerHTML:R,tabindex:I})}_afterSourcesNodeCreate(v){this._prevSourceNodeHeight=v.clientWidth,this._resizeObserver.observe(v)}_checkSourceTextOverflow(v){let M=!1;const{clientHeight:I,clientWidth:R,scrollWidth:ee}=v,pe=ee>R,Me=this._attributionTextOverflowed!==pe;if(this._attributionTextOverflowed=pe,Me&&(M=!0),this._isOpen){const xe=I<this._prevSourceNodeHeight;this._prevSourceNodeHeight=I,xe&&(this._isOpen=!1,M=!0)}M&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};(0,w._)([(0,C.Cb)()],Mn.prototype,"_isOpen",void 0),(0,w._)([(0,C.Cb)()],Mn.prototype,"_isInteractive",null),(0,w._)([(0,C.Cb)()],Mn.prototype,"_attributionTextOverflowed",void 0),(0,w._)([(0,C.Cb)()],Mn.prototype,"_prevSourceNodeHeight",void 0),(0,w._)([(0,C.Cb)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Mn.prototype,"attributionText",null),(0,w._)([(0,C.Cb)()],Mn.prototype,"iconClass",void 0),(0,w._)([(0,C.Cb)()],Mn.prototype,"itemDelimiter",void 0),(0,w._)([(0,C.Cb)()],Mn.prototype,"label",null),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Attribution/t9n/Attribution")],Mn.prototype,"messages",void 0),(0,w._)([(0,C.Cb)()],Mn.prototype,"view",null),(0,w._)([(0,C.Cb)({type:Qd})],Mn.prototype,"viewModel",void 0),(0,w._)([(0,Sn.h)()],Mn.prototype,"_toggleState",null),Mn=(0,w._)([(0,F.j)("esri.widgets.Attribution")],Mn);const kf=Mn;let po=class extends(vu(he.Z)){constructor(v){super(v),this._handles=new ls.Z,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add((0,bt.YP)(()=>this.view,this._updateRotationWatcher,bt.nn))}destroy(){(0,ce.hw)(this._handles),this.view=null}get canShowNorth(){const v=this.get("view.spatialReference");return!(!v||!v.isWebMercator&&!v.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const v={};"2d"===this.view?.type?v.rotation=0:v.heading=0,this.callGoTo({target:v})}_updateForRotation(v){null!=v&&(this.orientation={z:v})}_updateForCamera(v){v&&(this.orientation={x:0,y:0,z:-v.heading})}_updateRotationWatcher(v){this._handles.removeAll(),v&&this._handles.add("2d"===v.type?(0,bt.YP)(()=>v?.rotation,this._updateForRotation,bt.nn):(0,bt.YP)(()=>v?.camera,this._updateForCamera,bt.nn))}};(0,w._)([(0,C.Cb)({readOnly:!0})],po.prototype,"canShowNorth",null),(0,w._)([(0,C.Cb)()],po.prototype,"orientation",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],po.prototype,"state",null),(0,w._)([(0,C.Cb)()],po.prototype,"view",void 0),po=(0,w._)([(0,F.j)("esri.widgets.CompassViewModel")],po);const Xd=po;let ni=class extends fs.Z{constructor(v,M){super(v,M),this.iconClass="esri-icon-locate-circled",this.messages=null,this.viewModel=new Xd}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(v){this.viewModel.goToOverride=v}get label(){return this.messages?.widgetLabel??""}set label(v){this._overrideIfSome("label",v)}get view(){return this.viewModel.view}set view(v){this.viewModel.view=v}reset(){return this.viewModel.reset()}render(){const{orientation:v,state:M}=this.viewModel,I="disabled"===M,R="compass"==("rotation"===M?"rotation":"compass"),ee=I?-1:0,pe={"esri-disabled":I,"esri-interactive":!I},Me={"esri-icon-compass":R,"esri-icon-dial":!R},{messages:xe}=this;return(0,Mt.u)("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",pe),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:ee,"aria-label":xe.reset,title:xe.reset},(0,Mt.u)("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",Me),styles:this._toRotationTransform(v)}),(0,Mt.u)("span",{class:"esri-icon-font-fallback-text"},xe.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(v){return{transform:`rotateZ(${v.z}deg)`}}};(0,w._)([(0,C.Cb)()],ni.prototype,"goToOverride",null),(0,w._)([(0,C.Cb)()],ni.prototype,"iconClass",void 0),(0,w._)([(0,C.Cb)()],ni.prototype,"label",null),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Compass/t9n/Compass")],ni.prototype,"messages",void 0),(0,w._)([(0,C.Cb)()],ni.prototype,"view",null),(0,w._)([(0,C.Cb)({type:Xd})],ni.prototype,"viewModel",void 0),(0,w._)([(0,Sn.h)()],ni.prototype,"_reset",null),ni=(0,w._)([(0,F.j)("esri.widgets.Compass")],ni);const Yf=ni,Go="esri-navigation-toggle",zn={base:`${Go} esri-widget`,button:`${Go}__button esri-widget--button`,activeButton:`${Go}__button--active`,panButton:`${Go}__button--pan`,rotateButton:`${Go}__button--rotate`,isLayoutHorizontal:`${Go}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Ho=class extends he.Z{constructor(v){super(v),this.navigationMode="pan",this.view=null}initialize(){this.own((0,bt.gx)(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view?.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};(0,w._)([(0,C.Cb)({readOnly:!0})],Ho.prototype,"state",null),(0,w._)([(0,C.Cb)()],Ho.prototype,"navigationMode",void 0),(0,w._)([(0,C.Cb)()],Ho.prototype,"view",void 0),Ho=(0,w._)([(0,F.j)("esri.widgets.NavigationToggleViewModel")],Ho);const qd=Ho;let ii=class extends fs.Z{constructor(v,M){super(v,M),this.iconClass=zn.widgetIcon,this.messages=null,this.viewModel=new qd}get label(){return this.messages?.widgetLabel??""}set label(v){this._overrideIfSome("label",v)}set layout(v){"horizontal"!==v&&(v="vertical"),this._set("layout",v)}get view(){return this.viewModel.view}set view(v){this.viewModel.view=v}toggle(){return this.viewModel.toggle()}render(){const v="disabled"===this.get("viewModel.state"),M="pan"===this.get("viewModel.navigationMode"),R={[zn.activeButton]:M},ee={[zn.activeButton]:!M},pe=v?-1:0,Me=this.messages.toggle;return(0,Mt.u)("div",{bind:this,class:this.classes(zn.base,{[zn.disabled]:v,[zn.isLayoutHorizontal]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:pe,"aria-label":Me,title:Me},(0,Mt.u)("div",{class:this.classes(zn.button,zn.panButton,R)},(0,Mt.u)("span",{class:zn.panIcon})),(0,Mt.u)("div",{class:this.classes(zn.button,zn.rotateButton,ee)},(0,Mt.u)("span",{class:zn.rotationIcon})))}_toggle(){this.toggle()}};(0,w._)([(0,C.Cb)()],ii.prototype,"iconClass",void 0),(0,w._)([(0,C.Cb)()],ii.prototype,"label",null),(0,w._)([(0,C.Cb)({value:"vertical"})],ii.prototype,"layout",null),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],ii.prototype,"messages",void 0),(0,w._)([(0,C.Cb)()],ii.prototype,"view",null),(0,w._)([(0,C.Cb)({type:qd})],ii.prototype,"viewModel",void 0),(0,w._)([(0,Sn.h)()],ii.prototype,"_toggle",null),ii=(0,w._)([(0,F.j)("esri.widgets.NavigationToggle")],ii);const Qf=ii;let Ki=class extends fs.Z{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const v=this.enabled?0:-1,I={[this.iconClass]:!!this.iconClass};return(0,Mt.u)("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{"esri-disabled":!this.enabled,"esri-interactive":this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:v,title:this.title},(0,Mt.u)("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",I)}),(0,Mt.u)("span",{class:"esri-icon-font-fallback-text"},this.title))}_triggerAction(){this.action.call(this)}};(0,w._)([(0,C.Cb)()],Ki.prototype,"action",void 0),(0,w._)([(0,C.Cb)()],Ki.prototype,"enabled",void 0),(0,w._)([(0,C.Cb)()],Ki.prototype,"iconClass",void 0),(0,w._)([(0,C.Cb)()],Ki.prototype,"title",void 0),(0,w._)([(0,Sn.h)()],Ki.prototype,"_triggerAction",null),Ki=(0,w._)([(0,F.j)("esri.widgets.IconButton")],Ki);const eh=Ki;let ko=class extends he.Z{get canZoomIn(){if(!this.get("view.ready"))return!1;const v=this.get("view.animation.target.scale")||this.get("view.scale"),M=this.get("view.constraints.effectiveMaxScale");return 0===M||v>M}get canZoomOut(){if(!this.get("view.ready"))return!1;const v=this.get("view.animation.target.scale")||this.get("view.scale"),M=this.get("view.constraints.effectiveMinScale");return 0===M||v<M}};(0,w._)([(0,C.Cb)({readOnly:!0})],ko.prototype,"canZoomIn",null),(0,w._)([(0,C.Cb)({readOnly:!0})],ko.prototype,"canZoomOut",null),(0,w._)([(0,C.Cb)()],ko.prototype,"view",void 0),ko=(0,w._)([(0,F.j)("esri.widgets.Zoom.ZoomConditions2D")],ko);const Xf=ko;let Jo=class extends he.Z{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};(0,w._)([(0,C.Cb)({readOnly:!0})],Jo.prototype,"canZoomIn",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Jo.prototype,"canZoomOut",null),(0,w._)([(0,C.Cb)()],Jo.prototype,"view",void 0),Jo=(0,w._)([(0,F.j)("esri.widgets.Zoom.ZoomConditions3D")],Jo);const qf=Jo;let Vi=class extends he.Z{constructor(v){super(v)}destroy(){this.view=null}get canZoomIn(){return(0,ce.pC)(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){return(0,ce.pC)(this._zoomConditions)&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(v){v?"2d"===v.type?this._zoomConditions=new Xf({view:v}):"3d"===v.type&&(this._zoomConditions=new qf({view:v})):this._zoomConditions=null,this._set("view",v)}zoomIn(){if(!this.canZoomIn)return;const v=this.view;"2d"===v.type?v.mapViewNavigation.zoomIn():(0,z.R8)(v.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const v=this.view;"2d"===v.type?v.mapViewNavigation.zoomOut():(0,z.R8)(v.goTo({zoomFactor:.5}))}};(0,w._)([(0,C.Cb)()],Vi.prototype,"_zoomConditions",void 0),(0,w._)([(0,C.Cb)()],Vi.prototype,"canZoomIn",null),(0,w._)([(0,C.Cb)()],Vi.prototype,"canZoomOut",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Vi.prototype,"state",null),(0,w._)([(0,C.Cb)()],Vi.prototype,"view",null),Vi=(0,w._)([(0,F.j)("esri.widgets.Zoom.ZoomViewModel")],Vi);const th=Vi;let bi=class extends fs.Z{constructor(v,M){super(v,M),this.iconClass="esri-icon-zoom-in-magnifying-glass",this.messages=null,this.viewModel=new th}initialize(){this._zoomInButton=new eh({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"}),this._zoomOutButton=new eh({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})}destroy(){this._zoomInButton=(0,ce.SC)(this._zoomInButton),this._zoomOutButton=(0,ce.SC)(this._zoomOutButton)}get label(){return this.messages?.widgetLabel??""}set label(v){this._overrideIfSome("label",v)}set layout(v){"horizontal"!==v&&(v="vertical"),this._set("layout",v)}set view(v){this.viewModel.view=v}get view(){return this.viewModel.view}render(){const v=this.viewModel,M={"esri-zoom--horizontal":"horizontal"===this.layout},{canZoomIn:I,canZoomOut:R}=v;this._zoomInButton.enabled=I,this._zoomOutButton.enabled=R;const{zoomIn:ee,zoomOut:pe}=this.messages;return this._zoomInButton.title=ee,this._zoomOutButton.title=pe,(0,Mt.u)("div",{class:this.classes("esri-zoom esri-widget",M)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};(0,w._)([(0,C.Cb)()],bi.prototype,"iconClass",void 0),(0,w._)([(0,C.Cb)()],bi.prototype,"label",null),(0,w._)([(0,C.Cb)({value:"vertical"})],bi.prototype,"layout",null),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Zoom/t9n/Zoom")],bi.prototype,"messages",void 0),(0,w._)([(0,C.Cb)()],bi.prototype,"view",null),(0,w._)([(0,C.Cb)({type:th})],bi.prototype,"viewModel",void 0),bi=(0,w._)([(0,F.j)("esri.widgets.Zoom")],bi);const em=bi;let vl=class extends zf{constructor(v){super(v),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([(0,bt.YP)(()=>this.components,this._componentsWatcher.bind(this),bt.nn),(0,bt.YP)(()=>this.view,this._updateViewAwareWidgets.bind(this),bt.nn)])}_add(v,M,I,R){let ee=v;if("string"==typeof v&&this._defaultPositionLookup[v]){if(this._find(v))return;ee=this._createComponent(v)}super._add(ee,M,I,R)}_removeComponents(v){v.forEach(M=>{const I=this._find(M);I&&(this.remove(I),I.destroy())})}_updateViewAwareWidgets(v){this.components.forEach(M=>{const I=this._find(M),R=I&&I.widget;(function tm(v){return v&&void 0!==v.view})(R)&&(R.view=v)})}_componentsWatcher(v,M){this._removeComponents(M),this._addComponents(v),this._adjustPadding(v)}_adjustPadding(v){if(!v.includes("attribution")&&!this._isOverridden("padding")){const{top:M}=this.padding;this.padding=M}}_addComponents(v){this.constructed&&v.forEach(M=>this.add(this._createComponent(M),this._defaultPositionLookup[M]))}_createComponent(v){const M=this._createWidget(v);if(M)return new gl({id:v,node:M})}_createWidget(v){return"attribution"===v?this._createAttribution():"compass"===v?this._createCompass():"navigation-toggle"===v?this._createNavigationToggle():"zoom"===v?this._createZoom():void 0}_createAttribution(){return new kf({view:this.view})}_createCompass(){return new Yf({view:this.view})}_createNavigationToggle(){return new Qf({view:this.view})}_createZoom(){return new em({view:this.view})}};(0,w._)([(0,C.Cb)()],vl.prototype,"components",void 0),vl=(0,w._)([(0,F.j)("esri.views.ui.DefaultUI")],vl);const sm=vl;let El=class extends sm{constructor(v){super(v),this.components=["attribution","zoom"]}};(0,w._)([(0,C.Cb)()],El.prototype,"components",void 0),El=(0,w._)([(0,F.j)("esri.views.ui.2d.DefaultUI2D")],El);const Yu=El;var Qu;let bl=Qu=class extends N.wq{constructor(v){super(v),this.color=new se.Z([0,0,0,1])}clone(){return new Qu((0,J.d9)({color:this.color}))}};(0,w._)([(0,C.Cb)({type:se.Z,json:{write:!0}})],bl.prototype,"color",void 0),bl=Qu=(0,w._)([(0,F.j)("esri.webmap.background.ColorBackground")],bl);const rm=bl;let sh,rh,nh,ih,oh,ah;function Xu(){return Xu=(0,x.Z)(function*(){const[,{GraphicsView2D:v,GraphicContainer:M,LabelManager:I,MapViewNavigation:R,MagnifierView2D:ee,Stage:pe}]=yield Promise.all([Promise.all([g.e(4697),g.e(1967),g.e(1988),g.e(7362)]).then(g.bind(g,47362)),Promise.all([g.e(4697),g.e(7868),g.e(4183),g.e(1967),g.e(1988),g.e(4048),g.e(3345),g.e(323),g.e(1850),g.e(2155),g.e(250),g.e(9764),g.e(5230),g.e(8664),g.e(4477),g.e(8450),g.e(366),g.e(4159),g.e(8592),g.e(9569)]).then(g.bind(g,59569))]);rh=v,nh=M,ih=I,oh=R,ah=ee,sh=pe}),Xu.apply(this,arguments)}let Js=class extends(Pt(f0(m0(B0)))){constructor(v){super(v),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new re.Z({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new Z0(this),this._pePromise=null,this.floors=new V.Z,this.highlightOptions=new Gd.Z,this.inputManager=new jf({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new Hd.T,this.type="2d",this.ui=new Yu,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new Ud,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([(0,bt.YP)(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160)},bt.Z_),this.on("resize",M=>this._resizeHandler(M)),(0,bt.YP)(()=>this.animationManager?.animation,M=>{this.animation=M})]),(0,mt.j2)()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Uf.Z(this.featuresTilingScheme)}get initialExtentRequired(){const{scale:v,constraints:M,center:I,viewpoint:R,extent:ee}=this;let pe=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||ee||(M?.effectiveLODs||(pe=-1),I&&(0!==v||-1!==pe)||R&&(0,ce.pC)(R.targetGeometry)&&("extent"===R.targetGeometry.type||R.scale)))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!(0,Zt.kR)()||(this._pePromise||(this._pePromise=(0,Zt.zD)().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const v=this._getDefaultViewpoint();if(!v)return!1;const M=this.spatialReference,I=(0,ce.Wg)(v.targetGeometry);return!!(0,Zt.Up)(I.spatialReference,M)||this._projectionEngineLoaded}set animation(v){const M=this._get("animation");if(v===M)return;if(M&&M.stop(),!v||v.isFulfilled())return void this._set("animation",null);this._set("animation",v),this.frameTask.animationInProgress=!0;const I=()=>{v===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};v.when(I,I)}get background(){return function am(v){return"esri.WebMap"===v?.declaredClass}(this.map)?this.map.initialViewProperties.background:null}set background(v){this._override("background",v)}get center(){if(!this.ready)return this._get("center");const{center:v,spatialReference:M}=this.state.paddedViewState;return new It.Z({x:v[0],y:v[1],spatialReference:M})}set center(v){if(null==v)return;if(!this.ready)return this._set("center",v),void this.notifyChange("initialExtentRequired");let M;try{M=this._project(v,this.spatialReference)}catch(R){return void k.Z.getLogger(this.declaredClass).error(new U.Z("mapview:invalid-center","could not project the value in the view's spatial reference",{input:v,error:R}))}const I=this.viewpoint;(0,$r.o2)(I,I,M),this.viewpoint=I}set constraints(v){const M=this._get("constraints");M&&(this.handles.remove("map-view-constraints"),M.destroy()),this._set("constraints",v),v&&(v.view=this,this.ready&&(this.state.viewpoint=v.fit(this.state.paddedViewState.viewpoint)),this.handles.add((0,bt.YP)(()=>v.version,()=>{this.ready&&this.state&&(this.state.viewpoint=v.fit(this.state.paddedViewState.viewpoint))},bt.Z_),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(v){if(null==v)return;if(!v.width||!v.height)return void k.Z.getLogger(this.declaredClass).error(new U.Z("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",v),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let M;try{M=this._project(v,this.spatialReference)}catch(R){return void k.Z.getLogger(this.declaredClass).error(new U.Z("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:R}))}const I=this.viewpoint;(0,$r.qf)(I,I,M,this.size,{constraints:this.constraints}),this.viewpoint=I}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(v){this.ready?(this.state.padding=v,this._set("padding",this.state.padding)):this._set("padding",v)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(v){if(isNaN(v))return;if(!this.ready)return void this._set("rotation",v);const M=this.viewpoint;(0,$r.YQ)(M,M,v),this.viewpoint=M}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(v){if(!v||isNaN(v))return;if(!this.ready){this._set("scale",v),this._set("zoom",-1);const I=this._get("extent");return I&&(this._set("extent",null),this._set("center",I.center)),void this.notifyChange("initialExtentRequired")}const M=this.viewpoint;(0,$r.Hy)(M,M,v),this.viewpoint=M}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){const v=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(M=>!M.destroyed&&!("layerViews"in M)&&!0===M.updating));if((0,X.Z)("esri-2d-log-updating")){const M=this.allLayerViews.reduce((I,R)=>({...I,[R.layer.id]:!R.destroyed&&!("layerViews"in R)&&R.updating}),{});console.log(`Updating MapView: ${v}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(M)}\n`)}return v}get viewpoint(){if(!this.ready)return this._get("viewpoint");const v=this.state.paddedViewState;return v&&v.viewpoint.clone()}set viewpoint(v){if(null==v)return;if(!this.ready)return this._set("viewpoint",v),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let M,I;try{M=this._project(v,this.spatialReference),!v.scale||isNaN(v.scale)?I=new U.Z("mapview:invalid-viewpoint",`invalid scale value of ${v.scale}`):(0,ce.Wi)(v.targetGeometry)&&(I=new U.Z("mapview:invalid-viewpoint","geometry not defined"))}catch(ee){I=new U.Z("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:ee})}if(I)return void k.Z.getLogger(this.declaredClass).error(I);this._scaleBeforeChangingSpatialReference=null;const R=new as.Z({targetGeometry:new It.Z,scale:0,rotation:0});(0,$r.JG)(R,M),this.constraints.constrain(R,this.state.paddedViewState.viewpoint),this.state.viewpoint=R,this.frameTask.requestFrame(),this._set("viewpoint",R)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(v){if(null==v)return;if(!this.ready){this._set("zoom",v),this._set("scale",0);const I=this._get("extent");return I&&(this._set("extent",null),this._set("center",I.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const M=this.viewpoint;(0,$r.Hy)(M,M,this.constraints.zoomToScale(v)),this.viewpoint=M,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(v,M){if(v)return this.animation&&(this.animation=null),this._createAnimation(),(0,bt.N1)(()=>this.ready,M).then(()=>{const I={animate:!0,...M},R=(0,$r.Ue)(v,this);return this.animation?.update(R),this._gotoTask={},I.animate?this._gotoAnimated(R,I):this._gotoImmediate(R,I)});k.Z.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}hitTest(v,M){var I=this;return(0,x.Z)(function*(){const R=vd(v)?_d(I,v):v;if(!I.ready||isNaN(R.x)||isNaN(R.y))return{screenPoint:R,results:[]};let ee=new Set,pe=!1,Me=null,xe=null;M?.include?ch(M.include,uh(I,Ct=>ee.add(Ct),Ct=>{Me||(Me=new Set),Me.add(Ct)},Ct=>ee.add(Ct),()=>pe=!0)):(pe=!0,ee=new Set(I.allLayerViews)),M?.exclude&&ch(M.exclude,uh(I,Ct=>ee.delete(Ct),Ct=>{xe||(xe=new Set),xe.add(Ct)}));const ze=I.allLayerViews.filter(Ct=>!Ct.suspended&&ee.has(Ct)).reverse(),st=I.toMap(R);let ut=[...pe?I.graphicsView.hitTest(st).map(Ct=>({type:"graphic",graphic:Ct,layer:null,mapPoint:st})):[],...yield Promise.all(ze.map(Ct=>Ct.hitTest(st,R)).toArray())].filter(ce.pC).flat().filter(ce.pC);return Me&&(ut=ut.filter(Ct=>!("graphic"in Ct)||!Ct.graphic||Me?.has(qu(Ct.graphic)))),xe&&(ut=ut.filter(Ct=>!("graphic"in Ct)||!Ct.graphic||xe?.has(qu(Ct.graphic)))),{screenPoint:R,results:ut}})()}takeScreenshot(v){var M=this;return(0,x.Z)(function*(){const I=M._createScreenshotPlan(v),R=yield M._stage.takeScreenshot(I);return(0,yl.cv)(R,{format:I.format,quality:I.quality,rotation:0,disableDecorations:!1},M._pixelFormat)})()}_takeScreenshot(v){var M=this;return(0,x.Z)(function*(){const I=M._createScreenshotPlan(v),R=yield M._stage.takeScreenshot(I);return(0,yl.v8)(R,M._pixelFormat)})()}_createScreenshotPlan(v){v=v??{};const M=this.supersampleScreenshotsEnabled?Math.min(4,(0,yl.RZ)(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let I;v.layers?(I=[],v.layers.forEach(pe=>{const Me=this.allLayerViews.find(xe=>xe.layer.id===pe.id);Me&&"container"in Me&&Me.container&&I.push(Me.container)})):I=this._stage.children;const{format:R,quality:ee}=(0,yl.LI)(v.format,v.quality);return function Ff(v,M,I,R,ee,pe,Me,xe){v.ignorePadding&&(R={left:0,right:0,top:0,bottom:0});let ze=null;null!=v.width&&null!=v.height?ze=[v.width,v.height]:null==v.width&&null!=v.height?ze=[v.height,v.height]:null!=v.width&&null==v.height?ze=[v.width,v.width]:null==v.width&&null==v.height&&(ze=null);const st=I[0]-(R.left+R.right),ut=I[1]-(R.top+R.bottom);let Ct,Gt,Ft=v.area||{x:0,y:0,width:st,height:ut};if(ze){const Ps=ze[0]/ze[1];if(Ps>st/ut){const Is=Ft.width/Ps;Ft={x:Ft.x,y:Math.round(Ft.y+(Ft.height-Is)/2),width:Ft.width,height:Math.round(Is)}}else{const Is=Ft.height*Ps;Ft={x:Math.round(Ft.x+(Ft.width-Is)/2),y:Ft.y,width:Math.round(Is),height:Ft.height}}}else ze=[Ft.width,Ft.height];return ze[0]>Ft.width?(Ct=Math.min(ze[0]/Ft.width,M),Gt=ze[0]/Ft.width/Ct):(Ct=1,Gt=ze[0]/Ft.width),{resolutionScale:Ct,cropArea:{x:Math.round((Ft.x+R.left)*Ct),y:Math.round((Ft.y+R.top)*Ct),width:Math.round(Ft.width*Ct),height:Math.round(Ft.height*Ct)},outputScale:Gt,format:ee,quality:pe,children:Me,rotation:xe}}(v,M,this.size,this.padding,R,ee,I,v.rotation)}get test(){return{takeScreenshot:v=>this._takeScreenshot(v)}}toMap(v){if(!this.ready)return null;const M=vd(v)?_d(this,v):v,[R,ee]=this.state.toMap([0,0],[M.x,M.y]);return new It.Z({x:R,y:ee,spatialReference:this.spatialReference})}toScreen(v){if(!this.ready)return null;const M=this._project(v,this.spatialReference),I=[M.x,M.y];return this.state.toScreen(I,I),(0,Ts.vW)(I[0],I[1])}on(v,M,I,R){return this.inputManager&&this.viewEvents.on(v,M,I,R)||super.on(v,M)}hasEventListener(v){return super.hasEventListener(v)||this.viewEvents.hasHandler(v)}whenLayerView(v){return super.whenLayerView(v)}graphicChanged(v){this.graphicsView&&this.graphicsView.graphicUpdateHandler(v)}whenReady(){return new Promise(v=>{this.ready?v(this):this._resolveWhenReady.push(v)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}hasLayerViewModule(v){return(v=>(0,ce.pC)(xd[v.type]))(v)}importLayerView(v){return(v=>{const M=xd[v.type];if((0,ce.Wi)(M))throw function $0(v){const M=v.declaredClass?v.declaredClass.slice(v.declaredClass.lastIndexOf(".")+1):"Unknown",I=M.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new U.Z(`${I}:view-not-supported`,`${M} is not supported in 2D`)}(v);return M(v)})(v)}pixelSizeAt(){return this.ready?this.state.resolution:(k.Z.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(v){return this.hitTest(v).then(M=>({...M,mapPoint:this.toMap(v)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let v=function Nf(v){const M=(0,Bf.hc)(v);if(!M.available)return new U.Z("webgl:required","WebGL is required but not supported.");if("3d"===v&&M.majorPerformanceCaveat)return new U.Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!M.supportsHighPrecisionFragment)return new U.Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!M.supportsVertexShaderSamplers)return new U.Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(M.type===Wf.zO.WEBGL1){if(!M.supportsElementIndexUint)return new U.Z("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!M.supportsStandardDerivatives)return new U.Z("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!M.supportsInstancedArrays)return new U.Z("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}(this.type);return(0,X.Z)("safari")&&(0,X.Z)("safari")<9&&(v=new U.Z("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,X.Z)("safari")})),(0,ce.pC)(v)?(k.Z.getLogger(this.declaredClass).warn("#validate()",v.message),Promise.reject(v)):function nm(){return Xu.apply(this,arguments)}()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new xu),this.animation}_cancellableGoTo(v,M,I){const R=()=>v===this._gotoTask,ee=I.then(()=>{R()&&(this.animation=null)}).catch(Me=>{throw R()&&(M&&!M.done&&(M.stop(),this.frameTask.animationInProgress=!1),this.animation=null),Me}),pe=new Promise(Me=>Me(ee));return M.when().catch(()=>{R()&&pe.cancel&&pe.cancel()}),pe}_gotoImmediate(v,M){const I=this._gotoTask,R=this.animation,ee=v.then(pe=>{if((0,z.k_)(M),I!==this._gotoTask)throw new U.Z("view:goto-interrupted","Goto was interrupted");this.viewpoint=R.target=pe,R.finish()});return this._cancellableGoTo(I,R,ee)}_flipStationary(v){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const M=performance.now()-this._lastStationaryEventTimestamp;M<160&&(this._stationaryTimer=this._flipStationary(M))},v)),this._stationaryTimer}_getDefaultViewpoint(){const{constraints:v,initialExtent:M,map:I,padding:R,size:ee}=this;if(!v)return null;const pe=I&&"initialViewProperties"in I?I.initialViewProperties:void 0,Me={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};v.effectiveLODs?-1!==Me.zoom&&(Me.scale=v.zoomToScale(Me.zoom)):Me.zoom=-1;let xe=null,ze=null,st=0;const ut=Me.viewpoint&&Me.viewpoint.rotation,Ct=Me.viewpoint&&Me.viewpoint.targetGeometry;(0,ce.pC)(Ct)&&("extent"===Ct.type?xe=Ct:"point"===Ct.type&&(ze=Ct,st=Me.viewpoint.scale));const Gt=Me.extent||xe||(0,ce.Wg)(pe?.viewpoint?.targetGeometry)?.extent||M,Ft=Me.center||ze||Gt?.center,ps=Me.scale||st||pe?.viewpoint?.scale||Gt&&(0,$r.EK)(Gt,[ee[0]-R.left-R.right,ee[1]-R.top-R.bottom]);return Ft&&ps?new as.Z({targetGeometry:Ft,scale:ps,rotation:Me.rotation||ut||pe?.viewpoint?.rotation||0}):null}_gotoAnimated(v,M){const I=this._gotoTask,R=this.animation;if(!R)return Promise.resolve();const ee=v.then(pe=>{if((0,z.k_)(M),I!==this._gotoTask)throw new U.Z("view:goto-interrupted","Goto was interrupted");return R.update(pe),this.animationManager.animate(R,this.viewpoint,M),R.when().then(()=>{},()=>{})});return this._cancellableGoTo(I,R,ee)}_project(v,M){const I=v&&v.targetGeometry||v;if(!M)return v;if(!I)return null;if(M.imageCoordinateSystem||I.spatialReference?.imageCoordinateSystem||(0,Kt.fS)(M,I.spatialReference))return v;const R=(0,Zt.iV)(I,M);if(!R)throw new U.Z("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:I,spatialReference:M});return function im(v){return v&&"esri.Viewpoint"===v.declaredClass}(v)?(v.targetGeometry=R,v):R}_resizeHandler(v){if(!this.ready)return;const M=this.state;let I=this.state.paddedViewState.viewpoint;const R=this.state.paddedViewState.size.concat();M.size=[v.width,v.height],(0,$r.SI)(I,I,R,this.state.paddedViewState.size,this.resizeAlign),I=this.constraints.constrain(I,void 0),this.state.viewpoint=I}_startup(){this.timeline.begin("MapView Startup");const v=this._getDefaultViewpoint(),M=v.targetGeometry;try{this._project(v,this.spatialReference)}catch(xe){k.Z.getLogger(this.declaredClass).warn(new nt.Z("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:M.toJSON(),spatialReference:this.spatialReference,error:xe})),v.targetGeometry=this.defaultsFromMap.extent?.center||new It.Z({x:0,y:0,spatialReference:this.spatialReference})}this.constraints?.fit(v),this._set("state",new Q0({padding:this._get("padding"),size:this.size,viewpoint:v})),this.graphics.owner=this;const I=new sh(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=I,this._magnifierView=new ah,this._magnifierView.magnifier=this.magnifier;const R=new ih({view:this});this._set("labelManager",R);const ee=new N0({view:this});this._set("animationManager",ee);const pe=new oh({view:this,animationManager:ee});this._set("mapViewNavigation",pe),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),I.on("post-render",()=>this._set("rendering",I.renderRequested)),I.on("will-render",()=>this._set("rendering",I.renderRequested)),I.on("webgl-error",xe=>this.fatalError=xe.error),(0,bt.YP)(()=>this.stationary,xe=>I.stationary=xe,bt.tX),(0,bt.YP)(()=>this.background,xe=>{I.background=xe,this._magnifierView.background=xe},bt.tX),(0,bt.YP)(()=>this.magnifier,xe=>this._magnifierView.magnifier=xe,bt.tX),(0,bt.YP)(()=>this.renderingOptions,xe=>I.renderingOptions=xe,bt.tX),(0,bt.YP)(()=>this.highlightOptions,xe=>I.highlightOptions=xe,bt.tX),(0,bt.YP)(()=>this.state.id,()=>I.state=this.state,bt.tX)],"map-view"),this._updateStageChildren();const Me=this._resolveWhenReady;this._resolveWhenReady=[],Me.forEach(xe=>xe(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[v,M],spatialReference:I,rotation:R,scale:ee}=this.state.paddedViewState,pe=new It.Z({x:v,y:M,spatialReference:I});this._set("viewpoint",null),this._set("extent",null),this._set("center",pe),this._set("zoom",-1),this._set("rotation",R),this._set("scale",ee),this._set("spatialReference",I),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(M=>{this._stage.addChild(M.container)}),this._stage.addChild(this.graphicsView.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const v=new X0.Z(Vt.Z.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",v);const M=new rh({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new nh(v)});this.frameTask.graphicsView=M,this._set("graphicsView",M)}_destroySpatialReferenceDependentProperties(){const v=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,v.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(v){if(!this.ready)return;this.frameTask.stop();for(const xe of this.allLayerViews)xe.processDetach();this._destroySpatialReferenceDependentProperties();const M=this.state.paddedViewState.clone();if((0,ce.Wi)(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=M.scale;else{const xe=M.viewpoint.clone();xe.scale=this._scaleBeforeChangingSpatialReference,M.viewpoint=xe}const I=M.clone(),[R,ee]=M.center;let pe=null;try{pe=this._project(new It.Z({x:R,y:ee,spatialReference:M.spatialReference}),v)}catch(xe){(0,Zt.kR)()||k.Z.getLogger(this.declaredClass).warn(new nt.Z("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:pe?.toJSON(),spatialReference:v,error:xe}))}pe||(pe=new It.Z({x:0,y:0,spatialReference:v}));const Me=(0,$r.o2)(new as.Z({targetGeometry:new It.Z,scale:0,rotation:0}),M.viewpoint,pe);I.viewpoint=Me;try{const ze=[M.size[0]/2,M.size[1]/2],st=[ze[0]+20,ze[1]],ut=M.toMap([0,0],st),{x:Ct,y:Gt}=this._project(new It.Z({x:ut[0],y:ut[1],spatialReference:M.spatialReference}),v);ut[0]=Ct,ut[1]=Gt,I.toScreen(ut,ut);const Ft=(0,$r.dI)(ze,ut,st),ps=Math.hypot(ut[0]-ze[0],ut[1]-ze[1])/20;!Number.isFinite(ps)||Math.abs(ps)>4?(Me.rotation=0,Me.targetGeometry=new It.Z({x:0,y:0,spatialReference:v})):(Me.scale*=ps,Me.scale>(0,X.Z)("mapview-srswitch-adjust-rotation-scale-threshold")?Me.rotation=0:Me.rotation+=Number.isFinite(Ft)?Ft:0)}catch{}this._get("constraints").constrain(Me,void 0),this._get("state").viewpoint=Me,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const xe of this.allLayerViews)xe.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Js.type="2d",(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"animationManager",void 0),(0,w._)([(0,C.Cb)({constructOnly:!0})],Js.prototype,"deactivatedWebGLExtensions",void 0),(0,w._)([(0,C.Cb)({constructOnly:!0})],Js.prototype,"debugWebGLExtensions",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"featuresTilingScheme",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"fullOpacity",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"graphicsTileStore",null),(0,w._)([(0,C.Cb)()],Js.prototype,"graphicsView",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"state",void 0),(0,w._)([(0,C.Cb)()],Js.prototype,"initialExtentRequired",null),(0,w._)([(0,C.Cb)()],Js.prototype,"labelManager",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"resourceManager",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"textureManager",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"mapViewNavigation",void 0),(0,w._)([(0,C.Cb)({constructOnly:!0})],Js.prototype,"renderCanvas",void 0),(0,w._)([(0,C.Cb)()],Js.prototype,"renderingOptions",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"rendering",void 0),(0,w._)([(0,C.Cb)({constructOnly:!0})],Js.prototype,"supersampleScreenshotsEnabled",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"supportsGround",void 0),(0,w._)([(0,C.Cb)()],Js.prototype,"_stationaryTimer",void 0),(0,w._)([(0,C.Cb)()],Js.prototype,"_defaultsFromMapSettings",null),(0,w._)([(0,C.Cb)()],Js.prototype,"_pePromise",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"typeSpecificPreconditionsReady",null),(0,w._)([(0,C.Cb)()],Js.prototype,"animation",null),(0,w._)([(0,C.Cb)({type:rm})],Js.prototype,"background",null),(0,w._)([(0,C.Cb)({value:null,type:It.Z,dependsOn:["state.id","ready"]})],Js.prototype,"center",null),(0,w._)([(0,C.Cb)({type:Ud})],Js.prototype,"constraints",null),(0,w._)([(0,C.Cb)({value:null,type:Tt.Z,dependsOn:["state.id","ready"]})],Js.prototype,"extent",null),(0,w._)([(0,C.Cb)()],Js.prototype,"floors",void 0),(0,w._)([(0,C.Cb)({type:Gd.Z})],Js.prototype,"highlightOptions",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"inputManager",void 0),(0,w._)([(0,C.Cb)()],Js.prototype,"map",void 0),(0,w._)([(0,C.Cb)({value:{top:0,right:0,bottom:0,left:0},cast:v=>({top:0,right:0,bottom:0,left:0,...v})})],Js.prototype,"padding",null),(0,w._)([(0,C.Cb)()],Js.prototype,"resizeAlign",void 0),(0,w._)([(0,C.Cb)({readOnly:!0,dependsOn:["state.id"]})],Js.prototype,"resolution",null),(0,w._)([(0,C.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],Js.prototype,"rotation",null),(0,w._)([(0,C.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],Js.prototype,"scale",null),(0,w._)([(0,C.Cb)({constructOnly:!0})],Js.prototype,"spatialReferenceLocked",void 0),(0,w._)([(0,C.Cb)()],Js.prototype,"stationary",null),(0,w._)([(0,C.Cb)({type:Hd.T,readOnly:!0})],Js.prototype,"timeline",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"type",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"updating",null),(0,w._)([(0,C.Cb)({value:null,type:as.Z,dependsOn:["state.id","ready"]})],Js.prototype,"viewpoint",null),(0,w._)([(0,C.Cb)({value:-1,dependsOn:["state.id","ready"]})],Js.prototype,"zoom",null),(0,w._)([(0,C.Cb)({readOnly:!0})],Js.prototype,"navigating",null),(0,w._)([(0,C.Cb)({type:Yu})],Js.prototype,"ui",void 0),Js=(0,w._)([(0,F.j)("esri.views.MapView")],Js);const om=Js;function qu(v){const M=v.getObjectId();return M?`${v.layer?.uid??v.sourceLayer?.uid??"MapView"}/${M}`:`"MapView/${v.uid}`}function uh(v,M,I,R,ee){return pe=>{if(pe instanceof Wt.Z){if(pe.layer===v)ee?.();else{const Me=v.allLayerViews.find(xe=>xe.layer===pe.layer);Me&&R?.(Me)}I(qu(pe))}else{const Me=v.allLayerViews.find(xe=>xe.layer===pe);Me&&M(Me)}}}function ch(v,M){if(v)if((0,ys.TW)(v))for(const I of v)if((0,ys.TW)(I))for(const R of I)M(R);else M(I);else M(v)}var lm=g(32870);const jr="esri-search",Ns={base:`${jr} esri-widget`,loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:`${jr}--multiple-sources`,isLoading:`${jr}--loading`,isSearching:`${jr}--searching`,showSuggestions:`${jr}--show-suggestions`,showSources:`${jr}--sources`,showWarning:`${jr}--warning`,container:`${jr}__container`,input:`${jr}__input`,inputContainer:`${jr}__input-container`,form:`${jr}__form`,submitButton:`${jr}__submit-button`,sourcesButton:`${jr}__sources-button`,clearButton:`${jr}__clear-button`,sourceName:`${jr}__source-name`,suggestionsMenu:`${jr}__suggestions-menu`,suggestionList:`${jr}__suggestions-list`,suggestionListCurrentLocation:`${jr}__suggestions-list--current-location`,sourcesMenu:`${jr}__sources-menu`,source:`${jr}__source`,warningMenu:`${jr}__warning-menu`,warningMenuBody:`${jr}__warning-body`,warningMenuHeader:`${jr}__warning-header`,warningMenuText:`${jr}__warning-text`,noValueText:`${jr}__no-value-text`,esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},fo="esri-search-result-renderer",Mi={base:`${fo} esri-widget`,anchor:"esri-widget__anchor",showMoreResults:`${fo}__more-results--show-more-results`,moreResults:`${fo}__more-results`,moreResultsList:`${fo}__more-results-list`,moreResultsHeader:`${fo}__more-results-header`,moreResultsItem:`${fo}__more-results-item`,moreResultsListHeader:`${fo}__more-results-list-header`};var dh=g(73889),um=g(59680),ec=g(37753);let Hr=class extends((0,Lo.IG)(N.wq)){constructor(v){super(v),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};(0,w._)([(0,C.Cb)()],Hr.prototype,"autoNavigate",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"filter",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"getResults",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"getSuggestions",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"maxResults",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"maxSuggestions",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"minSuggestCharacters",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"outFields",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"placeholder",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"popupEnabled",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"popupTemplate",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"prefix",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"resultGraphicEnabled",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"resultSymbol",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"suggestionsEnabled",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"suffix",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"withinViewEnabled",void 0),(0,w._)([(0,C.Cb)()],Hr.prototype,"zoomScale",void 0),Hr=(0,w._)([(0,F.j)("esri.widgets.Search.SearchSource")],Hr);const tc=Hr;var cm=g(71245),dm=g(78998);const hh=k.Z.getLogger("esri.widgets.Search.support.geometryUtils");function hm(v,M){if(!M)return hh.error("missing-parameter: view is missing."),Promise.reject(new U.Z("searchgeometryutils:missing-parameter","view is missing."));if(!v)return hh.error("missing-parameter: point is missing."),Promise.reject(new U.Z("searchgeometryutils:missing-parameter","point is missing."));if(v.hasZ||"2d"===M.type)return Promise.resolve(v);const I=M?.map?.ground;return I&&I.layers.length?I.queryElevation(v,{cache:M.basemapTerrain?.elevationQueryCache}).then(R=>R.geometry):Promise.resolve(v)}function ph(v){if((0,ce.Wi)(v))return null;switch(v.type){case"point":return v;case"extent":return v.center;case"polygon":return v.centroid;case"multipoint":return v.getPoint(0);case"polyline":return v.getPoint(0,0)}return null}function sc(v,M,I){return(0,ce.Wi)(v)?null:"extent"===v.type?v:"multipoint"===v.type||"polygon"===v.type||"polyline"===v.type?v.extent:"point"===v.type?fh(v,M,I):void 0}function rc(v,M,I){return(0,ce.Wi)(v)||(0,ce.Wi)(M)?null:fh(v.center,M,I)}function fh(v,M,I){const R=v.hasZ?v.z:void 0;return M&&M.map?(I?(0,dm.D9)(M,I):M.extent).clone().centerAt(v).set({zmax:R,zmin:R}):new Tt.Z({xmin:v.x-.25,ymin:v.y-.25,xmax:v.x+.25,ymax:v.y+.25,spatialReference:v.spatialReference,zmin:R,zmax:R})}const pm=/https?:\/\/services.*\.arcgis\.com/i,fm=/(?:\{([^}]+)\})/g,Yo=k.Z.getLogger("esri.widgets.Search.support.layerSearchUtils");function mh(v,M){const{filter:I,withinViewEnabled:R}=v,ee=M&&M.extent;return I&&I.geometry||(R&&ee?ee:void 0)}function yh(v){return v&&v.includes("*")}function gh(v){return nc.apply(this,arguments)}function nc(){return nc=(0,x.Z)(function*(v){v&&(yield v.load())}),nc.apply(this,arguments)}function _h(v){return!(!v.fullText&&!v.where)}function vh(v,M){const I=v?.indexes;return!(!I||!M?.length)&&I.filter(R=>"FullText"===R.indexType).some(R=>{const ee=R.fields?.split(",").map(pe=>pe.trim().toLowerCase())||[];return M.every(pe=>ee.includes(pe.toLowerCase()))})}function Eh({text:v,searchFields:M}){return v.trim().split(" ").filter(I=>!!I.trim()).map(I=>new cm.Z({onFields:M,searchTerm:I,searchType:"prefix"}))}function bh(v){return v?.capabilities?.query?.supportsFullTextSearch??!1}function Mh(v){return v?.capabilities?.query?.supportsPagination??!1}function Ch(v){return v.displayField||v.layer.displayField||function gm(v){return v?.fieldsIndex?.fields?.find(M=>"string"===M.type)?.name??""}(v.layer)}function Ml(v,M){return!(!v||!M?.length)&&M.every(I=>ic(v,I))}function ic(v,M){return!!v.getField(M)}function Oh(v){return v.replace(/\'/g,"''")}function Sa(v,M){const I=M&&M.where;return I?`(${v}) AND (${I})`:v}function Ph({searchTerm:v,layer:M,searchFields:I,filter:R,exactMatch:ee,query:pe,type:Me}){const{definitionExpression:xe,url:ze}=M;let st="";return!pe.fullText&&v&&I&&I.forEach(ut=>{const Ct=M.getField(ut),Gt="function"==typeof M.getFieldDomain&&M.getFieldDomain(ut),Ft=(Gt&&"coded-value"===Gt.type?function vm(v,M,I){let R=null;const{codedValues:ee}=v;return ee&&ee.some(pe=>{const Me=pe.name,xe=I?Me:Me.toLowerCase();return(I?M:M.toLowerCase())===xe&&(R=pe.code.toString(),!0)}),R}(Gt,v,ee):null)||v||null;if(null!==Ft){const ps=function Em({currentTerm:v,field:M,filter:I,exactMatch:R,url:ee,type:pe}){const Me=M.type,xe=M.name;if("string"===Me||"date"===Me||"global-id"===Me){const ze=pm.test(ee),st=ze&&function _m(v){for(let M=0;M<v.length;M++)if(v.charCodeAt(M)>255)return!0;return!1}(v)?"N":"";return Sa(R&&"search"===pe?`${xe} = ${st}'${v}'`:ze?`${xe} LIKE ${st}'${v}%'`:`LOWER(${xe}) LIKE ${st}'${v.toLowerCase()}%'`,I)}if("oid"===Me||"small-integer"===Me||"integer"===Me||"single"===Me||"double"===Me){const ze=Number(v);return isNaN(ze)?null:Sa(`${xe} = ${ze}`,I)}return Sa(`${xe} = ${v}`,I)}({currentTerm:Ft,field:Ct,filter:R,exactMatch:ee,url:ze,type:Me});ps&&(st+=function bm(v,M){return v?` OR (${M})`:`(${M})`}(st,ps))}}),xe&&st?`(${xe}) AND (${st})`:xe||st}function Sh(v,M,I){const R=v.sourceLayer,{attributes:ee}=v,pe="function"==typeof R.getFieldDomain&&R.getFieldDomain(I);if(M)return(0,Zn.n)(M,ee);if(I&&ee){const Me=R.getField(I),xe=function Cm(v,M){return v[Object.keys(v).find(I=>I.toLowerCase()===M.toLowerCase())]}(ee,I);return null==xe?"":pe&&"coded-value"===pe.type?function Mm(v,M){let I=null;const{codedValues:R}=v;return R&&R.length&&R.some(ee=>ee.code===M&&(I=ee.name,!0)),I}(pe,xe):"date"===Me?.type?(0,gt.p6)(new Date(xe)):"number"==typeof xe?xe.toString():"string"!=typeof xe?"":xe.trim()}return""}var oc;let qn=oc=class extends tc{constructor(v){super(v),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(M,I)=>function mm(v,M){const{exactMatch:I=!1,location:R,maxResults:ee,spatialReference:pe,source:Me,sourceIndex:xe,suggestResult:ze,view:st}=v,{layer:ut,filter:Ct,zoomScale:Gt}=Me,Ft=st&&st.scale,ps=mh(Me,st),Ps=M&&M.signal;return gh(ut).then(()=>{const Is=ut.popupTemplate;return Is?Is.getRequiredFields(ut.fieldsIndex):null}).then(Is=>{const{objectIdField:zs,returnZ:fr}=ut,Ys=Ch(Me);if(!ic(ut,Ys))throw Yo.error("invalid-field: displayField is invalid."),new U.Z("getResults():invalid-field","displayField is invalid.");const rr=Me.outFields||(Is&&Is.length?Is:[Ys]),Mr=yh(rr);if(rr.includes(zs)||Mr||rr.push(zs),ut.floorInfo?.floorField&&rr.push(ut.floorInfo.floorField),!Mr&&!Ml(ut,rr))throw Yo.error("invalid-field: outField is invalid."),new U.Z("getResults():invalid-field","outField is invalid.");const Sr=ut.createQuery(),{orderByFields:oi}=Me;if(oi&&(Sr.orderByFields=oi),pe){Sr.outSpatialReference=pe;const Bn=1/(0,Et.c9)(pe);Bn&&(Sr.maxAllowableOffset=Bn)}const Ji="mesh"===ut.geometryType||"multipatch"===ut.geometryType;if(Sr.returnZ=ut.capabilities?.data?.supportsZ&&!Ji&&!1!==fr,Sr.returnGeometry=!0,Sr.multipatchOption=Ji?"xyFootprint":null,rr&&(Sr.outFields=rr),R)Sr.geometry=R;else if(ze.key)Sr.objectIds=[ze.key];else{const Bn=Me.searchFields||[Ys];if(!Ml(ut,Bn))throw Yo.error("invalid-field: search field is invalid."),new U.Z("getResults():invalid-field","search field is invalid.");if(Mh(ut)&&(Sr.num=ee),ps&&(Sr.geometry=ps),!ze.text.trim())return[];const Yi=ze.text,{prefix:hc="",suffix:Ol=""}=Me,pc=Oh(`${hc}${Yi}${Ol}`);bh(ut)&&vh(ut,Bn)&&!I&&Yi&&(Sr.fullText=Eh({text:Yi,searchFields:Bn}));const Pl=Ph({searchTerm:pc,layer:ut,searchFields:Bn,filter:Ct,exactMatch:I,query:Sr,type:"search"});if(Sr.where=Pl,!_h(Sr))return[]}return ut.queryFeatures(Sr,{signal:Ps}).then(Bn=>function Tm(v,M,I,R,ee,pe,Me){return v.features.map(xe=>function Sm(v,M,I,R,ee,pe,Me){const xe=v.clone(),ze=v.sourceLayer,st=ze&&ze.objectIdField,ut=st&&v.attributes[st],Ct=Sh(v,I.searchTemplate,ee),Gt=sc(xe.geometry,M,pe),Ft="number"==typeof Me?rc((0,J.d9)(Gt),M,Me):Gt,ps=v.clone();return(0,ce.pC)(Ft)&&(ps.geometry=Nl.Z.fromExtent(Ft)),{extent:Ft,target:ps,feature:xe,key:ut,name:Ct,sourceIndex:R}}(xe,M,I,R,ee,pe,Me))}(Bn,st,Me,xe,Ys,Ft,Gt))})}({source:this,...M},I),this.getSuggestions=(M,I)=>function ym(v,M){const{source:I,spatialReference:R,view:ee,suggestTerm:pe,maxSuggestions:Me,sourceIndex:xe,exactMatch:ze}=v,{layer:st,filter:ut}=I,Ct=M&&M.signal,Gt=mh(I,ee);return gh(st).then(()=>{if(!Mh(st))return[];const Ft=Ch(I),ps=I.searchFields||[Ft],Ps=[];I.suggestionTemplate?I.suggestionTemplate.replace(fm,(Gn,Bn)=>(Ps.push(Bn),Gn)):Ps.push(Ft);const Is=yh(Ps);Ps.includes(st.objectIdField)||Is||Ps.push(st.objectIdField);const zs=ic(st,Ft),fr=Is||Ml(st,Ps),Ys=Ml(st,ps);if(!zs)throw Yo.error("invalid-field: displayField is invalid."),new U.Z("getSuggestions():invalid-field","displayField is invalid.");if(!fr)throw Yo.error("invalid-field: outField is invalid."),new U.Z("getSuggestions():invalid-field","outField is invalid.");if(!Ys)throw Yo.error("invalid-field: search field is invalid."),new U.Z("getSuggestions():invalid-field","search field is invalid.");const ar=st.createQuery(),{orderByFields:rr}=I;if(rr&&(ar.orderByFields=rr),ar.outSpatialReference=R,ar.returnGeometry=!1,ar.num=Me,ar.outFields=Ps,Gt&&(ar.geometry=Gt),!pe.trim())return[];const{prefix:Mr="",suffix:Sr=""}=I,oi=Oh(`${Mr}${pe}${Sr}`);bh(st)&&vh(st,ps)&&!ze&&pe&&(ar.fullText=Eh({text:pe,searchFields:ps}));const Ji=Ph({searchTerm:oi,layer:st,searchFields:ps,filter:ut,exactMatch:ze,query:ar,type:"suggest"});return ar.where=Ji,_h(ar)?st.queryFeatures(ar,{signal:Ct}).then(Gn=>function Pm(v,M,I,R){return v.features.map(ee=>function Om(v,M,I,R){const ee=v.sourceLayer,{attributes:pe}=v,{objectIdField:Me}=ee,xe=pe[Me];return{text:Sh(v,M.suggestionTemplate,R),key:xe,sourceIndex:I}}(ee,M,I,R))}(Gn,I,xe,Ft)):[]})}({source:this,...M},I)}set layer(v){this._set("layer",v),v&&v.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(v){this._overrideIfSome("name",v)}clone(){return new oc({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,J.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?(0,J.d9)(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){return this.layer.fieldsIndex.fields.find(v=>"string"===v.type)?.name??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:v,searchFields:M}=this;return v.loaded?`: ${(M||[this._getDisplayField()]).map(I=>{const R=v.getField(I);return R&&R.alias||I}).join(", ")}`:""}_getLayerTitle(){const{layer:v}=this;if(!v)return;const{title:M}=v;return M?`${M}${this._getSearchFieldsString()}`:void 0}};(0,w._)([(0,C.Cb)({json:{read:{source:"field.name"},write:{target:"field.name"}}})],qn.prototype,"displayField",void 0),(0,w._)([(0,C.Cb)({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],qn.prototype,"exactMatch",void 0),(0,w._)([(0,C.Cb)({value:null})],qn.prototype,"layer",null),(0,w._)([(0,C.Cb)()],qn.prototype,"name",null),(0,w._)([(0,C.Cb)({type:[String],json:{write:!0}})],qn.prototype,"orderByFields",void 0),(0,w._)([(0,C.Cb)()],qn.prototype,"searchFields",void 0),(0,w._)([(0,C.Cb)()],qn.prototype,"searchTemplate",void 0),(0,w._)([(0,C.Cb)()],qn.prototype,"suggestionTemplate",void 0),qn=oc=(0,w._)([(0,F.j)("esri.widgets.Search.LayerSearchSource")],qn);const Qo=qn;var Ci=g(25820);let zi=class extends N.wq{constructor(v){super(v),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],zi.prototype,"address",void 0),(0,w._)([(0,C.Cb)({type:Object,json:{write:!0}})],zi.prototype,"attributes",void 0),(0,w._)([(0,C.Cb)({type:Tt.Z,json:{write:!0}})],zi.prototype,"extent",void 0),(0,w._)([(0,C.Cb)({type:It.Z,json:{write:!0}})],zi.prototype,"location",void 0),(0,w._)([(0,C.Cb)({type:Number,json:{write:!0}})],zi.prototype,"score",void 0),zi=(0,w._)([(0,F.j)("esri.rest.support.AddressCandidate")],zi);const Th=zi;var ac=g(80183);let ln=class extends N.wq{constructor(v){super(v),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};(0,w._)([(0,C.Cb)({type:Object,json:{write:!0}})],ln.prototype,"address",void 0),(0,w._)([(0,C.Cb)(ac.q)],ln.prototype,"apiKey",void 0),(0,w._)([(0,C.Cb)({type:[String],json:{read:{source:"category",reader:v=>v?v.split(","):null},write:{target:"category",writer:(v,M)=>{M.category=v?v.join(","):null}}}})],ln.prototype,"categories",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],ln.prototype,"countryCode",void 0),(0,w._)([(0,C.Cb)({type:Boolean,json:{write:!0}})],ln.prototype,"forStorage",void 0),(0,w._)([(0,C.Cb)({type:It.Z,json:{write:{writer:(v,M)=>{M.location=v?v.clone().normalize():null}}}})],ln.prototype,"location",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],ln.prototype,"locationType",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],ln.prototype,"magicKey",void 0),(0,w._)([(0,C.Cb)({type:Number,json:{write:!0}})],ln.prototype,"maxLocations",void 0),(0,w._)([(0,C.Cb)({type:[String],json:{write:{writer:(v,M)=>{M.outFields=v?v.join(","):null}}}})],ln.prototype,"outFields",void 0),(0,w._)([(0,C.Cb)({type:Fo.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ln.prototype,"outSpatialReference",void 0),(0,w._)([(0,C.Cb)({type:Tt.Z,json:{write:{writer:(v,M)=>{const I=v?v.shiftCentralMeridian():null;M.searchExtent=I}}}})],ln.prototype,"searchExtent",void 0),ln=(0,w._)([(0,F.j)("esri.rest.support.AddressToLocationsParameters")],ln),ln.from=(0,D.se)(ln);const Ih=ln;function lc(){return lc=(0,x.Z)(function*(v,M,I){M=Ih.from(M);const R=(0,Ci.en)(v),{address:ee,...pe}=M.toJSON(),Me={...ee,...pe,f:"json"},xe=(0,Ci.cv)({...R.query,...Me}),ze=(0,Ci.lA)(xe,I);return(0,ka.default)(`${R.path}/findAddressCandidates`,ze).then(Am)}),lc.apply(this,arguments)}function Am({data:v}){if(!v)return[];const{candidates:M,spatialReference:I}=v;return M?M.map(R=>{if(!R)return;const{extent:ee,location:pe}=R,Me=!ee||function wm(v){return v&&"number"==typeof v.xmin&&"number"==typeof v.ymin&&"number"==typeof v.xmax&&"number"==typeof v.ymax}(ee);return function Im(v){return!!v&&"number"==typeof v.x&&"number"==typeof v.y}(pe)&&Me?(ee&&(ee.spatialReference=I),pe&&(pe.spatialReference=I),Th.fromJSON(R)):void 0}):[]}let Oi=class extends N.wq{constructor(v){super(v),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};(0,w._)([(0,C.Cb)(ac.q)],Oi.prototype,"apiKey",void 0),(0,w._)([(0,C.Cb)({type:It.Z,json:{write:{writer:(v,M)=>{const I=v?v.clone().normalize():null;M.location=void 0!==I?I:null}}}})],Oi.prototype,"location",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Oi.prototype,"locationType",void 0),(0,w._)([(0,C.Cb)({type:Fo.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Oi.prototype,"outSpatialReference",void 0),Oi=(0,w._)([(0,F.j)("esri.rest.support.LocationToAddressParameters")],Oi),Oi.from=(0,D.se)(Oi);const wh=Oi;function uc(){return uc=(0,x.Z)(function*(v,M,I){M=wh.from(M);const R=(0,Ci.en)(v),ee={...M.toJSON(),f:"json"},pe=(0,Ci.cv)({...R.query,...ee}),Me=(0,Ci.lA)(pe,I);return(0,ka.default)(`${R.path}/reverseGeocode`,Me).then(Lm)}),uc.apply(this,arguments)}function Lm({data:v}){if(!v)return;const{address:M,location:I}=v;return Th.fromJSON({address:M&&M.Match_addr||"",attributes:M||{},location:I,score:100})}let Xo=class extends N.wq{constructor(v){super(v),this.isCollection=null,this.magicKey=null,this.text=null}};(0,w._)([(0,C.Cb)({type:Boolean,json:{write:!0}})],Xo.prototype,"isCollection",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Xo.prototype,"magicKey",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Xo.prototype,"text",void 0),Xo=(0,w._)([(0,F.j)("esri.rest.support.SuggestionCandidate")],Xo);const Rm=Xo;let Fn=class extends N.wq{constructor(v){super(v),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};(0,w._)([(0,C.Cb)(ac.q)],Fn.prototype,"apiKey",void 0),(0,w._)([(0,C.Cb)({type:[String],json:{read:{source:"category",reader:v=>v?v.split(","):null},write:{target:"category",writer:(v,M)=>{M.category=v?v.join(","):null}}}})],Fn.prototype,"categories",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Fn.prototype,"countryCode",void 0),(0,w._)([(0,C.Cb)({type:It.Z,json:{write:{writer:(v,M)=>{M.location=v?v.clone().normalize():null}}}})],Fn.prototype,"location",void 0),(0,w._)([(0,C.Cb)({type:Number,json:{write:!0}})],Fn.prototype,"maxSuggestions",void 0),(0,w._)([(0,C.Cb)({type:Fo.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Fn.prototype,"outSpatialReference",void 0),(0,w._)([(0,C.Cb)({type:Tt.Z,json:{write:{writer:(v,M)=>{const I=v?v.shiftCentralMeridian():null;M.searchExtent=JSON.stringify(I)}}}})],Fn.prototype,"searchExtent",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Fn.prototype,"text",void 0),Fn=(0,w._)([(0,F.j)("esri.rest.support.SuggestLocationsParameters")],Fn),Fn.from=(0,D.se)(Fn);const Dh=Fn;function cc(){return cc=(0,x.Z)(function*(v,M,I){const R=(0,Ci.en)(v),ee={...(M=Dh.from(M)).toJSON(),f:"json"},pe=(0,Ci.cv)({...R.query,...ee}),Me=(0,Ci.lA)(pe,I);return(0,ka.default)(`${R.path}/suggest`,Me).then(Um)}),cc.apply(this,arguments)}function Um(v){const{data:M}=v;if(!M)return[];const{suggestions:I}=M;return I?I.map(R=>new Rm(R)):[]}const Bm=3e5;function Ah(v,M){if(M.localSearchDisabled)return null;const I=v?.scale;return"number"==typeof I&&I<=Bm?v.get("extent.center"):null}function xh(v){return!!v&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(v)}function Lh(v,M){const{filter:I,withinViewEnabled:R}=v,pe=M&&M.extent;return sc(I&&I.geometry,M,M&&M.scale)||(R&&pe?pe:void 0)}function Rh(v,M){return v.filter(Boolean).map(I=>function km(v,M){const{key:I,scale:R,sourceIndex:ee,view:pe,zoomScale:Me,defaultZoomScale:xe}=M,{attributes:ze,extent:st,location:ut,address:Ct}=v,Gt=new Wt.Z({geometry:ut,attributes:ze}),Ft=st||ut,ps=sc(Ft,pe,R),Ps="number"==typeof Me?rc(ps,pe,Me):"number"==typeof xe&&"point"===Ft.type?rc(ps,pe,xe):ps,zs=Ct||(ut?`${ut.x},${ut.y}`:""),fr=Gt.clone();return(0,ce.pC)(Ps)&&(fr.geometry=Nl.Z.fromExtent(Ps)),{extent:Ps,feature:Gt,target:fr,key:I,name:zs,sourceIndex:ee}}(I,M))}var dc;let dn=dc=class extends tc{constructor(v){super(v),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(M,I)=>function Wm(v,M){return v.location?function Vm(v,M){const{source:I,spatialReference:R,location:ee,sourceIndex:pe,view:Me}=v,{apiKey:xe,url:ze,zoomScale:st,defaultZoomScale:ut}=I,Ct=Me&&Me.scale,Gt=M&&M.signal,Ft=new wh;return Ft.location=ee,xe&&(Ft.apiKey=xe),R&&(Ft.outSpatialReference=R),function xm(v,M,I){return uc.apply(this,arguments)}(ze,Ft,{signal:Gt}).then(ps=>Rh([ps],{sourceIndex:pe,scale:Ct,view:Me,zoomScale:st,defaultZoomScale:ut})).catch(()=>[])}(v,M):function zm(v,M){const{source:I,suggestResult:R,spatialReference:ee,view:pe,maxResults:Me,sourceIndex:xe}=v,ze=I&&I.zoomScale,st=I&&I.defaultZoomScale;if(!R.text.trim())return Promise.resolve(null);const Gt=`${!R.key&&I.prefix?I.prefix:""}${R.text}${!R.key&&I.suffix?I.suffix:""}`,Ft=new Ih,{apiKey:ps,url:Ps}=I,Is=pe&&pe.scale,zs=Lh(I,pe),fr=M&&M.signal;if(ps&&(Ft.apiKey=ps),!Ps)return Promise.resolve(null);I.categories&&(Ft.categories=I.categories),I.locationType&&(Ft.locationType=I.locationType),ee&&(Ft.outSpatialReference=ee);const Ys=Ah(pe,I);Ys&&(Ft.location=Ys),Ft.maxLocations=Me,zs&&(Ft.searchExtent=(0,ce.Wg)(zs)),I.countryCode&&(Ft.countryCode=I.countryCode);const{key:ar}=R,rr=`${ar}`;return ar&&(Ft.magicKey=rr),Ft.address={},Ft.address[I.singleLineFieldName||"Single Line Input"]=Gt,I.outFields&&(Ft.outFields=I.outFields),function Dm(v,M,I){return lc.apply(this,arguments)}(Ps,Ft,{signal:fr}).then(Mr=>Rh(Mr,{key:rr,scale:Is,sourceIndex:xe,view:pe,zoomScale:ze,defaultZoomScale:st}))}(v,M)}({source:this,...M},I),this.getSuggestions=(M,I)=>function Nm(v,M){const{source:I,spatialReference:R,view:ee,suggestTerm:pe,maxSuggestions:Me,sourceIndex:xe}=v,ze=new Dh,{apiKey:st,url:ut}=I,Ct=Lh(I,ee),Gt=M&&M.signal;if(!ut)return Promise.resolve(null);st&&(ze.apiKey=st),I.categories&&(ze.categories=I.categories),R&&(ze.outSpatialReference=R);const Ft=Ah(ee,I);if(Ft&&(ze.location=Ft),!pe.trim())return Promise.resolve(null);const{prefix:ps="",suffix:Ps=""}=I;return ze.text=`${ps}${pe}${Ps}`,Ct&&(ze.searchExtent=(0,ce.Wg)(Ct)),ze.maxSuggestions=Me,I.countryCode&&(ze.countryCode=I.countryCode),function jm(v,M,I){return cc.apply(this,arguments)}(ut,ze,{signal:Gt}).then(zs=>function Hm(v,M){return v.map(I=>function Gm(v,M){return{text:v.text,key:v.magicKey,sourceIndex:M}}(I,M))}(zs,xe))}({source:this,...M},I)}clone(){return new dc({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?(0,J.d9)(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?(0,J.d9)(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};(0,w._)([(0,C.Cb)()],dn.prototype,"apiKey",void 0),(0,w._)([(0,C.Cb)()],dn.prototype,"categories",void 0),(0,w._)([(0,C.Cb)()],dn.prototype,"countryCode",void 0),(0,w._)([(0,C.Cb)({json:{write:!0}})],dn.prototype,"defaultZoomScale",void 0),(0,w._)([(0,C.Cb)()],dn.prototype,"localSearchDisabled",void 0),(0,w._)([(0,C.Cb)()],dn.prototype,"locationType",void 0),(0,w._)([(0,C.Cb)({json:{write:!0}})],dn.prototype,"name",void 0),(0,w._)([(0,C.Cb)({json:{write:!0}})],dn.prototype,"placeholder",void 0),(0,w._)([(0,C.Cb)()],dn.prototype,"searchTemplate",void 0),(0,w._)([(0,C.Cb)({json:{write:!0}})],dn.prototype,"singleLineFieldName",void 0),(0,w._)([(0,C.Cb)({json:{read:{source:"suggest"},write:{target:"suggest"}}})],dn.prototype,"suggestionsEnabled",void 0),(0,w._)([(0,C.Cb)({json:{write:!0}})],dn.prototype,"url",void 0),(0,w._)([(0,C.Cb)({json:{write:!0}})],dn.prototype,"zoomScale",void 0),dn=dc=(0,w._)([(0,F.j)("esri.widgets.Search.LocatorSearchSource")],dn);const jh=dn;var mo=g(63321);new mo.X({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});var yo=g(71182);new mo.X({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let go=class extends N.wq{constructor(v){super(v),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],go.prototype,"deviationUnit",void 0),(0,w._)([(0,C.Cb)({json:{read:{reader:v=>v?v.map(M=>(0,yo.im)(M)).filter(ce.pC):null},write:{writer:(v,M)=>{M.geometries=v?.map(I=>I.toJSON())??null}}}})],go.prototype,"geometries",void 0),(0,w._)([(0,C.Cb)({type:Number,json:{write:!0}})],go.prototype,"maxDeviation",void 0),go=(0,w._)([(0,F.j)("esri.rest.support.GeneralizeParameters")],go),go.from=(0,D.se)(go),new mo.X({preserveShape:"preserve-shape"});let Gi=class extends N.wq{constructor(v){super(v),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Gi.prototype,"calculationType",void 0),(0,w._)([(0,C.Cb)({type:Boolean,json:{write:!0}})],Gi.prototype,"geodesic",void 0),(0,w._)([(0,C.Cb)({json:{write:!0}})],Gi.prototype,"lengthUnit",void 0),(0,w._)([(0,C.Cb)({type:[_c.Z],json:{read:{reader:v=>v?v.map(M=>(0,yo.im)(M)):null},write:{writer:(v,M)=>{M.polylines=v.map(I=>I.toJSON())}}}})],Gi.prototype,"polylines",void 0),Gi=(0,w._)([(0,F.j)("esri.rest.support.LengthsParameters")],Gi),Gi.from=(0,D.se)(Gi),new mo.X({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),new mo.X({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let Pi=class extends N.wq{constructor(v){super(v),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};(0,w._)([(0,C.Cb)({type:Number,json:{write:!0}})],Pi.prototype,"bevelRatio",void 0),(0,w._)([(0,C.Cb)({json:{read:{reader:v=>v?v.map(M=>(0,yo.im)(M)).filter(ce.pC):null},write:{writer:(v,M)=>{M.geometries=v?.map(I=>I.toJSON())??null}}}})],Pi.prototype,"geometries",void 0),(0,w._)([(0,C.Cb)({type:Number,json:{write:!0}})],Pi.prototype,"offsetDistance",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Pi.prototype,"offsetHow",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Pi.prototype,"offsetUnit",void 0),Pi=(0,w._)([(0,F.j)("esri.rest.support.OffsetParameters")],Pi),Pi.from=(0,D.se)(Pi);var ey=g(46395);new mo.X({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let Hi=class extends N.wq{constructor(v){super(v),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};(0,w._)([(0,C.Cb)({json:{read:{reader:v=>v?v.map(M=>(0,yo.im)(M)).filter(ce.pC):null},write:{writer:(v,M)=>{M.geometries1=v?.map(I=>I.toJSON())??null}}}})],Hi.prototype,"geometries1",void 0),(0,w._)([(0,C.Cb)({json:{read:{reader:v=>v?v.map(M=>(0,yo.im)(M)).filter(ce.pC):null},write:{writer:(v,M)=>{M.geometries2=v?.map(I=>I.toJSON())??null}}}})],Hi.prototype,"geometries2",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Hi.prototype,"relation",void 0),(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],Hi.prototype,"relationParameter",void 0),Hi=(0,w._)([(0,F.j)("esri.rest.support.RelationParameters")],Hi),Hi.from=(0,D.se)(Hi),new mo.X({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let _o=class extends N.wq{constructor(v){super(v),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};(0,w._)([(0,C.Cb)({type:String,json:{write:!0}})],_o.prototype,"extendHow",void 0),(0,w._)([(0,C.Cb)({type:[_c.Z],json:{read:{reader:v=>v?v.map(M=>(0,yo.im)(M)):null},write:{writer:(v,M)=>{M.polylines=v.map(I=>I.toJSON())}}}})],_o.prototype,"polylines",void 0),(0,w._)([(0,C.Cb)({json:{read:{reader:v=>v?(0,yo.im)(v):null},write:{writer:(v,M)=>{M.trimExtendTo=v.toJSON()}}}})],_o.prototype,"trimExtendTo",void 0),_o=(0,w._)([(0,F.j)("esri.rest.support.TrimExtendParameters")],_o),_o.from=(0,D.se)(_o);var ry=g(19569);const Uh=k.Z.getLogger("esri.widgets.support.geolocationUtils"),ny={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function Fh(){return function iy(){const v=(0,X.Z)("esri-geolocation");return v||Uh.warn("geolocation-unsupported","Geolocation unsupported."),v}()&&function oy(){const v=window.isSecureContext;return v||Uh.warn("insecure-context","Geolocation requires a secure origin."),v}()}var py=g(79409),fy=g(52289);function hn(v,M){return v.hasOwnProperty(M)&&null!=v[M]&&""!==v[M]}const Bh="esri.widgets.Search.SearchViewModel",Si=k.Z.getLogger(Bh),Wh="highlight",Cl=V.Z.ofType({key:v=>v.layer?"layer":"locator",base:tc,typeMap:{layer:Qo,locator:jh}}),Nh=Fo.Z.WGS84,gy=/<(?:.|\s)*?>/g;let or=class extends(vu(le.Z.EventedMixin(he.Z))){constructor(v){super(v),this._handles=new ls.Z,this._gotoController=null,this._searching=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new Cl,this.defaultSymbols={point:new py.Z({url:(0,Aa.V)("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new Rl.Z({color:[130,130,130,1],width:2}),polygon:new Jc.Z({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=ec.Z.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new Cl,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){var v=this;const M=function(){var I=(0,x.Z)(function*(){const R=yield(0,um.ME)("esri/widgets/Search/t9n/Search");v.messages=R,v.defaultPopupTemplate=new dh.Z({title:R.searchResult,content:"{Match_addr}"})});return function(){return I.apply(this,arguments)}}();M(),this._handles.add([(0,bt.YP)(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),bt.nn),(0,Ya.qe)(M)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0}set activeSourceIndex(v){this._overrideIfSome("activeSourceIndex",v)}get allPlaceholder(){return this.messages?.allPlaceholder}set allPlaceholder(v){this._overrideIfSome("allPlaceholder",v)}get allSources(){const{sources:v,defaultSources:M,includeDefaultSources:I}=this,R="function"==typeof I?I.call(null,{sources:v,defaultSources:M}):I?M.concat(v):v,ee=this._get("allSources")||new Cl;return ee.removeAll(),ee.addMany(R.filter(Boolean)),ee}get locationEnabled(){return this._get("locationEnabled")||Fh()}set locationEnabled(v){if(void 0===v)return void this._clearOverride("locationEnabled");const M=Fh();if(v&&!M){const I=new U.Z("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Si.error(I)}this._override("locationEnabled",!!v&&M)}get placeholder(){const{allSources:v,activeSourceIndex:M,allPlaceholder:I}=this;if(-1===M)return I;const R=v.at(M);return R?R.placeholder:""}set searchTerm(v){this._set("searchTerm",v||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==v&&this._set("selectedSuggestion",null),""===v&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}get updating(){return null!=this._updatingPromise}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(v,M){this.emit("search-start"),this.clearGraphics();const I=this._createSuggestionForSearch(v),R=this.when().then(()=>this._getResultsFromSources(I,M).then(ee=>{if((0,ce.Wg)(M?.signal)?.aborted)return null;const pe={activeSourceIndex:this.activeSourceIndex,searchTerm:I.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(pe,ee,I);const Me=this._getFirstResult(pe.results),xe=(I.location&&Me?Me.name:I.text).replace(gy,"");return this._set("searchTerm",xe),(I.key&&"number"==typeof I.sourceIndex||I.location)&&this._set("selectedSuggestion",I),this._set("results",pe.results),this._set("resultCount",pe.results.reduce((ze,st)=>ze+st.results.length,0)),this.emit("search-complete",pe),this._selectFirstResult(Me).then(()=>pe)})).then(ee=>(this._clearSearching(),ee),ee=>{throw this._clearSearching(),ee});return this._searching=R,R}searchNearby(v){if(!this.locationEnabled){const I=new U.Z("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return Si.error(I),Promise.reject(I)}const M=function ay(v){return v||(v=ny),new Promise((I,R)=>{setTimeout(()=>R(new U.Z("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(I,R,v)})}().then(I=>function ly(v,M){const{position:I,view:R}=v,ee=function uy(v){const M=v&&v.coords||{};return v&&{coords:{accuracy:M.accuracy,altitude:M.altitude,altitudeAccuracy:M.altitudeAccuracy,heading:M.heading,latitude:M.latitude,longitude:M.longitude,speed:M.speed},timestamp:v.timestamp}}(I)?.coords;if(!ee)throw new U.Z("geometry-service:no-coords","Geolocation has no coordinates");return function dy(v,M,I){if(!M)return Promise.resolve(v);const R=M.spatialReference;return R.isWGS84?Promise.resolve(v):R.isWebMercator?Promise.resolve((0,nl.$)(v)):function hy(v){if(Ae.default.geometryServiceUrl)return Promise.resolve(Ae.default.geometryServiceUrl);const M=ec.Z.getDefault();return M.load(v).catch(()=>{}).then(()=>M.get("helperServices.geometry.url"))}(I).then(ee=>{if(!ee)throw new U.Z("geometry-service:missing-url","Geometry service URL is missing");const pe=new ry.Z({geometries:[v],outSpatialReference:R});return(0,ey.i)(ee,pe,I).then(Me=>Me[0])})}(function cy({longitude:v,latitude:M,altitude:I}){return new It.Z({longitude:v,latitude:M,z:I||void 0,spatialReference:{wkid:4326}})}(ee),R,M)}({position:I,view:this.view},v)).then(I=>this.search(I,v));return this._searching=M,M.catch(()=>{}).then(()=>this._clearSearching()),M}select(v){if(this.clearGraphics(),!v){const zs=new U.Z("select:missing-parameter","Cannot select without a searchResult.",{searchResult:v});return Si.error(zs),Promise.reject(zs)}const{view:M}=this,I=hn(v,"sourceIndex")?v.sourceIndex:this._getSourceIndexOfResult(v),R=this.allSources.at(I);if(!R){const zs=new U.Z("select:missing-source","Cannot select without a source.",{source:R});return Si.error(zs),Promise.reject(zs)}const ee=R instanceof Qo?this._getLayerSourcePopupTemplate(R):R.popupTemplate,pe=R.resultSymbol||this._getDefaultSymbol(v),Me=hn(R,"resultGraphicEnabled")?R.resultGraphicEnabled:this.resultGraphicEnabled,xe=hn(R,"autoNavigate")?R.autoNavigate:this.autoNavigate,ze=hn(R,"popupEnabled")?R.popupEnabled:this.popupEnabled,st=ze?ee||this.popupTemplate||this.defaultPopupTemplate:null,{feature:ut}=v;if(!ut){const zs=new U.Z("select:missing-feature","Cannot select without a feature.",{feature:ut});return Si.error(zs),Promise.reject(zs)}const{attributes:Ct,geometry:Gt,layer:Ft,sourceLayer:ps}=ut,Ps=ph(Gt),Is={layerViewQuery:this._getLayerView(ut),elevationQuery:M&&(0,ce.pC)(Ps)?hm(Ps,M).catch(()=>Ps):Promise.resolve(Ps)};return(0,z.as)(Is).then(zs=>{const fr=zs.layerViewQuery.value,Ys=zs.elevationQuery.value;pe instanceof fy.Z&&(pe.text=v.name);const ar=M&&xe?v.target||v.extent:null;return((0,ce.pC)(ar)?this._goToSearchResult(ar):Promise.resolve()).then(()=>{const rr=fr?ut:new Wt.Z({geometry:Gt,symbol:pe,attributes:Ct,layer:Ft,sourceLayer:ps,popupTemplate:st}),Mr=ze&&this.view?.popup,Sr=Mr&&rr.getEffectivePopupTemplate(Mr.defaultPopupTemplateEnabled);return Sr&&M.popup.open({features:[rr],location:Ys}),fr&&_u(fr)&&!Sr&&this._highlightFeature({graphic:rr,layerView:fr}),!fr&&Me&&M&&M.graphics.push(rr),this._setResultFloor(v),this._set("selectedResult",v),this._set("resultGraphic",rr),this.emit("select-result",{result:v,source:R,sourceIndex:I}),v})})}suggest(v,M,I){const R=v||this.searchTerm;return this.emit("suggest-start",{searchTerm:R}),this._suggestTimer(M,I).then(()=>this._suggestImmediate(R,I).then(ee=>(this._set("suggestions",ee.results),this._set("suggestionCount",ee.results.reduce((pe,Me)=>pe+Me.results.length,0)),this.emit("suggest-complete",ee),ee)))}when(){var v=this;return(0,x.Z)(function*(){yield(0,bt.N1)(()=>!v.updating)})()}_update(){var v=this;return(0,x.Z)(function*(){const{portal:M,view:I}=v;if(v.includeDefaultSources){const R=v._updatingPromise=(0,z.as)([M?.load(),I?.when()]);if(v.destroyed||(yield R,R!==v._updatingPromise))return}yield(0,bt.N1)(()=>v.messages),v.destroyed||v._updateDefaultSources(),v._updatingPromise=null})()}_clearSearching(){this._searching=null}_convertHelperServices(){const v=this.portal?.helperServices?.geocode;return v?v.map(M=>{if(!1===M.placefinding)return;const I=Ae.default.apiKey&&xh(M.url)?{url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}:null,R=jh.fromJSON({...M,...I}),ee=R.url;return(xh(ee)||function $m(v){return!!v&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(v)}(ee)||function Zm(v){return!!v&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(v)}(ee))&&R.set({singleLineFieldName:"SingleLine",outFields:R.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:R.placeholder||this.messages.placeholder,defaultZoomScale:"number"==typeof R.defaultZoomScale?R.defaultZoomScale:2500}),R.singleLineFieldName?R:void 0}).filter(Boolean):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(v=>v?.destroy()),this._createdFeatureLayers=[]}_getLayerSources(v,M){const I=this.view?.map;return v.map(R=>{const ee=I.findLayerById(R.id);if(!ee)return;const pe=this._getLayerJSON(R),Me=Qo.fromJSON(pe);return Me.placeholder=M,this._getLayer(ee,pe).then(xe=>{Me.layer=xe}),Me}).filter(Boolean).toArray()}_getTableSources(v,M){const I=this.view?.map;return v.map(R=>{const ee=I.findTableById(R.id);if(!ee)return;const pe=this._getLayerJSON(R),Me=Qo.fromJSON(pe);return Me.placeholder=M,this._getLayer(ee,pe).then(xe=>{Me.layer=xe}),Me}).filter(Boolean).toArray()}_convertApplicationProperties(){const v=this.view?.map,M=v?.applicationProperties?.viewing?.search;if(!M)return[];const{enabled:I,hintText:R,layers:ee,tables:pe}=M;return I?[...this._getLayerSources(ee,R),...this._getTableSources(pe,R)]:[]}_getSubLayer(v,M){var I=this;return(0,x.Z)(function*(){if(yield v.load(),!v.allSublayers)throw new Error;const R=v.allSublayers.find(pe=>pe.id===M.subLayer);if(!R)throw new Error;const ee=yield R.createFeatureLayer();return I._createdFeatureLayers.push(ee),ee})()}_getBuildingSubLayer(v,M){return(0,x.Z)(function*(){yield v.load();const I=v.allSublayers.find(R=>R.id===M.subLayer);if("building-component"!==I?.type)throw new Error;if(yield I.load(),null==I.associatedLayer)throw new Error;return yield I.associatedLayer.load(),I})()}_getLayer(v,M){return"feature"===v.type||"scene"===v.type||"csv"===v.type||"geojson"===v.type||"ogc-feature"===v.type?Promise.resolve(v):"map-image"===v.type?this._getSubLayer(v,M).catch(()=>{const I=new U.Z("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:v});return Si.error(I),null}):"building-scene"===v.type?this._getBuildingSubLayer(v,M):Promise.resolve(null)}_getLayerJSON(v){return"function"==typeof v.toJSON?v.toJSON():v}_updateDefaultSources(){const{defaultSources:v,includeDefaultSources:M}=this;this._destroyFeatureLayers(),v.removeAll(),M&&v.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){const v=this.view?.popup,{resultGraphic:M}=this;if(!v||!M)return;const{selectedFeature:I}=v;I&&I===M&&v.close()}_suggestTimer(v,M){return(0,z.e4)(v??this.suggestionDelay,null,M&&M.signal)}_createLocationForSearch(v){return v instanceof Wt.Z?ph(v.geometry):v instanceof It.Z?v:Array.isArray(v)&&2===v.length?new It.Z({longitude:v[0],latitude:v[1]}):null}_createSuggestionForSearch(v){if(v&&hn(v,"key")&&hn(v,"text")&&hn(v,"sourceIndex"))return v;const M=this._createLocationForSearch(v),I="string"==typeof v?v:this.searchTerm,{selectedSuggestion:R,selectedResult:ee}=this,pe=!v&&R&&ee;return pe&&R.key===ee.key&&R.sourceIndex===ee.sourceIndex||pe&&R.location?R:{location:(0,ce.Wg)(M),text:M?"":I,sourceIndex:null,key:null}}_getFirstResult(v){let M=null;return v&&v.some(I=>{const{results:R}=I,ee=R[0],pe=!!ee;return pe&&(M=ee),pe}),M}_selectFirstResult(v){return this.autoSelect&&v?this.select(v):Promise.resolve(null)}_suggestImmediate(v,M){return this.when().then(()=>this._getSuggestionsFromSources(v,M)).then(I=>{if((0,ce.Wg)(M?.signal)?.aborted)return null;const R={activeSourceIndex:this.activeSourceIndex,searchTerm:v,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(R,I),R})}_formatSourceResponse(v,M,I){const R=M&&M.value||[],ee=M&&M.error,pe=this.allSources.at(I);ee?(v.errors.push({sourceIndex:I,source:pe,error:ee}),Si.error(ee),v.numErrors++):(v.results.push({sourceIndex:I,source:pe,results:R}),v.numResults+=R.length)}_formatResponse(v,M,I){if(M)if(-1===v.activeSourceIndex){const R=I&&hn(I,"sourceIndex")&&-1!==I.sourceIndex?I.sourceIndex:void 0;M.forEach((ee,pe)=>{this._formatSourceResponse(v,ee,void 0!==R?R:pe)})}else this._formatSourceResponse(v,M[0],v.activeSourceIndex)}_getResultsFromSources(v,M){const{allSources:I}=this,R=!v.location&&hn(v,"sourceIndex")?v.sourceIndex:this.activeSourceIndex,ee=[];if(!I.length){const pe=new U.Z("search:no-sources-defined","At least one source is required.",{allSources:I});return Si.error(pe),Promise.reject(pe)}return-1===R?I.forEach((pe,Me)=>{ee.push(this._getResultsFromSource(v,Me,M))}):ee.push(this._getResultsFromSource(v,R,M)),(0,z.as)(ee)}_getSuggestionsFromSources(v,M){const{allSources:I,activeSourceIndex:R}=this,ee=[];if(!I.length){const pe=new U.Z("suggest:no-sources-defined","At least one source is required.",{allSources:I});return Si.error(pe),Promise.reject(pe)}return-1===R?I.forEach((pe,Me)=>{ee.push(this._getSuggestionsFromSource(v,Me,M))}):ee.push(this._getSuggestionsFromSource(v,R,M)),(0,z.as)(ee)}_getResultsFromSource(v,M,I){const R=this.allSources.at(M),{location:ee=null}=v,pe=this.view?.spatialReference||Nh,Me=hn(R,"maxResults")?R.maxResults:this.maxResults,xe=!!(R instanceof Qo&&hn(R,"exactMatch"))&&R.exactMatch,{view:ze}=this;return R.getResults({view:ze,sourceIndex:M,location:ee,suggestResult:v,spatialReference:pe,exactMatch:xe,maxResults:Me},I)}_getSuggestionsFromSource(v,M,I){const R=this.allSources.at(M),ee=hn(R,"suggestionsEnabled")?R.suggestionsEnabled:this.suggestionsEnabled,pe=v.length,Me=hn(R,"minSuggestCharacters")?R.minSuggestCharacters:this.minSuggestCharacters;if(ee&&v.trim()&&pe>=Me){const xe=this.view?.spatialReference||Nh,ze=hn(R,"maxSuggestions")?R.maxSuggestions:this.maxSuggestions,{view:st}=this,ut=!!(R instanceof Qo&&hn(R,"exactMatch"))&&R.exactMatch;return R.getSuggestions({view:st,sourceIndex:M,suggestTerm:v,spatialReference:xe,maxSuggestions:ze,exactMatch:ut},I)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(v){const{layer:M}=v;if(M)return hn(v,"popupTemplate")?v.popupTemplate:M.popupTemplate}_getSourceIndexOfResult(v){let I=null;return this.results.some(R=>R.results.some(ee=>ee===v&&(I=R.sourceIndex,!0))),I}_goToSearchResult(v){var M=this;return(0,x.Z)(function*(){const I=!!v;M._abortGoTo();const R=new AbortController;M._gotoController=R;const ee={target:{target:v},options:{animate:I,signal:R.signal}};yield M.callGoTo(ee),M._gotoController=null})()}_getDefaultSymbol(v){const{defaultSymbols:M}=this,I=v.feature?.geometry;if((0,ce.Wi)(I))return null;switch(I.type){case"point":case"multipoint":return M.point;case"polyline":return M.polyline;case"extent":case"polygon":return M.polygon;default:return null}}_removeHighlight(){this._handles.remove(Wh)}_getLayerView(v){var M=this;return(0,x.Z)(function*(){const{view:I}=M;if(!v||!I||"building-component"===v.layer.type||"subtype-sublayer"===v.layer.type)return null;const{layer:R}=v;return yield I.when(),I.whenLayerView(R)})()}_highlightFeature(v){const{graphic:M,layerView:I}=v,{attributes:R,layer:ee}=M,{objectIdField:pe}=ee,xe=I.highlight(R&&R[pe]||M);this._handles.add(xe,Wh)}_setResultFloor(v){const{view:M}=this,I=v.feature?.attributes,R=v.feature?.sourceLayer;if(R&&"floorInfo"in R&&R?.floorInfo?.floorField&&I){const ee=I[R.floorInfo.floorField];M?.emit("select-result-floor",ee)}}};or.ALL_INDEX=-1,(0,w._)([(0,C.Cb)()],or.prototype,"_searching",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"_updatingPromise",void 0),(0,w._)([(0,C.Cb)({readOnly:!0,value:null})],or.prototype,"activeSource",null),(0,w._)([(0,C.Cb)()],or.prototype,"activeSourceIndex",null),(0,w._)([(0,C.Cb)()],or.prototype,"allPlaceholder",null),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"allSources",null),(0,w._)([(0,C.Cb)()],or.prototype,"autoNavigate",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"autoSelect",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"defaultPopupTemplate",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"defaultSources",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"defaultSymbols",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"includeDefaultSources",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"locationEnabled",null),(0,w._)([(0,C.Cb)()],or.prototype,"maxInputLength",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"maxResults",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"maxSuggestions",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"messages",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"minSuggestCharacters",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"placeholder",null),(0,w._)([(0,C.Cb)()],or.prototype,"popupEnabled",void 0),(0,w._)([(0,C.Cb)({type:dh.Z})],or.prototype,"popupTemplate",void 0),(0,w._)([(0,C.Cb)({type:ec.Z})],or.prototype,"portal",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"resultCount",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"resultGraphicEnabled",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"resultGraphic",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"results",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"selectedSuggestion",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"searchAllEnabled",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"selectedResult",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"searchTerm",null),(0,w._)([(0,C.Cb)({type:Cl})],or.prototype,"sources",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"state",null),(0,w._)([(0,C.Cb)()],or.prototype,"suggestionDelay",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"suggestionCount",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"suggestions",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"suggestionsEnabled",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],or.prototype,"updating",null),(0,w._)([(0,C.Cb)()],or.prototype,"view",void 0),(0,w._)([(0,C.Cb)()],or.prototype,"clear",null),or=(0,w._)([(0,F.j)(Bh)],or);const ea=or;let ki=class extends fs.Z{constructor(v,M){super(v,M),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){return(0,Mt.u)("div",{class:Mi.base},(0,Mt.u)("div",{key:"esri-search-renderer__container",class:this.classes(Mi.moreResults,{[Mi.showMoreResults]:this.showMoreResultsOpen})},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return(0,Mt.u)("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){const v=this.viewModel?.selectedResult;return(0,Mt.u)("div",{key:"esri-search-renderer__result-name",class:Mi.moreResultsItem},v&&v.name||"")}renderMoreResultsLists(){const v=this.viewModel?.results,{resultCount:M}=this.viewModel;if(M<2)return null;const I=v.map(R=>this.renderMoreResultsList(R));return(0,Mt.u)("div",{key:"esri-search-renderer__more-results-container",class:Mi.moreResultsList},I)}renderMoreResultsButton(){const{messages:v}=this,{resultCount:M}=this.viewModel;return M<2?null:(0,Mt.u)("div",{key:"esri-search-renderer__more-results-button",class:Mi.moreResultsItem},(0,Mt.u)("a",{class:Mi.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?v.hideMoreResults:v.showMoreResults))}renderMoreResultsHeader(v,M){return(0,Mt.u)("div",{key:`esri-search-result-renderer__header-${M}`,class:Mi.moreResultsListHeader},v)}renderMoreResultsList(v){const{results:M}=v,I=M.length,R=!!I,ee=this.viewModel?.selectedResult,pe=1===I&&M[0]===ee,Me=this._getSourceName(v.source,v.sourceIndex),xe=this.viewModel?.results.length>1&&!pe?this.renderMoreResultsHeader(Me,v.sourceIndex):null,ze=R&&M.map((ut,Ct)=>this.renderMoreResultsListItem(ut,Ct)),st=R&&!pe?(0,Mt.u)("ul",{key:`esri-search-result-renderer__list-${v.sourceIndex}`},ze):null;return R?(0,Mt.u)("div",{key:`esri-search-result-renderer__results-${v.sourceIndex}`},xe,st):null}renderMoreResultsListItem(v,M){return v!==this.get("viewModel.selectedResult")?(0,Mt.u)("li",{key:`esri-search-result-renderer__list-item-${M}`},(0,Mt.u)("a",{class:Mi.anchor,href:"#",tabindex:"0",bind:this,"data-result":v,onclick:this._selectResultClick,onkeydown:this._selectResultClick},v.name)):null}_showMoreResultsClick(v){v.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const M=this.get("viewModel.view.popup");M&&M.reposition()}_selectResultClick(v){v.preventDefault(),this.viewModel&&this.viewModel.select(v.currentTarget["data-result"])}_getSourceName(v,M){return M===ea.ALL_INDEX?this.messages.all:v.name}};(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Search/t9n/Search")],ki.prototype,"messages",void 0),(0,w._)([(0,C.Cb)()],ki.prototype,"showMoreResultsOpen",void 0),(0,w._)([(0,C.Cb)()],ki.prototype,"viewModel",void 0),(0,w._)([(0,Sn.h)()],ki.prototype,"_showMoreResultsClick",null),(0,w._)([(0,Sn.h)()],ki.prototype,"_selectResultClick",null),ki=(0,w._)([(0,F.j)("esri.widgets.Search.SearchResultRenderer")],ki);const _y=ki,vy=/<[a-z/][\s\S]*>/i;let lr=class extends fs.Z{constructor(v,M){super(v,M),this._activeMenuItemIndex=-1,this._handles=new ls.Z,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new _y,this._locateFailed=null,this._container=null,this.activeMenu="none",this.disabled=!1,this.iconClass=Ns.widgetIcon,this.messages=null,this.messagesCommon=null,this.viewModel=new ea,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=I=>{const R=I.relatedTarget;R&&this._container?.contains(R)||this._clearActiveMenu()},this.addHandles([(0,bt.YP)(()=>this.searchTerm,I=>{(I&&"warning"===this.activeMenu||!I&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),(0,bt.on)(()=>this.viewModel?.allSources,"change",()=>this._watchSourceChanges()),(0,bt.YP)(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),bt.nn),(0,bt.YP)(()=>this.viewModel?.defaultPopupTemplate,I=>{I&&(I.content=this._renderSearchResultsContent.bind(this))},bt.nn)])}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){return this.viewModel.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(v){this.viewModel.activeSourceIndex=v}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(v){this.viewModel.allPlaceholder=v}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(v){this.viewModel.autoNavigate=v}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(v){this.viewModel.autoSelect=v}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(v){this.viewModel.goToOverride=v}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(v){this.viewModel.includeDefaultSources=v}get label(){return this.messages?.widgetLabel??""}set label(v){this._overrideIfSome("label",v)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(v){this.viewModel.locationEnabled=v}get maxResults(){return this.viewModel.maxResults}set maxResults(v){this.viewModel.maxResults=v}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(v){this.viewModel.maxSuggestions=v}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(v){this.viewModel.minSuggestCharacters=v}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(v){this.viewModel.popupEnabled=v}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(v){this.viewModel.popupTemplate=v}get portal(){return this.viewModel.portal}set portal(v){this.viewModel.portal=v}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(v){this.viewModel.resultGraphic=v}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(v){this.viewModel.resultGraphicEnabled=v}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(v){this.viewModel.searchAllEnabled=v}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(v){this.viewModel.searchTerm=v}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(v){this.viewModel.sources=v}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(v){this.viewModel.suggestionsEnabled=v}get view(){return this.viewModel.view}set view(v){this.viewModel.view=v}clear(){this.viewModel.clear()}focus(){this._inputNode?.focus(),this.emit("search-focus")}blur(){this._inputNode?.blur(),this.emit("search-blur")}search(v){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const M=new AbortController,{signal:I}=M;return this._searchController=M,this.viewModel.search(v,{signal:I}).catch(R=>{if(this._searchController===M)return this._clearActiveMenu(),this._searchController=null,R}).then(R=>{if(this._searchController===M)return this.activeMenu=R.numResults?"none":"warning",this._searchController=null,R})}suggest(v){this._cancelSuggest();const M=new AbortController,{signal:I}=M;return this._suggestController=M,this.viewModel.suggest(v,null,{signal:I}).then(R=>{if(this._suggestController===M)return this._suggestController=null,R.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),R}).catch(()=>{if(this._suggestController===M)return this._suggestController=null,null})}render(){const{state:v}=this.viewModel;return(0,Mt.u)("div",{class:this.classes(Ns.base,{[Ns.disabled]:"disabled"===v,[Ns.esriWidgetDisabled]:this.disabled})},"loading"===v?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:v,disabled:M}=this;return(0,Mt.u)("button",{"aria-label":v.searchButtonTitle,bind:this,disabled:M,class:this.classes(Ns.submitButton,Ns.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:v.searchButtonTitle,type:"button"},(0,Mt.u)("span",{"aria-hidden":"true",class:Ns.searchIcon}))}renderWarningMenu(){return(0,Mt.u)("div",{key:"esri-search__error-menu",class:this.classes(Ns.menu,Ns.warningMenu)},(0,Mt.u)("div",{class:Ns.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:v,activeMenu:M,sourceMenuId:I,sourceMenuButtonId:R,disabled:ee}=this,{activeSourceIndex:pe,allSources:Me}=this.viewModel;return Me.length>1?(0,Mt.u)("button",{id:R,key:"esri-search__source-menu-button",bind:this,disabled:ee,"aria-label":v.searchIn,title:v.searchIn,"aria-haspopup":"true","aria-expanded":("source"===M).toString(),"aria-controls":I,class:this.classes(Ns.sourcesButton,Ns.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:Ar.Yo,"data-node-ref":"_sourceMenuButtonNode",type:"button"},(0,Mt.u)("span",{"aria-hidden":"true",class:Ns.dropdownIcon}),(0,Mt.u)("span",{"aria-hidden":"true",class:Ns.dropupIcon}),(0,Mt.u)("span",{class:Ns.sourceName},this._getSourceName(pe))):null}renderSourcesList(){const{allSources:v,searchAllEnabled:M}=this.viewModel,{_activeMenuItemIndex:I,activeMenu:R,sourceMenuId:ee,sourceMenuButtonId:pe}=this,Me="source"===R&&I>-1?this._buildId("source-item",I):null;return v.length>1?(0,Mt.u)("ul",{"aria-activedescendant":Me,"aria-labelledby":pe,id:ee,role:"menu",bind:this,afterCreate:Ar.Yo,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:Ns.menuList,tabIndex:-1},M?this.renderSource(ea.ALL_INDEX):null,v.map((xe,ze)=>this.renderSource(ze)).toArray()):null}renderSourcesMenu(){const{allSources:v}=this.viewModel;return v.length>1?(0,Mt.u)("div",{key:"esri-search__source-menu",class:this.classes(Ns.menu,Ns.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:v,messagesCommon:M,disabled:I}=this;return(0,Mt.u)("div",{class:Ns.loader,key:"base-loader",tabIndex:I?-1:null},(0,Mt.u)("span",{"aria-hidden":"true",class:Ns.loaderAnimation}),(0,Mt.u)("span",{class:Ns.fallbackText},v.searchButtonTitle),(0,Mt.u)("span",{class:Ns.loaderText},M.loading))}renderContainer(){const{allSources:v,state:M}=this.viewModel,{activeMenu:I}=this;return(0,Mt.u)("div",{tabIndex:-1,afterCreate:ee=>{this._container=ee,ee.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:ee=>{ee.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({[Ns.hasMultipleSources]:v.length>1,[Ns.isLoading]:"loading"===M,[Ns.isSearching]:"searching"===M,[Ns.showWarning]:"warning"===I,[Ns.showSources]:"source"===I,[Ns.showSuggestions]:"suggestion"===I},Ns.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?(0,Mt.u)("button",{bind:this,disabled:this.disabled,class:this.classes(Ns.clearButton,Ns.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},(0,Mt.u)("span",{"aria-hidden":"true",class:Ns.clearIcon})):null}renderLocationGroup(){const{messages:v,locationEnabled:M,displayedSearchTerm:I}=this,ee="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return M&&!I?(0,Mt.u)("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(Ns.menuList,Ns.suggestionList,Ns.suggestionListCurrentLocation)},(0,Mt.u)("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes(Ns.menuItem,ee?Ns.menuItemFocus:null)},(0,Mt.u)("span",{"aria-hidden":"true",class:Ns.locate})," ",v.useCurrentLocation)):null}renderInput(){const{activeMenu:v,locationEnabled:M,displayedSearchTerm:I,messages:R,suggestionsMenuId:ee,inputId:pe,_activeMenuItemIndex:Me,disabled:xe}=this,{maxInputLength:ze,placeholder:st,searchTerm:ut,suggestionCount:Ct}=this.viewModel,Gt=!((!M||I)&&!Ct),Ft="suggestion"===v&&Me>-1?this._buildId("suggestion-item",Me):null;return(0,Mt.u)("input",{"aria-activedescendant":Ft,"aria-autocomplete":"list","aria-expanded":(Gt&&"suggestion"===v).toString(),"aria-controls":Gt?ee:null,"aria-haspopup":"listbox","aria-label":R.searchButtonTitle,bind:this,disabled:xe,placeholder:st,maxlength:ze,autocomplete:"off",type:"text",class:this.classes(Ns.esriInput,Ns.input),value:ut,id:pe,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:Ar.Yo,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:ut?"":st})}renderForm(){return(0,Mt.u)("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:Ns.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(v){const{sourceIndex:M}=v,R=v.results;return v.results.length?(0,Mt.u)("ul",{role:"group",key:`esri-search__suggestion-list-${M}`,class:this.classes(Ns.menuList,Ns.suggestionList)},R.map(ee=>this.renderSuggestion(ee,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:v}=this.viewModel;return v?v.map(M=>[this.renderSuggestionHeader(M),this.renderSuggestList(M)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:v,locationEnabled:M,suggestionsMenuId:I,inputId:R}=this,{suggestionCount:ee}=this.viewModel,pe=M&&!v||ee;return this._menuItemCount=0,pe?(0,Mt.u)("div",{id:I,key:"esri-search__suggestions-menu",class:this.classes(Ns.menu,Ns.suggestionsMenu),role:"listbox","aria-labelledby":R,bind:this,afterCreate:Ar.Yo,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return(0,Mt.u)("div",{key:"esri-search__input-container",class:Ns.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(v){const{allSources:M,activeSourceIndex:I}=this.viewModel,{sourceIndex:R}=v;return v.results.length&&M.length>1&&I===ea.ALL_INDEX?(0,Mt.u)("div",{key:`esri-search__suggestion-header-${R}`,class:Ns.menuHeader},this._getSourceName(R)):null}renderSuggestion(v,M){const{_activeMenuItemIndex:I,messages:R}=this,{searchTerm:ee}=this.viewModel;if(ee){const{text:pe}=v,Me=pe||R.untitledResult,xe=vy.test(Me),ze=[];if(xe)ze.push((0,Mt.u)("div",{innerHTML:Me}));else{const ut=this._splitResult(Me,ee),Ct=ee.toLowerCase();ut.forEach((Gt,Ft)=>{Gt&&Gt.length&&(Gt.toLowerCase()===Ct?ze.push((0,Mt.u)("strong",{key:Ft},Gt)):ze.push(Gt))})}const st="suggestion"===this.activeMenu&&I===M;return(0,Mt.u)("li",{bind:this,id:this._buildId("suggestion-item",M),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===M).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${M}`,"data-suggestion":v,role:"option",class:this.classes(Ns.menuItem,st?Ns.menuItemFocus:null)},ze)}}renderSource(v){const{activeSourceIndex:M,searchAllEnabled:I}=this.viewModel,R={[Ns.menuItemActive]:v===M,[Ns.menuItemFocus]:"source"===this.activeMenu&&v===(I?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return(0,Mt.u)("li",{bind:this,key:`esri-search__source-${v}`,id:this._buildId("source-item",I?v+1:v),"aria-checked":(v===M).toString(),onclick:this._handleSourceClick,"data-source-index":v,role:"menuitemradio",class:this.classes(Ns.source,Ns.menuItem,R)},this._getSourceName(v))}renderNoResultsWarning(v){const{messages:M}=this,I=v?(0,Zn.n)(M.noResultsFoundForValue,{value:`"${v}"`}):M.noResultsFound;return(0,Mt.u)("div",{key:"esri-search__no_results"},(0,Mt.u)("div",{class:Ns.warningMenuHeader},M.noResults),(0,Mt.u)("div",{class:Ns.warningMenuText},I))}renderEmptySearchWarning(){const{messages:v}=this;return(0,Mt.u)("div",{key:"esri-search__empty-search"},(0,Mt.u)("span",{"aria-hidden":"true",class:Ns.noticeIcon}),(0,Mt.u)("span",{class:Ns.noValueText},v.emptyValue))}renderLocateWarning(){const{messages:v}=this;return(0,Mt.u)("div",{key:"esri-search__locate-error"},(0,Mt.u)("span",{"aria-hidden":"true",class:Ns.noticeIcon}),(0,Mt.u)("span",{class:Ns.noValueText},v.locateError))}renderWarning(){const{displayedSearchTerm:v,_locateFailed:M}=this,{viewModel:I}=this;return M?this.renderLocateWarning():I.selectedSuggestion?.location||v?this.renderNoResultsWarning(v):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(v,M){return`${this.id}-${v}${void 0===M?"":`-${M}`}`}_watchSourceChanges(){const{_handles:v,viewModel:{allSources:M}}=this,I="sources";v.remove(I),M.forEach(R=>v.add((0,bt.YP)(()=>R.name,()=>this.scheduleRender()),I))}_handleSourcesMenuToggleFocus(){"source"!==this.activeMenu&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){this.activeMenu="source"===this.activeMenu?"none":"source",this.renderNow(),"source"===this.activeMenu&&this._sourceListNode?.focus()}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(v){const M=v.currentTarget["data-suggestion"];M&&(this._focus(),this.search(M))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const v=new AbortController,{signal:M}=v;this._searchController=v,this.viewModel.searchNearby({signal:M}).then(I=>{this.activeMenu=I.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(v){this._setSourceFromMenuItem(v.currentTarget)}_setSourceFromMenuItem(v){v&&(this.viewModel.activeSourceIndex=v["data-source-index"],this._clearActiveMenu(),this._sourceMenuButtonNode?.focus())}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(v){const M=(0,Us.kK)(v);if(v.ctrlKey||v.metaKey||"Copy"===M||"ArrowLeft"===M||"ArrowRight"===M||"Shift"===M)return;if("Tab"===M||"Escape"===M||v.shiftKey&&"Tab"===M)return this._cancelSuggest(),void("Escape"===M&&this._clearActiveMenu());const I="Home"===M||"End"===M||"ArrowUp"===M||"ArrowDown"===M;if("Enter"===M&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const R=this._suggestionListNode?.getElementsByTagName("li");if(R?.length){if("suggestion"!==this.activeMenu&&this._openSuggestionMenu(),I)return v.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(M,R,this._suggestionListNode);const ee=R[this._activeMenuItemIndex];if("Enter"===M&&ee){const pe=ee["data-suggestion"];return void(pe?(this._focus(),this.search(pe)):ee["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(v,M,I){const R=this._activeMenuItemIndex;"Home"===v&&(this._activeMenuItemIndex=0),"End"===v&&(this._activeMenuItemIndex=M.length-1),"ArrowUp"===v&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?M.length-1:this._activeMenuItemIndex-1),"ArrowDown"===v&&(this._activeMenuItemIndex=this._activeMenuItemIndex===M.length-1?0:this._activeMenuItemIndex+1),R!==this._activeMenuItemIndex&&(0,Ar._q)(M[this._activeMenuItemIndex],I)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(v){const M=v.target;this.viewModel.searchTerm!==M.value&&(this.viewModel.searchTerm=M.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(v){const M=(0,Us.kK)(v);if((0,Ar.pf)(M)){v.preventDefault();const I=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(I)}else"ArrowUp"!==M&&"ArrowDown"!==M&&"End"!==M&&"Home"!==M||v.preventDefault()}_handleSourceMenuKeyup(v){const M=(0,Us.kK)(v),I="ArrowUp"===M||"ArrowDown"===M||"End"===M||"Home"===M;if(I&&v.preventDefault(),"Escape"===M)return this._clearActiveMenu(),void this._sourceMenuButtonNode?.focus();const R=this._sourceListNode?.getElementsByTagName("li");return R&&0!==R.length&&I?("source"!==this.activeMenu&&(this.activeMenu="source"),void this._handleItemNavigation(M,R,this._sourceListNode.parentElement)):void 0}_focus(v){this.focus(),v&&(this.activeMenu=v)}_formSubmit(v){v.preventDefault(),-1===this._activeMenuItemIndex&&this.search()}_getSourceName(v){const{messages:M}=this,I=this.viewModel,{allSources:R}=I,ee=R.getItemAt(v);return v===ea.ALL_INDEX?M.all:ee&&ee.name||M.untitledSource}_splitResult(v,M){const I=(0,ke.Qs)(M);return v.replace(new RegExp(`(^|)(${I})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};(0,w._)([(0,C.Cb)()],lr.prototype,"_activeMenuItemIndex",void 0),(0,w._)([(0,C.Cb)()],lr.prototype,"displayedSearchTerm",null),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"inputId",null),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"suggestionsMenuId",null),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"sourceMenuId",null),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"sourceMenuButtonId",null),(0,w._)([(0,C.Cb)()],lr.prototype,"activeMenu",void 0),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"activeSource",null),(0,w._)([(0,C.Cb)()],lr.prototype,"activeSourceIndex",null),(0,w._)([(0,C.Cb)()],lr.prototype,"allPlaceholder",null),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"allSources",null),(0,w._)([(0,C.Cb)()],lr.prototype,"autoNavigate",null),(0,w._)([(0,C.Cb)()],lr.prototype,"autoSelect",null),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"defaultSources",null),(0,w._)([(0,C.Cb)()],lr.prototype,"disabled",void 0),(0,w._)([(0,C.Cb)()],lr.prototype,"goToOverride",null),(0,w._)([(0,C.Cb)()],lr.prototype,"iconClass",void 0),(0,w._)([(0,C.Cb)()],lr.prototype,"includeDefaultSources",null),(0,w._)([(0,C.Cb)()],lr.prototype,"label",null),(0,w._)([(0,C.Cb)()],lr.prototype,"locationEnabled",null),(0,w._)([(0,C.Cb)()],lr.prototype,"maxResults",null),(0,w._)([(0,C.Cb)()],lr.prototype,"maxSuggestions",null),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/widgets/Search/t9n/Search")],lr.prototype,"messages",void 0),(0,w._)([(0,C.Cb)(),(0,Hs.H)("esri/t9n/common")],lr.prototype,"messagesCommon",void 0),(0,w._)([(0,C.Cb)()],lr.prototype,"minSuggestCharacters",null),(0,w._)([(0,C.Cb)()],lr.prototype,"popupEnabled",null),(0,w._)([(0,C.Cb)()],lr.prototype,"popupTemplate",null),(0,w._)([(0,C.Cb)()],lr.prototype,"portal",null),(0,w._)([(0,C.Cb)()],lr.prototype,"resultGraphic",null),(0,w._)([(0,C.Cb)()],lr.prototype,"resultGraphicEnabled",null),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"results",null),(0,w._)([(0,C.Cb)()],lr.prototype,"searchAllEnabled",null),(0,w._)([(0,C.Cb)()],lr.prototype,"searchTerm",null),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"selectedResult",null),(0,w._)([(0,C.Cb)()],lr.prototype,"sources",null),(0,w._)([(0,C.Cb)({readOnly:!0})],lr.prototype,"suggestions",null),(0,w._)([(0,C.Cb)()],lr.prototype,"suggestionsEnabled",null),(0,w._)([(0,C.Cb)()],lr.prototype,"view",null),(0,w._)([Qc(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),(0,C.Cb)({type:ea})],lr.prototype,"viewModel",void 0),lr=(0,w._)([(0,F.j)("esri.widgets.Search")],lr);const Ey=lr;var vo=g(86839);const by=["mapContainer"],My=[{path:"**",component:(()=>{class v{constructor(){this.mapPoints=[{address:"1 Tyler Drive Yarmouth ME 04086",type:"point",longitude:-70.1887779,latitude:43.7819812},{address:"370 US Route 1 Falmouth ME 04105",type:"point",longitude:-70.222409,latitude:43.739053}]}ngAfterViewInit(){const I=new vs({basemap:"satellite"}),R={type:"simple-marker",color:[226,119,40],outline:{color:[255,255,255],width:1}},ee=new lm.Z;ee.addMany(this.mapPoints.map(Me=>new Wt.Z({geometry:Me,symbol:R}))),I.add(ee);const pe=new Yu({components:["attribution","compass","zoom"]});pe.add(new Ey({view:this.mapView}),{position:"top-right",index:2}),this.mapView=new om({container:this.mapContainerRef?.nativeElement,map:I,ui:pe}),this.mapView.when(()=>{console.log("map initialized"),this.mapView?.goTo({target:[this.mapPoints[0].longitude,this.mapPoints[0].latitude],zoom:12})},Me=>{console.log(Me)})}ngOnDestroy(){this.mapView?.destroy()}}return v.\u0275fac=function(I){return new(I||v)},v.\u0275cmp=vo.Xpm({type:v,selectors:[["app-map-view"]],viewQuery:function(I,R){if(1&I&&vo.Gf(by,7),2&I){let ee;vo.iGM(ee=vo.CRH())&&(R.mapContainerRef=ee.first)}},decls:2,vars:0,consts:[[1,"map-container"],["mapContainer",""]],template:function(I,R){1&I&&vo._UZ(0,"div",0,1)},styles:['@import"https://js.arcgis.com/4.24/@arcgis/core/assets/esri/themes/light/main.css";[_nghost-%COMP%]{display:block}.map-container[_ngcontent-%COMP%]{padding:0;margin:0;height:100%;width:100%}']}),v})()}];let Cy=(()=>{class v{}return v.\u0275fac=function(I){return new(I||v)},v.\u0275mod=vo.oAB({type:v}),v.\u0275inj=vo.cJS({imports:[E.ez,T.Bz.forChild(My),T.Bz]}),v})()},80970:(He,Pe,g)=>{"use strict";g.d(Pe,{Z5:()=>C,HY:()=>wr,mv:()=>en,AA:()=>Ae,yM:()=>Fe,xE:()=>pt,K3:()=>F,h:()=>Te,GH:()=>ke,YY:()=>B});var E=g(71670);let x,se,V,U=!1,N=!1,J=!1,Q=!1,G=null,z=!1;const C={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},F=Ze=>{const Ye=new URL(Ze,js.$resourcesUrl$);return Ye.origin!==Qs.location.origin?Ye.href:Ye.pathname},B=Ze=>js.$resourcesUrl$=Ze,de="http://www.w3.org/1999/xlink",Oe={},ve=Ze=>"object"==(Ze=typeof Ze)||"function"===Ze,Te=(Ze,Ye,...at)=>{let vt=null,Ot=null,xt=null,$t=!1,Qt=!1;const Yt=[],ns=Ls=>{for(let qs=0;qs<Ls.length;qs++)vt=Ls[qs],Array.isArray(vt)?ns(vt):null!=vt&&"boolean"!=typeof vt&&(($t="function"!=typeof Ze&&!ve(vt))&&(vt=String(vt)),$t&&Qt?Yt[Yt.length-1].$text$+=vt:Yt.push($t?ge(null,vt):vt),Qt=$t)};if(ns(at),Ye&&(Ye.key&&(Ot=Ye.key),Ye.name&&(xt=Ye.name),true)){const Ls=Ye.className||Ye.class;Ls&&(Ye.class="object"!=typeof Ls?Ls:Object.keys(Ls).filter(qs=>Ls[qs]).join(" "))}if("function"==typeof Ze)return Ze(null===Ye?{}:Ye,Yt,Se);const Ss=ge(Ze,null);return Ss.$attrs$=Ye,Yt.length>0&&(Ss.$children$=Yt),Ss.$key$=Ot,Ss.$name$=xt,Ss},ge=(Ze,Ye)=>{const at={$flags$:0,$tag$:Ze,$text$:Ye,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return at},Ae={},De=Ze=>Ze&&Ze.$tag$===Ae,Se={forEach:(Ze,Ye)=>Ze.map(me).forEach(Ye),map:(Ze,Ye)=>Ze.map(me).map(Ye).map(ye)},me=Ze=>({vattrs:Ze.$attrs$,vchildren:Ze.$children$,vkey:Ze.$key$,vname:Ze.$name$,vtag:Ze.$tag$,vtext:Ze.$text$}),ye=Ze=>{if("function"==typeof Ze.vtag){const at=Object.assign({},Ze.vattrs);return Ze.vkey&&(at.key=Ze.vkey),Ze.vname&&(at.name=Ze.vname),Te(Ze.vtag,at,...Ze.vchildren||[])}const Ye=ge(Ze.vtag,Ze.vtext);return Ye.$attrs$=Ze.vattrs,Ye.$children$=Ze.vchildren,Ye.$key$=Ze.vkey,Ye.$name$=Ze.vname,Ye},Fe=(Ze,Ye,at)=>{const vt=Ze;return{emit:Ot=>Ke(vt,Ye,{bubbles:!!(4&at),composed:!!(2&at),cancelable:!!(1&at),detail:Ot})}},Ke=(Ze,Ye,at)=>{const vt=js.ce(Ye,at);return Ze.dispatchEvent(vt),vt},Ve=new WeakMap,rt=(Ze,Ye,at,vt)=>{let Ot=qe(Ye,at);const xt=Vs.get(Ot);if(Ze=11===Ze.nodeType?Ze:tr,xt)if("string"==typeof xt){let Qt,$t=Ve.get(Ze=Ze.head||Ze);$t||Ve.set(Ze,$t=new Set),$t.has(Ot)||(Qt=tr.createElement("style"),Qt.innerHTML=xt,Ze.insertBefore(Qt,Ze.querySelector("link")),$t&&$t.add(Ot))}else!Ze.adoptedStyleSheets.includes(xt)&&(Ze.adoptedStyleSheets=[...Ze.adoptedStyleSheets,xt]);return Ot},qe=(Ze,Ye)=>"sc-"+(Ye&&32&Ze.$flags$?Ze.$tagName$+"-"+Ye:Ze.$tagName$),Xe=(Ze,Ye,at,vt,Ot,xt)=>{if(at!==vt){let $t=lt(Ze,Ye),Qt=Ye.toLowerCase();if("class"===Ye){const Yt=Ze.classList,ns=Qe(at),Ss=Qe(vt);Yt.remove(...ns.filter(Ls=>Ls&&!Ss.includes(Ls))),Yt.add(...Ss.filter(Ls=>Ls&&!ns.includes(Ls)))}else if("style"===Ye){for(const Yt in at)(!vt||null==vt[Yt])&&(Yt.includes("-")?Ze.style.removeProperty(Yt):Ze.style[Yt]="");for(const Yt in vt)(!at||vt[Yt]!==at[Yt])&&(Yt.includes("-")?Ze.style.setProperty(Yt,vt[Yt]):Ze.style[Yt]=vt[Yt])}else if("key"!==Ye)if("ref"===Ye)vt&&vt(Ze);else if(Ze.__lookupSetter__(Ye)||"o"!==Ye[0]||"n"!==Ye[1]){{const Yt=ve(vt);if(($t||Yt&&null!==vt)&&!Ot)try{if(Ze.tagName.includes("-"))Ze[Ye]=vt;else{const Ss=vt??"";"list"===Ye?$t=!1:(null==at||Ze[Ye]!=Ss)&&(Ze[Ye]=Ss)}}catch{}let ns=!1;Qt!==(Qt=Qt.replace(/^xlink\:?/,""))&&(Ye=Qt,ns=!0),null==vt||!1===vt?(!1!==vt||""===Ze.getAttribute(Ye))&&(ns?Ze.removeAttributeNS(de,Ye):Ze.removeAttribute(Ye)):(!$t||4&xt||Ot)&&!Yt&&(vt=!0===vt?"":vt,ns?Ze.setAttributeNS(de,Ye,vt):Ze.setAttribute(Ye,vt))}}else Ye="-"===Ye[2]?Ye.slice(3):lt(Qs,Qt)?Qt.slice(2):Qt[2]+Ye.slice(3),at&&js.rel(Ze,Ye,at,!1),vt&&js.ael(Ze,Ye,vt,!1)}},dt=/\s/,Qe=Ze=>Ze?Ze.split(dt):[],ot=(Ze,Ye,at,vt)=>{const Ot=11===Ye.$elm$.nodeType&&Ye.$elm$.host?Ye.$elm$.host:Ye.$elm$,xt=Ze&&Ze.$attrs$||Oe,$t=Ye.$attrs$||Oe;for(vt in xt)vt in $t||Xe(Ot,vt,xt[vt],void 0,at,Ye.$flags$);for(vt in $t)Xe(Ot,vt,xt[vt],$t[vt],at,Ye.$flags$)},ct=(Ze,Ye,at,vt)=>{const Ot=Ye.$children$[at];let $t,Qt,Yt,xt=0;if(!U&&(J=!0,"slot"===Ot.$tag$&&(x&&vt.classList.add(x+"-s"),Ot.$flags$|=Ot.$children$?2:1)),null!==Ot.$text$)$t=Ot.$elm$=tr.createTextNode(Ot.$text$);else if(1&Ot.$flags$)$t=Ot.$elm$=tr.createTextNode("");else{if(!Q&&(Q="svg"===Ot.$tag$),$t=Ot.$elm$=tr.createElementNS(Q?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ot.$flags$?"slot-fb":Ot.$tag$),Q&&"foreignObject"===Ot.$tag$&&(Q=!1),ot(null,Ot,Q),(Ze=>null!=Ze)(x)&&$t["s-si"]!==x&&$t.classList.add($t["s-si"]=x),Ot.$children$)for(xt=0;xt<Ot.$children$.length;++xt)Qt=ct(Ze,Ot,xt,$t),Qt&&$t.appendChild(Qt);"svg"===Ot.$tag$?Q=!1:"foreignObject"===$t.tagName&&(Q=!0)}return $t["s-hn"]=V,3&Ot.$flags$&&($t["s-sr"]=!0,$t["s-cr"]=se,$t["s-sn"]=Ot.$name$||"",Yt=Ze&&Ze.$children$&&Ze.$children$[at],Yt&&Yt.$tag$===Ot.$tag$&&Ze.$elm$&&_t(Ze.$elm$,!1)),$t},_t=(Ze,Ye)=>{js.$flags$|=1;const at=Ze.childNodes;for(let vt=at.length-1;vt>=0;vt--){const Ot=at[vt];Ot["s-hn"]!==V&&Ot["s-ol"]&&(Wt(Ot).insertBefore(Ot,vs(Ot)),Ot["s-ol"].remove(),Ot["s-ol"]=void 0,J=!0),Ye&&_t(Ot,Ye)}js.$flags$&=-2},Rt=(Ze,Ye,at,vt,Ot,xt)=>{let Qt,$t=Ze["s-cr"]&&Ze["s-cr"].parentNode||Ze;for($t.shadowRoot&&$t.tagName===V&&($t=$t.shadowRoot);Ot<=xt;++Ot)vt[Ot]&&(Qt=ct(null,at,Ot,Ze),Qt&&(vt[Ot].$elm$=Qt,$t.insertBefore(Qt,vs(Ye))))},qt=(Ze,Ye,at,vt,Ot)=>{for(;Ye<=at;++Ye)(vt=Ze[Ye])&&(Ot=vt.$elm$,mt(vt),N=!0,Ot["s-ol"]?Ot["s-ol"].remove():_t(Ot,!0),Ot.remove())},ss=(Ze,Ye)=>Ze.$tag$===Ye.$tag$&&("slot"===Ze.$tag$?Ze.$name$===Ye.$name$:Ze.$key$===Ye.$key$),vs=Ze=>Ze&&Ze["s-ol"]||Ze,Wt=Ze=>(Ze["s-ol"]?Ze["s-ol"]:Ze).parentNode,as=(Ze,Ye)=>{const at=Ye.$elm$=Ze.$elm$,vt=Ze.$children$,Ot=Ye.$children$,xt=Ye.$tag$,$t=Ye.$text$;let Qt;null!==$t?(Qt=at["s-cr"])?Qt.parentNode.textContent=$t:Ze.$text$!==$t&&(at.data=$t):(Q="svg"===xt||"foreignObject"!==xt&&Q,"slot"===xt||ot(Ze,Ye,Q),null!==vt&&null!==Ot?((Ze,Ye,at,vt)=>{let fn,mn,Ot=0,xt=0,$t=0,Qt=0,Yt=Ye.length-1,ns=Ye[0],Ss=Ye[Yt],Ls=vt.length-1,qs=vt[0],Ir=vt[Ls];for(;Ot<=Yt&&xt<=Ls;)if(null==ns)ns=Ye[++Ot];else if(null==Ss)Ss=Ye[--Yt];else if(null==qs)qs=vt[++xt];else if(null==Ir)Ir=vt[--Ls];else if(ss(ns,qs))as(ns,qs),ns=Ye[++Ot],qs=vt[++xt];else if(ss(Ss,Ir))as(Ss,Ir),Ss=Ye[--Yt],Ir=vt[--Ls];else if(ss(ns,Ir))("slot"===ns.$tag$||"slot"===Ir.$tag$)&&_t(ns.$elm$.parentNode,!1),as(ns,Ir),Ze.insertBefore(ns.$elm$,Ss.$elm$.nextSibling),ns=Ye[++Ot],Ir=vt[--Ls];else if(ss(Ss,qs))("slot"===ns.$tag$||"slot"===Ir.$tag$)&&_t(Ss.$elm$.parentNode,!1),as(Ss,qs),Ze.insertBefore(Ss.$elm$,ns.$elm$),Ss=Ye[--Yt],qs=vt[++xt];else{for($t=-1,Qt=Ot;Qt<=Yt;++Qt)if(Ye[Qt]&&null!==Ye[Qt].$key$&&Ye[Qt].$key$===qs.$key$){$t=Qt;break}$t>=0?(mn=Ye[$t],mn.$tag$!==qs.$tag$?fn=ct(Ye&&Ye[xt],at,$t,Ze):(as(mn,qs),Ye[$t]=void 0,fn=mn.$elm$),qs=vt[++xt]):(fn=ct(Ye&&Ye[xt],at,xt,Ze),qs=vt[++xt]),fn&&Wt(ns.$elm$).insertBefore(fn,vs(ns.$elm$))}Ot>Yt?Rt(Ze,null==vt[Ls+1]?null:vt[Ls+1].$elm$,at,vt,xt,Ls):xt>Ls&&qt(Ye,Ot,Yt)})(at,vt,Ye,Ot):null!==Ot?(null!==Ze.$text$&&(at.textContent=""),Rt(at,null,Ye,Ot,0,Ot.length-1)):null!==vt&&qt(vt,0,vt.length-1),Q&&"svg"===xt&&(Q=!1))},ys=Ze=>{const Ye=Ze.childNodes;let at,vt,Ot,xt,$t,Qt;for(vt=0,Ot=Ye.length;vt<Ot;vt++)if(at=Ye[vt],1===at.nodeType){if(at["s-sr"])for($t=at["s-sn"],at.hidden=!1,xt=0;xt<Ot;xt++)if(Qt=Ye[xt].nodeType,Ye[xt]["s-hn"]!==at["s-hn"]||""!==$t){if(1===Qt&&$t===Ye[xt].getAttribute("slot")){at.hidden=!0;break}}else if(1===Qt||3===Qt&&""!==Ye[xt].textContent.trim()){at.hidden=!0;break}ys(at)}},bt=[],Ts=Ze=>{let Ye,at,vt,Ot,xt,$t,Qt=0;const Yt=Ze.childNodes,ns=Yt.length;for(;Qt<ns;Qt++){if(Ye=Yt[Qt],Ye["s-sr"]&&(at=Ye["s-cr"])&&at.parentNode)for(vt=at.parentNode.childNodes,Ot=Ye["s-sn"],$t=vt.length-1;$t>=0;$t--)at=vt[$t],!at["s-cn"]&&!at["s-nr"]&&at["s-hn"]!==Ye["s-hn"]&&(nt(at,Ot)?(xt=bt.find(Ss=>Ss.$nodeToRelocate$===at),N=!0,at["s-sn"]=at["s-sn"]||Ot,xt?xt.$slotRefNode$=Ye:bt.push({$slotRefNode$:Ye,$nodeToRelocate$:at}),at["s-sr"]&&bt.map(Ss=>{nt(Ss.$nodeToRelocate$,at["s-sn"])&&(xt=bt.find(Ls=>Ls.$nodeToRelocate$===at),xt&&!Ss.$slotRefNode$&&(Ss.$slotRefNode$=xt.$slotRefNode$))})):bt.some(Ss=>Ss.$nodeToRelocate$===at)||bt.push({$nodeToRelocate$:at}));1===Ye.nodeType&&Ts(Ye)}},nt=(Ze,Ye)=>1===Ze.nodeType?null===Ze.getAttribute("slot")&&""===Ye||Ze.getAttribute("slot")===Ye:Ze["s-sn"]===Ye||""===Ye,mt=Ze=>{Ze.$attrs$&&Ze.$attrs$.ref&&Ze.$attrs$.ref(null),Ze.$children$&&Ze.$children$.map(mt)},Tt=(Ze,Ye)=>{const at=Ze.$hostElement$,vt=Ze.$cmpMeta$,Ot=Ze.$vnode$||ge(null,null),xt=De(Ye)?Ye:Te(null,null,Ye);if(V=at.tagName,vt.$attrsToReflect$&&(xt.$attrs$=xt.$attrs$||{},vt.$attrsToReflect$.map(([$t,Qt])=>xt.$attrs$[Qt]=at[$t])),xt.$tag$=null,xt.$flags$|=4,Ze.$vnode$=xt,xt.$elm$=Ot.$elm$=at.shadowRoot||at,x=at["s-sc"],se=at["s-cr"],U=Dr&&0!=(1&vt.$flags$),N=!1,as(Ot,xt),js.$flags$|=1,J){Ts(xt.$elm$);let $t,Qt,Yt,ns,Ss,Ls,qs=0;for(;qs<bt.length;qs++)$t=bt[qs],Qt=$t.$nodeToRelocate$,Qt["s-ol"]||(Yt=tr.createTextNode(""),Yt["s-nr"]=Qt,Qt.parentNode.insertBefore(Qt["s-ol"]=Yt,Qt));for(qs=0;qs<bt.length;qs++)if($t=bt[qs],Qt=$t.$nodeToRelocate$,$t.$slotRefNode$){for(ns=$t.$slotRefNode$.parentNode,Ss=$t.$slotRefNode$.nextSibling,Yt=Qt["s-ol"];Yt=Yt.previousSibling;)if(Ls=Yt["s-nr"],Ls&&Ls["s-sn"]===Qt["s-sn"]&&ns===Ls.parentNode&&(Ls=Ls.nextSibling,!Ls||!Ls["s-nr"])){Ss=Ls;break}(!Ss&&ns!==Qt.parentNode||Qt.nextSibling!==Ss)&&Qt!==Ss&&(!Qt["s-hn"]&&Qt["s-ol"]&&(Qt["s-hn"]=Qt["s-ol"].parentNode.nodeName),ns.insertBefore(Qt,Ss))}else 1===Qt.nodeType&&(Qt.hidden=!0)}N&&ys(xt.$elm$),js.$flags$&=-2,bt.length=0},Vt=(Ze,Ye)=>{Ze.$flags$|=16;const at=()=>Nt(Ze,Ye);return rn(at)},Nt=(Ze,Ye)=>{const at=Ze.$hostElement$,vt=()=>{},Ot=at;let xt;return Ye?(et(at,"componentWillLoad"),xt=jt(Ot,"componentWillLoad")):(et(at,"componentWillUpdate"),xt=jt(Ot,"componentWillUpdate")),et(at,"componentWillRender"),xt=us(xt,()=>jt(Ot,"componentWillRender")),vt(),us(xt,()=>ls(Ze,Ot,Ye))},ls=function(){var Ze=(0,E.Z)(function*(Ye,at,vt){const Ot=Ye.$hostElement$,xt=()=>{};vt&&(Ze=>{const Ye=Ze.$cmpMeta$,at=Ze.$hostElement$,vt=Ye.$flags$,Ot=()=>{},xt=rt(Dr&&at.shadowRoot?at.shadowRoot:at.getRootNode(),Ye,Ze.$modeName$);10&vt&&(at["s-sc"]=xt,at.classList.add(xt+"-h"),2&vt&&at.classList.add(xt+"-s")),Ot()})(Ye);const Qt=()=>{};ts(Ye,at,Ot),Qt(),xt(),Os(Ye)});return function(at,vt,Ot){return Ze.apply(this,arguments)}}(),ts=(Ze,Ye,at)=>{try{G=Ye,Ye=Ye.render&&Ye.render(),Ze.$flags$&=-17,Ze.$flags$|=2,Tt(Ze,Ye)}catch(Qt){gt(Qt,Ze.$hostElement$)}return G=null,null},Os=Ze=>{const at=Ze.$hostElement$,vt=()=>{},Ot=at;jt(Ot,"componentDidRender"),et(at,"componentDidRender"),64&Ze.$flags$?(jt(Ot,"componentDidUpdate"),et(at,"componentDidUpdate"),vt()):(Ze.$flags$|=64,jt(Ot,"componentDidLoad"),et(at,"componentDidLoad"),vt())},pt=Ze=>{{const Ye=hr(Ze),at=Ye.$hostElement$.isConnected;return at&&2==(18&Ye.$flags$)&&Vt(Ye,!1),at}},jt=(Ze,Ye,at)=>{if(Ze&&Ze[Ye])try{return Ze[Ye](at)}catch(vt){gt(vt)}},us=(Ze,Ye)=>Ze&&Ze.then?Ze.then(Ye):Ye(),et=(Ze,Ye)=>{},Rs=(Ze,Ye,at)=>{if(Ye.$members$){Ze.watchers&&(Ye.$watchers$=Ze.watchers);const vt=Object.entries(Ye.$members$),Ot=Ze.prototype;vt.map(([xt,[$t]])=>{(31&$t||32&$t)&&Object.defineProperty(Ot,xt,{get(){return((Ze,Ye)=>hr(this).$instanceValues$.get(Ye))(0,xt)},set(Qt){((Ze,Ye,at,vt)=>{const Ot=hr(Ze),xt=Ze,$t=Ot.$instanceValues$.get(Ye),Qt=Ot.$flags$,Yt=xt;at=((Ze,Ye)=>null==Ze||ve(Ze)?Ze:4&Ye?"false"!==Ze&&(""===Ze||!!Ze):2&Ye?parseFloat(Ze):1&Ye?String(Ze):Ze)(at,vt.$members$[Ye][0]);const ns=Number.isNaN($t)&&Number.isNaN(at);if(at!==$t&&!ns&&(Ot.$instanceValues$.set(Ye,at),1)){if(vt.$watchers$&&128&Qt){const Ls=vt.$watchers$[Ye];Ls&&Ls.map(qs=>{try{Yt[qs](at,$t,Ye)}catch(Ir){gt(Ir,xt)}})}if(2==(18&Qt)){if(Yt.componentShouldUpdate&&!1===Yt.componentShouldUpdate(at,$t,Ye))return;Vt(Ot,!1)}}})(this,xt,Qt,Ye)},configurable:!0,enumerable:!0})});{const xt=new Map;Ot.attributeChangedCallback=function($t,Qt,Yt){js.jmp(()=>{const ns=xt.get($t);if(this.hasOwnProperty(ns))Yt=this[ns],delete this[ns];else if(Ot.hasOwnProperty(ns)&&"number"==typeof this[ns]&&this[ns]==Yt)return;this[ns]=(null!==Yt||"boolean"!=typeof this[ns])&&Yt})},Ze.observedAttributes=vt.filter(([$t,Qt])=>15&Qt[0]).map(([$t,Qt])=>{const Yt=Qt[1]||$t;return xt.set(Yt,$t),512&Qt[0]&&Ye.$attrsToReflect$.push([$t,Yt]),Yt})}}return Ze},Us=function(){var Ze=(0,E.Z)(function*(Ye,at,vt,Ot,xt){if(!(32&at.$flags$)&&(xt=Ye.constructor,at.$flags$|=32,customElements.whenDefined(vt.$tagName$).then(()=>at.$flags$|=128),xt.style)){let Yt=xt.style;"string"!=typeof Yt&&(Yt=Yt[at.$modeName$=(Ze=>ks.map(Ye=>Ye(Ze)).find(Ye=>!!Ye))(Ye)]);const ns=qe(vt,at.$modeName$);if(!Vs.has(ns)){const Ss=()=>{};((Ze,Ye,at)=>{let vt=Vs.get(Ze);Br&&at?(vt=vt||new CSSStyleSheet,"string"==typeof vt?vt=Ye:vt.replaceSync(Ye)):vt=Ye,Vs.set(Ze,vt)})(ns,Yt,!!(1&vt.$flags$)),Ss()}}const Qt=()=>Vt(at,!0);Qt()});return function(at,vt,Ot,xt,$t){return Ze.apply(this,arguments)}}(),mr=Ze=>{},Le=Ze=>{const Ye=Ze["s-cr"]=tr.createComment("");Ye["s-cn"]=!0,Ze.insertBefore(Ye,Ze.firstChild)},ke=(Ze,Ye)=>{const at={$flags$:Ye[0],$tagName$:Ye[1]};at.$members$=Ye[2],at.$listeners$=Ye[3],at.$watchers$=Ze.$watchers$,at.$attrsToReflect$=[],!Dr&&1&at.$flags$&&(at.$flags$|=8);const vt=Ze.prototype.connectedCallback,Ot=Ze.prototype.disconnectedCallback;return Object.assign(Ze.prototype,{__registerHost(){qr(this,at)},connectedCallback(){(Ze=>{if(!(1&js.$flags$)){const Ye=hr(Ze),at=Ye.$cmpMeta$,vt=()=>{};if(1&Ye.$flags$)wn(Ze,Ye,at.$listeners$,!1),mr(Ye.$lazyInstance$);else{let Ot;Ye.$flags$|=1,!Ot&&12&at.$flags$&&Le(Ze),at.$members$&&Object.entries(at.$members$).map(([xt,[$t]])=>{if(31&$t&&Ze.hasOwnProperty(xt)){const Qt=Ze[xt];delete Ze[xt],Ze[xt]=Qt}}),Us(Ze,Ye,at)}vt()}})(this),vt&&vt.call(this)},disconnectedCallback(){(Ze=>{if(!(1&js.$flags$)){const Ye=hr(Ze);Ye.$rmListeners$&&(Ye.$rmListeners$.map(vt=>vt()),Ye.$rmListeners$=void 0)}})(this),Ot&&Ot.call(this)},__attachShadow(){Dr?this.attachShadow({mode:"open",delegatesFocus:!!(16&at.$flags$)}):this.shadowRoot=this}}),Ze.is=at.$tagName$,Rs(Ze,at)},wr=(Ze,Ye)=>Ye,wn=(Ze,Ye,at,vt)=>{at&&at.map(([Ot,xt,$t])=>{const Qt=Yr(Ze,Ot),Yt=pn(Ye,$t),ns=Hn(Ot);js.ael(Qt,xt,Yt,ns),(Ye.$rmListeners$=Ye.$rmListeners$||[]).push(()=>js.rel(Qt,xt,Yt,ns))})},pn=(Ze,Ye)=>at=>{try{Ze.$hostElement$[Ye](at)}catch(vt){gt(vt)}},Yr=(Ze,Ye)=>4&Ye?tr:8&Ye?Qs:16&Ye?tr.body:Ze,Hn=Ze=>Cn?{passive:0!=(1&Ze),capture:0!=(2&Ze)}:0!=(2&Ze),bs=new WeakMap,hr=Ze=>bs.get(Ze),qr=(Ze,Ye)=>{const at={$flags$:0,$hostElement$:Ze,$cmpMeta$:Ye,$instanceValues$:new Map};return wn(Ze,at,Ye.$listeners$,!1),bs.set(Ze,at)},lt=(Ze,Ye)=>Ye in Ze,gt=(Ze,Ye)=>(0,console.error)(Ze,Ye),Vs=new Map,ks=[],Qs=typeof window<"u"?window:{},tr=Qs.document||{head:{}},en=Qs.HTMLElement||class{},js={$flags$:0,$resourcesUrl$:"",jmp:Ze=>Ze(),raf:Ze=>requestAnimationFrame(Ze),ael:(Ze,Ye,at,vt)=>Ze.addEventListener(Ye,at,vt),rel:(Ze,Ye,at,vt)=>Ze.removeEventListener(Ye,at,vt),ce:(Ze,Ye)=>new CustomEvent(Ze,Ye)},Dr=!0,Cn=(()=>{let Ze=!1;try{tr.addEventListener("e",null,Object.defineProperty({},"passive",{get(){Ze=!0}}))}catch{}return Ze})(),Br=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),tn=[],Nr=[],Xt=(Ze,Ye)=>at=>{Ze.push(at),z||(z=!0,Ye&&4&js.$flags$?yr(Cr):js.raf(Cr))},ds=Ze=>{for(let Ye=0;Ye<Ze.length;Ye++)try{Ze[Ye](performance.now())}catch(at){gt(at)}Ze.length=0},Cr=()=>{ds(tn),ds(Nr),(z=tn.length>0)&&js.raf(Cr)},yr=Ze=>Promise.resolve(void 0).then(Ze),rn=Xt(Nr,!0)},41993:He=>{function Pe(g){return Promise.resolve().then(()=>{var E=new Error("Cannot find module '"+g+"'");throw E.code="MODULE_NOT_FOUND",E})}Pe.keys=()=>[],Pe.resolve=Pe,Pe.id=41993,He.exports=Pe},51186:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{default:()=>ne});var q,E=g(71670),T=g(18100),w=g(97621),Z=g(40434),x=g(60215),se=g(44480),V=g(88684),W=g(48500),A=g(93205),U=g(28191),N=g(53661),J=g(30801),Q=g(55050),G=g(9497),z=(g(83382),g(20891)),C=g(70425),D=g(68230),F=g(37753),B=g(66673),$=g(91118),X=g(97946);let Y=0;const ae="esri.Basemap";let he=q=class extends((0,se.eC)(W.Z)){constructor(ue){super(ue),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Y++,this.baseLayers=new w.Z,this.referenceLayers=new w.Z;const te=fe=>{fe.parent&&fe.parent!==this&&"remove"in fe.parent&&fe.parent.remove(fe),fe.parent=this,"elevation"===fe.type&&U.Z.getLogger(this.declaredClass).error(`Layer '${fe.title}, id:${fe.id}' of type '${fe.type}' is not supported as a basemap layer and will therefore be ignored.`)},ie=fe=>{fe.parent=null};this.baseLayers.on("after-add",fe=>te(fe.item)),this.referenceLayers.on("after-add",fe=>te(fe.item)),this.baseLayers.on("after-remove",fe=>ie(fe.item)),this.referenceLayers.on("after-remove",fe=>ie(fe.item))}initialize(){this.when().catch(ue=>{U.Z.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,ue)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const ue=this.baseLayers.removeAll();for(const ie of ue)ie.destroy();const te=this.referenceLayers.removeAll();for(const ie of te)ie.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem?.destroy(),this.portalItem=null}normalizeCtorArgs(ue){return ue&&"resourceInfo"in ue&&(this._set("resourceInfo",ue.resourceInfo),delete(ue={...ue}).resourceInfo),ue}set baseLayers(ue){this._set("baseLayers",(0,Z.Z)(ue,this._get("baseLayers")))}_writeBaseLayers(ue,te,ie){const fe=[];ue&&(ie={...ie,layerContainerType:"basemap"},this.baseLayers.forEach(_e=>{const de=(0,X.Nw)(_e,ie.webmap?ie.webmap.getLayerJSONFromResourceInfo(_e):null,ie);(0,N.pC)(de)&&fe.push(de)}),this.referenceLayers.forEach(_e=>{const de=(0,X.Nw)(_e,ie.webmap?ie.webmap.getLayerJSONFromResourceInfo(_e):null,ie);(0,N.pC)(de)&&("scene"!==_e.type&&(de.isReference=!0),fe.push(de))})),te.baseMapLayers=fe}set referenceLayers(ue){this._set("referenceLayers",(0,Z.Z)(ue,this._get("referenceLayers")))}writeTitle(ue,te){te.title=ue||"Basemap"}load(ue){return this.addResolvingPromise(this._loadFromSource(ue)),Promise.resolve(this)}loadAll(){return(0,A.G)(this,ue=>{ue(this.baseLayers,this.referenceLayers)})}clone(){const ue={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(ue.loadStatus="loaded"),new q({resourceInfo:this.resourceInfo}).set(ue)}read(ue,te){this.resourceInfo||this._set("resourceInfo",{data:ue,context:te}),super.read(ue,te)}write(ue,te){return ue=ue||{},te&&te.origin||(te={origin:"web-map",...te}),super.write(ue,te),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(ue.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(ie=>{const fe=(0,V.d9)(ie);return fe.url&&(0,Q.oC)(fe.url)&&(fe.url=`https:${fe.url}`),fe.templateUrl&&(0,Q.oC)(fe.templateUrl)&&(fe.templateUrl=`https:${fe.templateUrl}`),fe})),ue}_loadFromSource(ue){var te=this;return(0,E.Z)(function*(){const{resourceInfo:ie,portalItem:fe}=te;(0,J.k_)(ue);const _e=[];ie?(_e.push(te._loadLayersFromJSON(ie.data,ie.context?ie.context.url:null,ue)),ie.data.id&&!ie.data.title&&_e.push((0,$.g)(ie.data.id).then(re=>{re&&te.read({title:re},ie.context)}))):fe&&_e.push(te._loadFromItem(fe,ue)),yield Promise.all(_e)})()}_loadLayersFromJSON(ue,te,ie){var fe=this;return(0,E.Z)(function*(){const _e=fe.resourceInfo&&fe.resourceInfo.context,de=fe.portalItem&&fe.portalItem.portal||_e&&_e.portal||null,Oe=_e&&"web-scene"===_e.origin?"web-scene":"web-map",{populateOperationalLayers:re}=yield Promise.all([g.e(2517),g.e(7587)]).then(g.bind(g,27587)),le=[];if((0,J.k_)(ie),ue.baseMapLayers&&Array.isArray(ue.baseMapLayers)){const ce={context:{origin:Oe,url:te,portal:de,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},ve=Ae=>"web-scene"===Oe&&"ArcGISSceneServiceLayer"===Ae.layerType||Ae.isReference,Te=re(fe.baseLayers,ue.baseMapLayers.filter(Ae=>!ve(Ae)),ce);le.push(Te);const ge=re(fe.referenceLayers,ue.baseMapLayers.filter(ve),ce);le.push(ge)}yield(0,J.as)(le)})()}_loadFromItem(ue,te){var ie=this;return(0,E.Z)(function*(){const fe=yield ue.load(te),_e=yield fe.fetchData("json",te),de=(0,Q.mN)(ue.itemUrl??"");return ie._set("resourceInfo",{data:_e.baseMap??{},context:{origin:"Web Scene"===ue.type?"web-scene":"web-map",portal:ue.portal||F.Z.getDefault(),url:de}}),ie.read(ie.resourceInfo.data,ie.resourceInfo.context),ie.read({spatialReference:_e.spatialReference},ie.resourceInfo.context),ie.read({title:ue.title,thumbnailUrl:ue.thumbnailUrl},{origin:"portal-item",portal:ue.portal||F.Z.getDefault(),url:de}),ie._loadLayersFromJSON(ie.resourceInfo.data,de,te)})()}static fromId(ue){const te=$.s[ue];if(te){if(te.deprecated){let ie=null;"dark-gray"===ue?ie="dark-gray-vector":"gray"===ue?ie="gray-vector":"streets"===ue?ie="streets-vector":"topo"===ue&&(ie="topo-vector"),(0,x.x9)(U.Z.getLogger(ae),`The ${ue} basemap has entered mature support and is no longer being updated.`,{replacement:ie,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return q.fromJSON(te)}return null}};(0,T._)([(0,G.Cb)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(ue,te,ie,fe){this._writeBaseLayers(ue,te,fe)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:w.Z}},writer(ue,te,ie,fe){this._writeBaseLayers(ue,te,fe)}}}}}})],he.prototype,"baseLayers",null),(0,T._)([(0,G.Cb)({type:String,json:{origins:{"web-scene":{write:!0}}}})],he.prototype,"id",void 0),(0,T._)([(0,G.Cb)({type:B.default})],he.prototype,"portalItem",void 0),(0,T._)([(0,G.Cb)()],he.prototype,"referenceLayers",null),(0,T._)([(0,G.Cb)({readOnly:!0})],he.prototype,"resourceInfo",void 0),(0,T._)([(0,G.Cb)({type:D.Z})],he.prototype,"spatialReference",void 0),(0,T._)([(0,G.Cb)()],he.prototype,"thumbnailUrl",void 0),(0,T._)([(0,G.Cb)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],he.prototype,"title",void 0),(0,T._)([(0,C.c)("title")],he.prototype,"writeTitle",null),he=q=(0,T._)([(0,z.j)(ae)],he);const ne=he},25764:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>W});var A,U,E=g(32227),T=g(93142),w=g(53661),Z=g(83382);function x(A){return(0,T.uZ)((0,Z.vU)(A),0,255)}function se(A,U,N){return A=Number(A),isNaN(A)?N:A<U?U:A>N?N:A}class V{static blendColors(U,N,J,Q=new V){return Q.r=Math.round(U.r+(N.r-U.r)*J),Q.g=Math.round(U.g+(N.g-U.g)*J),Q.b=Math.round(U.b+(N.b-U.b)*J),Q.a=U.a+(N.a-U.a)*J,Q._sanitize()}static fromRgb(U,N){const J=U.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(J){const Q=J[2].split(/\s*,\s*/),G=J[1];if("rgb"===G&&3===Q.length||"rgba"===G&&4===Q.length){const k=Q[0];if("%"===k.charAt(k.length-1)){const z=Q.map(C=>2.56*parseFloat(C));return 4===Q.length&&(z[3]=parseFloat(Q[3])),V.fromArray(z,N)}return V.fromArray(Q.map(z=>parseFloat(z)),N)}if("hsl"===G&&3===Q.length||"hsla"===G&&4===Q.length)return V.fromArray((0,E.B7)(parseFloat(Q[0]),parseFloat(Q[1])/100,parseFloat(Q[2])/100,parseFloat(Q[3])),N)}return null}static fromHex(U,N=new V){if(4!==U.length&&7!==U.length||"#"!==U[0])return null;const J=4===U.length?4:8,Q=(1<<J)-1;let G=+("0x"+U.substr(1));return isNaN(G)?null:(["b","g","r"].forEach(k=>{const z=G&Q;G>>=J,N[k]=4===J?17*z:z}),N.a=1,N)}static fromArray(U,N=new V){return N._set(Number(U[0]),Number(U[1]),Number(U[2]),Number(U[3])),isNaN(N.a)&&(N.a=1),N._sanitize()}static fromString(U,N){const J=(0,E.St)(U)?(0,E.h$)(U):null;return J&&V.fromArray(J,N)||V.fromRgb(U,N)||V.fromHex(U,N)}static fromJSON(U){return U&&new V([U[0],U[1],U[2],U[3]/255])}static toUnitRGB(U){return(0,w.pC)(U)?[U.r/255,U.g/255,U.b/255]:null}static toUnitRGBA(U){return(0,w.pC)(U)?[U.r/255,U.g/255,U.b/255,null!=U.a?U.a:1]:null}constructor(U){this.r=255,this.g=255,this.b=255,this.a=1,U&&this.setColor(U)}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(U){return"string"==typeof U?V.fromString(U,this):Array.isArray(U)?V.fromArray(U,this):(this._set(U.r??0,U.g??0,U.b??0,U.a??1),U instanceof V||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const U=this.r.toString(16),N=this.g.toString(16),J=this.b.toString(16);return`#${U.length<2?"0"+U:U}${N.length<2?"0"+N:N}${J.length<2?"0"+J:J}`}toCss(U=!1){const N=this.r+", "+this.g+", "+this.b;return U?`rgba(${N}, ${this.a})`:`rgb(${N})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(U=V.AlphaMode.ALWAYS){const N=x(this.r),J=x(this.g),Q=x(this.b);return U===V.AlphaMode.ALWAYS||1!==this.a?[N,J,Q,x(255*this.a)]:[N,J,Q]}clone(){return new V(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(U){return(0,w.pC)(U)&&U.r===this.r&&U.g===this.g&&U.b===this.b&&U.a===this.a}_sanitize(){return this.r=Math.round(se(this.r,0,255)),this.g=Math.round(se(this.g,0,255)),this.b=Math.round(se(this.b,0,255)),this.a=se(this.a,0,1),this}_set(U,N,J,Q){this.r=U,this.g=N,this.b=J,this.a=Q}}V.prototype.declaredClass="esri.Color",(U=(A=V||(V={})).AlphaMode||(A.AlphaMode={}))[U.ALWAYS=0]="ALWAYS",U[U.UNLESS_OPAQUE=1]="UNLESS_OPAQUE";const W=V},26763:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>C});var E=g(18100),T=g(6010),w=g(73889),Z=g(97708),x=g(94904),se=g(44480),V=g(53661),W=g(29962),A=g(9497),J=(g(83382),g(19420),g(20891)),Q=g(71182);function k(D){if(!(0,V.pC)(D))return null;const F={};for(const B in D){const $=D[B];$&&(F[B]=$.toJSON())}return 0!==Object.keys(F).length?F:null}let z=class extends((0,x.J)(se.wq)){constructor(...D){super(...D),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,W.D)(),configurable:!0})}normalizeCtorArgs(D,F,B,$){return D&&!D.declaredClass?D:{geometry:D,symbol:F,attributes:B,popupTemplate:$}}set aggregateGeometries(D){const F=this._get("aggregateGeometries");JSON.stringify(F)!==JSON.stringify(D)&&this._set("aggregateGeometries",D)}set attributes(D){const F=this._get("attributes");F!==D&&(this._set("attributes",D),this._notifyLayer("attributes",F,D))}set geometry(D){const F=this._get("geometry");F!==D&&(this._set("geometry",D),this._notifyLayer("geometry",F,D))}set symbol(D){const F=this._get("symbol");F!==D&&(this._set("symbol",D),this._notifyLayer("symbol",F,D))}set visible(D){const F=this._get("visible");F!==D&&(this._set("visible",D),this._notifyLayer("visible",F,D))}getEffectivePopupTemplate(D=!1){if(this.popupTemplate)return this.popupTemplate;for(const F of[this.sourceLayer,this.layer])if(F){if("popupTemplate"in F&&F.popupTemplate)return F.popupTemplate;if(D&&"defaultPopupTemplate"in F&&(0,V.pC)(F.defaultPopupTemplate))return F.defaultPopupTemplate}return null}getAttribute(D){return this.attributes?.[D]}setAttribute(D,F){if(this.attributes){const B=this.getAttribute(D);this.attributes[D]=F,this._notifyLayer("attributes",B,F,D)}else this.attributes={[D]:F},this._notifyLayer("attributes",void 0,F,D)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:k(this.aggregateGeometries),geometry:(0,V.pC)(this.geometry)?this.geometry.toJSON():null,symbol:(0,V.pC)(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){(0,V.pC)(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(D,F,B,$){if(!this.layer||!("graphicChanged"in this.layer))return;const X={graphic:this,property:D,oldValue:F,newValue:B};"attributes"===D&&(X.attributeName=$),this.layer.graphicChanged(X)}};(0,E._)([(0,A.Cb)({value:null,json:{read:function G(D){if(!D)return null;const F={};for(const B in D){const $=(0,Q.im)(D[B]);$&&(F[B]=$)}return 0!==Object.keys(F).length?F:null}}})],z.prototype,"aggregateGeometries",null),(0,E._)([(0,A.Cb)({value:null})],z.prototype,"attributes",null),(0,E._)([(0,A.Cb)({value:null,types:T.qM,json:{read:Q.im}})],z.prototype,"geometry",null),(0,E._)([(0,A.Cb)({type:Boolean})],z.prototype,"isAggregate",void 0),(0,E._)([(0,A.Cb)({clonable:"reference"})],z.prototype,"layer",void 0),(0,E._)([(0,A.Cb)({type:w.Z})],z.prototype,"popupTemplate",void 0),(0,E._)([(0,A.Cb)({clonable:"reference"})],z.prototype,"sourceLayer",void 0),(0,E._)([(0,A.Cb)({value:null,types:Z.LB})],z.prototype,"symbol",null),(0,E._)([(0,A.Cb)({type:Boolean,value:!0})],z.prototype,"visible",null),z=(0,E._)([(0,J.j)("esri.Graphic")],z),(z||(z={})).generateUID=W.D;const C=z},73889:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Ce});var E=g(71670),T=g(18100),w=g(94904),Z=g(97621),x=g(44480),se=g(88684),V=g(28191),W=g(30801),A=g(9497),U=g(36734),N=g(66508),J=g(20891),Q=g(70425),G=g(83382),k=g(21230),z=g(21777),C=g(72560),D=g(47709),F=g(10825),B=g(8810),$=g(21303),X=g(60647),q=g(82797);const ae={base:null,key:"type",typeMap:{attachment:z.Z,media:$.Z,text:q.Z,expression:F.Z,field:B.Z,relationship:X.Z}};var te,he=g(32596),ne=g(17398);g(19420);let ie=te=class extends x.wq{constructor(Ie){super(Ie),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new te({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};(0,T._)([(0,A.Cb)({type:Boolean,json:{write:!0}})],ie.prototype,"returnTopmostRaster",void 0),(0,T._)([(0,A.Cb)({type:Boolean,json:{write:!0}})],ie.prototype,"showNoDataRecords",void 0),ie=te=(0,T._)([(0,J.j)("esri.popup.LayerOptions")],ie);const fe=ie;var de,_e=g(56584);let Oe=de=class extends x.wq{constructor(Ie){super(Ie),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new de({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?(0,se.d9)(this.orderByFields):null})}};(0,T._)([(0,A.Cb)({type:Boolean,json:{write:!0}})],Oe.prototype,"showRelatedRecords",void 0),(0,T._)([(0,A.Cb)({type:[_e.Z],json:{write:!0}})],Oe.prototype,"orderByFields",void 0),Oe=de=(0,T._)([(0,J.j)("esri.popup.RelatedRecordsInfo")],Oe);const re=Oe;var le=g(25733),ce=g(47949),ve=g(82844),Te=g(23648);const Ae=V.Z.getLogger("esri.PopupTemplate"),De="relationships/",Se="expression/",me=Z.Z.ofType({key:"type",defaultKeyValue:"button",base:ce.Z,typeMap:{button:ve.Z,toggle:Te.Z}}),ye={base:C.Z,key:"type",typeMap:{media:$.Z,custom:D.Z,text:q.Z,attachments:z.Z,fields:B.Z,expression:F.Z,relationship:X.Z}},we=["attachments","fields","media","text","expression","relationship"];let $e=class extends((0,w.J)(x.wq)){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(Ie){return Array.isArray(Ie)?Ie.map(je=>(0,G.N7)(ye,je)):"string"==typeof Ie||"function"==typeof Ie||Ie instanceof HTMLElement||(0,W.y8)(Ie)?Ie:(Ae.error("content error","unsupported content value",{value:Ie}),null)}readContent(Ie,je){const{popupElements:Je}=je;return Array.isArray(Je)&&Je.length>0?this._readPopupInfoElements(je.description,je.mediaInfos,Je):this._readPopupInfo(je)}writeContent(Ie,je,Je,oe){"string"!=typeof Ie?Array.isArray(Ie)&&(je.popupElements=Ie.filter(be=>we.includes(be.type)).map(be=>be&&be.toJSON(oe)),je.popupElements.forEach(be=>{"attachments"===be.type?this._writeAttachmentContent(je):"media"===be.type?this._writeMediaContent(be,je):"text"===be.type?this._writeTextContent(be,je):"relationship"===be.type&&this._writeRelationshipContent(be,je)})):je.description=Ie}writeFieldInfos(Ie,je,Je,oe){const{content:be}=this,Ue=Array.isArray(be)?be:null;if(Ie){const Fe=Ue?Ue.filter(Ve=>"fields"===Ve.type):[],Ke=Fe.length&&Fe.every(Ve=>Ve.fieldInfos?.length);je.fieldInfos=Ie.filter(Boolean).map(Ve=>{const tt=Ve.toJSON(oe);return Ke&&(tt.visible=!1),tt})}if(Ue)for(const Fe of Ue)"fields"===Fe.type&&this._writeFieldsContent(Fe,je)}writeLayerOptions(Ie,je,Je,oe){je[Je]=!Ie||null===Ie.showNoDataRecords&&null===Ie.returnTopmostRaster?null:Ie.toJSON(oe)}writeTitle(Ie,je){je.title=Ie||""}collectRequiredFields(Ie,je){var Je=this;return(0,E.Z)(function*(){const oe=Je.expressionInfos||[];yield Je._collectExpressionInfoFields(Ie,je,[...oe,...Je._getContentExpressionInfos(Je.content,oe)]),(0,k.gd)(Ie,je,[...Je.outFields||[],...Je._getActionsFields(Je.actions),...Je._getTitleFields(Je.title),...Je._getContentFields(Je.content)])})()}getRequiredFields(Ie){var je=this;return(0,E.Z)(function*(){const Je=new Set;return yield je.collectRequiredFields(Je,Ie),[...Je].sort()})()}_writeFieldsContent(Ie,je){if(!Array.isArray(Ie.fieldInfos)||!Ie.fieldInfos.length)return;const Je=(0,se.d9)(Ie.fieldInfos);Array.isArray(je.fieldInfos)?Je.forEach(oe=>{const be=je.fieldInfos.find(Ue=>Ue.fieldName.toLowerCase()===oe.fieldName.toLowerCase());be?be.visible=!0:je.fieldInfos.push(oe)}):je.fieldInfos=Je}_writeAttachmentContent(Ie){Ie.showAttachments||(Ie.showAttachments=!0)}_writeRelationshipContent(Ie,je){const Je=Ie.orderByFields?.map(be=>this._toFieldOrderJSON(be,Ie.relationshipId))||[],oe=[...je.relatedRecordsInfo?.orderByFields||[],...Je];je.relatedRecordsInfo={showRelatedRecords:!0,...oe?.length&&{orderByFields:oe}}}_writeTextContent(Ie,je){!je.description&&Ie.text&&(je.description=Ie.text)}_writeMediaContent(Ie,je){if(!Array.isArray(Ie.mediaInfos)||!Ie.mediaInfos.length)return;const Je=(0,se.d9)(Ie.mediaInfos);je.mediaInfos=Array.isArray(je.mediaInfos)?[...je.mediaInfos,...Je]:Je}_readPopupInfoElements(Ie,je,Je){const oe={description:!1,mediaInfos:!1};return Je.map(be=>"media"===be.type?(be.mediaInfos||!je||oe.mediaInfos||(be.mediaInfos=je,oe.mediaInfos=!0),$.Z.fromJSON(be)):"text"===be.type?(be.text||!Ie||oe.description||(be.text=Ie,oe.description=!0),q.Z.fromJSON(be)):"attachments"===be.type?z.Z.fromJSON(be):"fields"===be.type?B.Z.fromJSON(be):"expression"===be.type?F.Z.fromJSON(be):"relationship"===be.type?X.Z.fromJSON(be):void 0).filter(Boolean)}_toRelationshipContent(Ie){const{field:je,order:Je}=Ie;if(!je?.startsWith(De))return null;const oe=je.replace(De,"").split("/");if(2!==oe.length)return null;const be=parseInt(oe[0],10),Ue=oe[1];return"number"==typeof be&&Ue?X.Z.fromJSON({relationshipId:be,orderByFields:[{field:Ue,order:Je}]}):null}_toFieldOrderJSON(Ie,je){const{order:Je,field:oe}=Ie;return{field:`${De}${je}/${oe}`,order:Je}}_readPopupInfo({description:Ie,mediaInfos:je,showAttachments:Je,relatedRecordsInfo:oe={showRelatedRecords:!1}}){const be=[];be.push(Ie?new q.Z({text:Ie}):new B.Z),Array.isArray(je)&&je.length&&be.push($.Z.fromJSON({mediaInfos:je})),Je&&be.push(z.Z.fromJSON({displayType:"auto"}));const{showRelatedRecords:Ue,orderByFields:Fe}=oe;return Ue&&Fe?.length&&Fe.forEach(Ke=>{const Ve=this._toRelationshipContent(Ke);Ve&&be.push(Ve)}),be.length?be:Ie}_getContentElementFields(Ie){const je=Ie?.type;if("attachments"===je)return[...this._extractFieldNames(Ie.title),...this._extractFieldNames(Ie.description)];if("custom"===je)return Ie.outFields||[];if("fields"===je)return[...this._extractFieldNames(Ie.title),...this._extractFieldNames(Ie.description),...this._getFieldInfoFields(Ie.fieldInfos??this.fieldInfos)];if("media"===je){const Je=Ie.mediaInfos||[];return[...this._extractFieldNames(Ie.title),...this._extractFieldNames(Ie.description),...Je.reduce((oe,be)=>[...oe,...this._getMediaInfoFields(be)],[])]}return"text"===je?this._extractFieldNames(Ie.text):[]}_getMediaInfoFields(Ie){const{caption:je,title:Je,value:oe}=Ie,be=oe||{},{fields:Ue,normalizeField:Fe,tooltipField:Ke,sourceURL:Ve,linkURL:tt}=be,rt=[...this._extractFieldNames(Je),...this._extractFieldNames(je),...this._extractFieldNames(Ve),...this._extractFieldNames(tt),...Ue??[]];return Fe&&rt.push(Fe),Ke&&rt.push(Ke),rt}_getContentExpressionInfos(Ie,je){return Array.isArray(Ie)?Ie.reduce((Je,oe)=>[...Je,..."expression"===oe.type&&oe.expressionInfo?[oe.expressionInfo]:[]],je):[]}_getContentFields(Ie){return"string"==typeof Ie?this._extractFieldNames(Ie):Array.isArray(Ie)?Ie.reduce((je,Je)=>[...je,...this._getContentElementFields(Je)],[]):[]}_collectExpressionInfoFields(Ie,je,Je){return(0,E.Z)(function*(){Je&&(yield Promise.all(Je.map(oe=>(0,k.io)(Ie,je,oe.expression))))})()}_getFieldInfoFields(Ie){return Ie?Ie.filter(je=>void 0===je.visible||!!je.visible).map(je=>je.fieldName).filter(je=>!je.startsWith(De)&&!je.startsWith(Se)):[]}_getActionsFields(Ie){return Ie?Ie.toArray().reduce((je,Je)=>[...je,...this._getActionFields(Je)],[]):[]}_getActionFields(Ie){const{className:je,title:Je,type:oe}=Ie,be="button"===oe||"toggle"===oe?Ie.image:"";return[...this._extractFieldNames(Je),...this._extractFieldNames(je),...this._extractFieldNames(be)]}_getTitleFields(Ie){return"string"==typeof Ie?this._extractFieldNames(Ie):[]}_extractFieldNames(Ie){if(!Ie||"string"!=typeof Ie)return[];const Je=Ie.match(/{[^}]*}/g);if(!Je)return[];const oe=/\{(\w+):.+\}/,be=Je.filter(Ue=>!(0===Ue.indexOf(`{${De}`)||0===Ue.indexOf(`{${Se}`))).map(Ue=>Ue.replace(oe,"{$1}"));return be?be.map(Ue=>Ue.slice(1,-1)):[]}};(0,T._)([(0,A.Cb)({type:me})],$e.prototype,"actions",void 0),(0,T._)([(0,A.Cb)()],$e.prototype,"content",void 0),(0,T._)([(0,U.p)("content")],$e.prototype,"castContent",null),(0,T._)([(0,N.r)("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],$e.prototype,"readContent",null),(0,T._)([(0,Q.c)("content",{popupElements:{type:Z.Z.ofType(ae)},showAttachments:{type:Boolean},mediaInfos:{type:Z.Z.ofType(le.V)},description:{type:String},relatedRecordsInfo:{type:re}})],$e.prototype,"writeContent",null),(0,T._)([(0,A.Cb)({type:[he.Z],json:{write:!0}})],$e.prototype,"expressionInfos",void 0),(0,T._)([(0,A.Cb)({type:[ne.Z]})],$e.prototype,"fieldInfos",void 0),(0,T._)([(0,Q.c)("fieldInfos")],$e.prototype,"writeFieldInfos",null),(0,T._)([(0,A.Cb)({type:fe})],$e.prototype,"layerOptions",void 0),(0,T._)([(0,Q.c)("layerOptions")],$e.prototype,"writeLayerOptions",null),(0,T._)([(0,A.Cb)({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],$e.prototype,"lastEditInfoEnabled",void 0),(0,T._)([(0,A.Cb)()],$e.prototype,"outFields",void 0),(0,T._)([(0,A.Cb)()],$e.prototype,"overwriteActions",void 0),(0,T._)([(0,A.Cb)()],$e.prototype,"returnGeometry",void 0),(0,T._)([(0,A.Cb)({json:{type:String}})],$e.prototype,"title",void 0),(0,T._)([(0,Q.c)("title")],$e.prototype,"writeTitle",null),$e=(0,T._)([(0,J.j)("esri.PopupTemplate")],$e);const Ce=$e},55025:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var N,E=g(18100),T=g(44480),w=g(53661),Z=g(82588),x=g(9497),W=(g(83382),g(19420),g(66508)),A=g(20891),U=g(70425);let J=N=class extends T.wq{static get allTime(){return Q}static get empty(){return G}constructor(z){super(z),this.end=null,this.start=null}readEnd(z,C){return null!=C.end?new Date(C.end):null}writeEnd(z,C){C.end=z?z.getTime():null}get isAllTime(){return this.equals(N.allTime)}get isEmpty(){return this.equals(N.empty)}readStart(z,C){return null!=C.start?new Date(C.start):null}writeStart(z,C){C.start=z?z.getTime():null}clone(){return new N({end:this.end,start:this.start})}equals(z){if(!z)return!1;const C=(0,w.pC)(this.start)?this.start.getTime():this.start,D=(0,w.pC)(this.end)?this.end.getTime():this.end,F=(0,w.pC)(z.start)?z.start.getTime():z.start,B=(0,w.pC)(z.end)?z.end.getTime():z.end;return C===F&&D===B}expandTo(z){if(this.isEmpty||this.isAllTime)return this.clone();const C=(0,w.yw)(this.start,F=>(0,Z.JE)(F,z)),D=(0,w.yw)(this.end,F=>{const B=(0,Z.JE)(F,z);return F.getTime()===B.getTime()?B:(0,Z.Nm)(B,1,z)});return new N({start:C,end:D})}intersection(z){if(!z)return this.clone();if(this.isEmpty||z.isEmpty)return N.empty;if(this.isAllTime)return z.clone();if(z.isAllTime)return this.clone();const C=(0,w.R2)(this.start,-1/0,q=>q.getTime()),D=(0,w.R2)(this.end,1/0,q=>q.getTime()),F=(0,w.R2)(z.start,-1/0,q=>q.getTime()),B=(0,w.R2)(z.end,1/0,q=>q.getTime());let $,X;if(F>=C&&F<=D?$=F:C>=F&&C<=B&&($=C),D>=F&&D<=B?X=D:B>=C&&B<=D&&(X=B),null!=$&&null!=X&&!isNaN($)&&!isNaN(X)){const q=new N;return q.start=$===-1/0?null:new Date($),q.end=X===1/0?null:new Date(X),q}return N.empty}offset(z,C){if(this.isEmpty||this.isAllTime)return this.clone();const D=new N,{start:F,end:B}=this;return(0,w.pC)(F)&&(D.start=(0,Z.Nm)(F,z,C)),(0,w.pC)(B)&&(D.end=(0,Z.Nm)(B,z,C)),D}union(z){if(!z||z.isEmpty)return this.clone();if(this.isEmpty)return z.clone();if(this.isAllTime||z.isAllTime)return Q.clone();const C=(0,w.pC)(this.start)&&(0,w.pC)(z.start)?new Date(Math.min(this.start.getTime(),z.start.getTime())):null,D=(0,w.pC)(this.end)&&(0,w.pC)(z.end)?new Date(Math.max(this.end.getTime(),z.end.getTime())):null;return new N({start:C,end:D})}};(0,E._)([(0,x.Cb)({type:Date,json:{write:{allowNull:!0}}})],J.prototype,"end",void 0),(0,E._)([(0,W.r)("end")],J.prototype,"readEnd",null),(0,E._)([(0,U.c)("end")],J.prototype,"writeEnd",null),(0,E._)([(0,x.Cb)({readOnly:!0,json:{read:!1}})],J.prototype,"isAllTime",null),(0,E._)([(0,x.Cb)({readOnly:!0,json:{read:!1}})],J.prototype,"isEmpty",null),(0,E._)([(0,x.Cb)({type:Date,json:{write:{allowNull:!0}}})],J.prototype,"start",void 0),(0,E._)([(0,W.r)("start")],J.prototype,"readStart",null),(0,E._)([(0,U.c)("start")],J.prototype,"writeStart",null),J=N=(0,E._)([(0,A.j)("esri.TimeExtent")],J);const Q=new J,G=new J({start:void 0,end:void 0}),k=J},41240:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>J});var E=g(18100),T=g(94904),w=g(44480),Z=g(82588),x=g(9497),W=(g(83382),g(19420),g(4139)),A=g(20891),U=g(87406);let N=class extends((0,T.J)(w.wq)){constructor(Q){super(Q),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,Z.rJ)(this.value,this.unit,"milliseconds")}};(0,E._)([(0,W.J)(U.v,{nonNullable:!0})],N.prototype,"unit",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0},nonNullable:!0})],N.prototype,"value",void 0),N=(0,E._)([(0,A.j)("esri.TimeInterval")],N);const J=N},50231:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>X});var E=g(18100),T=g(94904),w=g(59257),Z=g(44480),x=g(93142),se=g(53661),V=g(9497),W=g(36734),U=(g(19420),g(66508)),N=g(20891),J=g(70425),Q=g(83382),G=g(35787);let k=class extends((0,T.J)(Z.wq)){constructor(...q){super(...q),this.position=new G.Z([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(q,Y,ae,he){if(q&&"object"==typeof q&&("x"in q||Array.isArray(q))){const ne={position:q};return null!=Y&&(ne.heading=Y),null!=ae&&(ne.tilt=ae),null!=he&&(ne.fov=he),ne}return q}writePosition(q,Y,ae,he){const ne=q.clone();ne.x=(0,Q.q9)(q.x||0),ne.y=(0,Q.q9)(q.y||0),ne.z=q.hasZ?(0,Q.q9)(q.z||0):q.z,Y[ae]=ne.write({},he)}readPosition(q,Y){const ae=new G.Z;return ae.read(q,Y),ae.x=(0,Q.q9)(ae.x||0),ae.y=(0,Q.q9)(ae.y||0),ae.z=ae.hasZ?(0,Q.q9)(ae.z||0):ae.z,ae}equals(q){return!(0,se.Wi)(q)&&this.tilt===q.tilt&&this.heading===q.heading&&this.fov===q.fov&&this.position.equals(q.position)}};(0,E._)([(0,V.Cb)({type:G.Z,json:{write:{isRequired:!0}}})],k.prototype,"position",void 0),(0,E._)([(0,J.c)("position")],k.prototype,"writePosition",null),(0,E._)([(0,U.r)("position")],k.prototype,"readPosition",null),(0,E._)([(0,V.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,W.p)(q=>w.BV.normalize((0,Q.q9)(q)))],k.prototype,"heading",void 0),(0,E._)([(0,V.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,W.p)(q=>(0,x.uZ)((0,Q.q9)(q),-180,180))],k.prototype,"tilt",void 0),(0,E._)([(0,V.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],k.prototype,"fov",void 0),k=(0,E._)([(0,N.j)("esri.Camera")],k);const z=k;var F,C=g(6010),D=g(71182);let B=F=class extends Z.wq{constructor(q){super(q),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(q){return(q%=360)<0&&(q+=360),q}clone(){return new F({rotation:this.rotation,scale:this.scale,targetGeometry:(0,se.pC)(this.targetGeometry)?this.targetGeometry.clone():null,camera:(0,se.pC)(this.camera)?this.camera.clone():null})}};function $(){return{enabled:!this.camera}}(0,E._)([(0,V.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:$}}}}})],B.prototype,"rotation",void 0),(0,E._)([(0,W.p)("rotation")],B.prototype,"castRotation",null),(0,E._)([(0,V.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:$}}}}})],B.prototype,"scale",void 0),(0,E._)([(0,V.Cb)({types:C.qM,json:{read:D.im,write:!0,origins:{"web-scene":{read:D.im,write:{overridePolicy:$}}}}})],B.prototype,"targetGeometry",void 0),(0,E._)([(0,V.Cb)({type:z,json:{write:!0}})],B.prototype,"camera",void 0),B=F=(0,E._)([(0,N.j)("esri.Viewpoint")],B);const X=B},74792:(He,Pe,g)=>{"use strict";g.d(Pe,{V:()=>W});var E=g(68327),w=(g(1897),g(32995)),Z=g(28191),x=g(55050);const se=Z.Z.getLogger("esri.assets");function W(A){if(!E.default.assetsPath)throw se.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new w.Z("assets:path-not-set","config.assetsPath is not set");return(0,x.v_)(E.default.assetsPath,A)}},11830:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>N});var A,E=g(18100),T=g(25764),w=g(44480),Z=g(88684),x=g(9497),V=(g(83382),g(20891)),W=g(1344);let U=A=class extends w.wq{constructor(){super(...arguments),this.color=new T.Z("white")}clone(){return new A({color:(0,Z.d9)(this.color)})}};(0,E._)([(0,x.Cb)(W.a)],U.prototype,"color",void 0),U=A=(0,E._)([(0,V.j)("esri.symbols.callouts.LineCallout3DBorder")],U);const N=U;Object.freeze(Object.defineProperty({__proto__:null,default:N},Symbol.toStringTag,{value:"Module"}))},80422:(He,Pe,g)=>{"use strict";g.d(Pe,{c:()=>E,g:()=>T});var E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}},33980:(He,Pe,g)=>{"use strict";g.d(Pe,{R:()=>Z,a:()=>W,g:()=>T,t:()=>V});let E=1e-6;function T(){return E}const Z=Math.random,x=Math.PI/180,se=180/Math.PI;function V(N){return N*x}function W(N){return N*se}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Z,equals:function A(N,J){return Math.abs(N-J)<=E*Math.max(1,Math.abs(N),Math.abs(J))},getEpsilon:T,setEpsilon:function w(N){E=N},toDegree:W,toRadian:V},Symbol.toStringTag,{value:"Module"}))},53072:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>Q,b:()=>N,c:()=>x,d:()=>Z,f:()=>J,i:()=>w,m:()=>V,r:()=>W,s:()=>A,t:()=>U});var E=g(33980);function w(ae){return ae[0]=1,ae[1]=0,ae[2]=0,ae[3]=1,ae[4]=0,ae[5]=0,ae}function Z(ae,he,ne,ue,te,ie,fe){return ae[0]=he,ae[1]=ne,ae[2]=ue,ae[3]=te,ae[4]=ie,ae[5]=fe,ae}function x(ae,he){const ne=he[0],ue=he[1],te=he[2],ie=he[3],fe=he[4],_e=he[5];let de=ne*ie-ue*te;return de?(de=1/de,ae[0]=ie*de,ae[1]=-ue*de,ae[2]=-te*de,ae[3]=ne*de,ae[4]=(te*_e-ie*fe)*de,ae[5]=(ue*fe-ne*_e)*de,ae):null}function V(ae,he,ne){const ue=he[0],te=he[1],ie=he[2],fe=he[3],_e=he[4],de=he[5],Oe=ne[0],re=ne[1],le=ne[2],ce=ne[3],ve=ne[4],Te=ne[5];return ae[0]=ue*Oe+ie*re,ae[1]=te*Oe+fe*re,ae[2]=ue*le+ie*ce,ae[3]=te*le+fe*ce,ae[4]=ue*ve+ie*Te+_e,ae[5]=te*ve+fe*Te+de,ae}function W(ae,he,ne){const ue=he[0],te=he[1],ie=he[2],fe=he[3],_e=he[4],de=he[5],Oe=Math.sin(ne),re=Math.cos(ne);return ae[0]=ue*re+ie*Oe,ae[1]=te*re+fe*Oe,ae[2]=ue*-Oe+ie*re,ae[3]=te*-Oe+fe*re,ae[4]=_e,ae[5]=de,ae}function A(ae,he,ne){const te=he[1],ie=he[2],fe=he[3],_e=he[4],de=he[5],Oe=ne[0],re=ne[1];return ae[0]=he[0]*Oe,ae[1]=te*Oe,ae[2]=ie*re,ae[3]=fe*re,ae[4]=_e,ae[5]=de,ae}function U(ae,he,ne){const ue=he[0],te=he[1],ie=he[2],fe=he[3],_e=he[4],de=he[5],Oe=ne[0],re=ne[1];return ae[0]=ue,ae[1]=te,ae[2]=ie,ae[3]=fe,ae[4]=ue*Oe+ie*re+_e,ae[5]=te*Oe+fe*re+de,ae}function N(ae,he){const ne=Math.sin(he),ue=Math.cos(he);return ae[0]=ue,ae[1]=ne,ae[2]=-ne,ae[3]=ue,ae[4]=0,ae[5]=0,ae}function J(ae,he){return ae[0]=he[0],ae[1]=0,ae[2]=0,ae[3]=he[1],ae[4]=0,ae[5]=0,ae}function Q(ae,he){return ae[0]=1,ae[1]=0,ae[2]=0,ae[3]=1,ae[4]=he[0],ae[5]=he[1],ae}function C(ae,he,ne){return ae[0]=he[0]-ne[0],ae[1]=he[1]-ne[1],ae[2]=he[2]-ne[2],ae[3]=he[3]-ne[3],ae[4]=he[4]-ne[4],ae[5]=he[5]-ne[5],ae}Object.freeze(Object.defineProperty({__proto__:null,add:function z(ae,he,ne){return ae[0]=he[0]+ne[0],ae[1]=he[1]+ne[1],ae[2]=he[2]+ne[2],ae[3]=he[3]+ne[3],ae[4]=he[4]+ne[4],ae[5]=he[5]+ne[5],ae},copy:function T(ae,he){return ae[0]=he[0],ae[1]=he[1],ae[2]=he[2],ae[3]=he[3],ae[4]=he[4],ae[5]=he[5],ae},determinant:function se(ae){return ae[0]*ae[3]-ae[1]*ae[2]},equals:function $(ae,he){const ne=ae[0],ue=ae[1],te=ae[2],ie=ae[3],fe=ae[4],_e=ae[5],de=he[0],Oe=he[1],re=he[2],le=he[3],ce=he[4],ve=he[5],Te=(0,E.g)();return Math.abs(ne-de)<=Te*Math.max(1,Math.abs(ne),Math.abs(de))&&Math.abs(ue-Oe)<=Te*Math.max(1,Math.abs(ue),Math.abs(Oe))&&Math.abs(te-re)<=Te*Math.max(1,Math.abs(te),Math.abs(re))&&Math.abs(ie-le)<=Te*Math.max(1,Math.abs(ie),Math.abs(le))&&Math.abs(fe-ce)<=Te*Math.max(1,Math.abs(fe),Math.abs(ce))&&Math.abs(_e-ve)<=Te*Math.max(1,Math.abs(_e),Math.abs(ve))},exactEquals:function B(ae,he){return ae[0]===he[0]&&ae[1]===he[1]&&ae[2]===he[2]&&ae[3]===he[3]&&ae[4]===he[4]&&ae[5]===he[5]},frob:function k(ae){return Math.sqrt(ae[0]**2+ae[1]**2+ae[2]**2+ae[3]**2+ae[4]**2+ae[5]**2+1)},fromRotation:N,fromScaling:J,fromTranslation:Q,identity:w,invert:x,mul:V,multiply:V,multiplyScalar:function D(ae,he,ne){return ae[0]=he[0]*ne,ae[1]=he[1]*ne,ae[2]=he[2]*ne,ae[3]=he[3]*ne,ae[4]=he[4]*ne,ae[5]=he[5]*ne,ae},multiplyScalarAndAdd:function F(ae,he,ne,ue){return ae[0]=he[0]+ne[0]*ue,ae[1]=he[1]+ne[1]*ue,ae[2]=he[2]+ne[2]*ue,ae[3]=he[3]+ne[3]*ue,ae[4]=he[4]+ne[4]*ue,ae[5]=he[5]+ne[5]*ue,ae},rotate:W,scale:A,set:Z,str:function G(ae){return"mat2d("+ae[0]+", "+ae[1]+", "+ae[2]+", "+ae[3]+", "+ae[4]+", "+ae[5]+")"},sub:C,subtract:C,translate:U},Symbol.toStringTag,{value:"Module"}))},80309:(He,Pe,g)=>{"use strict";function E(){const W=new Float32Array(6);return W[0]=1,W[3]=1,W}function x(W,A,U,N){const J=A[N],Q=A[N+1];W[N]=U[0]*J+U[2]*Q+U[4],W[N+1]=U[1]*J+U[3]*Q+U[5]}function se(W,A,U,N=0,J=0,Q=2){const G=J||A.length/Q;for(let k=N;k<G;k++)x(W,A,U,k*Q)}g.d(Pe,{c:()=>E,t:()=>se}),Object.freeze(Object.defineProperty({__proto__:null,clone:function T(W){const A=new Float32Array(6);return A[0]=W[0],A[1]=W[1],A[2]=W[2],A[3]=W[3],A[4]=W[4],A[5]=W[5],A},create:E,createView:function Z(W,A){return new Float32Array(W,A,6)},fromValues:function w(W,A,U,N,J,Q){const G=new Float32Array(6);return G[0]=W,G[1]=A,G[2]=U,G[3]=N,G[4]=J,G[5]=Q,G},transform:x,transformMany:se},Symbol.toStringTag,{value:"Module"}))},7562:(He,Pe,g)=>{"use strict";function E(){return[1,0,0,1,0,0]}g.d(Pe,{c:()=>E}),Object.freeze(Object.defineProperty({__proto__:null,clone:function T(se){return[se[0],se[1],se[2],se[3],se[4],se[5]]},create:E,createView:function Z(se,V){return new Float64Array(se,V,6)},fromValues:function w(se,V,W,A,U,N){return[se,V,W,A,U,N]}},Symbol.toStringTag,{value:"Module"}))},38974:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>W,b:()=>$,d:()=>Q,e:()=>V,f:()=>T,g:()=>x,h:()=>N,i:()=>fe,j:()=>k,k:()=>G,m:()=>U,r:()=>J,s:()=>Z,t:()=>se});var E=g(33980);function T(re,le){return re[0]=le[0],re[1]=le[1],re[2]=le[2],re[3]=le[4],re[4]=le[5],re[5]=le[6],re[6]=le[8],re[7]=le[9],re[8]=le[10],re}function Z(re,le,ce,ve,Te,ge,Ae,De,Se,me){return re[0]=le,re[1]=ce,re[2]=ve,re[3]=Te,re[4]=ge,re[5]=Ae,re[6]=De,re[7]=Se,re[8]=me,re}function x(re){return re[0]=1,re[1]=0,re[2]=0,re[3]=0,re[4]=1,re[5]=0,re[6]=0,re[7]=0,re[8]=1,re}function se(re,le){if(re===le){const ce=le[1],ve=le[2],Te=le[5];re[1]=le[3],re[2]=le[6],re[3]=ce,re[5]=le[7],re[6]=ve,re[7]=Te}else re[0]=le[0],re[1]=le[3],re[2]=le[6],re[3]=le[1],re[4]=le[4],re[5]=le[7],re[6]=le[2],re[7]=le[5],re[8]=le[8];return re}function V(re,le){const ce=le[0],ve=le[1],Te=le[2],ge=le[3],Ae=le[4],De=le[5],Se=le[6],me=le[7],ye=le[8],we=ye*Ae-De*me,$e=-ye*ge+De*Se,Ce=me*ge-Ae*Se;let Ie=ce*we+ve*$e+Te*Ce;return Ie?(Ie=1/Ie,re[0]=we*Ie,re[1]=(-ye*ve+Te*me)*Ie,re[2]=(De*ve-Te*Ae)*Ie,re[3]=$e*Ie,re[4]=(ye*ce-Te*Se)*Ie,re[5]=(-De*ce+Te*ge)*Ie,re[6]=Ce*Ie,re[7]=(-me*ce+ve*Se)*Ie,re[8]=(Ae*ce-ve*ge)*Ie,re):null}function W(re,le){const ce=le[0],ve=le[1],Te=le[2],ge=le[3],Ae=le[4],De=le[5],Se=le[6],me=le[7],ye=le[8];return re[0]=Ae*ye-De*me,re[1]=Te*me-ve*ye,re[2]=ve*De-Te*Ae,re[3]=De*Se-ge*ye,re[4]=ce*ye-Te*Se,re[5]=Te*ge-ce*De,re[6]=ge*me-Ae*Se,re[7]=ve*Se-ce*me,re[8]=ce*Ae-ve*ge,re}function U(re,le,ce){const ve=le[0],Te=le[1],ge=le[2],Ae=le[3],De=le[4],Se=le[5],me=le[6],ye=le[7],we=le[8],$e=ce[0],Ce=ce[1],Ie=ce[2],je=ce[3],Je=ce[4],oe=ce[5],be=ce[6],Ue=ce[7],Fe=ce[8];return re[0]=$e*ve+Ce*Ae+Ie*me,re[1]=$e*Te+Ce*De+Ie*ye,re[2]=$e*ge+Ce*Se+Ie*we,re[3]=je*ve+Je*Ae+oe*me,re[4]=je*Te+Je*De+oe*ye,re[5]=je*ge+Je*Se+oe*we,re[6]=be*ve+Ue*Ae+Fe*me,re[7]=be*Te+Ue*De+Fe*ye,re[8]=be*ge+Ue*Se+Fe*we,re}function N(re,le,ce){const ve=le[0],Te=le[1],ge=le[2],Ae=le[3],De=le[4],Se=le[5],me=le[6],ye=le[7],we=le[8],$e=ce[0],Ce=ce[1];return re[0]=ve,re[1]=Te,re[2]=ge,re[3]=Ae,re[4]=De,re[5]=Se,re[6]=$e*ve+Ce*Ae+me,re[7]=$e*Te+Ce*De+ye,re[8]=$e*ge+Ce*Se+we,re}function J(re,le,ce){const ve=le[0],Te=le[1],ge=le[2],Ae=le[3],De=le[4],Se=le[5],me=le[6],ye=le[7],we=le[8],$e=Math.sin(ce),Ce=Math.cos(ce);return re[0]=Ce*ve+$e*Ae,re[1]=Ce*Te+$e*De,re[2]=Ce*ge+$e*Se,re[3]=Ce*Ae-$e*ve,re[4]=Ce*De-$e*Te,re[5]=Ce*Se-$e*ge,re[6]=me,re[7]=ye,re[8]=we,re}function Q(re,le,ce){const ve=ce[0],Te=ce[1],ge=ce[2];return re[0]=ve*le[0],re[1]=ve*le[1],re[2]=ve*le[2],re[3]=Te*le[3],re[4]=Te*le[4],re[5]=Te*le[5],re[6]=ge*le[6],re[7]=ge*le[7],re[8]=ge*le[8],re}function G(re,le,ce){const ve=ce[0],Te=ce[1];return re[0]=ve*le[0],re[1]=ve*le[1],re[2]=ve*le[2],re[3]=Te*le[3],re[4]=Te*le[4],re[5]=Te*le[5],re}function k(re,le){return re[0]=1,re[1]=0,re[2]=0,re[3]=0,re[4]=1,re[5]=0,re[6]=le[0],re[7]=le[1],re[8]=1,re}function $(re,le){const ce=le[0],ve=le[1],Te=le[2],ge=le[3],Ae=le[4],De=le[5],Se=le[6],me=le[7],ye=le[8],we=le[9],$e=le[10],Ce=le[11],Ie=le[12],je=le[13],Je=le[14],oe=le[15],be=ce*De-ve*Ae,Ue=ce*Se-Te*Ae,Fe=ce*me-ge*Ae,Ke=ve*Se-Te*De,Ve=ve*me-ge*De,tt=Te*me-ge*Se,rt=ye*je-we*Ie,Ne=ye*Je-$e*Ie,qe=ye*oe-Ce*Ie,ft=we*Je-$e*je,Xe=we*oe-Ce*je,dt=$e*oe-Ce*Je;let Qe=be*dt-Ue*Xe+Fe*ft+Ke*qe-Ve*Ne+tt*rt;return Qe?(Qe=1/Qe,re[0]=(De*dt-Se*Xe+me*ft)*Qe,re[1]=(Se*qe-Ae*dt-me*Ne)*Qe,re[2]=(Ae*Xe-De*qe+me*rt)*Qe,re[3]=(Te*Xe-ve*dt-ge*ft)*Qe,re[4]=(ce*dt-Te*qe+ge*Ne)*Qe,re[5]=(ve*qe-ce*Xe-ge*rt)*Qe,re[6]=(je*tt-Je*Ve+oe*Ke)*Qe,re[7]=(Je*Fe-Ie*tt-oe*Ue)*Qe,re[8]=(Ie*Ve-je*Fe+oe*be)*Qe,re):null}function he(re,le,ce){return re[0]=le[0]-ce[0],re[1]=le[1]-ce[1],re[2]=le[2]-ce[2],re[3]=le[3]-ce[3],re[4]=le[4]-ce[4],re[5]=le[5]-ce[5],re[6]=le[6]-ce[6],re[7]=le[7]-ce[7],re[8]=le[8]-ce[8],re}function fe(re){const le=(0,E.g)(),ce=re[0],ve=re[1],Te=re[2],ge=re[3],Ae=re[4],De=re[5],Se=re[6],me=re[7],ye=re[8];return Math.abs(1-(ce*ce+ge*ge+Se*Se))<=le&&Math.abs(1-(ve*ve+Ae*Ae+me*me))<=le&&Math.abs(1-(Te*Te+De*De+ye*ye))<=le}Object.freeze(Object.defineProperty({__proto__:null,add:function ae(re,le,ce){return re[0]=le[0]+ce[0],re[1]=le[1]+ce[1],re[2]=le[2]+ce[2],re[3]=le[3]+ce[3],re[4]=le[4]+ce[4],re[5]=le[5]+ce[5],re[6]=le[6]+ce[6],re[7]=le[7]+ce[7],re[8]=le[8]+ce[8],re},adjoint:W,copy:function w(re,le){return re[0]=le[0],re[1]=le[1],re[2]=le[2],re[3]=le[3],re[4]=le[4],re[5]=le[5],re[6]=le[6],re[7]=le[7],re[8]=le[8],re},determinant:function A(re){const Te=re[3],ge=re[4],Ae=re[5],De=re[6],Se=re[7],me=re[8];return re[0]*(me*ge-Ae*Se)+re[1]*(-me*Te+Ae*De)+re[2]*(Se*Te-ge*De)},equals:function ie(re,le){const ce=re[0],ve=re[1],Te=re[2],ge=re[3],Ae=re[4],De=re[5],Se=re[6],me=re[7],ye=re[8],we=le[0],$e=le[1],Ce=le[2],Ie=le[3],je=le[4],Je=le[5],oe=le[6],be=le[7],Ue=le[8],Fe=(0,E.g)();return Math.abs(ce-we)<=Fe*Math.max(1,Math.abs(ce),Math.abs(we))&&Math.abs(ve-$e)<=Fe*Math.max(1,Math.abs(ve),Math.abs($e))&&Math.abs(Te-Ce)<=Fe*Math.max(1,Math.abs(Te),Math.abs(Ce))&&Math.abs(ge-Ie)<=Fe*Math.max(1,Math.abs(ge),Math.abs(Ie))&&Math.abs(Ae-je)<=Fe*Math.max(1,Math.abs(Ae),Math.abs(je))&&Math.abs(De-Je)<=Fe*Math.max(1,Math.abs(De),Math.abs(Je))&&Math.abs(Se-oe)<=Fe*Math.max(1,Math.abs(Se),Math.abs(oe))&&Math.abs(me-be)<=Fe*Math.max(1,Math.abs(me),Math.abs(be))&&Math.abs(ye-Ue)<=Fe*Math.max(1,Math.abs(ye),Math.abs(Ue))},exactEquals:function te(re,le){return re[0]===le[0]&&re[1]===le[1]&&re[2]===le[2]&&re[3]===le[3]&&re[4]===le[4]&&re[5]===le[5]&&re[6]===le[6]&&re[7]===le[7]&&re[8]===le[8]},frob:function Y(re){return Math.sqrt(re[0]**2+re[1]**2+re[2]**2+re[3]**2+re[4]**2+re[5]**2+re[6]**2+re[7]**2+re[8]**2)},fromMat2d:function D(re,le){return re[0]=le[0],re[1]=le[1],re[2]=0,re[3]=le[2],re[4]=le[3],re[5]=0,re[6]=le[4],re[7]=le[5],re[8]=1,re},fromMat4:T,fromQuat:function F(re,le){const ce=le[0],ve=le[1],Te=le[2],ge=le[3],Ae=ce+ce,De=ve+ve,Se=Te+Te,me=ce*Ae,ye=ve*Ae,we=ve*De,$e=Te*Ae,Ce=Te*De,Ie=Te*Se,je=ge*Ae,Je=ge*De,oe=ge*Se;return re[0]=1-we-Ie,re[3]=ye-oe,re[6]=$e+Je,re[1]=ye+oe,re[4]=1-me-Ie,re[7]=Ce-je,re[2]=$e-Je,re[5]=Ce+je,re[8]=1-me-we,re},fromRotation:function z(re,le){const ce=Math.sin(le),ve=Math.cos(le);return re[0]=ve,re[1]=ce,re[2]=0,re[3]=-ce,re[4]=ve,re[5]=0,re[6]=0,re[7]=0,re[8]=1,re},fromScaling:function C(re,le){return re[0]=le[0],re[1]=0,re[2]=0,re[3]=0,re[4]=le[1],re[5]=0,re[6]=0,re[7]=0,re[8]=1,re},fromTranslation:k,identity:x,invert:V,isOrthoNormal:fe,mul:U,multiply:U,multiplyScalar:function ne(re,le,ce){return re[0]=le[0]*ce,re[1]=le[1]*ce,re[2]=le[2]*ce,re[3]=le[3]*ce,re[4]=le[4]*ce,re[5]=le[5]*ce,re[6]=le[6]*ce,re[7]=le[7]*ce,re[8]=le[8]*ce,re},multiplyScalarAndAdd:function ue(re,le,ce,ve){return re[0]=le[0]+ce[0]*ve,re[1]=le[1]+ce[1]*ve,re[2]=le[2]+ce[2]*ve,re[3]=le[3]+ce[3]*ve,re[4]=le[4]+ce[4]*ve,re[5]=le[5]+ce[5]*ve,re[6]=le[6]+ce[6]*ve,re[7]=le[7]+ce[7]*ve,re[8]=le[8]+ce[8]*ve,re},normalFromMat4:$,normalFromMat4Legacy:function B(re,le){const ce=le[0],ve=le[1],Te=le[2],ge=le[4],Ae=le[5],De=le[6],Se=le[8],me=le[9],ye=le[10],we=ye*Ae-De*me,$e=-ye*ge+De*Se,Ce=me*ge-Ae*Se,Ie=ce*we+ve*$e+Te*Ce;if(!Ie)return null;const je=1/Ie;return re[0]=we*je,re[1]=(-ye*ve+Te*me)*je,re[2]=(De*ve-Te*Ae)*je,re[3]=$e*je,re[4]=(ye*ce-Te*Se)*je,re[5]=(-De*ce+Te*ge)*je,re[6]=Ce*je,re[7]=(-me*ce+ve*Se)*je,re[8]=(Ae*ce-ve*ge)*je,re},projection:function X(re,le,ce){return re[0]=2/le,re[1]=0,re[2]=0,re[3]=0,re[4]=-2/ce,re[5]=0,re[6]=-1,re[7]=1,re[8]=1,re},rotate:J,scale:Q,scaleByVec2:G,set:Z,str:function q(re){return"mat3("+re[0]+", "+re[1]+", "+re[2]+", "+re[3]+", "+re[4]+", "+re[5]+", "+re[6]+", "+re[7]+", "+re[8]+")"},sub:he,subtract:he,translate:N,transpose:se},Symbol.toStringTag,{value:"Module"}))},40334:(He,Pe,g)=>{"use strict";function E(){const se=new Float32Array(9);return se[0]=1,se[4]=1,se[8]=1,se}function T(se){const V=new Float32Array(9);return V[0]=se[0],V[1]=se[1],V[2]=se[2],V[3]=se[3],V[4]=se[4],V[5]=se[5],V[6]=se[6],V[7]=se[7],V[8]=se[8],V}function w(se,V,W,A,U,N,J,Q,G){const k=new Float32Array(9);return k[0]=se,k[1]=V,k[2]=W,k[3]=A,k[4]=U,k[5]=N,k[6]=J,k[7]=Q,k[8]=G,k}g.d(Pe,{a:()=>T,c:()=>E,f:()=>w}),Object.freeze(Object.defineProperty({__proto__:null,clone:T,create:E,createView:function Z(se,V){return new Float32Array(se,V,9)},fromValues:w},Symbol.toStringTag,{value:"Module"}))},64544:(He,Pe,g)=>{"use strict";g.d(Pe,{A:()=>$,a:()=>W,d:()=>B,e:()=>G,f:()=>D,g:()=>ie,h:()=>we,i:()=>x,j:()=>ye,k:()=>Q,m:()=>N,s:()=>Z,t:()=>se,w:()=>J,y:()=>Ce,z:()=>$e});var E=g(77765),T=g(33980);function Z(oe,be,Ue,Fe,Ke,Ve,tt,rt,Ne,qe,ft,Xe,dt,Qe,ot,ct,_t){return oe[0]=be,oe[1]=Ue,oe[2]=Fe,oe[3]=Ke,oe[4]=Ve,oe[5]=tt,oe[6]=rt,oe[7]=Ne,oe[8]=qe,oe[9]=ft,oe[10]=Xe,oe[11]=dt,oe[12]=Qe,oe[13]=ot,oe[14]=ct,oe[15]=_t,oe}function x(oe){return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=1,oe[6]=0,oe[7]=0,oe[8]=0,oe[9]=0,oe[10]=1,oe[11]=0,oe[12]=0,oe[13]=0,oe[14]=0,oe[15]=1,oe}function se(oe,be){if(oe===be){const Ue=be[1],Fe=be[2],Ke=be[3],Ve=be[6],tt=be[7],rt=be[11];oe[1]=be[4],oe[2]=be[8],oe[3]=be[12],oe[4]=Ue,oe[6]=be[9],oe[7]=be[13],oe[8]=Fe,oe[9]=Ve,oe[11]=be[14],oe[12]=Ke,oe[13]=tt,oe[14]=rt}else oe[0]=be[0],oe[1]=be[4],oe[2]=be[8],oe[3]=be[12],oe[4]=be[1],oe[5]=be[5],oe[6]=be[9],oe[7]=be[13],oe[8]=be[2],oe[9]=be[6],oe[10]=be[10],oe[11]=be[14],oe[12]=be[3],oe[13]=be[7],oe[14]=be[11],oe[15]=be[15];return oe}function W(oe,be){const Ue=be[0],Fe=be[1],Ke=be[2],Ve=be[3],tt=be[4],rt=be[5],Ne=be[6],qe=be[7],ft=be[8],Xe=be[9],dt=be[10],Qe=be[11],ot=be[12],ct=be[13],_t=be[14],Rt=be[15],qt=Ue*rt-Fe*tt,rs=Ue*Ne-Ke*tt,ss=Ue*qe-Ve*tt,vs=Fe*Ne-Ke*rt,Wt=Fe*qe-Ve*rt,as=Ke*qe-Ve*Ne,ys=ft*ct-Xe*ot,bt=ft*_t-dt*ot,Ts=ft*Rt-Qe*ot,nt=Xe*_t-dt*ct,mt=Xe*Rt-Qe*ct,Tt=dt*Rt-Qe*_t;let It=qt*Tt-rs*mt+ss*nt+vs*Ts-Wt*bt+as*ys;return It?(It=1/It,oe[0]=(rt*Tt-Ne*mt+qe*nt)*It,oe[1]=(Ke*mt-Fe*Tt-Ve*nt)*It,oe[2]=(ct*as-_t*Wt+Rt*vs)*It,oe[3]=(dt*Wt-Xe*as-Qe*vs)*It,oe[4]=(Ne*Ts-tt*Tt-qe*bt)*It,oe[5]=(Ue*Tt-Ke*Ts+Ve*bt)*It,oe[6]=(_t*ss-ot*as-Rt*rs)*It,oe[7]=(ft*as-dt*ss+Qe*rs)*It,oe[8]=(tt*mt-rt*Ts+qe*ys)*It,oe[9]=(Fe*Ts-Ue*mt-Ve*ys)*It,oe[10]=(ot*Wt-ct*ss+Rt*qt)*It,oe[11]=(Xe*ss-ft*Wt-Qe*qt)*It,oe[12]=(rt*bt-tt*nt-Ne*ys)*It,oe[13]=(Ue*nt-Fe*bt+Ke*ys)*It,oe[14]=(ct*rs-ot*vs-_t*qt)*It,oe[15]=(ft*vs-Xe*rs+dt*qt)*It,oe):null}function N(oe,be,Ue){const Fe=be[0],Ke=be[1],Ve=be[2],tt=be[3],rt=be[4],Ne=be[5],qe=be[6],ft=be[7],Xe=be[8],dt=be[9],Qe=be[10],ot=be[11],ct=be[12],_t=be[13],Rt=be[14],qt=be[15];let rs=Ue[0],ss=Ue[1],vs=Ue[2],Wt=Ue[3];return oe[0]=rs*Fe+ss*rt+vs*Xe+Wt*ct,oe[1]=rs*Ke+ss*Ne+vs*dt+Wt*_t,oe[2]=rs*Ve+ss*qe+vs*Qe+Wt*Rt,oe[3]=rs*tt+ss*ft+vs*ot+Wt*qt,rs=Ue[4],ss=Ue[5],vs=Ue[6],Wt=Ue[7],oe[4]=rs*Fe+ss*rt+vs*Xe+Wt*ct,oe[5]=rs*Ke+ss*Ne+vs*dt+Wt*_t,oe[6]=rs*Ve+ss*qe+vs*Qe+Wt*Rt,oe[7]=rs*tt+ss*ft+vs*ot+Wt*qt,rs=Ue[8],ss=Ue[9],vs=Ue[10],Wt=Ue[11],oe[8]=rs*Fe+ss*rt+vs*Xe+Wt*ct,oe[9]=rs*Ke+ss*Ne+vs*dt+Wt*_t,oe[10]=rs*Ve+ss*qe+vs*Qe+Wt*Rt,oe[11]=rs*tt+ss*ft+vs*ot+Wt*qt,rs=Ue[12],ss=Ue[13],vs=Ue[14],Wt=Ue[15],oe[12]=rs*Fe+ss*rt+vs*Xe+Wt*ct,oe[13]=rs*Ke+ss*Ne+vs*dt+Wt*_t,oe[14]=rs*Ve+ss*qe+vs*Qe+Wt*Rt,oe[15]=rs*tt+ss*ft+vs*ot+Wt*qt,oe}function J(oe,be,Ue){const Fe=Ue[0],Ke=Ue[1],Ve=Ue[2];if(be===oe)oe[12]=be[0]*Fe+be[4]*Ke+be[8]*Ve+be[12],oe[13]=be[1]*Fe+be[5]*Ke+be[9]*Ve+be[13],oe[14]=be[2]*Fe+be[6]*Ke+be[10]*Ve+be[14],oe[15]=be[3]*Fe+be[7]*Ke+be[11]*Ve+be[15];else{const tt=be[0],rt=be[1],Ne=be[2],qe=be[3],ft=be[4],Xe=be[5],dt=be[6],Qe=be[7],ot=be[8],ct=be[9],_t=be[10],Rt=be[11];oe[0]=tt,oe[1]=rt,oe[2]=Ne,oe[3]=qe,oe[4]=ft,oe[5]=Xe,oe[6]=dt,oe[7]=Qe,oe[8]=ot,oe[9]=ct,oe[10]=_t,oe[11]=Rt,oe[12]=tt*Fe+ft*Ke+ot*Ve+be[12],oe[13]=rt*Fe+Xe*Ke+ct*Ve+be[13],oe[14]=Ne*Fe+dt*Ke+_t*Ve+be[14],oe[15]=qe*Fe+Qe*Ke+Rt*Ve+be[15]}return oe}function Q(oe,be,Ue){const Fe=Ue[0],Ke=Ue[1],Ve=Ue[2];return oe[0]=be[0]*Fe,oe[1]=be[1]*Fe,oe[2]=be[2]*Fe,oe[3]=be[3]*Fe,oe[4]=be[4]*Ke,oe[5]=be[5]*Ke,oe[6]=be[6]*Ke,oe[7]=be[7]*Ke,oe[8]=be[8]*Ve,oe[9]=be[9]*Ve,oe[10]=be[10]*Ve,oe[11]=be[11]*Ve,oe[12]=be[12],oe[13]=be[13],oe[14]=be[14],oe[15]=be[15],oe}function G(oe,be,Ue,Fe){let Ke,Ve,tt,rt,Ne,qe,ft,Xe,dt,Qe,ot,ct,_t,Rt,qt,rs,ss,vs,Wt,as,ys,bt,Ts,nt,mt=Fe[0],Tt=Fe[1],It=Fe[2],Zt=Math.sqrt(mt*mt+Tt*Tt+It*It);return Zt<(0,T.g)()?null:(Zt=1/Zt,mt*=Zt,Tt*=Zt,It*=Zt,Ke=Math.sin(Ue),Ve=Math.cos(Ue),tt=1-Ve,rt=be[0],Ne=be[1],qe=be[2],ft=be[3],Xe=be[4],dt=be[5],Qe=be[6],ot=be[7],ct=be[8],_t=be[9],Rt=be[10],qt=be[11],rs=mt*mt*tt+Ve,ss=Tt*mt*tt+It*Ke,vs=It*mt*tt-Tt*Ke,Wt=mt*Tt*tt-It*Ke,as=Tt*Tt*tt+Ve,ys=It*Tt*tt+mt*Ke,bt=mt*It*tt+Tt*Ke,Ts=Tt*It*tt-mt*Ke,nt=It*It*tt+Ve,oe[0]=rt*rs+Xe*ss+ct*vs,oe[1]=Ne*rs+dt*ss+_t*vs,oe[2]=qe*rs+Qe*ss+Rt*vs,oe[3]=ft*rs+ot*ss+qt*vs,oe[4]=rt*Wt+Xe*as+ct*ys,oe[5]=Ne*Wt+dt*as+_t*ys,oe[6]=qe*Wt+Qe*as+Rt*ys,oe[7]=ft*Wt+ot*as+qt*ys,oe[8]=rt*bt+Xe*Ts+ct*nt,oe[9]=Ne*bt+dt*Ts+_t*nt,oe[10]=qe*bt+Qe*Ts+Rt*nt,oe[11]=ft*bt+ot*Ts+qt*nt,be!==oe&&(oe[12]=be[12],oe[13]=be[13],oe[14]=be[14],oe[15]=be[15]),oe)}function D(oe,be){return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=1,oe[6]=0,oe[7]=0,oe[8]=0,oe[9]=0,oe[10]=1,oe[11]=0,oe[12]=be[0],oe[13]=be[1],oe[14]=be[2],oe[15]=1,oe}function B(oe,be,Ue){if(0===be)return x(oe);let Fe,Ke,Ve,tt=Ue[0],rt=Ue[1],Ne=Ue[2],qe=Math.sqrt(tt*tt+rt*rt+Ne*Ne);return qe<(0,T.g)()?null:(qe=1/qe,tt*=qe,rt*=qe,Ne*=qe,Fe=Math.sin(be),Ke=Math.cos(be),Ve=1-Ke,oe[0]=tt*tt*Ve+Ke,oe[1]=rt*tt*Ve+Ne*Fe,oe[2]=Ne*tt*Ve-rt*Fe,oe[3]=0,oe[4]=tt*rt*Ve-Ne*Fe,oe[5]=rt*rt*Ve+Ke,oe[6]=Ne*rt*Ve+tt*Fe,oe[7]=0,oe[8]=tt*Ne*Ve+rt*Fe,oe[9]=rt*Ne*Ve-tt*Fe,oe[10]=Ne*Ne*Ve+Ke,oe[11]=0,oe[12]=0,oe[13]=0,oe[14]=0,oe[15]=1,oe)}function $(oe,be){const Ue=Math.sin(be),Fe=Math.cos(be);return oe[0]=1,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=Fe,oe[6]=Ue,oe[7]=0,oe[8]=0,oe[9]=-Ue,oe[10]=Fe,oe[11]=0,oe[12]=0,oe[13]=0,oe[14]=0,oe[15]=1,oe}function Y(oe,be,Ue){const Fe=be[0],Ke=be[1],Ve=be[2],tt=be[3],rt=Fe+Fe,Ne=Ke+Ke,qe=Ve+Ve,ft=Fe*rt,Xe=Fe*Ne,dt=Fe*qe,Qe=Ke*Ne,ot=Ke*qe,ct=Ve*qe,_t=tt*rt,Rt=tt*Ne,qt=tt*qe;return oe[0]=1-(Qe+ct),oe[1]=Xe+qt,oe[2]=dt-Rt,oe[3]=0,oe[4]=Xe-qt,oe[5]=1-(ft+ct),oe[6]=ot+_t,oe[7]=0,oe[8]=dt+Rt,oe[9]=ot-_t,oe[10]=1-(ft+Qe),oe[11]=0,oe[12]=Ue[0],oe[13]=Ue[1],oe[14]=Ue[2],oe[15]=1,oe}const he=(0,E.c)();function ie(oe,be,Ue,Fe){const Ke=be[0],Ve=be[1],tt=be[2],rt=be[3],Ne=Ke+Ke,qe=Ve+Ve,ft=tt+tt,Xe=Ke*Ne,dt=Ke*qe,Qe=Ke*ft,ot=Ve*qe,ct=Ve*ft,_t=tt*ft,Rt=rt*Ne,qt=rt*qe,rs=rt*ft,ss=Fe[0],vs=Fe[1],Wt=Fe[2];return oe[0]=(1-(ot+_t))*ss,oe[1]=(dt+rs)*ss,oe[2]=(Qe-qt)*ss,oe[3]=0,oe[4]=(dt-rs)*vs,oe[5]=(1-(Xe+_t))*vs,oe[6]=(ct+Rt)*vs,oe[7]=0,oe[8]=(Qe+qt)*Wt,oe[9]=(ct-Rt)*Wt,oe[10]=(1-(Xe+ot))*Wt,oe[11]=0,oe[12]=Ue[0],oe[13]=Ue[1],oe[14]=Ue[2],oe[15]=1,oe}function De(oe,be,Ue){return oe[0]=be[0]-Ue[0],oe[1]=be[1]-Ue[1],oe[2]=be[2]-Ue[2],oe[3]=be[3]-Ue[3],oe[4]=be[4]-Ue[4],oe[5]=be[5]-Ue[5],oe[6]=be[6]-Ue[6],oe[7]=be[7]-Ue[7],oe[8]=be[8]-Ue[8],oe[9]=be[9]-Ue[9],oe[10]=be[10]-Ue[10],oe[11]=be[11]-Ue[11],oe[12]=be[12]-Ue[12],oe[13]=be[13]-Ue[13],oe[14]=be[14]-Ue[14],oe[15]=be[15]-Ue[15],oe}function ye(oe,be){return oe[0]===be[0]&&oe[1]===be[1]&&oe[2]===be[2]&&oe[3]===be[3]&&oe[4]===be[4]&&oe[5]===be[5]&&oe[6]===be[6]&&oe[7]===be[7]&&oe[8]===be[8]&&oe[9]===be[9]&&oe[10]===be[10]&&oe[11]===be[11]&&oe[12]===be[12]&&oe[13]===be[13]&&oe[14]===be[14]&&oe[15]===be[15]}function we(oe,be){if(oe===be)return!0;const Ue=oe[0],Fe=oe[1],Ke=oe[2],Ve=oe[3],tt=oe[4],rt=oe[5],Ne=oe[6],qe=oe[7],ft=oe[8],Xe=oe[9],dt=oe[10],Qe=oe[11],ot=oe[12],ct=oe[13],_t=oe[14],Rt=oe[15],qt=be[0],rs=be[1],ss=be[2],vs=be[3],Wt=be[4],as=be[5],ys=be[6],bt=be[7],Ts=be[8],nt=be[9],mt=be[10],Tt=be[11],It=be[12],Zt=be[13],Kt=be[14],Vt=be[15],Nt=(0,T.g)();return Math.abs(Ue-qt)<=Nt*Math.max(1,Math.abs(Ue),Math.abs(qt))&&Math.abs(Fe-rs)<=Nt*Math.max(1,Math.abs(Fe),Math.abs(rs))&&Math.abs(Ke-ss)<=Nt*Math.max(1,Math.abs(Ke),Math.abs(ss))&&Math.abs(Ve-vs)<=Nt*Math.max(1,Math.abs(Ve),Math.abs(vs))&&Math.abs(tt-Wt)<=Nt*Math.max(1,Math.abs(tt),Math.abs(Wt))&&Math.abs(rt-as)<=Nt*Math.max(1,Math.abs(rt),Math.abs(as))&&Math.abs(Ne-ys)<=Nt*Math.max(1,Math.abs(Ne),Math.abs(ys))&&Math.abs(qe-bt)<=Nt*Math.max(1,Math.abs(qe),Math.abs(bt))&&Math.abs(ft-Ts)<=Nt*Math.max(1,Math.abs(ft),Math.abs(Ts))&&Math.abs(Xe-nt)<=Nt*Math.max(1,Math.abs(Xe),Math.abs(nt))&&Math.abs(dt-mt)<=Nt*Math.max(1,Math.abs(dt),Math.abs(mt))&&Math.abs(Qe-Tt)<=Nt*Math.max(1,Math.abs(Qe),Math.abs(Tt))&&Math.abs(ot-It)<=Nt*Math.max(1,Math.abs(ot),Math.abs(It))&&Math.abs(ct-Zt)<=Nt*Math.max(1,Math.abs(ct),Math.abs(Zt))&&Math.abs(_t-Kt)<=Nt*Math.max(1,Math.abs(_t),Math.abs(Kt))&&Math.abs(Rt-Vt)<=Nt*Math.max(1,Math.abs(Rt),Math.abs(Vt))}function $e(oe){const be=(0,T.g)(),Ue=oe[0],Fe=oe[1],Ke=oe[2],Ve=oe[4],tt=oe[5],rt=oe[6],Ne=oe[8],qe=oe[9],ft=oe[10];return Math.abs(1-(Ue*Ue+Ve*Ve+Ne*Ne))<=be&&Math.abs(1-(Fe*Fe+tt*tt+qe*qe))<=be&&Math.abs(1-(Ke*Ke+rt*rt+ft*ft))<=be}function Ce(oe){return 1===oe[0]&&0===oe[1]&&0===oe[2]&&0===oe[4]&&1===oe[5]&&0===oe[6]&&0===oe[8]&&0===oe[9]&&1===oe[10]}Object.freeze(Object.defineProperty({__proto__:null,add:function Ae(oe,be,Ue){return oe[0]=be[0]+Ue[0],oe[1]=be[1]+Ue[1],oe[2]=be[2]+Ue[2],oe[3]=be[3]+Ue[3],oe[4]=be[4]+Ue[4],oe[5]=be[5]+Ue[5],oe[6]=be[6]+Ue[6],oe[7]=be[7]+Ue[7],oe[8]=be[8]+Ue[8],oe[9]=be[9]+Ue[9],oe[10]=be[10]+Ue[10],oe[11]=be[11]+Ue[11],oe[12]=be[12]+Ue[12],oe[13]=be[13]+Ue[13],oe[14]=be[14]+Ue[14],oe[15]=be[15]+Ue[15],oe},adjoint:function A(oe,be){const Ue=be[0],Fe=be[1],Ke=be[2],Ve=be[3],tt=be[4],rt=be[5],Ne=be[6],qe=be[7],ft=be[8],Xe=be[9],dt=be[10],Qe=be[11],ot=be[12],ct=be[13],_t=be[14],Rt=be[15];return oe[0]=rt*(dt*Rt-Qe*_t)-Xe*(Ne*Rt-qe*_t)+ct*(Ne*Qe-qe*dt),oe[1]=-(Fe*(dt*Rt-Qe*_t)-Xe*(Ke*Rt-Ve*_t)+ct*(Ke*Qe-Ve*dt)),oe[2]=Fe*(Ne*Rt-qe*_t)-rt*(Ke*Rt-Ve*_t)+ct*(Ke*qe-Ve*Ne),oe[3]=-(Fe*(Ne*Qe-qe*dt)-rt*(Ke*Qe-Ve*dt)+Xe*(Ke*qe-Ve*Ne)),oe[4]=-(tt*(dt*Rt-Qe*_t)-ft*(Ne*Rt-qe*_t)+ot*(Ne*Qe-qe*dt)),oe[5]=Ue*(dt*Rt-Qe*_t)-ft*(Ke*Rt-Ve*_t)+ot*(Ke*Qe-Ve*dt),oe[6]=-(Ue*(Ne*Rt-qe*_t)-tt*(Ke*Rt-Ve*_t)+ot*(Ke*qe-Ve*Ne)),oe[7]=Ue*(Ne*Qe-qe*dt)-tt*(Ke*Qe-Ve*dt)+ft*(Ke*qe-Ve*Ne),oe[8]=tt*(Xe*Rt-Qe*ct)-ft*(rt*Rt-qe*ct)+ot*(rt*Qe-qe*Xe),oe[9]=-(Ue*(Xe*Rt-Qe*ct)-ft*(Fe*Rt-Ve*ct)+ot*(Fe*Qe-Ve*Xe)),oe[10]=Ue*(rt*Rt-qe*ct)-tt*(Fe*Rt-Ve*ct)+ot*(Fe*qe-Ve*rt),oe[11]=-(Ue*(rt*Qe-qe*Xe)-tt*(Fe*Qe-Ve*Xe)+ft*(Fe*qe-Ve*rt)),oe[12]=-(tt*(Xe*_t-dt*ct)-ft*(rt*_t-Ne*ct)+ot*(rt*dt-Ne*Xe)),oe[13]=Ue*(Xe*_t-dt*ct)-ft*(Fe*_t-Ke*ct)+ot*(Fe*dt-Ke*Xe),oe[14]=-(Ue*(rt*_t-Ne*ct)-tt*(Fe*_t-Ke*ct)+ot*(Fe*Ne-Ke*rt)),oe[15]=Ue*(rt*dt-Ne*Xe)-tt*(Fe*dt-Ke*Xe)+ft*(Fe*Ne-Ke*rt),oe},copy:function w(oe,be){return oe[0]=be[0],oe[1]=be[1],oe[2]=be[2],oe[3]=be[3],oe[4]=be[4],oe[5]=be[5],oe[6]=be[6],oe[7]=be[7],oe[8]=be[8],oe[9]=be[9],oe[10]=be[10],oe[11]=be[11],oe[12]=be[12],oe[13]=be[13],oe[14]=be[14],oe[15]=be[15],oe},determinant:function U(oe){const be=oe[0],Ue=oe[1],Fe=oe[2],Ke=oe[3],Ve=oe[4],tt=oe[5],rt=oe[6],Ne=oe[7],qe=oe[8],ft=oe[9],Xe=oe[10],dt=oe[11],Qe=oe[12],ot=oe[13],ct=oe[14],_t=oe[15];return(be*tt-Ue*Ve)*(Xe*_t-dt*ct)-(be*rt-Fe*Ve)*(ft*_t-dt*ot)+(be*Ne-Ke*Ve)*(ft*ct-Xe*ot)+(Ue*rt-Fe*tt)*(qe*_t-dt*Qe)-(Ue*Ne-Ke*tt)*(qe*ct-Xe*Qe)+(Fe*Ne-Ke*rt)*(qe*ot-ft*Qe)},equals:we,exactEquals:ye,frob:function ge(oe){return Math.sqrt(oe[0]**2+oe[1]**2+oe[2]**2+oe[3]**2+oe[4]**2+oe[5]**2+oe[6]**2+oe[7]**2+oe[8]**2+oe[9]**2+oe[10]**2+oe[11]**2+oe[12]**2+oe[13]**2+oe[14]**2+oe[15]**2)},fromQuat:function _e(oe,be){const Ue=be[0],Fe=be[1],Ke=be[2],Ve=be[3],tt=Ue+Ue,rt=Fe+Fe,Ne=Ke+Ke,qe=Ue*tt,ft=Fe*tt,Xe=Fe*rt,dt=Ke*tt,Qe=Ke*rt,ot=Ke*Ne,ct=Ve*tt,_t=Ve*rt,Rt=Ve*Ne;return oe[0]=1-Xe-ot,oe[1]=ft+Rt,oe[2]=dt-_t,oe[3]=0,oe[4]=ft-Rt,oe[5]=1-qe-ot,oe[6]=Qe+ct,oe[7]=0,oe[8]=dt+_t,oe[9]=Qe-ct,oe[10]=1-qe-Xe,oe[11]=0,oe[12]=0,oe[13]=0,oe[14]=0,oe[15]=1,oe},fromQuat2:function ae(oe,be){const Ue=he,Fe=-be[0],Ke=-be[1],Ve=-be[2],tt=be[3],rt=be[4],Ne=be[5],qe=be[6],ft=be[7],Xe=Fe*Fe+Ke*Ke+Ve*Ve+tt*tt;return Xe>0?(Ue[0]=2*(rt*tt+ft*Fe+Ne*Ve-qe*Ke)/Xe,Ue[1]=2*(Ne*tt+ft*Ke+qe*Fe-rt*Ve)/Xe,Ue[2]=2*(qe*tt+ft*Ve+rt*Ke-Ne*Fe)/Xe):(Ue[0]=2*(rt*tt+ft*Fe+Ne*Ve-qe*Ke),Ue[1]=2*(Ne*tt+ft*Ke+qe*Fe-rt*Ve),Ue[2]=2*(qe*tt+ft*Ve+rt*Ke-Ne*Fe)),Y(oe,be,Ue),oe},fromRotation:B,fromRotationTranslation:Y,fromRotationTranslationScale:ie,fromRotationTranslationScaleOrigin:function fe(oe,be,Ue,Fe,Ke){const Ve=be[0],tt=be[1],rt=be[2],Ne=be[3],qe=Ve+Ve,ft=tt+tt,Xe=rt+rt,dt=Ve*qe,Qe=Ve*ft,ot=Ve*Xe,ct=tt*ft,_t=tt*Xe,Rt=rt*Xe,qt=Ne*qe,rs=Ne*ft,ss=Ne*Xe,vs=Fe[0],Wt=Fe[1],as=Fe[2],ys=Ke[0],bt=Ke[1],Ts=Ke[2],nt=(1-(ct+Rt))*vs,mt=(Qe+ss)*vs,Tt=(ot-rs)*vs,It=(Qe-ss)*Wt,Zt=(1-(dt+Rt))*Wt,Kt=(_t+qt)*Wt,Vt=(ot+rs)*as,Nt=(_t-qt)*as,ls=(1-(dt+ct))*as;return oe[0]=nt,oe[1]=mt,oe[2]=Tt,oe[3]=0,oe[4]=It,oe[5]=Zt,oe[6]=Kt,oe[7]=0,oe[8]=Vt,oe[9]=Nt,oe[10]=ls,oe[11]=0,oe[12]=Ue[0]+ys-(nt*ys+It*bt+Vt*Ts),oe[13]=Ue[1]+bt-(mt*ys+Zt*bt+Nt*Ts),oe[14]=Ue[2]+Ts-(Tt*ys+Kt*bt+ls*Ts),oe[15]=1,oe},fromScaling:function F(oe,be){return oe[0]=be[0],oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=be[1],oe[6]=0,oe[7]=0,oe[8]=0,oe[9]=0,oe[10]=be[2],oe[11]=0,oe[12]=0,oe[13]=0,oe[14]=0,oe[15]=1,oe},fromTranslation:D,fromXRotation:$,fromYRotation:function X(oe,be){const Ue=Math.sin(be),Fe=Math.cos(be);return oe[0]=Fe,oe[1]=0,oe[2]=-Ue,oe[3]=0,oe[4]=0,oe[5]=1,oe[6]=0,oe[7]=0,oe[8]=Ue,oe[9]=0,oe[10]=Fe,oe[11]=0,oe[12]=0,oe[13]=0,oe[14]=0,oe[15]=1,oe},fromZRotation:function q(oe,be){const Ue=Math.sin(be),Fe=Math.cos(be);return oe[0]=Fe,oe[1]=Ue,oe[2]=0,oe[3]=0,oe[4]=-Ue,oe[5]=Fe,oe[6]=0,oe[7]=0,oe[8]=0,oe[9]=0,oe[10]=1,oe[11]=0,oe[12]=0,oe[13]=0,oe[14]=0,oe[15]=1,oe},frustum:function de(oe,be,Ue,Fe,Ke,Ve,tt){const rt=1/(Ue-be),Ne=1/(Ke-Fe),qe=1/(Ve-tt);return oe[0]=2*Ve*rt,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=2*Ve*Ne,oe[6]=0,oe[7]=0,oe[8]=(Ue+be)*rt,oe[9]=(Ke+Fe)*Ne,oe[10]=(tt+Ve)*qe,oe[11]=-1,oe[12]=0,oe[13]=0,oe[14]=tt*Ve*2*qe,oe[15]=0,oe},getRotation:function te(oe,be){const Ue=be[0]+be[5]+be[10];let Fe=0;return Ue>0?(Fe=2*Math.sqrt(Ue+1),oe[3]=.25*Fe,oe[0]=(be[6]-be[9])/Fe,oe[1]=(be[8]-be[2])/Fe,oe[2]=(be[1]-be[4])/Fe):be[0]>be[5]&&be[0]>be[10]?(Fe=2*Math.sqrt(1+be[0]-be[5]-be[10]),oe[3]=(be[6]-be[9])/Fe,oe[0]=.25*Fe,oe[1]=(be[1]+be[4])/Fe,oe[2]=(be[8]+be[2])/Fe):be[5]>be[10]?(Fe=2*Math.sqrt(1+be[5]-be[0]-be[10]),oe[3]=(be[8]-be[2])/Fe,oe[0]=(be[1]+be[4])/Fe,oe[1]=.25*Fe,oe[2]=(be[6]+be[9])/Fe):(Fe=2*Math.sqrt(1+be[10]-be[0]-be[5]),oe[3]=(be[1]-be[4])/Fe,oe[0]=(be[8]+be[2])/Fe,oe[1]=(be[6]+be[9])/Fe,oe[2]=.25*Fe),oe},getScaling:function ue(oe,be){const Ue=be[0],Fe=be[1],Ke=be[2],Ve=be[4],tt=be[5],rt=be[6],Ne=be[8],qe=be[9],ft=be[10];return oe[0]=Math.sqrt(Ue*Ue+Fe*Fe+Ke*Ke),oe[1]=Math.sqrt(Ve*Ve+tt*tt+rt*rt),oe[2]=Math.sqrt(Ne*Ne+qe*qe+ft*ft),oe},getTranslation:function ne(oe,be){return oe[0]=be[12],oe[1]=be[13],oe[2]=be[14],oe},hasIdentityRotation:Ce,identity:x,invert:W,invertOrIdentity:function V(oe,be){return W(oe,be)||x(oe),oe},isOrthoNormal:$e,lookAt:function ce(oe,be,Ue,Fe){let Ke,Ve,tt,rt,Ne,qe,ft,Xe,dt,Qe;const ot=be[0],ct=be[1],_t=be[2],Rt=Fe[0],qt=Fe[1],rs=Fe[2],ss=Ue[0],vs=Ue[1],Wt=Ue[2],as=(0,T.g)();return Math.abs(ot-ss)<as&&Math.abs(ct-vs)<as&&Math.abs(_t-Wt)<as?x(oe):(ft=ot-ss,Xe=ct-vs,dt=_t-Wt,Qe=1/Math.sqrt(ft*ft+Xe*Xe+dt*dt),ft*=Qe,Xe*=Qe,dt*=Qe,Ke=qt*dt-rs*Xe,Ve=rs*ft-Rt*dt,tt=Rt*Xe-qt*ft,Qe=Math.sqrt(Ke*Ke+Ve*Ve+tt*tt),Qe?(Qe=1/Qe,Ke*=Qe,Ve*=Qe,tt*=Qe):(Ke=0,Ve=0,tt=0),rt=Xe*tt-dt*Ve,Ne=dt*Ke-ft*tt,qe=ft*Ve-Xe*Ke,Qe=Math.sqrt(rt*rt+Ne*Ne+qe*qe),Qe?(Qe=1/Qe,rt*=Qe,Ne*=Qe,qe*=Qe):(rt=0,Ne=0,qe=0),oe[0]=Ke,oe[1]=rt,oe[2]=ft,oe[3]=0,oe[4]=Ve,oe[5]=Ne,oe[6]=Xe,oe[7]=0,oe[8]=tt,oe[9]=qe,oe[10]=dt,oe[11]=0,oe[12]=-(Ke*ot+Ve*ct+tt*_t),oe[13]=-(rt*ot+Ne*ct+qe*_t),oe[14]=-(ft*ot+Xe*ct+dt*_t),oe[15]=1,oe)},mul:N,multiply:N,multiplyScalar:function Se(oe,be,Ue){return oe[0]=be[0]*Ue,oe[1]=be[1]*Ue,oe[2]=be[2]*Ue,oe[3]=be[3]*Ue,oe[4]=be[4]*Ue,oe[5]=be[5]*Ue,oe[6]=be[6]*Ue,oe[7]=be[7]*Ue,oe[8]=be[8]*Ue,oe[9]=be[9]*Ue,oe[10]=be[10]*Ue,oe[11]=be[11]*Ue,oe[12]=be[12]*Ue,oe[13]=be[13]*Ue,oe[14]=be[14]*Ue,oe[15]=be[15]*Ue,oe},multiplyScalarAndAdd:function me(oe,be,Ue,Fe){return oe[0]=be[0]+Ue[0]*Fe,oe[1]=be[1]+Ue[1]*Fe,oe[2]=be[2]+Ue[2]*Fe,oe[3]=be[3]+Ue[3]*Fe,oe[4]=be[4]+Ue[4]*Fe,oe[5]=be[5]+Ue[5]*Fe,oe[6]=be[6]+Ue[6]*Fe,oe[7]=be[7]+Ue[7]*Fe,oe[8]=be[8]+Ue[8]*Fe,oe[9]=be[9]+Ue[9]*Fe,oe[10]=be[10]+Ue[10]*Fe,oe[11]=be[11]+Ue[11]*Fe,oe[12]=be[12]+Ue[12]*Fe,oe[13]=be[13]+Ue[13]*Fe,oe[14]=be[14]+Ue[14]*Fe,oe[15]=be[15]+Ue[15]*Fe,oe},ortho:function le(oe,be,Ue,Fe,Ke,Ve,tt){const rt=1/(be-Ue),Ne=1/(Fe-Ke),qe=1/(Ve-tt);return oe[0]=-2*rt,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=-2*Ne,oe[6]=0,oe[7]=0,oe[8]=0,oe[9]=0,oe[10]=2*qe,oe[11]=0,oe[12]=(be+Ue)*rt,oe[13]=(Ke+Fe)*Ne,oe[14]=(tt+Ve)*qe,oe[15]=1,oe},perspective:function Oe(oe,be,Ue,Fe,Ke){const Ve=1/Math.tan(be/2);let tt;return oe[0]=Ve/Ue,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=Ve,oe[6]=0,oe[7]=0,oe[8]=0,oe[9]=0,oe[11]=-1,oe[12]=0,oe[13]=0,oe[15]=0,null!=Ke&&Ke!==1/0?(tt=1/(Fe-Ke),oe[10]=(Ke+Fe)*tt,oe[14]=2*Ke*Fe*tt):(oe[10]=-1,oe[14]=-2*Fe),oe},perspectiveFromFieldOfView:function re(oe,be,Ue,Fe){const Ke=Math.tan(be.upDegrees*Math.PI/180),Ve=Math.tan(be.downDegrees*Math.PI/180),tt=Math.tan(be.leftDegrees*Math.PI/180),rt=Math.tan(be.rightDegrees*Math.PI/180),Ne=2/(tt+rt),qe=2/(Ke+Ve);return oe[0]=Ne,oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[5]=qe,oe[6]=0,oe[7]=0,oe[8]=-(tt-rt)*Ne*.5,oe[9]=(Ke-Ve)*qe*.5,oe[10]=Fe/(Ue-Fe),oe[11]=-1,oe[12]=0,oe[13]=0,oe[14]=Fe*Ue/(Ue-Fe),oe[15]=0,oe},rotate:G,rotateX:function k(oe,be,Ue){const Fe=Math.sin(Ue),Ke=Math.cos(Ue),Ve=be[4],tt=be[5],rt=be[6],Ne=be[7],qe=be[8],ft=be[9],Xe=be[10],dt=be[11];return be!==oe&&(oe[0]=be[0],oe[1]=be[1],oe[2]=be[2],oe[3]=be[3],oe[12]=be[12],oe[13]=be[13],oe[14]=be[14],oe[15]=be[15]),oe[4]=Ve*Ke+qe*Fe,oe[5]=tt*Ke+ft*Fe,oe[6]=rt*Ke+Xe*Fe,oe[7]=Ne*Ke+dt*Fe,oe[8]=qe*Ke-Ve*Fe,oe[9]=ft*Ke-tt*Fe,oe[10]=Xe*Ke-rt*Fe,oe[11]=dt*Ke-Ne*Fe,oe},rotateY:function z(oe,be,Ue){const Fe=Math.sin(Ue),Ke=Math.cos(Ue),Ve=be[0],tt=be[1],rt=be[2],Ne=be[3],qe=be[8],ft=be[9],Xe=be[10],dt=be[11];return be!==oe&&(oe[4]=be[4],oe[5]=be[5],oe[6]=be[6],oe[7]=be[7],oe[12]=be[12],oe[13]=be[13],oe[14]=be[14],oe[15]=be[15]),oe[0]=Ve*Ke-qe*Fe,oe[1]=tt*Ke-ft*Fe,oe[2]=rt*Ke-Xe*Fe,oe[3]=Ne*Ke-dt*Fe,oe[8]=Ve*Fe+qe*Ke,oe[9]=tt*Fe+ft*Ke,oe[10]=rt*Fe+Xe*Ke,oe[11]=Ne*Fe+dt*Ke,oe},rotateZ:function C(oe,be,Ue){const Fe=Math.sin(Ue),Ke=Math.cos(Ue),Ve=be[0],tt=be[1],rt=be[2],Ne=be[3],qe=be[4],ft=be[5],Xe=be[6],dt=be[7];return be!==oe&&(oe[8]=be[8],oe[9]=be[9],oe[10]=be[10],oe[11]=be[11],oe[12]=be[12],oe[13]=be[13],oe[14]=be[14],oe[15]=be[15]),oe[0]=Ve*Ke+qe*Fe,oe[1]=tt*Ke+ft*Fe,oe[2]=rt*Ke+Xe*Fe,oe[3]=Ne*Ke+dt*Fe,oe[4]=qe*Ke-Ve*Fe,oe[5]=ft*Ke-tt*Fe,oe[6]=Xe*Ke-rt*Fe,oe[7]=dt*Ke-Ne*Fe,oe},scale:Q,set:Z,str:function Te(oe){return"mat4("+oe[0]+", "+oe[1]+", "+oe[2]+", "+oe[3]+", "+oe[4]+", "+oe[5]+", "+oe[6]+", "+oe[7]+", "+oe[8]+", "+oe[9]+", "+oe[10]+", "+oe[11]+", "+oe[12]+", "+oe[13]+", "+oe[14]+", "+oe[15]+")"},sub:De,subtract:De,targetTo:function ve(oe,be,Ue,Fe){const Ke=be[0],Ve=be[1],tt=be[2],rt=Fe[0],Ne=Fe[1],qe=Fe[2];let ft=Ke-Ue[0],Xe=Ve-Ue[1],dt=tt-Ue[2],Qe=ft*ft+Xe*Xe+dt*dt;Qe>0&&(Qe=1/Math.sqrt(Qe),ft*=Qe,Xe*=Qe,dt*=Qe);let ot=Ne*dt-qe*Xe,ct=qe*ft-rt*dt,_t=rt*Xe-Ne*ft;return Qe=ot*ot+ct*ct+_t*_t,Qe>0&&(Qe=1/Math.sqrt(Qe),ot*=Qe,ct*=Qe,_t*=Qe),oe[0]=ot,oe[1]=ct,oe[2]=_t,oe[3]=0,oe[4]=Xe*_t-dt*ct,oe[5]=dt*ot-ft*_t,oe[6]=ft*ct-Xe*ot,oe[7]=0,oe[8]=ft,oe[9]=Xe,oe[10]=dt,oe[11]=0,oe[12]=Ke,oe[13]=Ve,oe[14]=tt,oe[15]=1,oe},translate:J,transpose:se},Symbol.toStringTag,{value:"Module"}))},44171:(He,Pe,g)=>{"use strict";function E(){const V=new Float32Array(16);return V[0]=1,V[5]=1,V[10]=1,V[15]=1,V}g.d(Pe,{c:()=>E});const x=E();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:x,clone:function T(V){const W=new Float32Array(16);return W[0]=V[0],W[1]=V[1],W[2]=V[2],W[3]=V[3],W[4]=V[4],W[5]=V[5],W[6]=V[6],W[7]=V[7],W[8]=V[8],W[9]=V[9],W[10]=V[10],W[11]=V[11],W[12]=V[12],W[13]=V[13],W[14]=V[14],W[15]=V[15],W},create:E,createView:function Z(V,W){return new Float32Array(V,W,16)},fromValues:function w(V,W,A,U,N,J,Q,G,k,z,C,D,F,B,$,X){const q=new Float32Array(16);return q[0]=V,q[1]=W,q[2]=A,q[3]=U,q[4]=N,q[5]=J,q[6]=Q,q[7]=G,q[8]=k,q[9]=z,q[10]=C,q[11]=D,q[12]=F,q[13]=B,q[14]=$,q[15]=X,q}},Symbol.toStringTag,{value:"Module"}))},48323:(He,Pe,g)=>{"use strict";g.d(Pe,{e:()=>U,f:()=>A,g:()=>W,h:()=>G,i:()=>x,j:()=>F,l:()=>V,p:()=>he});var E=g(74792),T=g(67087);let w,Z=null;function x(){return!!Z}function V(){return w||(w=g.e(4956).then(g.bind(g,4956)).then(ne=>ne.p).then(({default:ne})=>ne({locateFile:ue=>(0,E.V)(`esri/geometry/support/${ue}`)})).then(ne=>{$(ne)}),w)}var W,A,U,ne;(function(ne){function ue(_e,de,Oe){Z.ensureCache.prepare();const re=Y(Oe),le=Oe===re,ce=Z.ensureFloat64(re),ve=Z._pe_geog_to_proj(Z.getPointer(_e),de,ce);return ve&&ae(Oe,de,ce,le),ve}function ie(_e,de,Oe){return fe(_e,de,Oe,0)}function fe(_e,de,Oe,re){Z.ensureCache.prepare();const le=Y(Oe),ce=Oe===le,ve=Z.ensureFloat64(le),Te=Z._pe_proj_to_geog_center(Z.getPointer(_e),de,ve,re);return Te&&ae(Oe,de,ve,ce),Te}ne.geogToProj=ue,ne.projGeog=function te(_e,de,Oe,re){switch(re){case A.PE_TRANSFORM_P_TO_G:return ie(_e,de,Oe);case A.PE_TRANSFORM_G_TO_P:return ue(_e,de,Oe)}return 0},ne.projToGeog=ie,ne.projToGeogCenter=fe})(W||(W={})),(ne=A||(A={})).init=function ue(){ne.PE_BUFFER_MAX=Z.PeDefs.prototype.PE_BUFFER_MAX,ne.PE_NAME_MAX=Z.PeDefs.prototype.PE_NAME_MAX,ne.PE_MGRS_MAX=Z.PeDefs.prototype.PE_MGRS_MAX,ne.PE_USNG_MAX=Z.PeDefs.prototype.PE_USNG_MAX,ne.PE_DD_MAX=Z.PeDefs.prototype.PE_DD_MAX,ne.PE_DDM_MAX=Z.PeDefs.prototype.PE_DDM_MAX,ne.PE_DMS_MAX=Z.PeDefs.prototype.PE_DMS_MAX,ne.PE_UTM_MAX=Z.PeDefs.prototype.PE_UTM_MAX,ne.PE_PARM_MAX=Z.PeDefs.prototype.PE_PARM_MAX,ne.PE_TYPE_NONE=Z.PeDefs.prototype.PE_TYPE_NONE,ne.PE_TYPE_GEOGCS=Z.PeDefs.prototype.PE_TYPE_GEOGCS,ne.PE_TYPE_PROJCS=Z.PeDefs.prototype.PE_TYPE_PROJCS,ne.PE_TYPE_GEOGTRAN=Z.PeDefs.prototype.PE_TYPE_GEOGTRAN,ne.PE_TYPE_COORDSYS=Z.PeDefs.prototype.PE_TYPE_COORDSYS,ne.PE_TYPE_UNIT=Z.PeDefs.prototype.PE_TYPE_UNIT,ne.PE_TYPE_LINUNIT=Z.PeDefs.prototype.PE_TYPE_LINUNIT,ne.PE_STR_OPTS_NONE=Z.PeDefs.prototype.PE_STR_OPTS_NONE,ne.PE_STR_AUTH_NONE=Z.PeDefs.prototype.PE_STR_AUTH_NONE,ne.PE_STR_AUTH_TOP=Z.PeDefs.prototype.PE_STR_AUTH_TOP,ne.PE_STR_NAME_CANON=Z.PeDefs.prototype.PE_STR_NAME_CANON,ne.PE_PARM_X0=Z.PeDefs.prototype.PE_PARM_X0,ne.PE_PARM_ND=Z.PeDefs.prototype.PE_PARM_ND,ne.PE_TRANSFORM_1_TO_2=Z.PeDefs.prototype.PE_TRANSFORM_1_TO_2,ne.PE_TRANSFORM_2_TO_1=Z.PeDefs.prototype.PE_TRANSFORM_2_TO_1,ne.PE_TRANSFORM_P_TO_G=Z.PeDefs.prototype.PE_TRANSFORM_P_TO_G,ne.PE_TRANSFORM_G_TO_P=Z.PeDefs.prototype.PE_TRANSFORM_G_TO_P,ne.PE_HORIZON_RECT=Z.PeDefs.prototype.PE_HORIZON_RECT,ne.PE_HORIZON_POLY=Z.PeDefs.prototype.PE_HORIZON_POLY,ne.PE_HORIZON_LINE=Z.PeDefs.prototype.PE_HORIZON_LINE,ne.PE_HORIZON_DELTA=Z.PeDefs.prototype.PE_HORIZON_DELTA},function(ne){const ue={},te={},ie=ge=>{if(ge){const Ae=ge.getType();switch(Ae){case A.PE_TYPE_GEOGCS:ge=Z.castObject(ge,Z.PeGeogcs);break;case A.PE_TYPE_PROJCS:ge=Z.castObject(ge,Z.PeProjcs);break;case A.PE_TYPE_GEOGTRAN:ge=Z.castObject(ge,Z.PeGeogtran);break;default:Ae&A.PE_TYPE_UNIT&&(ge=Z.castObject(ge,Z.PeUnit))}}return ge};function de(ge,Ae){let De=null,Se=ue[ge];if(Se||(Se={},ue[ge]=Se),Se.hasOwnProperty(String(Ae)))De=Se[Ae];else{const me=Z.PeFactory.prototype.factoryByType(ge,Ae);Z.compare(me,Z.NULL)||(De=me,Se[Ae]=De)}return De=ie(De),De}ne.initialize=function fe(){Z.PeFactory.prototype.initialize(null)},ne.coordsys=function _e(ge){return de(A.PE_TYPE_COORDSYS,ge)},ne.factoryByType=de,ne.fromString=function Oe(ge,Ae){let De=null,Se=te[ge];if(Se||(Se={},te[ge]=Se),Se.hasOwnProperty(Ae))De=Se[Ae];else{const me=Z.PeFactory.prototype.fromString(ge,Ae);Z.compare(me,Z.NULL)||(De=me,Se[Ae]=De)}return De=ie(De),De},ne.geogcs=function re(ge){return de(A.PE_TYPE_GEOGCS,ge)},ne.geogtran=function le(ge){return de(A.PE_TYPE_GEOGTRAN,ge)},ne.getCode=function ce(ge){return Z.PeFactory.prototype.getCode(ge)},ne.projcs=function ve(ge){return de(A.PE_TYPE_PROJCS,ge)},ne.unit=function Te(ge){return de(A.PE_TYPE_UNIT,ge)}}(U||(U={}));let N=null;var J,Q,G,k,z,C,D,F,B;function $(ne){function ue(_e,de,Oe){_e[de]=Oe(_e[de])}Z=ne,A.init(),J.init(),z.init(),D.init(),F.init(),N=class extends Z.PeGCSExtent{destroy(){Z.destroy(this)}};const te=[Z.PeDatum,Z.PeGeogcs,Z.PeGeogtran,Z.PeObject,Z.PeParameter,Z.PePrimem,Z.PeProjcs,Z.PeSpheroid,Z.PeUnit];for(const _e of te)ue(_e.prototype,"getName",de=>function(){return de.call(this,new Array(A.PE_NAME_MAX))});for(const _e of[Z.PeGeogtran,Z.PeProjcs])ue(_e.prototype,"getParameters",de=>function(){const Oe=new Array(A.PE_PARM_MAX);let re=de.call(this);for(let le=0;le<Oe.length;le++){const ce=Z.getValue(re,"*");Oe[le]=ce?Z.wrapPointer(ce,Z.PeParameter):null,re+=Int32Array.BYTES_PER_ELEMENT}return Oe});ue(Z.PeHorizon.prototype,"getCoord",_e=>function(){const de=this.getSize();if(!de)return null;const Oe=[];return ae(Oe,de,_e.call(this)),Oe}),ue(Z.PeGTlistExtendedEntry.prototype,"getEntries",_e=>{const de=Z._pe_getPeGTlistExtendedGTsSize();return function(){let Oe=null;const re=_e.call(this);if(!Z.compare(re,Z.NULL)){Oe=[re];const le=this.getSteps();if(le>1){const ce=Z.getPointer(re);for(let ve=1;ve<le;ve++)Oe.push(Z.wrapPointer(ce+de*ve,Z.PeGTlistExtendedGTs))}}return Oe}});const ie=Z._pe_getPeHorizonSize(),fe=_e=>function(){let de=this._cache;if(de||(de=new Map,this._cache=de),de.has(_e))return de.get(_e);let Oe=null;const re=_e.call(this);if(!Z.compare(re,Z.NULL)){Oe=[re];const le=re.getNump();if(le>1){const ce=Z.getPointer(re);for(let ve=1;ve<le;ve++)Oe.push(Z.wrapPointer(ce+ie*ve,Z.PeHorizon))}}return de.set(_e,Oe),Oe};ue(Z.PeProjcs.prototype,"horizonGcsGenerate",fe),ue(Z.PeProjcs.prototype,"horizonPcsGenerate",fe),Z.PeObject.prototype.toString=function(_e=A.PE_STR_OPTS_NONE){Z.ensureCache.prepare();const de=Z.getPointer(this),Oe=Z.ensureInt8(new Array(A.PE_BUFFER_MAX));return Z.UTF8ToString(Z._pe_object_to_string_ext(de,_e,Oe))}}function X(ne){if(!ne)return;const ue=Z.getClass(ne);if(!ue)return;const te=Z.getCache(ue);if(!te)return;const ie=Z.getPointer(ne);ie&&delete te[ie]}function q(ne,ue){const te=[],ie=new Array(ue);for(let fe=0;fe<ne;fe++)te.push(Z.ensureInt8(ie));return te}function Y(ne){let ue;return Array.isArray(ne[0])?(ue=[],ne.forEach(te=>{ue.push(te[0],te[1])})):ue=ne,ue}function ae(ne,ue,te,ie=!1){if(ie)for(let fe=0;fe<2*ue;fe++)ne[fe]=Z.getValue(te+fe*Float64Array.BYTES_PER_ELEMENT,"double");else{const fe=0===ne.length;for(let _e=0;_e<ue;_e++)fe&&(ne[_e]=new Array(2)),ne[_e][0]=Z.getValue(te,"double"),ne[_e][1]=Z.getValue(te+Float64Array.BYTES_PER_ELEMENT,"double"),te+=2*Float64Array.BYTES_PER_ELEMENT}}(function(ne){let ue;ne.init=function te(){ne.PE_GTLIST_OPTS_COMMON=Z.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,ue=Z._pe_getPeGTlistExtendedEntrySize()},ne.getGTlist=function ie(fe,_e,de,Oe,re,le){let ce=null;const ve=new Z.PeInteger(le);try{const Te=Z.PeGTlistExtended.prototype.getGTlist(fe,_e,de,Oe,re,ve);if((le=ve.val)&&(ce=[Te],le>1)){const ge=Z.getPointer(Te);for(let Ae=1;Ae<le;Ae++)ce.push(Z.wrapPointer(ge+ue*Ae,Z.PeGTlistExtendedEntry))}}finally{Z.destroy(ve)}return ce}})(J||(J={})),function(ne){ne.destroy=function ue(te){if(te&&te.length){for(const ie of te)X(ie),ie.getEntries().forEach(fe=>{X(fe);const _e=fe.getGeogtran();X(_e),_e.getParameters().forEach(X),[_e.getGeogcs1(),_e.getGeogcs2()].forEach(de=>{X(de);const Oe=de.getDatum();X(Oe),X(Oe.getSpheroid()),X(de.getPrimem()),X(de.getUnit())})});Z.PeGTlistExtendedEntry.prototype.Delete(te[0])}}}(Q||(Q={})),function(ne){ne.geogToGeog=function ue(te,ie,fe,_e,de){Z.ensureCache.prepare();const Oe=Y(fe),re=fe===Oe,le=Z.ensureFloat64(Oe);let ce=0;_e&&(ce=Z.ensureFloat64(_e));const ve=Z._pe_geog_to_geog(Z.getPointer(te),ie,le,ce,de);return ve&&ae(fe,ie,le,re),ve}}(G||(G={})),function(ne){const ue=(le,ce,ve,Te,ge,Ae)=>{let De,Se;switch(Z.ensureCache.prepare(),le){case"dd":De=Z._pe_geog_to_dd,Se=A.PE_DD_MAX;break;case"ddm":De=Z._pe_geog_to_ddm,Se=A.PE_DDM_MAX;break;case"dms":De=Z._pe_geog_to_dms,Se=A.PE_DMS_MAX}let me=0;ce&&(me=Z.getPointer(ce));const ye=Y(Te),we=Z.ensureFloat64(ye),$e=q(ve,Se),Ce=De(me,ve,we,ge,Z.ensureInt32($e));if(Ce)for(let Ie=0;Ie<ve;Ie++)Ae[Ie]=Z.UTF8ToString($e[Ie]);return Ce},te=(le,ce,ve,Te,ge)=>{let Ae;switch(Z.ensureCache.prepare(),le){case"dd":Ae=Z._pe_dd_to_geog;break;case"ddm":Ae=Z._pe_ddm_to_geog;break;case"dms":Ae=Z._pe_dms_to_geog}let De=0;ce&&(De=Z.getPointer(ce));const Se=Te.map($e=>Z.ensureString($e)),me=Z.ensureInt32(Se),ye=Z.ensureFloat64(new Array(2*ve)),we=Ae(De,ve,me,ye);return we&&ae(ge,ve,ye),we};ne.geogToDms=function ie(le,ce,ve,Te,ge){return ue("dms",le,ce,ve,Te,ge)},ne.dmsToGeog=function fe(le,ce,ve,Te){return te("dms",le,ce,ve,Te)},ne.geogToDdm=function _e(le,ce,ve,Te,ge){return ue("ddm",le,ce,ve,Te,ge)},ne.ddmToGeog=function de(le,ce,ve,Te){return te("ddm",le,ce,ve,Te)},ne.geogToDd=function Oe(le,ce,ve,Te,ge){return ue("dd",le,ce,ve,Te,ge)},ne.ddToGeog=function re(le,ce,ve,Te){return te("dd",le,ce,ve,Te)}}(k||(k={})),function(ne){ne.init=function ue(){ne.PE_MGRS_STYLE_NEW=Z.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,ne.PE_MGRS_STYLE_OLD=Z.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,ne.PE_MGRS_STYLE_AUTO=Z.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,ne.PE_MGRS_180_ZONE_1_PLUS=Z.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,ne.PE_MGRS_ADD_SPACES=Z.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},ne.geogToMgrsExtended=function te(fe,_e,de,Oe,re,le,ce){Z.ensureCache.prepare();let ve=0;fe&&(ve=Z.getPointer(fe));const Te=Y(de),ge=Z.ensureFloat64(Te),Ae=q(_e,A.PE_MGRS_MAX),De=Z.ensureInt32(Ae),Se=Z._pe_geog_to_mgrs_extended(ve,_e,ge,Oe,re,le,De);if(Se)for(let me=0;me<_e;me++)ce[me]=Z.UTF8ToString(Ae[me]);return Se},ne.mgrsToGeogExtended=function ie(fe,_e,de,Oe,re){Z.ensureCache.prepare();let le=0;fe&&(le=Z.getPointer(fe));const ce=de.map(Ae=>Z.ensureString(Ae)),ve=Z.ensureInt32(ce),Te=Z.ensureFloat64(new Array(2*_e)),ge=Z._pe_mgrs_to_geog_extended(le,_e,ve,Oe,Te);return ge&&ae(re,_e,Te),ge}}(z||(z={})),function(ne){ne.geogToUsng=function ue(ie,fe,_e,de,Oe,re,le){Z.ensureCache.prepare();let ce=0;ie&&(ce=Z.getPointer(ie));const ve=Y(_e),Te=Z.ensureFloat64(ve),ge=q(fe,A.PE_MGRS_MAX),Ae=Z.ensureInt32(ge),De=Z._pe_geog_to_usng(ce,fe,Te,de,Oe,re,Ae);if(De)for(let Se=0;Se<fe;Se++)le[Se]=Z.UTF8ToString(ge[Se]);return De},ne.usngToGeog=function te(ie,fe,_e,de){Z.ensureCache.prepare();let Oe=0;ie&&(Oe=Z.getPointer(ie));const re=_e.map(Te=>Z.ensureString(Te)),le=Z.ensureInt32(re),ce=Z.ensureFloat64(new Array(2*fe)),ve=Z._pe_usng_to_geog(Oe,fe,le,ce);return ve&&ae(de,fe,ce),ve}}(C||(C={})),function(ne){ne.init=function ue(){ne.PE_UTM_OPTS_NONE=Z.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,ne.PE_UTM_OPTS_ADD_SPACES=Z.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,ne.PE_UTM_OPTS_NS=Z.PeNotationUtm.prototype.PE_UTM_OPTS_NS},ne.geogToUtm=function te(fe,_e,de,Oe,re){Z.ensureCache.prepare();let le=0;fe&&(le=Z.getPointer(fe));const ce=Y(de),ve=Z.ensureFloat64(ce),Te=q(_e,A.PE_UTM_MAX),ge=Z.ensureInt32(Te),Ae=Z._pe_geog_to_utm(le,_e,ve,Oe,ge);if(Ae)for(let De=0;De<_e;De++)re[De]=Z.UTF8ToString(Te[De]);return Ae},ne.utmToGeog=function ie(fe,_e,de,Oe,re){Z.ensureCache.prepare();let le=0;fe&&(le=Z.getPointer(fe));const ce=de.map(Ae=>Z.ensureString(Ae)),ve=Z.ensureInt32(ce),Te=Z.ensureFloat64(new Array(2*_e)),ge=Z._pe_utm_to_geog(le,_e,ve,Oe,Te);return ge&&ae(re,_e,Te),ge}}(D||(D={})),function(ne){const ue=new Map;ne.init=function te(){ne.PE_PCSINFO_OPTION_NONE=Z.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,ne.PE_PCSINFO_OPTION_DOMAIN=Z.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,ne.PE_POLE_OUTSIDE_BOUNDARY=Z.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,ne.PE_POLE_POINT=Z.PePCSInfo.prototype.PE_POLE_POINT},ne.generate=function ie(fe,_e=ne.PE_PCSINFO_OPTION_DOMAIN){let de=null,Oe=null;return ue.has(fe)&&(Oe=ue.get(fe),Oe[_e]&&(de=Oe[_e])),de||(de=Z.PePCSInfo.prototype.generate(fe,_e),Oe||(Oe=[],ue.set(fe,Oe)),Oe[_e]=de),de}}(F||(F={})),function(ne){ne.versionString=function ue(){return Z.PeVersion.prototype.version_string()}}(B||(B={}));const he=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return W},get PeDefs(){return A},get PeFactory(){return U},get PeGCSExtent(){return N},get PeGTTransformations(){return G},get PeGTlistExtended(){return J},get PeGTlistExtendedEntry(){return Q},get PeNotationDms(){return k},get PeNotationMgrs(){return z},get PeNotationUsng(){return C},get PeNotationUtm(){return D},get PePCSInfo(){return F},get PeVersion(){return B},_init:$,get _pe(){return Z},isLoaded:x,isSupported:function se(){return!!(0,T.Z)("esri-wasm")},load:V},Symbol.toStringTag,{value:"Module"}))},29184:(He,Pe,g)=>{"use strict";g.d(Pe,{M:()=>Q,a:()=>G,e:()=>N,f:()=>w,i:()=>A,p:()=>U,r:()=>x,t:()=>Z,w:()=>se});var E=g(53661),T=g(55050);function w(k,z){const C=z&&z.url&&z.url.path;if(k&&C&&(k=(0,T.hF)(k,C,{preserveProtocolRelative:!0}),z.portalItem&&z.readResourcePaths)){const D=(0,T.PF)(k,z.portalItem.itemUrl);null!=D&&W.test(D)&&z.readResourcePaths.push(z.portalItem.resourceFromPath(D).path)}return J(k,z&&z.portal)}function Z(k,z,C=Q.YES){if(null==k)return k;!(0,T.YP)(k)&&z&&z.blockedRelativeUrls&&z.blockedRelativeUrls.push(k);let D=(0,T.hF)(k);if(z){const F=z.verifyItemRelativeUrls&&z.verifyItemRelativeUrls.rootPath||z.url&&z.url.path;if(F){const B=J(F,z.portal),$=J(D,z.portal);D=(0,T.PF)($,B,B),null!=D&&D!==$&&D!==k&&z.verifyItemRelativeUrls&&z.verifyItemRelativeUrls.writtenUrls.push(D)}}return D=N(D,z?.portal),(0,T.YP)(D)&&(D=(0,T.Fv)(D)),z?.resources&&z?.portalItem&&!(0,T.YP)(D)&&!(0,T.HK)(D)&&C===Q.YES&&z.resources.toKeep.push({resource:z.portalItem.resourceFromPath(D),compress:!1}),D}function x(k,z,C){return w(k,C)}function se(k,z,C,D){const F=Z(k,D);void 0!==F&&(z[C]=F)}const V=/\/items\/([^\/]+)\/resources\/(.*)/,W=/^\.\/resources\//;function A(k){return(k?.match(V)??null)?.[1]??null}function U(k){const z=k?.match(V)??null;if(null==z)return null;const C=z[2],D=C.lastIndexOf("/");if(-1===D){const{path:$,extension:X}=(0,T.fZ)(C);return{prefix:null,filename:$,extension:(0,E.Wg)(X)}}const{path:F,extension:B}=(0,T.fZ)(C.slice(D+1));return{prefix:C.slice(0,D),filename:F,extension:(0,E.Wg)(B)}}function N(k,z){return z&&!z.isPortal&&z.urlKey&&z.customBaseUrl?(0,T.Ie)(k,`${z.urlKey}.${z.customBaseUrl}`,z.portalHostname):k}function J(k,z){if(!z||z.isPortal||!z.urlKey||!z.customBaseUrl)return k;const C=`${z.urlKey}.${z.customBaseUrl}`,D=(0,T.TI)();return(0,T.D6)(D,`${D.scheme}://${C}`)?(0,T.Ie)(k,z.portalHostname,C):(0,T.Ie)(k,C,z.portalHostname)}var Q,k;(k=Q||(Q={}))[k.YES=0]="YES",k[k.NO=1]="NO";const G=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Q},ensureMainOnlineDomain:N,fromJSON:w,itemIdFromResourceUrl:A,prefixAndFilenameFromResourceUrl:U,read:x,toJSON:Z,write:se},Symbol.toStringTag,{value:"Module"}))},49846:(He,Pe,g)=>{"use strict";g.d(Pe,{q:()=>se});var E,w,Z={};E={get exports(){return Z},set exports(V){Z=V}},void 0!==(w=function(){function W(N,J,Q,G,k){for(;G>Q;){if(G-Q>600){var z=G-Q+1,C=J-Q+1,D=Math.log(z),F=.5*Math.exp(2*D/3),B=.5*Math.sqrt(D*F*(z-F)/z)*(C-z/2<0?-1:1);W(N,J,Math.max(Q,Math.floor(J-C*F/z+B)),Math.min(G,Math.floor(J+(z-C)*F/z+B)),k)}var $=N[J],X=Q,q=G;for(A(N,Q,J),k(N[G],$)>0&&A(N,Q,G);X<q;){for(A(N,X,q),X++,q--;k(N[X],$)<0;)X++;for(;k(N[q],$)>0;)q--}0===k(N[Q],$)?A(N,Q,q):A(N,++q,G),q<=J&&(Q=q+1),J<=q&&(G=q-1)}}function A(N,J,Q){var G=N[J];N[J]=N[Q],N[Q]=G}function U(N,J){return N<J?-1:N>J?1:0}return function V(N,J,Q,G,k){W(N,J,Q||0,G||N.length-1,k||U)}}())&&(E.exports=w);const se=Z},34662:(He,Pe,g)=>{"use strict";g.d(Pe,{r:()=>T});var E=g(49846);function T(C,D){if(!(this instanceof T))return new T(C,D);this._maxEntries=Math.max(4,C||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),D&&("function"==typeof D?this.toBBox=D:this._initFormat(D)),this.clear()}function w(C,D,F){if(!F)return D.indexOf(C);for(var B=0;B<D.length;B++)if(F(C,D[B]))return B;return-1}function Z(C,D){x(C,0,C.children.length,D,C)}function x(C,D,F,B,$){$||($=k(null)),$.minX=1/0,$.minY=1/0,$.maxX=-1/0,$.maxY=-1/0;for(var X,q=D;q<F;q++)X=C.children[q],se($,C.leaf?B(X):X);return $}function se(C,D){return C.minX=Math.min(C.minX,D.minX),C.minY=Math.min(C.minY,D.minY),C.maxX=Math.max(C.maxX,D.maxX),C.maxY=Math.max(C.maxY,D.maxY),C}function V(C,D){return C.minX-D.minX}function W(C,D){return C.minY-D.minY}function A(C){return(C.maxX-C.minX)*(C.maxY-C.minY)}function U(C){return C.maxX-C.minX+(C.maxY-C.minY)}function N(C,D){return(Math.max(D.maxX,C.maxX)-Math.min(D.minX,C.minX))*(Math.max(D.maxY,C.maxY)-Math.min(D.minY,C.minY))}function J(C,D){var F=Math.max(C.minX,D.minX),B=Math.max(C.minY,D.minY),$=Math.min(C.maxX,D.maxX),X=Math.min(C.maxY,D.maxY);return Math.max(0,$-F)*Math.max(0,X-B)}function Q(C,D){return C.minX<=D.minX&&C.minY<=D.minY&&D.maxX<=C.maxX&&D.maxY<=C.maxY}function G(C,D){return D.minX<=C.maxX&&D.minY<=C.maxY&&D.maxX>=C.minX&&D.maxY>=C.minY}function k(C){return{children:C,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function z(C,D,F,B,$){for(var X,q=[D,F];q.length;)(F=q.pop())-(D=q.pop())<=B||(X=D+Math.ceil((F-D)/B/2)*B,(0,E.q)(C,X,D,F,$),q.push(D,X,X,F))}T.prototype={all:function(){return this._all(this.data,[])},search:function(C){var D=this.data,F=[],B=this.toBBox;if(!G(C,D))return F;for(var $,X,q,Y,ae=[];D;){for($=0,X=D.children.length;$<X;$++)q=D.children[$],G(C,Y=D.leaf?B(q):q)&&(D.leaf?F.push(q):Q(C,Y)?this._all(q,F):ae.push(q));D=ae.pop()}return F},collides:function(C){var D=this.data,F=this.toBBox;if(!G(C,D))return!1;for(var B,$,X,q,Y=[];D;){for(B=0,$=D.children.length;B<$;B++)if(X=D.children[B],G(C,q=D.leaf?F(X):X)){if(D.leaf||Q(C,q))return!0;Y.push(X)}D=Y.pop()}return!1},load:function(C){if(!C||!C.length)return this;if(C.length<this._minEntries){for(var D=0,F=C.length;D<F;D++)this.insert(C[D]);return this}var B=this._build(C.slice(),0,C.length-1,0);if(this.data.children.length)if(this.data.height===B.height)this._splitRoot(this.data,B);else{if(this.data.height<B.height){var $=this.data;this.data=B,B=$}this._insert(B,this.data.height-B.height-1,!0)}else this.data=B;return this},insert:function(C){return C&&this._insert(C,this.data.height-1),this},clear:function(){return this.data=k([]),this},remove:function(C,D){if(!C)return this;for(var F,B,$,X,q=this.data,Y=this.toBBox(C),ae=[],he=[];q||ae.length;){if(q||(q=ae.pop(),B=ae[ae.length-1],F=he.pop(),X=!0),q.leaf&&-1!==($=w(C,q.children,D)))return q.children.splice($,1),ae.push(q),this._condense(ae),this;X||q.leaf||!Q(q,Y)?B?(F++,q=B.children[F],X=!1):q=null:(ae.push(q),he.push(F),F=0,B=q,q=q.children[0])}return this},toBBox:function(C){return C},compareMinX:V,compareMinY:W,toJSON:function(){return this.data},fromJSON:function(C){return this.data=C,this},_all:function(C,D){for(var F=[];C;)C.leaf?D.push.apply(D,C.children):F.push.apply(F,C.children),C=F.pop();return D},_build:function(C,D,F,B){var $,X=F-D+1,q=this._maxEntries;if(X<=q)return Z($=k(C.slice(D,F+1)),this.toBBox),$;B||(B=Math.ceil(Math.log(X)/Math.log(q)),q=Math.ceil(X/Math.pow(q,B-1))),($=k([])).leaf=!1,$.height=B;var Y,ae,he,ne,ue=Math.ceil(X/q),te=ue*Math.ceil(Math.sqrt(q));for(z(C,D,F,te,this.compareMinX),Y=D;Y<=F;Y+=te)for(z(C,Y,he=Math.min(Y+te-1,F),ue,this.compareMinY),ae=Y;ae<=he;ae+=ue)ne=Math.min(ae+ue-1,he),$.children.push(this._build(C,ae,ne,B-1));return Z($,this.toBBox),$},_chooseSubtree:function(C,D,F,B){for(var $,X,q,Y,ae,he,ne,ue;B.push(D),!D.leaf&&B.length-1!==F;){for(ne=ue=1/0,$=0,X=D.children.length;$<X;$++)ae=A(q=D.children[$]),(he=N(C,q)-ae)<ue?(ue=he,ne=ae<ne?ae:ne,Y=q):he===ue&&ae<ne&&(ne=ae,Y=q);D=Y||D.children[0]}return D},_insert:function(C,D,F){var $=F?C:(0,this.toBBox)(C),X=[],q=this._chooseSubtree($,this.data,D,X);for(q.children.push(C),se(q,$);D>=0&&X[D].children.length>this._maxEntries;)this._split(X,D),D--;this._adjustParentBBoxes($,X,D)},_split:function(C,D){var F=C[D],B=F.children.length,$=this._minEntries;this._chooseSplitAxis(F,$,B);var X=this._chooseSplitIndex(F,$,B),q=k(F.children.splice(X,F.children.length-X));q.height=F.height,q.leaf=F.leaf,Z(F,this.toBBox),Z(q,this.toBBox),D?C[D-1].children.push(q):this._splitRoot(F,q)},_splitRoot:function(C,D){this.data=k([C,D]),this.data.height=C.height+1,this.data.leaf=!1,Z(this.data,this.toBBox)},_chooseSplitIndex:function(C,D,F){var B,$,X,q,Y,ae,he,ne;for(ae=he=1/0,B=D;B<=F-D;B++)q=J($=x(C,0,B,this.toBBox),X=x(C,B,F,this.toBBox)),Y=A($)+A(X),q<ae?(ae=q,ne=B,he=Y<he?Y:he):q===ae&&Y<he&&(he=Y,ne=B);return ne},_chooseSplitAxis:function(C,D,F){var B=C.leaf?this.compareMinX:V,$=C.leaf?this.compareMinY:W;this._allDistMargin(C,D,F,B)<this._allDistMargin(C,D,F,$)&&C.children.sort(B)},_allDistMargin:function(C,D,F,B){C.children.sort(B);var $,X,q=this.toBBox,Y=x(C,0,D,q),ae=x(C,F-D,F,q),he=U(Y)+U(ae);for($=D;$<F-D;$++)X=C.children[$],se(Y,C.leaf?q(X):X),he+=U(Y);for($=F-D-1;$>=D;$--)X=C.children[$],se(ae,C.leaf?q(X):X),he+=U(ae);return he},_adjustParentBBoxes:function(C,D,F){for(var B=F;B>=0;B--)se(D[B],C)},_condense:function(C){for(var D,F=C.length-1;F>=0;F--)0===C[F].children.length?F>0?(D=C[F-1].children).splice(D.indexOf(C[F]),1):this.clear():Z(C[F],this.toBBox)},_initFormat:function(C){var D=["return a"," - b",";"];this.compareMinX=new Function("a","b",D.join(C[0])),this.compareMinY=new Function("a","b",D.join(C[1])),this.toBBox=new Function("a","return {minX: a"+C[0]+", minY: a"+C[1]+", maxX: a"+C[2]+", maxY: a"+C[3]+"};")}}},18100:(He,Pe,g)=>{"use strict";function E(T,w,Z,x){var se,V=arguments.length,W=V<3?w:null===x?x=Object.getOwnPropertyDescriptor(w,Z):x;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)W=Reflect.decorate(T,w,Z,x);else for(var A=T.length-1;A>=0;A--)(se=T[A])&&(W=(V<3?se(W):V>3?se(w,Z,W):se(w,Z))||W);return V>3&&W&&Object.defineProperty(w,Z,W),W}g.d(Pe,{_:()=>E})},80775:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>x,b:()=>Q,c:()=>T,d:()=>k,e:()=>ce,f:()=>$,g:()=>q,h:()=>X,i:()=>C,j:()=>Z,k:()=>z,l:()=>Y,n:()=>F,r:()=>ie,s:()=>w,t:()=>ne});var E=g(33980);function T(me,ye){return me[0]=ye[0],me[1]=ye[1],me}function w(me,ye,we){return me[0]=ye,me[1]=we,me}function Z(me,ye,we){return me[0]=ye[0]+we[0],me[1]=ye[1]+we[1],me}function x(me,ye,we){return me[0]=ye[0]-we[0],me[1]=ye[1]-we[1],me}function se(me,ye,we){return me[0]=ye[0]*we[0],me[1]=ye[1]*we[1],me}function V(me,ye,we){return me[0]=ye[0]/we[0],me[1]=ye[1]/we[1],me}function Q(me,ye,we){return me[0]=ye[0]*we,me[1]=ye[1]*we,me}function k(me,ye){const we=ye[0]-me[0],$e=ye[1]-me[1];return Math.sqrt(we*we+$e*$e)}function z(me,ye){const we=ye[0]-me[0],$e=ye[1]-me[1];return we*we+$e*$e}function C(me){const ye=me[0],we=me[1];return Math.sqrt(ye*ye+we*we)}function D(me){const ye=me[0],we=me[1];return ye*ye+we*we}function F(me,ye){return me[0]=-ye[0],me[1]=-ye[1],me}function $(me,ye){const we=ye[0],$e=ye[1];let Ce=we*we+$e*$e;return Ce>0&&(Ce=1/Math.sqrt(Ce),me[0]=ye[0]*Ce,me[1]=ye[1]*Ce),me}function X(me,ye){return me[0]*ye[0]+me[1]*ye[1]}function q(me,ye,we){const $e=ye[0]*we[1]-ye[1]*we[0];return me[0]=me[1]=0,me[2]=$e,me}function Y(me,ye,we,$e){const Ce=ye[0],Ie=ye[1];return me[0]=Ce+$e*(we[0]-Ce),me[1]=Ie+$e*(we[1]-Ie),me}function ne(me,ye,we){const $e=ye[0],Ce=ye[1];return me[0]=we[0]*$e+we[2]*Ce+we[4],me[1]=we[1]*$e+we[3]*Ce+we[5],me}function ie(me,ye,we,$e){const Ce=ye[0]-we[0],Ie=ye[1]-we[1],je=Math.sin($e),Je=Math.cos($e);return me[0]=Ce*Je-Ie*je+we[0],me[1]=Ce*je+Ie*Je+we[1],me}const ce=x;Object.freeze(Object.defineProperty({__proto__:null,add:Z,angle:function fe(me,ye){const we=me[0],$e=me[1],Ce=ye[0],Ie=ye[1];let je=we*we+$e*$e;je>0&&(je=1/Math.sqrt(je));let Je=Ce*Ce+Ie*Ie;Je>0&&(Je=1/Math.sqrt(Je));const oe=(we*Ce+$e*Ie)*je*Je;return oe>1?0:oe<-1?Math.PI:Math.acos(oe)},ceil:function W(me,ye){return me[0]=Math.ceil(ye[0]),me[1]=Math.ceil(ye[1]),me},copy:T,cross:q,dist:k,distance:k,div:V,divide:V,dot:X,equals:function Oe(me,ye){const we=me[0],$e=me[1],Ce=ye[0],Ie=ye[1],je=(0,E.g)();return Math.abs(we-Ce)<=je*Math.max(1,Math.abs(we),Math.abs(Ce))&&Math.abs($e-Ie)<=je*Math.max(1,Math.abs($e),Math.abs(Ie))},exactEquals:function de(me,ye){return me[0]===ye[0]&&me[1]===ye[1]},floor:function A(me,ye){return me[0]=Math.floor(ye[0]),me[1]=Math.floor(ye[1]),me},inverse:function B(me,ye){return me[0]=1/ye[0],me[1]=1/ye[1],me},len:C,length:C,lerp:Y,max:function N(me,ye,we){return me[0]=Math.max(ye[0],we[0]),me[1]=Math.max(ye[1],we[1]),me},min:function U(me,ye,we){return me[0]=Math.min(ye[0],we[0]),me[1]=Math.min(ye[1],we[1]),me},mul:se,multiply:se,negate:F,normalize:$,projectAndScale:function re(me,ye,we,$e,Ce){let Ie=ye[0]-we[0],je=ye[1]-we[1];const Je=($e[0]*Ie+$e[1]*je)*(Ce-1);return Ie=$e[0]*Je,je=$e[1]*Je,me[0]=ye[0]+Ie,me[1]=ye[1]+je,me},random:function ae(me,ye){ye=ye||1;const we=2*(0,E.R)()*Math.PI;return me[0]=Math.cos(we)*ye,me[1]=Math.sin(we)*ye,me},rotate:ie,round:function J(me,ye){return me[0]=Math.round(ye[0]),me[1]=Math.round(ye[1]),me},scale:Q,scaleAndAdd:function G(me,ye,we,$e){return me[0]=ye[0]+we[0]*$e,me[1]=ye[1]+we[1]*$e,me},set:w,sqrDist:z,sqrLen:D,squaredDistance:z,squaredLength:D,str:function _e(me){return"vec2("+me[0]+", "+me[1]+")"},sub:ce,subtract:x,transformMat2:function he(me,ye,we){const $e=ye[0],Ce=ye[1];return me[0]=we[0]*$e+we[2]*Ce,me[1]=we[1]*$e+we[3]*Ce,me},transformMat2d:ne,transformMat3:function ue(me,ye,we){const $e=ye[0],Ce=ye[1];return me[0]=we[0]*$e+we[3]*Ce+we[6],me[1]=we[1]*$e+we[4]*Ce+we[7],me},transformMat4:function te(me,ye,we){const $e=ye[0],Ce=ye[1];return me[0]=we[0]*$e+we[4]*Ce+we[12],me[1]=we[1]*$e+we[5]*Ce+we[13],me}},Symbol.toStringTag,{value:"Module"}))},12288:(He,Pe,g)=>{"use strict";function E(){return new Float32Array(2)}function w(G,k){const z=new Float32Array(2);return z[0]=G,z[1]=k,z}function x(){return E()}function se(){return w(1,1)}function V(){return w(1,0)}function W(){return w(0,1)}g.d(Pe,{O:()=>U,Z:()=>A,c:()=>E,f:()=>w});const A=x(),U=se(),N=V(),J=W();Object.freeze(Object.defineProperty({__proto__:null,ONES:U,UNIT_X:N,UNIT_Y:J,ZEROS:A,clone:function T(G){const k=new Float32Array(2);return k[0]=G[0],k[1]=G[1],k},create:E,createView:function Z(G,k){return new Float32Array(G,k,2)},fromValues:w,ones:se,unitX:V,unitY:W,zeros:x},Symbol.toStringTag,{value:"Module"}))},83457:(He,Pe,g)=>{"use strict";function E(){return[0,0]}function w(k,z){return[k,z]}function x(k,z){return new Float64Array(k,z,2)}function V(){return w(1,1)}function W(){return w(1,0)}function A(){return w(0,1)}g.d(Pe,{Z:()=>U,a:()=>E,c:()=>x,f:()=>w});const U=[0,0],N=V(),J=W(),Q=A();Object.freeze(Object.defineProperty({__proto__:null,ONES:N,UNIT_X:J,UNIT_Y:Q,ZEROS:U,clone:function T(k){return[k[0],k[1]]},create:E,createView:x,fromArray:function Z(k){const z=[0,0],C=Math.min(2,k.length);for(let D=0;D<C;++D)z[D]=k[D];return z},fromValues:w,ones:V,unitX:W,unitY:A,zeros:function se(){return[0,0]}},Symbol.toStringTag,{value:"Module"}))},92950:(He,Pe,g)=>{"use strict";g.d(Pe,{B:()=>W,C:()=>A,a:()=>se,b:()=>V,c:()=>Z,d:()=>B,e:()=>ae,f:()=>he,g:()=>C,h:()=>ne,i:()=>F,j:()=>$e,k:()=>Ae,l:()=>w,m:()=>fe,n:()=>Y,p:()=>$,q:()=>de,r:()=>Se,s:()=>x,t:()=>_e,u:()=>Ie,z:()=>D});var E=g(77765),T=g(33980);function w(oe){const be=oe[0],Ue=oe[1],Fe=oe[2];return Math.sqrt(be*be+Ue*Ue+Fe*Fe)}function Z(oe,be){return oe[0]=be[0],oe[1]=be[1],oe[2]=be[2],oe}function x(oe,be,Ue,Fe){return oe[0]=be,oe[1]=Ue,oe[2]=Fe,oe}function se(oe,be,Ue){return oe[0]=be[0]+Ue[0],oe[1]=be[1]+Ue[1],oe[2]=be[2]+Ue[2],oe}function V(oe,be,Ue){return oe[0]=be[0]-Ue[0],oe[1]=be[1]-Ue[1],oe[2]=be[2]-Ue[2],oe}function W(oe,be,Ue){return oe[0]=be[0]*Ue[0],oe[1]=be[1]*Ue[1],oe[2]=be[2]*Ue[2],oe}function A(oe,be,Ue){return oe[0]=be[0]/Ue[0],oe[1]=be[1]/Ue[1],oe[2]=be[2]/Ue[2],oe}function C(oe,be,Ue){return oe[0]=be[0]*Ue,oe[1]=be[1]*Ue,oe[2]=be[2]*Ue,oe}function D(oe,be,Ue,Fe){return oe[0]=be[0]+Ue[0]*Fe,oe[1]=be[1]+Ue[1]*Fe,oe[2]=be[2]+Ue[2]*Fe,oe}function F(oe,be){const Ue=be[0]-oe[0],Fe=be[1]-oe[1],Ke=be[2]-oe[2];return Math.sqrt(Ue*Ue+Fe*Fe+Ke*Ke)}function B(oe,be){const Ue=be[0]-oe[0],Fe=be[1]-oe[1],Ke=be[2]-oe[2];return Ue*Ue+Fe*Fe+Ke*Ke}function $(oe){const be=oe[0],Ue=oe[1],Fe=oe[2];return be*be+Ue*Ue+Fe*Fe}function Y(oe,be){const Ue=be[0],Fe=be[1],Ke=be[2];let Ve=Ue*Ue+Fe*Fe+Ke*Ke;return Ve>0&&(Ve=1/Math.sqrt(Ve),oe[0]=be[0]*Ve,oe[1]=be[1]*Ve,oe[2]=be[2]*Ve),oe}function ae(oe,be){return oe[0]*be[0]+oe[1]*be[1]+oe[2]*be[2]}function he(oe,be,Ue){const Fe=be[0],Ke=be[1],Ve=be[2],tt=Ue[0],rt=Ue[1],Ne=Ue[2];return oe[0]=Ke*Ne-Ve*rt,oe[1]=Ve*tt-Fe*Ne,oe[2]=Fe*rt-Ke*tt,oe}function ne(oe,be,Ue,Fe){const Ke=be[0],Ve=be[1],tt=be[2];return oe[0]=Ke+Fe*(Ue[0]-Ke),oe[1]=Ve+Fe*(Ue[1]-Ve),oe[2]=tt+Fe*(Ue[2]-tt),oe}function fe(oe,be,Ue){const Fe=be[0],Ke=be[1],Ve=be[2];return oe[0]=Ue[0]*Fe+Ue[4]*Ke+Ue[8]*Ve+Ue[12],oe[1]=Ue[1]*Fe+Ue[5]*Ke+Ue[9]*Ve+Ue[13],oe[2]=Ue[2]*Fe+Ue[6]*Ke+Ue[10]*Ve+Ue[14],oe}function _e(oe,be,Ue){const Fe=be[0],Ke=be[1],Ve=be[2];return oe[0]=Fe*Ue[0]+Ke*Ue[3]+Ve*Ue[6],oe[1]=Fe*Ue[1]+Ke*Ue[4]+Ve*Ue[7],oe[2]=Fe*Ue[2]+Ke*Ue[5]+Ve*Ue[8],oe}function de(oe,be,Ue){const Fe=Ue[0],Ke=Ue[1],Ve=Ue[2],rt=be[0],Ne=be[1],qe=be[2];let ft=Ke*qe-Ve*Ne,Xe=Ve*rt-Fe*qe,dt=Fe*Ne-Ke*rt,Qe=Ke*dt-Ve*Xe,ot=Ve*ft-Fe*dt,ct=Fe*Xe-Ke*ft;const _t=2*Ue[3];return ft*=_t,Xe*=_t,dt*=_t,Qe*=2,ot*=2,ct*=2,oe[0]=rt+ft+Qe,oe[1]=Ne+Xe+ot,oe[2]=qe+dt+ct,oe}const ve=(0,E.c)(),Te=(0,E.c)();function Ae(oe,be){return oe[0]===be[0]&&oe[1]===be[1]&&oe[2]===be[2]}function Se(oe,be,Ue){const Fe=Ue[0]-be[0],Ke=Ue[1]-be[1],Ve=Ue[2]-be[2];let tt=Fe*Fe+Ke*Ke+Ve*Ve;return tt>0?(tt=1/Math.sqrt(tt),oe[0]=Fe*tt,oe[1]=Ke*tt,oe[2]=Ve*tt,oe):(oe[0]=0,oe[1]=0,oe[2]=0,oe)}const $e=F,Ie=w;Object.freeze(Object.defineProperty({__proto__:null,abs:function J(oe,be){return oe[0]=Math.abs(be[0]),oe[1]=Math.abs(be[1]),oe[2]=Math.abs(be[2]),oe},add:se,angle:function ce(oe,be){Z(ve,oe),Z(Te,be),Y(ve,ve),Y(Te,Te);const Ue=ae(ve,Te);return Ue>1?0:Ue<-1?Math.PI:Math.acos(Ue)},bezier:function te(oe,be,Ue,Fe,Ke,Ve){const tt=1-Ve,rt=tt*tt,Ne=Ve*Ve,qe=rt*tt,ft=3*Ve*rt,Xe=3*Ne*tt,dt=Ne*Ve;return oe[0]=be[0]*qe+Ue[0]*ft+Fe[0]*Xe+Ke[0]*dt,oe[1]=be[1]*qe+Ue[1]*ft+Fe[1]*Xe+Ke[1]*dt,oe[2]=be[2]*qe+Ue[2]*ft+Fe[2]*Xe+Ke[2]*dt,oe},ceil:function U(oe,be){return oe[0]=Math.ceil(be[0]),oe[1]=Math.ceil(be[1]),oe[2]=Math.ceil(be[2]),oe},copy:Z,cross:he,direction:Se,dist:$e,distance:F,div:A,divide:A,dot:ae,equals:function De(oe,be){if(oe===be)return!0;const Ue=oe[0],Fe=oe[1],Ke=oe[2],Ve=be[0],tt=be[1],rt=be[2],Ne=(0,T.g)();return Math.abs(Ue-Ve)<=Ne*Math.max(1,Math.abs(Ue),Math.abs(Ve))&&Math.abs(Fe-tt)<=Ne*Math.max(1,Math.abs(Fe),Math.abs(tt))&&Math.abs(Ke-rt)<=Ne*Math.max(1,Math.abs(Ke),Math.abs(rt))},exactEquals:Ae,floor:function N(oe,be){return oe[0]=Math.floor(be[0]),oe[1]=Math.floor(be[1]),oe[2]=Math.floor(be[2]),oe},hermite:function ue(oe,be,Ue,Fe,Ke,Ve){const tt=Ve*Ve,rt=tt*(2*Ve-3)+1,Ne=tt*(Ve-2)+Ve,qe=tt*(Ve-1),ft=tt*(3-2*Ve);return oe[0]=be[0]*rt+Ue[0]*Ne+Fe[0]*qe+Ke[0]*ft,oe[1]=be[1]*rt+Ue[1]*Ne+Fe[1]*qe+Ke[1]*ft,oe[2]=be[2]*rt+Ue[2]*Ne+Fe[2]*qe+Ke[2]*ft,oe},inverse:function q(oe,be){return oe[0]=1/be[0],oe[1]=1/be[1],oe[2]=1/be[2],oe},len:Ie,length:w,lerp:ne,max:function k(oe,be,Ue){return oe[0]=Math.max(be[0],Ue[0]),oe[1]=Math.max(be[1],Ue[1]),oe[2]=Math.max(be[2],Ue[2]),oe},min:function G(oe,be,Ue){return oe[0]=Math.min(be[0],Ue[0]),oe[1]=Math.min(be[1],Ue[1]),oe[2]=Math.min(be[2],Ue[2]),oe},mul:W,multiply:W,negate:function X(oe,be){return oe[0]=-be[0],oe[1]=-be[1],oe[2]=-be[2],oe},normalize:Y,random:function ie(oe,be){be=be||1;const Ue=T.R,Fe=2*Ue()*Math.PI,Ke=2*Ue()-1,Ve=Math.sqrt(1-Ke*Ke)*be;return oe[0]=Math.cos(Fe)*Ve,oe[1]=Math.sin(Fe)*Ve,oe[2]=Ke*be,oe},rotateX:function Oe(oe,be,Ue,Fe){const Ke=[],Ve=[];return Ke[0]=be[0]-Ue[0],Ke[1]=be[1]-Ue[1],Ke[2]=be[2]-Ue[2],Ve[0]=Ke[0],Ve[1]=Ke[1]*Math.cos(Fe)-Ke[2]*Math.sin(Fe),Ve[2]=Ke[1]*Math.sin(Fe)+Ke[2]*Math.cos(Fe),oe[0]=Ve[0]+Ue[0],oe[1]=Ve[1]+Ue[1],oe[2]=Ve[2]+Ue[2],oe},rotateY:function re(oe,be,Ue,Fe){const Ke=[],Ve=[];return Ke[0]=be[0]-Ue[0],Ke[1]=be[1]-Ue[1],Ke[2]=be[2]-Ue[2],Ve[0]=Ke[2]*Math.sin(Fe)+Ke[0]*Math.cos(Fe),Ve[1]=Ke[1],Ve[2]=Ke[2]*Math.cos(Fe)-Ke[0]*Math.sin(Fe),oe[0]=Ve[0]+Ue[0],oe[1]=Ve[1]+Ue[1],oe[2]=Ve[2]+Ue[2],oe},rotateZ:function le(oe,be,Ue,Fe){const Ke=[],Ve=[];return Ke[0]=be[0]-Ue[0],Ke[1]=be[1]-Ue[1],Ke[2]=be[2]-Ue[2],Ve[0]=Ke[0]*Math.cos(Fe)-Ke[1]*Math.sin(Fe),Ve[1]=Ke[0]*Math.sin(Fe)+Ke[1]*Math.cos(Fe),Ve[2]=Ke[2],oe[0]=Ve[0]+Ue[0],oe[1]=Ve[1]+Ue[1],oe[2]=Ve[2]+Ue[2],oe},round:function z(oe,be){return oe[0]=Math.round(be[0]),oe[1]=Math.round(be[1]),oe[2]=Math.round(be[2]),oe},scale:C,scaleAndAdd:D,set:x,sign:function Q(oe,be){return oe[0]=Math.sign(be[0]),oe[1]=Math.sign(be[1]),oe[2]=Math.sign(be[2]),oe},sqrDist:B,sqrLen:$,squaredDistance:B,squaredLength:$,str:function ge(oe){return"vec3("+oe[0]+", "+oe[1]+", "+oe[2]+")"},sub:V,subtract:V,transformMat3:_e,transformMat4:fe,transformQuat:de},Symbol.toStringTag,{value:"Module"}))},77765:(He,Pe,g)=>{"use strict";function E(){return[0,0,0]}function T(C){return[C[0],C[1],C[2]]}function w(C,D,F){return[C,D,F]}function Z(C){const D=[0,0,0],F=Math.min(3,C.length);for(let B=0;B<F;++B)D[B]=C[B];return D}function x(C,D){return new Float64Array(C,D,3)}function V(){return w(1,1,1)}function W(){return w(1,0,0)}function A(){return w(0,1,0)}function U(){return w(0,0,1)}g.d(Pe,{O:()=>J,Z:()=>N,a:()=>T,b:()=>x,c:()=>E,d:()=>Z,f:()=>w});const N=[0,0,0],J=V(),Q=W(),G=A(),k=U();Object.freeze(Object.defineProperty({__proto__:null,ONES:J,UNIT_X:Q,UNIT_Y:G,UNIT_Z:k,ZEROS:N,clone:T,create:E,createView:x,fromArray:Z,fromValues:w,ones:V,unitX:W,unitY:A,unitZ:U,zeros:function se(){return[0,0,0]}},Symbol.toStringTag,{value:"Module"}))},71943:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>Z,b:()=>Q,c:()=>T,d:()=>X,e:()=>C,f:()=>D,g:()=>ue,h:()=>te,l:()=>q,n:()=>$,s:()=>w});var E=g(33980);function T(ve,Te){return ve[0]=Te[0],ve[1]=Te[1],ve[2]=Te[2],ve[3]=Te[3],ve}function w(ve,Te,ge,Ae,De){return ve[0]=Te,ve[1]=ge,ve[2]=Ae,ve[3]=De,ve}function Z(ve,Te,ge){return ve[0]=Te[0]+ge[0],ve[1]=Te[1]+ge[1],ve[2]=Te[2]+ge[2],ve[3]=Te[3]+ge[3],ve}function x(ve,Te,ge){return ve[0]=Te[0]-ge[0],ve[1]=Te[1]-ge[1],ve[2]=Te[2]-ge[2],ve[3]=Te[3]-ge[3],ve}function se(ve,Te,ge){return ve[0]=Te[0]*ge[0],ve[1]=Te[1]*ge[1],ve[2]=Te[2]*ge[2],ve[3]=Te[3]*ge[3],ve}function V(ve,Te,ge){return ve[0]=Te[0]/ge[0],ve[1]=Te[1]/ge[1],ve[2]=Te[2]/ge[2],ve[3]=Te[3]/ge[3],ve}function Q(ve,Te,ge){return ve[0]=Te[0]*ge,ve[1]=Te[1]*ge,ve[2]=Te[2]*ge,ve[3]=Te[3]*ge,ve}function k(ve,Te){const ge=Te[0]-ve[0],Ae=Te[1]-ve[1],De=Te[2]-ve[2],Se=Te[3]-ve[3];return Math.sqrt(ge*ge+Ae*Ae+De*De+Se*Se)}function z(ve,Te){const ge=Te[0]-ve[0],Ae=Te[1]-ve[1],De=Te[2]-ve[2],Se=Te[3]-ve[3];return ge*ge+Ae*Ae+De*De+Se*Se}function C(ve){const Te=ve[0],ge=ve[1],Ae=ve[2],De=ve[3];return Math.sqrt(Te*Te+ge*ge+Ae*Ae+De*De)}function D(ve){const Te=ve[0],ge=ve[1],Ae=ve[2],De=ve[3];return Te*Te+ge*ge+Ae*Ae+De*De}function $(ve,Te){const ge=Te[0],Ae=Te[1],De=Te[2],Se=Te[3];let me=ge*ge+Ae*Ae+De*De+Se*Se;return me>0&&(me=1/Math.sqrt(me),ve[0]=ge*me,ve[1]=Ae*me,ve[2]=De*me,ve[3]=Se*me),ve}function X(ve,Te){return ve[0]*Te[0]+ve[1]*Te[1]+ve[2]*Te[2]+ve[3]*Te[3]}function q(ve,Te,ge,Ae){const De=Te[0],Se=Te[1],me=Te[2],ye=Te[3];return ve[0]=De+Ae*(ge[0]-De),ve[1]=Se+Ae*(ge[1]-Se),ve[2]=me+Ae*(ge[2]-me),ve[3]=ye+Ae*(ge[3]-ye),ve}function ue(ve,Te){return ve[0]===Te[0]&&ve[1]===Te[1]&&ve[2]===Te[2]&&ve[3]===Te[3]}function te(ve,Te){const ge=ve[0],Ae=ve[1],De=ve[2],Se=ve[3],me=Te[0],ye=Te[1],we=Te[2],$e=Te[3],Ce=(0,E.g)();return Math.abs(ge-me)<=Ce*Math.max(1,Math.abs(ge),Math.abs(me))&&Math.abs(Ae-ye)<=Ce*Math.max(1,Math.abs(Ae),Math.abs(ye))&&Math.abs(De-we)<=Ce*Math.max(1,Math.abs(De),Math.abs(we))&&Math.abs(Se-$e)<=Ce*Math.max(1,Math.abs(Se),Math.abs($e))}Object.freeze(Object.defineProperty({__proto__:null,add:Z,ceil:function W(ve,Te){return ve[0]=Math.ceil(Te[0]),ve[1]=Math.ceil(Te[1]),ve[2]=Math.ceil(Te[2]),ve[3]=Math.ceil(Te[3]),ve},copy:T,dist:k,distance:k,div:V,divide:V,dot:X,equals:te,exactEquals:ue,floor:function A(ve,Te){return ve[0]=Math.floor(Te[0]),ve[1]=Math.floor(Te[1]),ve[2]=Math.floor(Te[2]),ve[3]=Math.floor(Te[3]),ve},inverse:function B(ve,Te){return ve[0]=1/Te[0],ve[1]=1/Te[1],ve[2]=1/Te[2],ve[3]=1/Te[3],ve},len:C,length:C,lerp:q,max:function N(ve,Te,ge){return ve[0]=Math.max(Te[0],ge[0]),ve[1]=Math.max(Te[1],ge[1]),ve[2]=Math.max(Te[2],ge[2]),ve[3]=Math.max(Te[3],ge[3]),ve},min:function U(ve,Te,ge){return ve[0]=Math.min(Te[0],ge[0]),ve[1]=Math.min(Te[1],ge[1]),ve[2]=Math.min(Te[2],ge[2]),ve[3]=Math.min(Te[3],ge[3]),ve},mul:se,multiply:se,negate:function F(ve,Te){return ve[0]=-Te[0],ve[1]=-Te[1],ve[2]=-Te[2],ve[3]=-Te[3],ve},normalize:$,random:function Y(ve,Te){const ge=E.R;let Ae,De,Se,me,ye,we;Te=Te||1;do{Ae=2*ge()-1,De=2*ge()-1,ye=Ae*Ae+De*De}while(ye>=1);do{Se=2*ge()-1,me=2*ge()-1,we=Se*Se+me*me}while(we>=1);const $e=Math.sqrt((1-ye)/we);return ve[0]=Te*Ae,ve[1]=Te*De,ve[2]=Te*Se*$e,ve[3]=Te*me*$e,ve},round:function J(ve,Te){return ve[0]=Math.round(Te[0]),ve[1]=Math.round(Te[1]),ve[2]=Math.round(Te[2]),ve[3]=Math.round(Te[3]),ve},scale:Q,scaleAndAdd:function G(ve,Te,ge,Ae){return ve[0]=Te[0]+ge[0]*Ae,ve[1]=Te[1]+ge[1]*Ae,ve[2]=Te[2]+ge[2]*Ae,ve[3]=Te[3]+ge[3]*Ae,ve},set:w,sqrDist:z,sqrLen:D,squaredDistance:z,squaredLength:D,str:function ne(ve){return"vec4("+ve[0]+", "+ve[1]+", "+ve[2]+", "+ve[3]+")"},sub:x,subtract:x,transformMat4:function ae(ve,Te,ge){const Ae=Te[0],De=Te[1],Se=Te[2],me=Te[3];return ve[0]=ge[0]*Ae+ge[4]*De+ge[8]*Se+ge[12]*me,ve[1]=ge[1]*Ae+ge[5]*De+ge[9]*Se+ge[13]*me,ve[2]=ge[2]*Ae+ge[6]*De+ge[10]*Se+ge[14]*me,ve[3]=ge[3]*Ae+ge[7]*De+ge[11]*Se+ge[15]*me,ve},transformQuat:function he(ve,Te,ge){const Ae=Te[0],De=Te[1],Se=Te[2],me=ge[0],ye=ge[1],we=ge[2],$e=ge[3],Ce=$e*Ae+ye*Se-we*De,Ie=$e*De+we*Ae-me*Se,je=$e*Se+me*De-ye*Ae,Je=-me*Ae-ye*De-we*Se;return ve[0]=Ce*$e+Je*-me+Ie*-we-je*-ye,ve[1]=Ie*$e+Je*-ye+je*-me-Ce*-we,ve[2]=je*$e+Je*-we+Ce*-ye-Ie*-me,ve[3]=Te[3],ve}},Symbol.toStringTag,{value:"Module"}))},91746:(He,Pe,g)=>{"use strict";function E(){return[0,0,0,0]}function w(F,B,$,X){return[F,B,$,X]}function x(F,B){return new Float64Array(F,B,4)}function V(){return w(1,1,1,1)}function W(){return w(1,0,0,0)}function A(){return w(0,1,0,0)}function U(){return w(0,0,1,0)}function N(){return w(0,0,0,1)}g.d(Pe,{a:()=>x,c:()=>E,f:()=>w});const Q=V(),G=W(),k=A(),z=U(),C=N();Object.freeze(Object.defineProperty({__proto__:null,ONES:Q,UNIT_W:C,UNIT_X:G,UNIT_Y:k,UNIT_Z:z,ZEROS:[0,0,0,0],clone:function T(F){return[F[0],F[1],F[2],F[3]]},create:E,createView:x,fromArray:function Z(F){const B=[0,0,0,0],$=Math.min(4,F.length);for(let X=0;X<$;++X)B[X]=F[X];return B},fromValues:w,ones:V,unitW:N,unitX:W,unitY:A,unitZ:U,zeros:function se(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},32227:(He,Pe,g)=>{"use strict";g.d(Pe,{B7:()=>se,St:()=>T,VL:()=>Z,h$:()=>w,rW:()=>V});const E={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function T(W){return E[W]||E[W.toLowerCase()]}function w(W){return E[W]??E[W.toLowerCase()]}function Z(W){return[...w(W)]}function x(W,A,U){U<0&&++U,U>1&&--U;const N=6*U;return N<1?W+(A-W)*N:2*U<1?A:3*U<2?W+(A-W)*(2/3-U)*6:W}function se(W,A,U,N=1){const J=(W%360+360)%360/360,Q=U<=.5?U*(A+1):U+A-U*A,G=2*U-Q;return[Math.round(255*x(G,Q,J+1/3)),Math.round(255*x(G,Q,J)),Math.round(255*x(G,Q,J-1/3)),N]}function V(W){const A=W.length>5,U=A?8:4,N=(1<<U)-1,J=A?1:17,Q=A?9===W.length:5===W.length;let G=+("0x"+W.substr(1));if(isNaN(G))return null;const k=[0,0,0,1];let z;return Q&&(z=G&N,G>>=U,k[3]=J*z/255),z=G&N,G>>=U,k[2]=J*z,z=G&N,G>>=U,k[1]=J*z,z=G&N,G>>=U,k[0]=J*z,k}},68327:(He,Pe,g)=>{"use strict";g.d(Pe,{default:()=>w}),g(67087);var T=g(44054);const w={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};globalThis.esriConfig&&((0,T.RH)(w,globalThis.esriConfig,!0),delete w.has),w.assetsPath||(w.assetsPath=`https://js.arcgis.com/${"4.26.5".slice(0,-2)}/@arcgis/core/assets`,w.defaultAssetsPath=w.assetsPath)},6365:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>re});var E=g(40070),T=g(53661),w=g(43173),Z=g(58236),x=g(69778),V=(g(67087),g(88684)),W=g(28191),A=g(5261),U=g(57530),N=g(1006),J=g(61434),Q=g(64137),G=g(59827);class k{constructor(ce,ve,Te){this.properties=ce,this.propertyName=ve,this.metadata=Te,this.observerObject=new z,this._accessed=null,this._handles=null,this.observerObject.flags=G.v.Dirty|(Te.nonNullable?G.v.NonNullable:0)|(Te.hasOwnProperty("value")?G.v.HasDefaultValue:0)|(void 0===Te.get?G.v.DepTrackingInitialized:0)|(void 0===Te.dependsOn?G.v.AutoTracked:0),C.register(this,this.observerObject)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles(),C.unregister(this)}getComputed(){const ce=this.observerObject;(0,Q.it)(ce);const ve=this.properties.store,Te=this.propertyName,ge=ce.flags,Ae=ve.get(Te);if(ge&G.v.Computing||~ge&G.v.Dirty&&ve.has(Te))return Ae;ce.flags|=G.v.Computing;const De=this.properties.host;let Se;ge&G.v.AutoTracked?Se=(0,Q.LJ)(this,this.metadata.get,De):((0,Q.GF)(De,this),Se=this.metadata.get.call(De)),ve.set(Te,Se,J.s3.COMPUTED);const me=ve.get(Te);return me===Ae?ce.flags&=~G.v.Dirty:(0,Q.gb)(this.commit,this),ce.flags&=~G.v.Computing,me}onObservableAccessed(ce){ce!==this.observerObject&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(ce)||this._accessed.push(ce))}onTrackingEnd(){this._clearObservationHandles();const ce=this.observerObject;ce.flags|=G.v.DepTrackingInitialized;const ve=this._accessed;if(null===ve)return;let Te=this._handles;null===Te&&(Te=this._handles=[]);for(let ge=0;ge<ve.length;++ge)Te.push(ve[ge].observe(ce));ve.length=0}notifyChange(){const ce=this.observerObject;ce.onInvalidated(),ce.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const ce=this.observerObject;ce.flags&=~G.v.Dirty,ce.onCommitted()}_clearObservationHandles(){const ce=this._handles;if(null!==ce){for(let ve=0;ve<ce.length;++ve)ce[ve].remove();ce.length=0}}}class z extends N.s{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&G.v.Overriden&&(this.flags|=G.v.Dirty);const ce=this._observers;if(ce&&ce.length>0)for(const ve of ce)ve.onInvalidated()}onCommitted(){const ce=this._observers;if(ce&&ce.length>0){const ve=ce.slice();for(const Te of ve)Te.onCommitted()}}destroy(){this.flags&G.v.Dirty&&this.onCommitted(),super.destroy()}}const C=new FinalizationRegistry(le=>{le.destroy()});class D{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(ce){const ve=new D;return this._values.forEach((Te,ge)=>{ce&&ce.has(ge)||ve.set(ge,(0,V.d9)(Te))}),ve}get(ce){return this._values.get(ce)}originOf(){return J.s3.USER}keys(){return[...this._values.keys()]}set(ce,ve){this._values.set(ce,ve)}delete(ce){this._values.delete(ce)}has(ce){return this._values.has(ce)}forEach(ce){this._values.forEach(ce)}}var F=g(38904);function B(le,ce,ve){return void 0!==le}function $(le,ce,ve,Te){return!(void 0===le||null==ve&&le.observerObject.flags&G.v.NonNullable)}W.Z.getLogger("esri.core.accessorSupport.Properties");class q{constructor(ce){this.host=ce,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=U.F.INITIALIZING,this.store=new D,this._origin=J.s3.USER;const ve=(0,T.j0)(this.host.constructor.__accessorMetadata__);for(const Te in ve){const ge=new k(this,Te,ve[Te]);this.properties.set(Te,ge)}this.metadatas=ve}initialize(){this.lifecycle=U.F.CONSTRUCTING}constructed(){this.lifecycle=U.F.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[ce,ve]of this.properties){if(ve.metadata.autoDestroy){const Te=this.internalGet(ce);Te&&(le=Te)&&"function"==typeof le.destroy&&(Te.destroy(),~ve.observerObject.flags&G.v.NonNullable&&this._internalSet(ve,null))}ve.destroy()}var le}get initialized(){return this.lifecycle!==U.F.INITIALIZING}get(ce){const ve=this.properties.get(ce);if(ve.metadata.get)return ve.getComputed();(0,Q.it)(ve.observerObject);const Te=this.store;return Te.has(ce)?Te.get(ce):ve.metadata.value}originOf(ce){const ve=this.store.originOf(ce);if(void 0===ve){const Te=this.properties.get(ce);if(void 0!==Te&&Te.observerObject.flags&G.v.HasDefaultValue)return"defaults"}return(0,J.x3)(ve)}has(ce){return!!this.properties.has(ce)&&this.store.has(ce)}keys(){return[...this.properties.keys()]}internalGet(ce){const ve=this.properties.get(ce);if(B(ve))return this.store.has(ce)?this.store.get(ce):ve.metadata.value}internalSet(ce,ve){const Te=this.properties.get(ce);B(Te)&&this._internalSet(Te,ve)}getDependsInfo(ce,ve,Te){const ge=this.properties.get(ve);if(!B(ge))return"";const Ae=new Set,De=(0,Q.LJ)({onObservableAccessed:me=>Ae.add(me),onTrackingEnd:()=>{}},()=>ge.metadata.get?.call(ce));let Se=`${Te}${ce.declaredClass.split(".").pop()}.${ve}: ${De}\n`;if(0===Ae.size)return Se;Te+="  ";for(const me of Ae){if(!(me instanceof k))continue;const ye=me.properties.host,we=me.propertyName,$e=(0,F.vw)(ye);Se+=$e?$e.getDependsInfo(ye,we,Te):`${Te}${we}: undefined\n`}return Se}setAtOrigin(ce,ve,Te){const ge=this.properties.get(ce);if(B(ge))return this._setAtOrigin(ge,ve,Te)}isOverridden(ce){const ve=this.properties.get(ce);return void 0!==ve&&!!(ve.observerObject.flags&G.v.Overriden)}clearOverride(ce){const ve=this.properties.get(ce),Te=ve?.observerObject;Te&&Te.flags&G.v.Overriden&&(Te.flags&=~G.v.Overriden,ve.notifyChange())}override(ce,ve){const Te=this.properties.get(ce);if(!$(Te,0,ve))return;const ge=Te.metadata.cast;if(ge){const Ae=this._cast(ge,ve),{valid:De,value:Se}=Ae;if(ae.release(Ae),!De)return;ve=Se}Te.observerObject.flags|=G.v.Overriden,this._internalSet(Te,ve)}set(ce,ve){const Te=this.properties.get(ce);if(!$(Te,0,ve))return;const ge=Te.metadata.cast;if(ge){const De=this._cast(ge,ve),{valid:Se,value:me}=De;if(ae.release(De),!Se)return;ve=me}const Ae=Te.metadata.set;Ae?Ae.call(this.host,ve):this._internalSet(Te,ve)}setDefaultOrigin(ce){this._origin=(0,J.M9)(ce)}getDefaultOrigin(){return(0,J.x3)(this._origin)}notifyChange(ce){const ve=this.properties.get(ce);void 0!==ve&&ve.notifyChange()}invalidate(ce){const ve=this.properties.get(ce);void 0!==ve&&ve.invalidate()}commit(ce){const ve=this.properties.get(ce);void 0!==ve&&ve.commit()}_internalSet(ce,ve){this._setAtOrigin(ce,ve,this.lifecycle!==U.F.INITIALIZING?this._origin:J.s3.DEFAULTS)}_setAtOrigin(ce,ve,Te){const ge=this.store,Ae=ce.propertyName;ge.has(Ae,Te)&&(0,V.fS)(ve,ge.get(Ae))&&~ce.observerObject.flags&G.v.Overriden&&Te===ge.originOf(Ae)||(ce.invalidate(),ge.set(Ae,ve,Te),ce.commit(),(0,Q.mS)(this.host,ce))}_cast(ce,ve){const Te=ae.acquire();return Te.valid=!0,Te.value=ve,ce&&(Te.value=ce.call(this.host,ve,Te)),Te}}const ae=new A.Z(class Y{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});var ie,fe,he=g(6784),ne=g(11225),ue=g(9497),te=g(20891);function _e(le){if(null==le)return{value:le};if(Array.isArray(le))return{type:[le[0]],value:null};switch(typeof le){case"object":return le.constructor?.__accessorMetadata__||le instanceof Date?{type:le.constructor,value:le}:le;case"boolean":return{type:Boolean,value:le};case"string":return{type:String,value:le};case"number":return{type:Number,value:le};case"function":return{type:le,value:null};default:return}}const de=Symbol("Accessor-Handles"),Oe=Symbol("Accessor-Initialized");class re{static createSubclass(ce={}){if(Array.isArray(ce))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:ve,declaredClass:Te,constructor:ge}=ce;delete ce.declaredClass,delete ce.properties,delete ce.constructor;const Ae=this;class De extends Ae{constructor(...me){super(...me),this.inherited=null,ge&&ge.apply(this,me)}}(0,x.fp)(De.prototype);for(const Se in ce){const me=ce[Se];De.prototype[Se]="function"==typeof me?function(...ye){const we=this.inherited;let $e;this.inherited=function(...Ce){if(Ae.prototype[Se])return Ae.prototype[Se].apply(this,Ce)};try{$e=me.apply(this,ye)}catch(Ce){throw this.inherited=we,Ce}return this.inherited=we,$e}:ce[Se]}for(const Se in ve){const me=_e(ve[Se]);(0,ue.Cb)(me)(De.prototype,Se)}return(0,te.j)(Te)(De)}constructor(...ce){if(this[ie]=null,this[fe]=!1,this.constructor===re)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new q(this)}),ce.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,ce))}postscript(ce){const ve=this.__accessor__,Te=ve.ctorArgs||ce;ve.initialize(),Te&&(this.set(Te),ve.ctorArgs=null),ve.constructed(),this.initialize(),this[Oe]=!0}initialize(){}[w.F](){this[de]=(0,T.SC)(this[de])}destroy(){this.destroyed||((0,ne.BT)(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Oe]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(ce){this.get(ce)}get(ce){return(0,Z.U2)(this,ce)}hasOwnProperty(ce){return this.__accessor__?this.__accessor__.has(ce):Object.prototype.hasOwnProperty.call(this,ce)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(ce,ve){return(0,he.t)(this,ce,ve),this}watch(ce,ve,Te){return(0,ne.YP)(this,ce,ve,Te)}own(ce){this.addHandles(ce)}addHandles(ce,ve){let Te=this[de];(0,T.Wi)(Te)&&(Te=this[de]=new E.Z),Te.add(ce,ve)}removeHandles(ce){const ve=this[de];(0,T.Wi)(ve)||ve.remove(ce)}hasHandles(ce){const ve=this[de];return!!(0,T.pC)(ve)&&ve.has(ce)}_override(ce,ve){void 0===ve?this.__accessor__.clearOverride(ce):this.__accessor__.override(ce,ve)}_clearOverride(ce){return this.__accessor__.clearOverride(ce)}_overrideIfSome(ce,ve){null==ve?this.__accessor__.clearOverride(ce):this.__accessor__.override(ce,ve)}_isOverridden(ce){return this.__accessor__.isOverridden(ce)}notifyChange(ce){this.__accessor__.notifyChange(ce)}_get(ce){return this.__accessor__.internalGet(ce)}_set(ce,ve){return this.__accessor__.internalSet(ce,ve),this}}ie=de,fe=Oe},93113:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>w});var E=g(5261);function T(x){x.length=0}class w{constructor(se=50,V=50){this._pool=new E.Z(Array,void 0,T,V,se)}acquire(){return this._pool.acquire()}release(se){this._pool.release(se)}prune(){this._pool.prune(0)}static acquire(){return Z.acquire()}static release(se){return Z.release(se)}static prune(){Z.prune()}}const Z=new w(100)},94904:(He,Pe,g)=>{"use strict";g.d(Pe,{J:()=>U,j:()=>N});var E=g(18100),T=g(6365),Z=(g(67087),g(88684)),se=(g(28191),g(53661)),V=g(61434),W=g(38904),A=g(20891);const U=J=>{let Q=class extends J{clone(){const G=(0,se.s3)((0,W.vw)(this),"unable to clone instance of non-accessor class"),k=G.metadatas,z=G.store,C={},D=new Map;for(const B in k){const $=k[B],X=z?.originOf(B),q=$.clonable;if($.readOnly||!1===q||X!==V.s3.USER&&X!==V.s3.DEFAULTS&&X!==V.s3.WEB_MAP&&X!==V.s3.WEB_SCENE)continue;const Y=this[B];let ae=null;ae="function"==typeof q?q(Y):"reference"===q?Y:(0,Z.Vo)(Y),null!=Y&&null==ae||(X===V.s3.DEFAULTS?D.set(B,ae):C[B]=ae)}const F=new(Object.getPrototypeOf(this).constructor)(C);if(D.size){const B=(0,W.vw)(F)?.store;if(B)for(const[$,X]of D)B.set($,X,V.s3.DEFAULTS)}return F}};return Q=(0,E._)([(0,A.j)("esri.core.Clonable")],Q),Q};let N=class extends(U(T.Z)){};N=(0,E._)([(0,A.j)("esri.core.Clonable")],N)},97621:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>te});var V,ie,E=g(18100),T=g(93113),w=g(95442),Z=g(88684),x=g(53661),se=g(5261);(ie=V||(V={}))[ie.ADD=1]="ADD",ie[ie.REMOVE=2]="REMOVE",ie[ie.MOVE=4]="MOVE";var k,W=g(91409),A=g(9497),U=g(83382),N=g(10729),J=g(20891),Q=g(64137),G=g(33119);const C=new se.Z(class z{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(fe){this.defaultPrevented=!1,this.item=fe}},void 0,ie=>{ie.item=null,ie.target=null,ie.defaultPrevented=!1,ie.cancellable=!1}),D=()=>{};function F(ie){return ie?ie instanceof ue?ie.toArray():ie.length?Array.prototype.slice.apply(ie):[]:[]}function B(ie){if(ie&&ie.length)return ie[0]}function $(ie,fe,_e,de){const Oe=Math.min(ie.length-_e,fe.length-de);let re=0;for(;re<Oe&&ie[_e+re]===fe[de+re];)re++;return re}function X(ie,fe,_e,de){fe&&fe.forEach((Oe,re,le)=>{ie.push(Oe),X(ie,_e.call(de,Oe,re,le),_e,de)})}const q=new Set,Y=new Set,ae=new Set,he=new Map;let ne=0,ue=k=class extends w.Z.EventedAccessor{static isCollection(ie){return null!=ie&&ie instanceof k}constructor(ie){super(ie),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new G.s,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:ne++})}normalizeCtorArgs(ie){return ie?Array.isArray(ie)||ie instanceof k?{items:ie}:ie:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return(0,Q.it)(this._observable),this._items}set items(ie){this._emitBeforeChanges(V.ADD)||(this._splice(0,this.length,F(ie)),this._emitAfterChanges(V.ADD))}hasEventListener(ie){return"change"===ie?this._chgListeners.length>0:this._emitter.hasEventListener(ie)}on(ie,fe){if("change"===ie){const _e=this._chgListeners,de={removed:!1,callback:fe};return _e.push(de),this._notifications&&this._notifications.push({listeners:_e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=D,de.removed=!0,_e.splice(_e.indexOf(de),1)}}}return this._emitter.on(ie,fe)}once(ie,fe){const _e=this.on(ie,fe);return{remove(){_e.remove()}}}add(ie,fe){if((0,Q.it)(this._observable),this._emitBeforeChanges(V.ADD))return this;const _e=this.getNextIndex(fe??null);return this._splice(_e,0,[ie]),this._emitAfterChanges(V.ADD),this}addMany(ie,fe=this._items.length){if((0,Q.it)(this._observable),!ie||!ie.length)return this;if(this._emitBeforeChanges(V.ADD))return this;const _e=this.getNextIndex(fe);return this._splice(_e,0,F(ie)),this._emitAfterChanges(V.ADD),this}at(ie){if((0,Q.it)(this._observable),(ie=Math.trunc(ie)||0)<0&&(ie+=this.length),!(ie<0||ie>=this.length))return this._items[ie]}removeAll(){if((0,Q.it)(this._observable),!this.length||this._emitBeforeChanges(V.REMOVE))return[];const ie=this._splice(0,this.length)||[];return this._emitAfterChanges(V.REMOVE),ie}clone(){return(0,Q.it)(this._observable),this._createNewInstance({items:this._items.map(Z.d9)})}concat(...ie){(0,Q.it)(this._observable);const fe=ie.map(F);return this._createNewInstance({items:this._items.concat(...fe)})}drain(ie,fe){if((0,Q.it)(this._observable),!this.length||this._emitBeforeChanges(V.REMOVE))return;const _e=(0,x.j0)(this._splice(0,this.length)),de=_e.length;for(let Oe=0;Oe<de;Oe++)ie.call(fe,_e[Oe],Oe,_e);this._emitAfterChanges(V.REMOVE)}every(ie,fe){return(0,Q.it)(this._observable),this._items.every(ie,fe)}filter(ie,fe){let _e;return(0,Q.it)(this._observable),_e=2===arguments.length?this._items.filter(ie,fe):this._items.filter(ie),this._createNewInstance({items:_e})}find(ie,fe){return(0,Q.it)(this._observable),this._items.find(ie,fe)}findIndex(ie,fe){return(0,Q.it)(this._observable),this._items.findIndex(ie,fe)}flatten(ie,fe){(0,Q.it)(this._observable);const _e=[];return X(_e,this,ie,fe),new k(_e)}forEach(ie,fe){return(0,Q.it)(this._observable),this._items.forEach(ie,fe)}getItemAt(ie){return(0,Q.it)(this._observable),this._items[ie]}getNextIndex(ie){(0,Q.it)(this._observable);const fe=this.length;return(ie=ie??fe)<0?ie=0:ie>fe&&(ie=fe),ie}includes(ie,fe=0){return(0,Q.it)(this._observable),this._items.includes(ie,fe)}indexOf(ie,fe=0){return(0,Q.it)(this._observable),this._items.indexOf(ie,fe)}join(ie=","){return(0,Q.it)(this._observable),this._items.join(ie)}lastIndexOf(ie,fe=this.length-1){return(0,Q.it)(this._observable),this._items.lastIndexOf(ie,fe)}map(ie,fe){(0,Q.it)(this._observable);const _e=this._items.map(ie,fe);return new k({items:_e})}reorder(ie,fe=this.length-1){(0,Q.it)(this._observable);const _e=this.indexOf(ie);if(-1!==_e){if(fe<0?fe=0:fe>=this.length&&(fe=this.length-1),_e!==fe){if(this._emitBeforeChanges(V.MOVE))return ie;this._splice(_e,1),this._splice(fe,0,[ie]),this._emitAfterChanges(V.MOVE)}return ie}}pop(){if((0,Q.it)(this._observable),!this.length||this._emitBeforeChanges(V.REMOVE))return;const ie=B(this._splice(this.length-1,1));return this._emitAfterChanges(V.REMOVE),ie}push(...ie){return(0,Q.it)(this._observable),this._emitBeforeChanges(V.ADD)||(this._splice(this.length,0,ie),this._emitAfterChanges(V.ADD)),this.length}reduce(ie,fe){(0,Q.it)(this._observable);const _e=this._items;return 2===arguments.length?_e.reduce(ie,fe):_e.reduce(ie)}reduceRight(ie,fe){(0,Q.it)(this._observable);const _e=this._items;return 2===arguments.length?_e.reduceRight(ie,fe):_e.reduceRight(ie)}remove(ie){return(0,Q.it)(this._observable),this.removeAt(this.indexOf(ie))}removeAt(ie){if((0,Q.it)(this._observable),ie<0||ie>=this.length||this._emitBeforeChanges(V.REMOVE))return;const fe=B(this._splice(ie,1));return this._emitAfterChanges(V.REMOVE),fe}removeMany(ie){if((0,Q.it)(this._observable),!ie||!ie.length||this._emitBeforeChanges(V.REMOVE))return[];const fe=ie instanceof k?ie.toArray():ie,_e=this._items,de=[],Oe=fe.length;for(let re=0;re<Oe;re++){const ce=_e.indexOf(fe[re]);if(ce>-1){const ve=1+$(fe,_e,re+1,ce+1),Te=this._splice(ce,ve);Te&&Te.length>0&&de.push.apply(de,Te),re+=ve-1}}return this._emitAfterChanges(V.REMOVE),de}reverse(){if((0,Q.it)(this._observable),this._emitBeforeChanges(V.MOVE))return this;const ie=this._splice(0,this.length);return ie&&(ie.reverse(),this._splice(0,0,ie)),this._emitAfterChanges(V.MOVE),this}shift(){if((0,Q.it)(this._observable),!this.length||this._emitBeforeChanges(V.REMOVE))return;const ie=B(this._splice(0,1));return this._emitAfterChanges(V.REMOVE),ie}slice(ie=0,fe=this.length){return(0,Q.it)(this._observable),this._createNewInstance({items:this._items.slice(ie,fe)})}some(ie,fe){return(0,Q.it)(this._observable),this._items.some(ie,fe)}sort(ie){if((0,Q.it)(this._observable),!this.length||this._emitBeforeChanges(V.MOVE))return this;const fe=(0,x.j0)(this._splice(0,this.length));return arguments.length?fe.sort(ie):fe.sort(),this._splice(0,0,fe),this._emitAfterChanges(V.MOVE),this}splice(ie,fe,..._e){(0,Q.it)(this._observable);const de=(fe?V.REMOVE:0)|(_e.length?V.ADD:0);if(this._emitBeforeChanges(de))return[];const Oe=this._splice(ie,fe,_e)||[];return this._emitAfterChanges(de),Oe}toArray(){return(0,Q.it)(this._observable),this._items.slice()}toJSON(){return(0,Q.it)(this._observable),this.toArray()}toLocaleString(){return(0,Q.it)(this._observable),this._items.toLocaleString()}toString(){return(0,Q.it)(this._observable),this._items.toString()}unshift(...ie){return(0,Q.it)(this._observable),!ie.length||this._emitBeforeChanges(V.ADD)||(this._splice(0,0,ie),this._emitAfterChanges(V.ADD)),this.length}_createNewInstance(ie){return new this.constructor(ie)}_splice(ie,fe,_e){const de=this._items,Oe=this.itemType;let re,le;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,W.Os)(()=>this._dispatchChange())),fe){if(le=de.splice(ie,fe),this.hasEventListener("before-remove")){const ce=C.acquire();ce.target=this,ce.cancellable=!0;for(let ve=0,Te=le.length;ve<Te;ve++)re=le[ve],ce.reset(re),this.emit("before-remove",ce),ce.defaultPrevented&&(le.splice(ve,1),de.splice(ie,0,re),ie+=1,ve-=1,Te-=1);C.release(ce)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const ce=C.acquire();ce.target=this,ce.cancellable=!1;const ve=le.length;for(let Te=0;Te<ve;Te++)ce.reset(le[Te]),this.emit("after-remove",ce);C.release(ce)}}if(_e&&_e.length){if(Oe){const ge=[];for(const Ae of _e){const De=Oe.ensureType(Ae);null==De&&null!=Ae||ge.push(De)}_e=ge}const ce=this.hasEventListener("before-add"),ve=this.hasEventListener("after-add"),Te=ie===this.length;if(ce||ve){const ge=C.acquire();ge.target=this,ge.cancellable=!0;const Ae=C.acquire();Ae.target=this,Ae.cancellable=!1;for(const De of _e)ce?(ge.reset(De),this.emit("before-add",ge),ge.defaultPrevented||(Te?de.push(De):de.splice(ie++,0,De),this._set("length",de.length),ve&&(Ae.reset(De),this.emit("after-add",Ae)))):(Te?de.push(De):de.splice(ie++,0,De),this._set("length",de.length),Ae.reset(De),this.emit("after-add",Ae));C.release(Ae),C.release(ge)}else{if(Te)for(const ge of _e)de.push(ge);else de.splice(ie,0,..._e);this._set("length",de.length)}}return(_e&&_e.length||le&&le.length)&&this._notifyChangeEvent(_e,le),le}_emitBeforeChanges(ie){let fe=!1;if(this.hasEventListener("before-changes")){const _e=C.acquire();_e.target=this,_e.cancellable=!0,_e.type=ie,this.emit("before-changes",_e),fe=_e.defaultPrevented,C.release(_e)}return fe}_emitAfterChanges(ie){if(this.hasEventListener("after-changes")){const fe=C.acquire();fe.target=this,fe.cancellable=!1,fe.type=ie,this.emit("after-changes",fe),C.release(fe)}this._observable.notify()}_notifyChangeEvent(ie,fe){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:ie,removed:fe})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const ie=this._notifications;this._notifications=null;for(const fe of ie){const _e=fe.changes;q.clear(),Y.clear(),ae.clear();for(const{added:ve,removed:Te}of _e){if(ve)if(0===ae.size&&0===Y.size)for(const ge of ve)q.add(ge);else for(const ge of ve)Y.has(ge)?(ae.add(ge),Y.delete(ge)):ae.has(ge)||q.add(ge);if(Te)if(0===ae.size&&0===q.size)for(const ge of Te)Y.add(ge);else for(const ge of Te)q.has(ge)?q.delete(ge):(ae.delete(ge),Y.add(ge))}const de=T.Z.acquire();q.forEach(ve=>{de.push(ve)});const Oe=T.Z.acquire();Y.forEach(ve=>{Oe.push(ve)});const re=this._items,le=fe.items,ce=T.Z.acquire();if(ae.forEach(ve=>{le.indexOf(ve)!==re.indexOf(ve)&&ce.push(ve)}),fe.listeners&&(de.length||Oe.length||ce.length)){const ve={target:this,added:de,removed:Oe,moved:ce},Te=fe.listeners.length;for(let ge=0;ge<Te;ge++){const Ae=fe.listeners[ge];Ae.removed||Ae.callback.call(this,ve)}}T.Z.release(de),T.Z.release(Oe),T.Z.release(ce)}q.clear(),Y.clear(),ae.clear()}};ue.ofType=ie=>{if(!ie)return k;if(he.has(ie))return he.get(ie);let fe=null;if("function"==typeof ie)fe=ie.prototype.declaredClass;else if(ie.base)fe=ie.base.prototype.declaredClass;else for(const de in ie.typeMap){const Oe=ie.typeMap[de].prototype.declaredClass;fe?fe+=` | ${Oe}`:fe=Oe}let _e=class extends k{};return(0,E._)([(0,N.c)({Type:ie,ensureType:"function"==typeof ie?(0,U.se)(ie):(0,U.N7)(ie)})],_e.prototype,"itemType",void 0),_e=(0,E._)([(0,J.j)(`esri.core.Collection<${fe}>`)],_e),he.set(ie,_e),_e},(0,E._)([(0,A.Cb)()],ue.prototype,"length",void 0),(0,E._)([(0,A.Cb)()],ue.prototype,"items",null),ue=k=(0,E._)([(0,J.j)("esri.core.Collection")],ue);const te=ue},47384:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>G});var E=g(18100),T=g(97621),w=g(53661),W=(g(67087),g(32995),g(28191),g(11225),g(50147)),A=g(9497),J=(g(83382),g(19420),g(20891));let Q=class extends T.Z{constructor(k){super(k),this.getCollections=null}initialize(){this.own((0,W.EH)(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const k=(0,w.pC)(this.getCollections)?this.getCollections():null;if((0,w.Wi)(k))return void this.removeAll();let z=0;for(const C of k)(0,w.pC)(C)&&(z=this._processCollection(z,C));this.splice(z,this.length)}_createNewInstance(k){return new T.Z(k)}_processCollection(k,z){if(!z)return k;const C=this.itemFilterFunction?this.itemFilterFunction:D=>!!D;for(const D of z)if(D){if(C(D)){const F=this.indexOf(D,k);F>=0?F!==k&&this.reorder(D,k):this.add(D,k),++k}if(this.getChildrenFunction){const F=this.getChildrenFunction(D);if(Array.isArray(F))for(const B of F)k=this._processCollection(k,B);else k=this._processCollection(k,F)}}return k}};(0,E._)([(0,A.Cb)()],Q.prototype,"getCollections",void 0),(0,E._)([(0,A.Cb)()],Q.prototype,"getChildrenFunction",void 0),(0,E._)([(0,A.Cb)()],Q.prototype,"itemFilterFunction",void 0),Q=(0,E._)([(0,J.j)("esri.core.CollectionFlattener")],Q);const G=Q},59257:(He,Pe,g)=>{"use strict";g.d(Pe,{BV:()=>se});var E=g(93142);class T{constructor(W,A){this.min=W,this.max=A,this.range=A-W}ndiff(W,A=0){return Math.ceil((W-A)/this.range)*this.range+A}_normalize(W,A,U,N=0,J=!1){return(U-=N)<W?U+=this.ndiff(W-U):U>A&&(U-=this.ndiff(U-A)),J&&U===A&&(U=W),U+N}normalize(W,A=0,U=!1){return this._normalize(this.min,this.max,W,A,U)}clamp(W,A=0){return(0,E.uZ)(W-A,this.min,this.max)+A}monotonic(W,A,U){return W<A?A:A+this.ndiff(W-A,U)}minimalMonotonic(W,A,U){return this._normalize(W,W+this.range,A,U)}center(W,A,U){return A=this.monotonic(W,A,U),this.normalize((W+A)/2,U)}diff(W,A,U){return this.monotonic(W,A,U)-W}shortestSignedDiff(W,A){W=this.normalize(W);const U=(A=this.normalize(A))-W,N=A<W?this.minimalMonotonic(W,A)-W:A-this.minimalMonotonic(A,W);return Math.abs(U)<Math.abs(N)?U:N}contains(W,A,U){return A=this.minimalMonotonic(W,A),(U=this.minimalMonotonic(W,U))>W&&U<A}}function w(V){for(const W in V){const A=V[W];A instanceof Function&&(V[W]=A.bind(V))}return V}w(new T(0,2*Math.PI)),w(new T(-Math.PI,Math.PI));const se=w(new T(0,360))},32995:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Z});var E=g(88684),T=g(28191),w=g(1063);class Z extends w.Z{constructor(se,V,W){if(super(se,V,W),!(this instanceof Z))return new Z(se,V,W)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(se,V)=>{if(V&&"object"==typeof V&&"function"==typeof V.toJSON)return V;try{return(0,E.d9)(V)}catch{return"[object]"}}))}}catch(se){throw T.Z.getLogger("esri.core.Error").error(se),se}return{name:this.name,message:this.message,details:this.details}}static fromJSON(se){return new Z(se.name,se.message,se.details)}}Z.prototype.type="error"},95442:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>se});var E=g(18100),T=g(6365),w=g(70120),Z=g(20891);class x{constructor(){this._emitter=new x.EventEmitter(this)}emit(W,A){return this._emitter.emit(W,A)}on(W,A){return this._emitter.on(W,A)}once(W,A){return this._emitter.once(W,A)}hasEventListener(W){return this._emitter.hasEventListener(W)}}!function(V){class W{constructor(N=null){this._target=N,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(N,J){const Q=this._listenersMap&&this._listenersMap.get(N);if(!Q)return!1;const G=this._target||this;return[...Q].forEach(k=>{k.call(G,J)}),Q.length>0}on(N,J){if(Array.isArray(N)){const G=N.map(k=>this.on(k,J));return(0,w.AL)(G)}if(N.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const Q=this._listenersMap.get(N)||[];return Q.push(J),this._listenersMap.set(N,Q),{remove:()=>{const G=this._listenersMap&&this._listenersMap.get(N)||[],k=G.indexOf(J);k>=0&&G.splice(k,1)}}}once(N,J){const Q=this.on(N,G=>{Q.remove(),J.call(null,G)});return Q}hasEventListener(N){const J=this._listenersMap&&this._listenersMap.get(N);return null!=J&&J.length>0}}V.EventEmitter=W,V.EventedMixin=U=>{let N=class extends U{constructor(){super(...arguments),this._emitter=new W}destroy(){this._emitter.clear()}emit(J,Q){return this._emitter.emit(J,Q)}on(J,Q){return this._emitter.on(J,Q)}once(J,Q){return this._emitter.once(J,Q)}hasEventListener(J){return this._emitter.hasEventListener(J)}};return N=(0,E._)([(0,Z.j)("esri.core.Evented")],N),N};let A=class extends T.Z{constructor(){super(...arguments),this._emitter=new x.EventEmitter(this)}destroy(){this._emitter.clear()}emit(U,N){return this._emitter.emit(U,N)}on(U,N){return this._emitter.on(U,N)}once(U,N){return this._emitter.once(U,N)}hasEventListener(U){return this._emitter.hasEventListener(U)}};A=(0,E._)([(0,Z.j)("esri.core.Evented")],A),V.EventedAccessor=A}(x||(x={}));const se=x},31882:(He,Pe,g)=>{"use strict";g.d(Pe,{p:()=>V,r:()=>W});var E=g(18100),T=g(6365),w=g(40070),Z=g(9497),x=g(20891),se=g(67353);const V=A=>{let U=class extends A{destroy(){this.destroyed||(this._get("handles")?.destroy(),this._get("updatingHandles")?.destroy())}get handles(){return this._get("handles")||new w.Z}get updatingHandles(){return this._get("updatingHandles")||new se.t}};return(0,E._)([(0,Z.Cb)({readOnly:!0})],U.prototype,"handles",null),(0,E._)([(0,Z.Cb)({readOnly:!0})],U.prototype,"updatingHandles",null),U=(0,E._)([(0,x.j)("esri.core.HandleOwner")],U),U};let W=class extends(V(T.Z)){};W=(0,E._)([(0,x.j)("esri.core.HandleOwner")],W)},40070:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>w});var E=g(91800),T=g(53661);class w{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let x=0;return this._groups.forEach(se=>{x+=se.length}),x}add(x,se){if((0,E.TW)(x)){const V=this._getOrCreateGroup(se);for(const W of x)this._isHandle(W)&&V.push(W)}else this._isHandle(x)&&this._getOrCreateGroup(se).push(x);return this}forEach(x,se){if("function"==typeof x)this._groups.forEach(V=>V.forEach(x));else{const V=this._getGroup(x);V&&se&&V.forEach(se)}}has(x){return this._groups.has(this._ensureGroupKey(x))}remove(x){if("string"!=typeof x&&(0,E.TW)(x)){for(const se of x)this.remove(se);return this}return this.has(x)?(this._removeAllFromGroup(this._getGroup(x)),this._groups.delete(this._ensureGroupKey(x)),this):this}removeAll(){return this._groups.forEach(x=>this._removeAllFromGroup(x)),this._groups.clear(),this}_isHandle(x){return x&&!!x.remove}_getOrCreateGroup(x){if(this.has(x))return this._getGroup(x);const se=[];return this._groups.set(this._ensureGroupKey(x),se),se}_getGroup(x){return(0,T.j0)(this._groups.get(this._ensureGroupKey(x)))}_ensureGroupKey(x){return x||"_default_"}_removeAllFromGroup(x){x.forEach(se=>se.remove())}}},20711:(He,Pe,g)=>{"use strict";g.d(Pe,{IG:()=>Z,iv:()=>x});var E=g(18100),T=g(20891);let w=0;const Z=V=>{let W=class extends V{constructor(...A){super(...A),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+w++})}};return W=(0,E._)([(0,T.j)("esri.core.Identifiable")],W),W},x=V=>{let W=class extends V{constructor(...A){super(...A),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:w++})}};return W=(0,E._)([(0,T.j)("esri.core.NumericIdentifiable")],W),W};let se=class extends(Z(class{})){};se=(0,E._)([(0,T.j)("esri.core.Identifiable")],se)},29583:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>T});var E=g(9029);class T{constructor(Z,x){this._storage=new E.WJ,this._storage.maxSize=Z,x&&this._storage.registerRemoveFunc("",x)}put(Z,x){this._storage.put(Z,x,1,1)}pop(Z){return this._storage.pop(Z)}get(Z){return this._storage.get(Z)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},44480:(He,Pe,g)=>{"use strict";g.d(Pe,{wq:()=>z,eC:()=>Q});var E=g(18100),T=g(6365),w=g(53661),Z=g(88684),x=g(61434);class se{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(D){const F=new se;return this._values.forEach((B,$)=>{D&&D.has($)||F.set($,(0,Z.d9)(B.value),B.origin)}),F}get(D,F){F=this._normalizeOrigin(F);const B=this._values.get(D);return null==F||B?.origin===F?B?.value:void 0}originOf(D){return this._values.get(D)?.origin??x.s3.USER}keys(D){D=this._normalizeOrigin(D);const F=[...this._values.keys()];return null==D?F:F.filter(B=>this._values.get(B)?.origin===D)}set(D,F,B){if((B=this._normalizeOrigin(B))===x.s3.DEFAULTS){const $=this._values.get(D);if($&&null!=$.origin&&$.origin>B)return}this._values.set(D,new V(F,B))}delete(D,F){null!=(F=this._normalizeOrigin(F))&&this._values.get(D)?.origin!==F||this._values.delete(D)}has(D,F){return null!=(F=this._normalizeOrigin(F))?this._values.get(D)?.origin===F:this._values.has(D)}forEach(D){this._values.forEach(({value:F},B)=>D(F,B))}_normalizeOrigin(D){if(null!=D)return D===x.s3.DEFAULTS?D:x.s3.USER}}class V{constructor(D,F){this.value=D,this.origin=F}}var W=g(94625),A=g(44564),U=g(38904),N=g(64939),J=g(20891);const Q=C=>{let D=class extends C{constructor(...F){super(...F);const B=(0,w.j0)((0,U.vw)(this)),$=B.store,X=new se;B.store=X,(0,W.M)(B,$,X)}read(F,B){(0,A.i)(this,F,B)}write(F={},B){return(0,N.c)(this,F,B)}toJSON(F){return this.write({},F)}static fromJSON(F,B){return G.call(this,F,B)}};return D=(0,E._)([(0,J.j)("esri.core.JSONSupport")],D),D.prototype.toJSON.isDefaultToJSON=!0,D};function G(C,D){if(!C)return null;if(C.declaredClass)throw new Error("JSON object is already hydrated");const F=new this;return F.read(C,D),F}let z=class extends(Q(T.Z)){};z=(0,E._)([(0,J.j)("esri.core.JSONSupport")],z)},61101:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>T});var E=g(9029);class T{constructor(Z,x){this._storage=new E.WJ,this._storage.maxSize=Z,x&&this._storage.registerRemoveFunc("",x)}put(Z,x,se){this._storage.put(Z,x,se,1)}pop(Z){return this._storage.pop(Z)}get(Z){return this._storage.get(Z)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(Z){this._storage.maxSize=Z}}},48500:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>G});var E=g(18100),T=g(32995),w=g(99508),Z=g(30801),x=g(23476),se=g(9497),V=g(20891);const N="loaded",J=k=>{let z=class extends k{constructor(...C){super(...C),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(D=>{const F=this.load.bind(this);this.load=B=>{const $=new Promise((X,q)=>{const Y=(0,Z.$F)(B,q);this.destroyed&&q(new T.Z("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(X,q).finally(()=>{Y&&Y.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const X=this._loadController=new AbortController;F({signal:X.signal}),(0,Z.fu)(X.signal,()=>{this._promiseProps.abort()})}return D(),$}})),this.when(()=>{this._set("loadStatus",N),this._loadController=null},D=>{this._set("loadStatus","failed"),this._set("loadError",D),this._loadController=null})}get loaded(){return this.loadStatus===N}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new T.Z("load:cancelled","Cancelled")),this._loadController?.abort()),this}};return(0,E._)([(0,se.Cb)({readOnly:!0})],z.prototype,"loaded",null),(0,E._)([(0,se.Cb)({readOnly:!0})],z.prototype,"loadError",void 0),(0,E._)([(0,se.Cb)({clonable:!1})],z.prototype,"loadStatus",void 0),(0,E._)([(0,se.Cb)({type:[x.Z],readOnly:!0})],z.prototype,"loadWarnings",null),z=(0,E._)([(0,V.j)("esri.core.Loadable")],z),z};let Q=class extends(J(w.D)){};var k;Q=(0,E._)([(0,V.j)("esri.core.Loadable")],Q),(k=Q||(Q={})).LoadableMixin=J,k.isLoadable=function z(C){return!(!C||!C.load)};const G=Q},28191:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>se});var E=g(68327),w=(g(67087),g(53661)),Z=g(3758);const x={info:0,warn:1,error:2,none:3};class se{constructor(W){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=W.level&&(this.level=W.level),null!=W.writer&&(this.writer=W.writer),this._module=W.module,se._loggers[this.module]=this;const A=this.module.lastIndexOf(".");-1!==A&&(this._parent=se.getLogger(this.module.slice(0,A)))}get module(){return this._module}get parent(){return this._parent}error(...W){this._log("error","always",...W)}warn(...W){this._log("warn","always",...W)}info(...W){this._log("info","always",...W)}errorOnce(...W){this._log("error","once",...W)}warnOnce(...W){this._log("warn","once",...W)}infoOnce(...W){this._log("info","once",...W)}errorOncePerTick(...W){this._log("error","oncePerTick",...W)}warnOncePerTick(...W){this._log("warn","oncePerTick",...W)}infoOncePerTick(...W){this._log("info","oncePerTick",...W)}get test(){const W=this;return{loggedMessages:W._loggedMessages,clearLoggedWarnings:()=>W._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(W={}){const A=se._loggers;return se._loggers=W,A},set throttlingDisabled(W){se._throttlingDisabled=W}}}static getLogger(W){let A=se._loggers[W];return A||(A=new se({module:W})),A}_log(W,A,...U){if(this._matchLevel(W)){if("always"!==A&&!se._throttlingDisabled){const N=this._argsToKey(U),J=this._loggedMessages[W].get(N);if("once"===A&&null!=J||"oncePerTick"===A&&J&&J>=se._tickCounter)return;this._loggedMessages[W].set(N,se._tickCounter),se._scheduleTickCounterIncrement()}for(const N of E.default.log.interceptors)if(N(W,this.module,...U))return;this._inheritedWriter()(W,this.module,...U)}}_parentWithMember(W,A){let U=this;for(;(0,w.pC)(U);){const N=U[W];if((0,w.pC)(N))return N;U=U.parent}return A}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(W,A,...U){console[W](`[${A}]`,...U)}_matchLevel(W){return x[this._parentWithMember("level",E.default.log.level?E.default.log.level:"warn")]<=x[W]}_argsToKey(...W){return(0,Z.hP)(JSON.stringify(W,(U,N)=>"object"!=typeof N||Array.isArray(N)?N:"[Object]"))}static _scheduleTickCounterIncrement(){se._tickCounterScheduled||(se._tickCounterScheduled=!0,Promise.resolve().then(()=>{se._tickCounter++,se._tickCounterScheduled=!1}))}}se._loggers={},se._tickCounter=0,se._tickCounterScheduled=!1,se._throttlingDisabled=!1},95409:(He,Pe,g)=>{"use strict";g.d(Pe,{F:()=>z,M:()=>E});const E={Base64:0,Hex:1,String:2,Raw:3},T=8,w=(1<<T)-1;function Z(C,D){const F=(65535&C)+(65535&D);return(C>>16)+(D>>16)+(F>>16)<<16|65535&F}function U(C,D,F,B,$,X){return Z(function A(C,D){return C<<D|C>>>32-D}(Z(Z(D,C),Z(B,X)),$),F)}function N(C,D,F,B,$,X,q){return U(D&F|~D&B,C,D,$,X,q)}function J(C,D,F,B,$,X,q){return U(D&B|F&~B,C,D,$,X,q)}function Q(C,D,F,B,$,X,q){return U(D^F^B,C,D,$,X,q)}function G(C,D,F,B,$,X,q){return U(F^(D|~B),C,D,$,X,q)}function z(C,D=E.Hex){const F=D||E.Base64,B=function k(C,D){C[D>>5]|=128<<D%32,C[14+(D+64>>>9<<4)]=D;let F=1732584193,B=-271733879,$=-1732584194,X=271733878;for(let q=0;q<C.length;q+=16){const Y=F,ae=B,he=$,ne=X;F=N(F,B,$,X,C[q+0],7,-680876936),X=N(X,F,B,$,C[q+1],12,-389564586),$=N($,X,F,B,C[q+2],17,606105819),B=N(B,$,X,F,C[q+3],22,-1044525330),F=N(F,B,$,X,C[q+4],7,-176418897),X=N(X,F,B,$,C[q+5],12,1200080426),$=N($,X,F,B,C[q+6],17,-1473231341),B=N(B,$,X,F,C[q+7],22,-45705983),F=N(F,B,$,X,C[q+8],7,1770035416),X=N(X,F,B,$,C[q+9],12,-1958414417),$=N($,X,F,B,C[q+10],17,-42063),B=N(B,$,X,F,C[q+11],22,-1990404162),F=N(F,B,$,X,C[q+12],7,1804603682),X=N(X,F,B,$,C[q+13],12,-40341101),$=N($,X,F,B,C[q+14],17,-1502002290),B=N(B,$,X,F,C[q+15],22,1236535329),F=J(F,B,$,X,C[q+1],5,-165796510),X=J(X,F,B,$,C[q+6],9,-1069501632),$=J($,X,F,B,C[q+11],14,643717713),B=J(B,$,X,F,C[q+0],20,-373897302),F=J(F,B,$,X,C[q+5],5,-701558691),X=J(X,F,B,$,C[q+10],9,38016083),$=J($,X,F,B,C[q+15],14,-660478335),B=J(B,$,X,F,C[q+4],20,-405537848),F=J(F,B,$,X,C[q+9],5,568446438),X=J(X,F,B,$,C[q+14],9,-1019803690),$=J($,X,F,B,C[q+3],14,-187363961),B=J(B,$,X,F,C[q+8],20,1163531501),F=J(F,B,$,X,C[q+13],5,-1444681467),X=J(X,F,B,$,C[q+2],9,-51403784),$=J($,X,F,B,C[q+7],14,1735328473),B=J(B,$,X,F,C[q+12],20,-1926607734),F=Q(F,B,$,X,C[q+5],4,-378558),X=Q(X,F,B,$,C[q+8],11,-2022574463),$=Q($,X,F,B,C[q+11],16,1839030562),B=Q(B,$,X,F,C[q+14],23,-35309556),F=Q(F,B,$,X,C[q+1],4,-1530992060),X=Q(X,F,B,$,C[q+4],11,1272893353),$=Q($,X,F,B,C[q+7],16,-155497632),B=Q(B,$,X,F,C[q+10],23,-1094730640),F=Q(F,B,$,X,C[q+13],4,681279174),X=Q(X,F,B,$,C[q+0],11,-358537222),$=Q($,X,F,B,C[q+3],16,-722521979),B=Q(B,$,X,F,C[q+6],23,76029189),F=Q(F,B,$,X,C[q+9],4,-640364487),X=Q(X,F,B,$,C[q+12],11,-421815835),$=Q($,X,F,B,C[q+15],16,530742520),B=Q(B,$,X,F,C[q+2],23,-995338651),F=G(F,B,$,X,C[q+0],6,-198630844),X=G(X,F,B,$,C[q+7],10,1126891415),$=G($,X,F,B,C[q+14],15,-1416354905),B=G(B,$,X,F,C[q+5],21,-57434055),F=G(F,B,$,X,C[q+12],6,1700485571),X=G(X,F,B,$,C[q+3],10,-1894986606),$=G($,X,F,B,C[q+10],15,-1051523),B=G(B,$,X,F,C[q+1],21,-2054922799),F=G(F,B,$,X,C[q+8],6,1873313359),X=G(X,F,B,$,C[q+15],10,-30611744),$=G($,X,F,B,C[q+6],15,-1560198380),B=G(B,$,X,F,C[q+13],21,1309151649),F=G(F,B,$,X,C[q+4],6,-145523070),X=G(X,F,B,$,C[q+11],10,-1120210379),$=G($,X,F,B,C[q+2],15,718787259),B=G(B,$,X,F,C[q+9],21,-343485551),F=Z(F,Y),B=Z(B,ae),$=Z($,he),X=Z(X,ne)}return[F,B,$,X]}(function x(C){const D=[];for(let F=0,B=C.length*T;F<B;F+=T)D[F>>5]|=(C.charCodeAt(F/T)&w)<<F%32;return D}(C),C.length*T);switch(F){case E.Raw:return B;case E.Hex:return function V(C){const D="0123456789abcdef",F=[];for(let B=0,$=4*C.length;B<$;B++)F.push(D.charAt(C[B>>2]>>B%4*8+4&15)+D.charAt(C[B>>2]>>B%4*8&15));return F.join("")}(B);case E.String:return function se(C){const D=[];for(let F=0,B=32*C.length;F<B;F+=T)D.push(String.fromCharCode(C[F>>5]>>>F%32&w));return D.join("")}(B);case E.Base64:return function W(C){const B=[];for(let $=0,X=4*C.length;$<X;$+=3){const q=(C[$>>2]>>$%4*8&255)<<16|(C[$+1>>2]>>($+1)%4*8&255)<<8|C[$+2>>2]>>($+2)%4*8&255;for(let Y=0;Y<4;Y++)B.push(8*$+6*Y>32*C.length?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(q>>6*(3-Y)&63))}return B.join("")}(B)}}},20359:(He,Pe,g)=>{"use strict";function E(x,se){for(const[V,W]of x)if(se(W,V))return!0;return!1}function w(x,se,V){const W=x.get(se);if(void 0!==W)return W;const A=V();return x.set(se,A),A}g.d(Pe,{oE:()=>E,s1:()=>w})},9029:(He,Pe,g)=>{"use strict";g.d(Pe,{WJ:()=>se,Xq:()=>x});var Z,V,E=g(53661),T=g(22286);(V=Z||(Z={}))[V.ALL=0]="ALL",V[V.SOME=1]="SOME";class x{constructor(W,A,U){this._namespace=W,this._storage=A,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",U&&(this._storage.registerRemoveFunc(this._namespace,U),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(W,A,U,N=0){this._storage.put(this._namespace+W,A,U,N)}get(W){const A=this._storage.get(this._namespace+W);return void 0===A?++this._miss:++this._hit,A}pop(W){const A=this._storage.pop(this._namespace+W);return void 0===A?++this._miss:++this._hit,A}updateSize(W,A,U){this._storage.updateSize(this._namespace+W,A,U)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class se{constructor(W=10485760){this._maxSize=W,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new T.Z,this._users=new T.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(W){this._users.push(W)}deregister(W){this._users.removeUnordered(W)}registerRemoveFunc(W,A){this._removeFuncs.push([W,A])}deregisterRemoveFunc(W){this._removeFuncs.filterInPlace(A=>A[0]!==W)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(W){this._maxSize=Math.max(W,0),this._checkSizeLimit()}put(W,A,U,N){const J=this._db.get(W);if(J&&(this._size-=J.size,this._db.delete(W),J.entry!==A&&this._notifyRemove(W,J.entry,Z.ALL)),U>this._maxSize)return void this._notifyRemove(W,A,Z.ALL);if(void 0===A)return void console.warn("Refusing to cache undefined entry ");if(!U||U<0)return void console.warn("Refusing to cache entry with invalid size "+U);const Q=1+Math.max(N,-3)- -3;this._db.set(W,{entry:A,size:U,lifetime:Q,lives:Q}),this._size+=U,this._checkSizeLimit()}updateSize(W,A,U){const N=this._db.get(W);if(N&&N.entry===A){for(this._size-=N.size;U>this._maxSize;){const J=this._notifyRemove(W,A,Z.SOME);if(!((0,E.pC)(J)&&J>0))return void this._db.delete(W);U=J}N.size=U,this._size+=U,this._checkSizeLimit()}}pop(W){const A=this._db.get(W);if(A)return this._size-=A.size,this._db.delete(W),++this._hit,A.entry;++this._miss}get(W){const A=this._db.get(W);if(void 0!==A)return this._db.delete(W),A.lives=A.lifetime,this._db.set(W,A),++this._hit,A.entry;++this._miss}getStats(){const W={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},A={},U=new Array;this._db.forEach((Q,G)=>{const k=Q.lifetime;U[k]=(U[k]||0)+Q.size,this._users.forAll(z=>{const C=z.namespace;G.startsWith(C)&&(A[C]=(A[C]||0)+Q.size)})});const N={};this._users.forAll(Q=>{const G=Q.namespace;!isNaN(Q.hitRate)&&Q.hitRate>0?(A[G]=A[G]||0,N[G]=Math.round(100*Q.hitRate)+"%"):N[G]="0%"});const J=Object.keys(A);J.sort((Q,G)=>A[G]-A[Q]),J.forEach(Q=>W[Q]=Math.round(A[Q]/2**20)+"MB / "+N[Q]);for(let Q=U.length-1;Q>=0;--Q){const G=U[Q];G&&(W["Priority "+(Q+-3-1)]=Math.round(G/this.size*100)+"%")}return W}resetStats(){this._hit=this._miss=0,this._users.forAll(W=>W.resetHitRate())}clear(W){this._db.forEach((A,U)=>{U.startsWith(W)&&(this._size-=A.size,this._db.delete(U),this._notifyRemove(U,A.entry,Z.ALL))})}clearAll(){this._db.forEach((W,A)=>this._notifyRemove(A,W.entry,Z.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(W,A,U){let N;return this._removeFuncs.some(J=>{if(W.startsWith(J[0])){const Q=J[1](A,U);return"number"==typeof Q&&(N=Q),!0}return!1}),N}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[W,A]of this._db){if(this._db.delete(W),A.lives<=1){this._size-=A.size;const U=this._notifyRemove(W,A.entry,Z.SOME);(0,E.pC)(U)&&U>0&&(this._size+=U,A.lives=A.lifetime,A.size=U,this._db.set(W,A))}else--A.lives,this._db.set(W,A);if(this._size<=.9*this.maxSize)return}}}},1063:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>w});var E=g(44054);class w{constructor(x,se,V){this.name=x,this.details=V,this instanceof w&&(this.message=(se&&function T(Z,x){return Z.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(se,V)=>{if(""===V)return"$";const A=(0,E.hS)(V,x)??"";if(void 0===A)throw new Error(`could not find key "${V}" in template`);return A.toString()})}(se,V))??"")}toString(){return"["+this.name+"]: "+this.message}}},90642:(He,Pe,g)=>{"use strict";g.d(Pe,{R:()=>C,w:()=>D});var E=g(18100),T=g(6365),w=g(53661),Z=g(94625),x=g(88684),se=g(61434);class V{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(se.kk),this._values=new Map,this.multipleOriginsSupported=!0}clone(B){const $=new V,X=this._originStores[se.s3.DEFAULTS];X&&X.forEach((q,Y)=>{$.set(Y,(0,x.d9)(q),se.s3.DEFAULTS)});for(let q=se.s3.SERVICE;q<se.kk;q++){const Y=this._originStores[q];Y&&Y.forEach((ae,he)=>{B&&B.has(he)||$.set(he,(0,x.d9)(ae),q)})}return $}get(B,$){const X=void 0===$?this._values:this._originStores[$];return X?X.get(B):void 0}keys(B){const $=null==B?this._values:this._originStores[B];return $?[...$.keys()]:[]}set(B,$,X=se.s3.USER){let q=this._originStores[X];if(q||(q=new Map,this._originStores[X]=q),q.set(B,$),!this._values.has(B)||(0,w.j0)(this._propertyOriginMap.get(B))<=X){const Y=this._values.get(B);return this._values.set(B,$),this._propertyOriginMap.set(B,X),Y!==$}return!1}delete(B,$=se.s3.USER){const X=this._originStores[$];if(!X)return;const q=X.get(B);if(X.delete(B),this._values.has(B)&&this._propertyOriginMap.get(B)===$){this._values.delete(B);for(let Y=$-1;Y>=0;Y--){const ae=this._originStores[Y];if(ae&&ae.has(B)){this._values.set(B,ae.get(B)),this._propertyOriginMap.set(B,Y);break}}}return q}has(B,$){const X=void 0===$?this._values:this._originStores[$];return!!X&&X.has(B)}revert(B,$){for(;$>0&&!this.has(B,$);)--$;const X=this._originStores[$],q=X&&X.get(B),Y=this._values.get(B);return this._values.set(B,q),this._propertyOriginMap.set(B,$),Y!==q}originOf(B){return this._propertyOriginMap.get(B)||se.s3.DEFAULTS}forEach(B){this._values.forEach(B)}}var W=g(44564),A=g(38904),U=g(20891);const N=F=>{let B=class extends F{constructor(...$){super(...$);const X=(0,w.j0)((0,A.vw)(this)),q=X.store,Y=new V;X.store=Y,(0,Z.M)(X,q,Y)}read($,X){(0,W.i)(this,$,X)}getAtOrigin($,X){const q=J(this),Y=(0,se.M9)(X);if("string"==typeof $)return q.get($,Y);const ae={};return $.forEach(he=>{ae[he]=q.get(he,Y)}),ae}originOf($){return(0,se.x3)(this.originIdOf($))}originIdOf($){return J(this).originOf($)}revert($,X){const q=J(this),Y=(0,se.M9)(X),ae=(0,A.vw)(this);let he;he="string"==typeof $?"*"===$?q.keys(Y):[$]:$,he.forEach(ne=>{ae.invalidate(ne),q.revert(ne,Y),ae.commit(ne)})}};return B=(0,E._)([(0,U.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],B),B};function J(F){return(0,A.vw)(F).store}let Q=class extends(N(T.Z)){};Q=(0,E._)([(0,U.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],Q);var G=g(64939);const k=F=>{let B=class extends F{constructor(...$){super(...$)}clear($,X="user"){return z(this).delete($,(0,se.M9)(X))}write($={},X){return(0,G.c)(this,$=$||{},X),$}setAtOrigin($,X,q){(0,A.vw)(this).setAtOrigin($,X,(0,se.M9)(q))}removeOrigin($){const X=z(this),q=(0,se.M9)($),Y=X.keys(q);for(const ae of Y)X.originOf(ae)===q&&X.set(ae,X.get(ae,q),se.s3.USER)}updateOrigin($,X){const q=z(this),Y=(0,se.M9)(X),ae=this.get($);for(let he=Y+1;he<se.kk;++he)q.delete($,he);q.set($,ae,Y)}toJSON($){return this.write({},$)}};return B=(0,E._)([(0,U.j)("esri.core.WriteableMultiOriginJSONSupport")],B),B.prototype.toJSON.isDefaultToJSON=!0,B};function z(F){return(0,A.vw)(F).store}const C=F=>{let B=class extends(k(N(F))){constructor(...$){super(...$)}};return B=(0,E._)([(0,U.j)("esri.core.MultiOriginJSONSupport")],B),B};let D=class extends(C(T.Z)){};D=(0,E._)([(0,U.j)("esri.core.MultiOriginJSONSupport")],D)},5261:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>w});let w=(()=>{class Z{constructor(se,V,W,A=1,U=0){if(this._ctor=se,this._acquireFunction=V,this._releaseFunction=W,this.allocationSize=A,this._pool=new Array(U),this._initialSize=U,this._ctor)for(let N=0;N<U;N++)this._pool[N]=new this._ctor;this.allocationSize=Math.max(A,1)}destroy(){this.prune(0)}acquire(...se){let V;if(Z.test.disabled)V=new this._ctor;else{if(0===this._pool.length){const W=this.allocationSize;for(let A=0;A<W;A++)this._pool[A]=new this._ctor}V=this._pool.pop()}return this._acquireFunction?this._acquireFunction(V,...se):function T(Z){return Z&&Z.acquire&&"function"==typeof Z.acquire}(V)&&V.acquire(...se),V}release(se){se&&!Z.test.disabled&&(this._releaseFunction?this._releaseFunction(se):function E(Z){return Z&&Z.release&&"function"==typeof Z.release}(se)&&se.release(),this._pool.push(se))}prune(se=this._initialSize){if(!(se>=this._pool.length)){for(let V=se;V<this._pool.length;++V)this._dispose(this._pool[V]);this._pool.length=se}}_dispose(se){se.dispose&&"function"==typeof se.dispose&&se.dispose()}}return Z.test={disabled:!1},Z})()},43701:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>T});var E=g(53661);class T{constructor(Z,x=30){this.name=Z,this._counter=0,this._samples=new Array(x)}record(Z){(0,E.pC)(Z)&&(this._samples[++this._counter%this._samples.length]=Z)}get median(){return this._samples.slice().sort((Z,x)=>Z-x)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((Z,x)=>Z+x,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}}},22286:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>se});var T,E=g(19420);!function(W){const A=(Q,G,k,z)=>{let C=G,D=G;const F=k>>>1,B=Q[C-1];for(;D<=F;){D=C<<1,D<k&&z(Q[D-1],Q[D])<0&&++D;const $=Q[D-1];if(z($,B)<=0)break;Q[C-1]=$,C=D}Q[C-1]=B},U=(Q,G)=>Q<G?-1:Q>G?1:0;W.sort=function N(Q,G,k,z){void 0===G&&(G=0),void 0===k&&(k=Q.length),void 0===z&&(z=U);for(let D=k>>>1;D>G;D--)A(Q,D,k,z);const C=G+1;for(let D=k-1;D>G;D--){const F=Q[G];Q[G]=Q[D],Q[D]=F,A(Q,C,D,z)}},W.iterableSort=function*J(Q,G,k,z){void 0===G&&(G=0),void 0===k&&(k=Q.length),void 0===z&&(z=U);for(let D=k>>>1;D>G;D--)A(Q,D,k,z),yield;const C=G+1;for(let D=k-1;D>G;D--){const F=Q[G];Q[G]=Q[D],Q[D]=F,A(Q,C,D,z),yield}}}(T||(T={}));const w=T;class se{constructor(A){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new E.SO,A&&(A.initialSize&&(this.data=new Array(A.initialSize)),A.allocator&&(this._allocator=A.allocator),void 0!==A.deallocator&&(this._deallocator=A.deallocator),A.shrink&&(this._shrink=()=>V(this)))}toArray(){return this.data.slice(0,this.length)}filter(A){const U=new Array;for(let N=0;N<this._length;N++){const J=this.data[N];A(J)&&U.push(J)}return U}getItemAt(A){if(!(A<0||A>=this._length))return this.data[A]}includes(A,U){const N=this.data.indexOf(A,U);return-1!==N&&N<this.length}get length(){return this._length}set length(A){if(A>this._length){if(this._allocator){for(;this._length<A;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=A}else{if(this._deallocator)for(let U=A;U<this._length;++U)this.data[U]=this._deallocator(this.data[U]);this._length=A,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(A){this.data[this._length++]=A}pushArray(A,U=A.length){for(let N=0;N<U;N++)this.data[this._length++]=A[N]}fill(A,U){for(let N=0;N<U;N++)this.data[this._length++]=A}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const A=this.data[this._length];return++this._length,A}unshift(A){this.data.unshift(A),this._length++,V(this)}pop(){if(0===this.length)return;const A=this.data[this.length-1];return this.length=this.length-1,this._shrink(),A}remove(A){const U=(0,E.cq)(this.data,A,this.length,this._hint);if(-1!==U)return this.data.splice(U,1),this.length=this.length-1,A}removeUnordered(A){return this.removeUnorderedIndex((0,E.cq)(this.data,A,this.length,this._hint))}removeUnorderedIndex(A){if(!(A>=this.length||A<0))return this.swapElements(A,this.length-1),this.pop()}removeUnorderedMany(A,U=A.length,N){this.length=(0,E.FY)(this.data,A,this.length,U,this._hint,N),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(A,U){if(A>=this.length||U>=this.length||A===U)return;const N=this.data[A];this.data[A]=this.data[U],this.data[U]=N}sort(A){w.sort(this.data,0,this.length,A)}iterableSort(A){return w.iterableSort(this.data,0,this.length,A)}some(A,U){for(let N=0;N<this.length;++N)if(A.call(U,this.data[N],N,this.data))return!0;return!1}find(A,U){for(let N=0;N<this.length;++N){const J=this.data[N];if(A.call(U,J,N))return J}}filterInPlace(A,U){let N=0;for(let J=0;J<this._length;++J){const Q=this.data[J];A.call(U,Q,J,this.data)&&(this.data[J]=this.data[N],this.data[N]=Q,N++)}if(this._deallocator)for(let J=N;J<this._length;J++)this.data[J]=this._deallocator(this.data[J]);return this._length=N,this._shrink(),this}forAll(A,U){const N=this.length,J=this.data;for(let Q=0;Q<N;++Q)A.call(U,J[Q],Q,J)}forEach(A,U){for(let N=0;N<this.length;++N)A.call(U,this.data[N],N,this.data)}map(A,U){const N=new Array(this.length);for(let J=0;J<this.length;++J)N[J]=A.call(U,this.data[J],J,this.data);return N}reduce(A,U){let N=U;for(let J=0;J<this.length;++J)N=A(N,this.data[J],J,this.data);return N}has(A){const U=this.length,N=this.data;for(let J=0;J<U;++J)if(N[J]===A)return!0;return!1}}function V(W){W.data.length>1.5*W.length&&(W.data.length=Math.floor(1.1*W.length))}},99508:(He,Pe,g)=>{"use strict";g.d(Pe,{D:()=>A,v:()=>W});var se,U,E=g(18100),T=g(6365),w=g(53661),Z=g(30801),x=g(20891);(U=se||(se={}))[U.PENDING=0]="PENDING",U[U.RESOLVED=1]="RESOLVED",U[U.REJECTED=2]="REJECTED";class V{constructor(N){this.instance=N,this._resolver=(0,Z.dD)(),this._status=se.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=se.RESOLVED,this._cleanUp()},()=>{this._status=se.REJECTED,this._cleanUp()})}addResolvingPromise(N){this._resolvingPromises.push(N),this._tryResolve()}isResolved(){return this._status===se.RESOLVED}isRejected(){return this._status===se.REJECTED}isFulfilled(){return this._status!==se.PENDING}abort(){this._resolver.reject((0,Z.zE)())}when(N,J){return this._resolver.promise.then(N,J)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const N=(0,Z.dD)(),J=[...this._resolvingPromises,(0,w.j0)(N.promise)],Q=this._allPromise=Promise.all(J);Q.then(()=>{this.isFulfilled()||this._allPromise!==Q||this._resolver.resolve(this.instance)},G=>{this.isFulfilled()||this._allPromise!==Q||(0,Z.D_)(G)||this._resolver.reject(G)}),N.resolve()}}const W=U=>{let N=class extends U{constructor(...J){super(...J),this._promiseProps=new V(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(J,Q){return new Promise((G,k)=>{this._promiseProps.when(G,k)}).then(J,Q)}catch(J){return this.when(null,J)}addResolvingPromise(J){J&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in J?J.when():J)}};return N=(0,E._)([(0,x.j)("esri.core.Promise")],N),N};let A=class extends(W(T.Z)){};A=(0,E._)([(0,x.j)("esri.core.Promise")],A)},20834:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>T});var E=g(53661);class T{constructor(Z=(x=>x.values().next().value)){this._peeker=Z,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(0===this._items.size)return;let Z;for(Z of this._items);return Z}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(Z){this.contains(Z)||this._items.add(Z)}contains(Z){return this._items.has(Z)}pop(){if(0===this.length)return;const Z=this.peek();return this._items.delete((0,E.j0)(Z)),Z}popLast(){if(0===this.length)return;const Z=this.last();return this._items.delete((0,E.j0)(Z)),Z}remove(Z){this._items.delete(Z)}filter(Z){return this._items.forEach(x=>{Z(x)||this._items.delete(x)}),this}}},37313:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>E});class E{constructor(w=1){this._seed=w}set seed(w){this._seed=w??Math.random()*E._m}getInt(){return this._seed=(E._a*this._seed+E._c)%E._m,this._seed}getFloat(){return this.getInt()/(E._m-1)}getIntRange(w,Z){return Math.round(this.getFloatRange(w,Z))}getFloatRange(w,Z){const x=Z-w;return w+this.getInt()/E._m*x}}E._m=2147483647,E._a=48271,E._c=0},16734:(He,Pe,g)=>{"use strict";g.d(Pe,{e:()=>w});var E=g(53661),T=g(5261);class w extends T.Z{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=(0,E.wN)(this._set)}acquire(...x){const se=super.acquire(...x);return this._set.delete(se),se}release(x){x&&!this._set.has(x)&&(super.release(x),this._set.add(x))}_dispose(x){this._set.delete(x),super._dispose(x)}}},23476:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>T});var E=g(1063);class T extends E.Z{constructor(Z,x,se){if(super(Z,x,se),!(this instanceof T))return new T(Z,x,se)}}T.prototype.type="warning"},1006:(He,Pe,g)=>{"use strict";g.d(Pe,{s:()=>w});var E=g(19420);class T{constructor(se,V){this._observers=se,this._observer=V}remove(){(0,E.Od)(this._observers,this._observer)}}class w{constructor(){this._observers=null,this.destroyed=!1}observe(se){if(this.destroyed||se.destroyed)return Z;null==this._observers&&(this._observers=[]);const V=this._observers;let W=!1,A=!1;const U=V.length;for(let N=0;N<U;++N){const J=V[N];if(J.destroyed)A=!0;else if(J===se){W=!0;break}}return W||(V.push(se),A&&this._removeDestroyedObservers()),new T(V,se)}_removeDestroyedObservers(){const se=this._observers;if(!se||0===se.length)return;const V=se.length;let W=0;for(let A=0;A<V;++A){for(;A+W<V&&se[A+W].destroyed;)++W;if(W>0){if(!(A+W<V))break;se[A]=se[A+W]}}se.length=V-W}destroy(){if(this.destroyed)return;this.destroyed=!0;const se=this._observers;if(null!=se){for(const V of se)V.onCommitted();this._observers=null}}}const Z={remove:()=>{}}},61434:(He,Pe,g)=>{"use strict";g.d(Pe,{M9:()=>Z,Wm:()=>V,kk:()=>w,s3:()=>T,x3:()=>x});var T,U,E=g(53661);(U=T||(T={}))[U.DEFAULTS=0]="DEFAULTS",U[U.COMPUTED=1]="COMPUTED",U[U.SERVICE=2]="SERVICE",U[U.PORTAL_ITEM=3]="PORTAL_ITEM",U[U.WEB_SCENE=4]="WEB_SCENE",U[U.WEB_MAP=5]="WEB_MAP",U[U.USER=6]="USER";const w=T.USER+1;function Z(U){switch(U){case"defaults":return T.DEFAULTS;case"service":return T.SERVICE;case"portal-item":return T.PORTAL_ITEM;case"web-scene":return T.WEB_SCENE;case"web-map":return T.WEB_MAP;case"user":return T.USER;default:return null}}function x(U){switch(U){case T.DEFAULTS:return"defaults";case T.SERVICE:return"service";case T.PORTAL_ITEM:return"portal-item";case T.WEB_SCENE:return"web-scene";case T.WEB_MAP:return"web-map";case T.USER:return"user"}return(0,E.j0)(void 0)}function V(U){return x(U)}},43173:(He,Pe,g)=>{"use strict";g.d(Pe,{F:()=>E});const E=Symbol("Accessor-beforeDestroy")},36734:(He,Pe,g)=>{"use strict";g.d(Pe,{p:()=>V});var E=g(83382),T=g(69778);const w=Object.prototype.toString;function Z(W){const A="__accessorMetadata__"in W?(0,E.se)(W):W;return function(...U){if(U.push(A),"number"==typeof U[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return x.apply(this,U)}}function x(W,A,U,N){(0,T.Oe)(W,A).cast=N}function V(...W){if(3!==W.length||"string"!=typeof W[1])return 1===W.length&&"[object Function]"===w.call(W[0])?Z(W[0]):1===W.length&&"string"==typeof W[0]?function se(W){return(A,U)=>{(0,T.Oe)(A,W).cast=A[U]}}(W[0]):void 0}},4139:(He,Pe,g)=>{"use strict";g.d(Pe,{J:()=>w});var E=g(63321),T=g(9497);function w(Z,x={}){const se=Z instanceof E.X?Z:new E.X(Z,x),V={type:x?.ignoreUnknown??1?se.apiValues:String,json:{type:se.jsonValues,read:!x?.readOnly&&{reader:se.read},write:{writer:se.write}}};return void 0!==x?.readOnly&&(V.readOnly=!!x.readOnly),void 0!==x?.default&&(V.json.default=x.default),void 0!==x?.name&&(V.json.name=x.name),void 0!==x?.nonNullable&&(V.nonNullable=x.nonNullable),(0,T.Cb)(V)}},9497:(He,Pe,g)=>{"use strict";g.d(Pe,{CJ:()=>V,Cb:()=>se,Eg:()=>A});var E=g(28191),T=g(83382),w=g(58236),Z=g(69778),x=g(6784);function se(U={}){return(N,J)=>{if(N===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${N.name}.${J}. Accessor does not support static properties.`);const Q=Object.getOwnPropertyDescriptor(N,J),G=(0,Z.Oe)(N,J);Q&&(Q.get||Q.set?(G.get=Q.get||G.get,G.set=Q.set||G.set):"value"in Q&&("value"in U&&E.Z.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${J}" on "${N.constructor.name}" already defined in the metadata`,U),G.value=U.value=Q.value)),null!=U.readOnly&&(G.readOnly=U.readOnly);const k=U.aliasOf;if(k){const D="string"==typeof k?k:k.source,F="string"==typeof k?null:!0===k.overridable;let B;G.dependsOn=[D],G.get=function(){let $=(0,w.U2)(this,D);if("function"==typeof $){B||(B=D.split(".").slice(0,-1).join("."));const X=(0,w.U2)(this,B);X&&($=$.bind(X))}return $},G.readOnly||(G.set=F?function($){this._override(J,$)}:function($){(0,x.t)(this,D,$)})}const z=U.type,C=U.types;G.cast||(z?G.cast=function W(U){let N=0,J=U;if((0,T.AY)(U))return(0,T.sY)(U);for(;Array.isArray(J)&&1===J.length&&"string"!=typeof J[0]&&"number"!=typeof J[0];)J=J[0],N++;const Q=J;if((0,T.gB)(Q))return 0===N?(0,T.i$)(Q):(0,T.Iu)((0,T.i$)(Q),N);if(1===N)return(0,T.rY)(Q);if(N>1)return(0,T.di)(Q,N);return U.from?U.from:(0,T.se)(U)}(z):C&&(G.cast=Array.isArray(C)?(0,T.Ls)((0,T.N7)(C[0])):(0,T.N7)(C))),(0,Z.tz)(G,U),U.range&&(G.cast=A(G.cast,U.range))}}function V(U,N,J){const Q=(0,Z.Oe)(U,J);Q.json||(Q.json={});let G=Q.json;return void 0!==N&&(G.origins||(G.origins={}),G.origins[N]||(G.origins[N]={}),G=G.origins[N]),G}function A(U,N){return J=>{let Q=+U(J);return null!=N.step&&(Q=Math.round(Q/N.step)*N.step),null!=N.min&&(Q=Math.max(N.min,Q)),null!=N.max&&(Q=Math.min(N.max,Q)),Q}}},66508:(He,Pe,g)=>{"use strict";g.d(Pe,{r:()=>T});var E=g(9497);function T(w,Z,x){let se,V;return void 0===Z||Array.isArray(Z)?(V=w,x=Z,se=[void 0]):(V=Z,se=Array.isArray(w)?w:[w]),(W,A)=>{const U=W.constructor.prototype;se.forEach(N=>{const J=(0,E.CJ)(W,N,V);J.read&&"object"==typeof J.read||(J.read={}),J.read.reader=U[A],x&&(J.read.source=(J.read.source||[]).concat(x))})}}},10729:(He,Pe,g)=>{"use strict";function E(T){return(w,Z)=>{w[Z]=T}}g.d(Pe,{c:()=>E})},20891:(He,Pe,g)=>{"use strict";g.d(Pe,{j:()=>A}),g(67087);var T=g(43173),w=g(57530),Z=g(69778),x=g(64137),se=g(10625);const V=new Set,W=new Set;function A(J){return Q=>{Q.prototype.declaredClass=J,function N(J){const G=(0,Z.fp)(J.prototype),k={};for(const z of Object.getOwnPropertyNames(G)){const C=G[z];(0,se.OM)(C),k[z]={enumerable:!0,configurable:!0,get:U(z,C),set(D){const F=this.__accessor__;if(void 0!==F){if(!Object.isFrozen(this)){if(F.initialized&&C.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${z}' of ${this.declaredClass}`);if(F.lifecycle===w.F.CONSTRUCTED&&C.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${z}' of ${this.declaredClass}`);F.set(z,D)}}else Object.defineProperty(this,z,{enumerable:!0,configurable:!0,writable:!0,value:D})}}}Object.defineProperties(J.prototype,k)}(Q);const G=[],k=[];let z=Q.prototype;for(;z;)z.hasOwnProperty("initialize")&&!V.has(z.initialize)&&(V.add(z.initialize),G.push(z.initialize)),z.hasOwnProperty("destroy")&&!W.has(z.destroy)&&(W.add(z.destroy),k.push(z.destroy)),z=Object.getPrototypeOf(z);V.clear(),W.clear();class C extends Q{constructor(...F){if(super(...F),this.constructor===C&&"function"==typeof this.postscript){if(G.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let B=G.length-1;B>=0;B--)G[B].call(this)}}),k.length){let B=!1;const $=this[T.F];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!B){B=!0,$.call(this);for(let X=0;X<k.length;X++)k[X].call(this)}}})}this.postscript(...F)}}}return C.__accessorMetadata__=(0,Z.fp)(Q.prototype),C.prototype.declaredClass=J,C}}function U(J,Q){return null==Q.get?function(){const G=this.__accessor__.properties.get(J);if(void 0===G)return;(0,x.it)(G.observerObject);const k=this.__accessor__.store;return k.has(J)?k.get(J):G.metadata.value}:function(){const G=this.__accessor__.properties.get(J);if(void 0!==G)return G.getComputed()}}},70425:(He,Pe,g)=>{"use strict";g.d(Pe,{c:()=>T});var E=g(9497);function T(w,Z,x){let se,V;return void 0===Z?(V=w,se=[void 0]):"string"!=typeof Z?(V=w,se=[void 0],x=Z):(V=Z,se=Array.isArray(w)?w:[w]),(W,A)=>{const U=W.constructor.prototype;for(const N of se){const J=(0,E.CJ)(W,N,V);J.write&&"object"==typeof J.write||(J.write={}),x&&(J.write.target=x),J.write.writer=U[A]}}}},94625:(He,Pe,g)=>{"use strict";g.d(Pe,{M:()=>T});var E=g(61434);function T(w,Z,x){Z.keys().forEach(V=>{x.set(V,Z.get(V),E.s3.DEFAULTS)}),Object.keys(w.metadatas).forEach(V=>{w.internalGet(V)&&x.set(V,w.internalGet(V),E.s3.DEFAULTS)})}},51118:(He,Pe,g)=>{"use strict";g.d(Pe,{Hg:()=>G,V7:()=>Q,uD:()=>J});var E=g(6365),T=g(97621),w=g(53661),Z=g(38904);const x=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function se(z){return z instanceof E.Z}function V(z){return z instanceof T.Z?Object.keys(z.items):se(z)?(0,Z.vw)(z).keys():z?Object.keys(z):[]}function W(z,C){return z instanceof T.Z?z.items[C]:z[C]}function U(z){return z?z.declaredClass:null}function N(z,C){const D=z.diff;if(D&&"function"==typeof D)return D(z,C);const F=V(z),B=V(C);if(0===F.length&&0===B.length)return;if(!F.length||!B.length||function A(z,C){return!(!Array.isArray(z)||!Array.isArray(C))&&z.length!==C.length}(z,C))return{type:"complete",oldValue:z,newValue:C};const $=B.filter(ne=>!F.includes(ne)),X=F.filter(ne=>!B.includes(ne)),q=F.filter(ne=>B.includes(ne)&&W(z,ne)!==W(C,ne)).concat($,X).sort(),Y=U(z);if(Y&&x.includes(Y)&&q.length)return{type:"complete",oldValue:z,newValue:C};let ae;const he=se(z)&&se(C);for(const ne of q){const ue=W(z,ne),te=W(C,ne);let ie;if((he||"function"!=typeof ue&&"function"!=typeof te)&&ue!==te&&(null!=ue||null!=te)){if(D&&D[ne]&&"function"==typeof D[ne])ie=D[ne](ue,te);else if(ue instanceof Date&&te instanceof Date){if(ue.getTime()===te.getTime())continue;ie={type:"complete",oldValue:ue,newValue:te}}else ie="object"==typeof ue&&"object"==typeof te&&U(ue)===U(te)?N(ue,te):{type:"complete",oldValue:ue,newValue:te};(0,w.pC)(ie)&&((0,w.pC)(ae)?ae.diff[ne]=ie:ae={type:"partial",diff:{[ne]:ie}})}}return ae}function J(z,C){if((0,w.Wi)(z))return!1;const D=C.split(".");let F=z;for(const B of D){if("complete"===F.type)return!0;if("partial"!==F.type)return!1;{const $=F.diff[B];if(!$)return!1;F=$}}return!0}function Q(z,C){for(const D of C)if(J(z,D))return!0;return!1}function G(z,C){if(!("function"==typeof z||"function"==typeof C||(0,w.Wi)(z)&&(0,w.Wi)(C)))return(0,w.Wi)(z)||(0,w.Wi)(C)||"object"==typeof z&&"object"==typeof C&&U(z)!==U(C)?{type:"complete",oldValue:z,newValue:C}:N(z,C)}},83382:(He,Pe,g)=>{"use strict";g.d(Pe,{AY:()=>fe,Iu:()=>Y,Ls:()=>$,N7:()=>ue,TJ:()=>z,V5:()=>ie,Zs:()=>V,di:()=>ae,gB:()=>he,i$:()=>ne,q9:()=>W,rY:()=>X,sY:()=>_e,se:()=>B,vU:()=>A,z8:()=>te}),g(67087);var T=g(28191),w=g(20359);const Z=T.Z.getLogger("esri.core.accessorSupport.ensureTypes");function x(le){return null==le?le:new Date(le)}function se(le){return null==le?le:!!le}function V(le){return null==le?le:le.toString()}function W(le){return null==le?le:(le=parseFloat(le),isNaN(le)?0:le)}function A(le){return null==le?le:Math.round(parseFloat(le))}function U(le){return le&&le.constructor&&void 0!==le.constructor.__accessorMetadata__}function N(le,ce){return null!=ce&&le&&!(ce instanceof le)}function J(le){return le&&"isCollection"in le}function Q(le){return le&&le.Type?"function"==typeof le.Type?le.Type:le.Type.base:null}function k(le,ce){return!!U(ce)&&(Z.error("Accessor#set","Assigning an instance of '"+(ce.declaredClass||"unknown")+"' which is not a subclass of '"+C(le)+"'"),!0)}function z(le,ce){return null==ce?ce:J(le)?function G(le,ce){if(!ce||!ce.constructor||!J(ce.constructor))return k(le,ce)?ce:new le(ce);const ve=Q(le.prototype.itemType),Te=Q(ce.constructor.prototype.itemType);return ve?Te?ve===Te?ce:ve.prototype.isPrototypeOf(Te.prototype)?new le(ce):(k(le,ce),ce):new le(ce):ce}(le,ce):N(le,ce)?k(le,ce)?ce:new le(ce):ce}function C(le){return le&&le.prototype&&le.prototype.declaredClass||"unknown"}const D=new WeakMap;function B(le,ce){const ve=function F(le){switch(le){case Number:return W;case te:return A;case Boolean:return se;case String:return V;case Date:return x;default:return(0,w.s1)(D,le,()=>z.bind(null,le))}}(le);return 1===arguments.length?ve:ve(ce)}function $(le,ce,ve){return 1===arguments.length?$.bind(null,le):ce&&(Array.isArray(ce)?ce.map(Te=>le(Te,ve)):[le(ce,ve)])}function X(le,ce){return 1===arguments.length?$(B.bind(null,le)):$(B.bind(null,le),ce)}function q(le,ce,ve){return 0!==ce&&Array.isArray(ve)?ve.map(Te=>q(le,ce-1,Te)):le(ve)}function Y(le,ce,ve){if(2===arguments.length)return Y.bind(null,le,ce);if(!ve)return ve;let Te=ce,ge=ve=q(le,ce,ve);for(;Te>0&&Array.isArray(ge);)Te--,ge=ge[0];if(void 0!==ge)for(let Ae=0;Ae<Te;Ae++)ve=[ve];return ve}function ae(le,ce,ve){return 2===arguments.length?Y(B.bind(null,le),ce):Y(B.bind(null,le),ce,ve)}function he(le){return!!Array.isArray(le)&&!le.some(ce=>{const ve=typeof ce;return!("string"===ve||"number"===ve||"function"===ve&&le.length>1)})}function ne(le,ce){if(2===arguments.length)return ne(le).call(null,ce);const ve=new Set,Te=le.filter(Se=>"function"!=typeof Se),ge=le.filter(Se=>"function"==typeof Se);for(const Se of le)"string"!=typeof Se&&"number"!=typeof Se||ve.add(Se);let Ae=null,De=null;return(Se,me)=>{if(null==Se)return Se;const ye=typeof Se,we="string"===ye||"number"===ye;return we&&(ve.has(Se)||ge.some($e=>"string"===ye&&$e===String||"number"===ye&&$e===Number))||"object"===ye&&ge.some($e=>!N(Se,$e))?Se:(we&&Te.length?(Ae||(Ae=Te.map($e=>"string"==typeof $e?`'${$e}'`:`${$e}`).join(", ")),Z.error("Accessor#set",`'${Se}' is not a valid value for this property, only the following values are valid: ${Ae}`)):"object"==typeof Se&&ge.length?(De||(De=ge.map($e=>C($e)).join(", ")),Z.error("Accessor#set",`'${Se}' is not a valid value for this property, value must be one of ${De}`)):Z.error("Accessor#set",`'${Se}' is not a valid value for this property`),me&&(me.valid=!1),null)}}function ue(le,ce){if(2===arguments.length)return ue(le).call(null,ce);const ve={},Te=[],ge=[];for(const me in le.typeMap){const ye=le.typeMap[me];ve[me]=B(ye),Te.push(C(ye)),ge.push(me)}const Se="string"==typeof le.key?me=>me[le.key]:le.key;return me=>{if(le.base&&!N(le.base,me)||null==me)return me;const ye=Se(me)||le.defaultKeyValue,we=ve[ye];if(!we)return Z.error("Accessor#set",`Invalid property value, value needs to be one of '${Te.join("', '")}', or a plain object that can autocast (having .type = '${ge.join("', '")}')`),null;if(!N(le.typeMap[ye],me))return me;if("string"==typeof le.key&&!U(me)){const $e={};for(const Ce in me)Ce!==le.key&&($e[Ce]=me[Ce]);return we($e)}return we(me)}}class te{}const ie={native:le=>({type:"native",value:le}),array:le=>({type:"array",value:le}),oneOf:le=>({type:"one-of",values:le})};function fe(le){if(!le||!("type"in le))return!1;switch(le.type){case"native":case"array":case"one-of":return!0}return!1}function _e(le){switch(le.type){case"native":return B(le.value);case"array":return $(_e(le.value));case"one-of":return function de(le){let ce=null;return(ve,Te)=>re(ve,le)?ve:(null==ce&&(ce=Oe(le)),Z.error("Accessor#set",`Invalid property value, value needs to be of type ${ce}`),Te&&(Te.valid=!1),null)}(le);default:return null}}function Oe(le){switch(le.type){case"native":switch(le.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case te:return"integer";case Date:return"date";default:return C(le.value)}case"array":return`array of ${Oe(le.value)}`;case"one-of":{const ce=le.values.map(ve=>Oe(ve));return`one of ${ce.slice(0,ce.length-1)} or ${ce[ce.length-1]}`}}return"unknown"}function re(le,ce){if(null==le)return!0;switch(ce.type){case"native":switch(ce.value){case Number:case te:return"number"==typeof le;case Boolean:return"boolean"==typeof le;case String:return"string"==typeof le}return le instanceof ce.value;case"array":return!!Array.isArray(le)&&!le.some(ve=>!re(ve,ce.value));case"one-of":return ce.values.some(ve=>re(le,ve))}}},10625:(He,Pe,g)=>{"use strict";g.d(Pe,{hk:()=>N,HS:()=>A,Ah:()=>U,OM:()=>C});var E=g(83382),w=g(77729);function x(D){D.name&&(D.read&&"object"==typeof D.read?void 0===D.read.source&&(D.read.source=D.name):D.read={source:D.name},D.write&&"object"==typeof D.write?void 0===D.write.target&&(D.write.target=D.name):D.write={target:D.name})}function se(D){"boolean"==typeof D.read?D.read={enabled:D.read}:"function"==typeof D.read?D.read={enabled:!0,reader:D.read}:D.read&&"object"==typeof D.read&&void 0===D.read.enabled&&(D.read.enabled=!0)}function V(D){"boolean"==typeof D.write?D.write={enabled:D.write}:"function"==typeof D.write?D.write={enabled:!0,writer:D.write}:D.write&&"object"==typeof D.write&&void 0===D.write.enabled&&(D.write.enabled=!0)}var W=g(9106);function A(D,F){return N(D,"read",F)}function U(D,F){return N(D,"write",F)}function N(D,F,B){let $=D&&D.json;if(D&&D.json&&D.json.origins&&B){const X=B.origin&&D.json.origins[B.origin];X&&("any"===F||F in X)&&($=X)}return $}function G(D){return D.type?k(D):z(D)}function k(D){if(!D.type)return;let F=0,B=D.type;for(;Array.isArray(B)&&!(0,E.gB)(B);)B=B[0],F++;return{type:B,ndimArray:F}}function z(D){if(!D.types)return;let F=0,B=D.types;for(;Array.isArray(B);)B=B[0],F++;return{types:B,ndimArray:F}}function C(D){(function Z(D){if(D.json||(D.json={}),se(D.json),V(D.json),x(D.json),D.json.origins)for(const F in D.json.origins)se(D.json.origins[F]),V(D.json.origins[F]),x(D.json.origins[F]);return!0})(D)&&(function T(D){if(D.json&&D.json.origins){const F=D.json.origins,B={"web-document":["web-scene","web-map"]};for(const $ in B)if(F[$]){const X=F[$];B[$].forEach(q=>{F[q]=X}),delete F[$]}}}(D),function J(D){const F=function Q(D){return D.json.types?z(D.json):D.type?k(D):z(D)}(D);if(D.json.origins)for(const B in D.json.origins){const $=D.json.origins[B],X=$.types?G($):F;(0,w.U)(X,$,!1),$.types&&!$.write&&D.json.write&&D.json.write.enabled&&($.write={...D.json.write}),(0,W.U)(X,$)}(0,w.U)(F,D.json,!0),(0,W.U)(F,D.json)}(D))}},77729:(He,Pe,g)=>{"use strict";g.d(Pe,{U:()=>V,d:()=>W});var E=g(28191),T=g(44054),w=g(23476),Z=g(69778),x=g(91905);const se=E.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function V(B,$,X){B&&(!X&&!$.read||$.read?.reader||!1===$.read?.enabled||function k(B){return"types"in B?C(B.types):z(B.type)}(B)&&(0,T.RB)("read.reader",W(B),$))}function W(B){const $=B.ndimArray??0;if($>1)return function J(B){const $=A(B),X=N.bind(null,$),q=B.ndimArray??0;return(Y,ae,he)=>{if(null==Y)return Y;Y=X(Y,he,q);let ne=q,ue=Y;for(;ne>0&&Array.isArray(ue);)ne--,ue=ue[0];if(void 0!==ue)for(let te=0;te<ne;te++)Y=[Y];return Y}}(B);if(1===$)return Q(B);if("type"in B&&G(B.type)){const X=B.type.prototype?.itemType?.Type,q=Q("function"==typeof X?{type:X}:{types:X});return(Y,ae,he)=>{const ne=q(Y,ae,he);return ne&&new B.type(ne)}}return A(B)}function A(B){return"type"in B?function U(B){return B.prototype.read?($,X,q)=>{if(null==$)return $;const Y=typeof $;if("object"!==Y)return void se.error(`Expected JSON value of type 'object' to deserialize type '${B.prototype.declaredClass}', but got '${Y}'`);const ae=new B;return ae.read($,q),ae}:B.fromJSON}(B.type):function D(B){let $=null;const X=B.errorContext??"type";return(q,Y,ae)=>{if(null==q)return q;const he=typeof q;if("object"!==he)return void se.error(`Expected JSON value of type 'object' to deserialize, but got '${he}'`);$||($=function F(B){const $={};for(const X in B.typeMap){const q=B.typeMap[X],Y=(0,Z.fp)(q.prototype);if("function"==typeof B.key)continue;const ae=Y[B.key];if(!ae)continue;ae.json?.type&&Array.isArray(ae.json.type)&&1===ae.json.type.length&&"string"==typeof ae.json.type[0]&&($[ae.json.type[0]]=q);const he=ae.json?.write;if(!he||!he.writer){$[X]=q;continue}const ne=he.target,ue="string"==typeof ne?ne:B.key,te={};he.writer(X,te,ue),te[ue]&&($[te[ue]]=q)}return $}(B));const ne=B.key;if("string"!=typeof ne)return;const ue=q[ne],te=ue?$[ue]:B.defaultKeyValue?B.typeMap[B.defaultKeyValue]:void 0;if(!te){const fe=`Type '${ue||"unknown"}' is not supported`;return ae&&ae.messages&&q&&ae.messages.push(new w.Z(`${X}:unsupported`,fe,{definition:q,context:ae})),void se.error(fe)}const ie=new te;return ie.read(q,ae),ie}}(B.types)}function N(B,$,X,q){return 0!==q&&Array.isArray($)?$.map(Y=>N(B,Y,X,q-1)):B($,void 0,X)}function Q(B){const $=A(B);return(X,q,Y)=>{if(null==X)return X;if(Array.isArray(X)){const he=[];for(const ne of X){const ue=$(ne,void 0,Y);void 0!==ue&&he.push(ue)}return he}const ae=$(X,void 0,Y);return void 0!==ae?[ae]:void 0}}function G(B){if(!(0,x.u)(B))return!1;const $=B.prototype.itemType;return!(!$||!$.Type)&&("function"==typeof $.Type?z($.Type):C($.Type))}function z(B){return!Array.isArray(B)&&!!B&&B.prototype&&("read"in B.prototype||"fromJSON"in B||G(B))}function C(B){for(const $ in B.typeMap)if(!z(B.typeMap[$]))return!1;return!0}},91905:(He,Pe,g)=>{"use strict";function E(T){return!!T&&T.prototype&&T.prototype.declaredClass&&0===T.prototype.declaredClass.indexOf("esri.core.Collection")}g.d(Pe,{u:()=>E})},9106:(He,Pe,g)=>{"use strict";g.d(Pe,{U:()=>x,k:()=>N});var E=g(32995),T=g(28191),w=g(44054),Z=g(91905);function x(k,z){if(!z.write||z.write.writer||!1===z.write.enabled&&!z.write.overridePolicy)return;const C=k?.ndimArray??0;z.write.writer=k&&(1===C||"type"in k&&(0,Z.u)(k.type))?J:C>1?function G(k){return(z,C,D,F)=>{let B;if(null===z)B=null;else{B=Q(z,F,k);let $=k,X=B;for(;$>0&&Array.isArray(X);)$--,X=X[0];if(void 0!==X)for(let q=0;q<$;q++)B=[B]}(0,w.RB)(D,B,C)}}(C):z.types?Array.isArray(z.types)?function W(k){return(z,C,D,F)=>z&&Array.isArray(z)?A(z.filter(B=>V(B,k,F)),C,D,F):A(z,C,D,F)}(z.types[0]):function se(k){return(z,C,D,F)=>z?V(z,k,F)?A(z,C,D,F):void 0:A(z,C,D,F)}(z.types):A}function V(k,z,C){for(const D in z.typeMap)if(k instanceof z.typeMap[D])return!0;if(C?.messages){const F=`Values of type '${("function"!=typeof z.key?k[z.key]:k.declaredClass)??"Unknown"}' cannot be written`;C&&C.messages&&k&&C.messages.push(new E.Z(`${z.errorContext??"type"}:unsupported`,F,{definition:k,context:C})),T.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(F)}return!1}function A(k,z,C,D){(0,w.RB)(C,U(k,D),z)}function U(k,z){return k&&"function"==typeof k.write?k.write({},z):k&&"function"==typeof k.toJSON?k.toJSON():"number"==typeof k?N(k):k}function N(k){return k===-1/0?-Number.MAX_VALUE:k===1/0?Number.MAX_VALUE:isNaN(k)?null:k}function J(k,z,C,D){let F;null===k?F=null:k&&"function"==typeof k.map?(F=k.map(B=>U(B,D)),"function"==typeof F.toArray&&(F=F.toArray())):F=[U(k,D)],(0,w.RB)(C,F,z)}function Q(k,z,C){return 0!==C&&Array.isArray(k)?k.map(D=>Q(D,z,C-1)):U(k,z)}},58236:(He,Pe,g)=>{"use strict";g.d(Pe,{$z:()=>Z,Gg:()=>se,U2:()=>x});var E=g(38904);function T(V,W){const A="?"===V[V.length-1]?V.slice(0,-1):V;if(null!=W.getItemAt||Array.isArray(W)){const N=parseInt(A,10);if(!isNaN(N))return Array.isArray(W)?W[N]:W.getItemAt(N)}const U=(0,E.vw)(W);return(0,E.b6)(U,A)?U.get(A):W[A]}function w(V,W,A){if(null==V)return V;const U=T(W[A],V);return!U&&A<W.length-1?void 0:A===W.length-1?U:w(U,W,A+1)}function Z(V,W,A=0){return"string"!=typeof W||W.includes(".")?w(V,(0,E.NI)(W),A):T(W,V)}function x(V,W){return Z(V,W)}function se(V,W){return void 0!==Z(W,V)}},57530:(He,Pe,g)=>{"use strict";var E,T;g.d(Pe,{F:()=>E}),(T=E||(E={}))[T.INITIALIZING=0]="INITIALIZING",T[T.CONSTRUCTING=1]="CONSTRUCTING",T[T.CONSTRUCTED=2]="CONSTRUCTED"},69778:(He,Pe,g)=>{"use strict";g.d(Pe,{Oe:()=>x,fp:()=>Z,tz:()=>V});var E=g(88684),T=g(53661),w=g(38904);function Z(U){let N=U.constructor.__accessorMetadata__;const J=Object.prototype.hasOwnProperty.call(U.constructor,"__accessorMetadata__");if(N){if(!J){N=Object.create(N);for(const Q in N)N[Q]=(0,E.d9)(N[Q]);Object.defineProperty(U.constructor,"__accessorMetadata__",{value:N,enumerable:!1,configurable:!0,writable:!0})}}else N={},Object.defineProperty(U.constructor,"__accessorMetadata__",{value:N,enumerable:!1,configurable:!0,writable:!0});return(0,T.j0)(U.constructor.__accessorMetadata__)}function x(U,N){const J=Z(U);let Q=J[N];return Q||(Q=J[N]={}),Q}function V(U,N){return(0,w.TS)(U,N,A)}const W=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function A(U){return W.test(U)?"replace":"merge"}},44564:(He,Pe,g)=>{"use strict";g.d(Pe,{$:()=>U,i:()=>A});var E=g(58236),T=g(38904),w=g(10625);function Z(N,J,Q){if(!N||!N.read||!1===N.read.enabled||!N.read.source)return!1;const G=N.read.source;if("string"==typeof G){if(G===J||G.includes(".")&&0===G.indexOf(J)&&(0,E.Gg)(G,Q))return!0}else for(const k of G)if(k===J||k.includes(".")&&0===k.indexOf(J)&&(0,E.Gg)(k,Q))return!0;return!1}function se(N,J,Q,G,k){let z=(0,w.HS)(J[Q],k);(function x(N){return N&&(!N.read||!1!==N.read.enabled&&!N.read.source)})(z)&&(N[Q]=!0);for(const C of Object.getOwnPropertyNames(J))z=(0,w.HS)(J[C],k),Z(z,Q,G)&&(N[C]=!0)}function V(N,J,Q,G){const z=(0,w.hk)(Q.metadatas[J],"any",G),C=z&&z.default;if(void 0===C)return;const D="function"==typeof C?C.call(N,J,G):C;void 0!==D&&Q.set(J,D)}const W={origin:"service"};function A(N,J,Q=W){if(!J||"object"!=typeof J)return;const G=(0,T.vw)(N),k=G.metadatas,z={};for(const C of Object.getOwnPropertyNames(J))se(z,k,C,J,Q);G.setDefaultOrigin(Q.origin);for(const C of Object.getOwnPropertyNames(z)){const D=(0,w.HS)(k[C],Q).read,F=D&&D.source;let B;B=F&&"string"==typeof F?(0,E.$z)(J,F):J[C],D&&D.reader&&(B=D.reader.call(N,B,J,Q)),void 0!==B&&G.set(C,B)}if(!Q||!Q.ignoreDefaults){G.setDefaultOrigin("defaults");for(const C of Object.getOwnPropertyNames(k))z[C]||V(N,C,G,Q)}G.setDefaultOrigin("user")}function U(N,J,Q,G=W){const k={...G,messages:[]};Q(k),k.messages?.forEach(z=>{"warning"!==z.type||N.loaded?G&&G.messages&&G.messages.push(z):N.loadWarnings.push(z)})}},6784:(He,Pe,g)=>{"use strict";g.d(Pe,{t:()=>x});var E=g(32995),T=g(67087),Z=(g(28191),g(58236));function x(A,U,N){if(A&&U)if("object"==typeof U)for(const J of Object.getOwnPropertyNames(U))x(A,J,U[J]);else{if(U.includes(".")){const Q=U.split("."),G=Q.splice(Q.length-1,1)[0];return void x((0,Z.U2)(A,Q),G,N)}const J=A.__accessor__;null!=J&&function se(A,U){if((0,T.Z)("esri-unknown-property-errors")&&!function V(A,U){return null!=U.metadatas[A]}(A,U))throw new E.Z("set:unknown-property",function W(A,U){return"setting unknown property '"+A+"' on instance of "+U.host.declaredClass}(A,U))}(U,J),A[U]=N}}},64137:(He,Pe,g)=>{"use strict";g.d(Pe,{GF:()=>D,LJ:()=>N,gb:()=>J,it:()=>W,mS:()=>z}),g(67087);var T=g(28191),w=g(38904),Z=g(59827);const x={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},se=[];let V=x;function W(B){V.onObservableAccessed(B)}let A=!1,U=!1;function N(B,$,X){if(A)return Q(B,$,X);G(B);const q=$.call(X);return k(),q}function J(B,$){return N(x,B,$)}function Q(B,$,X){const q=A;A=!0,G(B);let Y=null;try{Y=$.call(X)}catch(ae){U&&T.Z.getLogger("esri.core.accessorSupport.tracking").error(ae)}return k(),A=q,Y}function G(B){V=B,se.push(B)}function k(){const B=se.length;if(B>1){const $=se.pop();V=se[B-2],$.onTrackingEnd()}else if(1===B){const $=se.pop();V=x,$.onTrackingEnd()}else V=x}function z(B,$){const X=$.observerObject;if(X.flags&Z.v.DepTrackingInitialized)return;const q=U;U=!1,X.flags&Z.v.AutoTracked?Q($,$.metadata.get,B):D(B,$),U=q}const C=[];function D(B,$){const X=$.observerObject;X.flags&Z.v.ExplicitlyTracking||(X.flags|=Z.v.ExplicitlyTracking,Q($,()=>{const q=$.metadata.dependsOn||C;for(const Y of q)if("string"!=typeof Y||Y.includes(".")){const ae=(0,w.NI)(Y);for(let he=0,ne=B;he<ae.length&&null!=ne&&"object"==typeof ne;++he)ne=F(ne,ae[he],he!==ae.length-1)}else F(B,Y,!1)}),X.flags&=~Z.v.ExplicitlyTracking)}function F(B,$,X){const q="?"===$[$.length-1]?$.slice(0,-1):$;if(null!=B.getItemAt||Array.isArray(B)){const ae=parseInt(q,10);if(!isNaN(ae))return Array.isArray(B)?B[ae]:B.getItemAt(ae)}const Y=(0,w.vw)(B)?.properties.get(q);return Y&&(W(Y.observerObject),z(B,Y)),X?B[q]:void 0}},50147:(He,Pe,g)=>{"use strict";g.d(Pe,{EH:()=>V,U5:()=>x,Xz:()=>se});var E=g(64137),T=g(95781);let w=!1;const Z=[];function x(U,N){let J=new T.M(function k(){if(!J||G)return;if(w)return void W(k);const C=Q;J.clear(),w=!0,G=!0,Q=(0,E.LJ)(J,U),G=!1,w=!1,N(Q,C),A()}),Q=null,G=!1;return G=!0,Q=(0,E.LJ)(J,U),G=!1,{remove:function z(){J&&(J.destroy(),J=null,Q=null)}}}function se(U,N){let J=new T.M(function G(){N(Q,z)}),Q=null;function z(){return J?(J.clear(),Q=(0,E.LJ)(J,U),Q):null}return z(),{remove:function k(){J&&(J.destroy(),J=null),Q=null}}}function V(U){let N=new T.M(function Q(){N&&!J&&(w?W(Q):(N.clear(),w=!0,J=!0,(0,E.LJ)(N,U),J=!1,w=!1,A()))}),J=!1;return J=!0,(0,E.LJ)(N,U),J=!1,{remove:function G(){N&&(N.destroy(),N=null)}}}function W(U){Z.includes(U)||Z.unshift(U)}function A(){for(;Z.length;)Z.pop()()}},59827:(He,Pe,g)=>{"use strict";var E,T;g.d(Pe,{v:()=>E}),(T=E||(E={}))[T.Dirty=1]="Dirty",T[T.Overriden=2]="Overriden",T[T.Computing=4]="Computing",T[T.NonNullable=8]="NonNullable",T[T.HasDefaultValue=16]="HasDefaultValue",T[T.DepTrackingInitialized=32]="DepTrackingInitialized",T[T.AutoTracked=64]="AutoTracked",T[T.ExplicitlyTracking=128]="ExplicitlyTracking"},64540:(He,Pe,g)=>{"use strict";g.d(Pe,{f:()=>w});var E=g(64137),T=g(33119);class w{constructor(x){this._observable=new T.s,this._value=x}get(){return(0,E.it)(this._observable),this._value}set(x){x!==this._value&&(this._value=x,this._observable.notify())}}},33119:(He,Pe,g)=>{"use strict";g.d(Pe,{s:()=>T});var E=g(1006);class T extends E.s{notify(){const Z=this._observers;if(Z&&Z.length>0){const x=Z.slice();for(const se of x)se.onInvalidated(),se.onCommitted()}}}},95781:(He,Pe,g)=>{"use strict";g.d(Pe,{M:()=>E});class E{constructor(se){this._notify=se,this._accessed=[],this._handles=[],this._observerObject=new T(this._notify),w.register(this,this._observerObject)}destroy(){this._accessed.length=0,this._observerObject?.destroy(),this.clear(),w.unregister(this)}onObservableAccessed(se){const V=this._accessed;V.includes(se)||V.push(se)}onTrackingEnd(){const se=this._handles,V=this._accessed,W=this._observerObject;for(let A=0;A<V.length;++A)se.push(V[A].observe(W));V.length=0}clear(){const se=this._handles;for(let V=0;V<se.length;++V)se[V].remove();se.length=0}}class T{constructor(se){this._notify=se,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const se=this._invalidCount;if(1===se)return this._invalidCount=0,void this._notify();this._invalidCount=se>0?se-1:0}destroy(){this.destroyed=!0,this._notify=Z}}const w=new FinalizationRegistry(x=>{x.destroy()});function Z(){}},38904:(He,Pe,g)=>{"use strict";g.d(Pe,{IH:()=>k,NI:()=>U,Qc:()=>G,TS:()=>V,b6:()=>x,vw:()=>Z});var E=g(70120),T=g(88684),w=g(53661);function Z(z){return z?z.__accessor__?z.__accessor__:z.propertyInvalidated?z:null:null}function x(z,C){return null!=z&&z.metadatas&&null!=z.metadatas[C]}function V(z,C,D){return W(z,C,D?{policy:D,path:""}:null)}function W(z,C,D){return C?Object.keys(C).reduce((F,B)=>{let $=null,X="merge";if(D&&($=D.path?`${D.path}.${B}`:B,X=D.policy($)),"replace"===X||"replace-arrays"===X&&Array.isArray(F[B]))return F[B]=C[B],F;if(void 0===F[B])return F[B]=(0,T.d9)(C[B]),F;let q=F[B],Y=C[B];if(q===Y)return F;if(Array.isArray(Y)||Array.isArray(F))q=F[B]=q?Array.isArray(q)?q.concat():[q]:[],Y&&(Array.isArray(Y)||(Y=[Y]),Y.forEach(ae=>{q.includes(ae)||q.push(ae)}));else if(Y&&"object"==typeof Y)if(D){const ae=D.path;D.path=(0,w.j0)($),F[B]=W(q,Y,D),D.path=ae}else F[B]=W(q,Y,null);else F.hasOwnProperty(B)&&!C.hasOwnProperty(B)||(F[B]=Y);return F},z||{}):z}function U(z){return Array.isArray(z)?z:z.split(".")}function N(z){return z.includes(",")?z.split(",").map(C=>C.trim()):[z.trim()]}function G(z,C,D,F){const B=function J(z){if(Array.isArray(z)){const C=[];for(const D of z)C.push(...N(D));return C}return N(z)}(C);if(1!==B.length){const $=B.map(X=>F(z,X,D));return(0,E.AL)($)}return F(z,B[0],D)}function k(z){let C=!1;return()=>{C||(C=!0,z())}}},11225:(He,Pe,g)=>{"use strict";g.d(Pe,{Fs:()=>X,NC:()=>te,BT:()=>D,YP:()=>ae,aQ:()=>ue});var N,ie,E=g(93113),T=g(88684),w=g(16734),Z=g(91409),V=g(29962),W=g(58236),A=g(50147),U=g(38904);(ie=N||(N={}))[ie.Untracked=0]="Untracked",ie[ie.Tracked=1]="Tracked";class J{constructor(){this.uid=(0,V.D)(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(fe,_e,de,Oe,re){return this.pool.acquire(N.Untracked,fe,_e,de,Oe,re,T.fS)}static acquireTracked(fe,_e,de,Oe){return this.pool.acquire(N.Tracked,fe,_e,de,null,null,Oe)}notify(fe,_e){this.type===N.Untracked?this.callback.call(this.target,fe,_e,this.path,this.target):this.callback.call(null,fe,_e)}acquire(fe,_e,de,Oe,re,le,ce){this.uid=(0,V.D)(),this.removed=!1,this.type=fe,this.oldValue=_e,this.callback=de,this.getValue=Oe,this.target=re,this.path=le,this.equals=ce}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=(0,V.D)(),this.removed=!0}}J.pool=new w.e(J);const Q=new E.Z,G=new Set;let k;function z(ie){G.delete(ie),G.add(ie),k||(k=(0,Z.Os)(F))}function C(ie){if(ie.removed)return;const fe=ie.oldValue,_e=ie.getValue();ie.equals(fe,_e)||(ie.oldValue=_e,ie.notify(_e,fe))}function D(ie){for(const fe of G.values())fe.target===ie&&(fe.removed=!0)}function F(){let ie=10;for(;k&&ie--;){k=null;const fe=B(),_e=Q.acquire();for(const de of fe){const Oe=de.uid;C(de),Oe===de.uid&&de.removed&&_e.push(de)}for(const de of G)de.removed&&(_e.push(de),G.delete(de));for(const de of _e)J.pool.release(de);Q.release(_e),Q.release(fe),$.forEach(de=>de())}}function B(){const ie=Q.acquire();ie.length=G.size;let fe=0;for(const _e of G)ie[fe]=_e,++fe;return G.clear(),ie}const $=new Set;function X(ie){return $.add(ie),{remove(){$.delete(ie)}}}function ae(ie,fe,_e,de=!1){return!ie.__accessor__||ie.__accessor__.destroyed?{remove(){}}:de?function Y(ie,fe,_e){const de=(0,U.Qc)(ie,fe,_e,(Oe,re,le)=>{let ce=!1;return(0,A.U5)(()=>(0,W.$z)(Oe,re),(ve,Te)=>{Oe.__accessor__.destroyed?de.remove():ce||(ce=!0,(0,T.fS)(Te,ve)||le.call(Oe,ve,Te,re,Oe),ce=!1)})});return de}(ie,fe,_e):function q(ie,fe,_e){let de=(0,U.Qc)(ie,fe,_e,(Oe,re,le)=>{let ce,ve,Te=(0,A.Xz)(()=>(0,W.$z)(Oe,re),(ge,Ae)=>{Oe.__accessor__.destroyed||ce&&ce.uid!==ve?de.remove():(ce||(ce=J.acquireUntracked(ge,le,Ae,Oe,re),ve=ce.uid),z(ce))});return{remove:(0,U.IH)(()=>{Te.remove(),ce&&(ce.uid!==ve||ce.removed||(ce.removed=!0,z(ce)),ce=null),de=Te=null})}});return de}(ie,fe,_e)}function ue(ie,fe,_e=!1,de=T.y7){return _e?function ne(ie,fe,_e){let de=!1;return(0,A.U5)(ie,(Oe,re)=>{de||(de=!0,_e(re,Oe)||fe(Oe,re),de=!1)})}(ie,fe,de):function he(ie,fe,_e){let de,Oe,re=(0,A.Xz)(ie,(le,ce)=>{de&&de.uid!==Oe?re.remove():(de||(de=J.acquireTracked(le,fe,ce,_e),Oe=de.uid),z(de))});return{remove:(0,U.IH)(()=>{re.remove(),de&&(de.uid!==Oe||de.removed||(de.removed=!0,z(de)),de=null),re=null})}}(ie,fe,de)}function te(ie){return function x(ie,fe){for(const _e of ie.entries())if(fe(_e[0]))return!0;return!1}(G,fe=>fe.oldValue===ie)}},64939:(He,Pe,g)=>{"use strict";g.d(Pe,{c:()=>N,d:()=>U});var E=g(19420),T=g(32995),w=g(28191),Z=g(61434),x=g(38904),se=g(10625);function V(J,Q,G,k,z){const C={};return Q.write?.writer?.call(J,k,C,G,z),C}function W(J,Q,G,k,z,C){if(!k||!k.write)return!1;const D=J.get(G);if(!z&&k.write.overridePolicy){const F=k.write.overridePolicy.call(J,D,G,C);void 0!==F&&(z=F)}if(z||(z=k.write),!z||!1===z.enabled)return!1;if((null===D&&!z.allowNull&&!z.writerEnsuresNonNull||void 0===D)&&z.isRequired){const F=new T.Z("web-document-write:property-required",`Missing value for required property '${G}' on '${J.declaredClass}'`,{propertyName:G,target:J});return F&&C&&C.messages?C.messages.push(F):F&&!C&&w.Z.getLogger("esri.core.accessorSupport.write").error(F.name,F.message),!1}return!(void 0===D||null===D&&!z.allowNull&&!z.writerEnsuresNonNull||(!Q.store.multipleOriginsSupported||Q.store.originOf(G)===Z.s3.DEFAULTS)&&function A(J,Q,G,k,z){const C=k.default;if(void 0===C)return!1;if(null!=k.defaultEquals)return k.defaultEquals(z);if("function"==typeof C){if(Array.isArray(z)){const D=C.call(J,Q,G);return(0,E.fS)(D,z)}return!1}return C===z}(J,G,C,k,D)||!z.ignoreOrigin&&C&&C.origin&&Q.store.multipleOriginsSupported&&Q.store.originOf(G)<(0,Z.M9)(C.origin))}function U(J,Q,G,k){const z=(0,x.vw)(J),D=(0,se.Ah)(z.metadatas[Q],k);return!!D&&W(J,z,Q,D,G,k)}function N(J,Q,G){if(J&&"function"==typeof J.toJSON&&(!J.toJSON.isDefaultToJSON||!J.write))return(0,x.TS)(Q,J.toJSON(G));const k=(0,x.vw)(J),z=k.metadatas;for(const C in z){const D=(0,se.Ah)(z[C],G);if(!W(J,k,C,D,void 0,G))continue;const F=J.get(C),B=V(J,D,D.write&&"string"==typeof D.write.target?D.write.target:C,F,G);Object.keys(B).length>0&&(Q=(0,x.TS)(Q,B),G?.resources?.pendingOperations?.length&&G.resources.pendingOperations.push(Promise.all(G.resources.pendingOperations).then(()=>(0,x.TS)(Q,B,()=>"replace-arrays"))),G&&G.writtenProperties&&G.writtenProperties.push({target:J,propName:C,oldOrigin:(0,Z.Wm)(k.store.originOf(C)),newOrigin:G.origin}))}return Q}},19420:(He,Pe,g)=>{"use strict";g.d(Pe,{FY:()=>ae,Od:()=>fe,SO:()=>B,Tw:()=>W,Vx:()=>U,a9:()=>z,cq:()=>X,e$:()=>q,e5:()=>N,fS:()=>A,w6:()=>C,zG:()=>Q});var E=g(53661),T=g(37313);function W(de,Oe){return de.filter(Oe?(re,le,ce)=>ce.findIndex(Oe.bind(null,re))===le:(re,le,ce)=>ce.indexOf(re)===le)}function A(de,Oe,re){if((0,E.Wi)(de)&&(0,E.Wi)(Oe))return!0;if((0,E.Wi)(de)||(0,E.Wi)(Oe)||de.length!==Oe.length)return!1;if(re){for(let le=0;le<de.length;le++)if(!re(de[le],Oe[le]))return!1}else for(let le=0;le<de.length;le++)if(de[le]!==Oe[le])return!1;return!0}function U(de,Oe){let re=de.length!==Oe.length;re&&(de.length=Oe.length);for(let le=0;le<Oe.length;++le)de[le]!==Oe[le]&&(de[le]=Oe[le],re=!0);return re}function N(de,Oe,re){let le,ce;return re?(le=Oe.filter(ve=>!de.some(Te=>re(Te,ve))),ce=de.filter(ve=>!Oe.some(Te=>re(Te,ve)))):(le=Oe.filter(ve=>!de.includes(ve)),ce=de.filter(ve=>!Oe.includes(ve))),{added:le,removed:ce}}function Q(de){return de&&"number"==typeof de.length}const k=!!Array.prototype.fill;function z(de,Oe){if(k)return new Array(de).fill(Oe);const re=new Array(de);for(let le=0;le<de;le++)re[le]=Oe;return re}function C(de,Oe){void 0===Oe&&(Oe=de,de=0);const re=new Array(Oe-de);for(let le=de;le<Oe;le++)re[le-de]=le;return re}class B{constructor(){this.last=0}}const $=new B;function X(de,Oe,re,le){le=le||$;const ce=Math.max(0,le.last-10);for(let Te=ce;Te<re;++Te)if(de[Te]===Oe)return le.last=Te,Te;const ve=Math.min(ce,re);for(let Te=0;Te<ve;++Te)if(de[Te]===Oe)return le.last=Te,Te;return-1}function q(de,Oe,re,le){const ce=re??de.length,ve=X(de,Oe,ce,le);if(-1!==ve)return de[ve]=de[ce-1],null==re&&de.pop(),Oe}const Y=new Set;function ae(de,Oe,re=de.length,le=Oe.length,ce,ve){if(0===le||0===re)return re;Y.clear();for(let ge=0;ge<le;++ge)Y.add(Oe[ge]);ce=ce||$;const Te=Math.max(0,ce.last-10);for(let ge=Te;ge<re;++ge)if(Y.has(de[ge])&&(ve&&ve.push(de[ge]),Y.delete(de[ge]),de[ge]=de[re-1],--re,--ge,0===Y.size||0===re))return Y.clear(),re;for(let ge=0;ge<Te;++ge)if(Y.has(de[ge])&&(ve&&ve.push(de[ge]),Y.delete(de[ge]),de[ge]=de[re-1],--re,--ge,0===Y.size||0===re))return Y.clear(),re;return Y.clear(),re}function fe(de,Oe){const re=de.indexOf(Oe);return-1!==re?(de.splice(re,1),Oe):null}new T.Z},11823:(He,Pe,g)=>{"use strict";g.d(Pe,{Ed:()=>U,UI:()=>N,mt:()=>F,q6:()=>C,vr:()=>X});var E=g(71670),T=g(18100),w=g(6365),Z=g(53661),x=g(30801),se=g(9497),A=(g(83382),g(19420),g(20891));function U(Y,ae,he){return(0,x.as)(Y.map((ne,ue)=>ae.apply(he,[ne,ue])))}function N(Y,ae,he){return J.apply(this,arguments)}function J(){return(J=(0,E.Z)(function*(Y,ae,he){return(yield(0,x.as)(Y.map((ne,ue)=>ae.apply(he,[ne,ue])))).map(ne=>ne.value)})).apply(this,arguments)}function Q(Y){return{ok:!0,value:Y}}function G(Y){return{ok:!1,error:Y}}function C(Y){return D.apply(this,arguments)}function D(){return(D=(0,E.Z)(function*(Y){if((0,Z.Wi)(Y))return{ok:!1,error:new Error("no promise provided")};try{return Q(yield Y)}catch(ae){return G(ae)}})).apply(this,arguments)}function F(Y){return B.apply(this,arguments)}function B(){return(B=(0,E.Z)(function*(Y){try{return Q(yield Y)}catch(ae){return(0,x.r9)(ae),G(ae)}})).apply(this,arguments)}function X(Y,ae){return new q(Y,ae)}let q=class extends w.Z{get value(){return function k(Y){return(0,Z.pC)(Y)&&!0===Y.ok?Y.value:null}(this._result)}get error(){return function z(Y){return(0,Z.pC)(Y)&&!1===Y.ok?Y.error:null}(this._result)}get finished(){return(0,Z.pC)(this._result)}constructor(Y,ae){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=(0,Z.IM)(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:he}=this._abortController;this.promise=Y(he),this.promise.then(ne=>{this._result=Q(ne),this._cleanup()},ne=>{this._result=G(ne),this._cleanup()}),this._abortHandle=(0,x.fu)(ae,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=(0,Z.hw)(this._abortHandle),this._abortController=null}};(0,T._)([(0,se.Cb)()],q.prototype,"value",null),(0,T._)([(0,se.Cb)()],q.prototype,"error",null),(0,T._)([(0,se.Cb)()],q.prototype,"finished",null),(0,T._)([(0,se.Cb)()],q.prototype,"promise",void 0),(0,T._)([(0,se.Cb)()],q.prototype,"_result",void 0),q=(0,T._)([(0,A.j)("esri.core.asyncUtils.ReactiveTask")],q)},84625:(He,Pe,g)=>{"use strict";function E(N){return 32+N.length}function w(N){if(!N)return 0;let J=W;for(const Q in N)if(N.hasOwnProperty(Q)){const G=N[Q];switch(typeof G){case"string":J+=E(G);break;case"number":J+=16;break;case"boolean":J+=4}}return J}function Z(N){if(!N)return 0;if(Array.isArray(N))return function x(N){const J=N.length;if(0===J||"number"==typeof N[0])return 32+8*J;let Q=A;for(let G=0;G<J;G++)Q+=se(N[G]);return Q}(N);let J=W;for(const Q in N)N.hasOwnProperty(Q)&&(J+=se(N[Q]));return J}function se(N){switch(typeof N){case"object":return Z(N);case"string":return E(N);case"number":return 16;case"boolean":return 4;default:return 8}}function V(N,J){return A+N.length*J}g.d(Pe,{Ul:()=>Z,Y8:()=>U,do:()=>V,f2:()=>w});const W=32,A=32;var U,N;(N=U||(U={}))[N.KILOBYTES=1024]="KILOBYTES",N[N.MEGABYTES=1048576]="MEGABYTES",N[N.GIGABYTES=1073741824]="GIGABYTES"},75419:(He,Pe,g)=>{"use strict";g.d(Pe,{m:()=>T});const T=function E(w){return{setTimeout:(Z,x)=>{const se=w.setTimeout(Z,x);return{remove:()=>w.clearTimeout(se)}}}}(globalThis)},40434:(He,Pe,g)=>{"use strict";g.d(Pe,{R:()=>w,Z:()=>T});var E=g(97621);function T(x,se,V=E.Z){return se||(se=new V),se===x||(se.removeAll(),function Z(x){return x&&(Array.isArray(x)||"items"in x&&Array.isArray(x.items))}(x)?se.addMany(x):x&&se.add(x)),se}function w(x){return x}},44660:(He,Pe,g)=>{"use strict";function T(ne){return"h"in ne&&"s"in ne&&"v"in ne}function w(ne){return"l"in ne&&"a"in ne&&"b"in ne}function Z(ne){return"l"in ne&&"c"in ne&&"h"in ne}g.d(Pe,{Y3:()=>q,_Y:()=>X,sJ:()=>Y,xr:()=>$});const se=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],V=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function W(ne,ue){const te=[];let ie,fe;if(ne[0].length!==ue.length)throw new Error("dimensions do not match");const _e=ne.length,de=ne[0].length;let Oe=0;for(ie=0;ie<_e;ie++){for(Oe=0,fe=0;fe<de;fe++)Oe+=ne[ie][fe]*ue[fe];te.push(Oe)}return te}function A(ne){const ue=[ne.r/255,ne.g/255,ne.b/255].map(ie=>ie<=.04045?ie/12.92:((ie+.055)/1.055)**2.4),te=W(se,ue);return{x:100*te[0],y:100*te[1],z:100*te[2]}}function U(ne){const ue=W(V,[ne.x/100,ne.y/100,ne.z/100]).map(te=>Math.min(1,Math.max(te<=.0031308?12.92*te:1.055*te**.4166666666666667-.055,0)));return{r:Math.round(255*ue[0]),g:Math.round(255*ue[1]),b:Math.round(255*ue[2])}}function N(ne){const ue=[ne.x/95.047,ne.y/100,ne.z/108.883].map(te=>te>.008856451679035631?te**.3333333333333333:7.787037037037035*te+.13793103448275862);return{l:116*ue[1]-16,a:500*(ue[0]-ue[1]),b:200*(ue[1]-ue[2])}}function J(ne){const ue=ne.l,te=[(ue+16)/116+ne.a/500,(ue+16)/116,(ue+16)/116-ne.b/200].map(ie=>ie>6/29?ie**3:3*(6/29)**2*(ie-4/29));return{x:95.047*te[0],y:100*te[1],z:108.883*te[2]}}function $(ne){return function E(ne){return"r"in ne&&"g"in ne&&"b"in ne}(ne)?ne:Z(ne)?function D(ne){return U(J(function G(ne){const te=ne.c,ie=ne.h;return{l:ne.l,a:te*Math.cos(ie),b:te*Math.sin(ie)}}(ne)))}(ne):w(ne)?function z(ne){return U(J(ne))}(ne):function x(ne){return"x"in ne&&"y"in ne&&"z"in ne}(ne)?U(ne):T(ne)?function B(ne){const ue=(ne.h+360)%360/60,ie=ne.v/100*255,fe=ie*(ne.s/100),_e=fe*(1-Math.abs(ue%2-1));let de;switch(Math.floor(ue)){case 0:de={r:fe,g:_e,b:0};break;case 1:de={r:_e,g:fe,b:0};break;case 2:de={r:0,g:fe,b:_e};break;case 3:de={r:0,g:_e,b:fe};break;case 4:de={r:_e,g:0,b:fe};break;case 5:case 6:de={r:fe,g:0,b:_e};break;default:de={r:0,g:0,b:0}}return de.r=Math.round(de.r+ie-fe),de.g=Math.round(de.g+ie-fe),de.b=Math.round(de.b+ie-fe),de}(ne):ne}function X(ne){return T(ne)?ne:function F(ne){const ue=ne.r,te=ne.g,ie=ne.b,fe=Math.max(ue,te,ie),_e=fe-Math.min(ue,te,ie);let de=fe,Oe=0===_e?0:fe===ue?(te-ie)/_e%6:fe===te?(ie-ue)/_e+2:(ue-te)/_e+4,re=0===_e?0:_e/de;return Oe<0&&(Oe+=6),Oe*=60,re*=100,de*=100/255,{h:Oe,s:re,v:de}}($(ne))}function q(ne){return w(ne)?ne:function k(ne){return N(A(ne))}($(ne))}function Y(ne){return Z(ne)?ne:function C(ne){return function Q(ne){const ue=ne.l,te=ne.a,ie=ne.b,fe=Math.sqrt(te*te+ie*ie);let _e=Math.atan2(ie,te);return _e=_e>0?_e:_e+2*Math.PI,{l:ue,c:fe,h:_e}}(N(A(ne)))}($(ne))}},31385:(He,Pe,g)=>{"use strict";function T(x){}function Z(x){return()=>x}g.d(Pe,{Bg:()=>T,sM:()=>Z}),g(67087)},60215:(He,Pe,g)=>{"use strict";g.d(Pe,{Mr:()=>se,x9:()=>V});var E=g(67087);const T=new Set;function se(W,A,U={}){if((0,E.Z)("esri-deprecation-warnings")){const{moduleName:N}=U;V(W,"Property: "+(N?N+"::":"")+A,U)}}function V(W,A,U={}){if((0,E.Z)("esri-deprecation-warnings")){const{replacement:N,version:J,see:Q,warnOnce:G}=U;let k=A;N&&(k+=`\n\t\u{1f6e0}\ufe0f Replacement: ${N}`),J&&(k+=`\n\t\u2699\ufe0f Version: ${J}`),Q&&(k+=`\n\t\u{1f517} See ${Q} for more details.`),function w(W,A,U=!1){U&&T.has(A)||(U&&T.add(A),W.warn(`\u{1f6d1} DEPRECATED - ${A}`))}(W,k,G)}}},29322:(He,Pe,g)=>{"use strict";function E(A){return A=A||globalThis.location.hostname,W.some(U=>null!=A?.match(U))}function T(A,U){return A&&(U=U||globalThis.location.hostname)?null!=U.match(Z)||null!=U.match(se)?A.replace("static.arcgis.com","staticdev.arcgis.com"):null!=U.match(x)||null!=U.match(V)?A.replace("static.arcgis.com","staticqa.arcgis.com"):A:A}g.d(Pe,{XO:()=>E,pJ:()=>T});const Z=/^devext.arcgis.com$/,x=/^qaext.arcgis.com$/,se=/^[\w-]*\.mapsdevext.arcgis.com$/,V=/^[\w-]*\.mapsqa.arcgis.com$/,W=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,Z,x,/^jsapps.esri.com$/,se,V]},15079:(He,Pe,g)=>{"use strict";function E(W){return"string"==typeof W?document.getElementById(W):W??null}function T(W){for(;W.hasChildNodes();)W.removeChild(W.firstChild)}function Z(W,A){const U=A.parentNode;U&&U.insertBefore(W,A)}function x(W,A){for(;;){const U=W.firstChild;if(!U)break;A.appendChild(U)}}g.d(Pe,{L7:()=>E,Vt:()=>Z,YD:()=>x,cS:()=>T}),(()=>{if("function"==typeof Element.prototype.closest)return(A,U)=>A.closest(U);Element.prototype.matches||Element})()},83627:(He,Pe,g)=>{"use strict";function E(V){return V&&("function"==typeof V.on||"function"==typeof V.addEventListener)}function T(V,W,A){if(!E(V))throw new TypeError("target is not a Evented or EventTarget object");if("on"in V)return V.on(W,A);if(Array.isArray(W)){const U=W.slice();for(const N of U)V.addEventListener(N,A);return{remove(){for(const N of U)V.removeEventListener(N,A)}}}return V.addEventListener(W,A),{remove(){V.removeEventListener(W,A)}}}function w(V,W,A){if(!E(V))throw new TypeError("target is not a Evented or EventTarget object");if("once"in V)return V.once(W,A);const U=T(V,W,N=>{U.remove(),A.call(V,N)});return{remove(){U.remove()}}}g.d(Pe,{IH:()=>w,kK:()=>se,on:()=>T,vT:()=>E});const x={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function se({key:V}){return x[V]||V}},70120:(He,Pe,g)=>{"use strict";g.d(Pe,{AL:()=>T,kB:()=>w});var E=g(53661);function T(W){return w(()=>W.forEach(A=>(0,E.pC)(A)&&A.remove()))}function w(W){return{remove:()=>{W&&(W(),W=void 0)}}}},67087:(He,Pe,g)=>{"use strict";let E;function T(w){return"function"==typeof E[w]?E[w]=E[w](globalThis):E[w]}g.d(Pe,{Z:()=>T}),E=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},T.add=(w,Z,x,se)=>((se||void 0===E[w])&&(E[w]=Z),x&&T(w)),T.cache=E,T.add("esri-deprecation-warnings",!0),(()=>{T.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const w=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(T.add("host-browser",w),T.add("host-node","object"==typeof globalThis.process&&globalThis.process.versions?.node&&globalThis.process.versions.v8),T.add("dom",w),T("host-browser")){const Z=navigator,x=Z.userAgent,se=Z.appVersion,V=parseFloat(se);if(T.add("wp",parseFloat(x.split("Windows Phone")[1])||void 0),T.add("msapp",parseFloat(x.split("MSAppHost/")[1])||void 0),T.add("khtml",se.includes("Konqueror")?V:void 0),T.add("edge",parseFloat(x.split("Edge/")[1])||void 0),T.add("opr",parseFloat(x.split("OPR/")[1])||void 0),T.add("webkit",!T("wp")&&!T("edge")&&parseFloat(x.split("WebKit/")[1])||void 0),T.add("chrome",!T("edge")&&!T("opr")&&parseFloat(x.split("Chrome/")[1])||void 0),T.add("android",!T("wp")&&parseFloat(x.split("Android ")[1])||void 0),T.add("safari",!se.includes("Safari")||T("wp")||T("chrome")||T("android")||T("edge")||T("opr")?void 0:parseFloat(se.split("Version/")[1])),T.add("mac",se.includes("Macintosh")),!T("wp")&&x.match(/(iPhone|iPod|iPad)/)){const W=RegExp.$1.replace(/P/,"p"),A=x.match(/OS ([\d_]+)/)?RegExp.$1:"1",U=parseFloat(A.replace(/_/,".").replace(/_/g,""));T.add(W,U),T.add("ios",U)}T("webkit")||(!x.includes("Gecko")||T("wp")||T("khtml")||T("edge")||T.add("mozilla",V),T("mozilla")&&T.add("ff",parseFloat(x.split("Firefox/")[1]||x.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const w=navigator.userAgent,Z=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(w),x=/iPhone/i.test(w);Z&&T.add("esri-mobile",Z),x&&T.add("esri-iPhone",x),T.add("esri-geolocation",!!navigator.geolocation)}T.add("esri-wasm","WebAssembly"in globalThis),T.add("esri-shared-array-buffer",()=>{const w="SharedArrayBuffer"in globalThis,Z=!1===globalThis.crossOriginIsolated;return w&&!Z}),T.add("wasm-simd",()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))),T.add("esri-atomics","Atomics"in globalThis),T.add("esri-workers","Worker"in globalThis),T.add("web-feat:cache","caches"in globalThis),T.add("esri-workers-arraybuffer-transfer",!T("safari")||Number(T("safari"))>=12),T.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),T.add("featurelayer-simplify-payload-size-factors",[1,1,4]),T.add("featurelayer-snapshot-enabled",!0),T.add("featurelayer-snapshot-point-min-threshold",8e4),T.add("featurelayer-snapshot-point-max-threshold",4e5),T.add("featurelayer-snapshot-point-coverage",.1),T.add("featurelayer-advanced-symbols",!1),T.add("featurelayer-pbf",!0),T.add("featurelayer-pbf-statistics",!1),T.add("feature-layers-workers",!0),T.add("feature-polyline-generalization-factor",1),T.add("mapview-transitions-duration",200),T.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),T.add("mapserver-pbf-version-support",10.81),T.add("mapservice-popup-identify-max-tolerance",20),T.add("heatmap-allow-raster-fallback",!0),T.add("heatmap-force-raster",!1),T("host-webworker")||T("host-browser")&&(T.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),T.add("esri-image-decode",()=>{if("decode"in new Image){const w=new Image;return w.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void w.decode().then(()=>{T.add("esri-image-decode",!0,!0,!0)}).catch(()=>{T.add("esri-image-decode",!1,!0,!0)})}return!1}),T.add("esri-url-encodes-apostrophe",()=>{const w=window.document.createElement("a");return w.href="?'",w.href.includes("?%27")}))})()},91800:(He,Pe,g)=>{"use strict";function E(Z){const x=[];return function*(){yield*x;for(const se of Z)x.push(se),yield se}}function T(Z,x){for(const se of Z)if(null!=se&&x(se))return se}function w(Z){return null!=Z&&"function"==typeof Z[Symbol.iterator]}g.d(Pe,{Fs:()=>E,TW:()=>w,sE:()=>T})},63321:(He,Pe,g)=>{"use strict";g.d(Pe,{X:()=>T,w:()=>w});var E=g(44054);class T{constructor(x,se={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=x,this._options=se,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(x),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=V=>this.fromJSON(V),this.write=(V,W,A)=>{const U=this.toJSON(V);void 0!==U&&(0,E.RB)(A,U,W)},this.write.isJSONMapWriter=!0}toJSON(x){if(null==x)return null;if(this._apiToJSON.hasOwnProperty(x)){const se=this._apiToJSON[x];return this._options.useNumericKeys?+se:se}return this._options.ignoreUnknown?void 0:x}fromJSON(x){return null!=x&&this._jsonToAPI.hasOwnProperty(x)?this._jsonToAPI[x]:this._options.ignoreUnknown?void 0:x}_invertMap(x){const se={};for(const V in x)se[x[V]]=V;return se}_getKeysSorted(x){const se=[];for(const V in x)se.push(V);return se.sort(),se}}function w(){return function(Z,x){return new T(Z,{ignoreUnknown:!0,...x})}}},88684:(He,Pe,g)=>{"use strict";g.d(Pe,{Vo:()=>se,d9:()=>x,fS:()=>J,y7:()=>Q,yd:()=>Z});var E=g(19420),T=g(53661),w=g(13878);function Z(C,D){let F;if(D)for(F in C)C.hasOwnProperty(F)&&(void 0===C[F]?delete C[F]:C[F]instanceof Object&&Z(C[F],!0));else for(F in C)C.hasOwnProperty(F)&&void 0===C[F]&&delete C[F];return C}function x(C){if(!C||"object"!=typeof C||"function"==typeof C)return C;const D=N(C);if((0,T.pC)(D))return D;if(V(C))return C.clone();if(W(C))return C.map(x);if(A(C))return C.clone();const F={};for(const B of Object.getOwnPropertyNames(C))F[B]=x(C[B]);return F}function se(C){if(!C||"object"!=typeof C||"function"==typeof C||"HTMLElement"in globalThis&&C instanceof HTMLElement)return C;const D=N(C);if((0,T.pC)(D))return D;if(W(C)){let F=!0;const B=C.map($=>{const X=se($);return null!=$&&null==X&&(F=!1),X});return F?B:null}if(V(C))return C.clone();if(!A(C)){const F=new(Object.getPrototypeOf(C).constructor);for(const B of Object.getOwnPropertyNames(C)){const $=C[B],X=se($);if(null!=$&&null==X)return null;F[B]=X}return F}return null}function V(C){return"function"==typeof C.clone}function W(C){return"function"==typeof C.map&&"function"==typeof C.forEach}function A(C){return"function"==typeof C.notifyChange&&"function"==typeof C.watch}function U(C){if("[object Object]"!==Object.prototype.toString.call(C))return!1;const D=Object.getPrototypeOf(C);return null===D||D===Object.prototype}function N(C){if((0,w.W0)(C)||(0,w.lq)(C)||(0,w.KZ)(C)||(0,w.z3)(C)||(0,w.Uc)(C)||(0,w.Hx)(C)||(0,w.ZY)(C)||(0,w.xZ)(C)||(0,w.fS)(C))return C.slice();if(C instanceof Date)return new Date(C.getTime());if(C instanceof ArrayBuffer)return C.slice(0,C.byteLength);if(C instanceof Map){const D=new Map;for(const[F,B]of C)D.set(F,x(B));return D}if(C instanceof Set){const D=new Set;for(const F of C)D.add(x(F));return D}return null}function J(C,D){return C===D||"number"==typeof C&&isNaN(C)&&"number"==typeof D&&isNaN(D)||"function"==typeof(C||{}).getTime&&"function"==typeof(D||{}).getTime&&C.getTime()===D.getTime()||!1}function Q(C,D){return C===D||(null==C||"string"==typeof C?C===D:"number"==typeof C?C===D||"number"==typeof D&&isNaN(C)&&isNaN(D):C instanceof Date?D instanceof Date&&C.getTime()===D.getTime():Array.isArray(C)?Array.isArray(D)&&(0,E.fS)(C,D):C instanceof Set?D instanceof Set&&function k(C,D){if(C.size!==D.size)return!1;for(const F of C)if(!D.has(F))return!1;return!0}(C,D):C instanceof Map?D instanceof Map&&function z(C,D){if(C.size!==D.size)return!1;for(const[F,B]of C){const $=D.get(F);if($!==B||void 0===$&&!D.has(F))return!1}return!0}(C,D):!!U(C)&&U(D)&&function G(C,D){if(null===C||null===D)return!1;const F=Object.keys(C);if(null===D||Object.keys(D).length!==F.length)return!1;for(const B of F)if(C[B]!==D[B]||!Object.prototype.hasOwnProperty.call(D,B))return!1;return!0}(C,D))}},93205:(He,Pe,g)=>{"use strict";g.d(Pe,{G:()=>se,w:()=>W});var E=g(71670),T=g(11823),w=g(97621),Z=g(48500),x=g(53661);function se(N,J){return V.apply(this,arguments)}function V(){return(V=(0,E.Z)(function*(N,J){return yield N.load(),W(N,J)})).apply(this,arguments)}function W(N,J){return A.apply(this,arguments)}function A(){return A=(0,E.Z)(function*(N,J){const Q=[],G=(...z)=>{for(const C of z)(0,x.Wi)(C)||(Array.isArray(C)?G(...C):w.Z.isCollection(C)?C.forEach(D=>G(D)):Z.Z.isLoadable(C)&&Q.push(C))};J(G);let k=null;if(yield(0,T.UI)(Q,function(){var z=(0,E.Z)(function*(C){const D=yield(0,T.q6)(function U(N){return"loadAll"in N&&"function"==typeof N.loadAll}(C)?C.loadAll():C.load());!1!==D.ok||k||(k=D)});return function(C){return z.apply(this,arguments)}}()),k)throw k.error;return N}),A.apply(this,arguments)}},93142:(He,Pe,g)=>{"use strict";g.d(Pe,{BV:()=>Q,Kt:()=>z,Sf:()=>Z,Vl:()=>J,ZF:()=>k,_3:()=>Oe,fp:()=>W,jE:()=>ie,oK:()=>he,oc:()=>de,t7:()=>U,uZ:()=>x,wt:()=>V});var E=g(92950);g(71943);const w=new Float32Array(1);function Z(re){--re;for(let le=1;le<32;le<<=1)re|=re>>le;return re+1}function x(re,le,ce){return Math.min(Math.max(re,le),ce)}function V(re){return 0==(re&re-1)}function W(re){return re--,re|=re>>1,re|=re>>2,re|=re>>4,re|=re>>8,re|=re>>16,++re}function U(re,le,ce){return re+(le-re)*ce}function J(re){return re*Math.PI/180}function Q(re){return 180*re/Math.PI}function k(re){return Math.acos(x(re,-1,1))}function z(re){return Math.asin(x(re,-1,1))}function C(re,le,ce=1e-6){return re===le||!(!Number.isFinite(re)||!Number.isFinite(le))&&(re>le?re-le:le-re)<=ce}const D=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));const $=BigInt("1000000");function he(re){return ne(Math.max(-Oe,Math.min(re,Oe)))}function ne(re){return w[0]=re,w[0]}function ie(re,le){const ce=(0,E.l)(re),ve=z(re[2]/ce),Te=Math.atan2(re[1]/ce,re[0]/ce);return(0,E.s)(le,ce,ve,Te),le}function de(re){const ce=re[3]*re[3]+re[4]*re[4]+re[5]*re[5],ve=re[6]*re[6]+re[7]*re[7]+re[8]*re[8];return!(C(re[0]*re[0]+re[1]*re[1]+re[2]*re[2],1)&&C(ce,1)&&C(ve,1))}!function q(re){const le=function F(re){return D.setFloat64(0,re),D.getBigInt64(0)}(re=Math.abs(re)),ce=function B(re){return D.setBigInt64(0,re),D.getFloat64(0)}(le<=$?$:le-$);return Math.abs(re-ce)}(1);const Oe=ne(34028234663852886e22)},53661:(He,Pe,g)=>{"use strict";g.d(Pe,{Fd:()=>B,IM:()=>k,JR:()=>$,M2:()=>Q,O3:()=>A,Pt:()=>U,R2:()=>X,RY:()=>z,SC:()=>J,U2:()=>ae,Wg:()=>se,Wi:()=>w,_W:()=>C,hw:()=>G,j0:()=>he,lV:()=>Y,pC:()=>T,s3:()=>W,wN:()=>D,yl:()=>N,yw:()=>x});const E=null;function T(ne){return null!=ne}function w(ne){return null==ne}function x(ne,ue){return T(ne)?ue(ne):E}function se(ne){return ne}function W(ne,ue){return A(ne,ue),ne}function A(ne,ue){if(w(ne))throw new Error(ue??"value is None")}function U(ne,ue){return T(ne)?ne:"function"==typeof ue?ue():ue}function N(ne,ue){return T(ne)?ne:ue}function J(ne){return T(ne)&&ne.destroy(),null}function Q(ne){return T(ne)&&ne.dispose(),null}function G(ne){return T(ne)&&ne.remove(),null}function k(ne){return T(ne)&&ne.abort(),null}function z(ne){return T(ne)&&ne.release(),null}function C(ne,ue,te){return T(ne)&&T(ue)?T(te)?te(ne,ue):ne.equals(ue):ne===ue}function D(ne){return null}function B(ne,ue){const te=new Array;for(const ie of ne)te.push(X(ie,null,ue));return te}function $(ne,ue){for(const te of ne)x(te,ue)}function X(ne,ue,te){return T(ne)?te(ne):ue}function Y(ne){return ne.filter(ue=>T(ue))}function ae(ne,...ue){let te=ne;for(let ie=0;ie<ue.length&&te;++ie)te=te[ue[ie]];return te}function he(ne){return ne}},16746:(He,Pe,g)=>{"use strict";g.d(Pe,{Y:()=>T});const E=[];function T(w){E.push(w),1===E.length&&queueMicrotask(()=>{const Z=E.slice();E.length=0;for(const x of Z)x()})}},44054:(He,Pe,g)=>{"use strict";g.d(Pe,{RB:()=>Z,RH:()=>T,hS:()=>w});var E=g(88684);function T(V,W,A=!1){return se(V,W,A)}function w(V,W){if(null!=W)return W[V]||x(V.split("."),!1,W)}function Z(V,W,A){const U=V.split("."),N=U.pop(),J=x(U,!0,A);J&&N&&(J[N]=W)}function x(V,W,A){let U=A;for(const N of V){if(null==U)return;if(!(N in U)){if(!W)return;U[N]={}}U=U[N]}return U}function se(V,W,A){return W?Object.keys(W).reduce((U,N)=>{let J=U[N],Q=W[N];return J===Q?U:void 0===J?(U[N]=(0,E.d9)(Q),U):(Array.isArray(Q)||Array.isArray(U)?(J=U[N]=J?Array.isArray(J)?J.concat():[J]:[],Q&&(Array.isArray(Q)||(Q=[Q]),A?Q.forEach(G=>{J.includes(G)||J.push(G)}):U[N]=Q.concat())):Q&&"object"==typeof Q?U[N]=se(J,Q,A):U.hasOwnProperty(N)&&!W.hasOwnProperty(N)||(U[N]=Q),U)},V||{}):V}},74617:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>V});var w,W,E=g(67087),T=g(5261);(W=w||(w={}))[W.varint=0]="varint",W[W.fixed64=1]="fixed64",W[W.delimited=2]="delimited",W[W.fixed32=5]="fixed32",W[W.unknown=99]="unknown";const Z=4294967296,x=new TextDecoder("utf-8"),se=(0,E.Z)("safari")||(0,E.Z)("ios")?6:(0,E.Z)("ff")?12:32;class V{constructor(A,U,N=0,J=(A?A.byteLength:0)){this._tag=0,this._dataType=w.unknown,this._init(A,U,N,J)}_init(A,U,N,J){this._data=A,this._dataView=U,this._pos=N,this._end=J}asUnsafe(){return this}clone(){return new V(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(A){this._pos=A}nextTag(A){for(;;){if(this._pos===this._end)return!1;const U=this._decodeVarint();if(this._tag=U>>3,this._dataType=7&U,!A||A===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const A=this._decodeVarint();return this._tag=A>>3,this._dataType=7&A,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let A=4294967295;return A=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?A:(A=(A|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?A:(A=(A|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?A:(A=(A|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?A:(A=(A|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?A:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const A=this.getUInt32();if(void 0!==A)return A>>>1^-(1&A)|0}getSInt64(){return this._decodeSVarint()}getBool(){const A=0!==this._data[this._pos];return this._skip(1),A}getEnum(){return this._decodeVarint()}getFixed64(){const A=this._dataView,U=this._pos,N=A.getUint32(U,!0)+A.getUint32(U+4,!0)*Z;return this._skip(8),N}getSFixed64(){const A=this._dataView,U=this._pos,N=A.getUint32(U,!0)+A.getInt32(U+4,!0)*Z;return this._skip(8),N}getDouble(){const A=this._dataView.getFloat64(this._pos,!0);return this._skip(8),A}getFixed32(){const A=this._dataView.getUint32(this._pos,!0);return this._skip(4),A}getSFixed32(){const A=this._dataView.getInt32(this._pos,!0);return this._skip(4),A}getFloat(){const A=this._dataView.getFloat32(this._pos,!0);return this._skip(4),A}getString(){const A=this._getLength(),U=this._pos,N=this._toString(this._data,U,U+A);return this._skip(A),N}getBytes(){const A=this._getLength(),U=this._pos,N=this._toBytes(this._data,U,U+A);return this._skip(A),N}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(A,U,N,J){const Q=this.getMessage(),G=A(Q,U,N,J);return Q.release(),G}processMessage(A){const U=this.getMessage(),N=A(U);return U.release(),N}getMessage(){const A=this._getLength(),U=V.pool.acquire();return U._init(this._data,this._dataView,this._pos,this._pos+A),this._skip(A),U}release(){V.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case w.varint:this._decodeVarint();break;case w.fixed64:this._skip(8);break;case w.delimited:this._skip(this._getLength());break;case w.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(A){this._skip(A)}_skip(A){if(this._pos+A>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=A}_decodeVarint(){const A=this._data;let U=this._pos,N=0,J=0;if(this._end-U>=10)do{if(J=A[U++],N|=127&J,0==(128&J)||(J=A[U++],N|=(127&J)<<7,0==(128&J))||(J=A[U++],N|=(127&J)<<14,0==(128&J))||(J=A[U++],N|=(127&J)<<21,0==(128&J))||(J=A[U++],N+=268435456*(127&J),0==(128&J))||(J=A[U++],N+=34359738368*(127&J),0==(128&J))||(J=A[U++],N+=4398046511104*(127&J),0==(128&J))||(J=A[U++],N+=562949953421312*(127&J),0==(128&J))||(J=A[U++],N+=72057594037927940*(127&J),0==(128&J))||(J=A[U++],N+=0x8000000000000000*(127&J),0==(128&J)))break;throw new Error("Varint too long!")}while(0);else{let Q=1;for(;U!==this._end&&(J=A[U],0!=(128&J));)++U,N+=(127&J)*Q,Q*=128;if(U===this._end)throw new Error("Varint overrun!");++U,N+=J*Q}return this._pos=U,N}_decodeSVarint(){const A=this._data;let U=this._pos,N=0,J=0;const Q=1&A[U];if(this._end-U>=10)do{if(J=A[U++],N|=127&J,0==(128&J)||(J=A[U++],N|=(127&J)<<7,0==(128&J))||(J=A[U++],N|=(127&J)<<14,0==(128&J))||(J=A[U++],N|=(127&J)<<21,0==(128&J))||(J=A[U++],N+=268435456*(127&J),0==(128&J))||(J=A[U++],N+=34359738368*(127&J),0==(128&J))||(J=A[U++],N+=4398046511104*(127&J),0==(128&J))||(J=A[U++],N+=562949953421312*(127&J),0==(128&J))||(J=A[U++],N+=72057594037927940*(127&J),0==(128&J))||(J=A[U++],N+=0x8000000000000000*(127&J),0==(128&J)))break;throw new Error("Varint too long!")}while(0);else{let G=1;for(;U!==this._end&&(J=A[U],0!=(128&J));)++U,N+=(127&J)*G,G*=128;if(U===this._end)throw new Error("Varint overrun!");++U,N+=J*G}return this._pos=U,Q?-(N+1)/2:N/2}_getLength(){if(this._dataType!==w.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(A,U,N){if((N=Math.min(this._end,N))-U>se){const G=A.subarray(U,N);return x.decode(G)}let J="",Q="";for(let G=U;G<N;++G){const k=A[G];128&k?Q+="%"+k.toString(16):(J+=decodeURIComponent(Q)+String.fromCharCode(k),Q="")}return Q.length&&(J+=decodeURIComponent(Q)),J}_toBytes(A,U,N){return N=Math.min(this._end,N),new Uint8Array(A.buffer,U,N-U)}}V.pool=new T.Z(V,void 0,W=>{W._data=null,W._dataView=null})},30801:(He,Pe,g)=>{"use strict";g.d(Pe,{$F:()=>D,D_:()=>$,Ds:()=>re,H9:()=>z,Hc:()=>G,Hl:()=>F,R8:()=>X,WW:()=>te,Yn:()=>ve,as:()=>ne,dD:()=>he,e4:()=>fe,fu:()=>C,gx:()=>Oe,hh:()=>le,k_:()=>J,r9:()=>k,y8:()=>de,zE:()=>N});var E=g(71670),T=g(75419),Z=(g(60215),g(32995)),x=g(83627),V=(g(28191),g(53661));function N(ge="Aborted"){return new Z.Z("AbortError",ge)}function J(ge,Ae="Aborted"){if(G(ge))throw N(Ae)}function Q(ge){return(0,V.pC)(ge)?"aborted"in ge?ge:ge.signal:ge}function G(ge){const Ae=Q(ge);return(0,V.pC)(Ae)&&Ae.aborted}function k(ge){if($(ge))throw ge}function z(ge){if(!$(ge))throw ge}function C(ge,Ae){const De=Q(ge);if(!(0,V.Wi)(De)){if(!De.aborted)return(0,x.IH)(De,"abort",()=>Ae());Ae()}}function D(ge,Ae){const De=Q(ge);if(!(0,V.Wi)(De))return J(De),(0,x.IH)(De,"abort",()=>Ae(N()))}function F(ge,Ae){const De=Q(Ae);return(0,V.Wi)(De)?ge:new Promise((Se,me)=>{let ye=C(Ae,()=>me(N()));const we=()=>ye=(0,V.hw)(ye);ge.then(we,we),ge.then(Se,me)})}function $(ge){return"AbortError"===ge?.name}function X(ge){return q.apply(this,arguments)}function q(){return(q=(0,E.Z)(function*(ge){try{return yield ge}catch(Ae){if(!$(Ae))throw Ae;return}})).apply(this,arguments)}function he(){let ge=null;const Ae=new Promise((De,Se)=>{ge={promise:void 0,resolve:De,reject:Se}});return ge.promise=Ae,ge}function ne(ge){return ue.apply(this,arguments)}function ue(){return(ue=(0,E.Z)(function*(ge){if(!ge)return;if("function"!=typeof ge.forEach){const De=Object.keys(ge),Se=De.map(we=>ge[we]),me=yield ne(Se),ye={};return De.map((we,$e)=>ye[we]=me[$e]),ye}const Ae=ge;return new Promise(De=>{const Se=[];let me=Ae.length;0===me&&De(Se),Ae.forEach(ye=>{const we={promise:ye||Promise.resolve(ye)};Se.push(we),we.promise.then($e=>{we.value=$e}).catch($e=>{we.error=$e}).then(()=>{--me,0===me&&De(Se)})})})})).apply(this,arguments)}function te(ge){return ie.apply(this,arguments)}function ie(){return(ie=(0,E.Z)(function*(ge){return(yield ne(ge)).filter(Ae=>!!Ae.value).map(Ae=>Ae.value)})).apply(this,arguments)}function fe(ge,Ae,De){const Se=new AbortController;return C(De,()=>Se.abort()),new Promise((me,ye)=>{let we=setTimeout(()=>{we=0,me(Ae)},ge);C(Se,()=>{we&&(clearTimeout(we),ye(N()))})})}function de(ge){return ge&&"function"==typeof ge.then}function Oe(ge){return de(ge)?ge:Promise.resolve(ge)}function re(ge,Ae=-1){let De,Se,me,ye,we=null;const $e=(...Ce)=>{if(De){Se=Ce,ye&&ye.reject(N()),ye=he();const oe=(0,V.j0)(ye.promise);if(we){const be=we;we=null,be.abort()}return oe}if(me=ye||he(),ye=null,Ae>0){const oe=new AbortController;De=Oe(ge(...Ce,oe.signal));const be=De;fe(Ae).then(()=>{De===be&&(ye?oe.abort():we=oe)})}else De=1,De=Oe(ge(...Ce));const Ie=()=>{const oe=Se;Se=me=De=we=null,null!=oe&&$e(...oe)},je=De,Je=me;return je.then(Ie,Ie),je.then(Je.resolve,Je.reject),(0,V.j0)(Je.promise)};return $e}function le(){let ge,Ae;const De=new Promise((me,ye)=>{ge=me,Ae=ye}),Se=me=>{ge(me)};return Se.resolve=me=>ge(me),Se.reject=me=>Ae(me),Se.timeout=(me,ye)=>T.m.setTimeout(()=>Se.reject(ye),me),Se.promise=De,Se}function ve(ge){return Te.apply(this,arguments)}function Te(){return(Te=(0,E.Z)(function*(ge){yield Promise.resolve(),J(ge)})).apply(this,arguments)}},7521:(He,Pe,g)=>{"use strict";g.d(Pe,{N1:()=>J,YP:()=>V,Z_:()=>C,gx:()=>W,nn:()=>D,on:()=>U,tX:()=>F});var E=g(83627),T=g(70120),w=g(53661),Z=g(30801),x=g(11225);function V(B,$,X={}){return A(B,$,X,G)}function W(B,$,X={}){return A(B,$,X,k)}function A(B,$,X={},q){let Y=null;const ae=X.once?(he,ne)=>{q(he)&&((0,w.hw)(Y),$(he,ne))}:(he,ne)=>{q(he)&&$(he,ne)};if(Y=(0,x.aQ)(B,ae,X.sync,X.equals),X.initial){const he=B();ae(he,he)}return Y}function U(B,$,X,q={}){let Y=null,ae=null,he=null;function ne(){Y&&ae&&(ae.remove(),q.onListenerRemove?.(Y),Y=null,ae=null)}function ue(ie){q.once&&q.once&&(0,w.hw)(he),X(ie)}const te=V(B,(ie,fe)=>{ne(),(0,E.vT)(ie)&&(Y=ie,ae=(0,E.on)(ie,$,ue),q.onListenerAdd?.(ie))},{sync:q.sync,initial:!0});return he=(0,T.kB)(()=>{te.remove(),ne()}),he}function J(B,$){return function Q(B,$,X){if((0,Z.Hc)(X))return Promise.reject((0,Z.zE)());const q=B();if($?.(q))return Promise.resolve(q);let Y=null;function ae(){Y=(0,w.hw)(Y)}return new Promise((he,ne)=>{Y=(0,T.AL)([(0,Z.fu)(X,()=>{ae(),ne((0,Z.zE)())}),A(B,ue=>{ae(),he(ue)},{sync:!1,once:!0},$??G)])})}(B,k,$)}function G(B){return!0}function k(B){return!!B}g(50147);const C={sync:!0},D={initial:!0},F={sync:!0,initial:!0}},91409:(He,Pe,g)=>{"use strict";g.d(Pe,{A:()=>D,MU:()=>ne,Os:()=>C});var E=g(53661),T=g(16746),w=g(43701),Z=g(22286),x=g(30801),se=g(69354);class V{constructor(_e){this.phases=_e,this.paused=!1,this.ticks=-1,this.removed=!1}}class W{constructor(_e){this.callback=_e,this.isActive=!0}remove(){this.isActive=!1}}let A=0;const N={time:(0,se.HA)(0),deltaTime:(0,se.HA)(0),elapsedFrameTime:(0,se.HA)(0),frameDuration:(0,se.HA)(0)},J=["prepare","preRender","render","postRender","update","finish"],Q=[],G=new Z.Z;class k{constructor(_e){this._task=_e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const z={frameTasks:G,willDispatch:!1,clearFrameTasks:function B(fe=!1){G.forAll(_e=>{_e.removed=!0}),fe&&ae()},dispatch:he,executeFrameTasks:function q(fe){const _e=(0,se.HA)(fe-A);A=fe;const de=1e3/60,Oe=Math.max(0,_e-de);N.time=fe,N.frameDuration=(0,se.HA)(de-Oe);for(let re=0;re<J.length;re++){const le=performance.now(),ce=J[re];G.forAll(ve=>{ve.paused||ve.removed||(0===re&&ve.ticks++,ve.phases[ce]&&(N.elapsedFrameTime=(0,se.HA)(performance.now()-fe),N.deltaTime=0===ve.ticks?(0,se.HA)(0):_e,ve.phases[ce]?.call(ve,N)))}),te[re].record(performance.now()-le)}ae(),ie.record(performance.now()-fe)}};function C(fe){const _e=new W(fe);return Q.push(_e),z.willDispatch||(z.willDispatch=!0,(0,T.Y)(he)),_e}function D(fe){const _e=new V(fe);return G.push(_e),null==F&&(A=performance.now(),F=requestAnimationFrame(X)),new k(_e)}let F=null;function X(){const fe=performance.now();F=null,F=G.length>0?requestAnimationFrame(X):null,z.executeFrameTasks(fe)}const Y=new Z.Z;function ae(){G.forAll(fe=>{fe.removed&&Y.push(fe)}),G.removeUnorderedMany(Y.data,Y.length),Y.clear()}function he(){for(;Q.length;){const fe=(0,E.j0)(Q.shift());fe.isActive&&fe.callback()}z.willDispatch=!1}function ne(fe=1,_e){const de=(0,x.hh)(),Oe=()=>{(0,x.Hc)(_e)?de.reject((0,x.zE)()):0===fe?de():(--fe,(0,T.Y)(()=>Oe()))};return Oe(),de.promise}const te=J.map(fe=>new w.Z(fe)),ie=new w.Z("total")},55798:(He,Pe,g)=>{"use strict";g.d(Pe,{F2:()=>Z,Wz:()=>x,s1:()=>W,t_:()=>se,vW:()=>V});const E=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,T="screenUtils.toPt: input not recognized!",w=96;function Z(C){return C?C/72*w:0}function x(C){return C?72*C/w:0}function se(C){if("string"==typeof C){const D=C.match(E);if(D){const F=Number(D[1]),B=D[3]&&D[3].toLowerCase(),$="-"===C.charAt(0),X="px"===B?x(F):F;return $?-X:X}return console.warn(T),null}return C}function V(C=0,D=0){return{x:C,y:D}}function W(C=0,D=0){return[C,D]}},96204:(He,Pe,g)=>{"use strict";g.d(Pe,{E:()=>w,_:()=>x});var E=g(71670),T=g(53661);function w(se,V){return Z.apply(this,arguments)}function Z(){return(Z=(0,E.Z)(function*(se,V){const{WhereClause:W}=yield Promise.all([g.e(753),g.e(3918)]).then(g.bind(g,30753));return W.create(se,V)})).apply(this,arguments)}function x(se,V){return(0,T.pC)(se)?(0,T.pC)(V)?`(${se}) AND (${V})`:se:V}},3758:(He,Pe,g)=>{"use strict";g.d(Pe,{Cb:()=>V,Qs:()=>x,gx:()=>Z,hP:()=>se});var E=g(44054);const T=/\{([^\}]+)\}/g;function w(A){return A??""}function Z(A,U){return A.replace(T,"object"==typeof U?(N,J)=>w((0,E.hS)(J,U)):(N,J)=>w(U(J)))}function x(A,U){return A.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,N=>U&&U.includes(N)?N:`\\${N}`)}function se(A){let U=0;for(let N=0;N<A.length;N++)U=(U<<5)-U+A.charCodeAt(N),U|=0;return U}function V(A){return(new DOMParser).parseFromString(A||"","text/html").body.innerText||""}},55625:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>J,z:()=>Q});var E=g(18100),T=g(97621),w=g(40434),Z=g(31882),V=(g(67087),g(28191),g(53661)),W=g(9497),N=(g(83382),g(19420),g(20891));let J=class extends((0,Z.p)(T.Z)){constructor(G){super(G),this.handles.add([this.on("before-add",k=>{(0,V.Wi)(k.item)&&k.preventDefault()}),this.on("after-add",k=>this._own(k.item)),this.on("after-remove",k=>this._release(k.item))])}get owner(){return this._get("owner")}set owner(G){G!==this._get("owner")&&(this._releaseAll(),this._set("owner",G),this._ownAll())}_ownAll(){for(const G of this.items)this._own(G)}_releaseAll(){for(const G of this.items)this._release(G)}_createNewInstance(G){return this.itemType?new(T.Z.ofType(this.itemType.Type))(G):new T.Z(G)}};function Q(G,k){return{type:G,cast:w.R,set(z){const C=(0,w.Z)(z,this._get(k),G);C.owner=this,this._set(k,C)}}}(0,E._)([(0,W.Cb)()],J.prototype,"owner",null),J=(0,E._)([(0,N.j)("esri.core.support.OwningCollection")],J)},67353:(He,Pe,g)=>{"use strict";g.d(Pe,{t:()=>A});var E=g(18100),T=g(6365),w=g(40070),Z=g(53661),x=g(7521),se=g(91409),V=g(9497),W=g(20891);let A=class extends T.Z{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new w.Z,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(N,J,Q={}){return this._installWatch(N,J,Q,x.YP)}addWhen(N,J,Q={}){return this._installWatch(N,J,Q,x.gx)}addOnCollectionChange(N,J,{initial:Q=!1,final:G=!1}={}){const k=++this._handleId;return this._handles.add([(0,x.on)(N,"after-changes",this._createSyncUpdatingCallback(),x.Z_),(0,x.on)(N,"change",J,{onListenerAdd:Q?z=>J({added:z.toArray(),removed:[]}):void 0,onListenerRemove:G?z=>J({added:[],removed:z.toArray()}):void 0})],k),{remove:()=>this._handles.remove(k)}}addPromise(N){if((0,Z.Wi)(N))return N;const J=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(N)&&(0!==this._pendingPromises.size||this._handles.has(U)||this._set("updating",!1))}},J),this._pendingPromises.add(N),this._set("updating",!0);const Q=()=>this._handles.remove(J);return N.then(Q,Q),N}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(N,J,Q={},G){const k=++this._handleId;Q.sync||this._installSyncUpdatingWatch(N,k);const z=G(N,J,Q);return this._handles.add(z,k),{remove:()=>this._handles.remove(k)}}_installSyncUpdatingWatch(N,J){const Q=this._createSyncUpdatingCallback(),G=(0,x.YP)(N,Q,{sync:!0,equals:()=>!1});return this._handles.add(G,J),G}_createSyncUpdatingCallback(){return()=>{this._handles.remove(U),++this._scheduleHandleId;const N=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add((0,se.Os)(()=>{N===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(U))}),U)}}};(0,E._)([(0,V.Cb)({readOnly:!0})],A.prototype,"updating",void 0),A=(0,E._)([(0,W.j)("esri.core.support.WatchUpdatingTracking")],A);const U=-42},60756:(He,Pe,g)=>{"use strict";function E(T,w,Z,x){let se=null,V=1e3;"number"==typeof w?(V=w,x=Z):(se=w??null,V=Z);let W,A=0;const U=()=>{A=0,T.apply(x,W)},N=(...J)=>{se&&se.apply(x,J),W=J,V?A||(A=setTimeout(U,V)):U()};return N.remove=()=>{A&&(clearTimeout(A),A=0)},N.forceUpdate=()=>{A&&(clearTimeout(A),U())},N.hasPendingUpdates=()=>!!A,N}g.d(Pe,{P:()=>E})},69354:(He,Pe,g)=>{"use strict";function E(x){return x}g.d(Pe,{HA:()=>E})},82588:(He,Pe,g)=>{"use strict";g.d(Pe,{JE:()=>V,Nm:()=>x,rJ:()=>J}),g(67087);const T={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},w={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function x(Q,G,k){const z=new Date(Q.getTime());if(G&&k){const C=w[k],{getter:D,setter:F,multiplier:B}=C;if("months"===k){const $=function Z(Q,G){const k=new Date(Q,G+1,1);return k.setDate(0),k.getDate()}(z.getFullYear(),z.getMonth()+G);z.getDate()>$&&z.setDate($)}z[F](z[D]()+G*B)}return z}function V(Q,G){switch(G){case"milliseconds":return new Date(Q.getTime());case"seconds":return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate(),Q.getHours(),Q.getMinutes(),Q.getSeconds());case"minutes":return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate(),Q.getHours(),Q.getMinutes());case"hours":return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate(),Q.getHours());case"days":return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate());case"weeks":return new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()-Q.getDay());case"months":return new Date(Q.getFullYear(),Q.getMonth(),1);case"years":return new Date(Q.getFullYear(),0,1);case"decades":return new Date(Q.getFullYear()-Q.getFullYear()%10,0,1);case"centuries":return new Date(Q.getFullYear()-Q.getFullYear()%100,0,1);default:return new Date}}function J(Q,G,k){return 0===Q?0:Q*T[G]/T[k]}},13878:(He,Pe,g)=>{"use strict";function E(Q){return Q instanceof ArrayBuffer}function T(Q){return Q&&Q.constructor&&"Int8Array"===Q.constructor.name}function w(Q){return Q&&Q.constructor&&"Uint8Array"===Q.constructor.name}function Z(Q){return Q&&Q.constructor&&"Uint8ClampedArray"===Q.constructor.name}function x(Q){return Q&&Q.constructor&&"Int16Array"===Q.constructor.name}function se(Q){return Q&&Q.constructor&&"Uint16Array"===Q.constructor.name}function V(Q){return Q&&Q.constructor&&"Int32Array"===Q.constructor.name}function W(Q){return Q&&Q.constructor&&"Uint32Array"===Q.constructor.name}function A(Q){return Q&&Q.constructor&&"Float32Array"===Q.constructor.name}function U(Q){return Q&&Q.constructor&&"Float64Array"===Q.constructor.name}g.d(Pe,{DB:()=>J,Hx:()=>V,KZ:()=>Z,Uc:()=>se,W0:()=>T,ZY:()=>W,eP:()=>E,fS:()=>U,lq:()=>w,xZ:()=>A,z3:()=>x});const J=1024},29962:(He,Pe,g)=>{"use strict";g.d(Pe,{D:()=>w});let E=0;function w(){return++E}},82769:(He,Pe,g)=>{"use strict";g.d(Pe,{$C:()=>ge,CN:()=>ft,En:()=>te,Jo:()=>qe,_R:()=>De,c9:()=>me,cM:()=>Se,gV:()=>Ne,hd:()=>W,qE:()=>Ce,ty:()=>Te}),g(67087);var T=g(63321),w=g(53661),Z=g(64004),x=g(86355),se=g(53492),V=g(94009);const W=39.37,A=x.sv.radius*Math.PI/200,U=/UNIT\[([^\]]+)\]\]$/i,N=V.Z,J=/UNIT\[([^\]]+)\]/i,Q=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),G=(0,T.w)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),k=Xe=>Xe*Xe,z=Xe=>Xe*Xe*Xe,C={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:k(.001)},"square-centimeters":{inBaseUnits:k(.01)},"square-decimeters":{inBaseUnits:k(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:k(1e3)},"square-inches":{inBaseUnits:k(.0254)},"square-feet":{inBaseUnits:k(.3048)},"square-yards":{inBaseUnits:k(.9144)},"square-miles":{inBaseUnits:k(1609.344)},"square-us-feet":{inBaseUnits:k(1200/3937)},acres:{inBaseUnits:.0015625*k(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*z(.001)},"cubic-centimeters":{inBaseUnits:1e3*z(.01)},"cubic-decimeters":{inBaseUnits:1e3*z(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*z(1e3)},"cubic-inches":{inBaseUnits:1e3*z(.0254)},"cubic-feet":{inBaseUnits:1e3*z(.3048)},"cubic-yards":{inBaseUnits:1e3*z(.9144)},"cubic-miles":{inBaseUnits:1e3*z(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},D=(()=>{const Xe={};for(const dt in C)for(const Qe in C[dt].units)Xe[Qe]=dt;return Xe})();function ae(Xe){const dt=D[Xe];if(!dt)throw new Error("unknown type");return dt}function ue(Xe,dt=null){return dt=dt||ae(Xe),C[dt].baseUnit===Xe}function te(Xe,dt,Qe){if(dt===Qe)return Xe;const ot=ae(dt);if(ot!==ae(Qe))throw new Error("incompatible units");const ct=ue(dt,ot)?Xe:function F(Xe,dt,Qe){return Xe*C[Qe].units[dt].inBaseUnits}(Xe,dt,ot);return ue(Qe,ot)?ct:function B(Xe,dt,Qe){return Xe/C[Qe].units[dt].inBaseUnits}(ct,Qe,ot)}function Te(Xe,dt,Qe){return te(Xe,dt,"meters")/(Qe*Math.PI/180)}function ge(Xe){return G.fromJSON(Xe.toLowerCase())||null}function De(Xe){if((0,w.pC)(Xe)&&!(0,se.N$)(Xe))return 1;const dt=me(Xe);return dt>1e5?1:dt}function Se(Xe){return me(Xe)>=(0,Z.Iu)(Xe).metersPerDegree?"meters":Ce(Xe)}function me(Xe,dt=x.sv.metersPerDegree){return(0,w.Pt)(function ye(Xe,dt=!1){const Qe=(0,w.pC)(Xe)?Xe.wkid:null,ot=(0,w.pC)(Xe)?Xe.wkt:null;let ct=null;if(Qe){if((0,se.o$)(Qe))return x.yr.metersPerDegree;if((0,se.ME)(Qe))return x.Z1.metersPerDegree;ct=N.values[N[Qe]],!ct&&dt&&Q.has(Qe)&&(ct=A)}else ot&&(be(ot)?ct=we(U.exec(ot),ct):oe(ot)&&(ct=we(J.exec(ot),ct)));return ct}(Xe,!0),dt)}function we(Xe,dt){return Xe&&Xe[1]?$e(Xe[1]):dt}function $e(Xe){return parseFloat(Xe.split(",")[1])}function Ce(Xe){const dt=(0,w.pC)(Xe)?Xe.wkid:null,Qe=(0,w.pC)(Xe)?Xe.wkt:null;let ot=null;if(dt)ot=N.units[N[dt]];else if(Qe){const ct=be(Qe)?U:oe(Qe)?J:null;if(ct){const _t=ct.exec(Qe);_t&&_t[1]&&(ot=function Fe(Xe){const dt=/[\\"\\']{1}([^\\"\\']+)/.exec(Xe);let Qe=dt&&dt[1];if(!Qe||!N.units.includes(Qe)){const ot=$e(Xe);Qe=null;const ct=N.values;for(let _t=0;_t<ct.length;++_t)if(Math.abs(ot-ct[_t])<Ue){Qe=N.units[_t];break}}return Qe}(_t[1]))}}return(0,w.pC)(ot)?ge(ot):null}function oe(Xe){return/^GEOCCS/i.test(Xe)}function be(Xe){return/^PROJCS/i.test(Xe)}const Ue=1e-7,Ne=(0,T.w)()({esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"}),qe=(0,T.w)()({esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"}),ft=(0,T.w)()({esriDUDecimalDegrees:"degrees",esriDURadians:"radians"})},55050:(He,Pe,g)=>{"use strict";g.d(Pe,{$U:()=>_t,AH:()=>Ue,B7:()=>ie,D6:()=>Se,Fv:()=>Ce,HK:()=>be,Hu:()=>ls,Ie:()=>Kt,L:()=>Y,Ml:()=>pt,P$:()=>je,PF:()=>$e,Qj:()=>mt,R9:()=>C,TI:()=>q,YP:()=>Je,Yd:()=>bt,ZN:()=>ts,Zo:()=>ve,_l:()=>tt,b7:()=>fe,ed:()=>ce,fZ:()=>Pt,fl:()=>ms,fw:()=>rt,hF:()=>we,hO:()=>ss,io:()=>qe,jc:()=>oe,kl:()=>me,mN:()=>ne,oC:()=>ot,oh:()=>De,qg:()=>_e,rS:()=>Fe,sJ:()=>Ve,tD:()=>le,tm:()=>ge,u0:()=>ue,v_:()=>Ie,vt:()=>Ts,zd:()=>Nt});var E=g(68327),T=g(32995),w=g(28191),Z=g(53661),x=g(40930);const se=w.Z.getLogger("esri.core.urlUtils"),V=E.default.request,W="esri/config: esriConfig.request.proxyUrl is not set.",A=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,U=/^\s*http:/i,N=/^\s*https:/i,J=/^\s*file:/i,Q=/:\d+$/,G=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,k=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),z=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class C{constructor(At=""){this.uri=At,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let Bt=(0,Z.j0)(this.uri.match(k));this.scheme=Bt[2]||(Bt[1]?"":null),this.authority=Bt[4]||(Bt[3]?"":null),this.path=Bt[5],this.query=Bt[7]||(Bt[6]?"":null),this.fragment=Bt[9]||(Bt[8]?"":null),null!=this.authority&&(Bt=(0,Z.j0)(this.authority.match(z)),this.user=Bt[3]||null,this.password=Bt[4]||null,this.host=Bt[6]||Bt[7],this.port=Bt[9]||null)}toString(){return this.uri}}const D={};let B=new C(E.default.applicationUrl);let X=function ae(){const et=(0,Z.j0)(B.path),At=et.substring(0,et.lastIndexOf(et.split("/")[et.split("/").length-1]));return`${B.scheme}://${B.host}${null!=B.port?`:${B.port}`:""}${At}`}();const q=()=>B,Y=()=>X;function ne(et){if(!et)return null;const At={path:null,query:null},Bt=new C(et),Ht=et.indexOf("?");return null===Bt.query?At.path=et:(At.path=et.substring(0,Ht),At.query=ue(Bt.query)),Bt.fragment&&(At.hash=Bt.fragment,null===Bt.query&&(At.path=At.path.substring(0,At.path.length-(Bt.fragment.length+1)))),At}function ue(et){const At=et.split("&"),Bt={};for(const Ht of At){if(!Ht)continue;const cs=Ht.indexOf("=");let Rs,Us;cs<0?(Rs=decodeURIComponent(Ht),Us=""):(Rs=decodeURIComponent(Ht.slice(0,cs)),Us=decodeURIComponent(Ht.slice(cs+1)));let mr=Bt[Rs];"string"==typeof mr&&(mr=Bt[Rs]=[mr]),Array.isArray(mr)?mr.push(Us):Bt[Rs]=Us}return Bt}function te(et){return et&&"object"==typeof et&&"toJSON"in et&&"function"==typeof et.toJSON}function ie(et,At){return et?At&&"function"==typeof At?Object.keys(et).map(Bt=>encodeURIComponent(Bt)+"="+encodeURIComponent(At(Bt,et[Bt]))).join("&"):Object.keys(et).map(Bt=>{const Ht=et[Bt];if(null==Ht)return"";const cs=encodeURIComponent(Bt)+"=",Rs=At&&At[Bt];return Rs?cs+encodeURIComponent(Rs(Ht)):Array.isArray(Ht)?Ht.map(Us=>te(Us)?cs+encodeURIComponent(JSON.stringify(Us)):cs+encodeURIComponent(Us)).join("&"):te(Ht)?cs+encodeURIComponent(JSON.stringify(Ht)):cs+encodeURIComponent(Ht)}).filter(Bt=>Bt).join("&"):""}function fe(et=!1){let At,Bt=V.proxyUrl;if("string"==typeof et){At=_t(et);const Ht=ce(et);Ht&&(Bt=Ht.proxyUrl)}else At=!!et;if(!Bt)throw se.warn(W),new T.Z("urlutils:proxy-not-set",W);return At&&Wt()&&(Bt=ss(Bt)),ne(Bt)}function _e(et){const At=ce(et);let Bt,Ht;if(At){const cs=Oe(At.proxyUrl);Bt=cs.path,Ht=cs.query?ue(cs.query):null}if(Bt){const cs=ne(et);et=Bt+"?"+cs.path;const Rs=ie({...Ht,...cs.query});Rs&&(et=`${et}?${Rs}`)}return et}const de={path:"",query:""};function Oe(et){const At=et.indexOf("?");return-1!==At?(de.path=et.slice(0,At),de.query=et.slice(At+1)):(de.path=et,de.query=null),de}function re(et){return(et=as(et=function nt(et){return et&&"/"===et[et.length-1]?et:`${et}/`}(et=Oe(et).path),!0)).toLowerCase()}function le(et){const At={proxyUrl:et.proxyUrl,urlPrefix:re(et.urlPrefix)},Bt=V.proxyRules,Ht=At.urlPrefix;let cs=Bt.length;for(let Rs=0;Rs<Bt.length;Rs++){const Us=Bt[Rs].urlPrefix;if(0===Ht.indexOf(Us)){if(Ht.length===Us.length)return-1;cs=Rs;break}0===Us.indexOf(Ht)&&(cs=Rs+1)}return Bt.splice(cs,0,At),cs}function ce(et){const At=V.proxyRules,Bt=re(et);for(let Ht=0;Ht<At.length;Ht++)if(0===Bt.indexOf(At[Ht].urlPrefix))return At[Ht]}function ve(et,At){if(!et||!At)return!1;et=Ae(et),At=Ae(At);const Bt=(0,x.a)(et),Ht=(0,x.a)(At);return(0,Z.pC)(Bt)&&(0,Z.pC)(Ht)?Bt.portalHostname===Ht.portalHostname:!(0,Z.pC)(Bt)&&!(0,Z.pC)(Ht)&&Se(et,At,!0)}function ge(et,At){return et=Ae(et),At=Ae(At),as(et)===as(At)}function Ae(et){const At=(et=Ce(et)).indexOf("/sharing");return At>0?et.substring(0,At):et.replace(/\/+$/,"")}function De(et){const At=Ht=>null==Ht||Ht instanceof RegExp&&Ht.test(et)||"string"==typeof Ht&&et.startsWith(Ht),Bt=V.interceptors;if(Bt)for(const Ht of Bt)if(Array.isArray(Ht.urls)){if(Ht.urls.some(At))return Ht}else if(At(Ht.urls))return Ht;return null}function Se(et,At,Bt=!1){if(!et||!At)return!1;const Ht=Vt(et),cs=Vt(At);return!(!Bt&&Ht.scheme!==cs.scheme)&&null!=Ht.host&&null!=cs.host&&Ht.host.toLowerCase()===cs.host.toLowerCase()&&Ht.port===cs.port}function me(et){if("string"==typeof et){if(!Je(et))return!0;et=Vt(et)}if(Se(et,B))return!0;const At=V.trustedServers||[];for(let Bt=0;Bt<At.length;Bt++){const Ht=ye(At[Bt]);for(let cs=0;cs<Ht.length;cs++)if(Se(et,Ht[cs]))return!0}return!1}function ye(et){return D[et]||(D[et]=ct(et)||ot(et)?[new C(we(et))]:[new C(`http://${et}`),new C(`https://${et}`)]),D[et]}function we(et,At=X,Bt){return ot(et)?Bt&&Bt.preserveProtocolRelative?et:"http"===B.scheme&&B.authority===je(et).slice(2)?`http:${et}`:`https:${et}`:ct(et)?et:(0,Z.j0)(Ie("/"===et[0]?function ys(et){const At=et.indexOf("//"),Bt=et.indexOf("/",At+2);return-1===Bt?et:et.slice(0,Bt)}(At):At,et))}function $e(et,At=X,Bt){if(null==et||!Je(et))return et;const Ht=Ce(et),cs=Ht.toLowerCase(),Rs=Ce(At).toLowerCase().replace(/\/+$/,""),Us=Bt?Ce(Bt).toLowerCase().replace(/\/+$/,""):null;if(Us&&0!==Rs.indexOf(Us))return et;const mr=(We,ke,Et)=>-1===(Et=We.indexOf(ke,Et))?We.length:Et;let fs=mr(cs,"/",cs.indexOf("//")+2),Le=-1;for(;cs.slice(0,fs+1)===Rs.slice(0,fs)+"/"&&(Le=fs+1,fs!==cs.length);)fs=mr(cs,"/",fs+1);if(-1===Le||Us&&Le<Us.length)return et;et=Ht.slice(Le);const wt=Rs.slice(Le-1).replace(/[^/]+/g,"").length;if(wt>0)for(let We=0;We<wt;We++)et=`../${et}`;else et=`./${et}`;return et}function Ce(et){return function Zt(et){const At=V.httpsDomains;if(!function Rt(et){return null!=et&&U.test(et)||"http"===B.scheme&&ot(et)}(et))return et;const Bt=et.indexOf("/",7);let Ht;if(Ht=-1===Bt?et:et.slice(0,Bt),Ht=Ht.toLowerCase().slice(7),Q.test(Ht)){if(!Ht.endsWith(":80"))return et;Ht=Ht.slice(0,-3),et=et.replace(":80","")}return function vs(){return"http"===B.scheme}()&&Ht===B.authority&&!G.test(et)||(Wt()&&Ht===B.authority||At&&At.some(cs=>Ht===cs||Ht.endsWith(`.${cs}`))||Wt()&&!ce(et))&&(et=ss(et)),et}(et=function It(et){return et.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(et=function Tt(et){if(/^https?:\/\//i.test(et)){const At=Oe(et);et=(et=At.path.replace(/\/{2,}/g,"/")).replace("/","//"),At.query&&(et+=`?${At.query}`)}return et}(et=we(et=et.trim()))))}function Ie(...et){const At=et.filter(Z.pC);if(!At||!At.length)return;const Bt=[];if(Je(At[0])){const cs=At[0],Rs=cs.indexOf("//");-1!==Rs&&(Bt.push(cs.slice(0,Rs+1)),function qt(et){return null!=et&&J.test(et)}(At[0])&&(Bt[0]+="/"),At[0]=cs.slice(Rs+2))}else"/"===At[0][0]&&Bt.push("");const Ht=At.reduce((cs,Rs)=>Rs?cs.concat(Rs.split("/")):cs,[]);for(let cs=0;cs<Ht.length;cs++){const Rs=Ht[cs];".."===Rs&&Bt.length>0&&".."!==Bt[Bt.length-1]?Bt.pop():(!Rs&&cs===Ht.length-1||Rs&&("."!==Rs||0===Bt.length))&&Bt.push(Rs)}return Bt.join("/")}function je(et,At=!1){if(null==et||oe(et)||be(et))return null;let Bt=et.indexOf("://");if(-1===Bt&&ot(et))Bt=2;else{if(-1===Bt)return null;Bt+=3}const Ht=et.indexOf("/",Bt);return-1!==Ht&&(et=et.slice(0,Ht)),At&&(et=as(et,!0)),et}function Je(et){return ot(et)||ct(et)}function oe(et){return null!=et&&"blob:"===et.slice(0,5)}function be(et){return null!=et&&"data:"===et.slice(0,5)}function Ue(et){const At=Ve(et);if(!At||!At.isBase64)return null;const Bt=atob(At.data),Ht=new Uint8Array(Bt.length);for(let cs=0;cs<Bt.length;cs++)Ht[cs]=Bt.charCodeAt(cs);return Ht.buffer}function Fe(et){return btoa(String.fromCharCode.apply(null,et)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const Ke=/^data:(.*?)(;base64)?,(.*)$/;function Ve(et){const At=et.match(Ke);if(!At)return null;const[,Bt,Ht,cs]=At;return{mediaType:Bt,isBase64:!!Ht,data:cs}}function tt(et){return et.isBase64?`data:${et.mediaType};base64,${et.data}`:`data:${et.mediaType},${et.data}`}function rt(et){const At=Ue(et);if(!At)return null;const Bt=Ve(et);return new Blob([At],{type:Bt.mediaType})}function qe(et,At){(function Xe(et,At){if(!et)return!1;const Bt=document.createElement("a");if(!("download"in Bt))return!1;const Ht=URL.createObjectURL(et);return Bt.download=At,Bt.href=Ht,Bt.style.display="none",document.body.appendChild(Bt),Bt.click(),document.body.removeChild(Bt),URL.revokeObjectURL(Ht),!0})(et,At)||function Qe(et,At){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(et,At)}(et,At)}function ot(et){return null!=et&&"/"===et[0]&&"/"===et[1]}function ct(et){return null!=et&&A.test(et)}function _t(et){return null!=et&&N.test(et)||"https"===B.scheme&&ot(et)}function ss(et){return ot(et)?`https:${et}`:et.replace(U,"https:")}function Wt(){return"https"===B.scheme}function as(et,At=!1){return ot(et)?et.slice(2):(et=et.replace(A,""),At&&et.length>1&&"/"===et[0]&&"/"===et[1]&&(et=et.slice(2)),et)}function bt(et){let At=0;if(Je(et)){const Ht=et.indexOf("//");-1!==Ht&&(At=Ht+2)}const Bt=et.lastIndexOf("/");return Bt<At?et:et.slice(0,Bt+1)}function Ts(et,At){if(!et)return"";const Bt=ne(et).path.replace(/\/+$/,""),Ht=Bt.substring(Bt.lastIndexOf("/")+1);if(!At?.length)return Ht;const cs=new RegExp(`.(${At.join("|")})$`,"ig");return Ht.replace(cs,"")}function mt(et){return et.replace(/\/+$/,"")}function Kt(et,At,Bt){if(!(At&&Bt&&et&&Je(et)))return et;const Ht=et.indexOf("//"),cs=et.indexOf("/",Ht+2),Rs=et.indexOf(":",Ht+2),Us=Math.min(cs<0?et.length:cs,Rs<0?et.length:Rs);return et.slice(Ht+2,Us).toLowerCase()!==At.toLowerCase()?et:`${et.slice(0,Ht+2)}${Bt}${et.slice(Us)}`}function Vt(et){return"string"==typeof et?new C(we(et)):(et.scheme||(et.scheme=B.scheme),et)}function Nt(et){return us.test(et)}function ls(et,At){const Bt=ne(et),Ht=Object.keys(Bt.query||{});return Ht.length>0&&At&&At.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${Ht.join(", ")}.`),Bt.path}function ts(et,At,Bt){const Ht=ne(et),cs=Ht.query||{};return cs[At]=String(Bt),`${Ht.path}?${ie(cs)}`}function ms(et,At){const Bt=ne(et),Ht=Bt.query||{};for(const Rs in At)Ht[Rs]=At[Rs];const cs=ie(Ht);return cs?`${Bt.path}?${cs}`:Bt.path}function pt(et){if((0,Z.Wi)(et))return null;const At=et.match(jt);return At?At[2]:null}function Pt(et){if((0,Z.Wi)(et))return null;const At=et.match(jt);return At?{path:At[1],extension:At[2]}:{path:et,extension:null}}const jt=/([^.]*)\.([^\/]*)$/,us=/(^data:image\/svg|\.svg$)/i},28772:(He,Pe,g)=>{"use strict";g.d(Pe,{D:()=>T});const E="randomUUID"in crypto;function T(){if(E)return crypto.randomUUID();const w=crypto.getRandomValues(new Uint16Array(8));w[3]=4095&w[3]|16384,w[4]=16383&w[4]|32768;const Z=x=>w[x].toString(16).padStart(4,"0");return Z(0)+Z(1)+"-"+Z(2)+"-"+Z(3)+"-"+Z(4)+"-"+Z(5)+Z(6)+Z(7)}},28247:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>se});var E=g(70120),T=g(28191),w=g(30801),Z=g(20834),x=g(46416);class se{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Z.Z}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(W,A){return new Promise((U,N)=>{let J=!0;const Q=G=>{(0,w.k_)(A.signal),J&&(J=!1,G())};this._clients.length=W.length,this._clientPromises.length=W.length,this._inUseClients.length=W.length;for(let G=0;G<W.length;++G){const k=W[G];(0,w.y8)(k)?this._clientPromises[G]=k.then(z=>(this._clients[G]=new x.Z(z,A,()=>this._ongoingJobsQueue.pop()??null),Q(U),this._clients[G]),()=>(Q(N),null)):(this._clients[G]=new x.Z(k,A,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[G]=Promise.resolve(this._clients[G]),Q(U))}})}broadcast(W,A,U){const N=new Array(this._clientPromises.length);for(let J=0;J<this._clientPromises.length;++J)N[J]=this._clientPromises[J].then(G=>G?.invoke(W,A,U));return N}close(){let W;for(;W=this._ongoingJobsQueue.pop();)W.deferred.reject((0,w.zE)(`Worker closing, aborting job calling '${W.methodName}'`));for(const A of this._clientPromises)A.then(U=>U?.close());this._clients.length=0,this._clientPromises.length=0}invoke(W,A,U){let N;Array.isArray(U)?(T.Z.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),N={transferList:U}):N=U;const J=(0,w.dD)();this._ongoingJobsQueue.push({methodName:W,data:A,invokeOptions:N,deferred:J});for(let Q=0;Q<this._clientPromises.length;Q++){const G=this._clients[Q];G?G.jobAdded():this._clientPromises[Q].then(k=>k?.jobAdded())}return J.promise}on(W,A){return Promise.all(this._clientPromises).then(()=>(0,E.AL)(this._clients.map(U=>U.on(W,A))))}openPorts(){return new Promise(W=>{const A=new Array(this._clientPromises.length);let U=A.length;for(let N=0;N<this._clientPromises.length;++N)this._clientPromises[N].then(J=>{J&&(A[N]=J.openPort()),0==--U&&W(A)})})}get test(){return{numClients:this._clients.length}}}},46416:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>C});var E=g(84489),T=g(32995),w=g(83627),Z=g(53661),x=g(30801),se=g(88488),V=g(99624);const W={statsWorker:()=>Promise.all([g.e(8067),g.e(9303)]).then(g.bind(g,59303)),geometryEngineWorker:()=>Promise.all([g.e(7640),g.e(8592),g.e(8663)]).then(g.bind(g,47238)),CSVSourceWorker:()=>Promise.all([g.e(2155),g.e(753),g.e(8067),g.e(3831),g.e(9266),g.e(8592),g.e(9358)]).then(g.bind(g,49358)),EdgeProcessingWorker:()=>Promise.all([g.e(9565),g.e(9758),g.e(2797)]).then(g.bind(g,22797)),ElevationSamplerWorker:()=>Promise.all([g.e(9565),g.e(571),g.e(8592),g.e(8981)]).then(g.bind(g,48981)),FeatureServiceSnappingSourceWorker:()=>Promise.all([g.e(2155),g.e(753),g.e(8067),g.e(3831),g.e(9266),g.e(8592),g.e(4001)]).then(g.bind(g,34001)),GeoJSONSourceWorker:()=>Promise.all([g.e(2155),g.e(753),g.e(8067),g.e(3831),g.e(9266),g.e(8592),g.e(6019)]).then(g.bind(g,26019)),LercWorker:()=>g.e(7349).then(g.bind(g,57349)),MemorySourceWorker:()=>Promise.all([g.e(2155),g.e(753),g.e(8067),g.e(3831),g.e(9266),g.e(8592),g.e(5168)]).then(g.bind(g,55168)),PBFDecoderWorker:()=>g.e(4720).then(g.bind(g,4720)),Pipeline:()=>Promise.all([g.e(7868),g.e(2155),g.e(753),g.e(5230),g.e(8067),g.e(3831),g.e(9266),g.e(9264),g.e(8592),g.e(8581)]).then(g.bind(g,52770)),PointCloudWorker:()=>Promise.all([g.e(1507),g.e(8592),g.e(3322)]).then(g.bind(g,23322)),RasterWorker:()=>Promise.all([g.e(2043),g.e(3110),g.e(921),g.e(508),g.e(7605)]).then(g.bind(g,47605)),SceneLayerSnappingSourceWorker:()=>Promise.all([g.e(753),g.e(8067),g.e(3831),g.e(9565),g.e(9758),g.e(8592),g.e(2478)]).then(g.bind(g,48485)),SceneLayerWorker:()=>g.e(7744).then(g.bind(g,37744)),WFSSourceWorker:()=>Promise.all([g.e(2155),g.e(753),g.e(8067),g.e(3831),g.e(9266),g.e(6010),g.e(8592),g.e(1362)]).then(g.bind(g,71362)),WorkerTileHandler:()=>Promise.all([g.e(4048),g.e(323),g.e(292),g.e(9488)]).then(g.bind(g,54894))},{CLOSE:A,ABORT:U,INVOKE:N,RESPONSE:J,OPEN_PORT:Q,ON:G}=se.MessageType;class z{constructor(F){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=F,this._timer=null,this._process=this._process.bind(this)}push(F){F.type===se.MessageType.ABORT?this._cancelledJobIds.add(F.jobId):(this._invokeMessages.push(F),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const F of this._invokeMessages)this._cancelledJobIds.has(F.jobId)||this._invoke(F);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class C{static connect(F){const B=new MessageChannel;let $;$="function"==typeof F?new F:"default"in F&&"function"==typeof F.default?new F.default:F;const X=new C(B.port1,{channel:B,client:$},()=>null);return"object"==typeof $&&"remoteClient"in $&&($.remoteClient=X),C.clients.set(X,$),B.port2}static loadWorker(F){const B=W[F];return B?B():Promise.resolve(null)}constructor(F,B,$){this._port=F,this._getNextJob=$,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new z(X=>this._onInvokeMessage(X)),this._client=B.client,this._onMessage=this._onMessage.bind(this),this._channel=B.channel,this._schedule=B.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:A}),this._close()}isBusy(){return this._outJobs.size>0}invoke(F,B,$){const X=$&&$.signal,q=$&&$.transferList;if(!this._port)return Promise.reject(new T.Z("worker:port-closed",`Cannot call invoke('${F}'), port is closed`,{methodName:F,data:B}));const Y=(0,se.jt)();return new Promise((ae,he)=>{if((0,x.Hc)(X))return this._processWork(),void he((0,x.zE)());const ne=(0,x.fu)(X,()=>{const te=this._outJobs.get(Y);te&&(this._outJobs.delete(Y),this._processWork(),(0,Z.hw)(te.abortHandle),this._post({type:U,jobId:Y}),he((0,x.zE)()))});this._outJobs.set(Y,{resolve:ae,reject:he,abortHandle:ne,debugInfo:F}),this._post({type:N,jobId:Y,methodName:F,abortable:null!=X},B,q)})}on(F,B){const $=new MessageChannel;function X(q){B(q.data)}return this._port.postMessage({type:se.MessageType.ON,eventType:F,port:$.port2},[$.port2]),$.port1.addEventListener("message",X),$.port1.start(),{remove(){$.port1.postMessage({type:se.MessageType.CLOSE}),$.port1.close(),$.port1.removeEventListener("message",X)}}}jobAdded(){this._processWork()}openPort(){const F=new MessageChannel;return this._post({type:Q,port:F.port2}),F.port1}_processWork(){if(this._outJobs.size>=2)return;const F=this._getNextJob();if(!F)return;const{methodName:B,data:$,invokeOptions:X,deferred:q}=F;this.invoke(B,$,X).then(Y=>q.resolve(Y)).catch(Y=>q.reject(Y))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(F=>{(0,Z.hw)(F.abortHandle),F.reject((0,x.zE)(`Worker closing, aborting job calling '${F.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(F){(0,Z.pC)(this._schedule)?this._schedule(()=>this._processMessage(F)):this._processMessage(F)}_processMessage(F){const B=(0,se.QM)(F);if(B)switch(B.type){case J:this._onResponseMessage(B);break;case N:this._invokeQueue.push(B);break;case U:this._onAbortMessage(B);break;case A:this._onCloseMessage();break;case Q:this._onOpenPortMessage(B);break;case G:this._onOnMessage(B)}}_onAbortMessage(F){const B=this._inJobs,$=F.jobId,X=B.get($);this._invokeQueue.push(F),X&&(X.controller&&X.controller.abort(),B.delete($))}_onCloseMessage(){const F=this._client;this._close(),F&&"destroy"in F&&C.clients.get(this)===F&&F.destroy(),C.clients.delete(this),F&&F.remoteClient&&(F.remoteClient=null)}_onInvokeMessage(F){const{methodName:B,jobId:$,data:X,abortable:q}=F,Y=q?new AbortController:null,ae=this._inJobs;let he,ne=this._client,ue=ne[B];try{if(!ue&&B&&B.includes(".")){const te=B.split(".");for(let ie=0;ie<te.length-1;ie++)ne=ne[te[ie]],ue=ne[te[ie+1]]}if("function"!=typeof ue)throw new TypeError(`${B} is not a function`);he=ue.call(ne,X,{client:this,signal:Y?Y.signal:null})}catch(te){return void this._post({type:J,jobId:$,error:(0,se.AB)(te)})}(0,x.y8)(he)?(ae.set($,{controller:Y,promise:he}),he.then(te=>{ae.has($)&&(ae.delete($),this._post({type:J,jobId:$},te))},te=>{ae.has($)&&(ae.delete($),(0,x.D_)(te)||this._post({type:J,jobId:$,error:(0,se.AB)(te||{message:`Error encountered at method ${B}`})}))})):this._post({type:J,jobId:$},he)}_onOpenPortMessage(F){new C(F.port,{client:this._client},()=>null)}_onOnMessage(F){const{port:B}=F,$=this._client.on(F.eventType,q=>{B.postMessage(q)}),X=(0,w.on)(F.port,"message",q=>{(0,se.QM)(q)?.type===se.MessageType.CLOSE&&(X.remove(),$.remove(),B.close())})}_onResponseMessage(F){const{jobId:B,error:$,data:X}=F,q=this._outJobs;if(!q.has(B))return;const Y=q.get(B);q.delete(B),this._processWork(),(0,Z.hw)(Y.abortHandle),$?Y.reject(T.Z.fromJSON(JSON.parse($))):Y.resolve(X)}_post(F,B,$){return(0,se.oi)(this._port,F,B,$)}}C.kernelInfo={revision:V.$,version:E.i8,buildDate:V.r},C.clients=new Map},88488:(He,Pe,g)=>{"use strict";g.d(Pe,{AB:()=>se,MessageType:()=>T,QM:()=>W,jt:()=>Z,oi:()=>V});var T,N,E=g(67087);(N=T||(T={}))[N.HANDSHAKE=0]="HANDSHAKE",N[N.OPEN=1]="OPEN",N[N.OPENED=2]="OPENED",N[N.RESPONSE=3]="RESPONSE",N[N.INVOKE=4]="INVOKE",N[N.ABORT=5]="ABORT",N[N.CLOSE=6]="CLOSE",N[N.OPEN_PORT=7]="OPEN_PORT",N[N.ON=8]="ON";let w=0;function Z(){return w++}function se(N){return N?"string"==typeof N?JSON.stringify({name:"message",message:N}):N.toJSON?JSON.stringify(N):JSON.stringify({name:N.name,message:N.message,details:N.details||{stack:N.stack}}):null}function V(N,J,Q,G){if(J.type===T.OPEN_PORT)return void N.postMessage(J,[J.port]);if(J.type!==T.INVOKE&&J.type!==T.RESPONSE)return void N.postMessage(J);let k;if(function x(N){return N&&"object"==typeof N&&("result"in N||"transferList"in N)}(Q)?(k=A(Q.transferList),J.data=Q.result):(k=A(G),J.data=Q),k){if((0,E.Z)("ff"))for(const z of k)if("byteLength"in z&&z.byteLength>267386880){const C="Worker call with large ArrayBuffer would crash Firefox";switch(J.type){case T.INVOKE:throw C;case T.RESPONSE:return void V(N,{type:T.RESPONSE,jobId:J.jobId,error:se(C)})}}N.postMessage(J,k)}else N.postMessage(J)}function W(N){if(!N)return null;const J=N.data;return J?"string"==typeof J?JSON.parse(J):J:null}function A(N){if(!N||!N.length)return null;if((0,E.Z)("esri-workers-arraybuffer-transfer"))return N;const J=N.filter(Q=>!function U(N){return N instanceof ArrayBuffer||N&&N.constructor&&"ArrayBuffer"===N.constructor.name}(Q));return J.length?J:null}},28502:(He,Pe,g)=>{"use strict";g.d(Pe,{j2:()=>me,bA:()=>Ce});var E=g(71670),T=g(32995),w=g(67087),Z=g(30801),x=g(28247),se=g(46416),V=g(84489),W=g(28191),A=g(53661),U=g(88488),N=g(74792),J=g(68327),G=(g(25288),g(55050));const z={};var D=g(16746);class F{constructor(){const Ke=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(Ve=>{this[Ve]=(...tt)=>Ke[Ve](...tt)})}}class B{constructor(){this._dispatcher=new F,this._workerPostMessage({type:U.MessageType.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(Ke){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=Ke,Ke&&this.addEventListener("message",Ke)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(Ke){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=Ke,Ke&&this.addEventListener("messageerror",Ke)}get onerror(){return this._onerrorHandler}set onerror(Ke){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=Ke,Ke&&this.addEventListener("error",Ke)}postMessage(Ke){(0,D.Y)(()=>{this._workerMessageHandler(new MessageEvent("message",{data:Ke}))})}dispatchEvent(Ke){return this._dispatcher.dispatchEvent(Ke)}addEventListener(Ke,Ve,tt){this._dispatcher.addEventListener(Ke,Ve,tt)}removeEventListener(Ke,Ve,tt){this._dispatcher.removeEventListener(Ke,Ve,tt)}_workerPostMessage(Ke){(0,D.Y)(()=>{this.dispatchEvent(new MessageEvent("message",{data:Ke}))})}_workerMessageHandler(Ke){var Ve=this;return(0,E.Z)(function*(){const tt=(0,U.QM)(Ke);if(tt&&tt.type===U.MessageType.OPEN){const{modulePath:rt,jobId:Ne}=tt;let qe=yield se.Z.loadWorker(rt);qe||(qe=yield import(rt));const ft=se.Z.connect(qe);Ve._workerPostMessage({type:U.MessageType.OPENED,jobId:Ne,data:ft})}})()}}var $=g(92051),X=g(99624);const q=W.Z.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:Y}=U.MessageType;let he,ne;const ue="Failed to create Worker. Fallback to execute module in main thread";function ie(){return(ie=(0,E.Z)(function*(){if(!(0,w.Z)("esri-workers")||((0,w.Z)("mozilla"),0))return fe(new B);if(!he&&!ne)try{const Ke='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,version:r}=configuration.kernelInfo,{revision:t,version:n}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS API for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const i=outgoing.get(r);outgoing.delete(r),o.error?i.reject(JSON.parse(o.error)):i.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.split('"{CONFIGURATION}"').join(`'${function de(){let Fe;if(null!=J.default.default){const rt={...J.default};delete rt.default,Fe=JSON.parse(JSON.stringify(rt))}else Fe=JSON.parse(JSON.stringify(J.default));Fe.assetsPath=(0,G.hF)(Fe.assetsPath),Fe.defaultAssetsPath=Fe.defaultAssetsPath?(0,G.hF)(Fe.defaultAssetsPath):void 0,Fe.request.interceptors=[],Fe.log.interceptors=[],Fe.locale=(0,$.Kd)(),Fe.has={"esri-csp-restrictions":(0,w.Z)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,w.Z)("esri-2d-update-debug"),"featurelayer-pbf":(0,w.Z)("featurelayer-pbf"),"featurelayer-simplify-thresholds":(0,w.Z)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,w.Z)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,w.Z)("featurelayer-simplify-mobile-factor"),"esri-atomics":(0,w.Z)("esri-atomics"),"esri-shared-array-buffer":(0,w.Z)("esri-shared-array-buffer"),"esri-tiles-debug":(0,w.Z)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,w.Z)("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":(0,w.Z)("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":(0,w.Z)("polylabel-placement-enabled")},Fe.workers.loaderUrl&&(Fe.workers.loaderUrl=(0,G.hF)(Fe.workers.loaderUrl)),Fe.workers.workerPath=(0,G.hF)(Fe.workers.workerPath?Fe.workers.workerPath:(0,N.V)("esri/core/workers/RemoteClient.js")),Fe.workers.useDynamicImport=!1;const Ke=J.default.workers.loaderConfig,Ve=function C(Fe){const Ke={async:Fe.async,isDebug:Fe.isDebug,locale:Fe.locale,baseUrl:Fe.baseUrl,has:{...Fe.has},map:{...Fe.map},packages:Fe.packages&&Fe.packages.concat()||[],paths:{...Fe.paths}};return Fe.hasOwnProperty("async")||(Ke.async=!0),Fe.hasOwnProperty("isDebug")||(Ke.isDebug=!1),Fe.baseUrl||(Ke.baseUrl=z.baseUrl),Ke}({baseUrl:Ke?.baseUrl,locale:(0,$.Kd)(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...Ke?.has},map:{...Ke?.map},paths:{...Ke?.paths},packages:Ke?.packages||[]});return JSON.stringify({esriConfig:Fe,loaderConfig:Ve,kernelInfo:{version:V.i8,buildDate:X.r,revision:X.$}})}()}'`);he=URL.createObjectURL(new Blob([Ke],{type:"text/javascript"}))}catch(Ke){ne=Ke||{}}let Fe;if(he)try{Fe=new Worker(he,{name:"esri-worker-"+Oe++})}catch{q.warn(ue,ne),Fe=new B}else q.warn(ue,ne),Fe=new B;return fe(Fe)})).apply(this,arguments)}function fe(Fe){return _e.apply(this,arguments)}function _e(){return(_e=(0,E.Z)(function*(Fe){return new Promise(Ke=>{function Ve(rt){const Ne=(0,U.QM)(rt);Ne&&Ne.type===Y&&(Fe.removeEventListener("message",Ve),Fe.removeEventListener("error",tt),Ke(Fe))}function tt(rt){rt.preventDefault(),Fe.removeEventListener("message",Ve),Fe.removeEventListener("error",tt),q.warn("Failed to create Worker. Fallback to execute module in main thread",rt),(Fe=new B).addEventListener("message",Ve),Fe.addEventListener("error",tt)}Fe.addEventListener("message",Ve),Fe.addEventListener("error",tt)})})).apply(this,arguments)}let Oe=0;const{ABORT:re,INVOKE:le,OPEN:ce,OPENED:ve,RESPONSE:Te}=U.MessageType;class ge{static create(Ke){return(0,E.Z)(function*(){const Ve=yield function te(){return ie.apply(this,arguments)}();return new ge(Ve,Ke)})()}constructor(Ke,Ve){this._outJobs=new Map,this._inJobs=new Map,this.worker=Ke,this.id=Ve,Ke.addEventListener("message",this._onMessage.bind(this)),Ke.addEventListener("error",tt=>{tt.preventDefault(),W.Z.getLogger("esri.core.workers.WorkerOwner").error(tt)})}terminate(){this.worker.terminate()}open(Ke,Ve={}){var tt=this;return(0,E.Z)(function*(){const{signal:rt}=Ve,Ne=(0,U.jt)();return new Promise((qe,ft)=>{const Xe={resolve:qe,reject:ft,abortHandle:(0,Z.$F)(rt,()=>{tt._outJobs.delete(Ne),tt._post({type:re,jobId:Ne})})};tt._outJobs.set(Ne,Xe),tt._post({type:ce,jobId:Ne,modulePath:Ke})})})()}_onMessage(Ke){const Ve=(0,U.QM)(Ke);if(Ve)switch(Ve.type){case ve:this._onOpenedMessage(Ve);break;case Te:this._onResponseMessage(Ve);break;case re:this._onAbortMessage(Ve);break;case le:this._onInvokeMessage(Ve)}}_onAbortMessage(Ke){const Ve=this._inJobs,tt=Ke.jobId,rt=Ve.get(tt);rt&&(rt.controller&&rt.controller.abort(),Ve.delete(tt))}_onInvokeMessage(Ke){const{methodName:Ve,jobId:tt,data:rt,abortable:Ne}=Ke,qe=Ne?new AbortController:null,ft=this._inJobs,Xe=V.Nv[Ve];let dt;try{if("function"!=typeof Xe)throw new TypeError(`${Ve} is not a function`);dt=Xe.call(null,rt,{signal:qe?qe.signal:null})}catch(Qe){return void this._post({type:Te,jobId:tt,error:(0,U.AB)(Qe)})}(0,Z.y8)(dt)?(ft.set(tt,{controller:qe,promise:dt}),dt.then(Qe=>{ft.has(tt)&&(ft.delete(tt),this._post({type:Te,jobId:tt},Qe))},Qe=>{ft.has(tt)&&(ft.delete(tt),Qe||(Qe={message:"Error encountered at method"+Ve}),(0,Z.D_)(Qe)||this._post({type:Te,jobId:tt,error:(0,U.AB)(Qe||{message:`Error encountered at method ${Ve}`})}))})):this._post({type:Te,jobId:tt},dt)}_onOpenedMessage(Ke){const{jobId:Ve,data:tt}=Ke,rt=this._outJobs.get(Ve);rt&&(this._outJobs.delete(Ve),(0,A.hw)(rt.abortHandle),rt.resolve(tt))}_onResponseMessage(Ke){const{jobId:Ve,error:tt,data:rt}=Ke,Ne=this._outJobs.get(Ve);Ne&&(this._outJobs.delete(Ve),(0,A.hw)(Ne.abortHandle),tt?Ne.reject(T.Z.fromJSON(JSON.parse(tt))):Ne.resolve(rt))}_post(Ke,Ve,tt){return(0,U.oi)(this.worker,Ke,Ve,tt)}}let Ae=(0,w.Z)("esri-workers-debug")?1:(0,w.Z)("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):(0,w.Z)("host-browser")?navigator.hardwareConcurrency-1:0;Ae||(Ae=(0,w.Z)("safari")&&(0,w.Z)("mac")?7:2);let De=0;const Se=[];function me(){be()}function we(Fe,Ke){return $e.apply(this,arguments)}function $e(){return($e=(0,E.Z)(function*(Fe,Ke){const Ve=new x.Z;return yield Ve.open(Fe,Ke),Ve})).apply(this,arguments)}function Ce(Fe){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,E.Z)(function*(Fe,Ke={}){if("string"!=typeof Fe)throw new T.Z("workers:undefined-module","modulePath is missing");let Ve=Ke.strategy||"distributed";if((0,w.Z)("host-webworker")&&!(0,w.Z)("esri-workers")&&(Ve="local"),"local"===Ve){let tt=yield se.Z.loadWorker(Fe);tt||(tt=yield import(Fe)),(0,Z.k_)(Ke.signal);const rt=Ke.client||tt;return we([se.Z.connect(tt)],{...Ke,client:rt})}if(yield be(),(0,Z.k_)(Ke.signal),"dedicated"===Ve){const tt=De++%Ae;return we([yield Se[tt].open(Fe,Ke)],Ke)}if(Ke.maxNumWorkers&&Ke.maxNumWorkers>0){const tt=Math.min(Ke.maxNumWorkers,Ae);if(tt<Ae){const rt=new Array(tt);for(let Ne=0;Ne<tt;++Ne){const qe=De++%Ae;rt[Ne]=Se[qe].open(Fe,Ke)}return we(rt,Ke)}}return we(Se.map(tt=>tt.open(Fe,Ke)),Ke)})).apply(this,arguments)}let Je,oe=null;function be(){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,E.Z)(function*(){if(oe)return oe;Je=new AbortController;const Fe=[];for(let Ke=0;Ke<Ae;Ke++){const Ve=ge.create(Ke).then(tt=>(Se[Ke]=tt,tt));Fe.push(Ve)}return oe=Promise.all(Fe),oe})).apply(this,arguments)}},57697:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>vs});var N,E=g(18100),T=g(44480),w=g(88684),Z=g(9497),x=g(36734),se=g(66508),V=g(20891),W=g(70425),A=g(83382);g(19420);let J=N=class extends T.wq{constructor(Wt){super(Wt),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new N({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],J.prototype,"expression",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],J.prototype,"name",void 0),(0,E._)([(0,Z.Cb)({type:["boolean","date","number","string"],json:{write:!0}})],J.prototype,"returnType",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],J.prototype,"title",void 0),J=N=(0,E._)([(0,V.j)("esri.form.ExpressionInfo")],J);const Q=J;let G=class extends T.wq{constructor(Wt){super(Wt),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],G.prototype,"description",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],G.prototype,"label",void 0),(0,E._)([(0,Z.Cb)()],G.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],G.prototype,"visibilityExpression",void 0),G=(0,E._)([(0,V.j)("esri.form.elements.Element")],G);const k=G;var z;let C=z=class extends T.wq{constructor(Wt){super(Wt),this.type=null}clone(){return new z({type:this.type})}};(0,E._)([(0,Z.Cb)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],C.prototype,"type",void 0),C=z=(0,E._)([(0,V.j)("esri.form.elements.inputs.AttachmentInput")],C);const D=C;var F;let B=F=class extends k{constructor(Wt){super(Wt),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new F({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],B.prototype,"attachmentKeyword",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],B.prototype,"editable",void 0),(0,E._)([(0,Z.Cb)({type:D,json:{read:{source:"inputType"},write:{target:"inputType"}}})],B.prototype,"input",void 0),(0,E._)([(0,Z.Cb)({type:["attachment"],json:{read:!1,write:!0}})],B.prototype,"type",void 0),B=F=(0,E._)([(0,V.j)("esri.form.elements.AttachmentElement")],B);const $=B;var X=g(60215),q=g(28191);let Y=class extends T.wq{constructor(Wt){super(Wt),this.type=null}};(0,E._)([(0,Z.Cb)()],Y.prototype,"type",void 0),Y=(0,E._)([(0,V.j)("esri.form.elements.inputs.Input")],Y);const ae=Y;let he=class extends ae{constructor(Wt){super(Wt),this.maxLength=null,this.minLength=0}};(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],he.prototype,"maxLength",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],he.prototype,"minLength",void 0),he=(0,E._)([(0,V.j)("esri.form.elements.inputs.TextInput")],he);const ne=he;var ue;let te=ue=class extends ne{constructor(Wt){super(Wt),this.type="barcode-scanner"}clone(){return new ue({maxLength:this.maxLength,minLength:this.minLength})}};(0,E._)([(0,Z.Cb)({type:["barcode-scanner"],json:{read:!1,write:!0}})],te.prototype,"type",void 0),te=ue=(0,E._)([(0,V.j)("esri.form.elements.inputs.BarcodeScannerInput")],te);const ie=te;var fe;let _e=fe=class extends ae{constructor(Wt){super(Wt),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new fe({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],_e.prototype,"noValueOptionLabel",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],_e.prototype,"showNoValueOption",void 0),(0,E._)([(0,Z.Cb)({type:["combo-box"],json:{read:!1,write:!0}})],_e.prototype,"type",void 0),_e=fe=(0,E._)([(0,V.j)("esri.form.elements.inputs.ComboBoxInput")],_e);const de=_e;var Oe;function re(Wt){return null!=Wt?new Date(Wt):null}function le(Wt){return Wt?Wt.getTime():null}let ce=Oe=class extends ae{constructor(Wt){super(Wt),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(Wt,as){return re(as.max)}writeMax(Wt,as){as.max=le(Wt)}readMin(Wt,as){return re(as.min)}writeMin(Wt,as){as.min=le(Wt)}clone(){return new Oe({includeTime:this.includeTime,max:this.max,min:this.min})}};(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],ce.prototype,"includeTime",void 0),(0,E._)([(0,Z.Cb)({type:Date,json:{type:Number,write:!0}})],ce.prototype,"max",void 0),(0,E._)([(0,se.r)("max")],ce.prototype,"readMax",null),(0,E._)([(0,W.c)("max")],ce.prototype,"writeMax",null),(0,E._)([(0,Z.Cb)({type:Date,json:{type:Number,write:!0}})],ce.prototype,"min",void 0),(0,E._)([(0,se.r)("min")],ce.prototype,"readMin",null),(0,E._)([(0,W.c)("min")],ce.prototype,"writeMin",null),(0,E._)([(0,Z.Cb)({type:["datetime-picker"],json:{read:!1,write:!0}})],ce.prototype,"type",void 0),ce=Oe=(0,E._)([(0,V.j)("esri.form.elements.inputs.DateTimePickerInput")],ce);const ve=ce;var Te;let ge=Te=class extends ae{constructor(Wt){super(Wt),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new Te({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],ge.prototype,"noValueOptionLabel",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],ge.prototype,"showNoValueOption",void 0),(0,E._)([(0,Z.Cb)({type:["radio-buttons"],json:{read:!1,write:!0}})],ge.prototype,"type",void 0),ge=Te=(0,E._)([(0,V.j)("esri.form.elements.inputs.RadioButtonsInput")],ge);const Ae=ge;var De;let Se=De=class extends ae{constructor(Wt){super(Wt),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new De({offValue:this.offValue,onValue:this.onValue})}};(0,E._)([(0,Z.Cb)({type:[String,Number],json:{write:!0}})],Se.prototype,"offValue",void 0),(0,E._)([(0,Z.Cb)({type:[String,Number],json:{write:!0}})],Se.prototype,"onValue",void 0),(0,E._)([(0,Z.Cb)({type:["switch"],json:{read:!1,write:!0}})],Se.prototype,"type",void 0),Se=De=(0,E._)([(0,V.j)("esri.form.elements.inputs.SwitchInput")],Se);const me=Se;var ye;let we=ye=class extends ne{constructor(Wt){super(Wt),this.type="text-area"}clone(){return new ye({maxLength:this.maxLength,minLength:this.minLength})}};(0,E._)([(0,Z.Cb)({type:["text-area"],json:{read:!1,write:!0}})],we.prototype,"type",void 0),we=ye=(0,E._)([(0,V.j)("esri.form.elements.inputs.TextAreaInput")],we);const $e=we;var Ce;let Ie=Ce=class extends ne{constructor(Wt){super(Wt),this.type="text-box"}clone(){return new Ce({maxLength:this.maxLength,minLength:this.minLength})}};(0,E._)([(0,Z.Cb)({type:["text-box"],json:{read:!1,write:!0}})],Ie.prototype,"type",void 0),Ie=Ce=(0,E._)([(0,V.j)("esri.form.elements.inputs.TextBoxInput")],Ie);const Je={base:ae,key:"type",typeMap:{"barcode-scanner":ie,"combo-box":de,"datetime-picker":ve,"radio-buttons":Ae,switch:me,"text-area":$e,"text-box":Ie}};var be,oe=g(47016);const Ue="esri.form.elements.FieldElement",Fe=q.Z.getLogger(Ue);let Ke=be=class extends k{constructor(Wt){super(Wt),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return(0,X.Mr)(Fe,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(Wt){(0,X.Mr)(Fe,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",Wt)}clone(){return new be({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};(0,E._)([(0,Z.Cb)({types:oe.V5,json:{read:{reader:oe.im},write:!0}})],Ke.prototype,"domain",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],Ke.prototype,"editable",null),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],Ke.prototype,"editableExpression",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],Ke.prototype,"fieldName",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],Ke.prototype,"hint",void 0),(0,E._)([(0,Z.Cb)({types:Je,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ke.prototype,"input",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],Ke.prototype,"requiredExpression",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{read:!1,write:!0}})],Ke.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],Ke.prototype,"valueExpression",void 0),Ke=be=(0,E._)([(0,V.j)(Ue)],Ke);const Ve=Ke;var rt,tt=g(56584);let Ne=rt=class extends k{constructor(Wt){super(Wt),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new rt({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:(0,w.d9)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],Ne.prototype,"displayCount",void 0),(0,E._)([(0,Z.Cb)({type:["list"],json:{write:!0}})],Ne.prototype,"displayType",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],Ne.prototype,"editable",void 0),(0,E._)([(0,Z.Cb)({type:[tt.Z],json:{write:!0}})],Ne.prototype,"orderByFields",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],Ne.prototype,"relationshipId",void 0),(0,E._)([(0,Z.Cb)({type:["relationship"],json:{read:!1,write:!0}})],Ne.prototype,"type",void 0),Ne=rt=(0,E._)([(0,V.j)("esri.form.elements.RelationshipElement")],Ne);const qe=Ne;function ft(Wt){return{typesWithGroup:{base:k,key:"type",typeMap:{attachment:$,field:Ve,group:Wt,relationship:qe}},typesWithoutGroup:{base:k,key:"type",typeMap:{attachment:$,field:Ve,relationship:qe}}}}function Xe(Wt,as,ys=!0){if(!Wt)return null;const bt=ys?as.typesWithGroup.typeMap:as.typesWithoutGroup.typeMap;return Wt.filter(Ts=>bt[Ts.type]).map(Ts=>bt[Ts.type].fromJSON(Ts))}function dt(Wt,as,ys=!0){if(!Wt)return null;const bt=ys?as.typesWithGroup.typeMap:as.typesWithoutGroup.typeMap;return Wt.filter(Ts=>bt[Ts.type]).map(Ts=>Ts.toJSON())}function Qe(Wt,as,ys=!0){return Wt?Wt.map(bt=>(0,A.N7)(ys?as.typesWithGroup:as.typesWithoutGroup,bt)):null}var ot;let ct=ot=class extends k{constructor(Wt){super(Wt),this.elements=null,this.initialState="expanded",this.type="group"}castElements(Wt){return Qe(Wt,_t,!1)}readElements(Wt,as){return Xe(as.formElements,_t,!1)}writeElements(Wt,as){as.formElements=dt(Wt,_t,!1)}clone(){return new ot({description:this.description,elements:(0,w.d9)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,E._)([(0,Z.Cb)({json:{write:!0}})],ct.prototype,"elements",void 0),(0,E._)([(0,x.p)("elements")],ct.prototype,"castElements",null),(0,E._)([(0,se.r)("elements",["formElements"])],ct.prototype,"readElements",null),(0,E._)([(0,W.c)("elements")],ct.prototype,"writeElements",null),(0,E._)([(0,Z.Cb)({type:["collapsed","expanded"],json:{write:!0}})],ct.prototype,"initialState",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{read:!1,write:!0}})],ct.prototype,"type",void 0),ct=ot=(0,E._)([(0,V.j)("esri.form.elements.GroupElement")],ct);const _t=ft(ct);var qt;const rs=ft(ct);let ss=qt=class extends T.wq{constructor(Wt){super(Wt),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(Wt){return Qe(Wt,rs)}readElements(Wt,as){return Xe(as.formElements,rs)}writeElements(Wt,as){as.formElements=dt(Wt,rs)}clone(){return new qt({description:this.description,expressionInfos:(0,w.d9)(this.expressionInfos),elements:(0,w.d9)(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],ss.prototype,"description",void 0),(0,E._)([(0,Z.Cb)({json:{write:!0}})],ss.prototype,"elements",void 0),(0,E._)([(0,x.p)("elements")],ss.prototype,"castElements",null),(0,E._)([(0,se.r)("elements",["formElements"])],ss.prototype,"readElements",null),(0,E._)([(0,W.c)("elements")],ss.prototype,"writeElements",null),(0,E._)([(0,Z.Cb)({type:[Q],json:{write:!0}})],ss.prototype,"expressionInfos",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{default:!1,write:!0}})],ss.prototype,"preserveFieldValuesWhenHidden",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],ss.prototype,"title",void 0),ss=qt=(0,E._)([(0,V.j)("esri.form.FormTemplate")],ss);const vs=ss},6010:(He,Pe,g)=>{"use strict";g.d(Pe,{qM:()=>J});var E=g(83382),T=g(10465),w=g(70535),Z=g(23675),x=g(35787),se=g(55733),V=g(7913);g(68230),g(86230),g(71182);const J={base:w.Z,key:"type",typeMap:{extent:T.Z,multipoint:Z.Z,point:x.Z,polyline:V.Z,polygon:se.Z}};(0,E.N7)(J)},10465:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>F});var k,E=g(18100),T=g(53661),w=g(3758),Z=g(9497),V=(g(83382),g(19420),g(20891)),W=g(70535),A=g(35787),U=g(68230),N=g(30446),J=g(76438),Q=g(53492),G=g(83550);function C(B,$,X){return null==$?X:null==X?$:B($,X)}let D=k=class extends W.Z{constructor(...B){super(...B),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(B,$,X,q,Y){return function z(B){return B&&("esri.geometry.SpatialReference"===B.declaredClass||null!=B.wkid)}(B)?{spatialReference:B,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof B?(B.spatialReference=null==B.spatialReference?U.Z.WGS84:B.spatialReference,B):{xmin:B,ymin:$,xmax:X,ymax:q,spatialReference:Y??U.Z.WGS84}}static fromBounds(B,$){return new k({xmin:B[0],ymin:B[1],xmax:B[2],ymax:B[3],spatialReference:$})}static fromPoint(B){return new k({xmin:B.x,ymin:B.y,zmin:B.z,xmax:B.x,ymax:B.y,zmax:B.z,spatialReference:B.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const B=new A.Z({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(B.z=.5*(this.zmin+this.zmax)),this.hasM&&(B.m=.5*(this.mmin+this.mmax)),B}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(B){const $=this.center;return null!=B.z&&this.hasZ?this.offset(B.x-$.x,B.y-$.y,B.z-$.z):this.offset(B.x-$.x,B.y-$.y)}clone(){const B=new k;return B.xmin=this.xmin,B.ymin=this.ymin,B.xmax=this.xmax,B.ymax=this.ymax,B.spatialReference=this.spatialReference,null!=this.zmin&&(B.zmin=this.zmin,B.zmax=this.zmax),null!=this.mmin&&(B.mmin=this.mmin,B.mmax=this.mmax),B}contains(B){if(!B)return!1;const $=this.spatialReference,X=B.spatialReference;return $&&X&&!$.equals(X)&&(0,G.Q8)($,X)&&(B=$.isWebMercator?(0,G.$)(B):(0,G.Sx)(B,!0)),"point"===B.type?(0,N.aV)(this,B):"extent"===B.type&&(0,N.uP)(this,B)}equals(B){if(this===B)return!0;if((0,T.Wi)(B))return!1;const $=this.spatialReference,X=B.spatialReference;return $&&X&&!$.equals(X)&&(0,G.Q8)($,X)&&(B=$.isWebMercator?(0,G.$)(B):(0,G.Sx)(B,!0)),this.xmin===B.xmin&&this.ymin===B.ymin&&this.zmin===B.zmin&&this.mmin===B.mmin&&this.xmax===B.xmax&&this.ymax===B.ymax&&this.zmax===B.zmax&&this.mmax===B.mmax}expand(B){const $=.5*(1-B),X=this.width*$,q=this.height*$;if(this.xmin+=X,this.ymin+=q,this.xmax-=X,this.ymax-=q,this.hasZ){const Y=(this.zmax-this.zmin)*$;this.zmin+=Y,this.zmax-=Y}if(this.hasM){const Y=(this.mmax-this.mmin)*$;this.mmin+=Y,this.mmax-=Y}return this}intersects(B){if((0,T.Wi)(B))return!1;"mesh"===B.type&&(B=B.extent);const $=this.spatialReference,X=B.spatialReference;return $&&X&&!(0,Q.fS)($,X)&&(0,G.Q8)($,X)&&(B=$.isWebMercator?(0,G.$)(B):(0,G.Sx)(B,!0)),(0,J.IY)(B.type)(this,B)}normalize(){const B=this._normalize(!1,!0);return Array.isArray(B)?B:[B]}offset(B,$,X){return this.xmin+=B,this.ymin+=$,this.xmax+=B,this.ymax+=$,null!=X&&(this.zmin+=X,this.zmax+=X),this}shiftCentralMeridian(){return this._normalize(!0)}union(B){return this===B||(this.xmin=Math.min(this.xmin,B.xmin),this.ymin=Math.min(this.ymin,B.ymin),this.xmax=Math.max(this.xmax,B.xmax),this.ymax=Math.max(this.ymax,B.ymax),(this.hasZ||B.hasZ)&&(this.zmin=C(Math.min,this.zmin,B.zmin),this.zmax=C(Math.max,this.zmax,B.zmax)),(this.hasM||B.hasM)&&(this.mmin=C(Math.min,this.mmin,B.mmin),this.mmax=C(Math.max,this.mmax,B.mmax))),this}intersection(B){return this===B?this:(0,T.Wi)(B)||!this.intersects(B)?null:(this.xmin=Math.max(this.xmin,B.xmin),this.ymin=Math.max(this.ymin,B.ymin),this.xmax=Math.min(this.xmax,B.xmax),this.ymax=Math.min(this.ymax,B.ymax),(this.hasZ||B.hasZ)&&(this.zmin=C(Math.max,this.zmin,B.zmin),this.zmax=C(Math.min,this.zmax,B.zmax)),(this.hasM||B.hasM)&&(this.mmin=C(Math.max,this.mmin,B.mmin),this.mmax=C(Math.min,this.mmax,B.mmax)),this)}toJSON(B){return this.write({},B)}_shiftCM(B=(0,Q.C5)(this.spatialReference)){if(!B||!this.spatialReference)return this;const $=this.spatialReference,X=this._getCM(B);if(X){const q=$.isWebMercator?(0,G.Sx)(X):X;this.xmin-=X.x,this.xmax-=X.x,$.isWebMercator||(q.x=this._normalizeX(q.x,B).x),this.spatialReference=new U.Z((0,w.gx)(($.isWGS84?B.altTemplate:null)??B.wkTemplate,{Central_Meridian:q.x}))}return this}_getCM(B){let $=null;const[X,q]=B.valid,Y=this.xmin,ae=this.xmax;return Y>=X&&Y<=q&&ae>=X&&ae<=q||($=this.center),$}_normalize(B,$,X){const q=this.spatialReference;if(!q)return this;const Y=X??(0,Q.C5)(q);if(null==Y)return this;const ae=this._getParts(Y).map(ue=>ue.extent);if(ae.length<2)return ae[0]||this;if(ae.length>2)return B?this._shiftCM(Y):this.set({xmin:Y.valid[0],xmax:Y.valid[1]});if(B)return this._shiftCM(Y);if($)return ae;let he=!0,ne=!0;return ae.forEach(ue=>{ue.hasZ||(he=!1),ue.hasM||(ne=!1)}),{rings:ae.map(ue=>{const te=[[ue.xmin,ue.ymin],[ue.xmin,ue.ymax],[ue.xmax,ue.ymax],[ue.xmax,ue.ymin],[ue.xmin,ue.ymin]];if(he){const ie=(ue.zmax-ue.zmin)/2;for(let fe=0;fe<te.length;fe++)te[fe].push(ie)}if(ne){const ie=(ue.mmax-ue.mmin)/2;for(let fe=0;fe<te.length;fe++)te[fe].push(ie)}return te}),hasZ:he,hasM:ne,spatialReference:q}}_getParts(B){let $=this.cache._parts;if(!$){$=[];const{ymin:Y,ymax:ae,spatialReference:he}=this,ne=this.width,ue=this.xmin,te=this.xmax;let ie;B=B||(0,Q.C5)(he);const[fe,_e]=B.valid;ie=this._normalizeX(this.xmin,B);const de=ie.x,Oe=ie.frameId;ie=this._normalizeX(this.xmax,B);const re=ie.x,le=ie.frameId,ce=de===re&&ne>0;if(ne>2*_e){const ve=new k(ue<te?de:re,Y,_e,ae,he),Te=new k(fe,Y,ue<te?re:de,ae,he),ge=new k(0,Y,_e,ae,he),Ae=new k(fe,Y,0,ae,he),De=[],Se=[];ve.contains(ge)&&De.push(Oe),ve.contains(Ae)&&Se.push(Oe),Te.contains(ge)&&De.push(le),Te.contains(Ae)&&Se.push(le);for(let me=Oe+1;me<le;me++)De.push(me),Se.push(me);$.push({extent:ve,frameIds:[Oe]},{extent:Te,frameIds:[le]},{extent:ge,frameIds:De},{extent:Ae,frameIds:Se})}else de>re||ce?$.push({extent:new k(de,Y,_e,ae,he),frameIds:[Oe]},{extent:new k(fe,Y,re,ae,he),frameIds:[le]}):$.push({extent:new k(de,Y,re,ae,he),frameIds:[Oe]});this.cache._parts=$}const X=this.hasZ,q=this.hasM;if(X||q){const Y={};X&&(Y.zmin=this.zmin,Y.zmax=this.zmax),q&&(Y.mmin=this.mmin,Y.mmax=this.mmax);for(let ae=0;ae<$.length;ae++)$[ae].extent.set(Y)}return $}_normalizeX(B,$){const[X,q]=$.valid,Y=2*q;let ae,he=0;return B>q?(ae=Math.ceil(Math.abs(B-q)/Y),B-=ae*Y,he=ae):B<X&&(ae=Math.ceil(Math.abs(B-X)/Y),B+=ae*Y,he=-ae),{x:B,frameId:he}}};(0,E._)([(0,Z.Cb)({readOnly:!0})],D.prototype,"cache",null),(0,E._)([(0,Z.Cb)({readOnly:!0})],D.prototype,"center",null),(0,E._)([(0,Z.Cb)({readOnly:!0})],D.prototype,"extent",null),(0,E._)([(0,Z.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],D.prototype,"hasM",null),(0,E._)([(0,Z.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],D.prototype,"hasZ",null),(0,E._)([(0,Z.Cb)({readOnly:!0})],D.prototype,"height",null),(0,E._)([(0,Z.Cb)({readOnly:!0})],D.prototype,"width",null),(0,E._)([(0,Z.Cb)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],D.prototype,"xmin",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],D.prototype,"ymin",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],D.prototype,"mmin",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],D.prototype,"zmin",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],D.prototype,"xmax",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],D.prototype,"ymax",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],D.prototype,"mmax",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],D.prototype,"zmax",void 0),D=k=(0,E._)([(0,V.j)("esri.geometry.Extent")],D),D.prototype.toJSON.isDefaultToJSON=!0;const F=D},70535:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(66508)),V=g(20891),W=g(68230);let A=class extends T.wq{constructor(...N){super(...N),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=W.Z.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(N,J){if(N instanceof W.Z)return N;if(null!=N){const Q=new W.Z;return Q.read(N,J),Q}return N}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(N){return this.cache[N]}setCacheValue(N,J){this.cache[N]=J}};(0,E._)([(0,w.Cb)()],A.prototype,"type",void 0),(0,E._)([(0,w.Cb)({readOnly:!0})],A.prototype,"cache",null),(0,E._)([(0,w.Cb)({readOnly:!0})],A.prototype,"extent",null),(0,E._)([(0,w.Cb)({type:Boolean,json:{write:{overridePolicy:N=>({enabled:N})}}})],A.prototype,"hasM",void 0),(0,E._)([(0,w.Cb)({type:Boolean,json:{write:{overridePolicy:N=>({enabled:N})}}})],A.prototype,"hasZ",void 0),(0,E._)([(0,w.Cb)({type:W.Z,json:{write:!0},value:W.Z.WGS84})],A.prototype,"spatialReference",void 0),(0,E._)([(0,se.r)("spatialReference")],A.prototype,"readSpatialReference",null),A=(0,E._)([(0,V.j)("esri.geometry.Geometry")],A);const U=A},96095:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>F});var J,E=g(18100),T=g(19420),w=g(63321),Z=g(44480),x=g(82769),se=g(23476),V=g(9497),A=(g(83382),g(66508)),U=g(20891),N=g(70425);const Q=(0,w.w)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),G=Q.jsonValues.slice();(0,T.e$)(G,"orthometric");const k=(0,w.w)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let z=J=class extends Z.wq{constructor(B){super(B),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(B,$,X){return Q.write(B,$,X)}readHeightModel(B,$,X){return Q.read(B)||(X&&X.messages&&X.messages.push(function D(B,$){return new se.Z("height-model:unsupported",`Height model of value '${B}' is not supported`,$)}(B,{context:X})),null)}readHeightUnit(B,$,X){return k.read(B)||(X&&X.messages&&X.messages.push(C(B,{context:X})),null)}readHeightUnitService(B,$,X){return(0,x.$C)(B)||k.read(B)||(X&&X.messages&&X.messages.push(C(B,{context:X})),null)}readVertCRS(B,$){return $.vertCRS||$.ellipsoid||$.geoid}clone(){return new J({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(B){return!!B&&(this===B||this.heightModel===B.heightModel&&this.heightUnit===B.heightUnit&&this.vertCRS===B.vertCRS)}static deriveUnitFromSR(B,$){const X=(0,x.cM)($);return new J({heightModel:B.heightModel,heightUnit:X,vertCRS:B.vertCRS})}write(B,$){return $={origin:"web-scene",...$},super.write(B,$)}static fromJSON(B){if(!B)return null;const $=new J;return $.read(B,{origin:"web-scene"}),$}};function C(B,$){return new se.Z("height-unit:unsupported",`Height unit of value '${B}' is not supported`,$)}(0,E._)([(0,V.Cb)({type:Q.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:G,default:"ellipsoidal"}}}})],z.prototype,"heightModel",void 0),(0,E._)([(0,N.c)("web-scene","heightModel")],z.prototype,"writeHeightModel",null),(0,E._)([(0,A.r)(["web-scene","service"],"heightModel")],z.prototype,"readHeightModel",null),(0,E._)([(0,V.Cb)({type:k.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:k.jsonValues,write:k.write}}}})],z.prototype,"heightUnit",void 0),(0,E._)([(0,A.r)("web-scene","heightUnit")],z.prototype,"readHeightUnit",null),(0,E._)([(0,A.r)("service","heightUnit")],z.prototype,"readHeightUnitService",null),(0,E._)([(0,V.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],z.prototype,"vertCRS",void 0),(0,E._)([(0,A.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],z.prototype,"readVertCRS",null),z=J=(0,E._)([(0,U.j)("esri.geometry.HeightModelInfo")],z);const F=z},23675:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var N,E=g(18100),T=g(88684),w=g(9497),x=(g(83382),g(20891)),se=g(70425),V=g(10465),W=g(70535),A=g(35787),U=g(13914);function J(z){return(C,D)=>null==C?D:null==D?C:z(C,D)}let G=N=class extends W.Z{constructor(...z){super(...z),this.points=[],this.type="multipoint"}normalizeCtorArgs(z,C){if(!z&&!C)return{};const D={};Array.isArray(z)?(D.points=z,D.spatialReference=C):function Q(z){return z&&("esri.geometry.SpatialReference"===z.declaredClass||null!=z.wkid)}(z)?D.spatialReference=z:(z.points&&(D.points=z.points),z.spatialReference&&(D.spatialReference=z.spatialReference),z.hasZ&&(D.hasZ=z.hasZ),z.hasM&&(D.hasM=z.hasM));const F=D.points&&D.points[0];return F&&(void 0===D.hasZ&&void 0===D.hasM?(D.hasZ=F.length>2,D.hasM=!1):void 0===D.hasZ?D.hasZ=F.length>3:void 0===D.hasM&&(D.hasM=F.length>3)),D}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const z=this.points;if(!z.length)return null;const C=new V.Z,D=this.hasZ,F=this.hasM,B=D?3:2,$=z[0],X=J(Math.min),q=J(Math.max);let Y,ae,he,ne,[ue,te]=$,[ie,fe]=$;for(let _e=0,de=z.length;_e<de;_e++){const Oe=z[_e],[re,le]=Oe;if(ue=X(ue,re),te=X(te,le),ie=q(ie,re),fe=q(fe,le),D&&Oe.length>2){const ce=Oe[2];Y=X(Y,ce),he=q(he,ce)}if(F&&Oe.length>B){const ce=Oe[B];ae=X(ae,ce),ne=q(ne,ce)}}return C.xmin=ue,C.ymin=te,C.xmax=ie,C.ymax=fe,C.spatialReference=this.spatialReference,D?(C.zmin=Y,C.zmax=he):(C.zmin=void 0,C.zmax=void 0),F?(C.mmin=ae,C.mmax=ne):(C.mmin=void 0,C.mmax=void 0),C}writePoints(z,C){C.points=(0,T.d9)(this.points)}addPoint(z){return(0,U.l)(this,z),Array.isArray(z)?this.points.push(z):this.points.push(z.toArray()),this.notifyChange("points"),this}clone(){const z={points:(0,T.d9)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(z.hasZ=!0),this.hasM&&(z.hasM=!0),new N(z)}getPoint(z){if(!this._validateInputs(z))return null;const C=this.points[z],D={x:C[0],y:C[1],spatialReference:this.spatialReference};let F=2;return this.hasZ&&(D.z=C[2],F=3),this.hasM&&(D.m=C[F]),new A.Z(D)}removePoint(z){if(!this._validateInputs(z))return null;const C=new A.Z(this.points.splice(z,1)[0],this.spatialReference);return this.notifyChange("points"),C}setPoint(z,C){return this._validateInputs(z)?((0,U.l)(this,C),Array.isArray(C)||(C=C.toArray()),this.points[z]=C,this.notifyChange("points"),this):this}toJSON(z){return this.write({},z)}_validateInputs(z){return null!=z&&z>=0&&z<this.points.length}};(0,E._)([(0,w.Cb)({readOnly:!0})],G.prototype,"cache",null),(0,E._)([(0,w.Cb)()],G.prototype,"extent",null),(0,E._)([(0,w.Cb)({type:[[Number]],json:{write:{isRequired:!0}}})],G.prototype,"points",void 0),(0,E._)([(0,se.c)("points")],G.prototype,"writePoints",null),G=N=(0,E._)([(0,x.j)("esri.geometry.Multipoint")],G),G.prototype.toJSON.isDefaultToJSON=!0;const k=G},35787:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>$});var C,E=g(18100),T=g(28191),w=g(53661),Z=g(9497),x=g(36734),V=(g(19420),g(66508)),W=g(20891),A=g(70425),U=g(83382),N=g(70535),J=g(68230),k=g(53492),z=g(83550);const D=[0,0];function F(X){return X&&("esri.geometry.SpatialReference"===X.declaredClass||null!=X.wkid)}let B=C=class extends N.Z{static copy(X,q){q._set("x",X._get("x")),q._set("y",X._get("y")),q._set("z",X._get("z")),q._set("m",X._get("m"));const Y=X._get("spatialReference");q._set("spatialReference",Object.isFrozen(Y)?Y:Y.clone())}constructor(...X){super(...X),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(X,q,Y,ae,he){let ne;if(Array.isArray(X))ne=X,he=q,X=ne[0],q=ne[1],Y=ne[2],ae=ne[3];else if(X&&"object"==typeof X){if(ne=X,X=null!=ne.x?ne.x:ne.longitude,q=null!=ne.y?ne.y:ne.latitude,Y=ne.z,ae=ne.m,(he=ne.spatialReference)&&"esri.geometry.SpatialReference"!==he.declaredClass&&(he=new J.Z(he)),null!=ne.longitude||null!=ne.latitude)if(null==ne.longitude)T.Z.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(null==ne.latitude)T.Z.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!ne.declaredClass&&he&&he.isWebMercator){const te=(0,z.hG)(ne.longitude,ne.latitude,D);X=te[0],q=te[1]}}else F(Y)?(he=Y,Y=null):F(ae)&&(he=ae,ae=null);const ue={x:X,y:q};return null==ue.x&&null!=ue.y?T.Z.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):null==ue.y&&null!=ue.x&&T.Z.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),null!=he&&(ue.spatialReference=he),null!=Y&&(ue.z=Y),null!=ae&&(ue.m=ae),ue}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(X){X!==(void 0!==this._get("m"))&&(this._set("m",X?0:void 0),this._set("hasM",X))}get hasZ(){return void 0!==this.z}set hasZ(X){X!==(void 0!==this._get("z"))&&(this._set("z",X?0:void 0),this._set("hasZ",X))}get latitude(){const{spatialReference:X,x:q,y:Y}=this;if(X){if(X.isWebMercator)return(0,z.R6)(q,Y,D)[1];if(X.isGeographic)return Y}return null}set latitude(X){const{spatialReference:q,x:Y}=this;null!=X&&q&&(q.isWebMercator?this._set("y",(0,z.hG)(Y,X,D)[1]):q.isGeographic&&this._set("y",X),this._set("latitude",X))}get longitude(){const{x:X,y:q,spatialReference:Y}=this;if(Y){if(Y.isWebMercator)return(0,z.R6)(X,q,D)[0];if(Y.isGeographic)return X}return null}set longitude(X){const{y:q,spatialReference:Y}=this;null!=X&&Y&&(Y.isWebMercator?this._set("x",(0,z.hG)(X,q,D)[0]):Y.isGeographic&&this._set("x",X),this._set("longitude",X))}writeX(X,q,Y){q[Y]=isNaN(X)?"NaN":X}readX(X){return"string"==typeof X?NaN:X}clone(){const X=new C;return X.x=this.x,X.y=this.y,X.z=this.z,X.m=this.m,X.spatialReference=this.spatialReference,X}copy(X){return C.copy(X,this),this}equals(X){if((0,w.Wi)(X))return!1;const{x:q,y:Y,z:ae,m:he,spatialReference:ne}=this,{z:ue,m:te}=X;let{x:ie,y:fe,spatialReference:_e}=X;if(!ne.equals(_e))if(ne.isWebMercator&&_e.isWGS84)[ie,fe]=(0,z.hG)(ie,fe),_e=ne;else{if(!ne.isWGS84||!_e.isWebMercator)return!1;[ie,fe]=(0,z.R6)(ie,fe),_e=ne}return q===ie&&Y===fe&&ae===ue&&he===te&&ne.wkid===_e.wkid}offset(X,q,Y){return this.x+=X,this.y+=q,null!=Y&&(this.z=(this.z??0)+Y),this}normalize(){if(!this.spatialReference)return this;const X=(0,k.C5)(this.spatialReference);if(!X)return this;let q=this.x;const[Y,ae]=X.valid,he=2*ae;let ne;return q>ae?(ne=Math.ceil(Math.abs(q-ae)/he),q-=ne*he):q<Y&&(ne=Math.ceil(Math.abs(q-Y)/he),q+=ne*he),this._set("x",q),this}distance(X){return function Q(X,q){const Y=X.x-q.x,ae=X.y-q.y,he=X.hasZ&&q.hasZ?X.z-q.z:0;return Math.sqrt(Y*Y+ae*ae+he*he)}(this,X)}toArray(){const X=this.hasZ,q=this.hasM;return X&&q?[this.x,this.y,this.z,this.m]:X?[this.x,this.y,this.z]:q?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(X){return this.write({},X)}};(0,E._)([(0,Z.Cb)({readOnly:!0})],B.prototype,"cache",null),(0,E._)([(0,Z.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],B.prototype,"hasM",null),(0,E._)([(0,Z.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],B.prototype,"hasZ",null),(0,E._)([(0,Z.Cb)({type:Number})],B.prototype,"latitude",null),(0,E._)([(0,Z.Cb)({type:Number})],B.prototype,"longitude",null),(0,E._)([(0,Z.Cb)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),(0,x.p)(X=>isNaN(X)?X:(0,U.q9)(X))],B.prototype,"x",void 0),(0,E._)([(0,A.c)("x")],B.prototype,"writeX",null),(0,E._)([(0,V.r)("x")],B.prototype,"readX",null),(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],B.prototype,"y",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],B.prototype,"z",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],B.prototype,"m",void 0),B=C=(0,E._)([(0,W.j)("esri.geometry.Point")],B),B.prototype.toJSON.isDefaultToJSON=!0;const $=B},55733:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>q});var B,E=g(18100),T=g(19420),w=g(88684),Z=g(53661),x=g(9497),V=(g(83382),g(20891)),W=g(70425),A=g(10465),U=g(70535),N=g(35787),J=g(68230),Q=g(78127),G=g(30446),k=g(12818),z=g(84572),C=g(76438),D=g(83550),F=g(13914);function $(Y){return!Array.isArray(Y[0])}let X=B=class extends U.Z{static fromExtent(Y){const ae=Y.clone().normalize(),he=Y.spatialReference;let ne=!1,ue=!1;for(const ie of ae)ie.hasZ&&(ne=!0),ie.hasM&&(ue=!0);const te={rings:ae.map(ie=>{const fe=[[ie.xmin,ie.ymin],[ie.xmin,ie.ymax],[ie.xmax,ie.ymax],[ie.xmax,ie.ymin],[ie.xmin,ie.ymin]];if(ne&&ie.hasZ){const _e=ie.zmin+.5*(ie.zmax-ie.zmin);for(let de=0;de<fe.length;de++)fe[de].push(_e)}if(ue&&ie.hasM){const _e=ie.mmin+.5*(ie.mmax-ie.mmin);for(let de=0;de<fe.length;de++)fe[de].push(_e)}return fe}),spatialReference:he};return ne&&(te.hasZ=!0),ue&&(te.hasM=!0),new B(te)}constructor(...Y){super(...Y),this.rings=[],this.type="polygon"}normalizeCtorArgs(Y,ae){let he,ne,ue=null,te=null;return Y&&!Array.isArray(Y)?(ue=Y.rings?Y.rings:null,ae||(Y.spatialReference?ae=Y.spatialReference:Y.rings||(ae=Y)),he=Y.hasZ,ne=Y.hasM):ue=Y,ue=ue||[],ue.length&&ue[0]&&null!=ue[0][0]&&"number"==typeof ue[0][0]&&(ue=[ue]),te=ue[0]&&ue[0][0],te&&(void 0===he&&void 0===ne?(he=te.length>2,ne=te.length>3):void 0===he?he=ne?te.length>3:te.length>2:void 0===ne&&(ne=he?te.length>3:te.length>2)),{rings:ue,spatialReference:ae=ae||J.Z.WGS84,hasZ:he,hasM:ne}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const Y=(0,Q.tO)(this);if(!Y||isNaN(Y[0])||isNaN(Y[1])||this.hasZ&&isNaN(Y[2]))return null;const ae=new N.Z;return ae.x=Y[0],ae.y=Y[1],ae.spatialReference=this.spatialReference,this.hasZ&&(ae.z=Y[2]),ae}get extent(){const{spatialReference:Y}=this,ae=(0,z._w)(this);if(!ae)return null;const he=new A.Z(ae);return he.spatialReference=Y,he}get isSelfIntersecting(){return(0,C.Ff)(this.rings)}writeRings(Y,ae){ae.rings=(0,w.d9)(this.rings)}addRing(Y){if(!Y)return;const ae=this.rings,he=ae.length;if($(Y)){const ne=[];for(let ue=0,te=Y.length;ue<te;ue++)ne[ue]=Y[ue].toArray();ae[he]=ne}else ae[he]=Y.concat();return this.notifyChange("rings"),this}clone(){const Y=new B;return Y.spatialReference=this.spatialReference,Y.rings=(0,w.d9)(this.rings),Y.hasZ=this.hasZ,Y.hasM=this.hasM,Y}equals(Y){if(this===Y)return!0;if((0,Z.Wi)(Y))return!1;const ae=this.spatialReference,he=Y.spatialReference;if((0,Z.pC)(ae)!==(0,Z.pC)(he)||(0,Z.pC)(ae)&&(0,Z.pC)(he)&&!ae.equals(he)||this.rings.length!==Y.rings.length)return!1;const ne=([ue,te,ie,fe],[_e,de,Oe,re])=>ue===_e&&te===de&&(null==ie&&null==Oe||ie===Oe)&&(null==fe&&null==re||fe===re);for(let ue=0;ue<this.rings.length;ue++)if(!(0,T.fS)(this.rings[ue],Y.rings[ue],ne))return!1;return!0}contains(Y){if(!Y)return!1;const ae=(0,D.iV)(Y,this.spatialReference);return(0,G.CI)(this,(0,Z.pC)(ae)?ae:Y)}isClockwise(Y){let ae;return ae=$(Y)?Y.map(he=>this.hasZ?this.hasM?[he.x,he.y,he.z,he.m]:[he.x,he.y,he.z]:[he.x,he.y]):Y,(0,k.bu)(ae,this.hasM,this.hasZ)}getPoint(Y,ae){if(!this._validateInputs(Y,ae))return null;const he=this.rings[Y][ae],ne=this.hasZ,ue=this.hasM;return ne&&!ue?new N.Z(he[0],he[1],he[2],void 0,this.spatialReference):ue&&!ne?new N.Z(he[0],he[1],void 0,he[2],this.spatialReference):ne&&ue?new N.Z(he[0],he[1],he[2],he[3],this.spatialReference):new N.Z(he[0],he[1],this.spatialReference)}insertPoint(Y,ae,he){return this._validateInputs(Y,ae,!0)?((0,F.l)(this,he),Array.isArray(he)||(he=he.toArray()),this.rings[Y].splice(ae,0,he),this.notifyChange("rings"),this):this}removePoint(Y,ae){if(!this._validateInputs(Y,ae))return null;const he=new N.Z(this.rings[Y].splice(ae,1)[0],this.spatialReference);return this.notifyChange("rings"),he}removeRing(Y){if(!this._validateInputs(Y,null))return null;const ae=this.rings.splice(Y,1)[0],he=this.spatialReference,ne=ae.map(ue=>new N.Z(ue,he));return this.notifyChange("rings"),ne}setPoint(Y,ae,he){return this._validateInputs(Y,ae)?((0,F.l)(this,he),Array.isArray(he)||(he=he.toArray()),this.rings[Y][ae]=he,this.notifyChange("rings"),this):this}_validateInputs(Y,ae,he=!1){if(null==Y||Y<0||Y>=this.rings.length)return!1;if(null!=ae){const ne=this.rings[Y];if(he&&(ae<0||ae>ne.length)||!he&&(ae<0||ae>=ne.length))return!1}return!0}toJSON(Y){return this.write({},Y)}};(0,E._)([(0,x.Cb)({readOnly:!0})],X.prototype,"cache",null),(0,E._)([(0,x.Cb)({readOnly:!0})],X.prototype,"centroid",null),(0,E._)([(0,x.Cb)({readOnly:!0})],X.prototype,"extent",null),(0,E._)([(0,x.Cb)({readOnly:!0})],X.prototype,"isSelfIntersecting",null),(0,E._)([(0,x.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],X.prototype,"rings",void 0),(0,E._)([(0,W.c)("rings")],X.prototype,"writeRings",null),X=B=(0,E._)([(0,V.j)("esri.geometry.Polygon")],X),X.prototype.toJSON.isDefaultToJSON=!0;const q=X},7913:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>z});var Q,E=g(18100),T=g(88684),w=g(9497),x=(g(83382),g(20891)),se=g(70425),V=g(10465),W=g(70535),A=g(35787),U=g(68230),N=g(84572),J=g(13914);let k=Q=class extends W.Z{constructor(...C){super(...C),this.paths=[],this.type="polyline"}normalizeCtorArgs(C,D){let F,B,$=null,X=null;return C&&!Array.isArray(C)?($=C.paths?C.paths:null,D||(C.spatialReference?D=C.spatialReference:C.paths||(D=C)),F=C.hasZ,B=C.hasM):$=C,$=$||[],$.length&&$[0]&&null!=$[0][0]&&"number"==typeof $[0][0]&&($=[$]),X=$[0]&&$[0][0],X&&(void 0===F&&void 0===B?(F=X.length>2,B=!1):void 0===F?F=!B&&X.length>3:void 0===B&&(B=!F&&X.length>3)),{paths:$,spatialReference:D=D||U.Z.WGS84,hasZ:F,hasM:B}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:C}=this,D=(0,N.Wn)(this);if(!D)return null;const F=new V.Z(D);return F.spatialReference=C,F}writePaths(C,D){D.paths=(0,T.d9)(this.paths)}addPath(C){if(!C)return;const D=this.paths,F=D.length;if(function G(C){return!Array.isArray(C[0])}(C)){const B=[];for(let $=0,X=C.length;$<X;$++)B[$]=C[$].toArray();D[F]=B}else D[F]=C.concat();return this.notifyChange("paths"),this}clone(){const C=new Q;return C.spatialReference=this.spatialReference,C.paths=(0,T.d9)(this.paths),C.hasZ=this.hasZ,C.hasM=this.hasM,C}getPoint(C,D){if(!this._validateInputs(C,D))return null;const F=this.paths[C][D],B=this.hasZ,$=this.hasM;return B&&!$?new A.Z(F[0],F[1],F[2],void 0,this.spatialReference):$&&!B?new A.Z(F[0],F[1],void 0,F[2],this.spatialReference):B&&$?new A.Z(F[0],F[1],F[2],F[3],this.spatialReference):new A.Z(F[0],F[1],this.spatialReference)}insertPoint(C,D,F){return this._validateInputs(C,D,!0)?((0,J.l)(this,F),Array.isArray(F)||(F=F.toArray()),this.paths[C].splice(D,0,F),this.notifyChange("paths"),this):this}removePath(C){if(!this._validateInputs(C,null))return null;const D=this.paths.splice(C,1)[0],F=this.spatialReference,B=D.map($=>new A.Z($,F));return this.notifyChange("paths"),B}removePoint(C,D){if(!this._validateInputs(C,D))return null;const F=new A.Z(this.paths[C].splice(D,1)[0],this.spatialReference);return this.notifyChange("paths"),F}setPoint(C,D,F){return this._validateInputs(C,D)?((0,J.l)(this,F),Array.isArray(F)||(F=F.toArray()),this.paths[C][D]=F,this.notifyChange("paths"),this):this}_validateInputs(C,D,F=!1){if(null==C||C<0||C>=this.paths.length)return!1;if(null!=D){const B=this.paths[C];if(F&&(D<0||D>B.length)||!F&&(D<0||D>=B.length))return!1}return!0}toJSON(C){return this.write({},C)}};(0,E._)([(0,w.Cb)({readOnly:!0})],k.prototype,"cache",null),(0,E._)([(0,w.Cb)({readOnly:!0})],k.prototype,"extent",null),(0,E._)([(0,w.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],k.prototype,"paths",void 0),(0,E._)([(0,se.c)("paths")],k.prototype,"writePaths",null),k=Q=(0,E._)([(0,x.j)("esri.geometry.Polyline")],k),k.prototype.toJSON.isDefaultToJSON=!0;const z=k},68230:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>J});var U,E=g(18100),T=g(44480),w=g(88684),Z=g(82769),x=g(83382),se=g(9497),V=g(20891),W=g(70425),A=g(53492);let N=U=class extends T.wq{static fromJSON(Q){if(!Q)return null;if(Q.wkid){if(102100===Q.wkid)return U.WebMercator;if(4326===Q.wkid)return U.WGS84}const G=new U;return G.read(Q),G}constructor(Q){super(Q),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(Q){return Q&&"object"==typeof Q?Q:{["string"==typeof Q?"wkt":"wkid"]:Q}}get isWGS84(){return(0,A.oR)(this)}get isWebMercator(){return(0,A.sS)(this)}get isGeographic(){return(0,A.sT)(this)}get isWrappable(){return(0,A.MP)(this)}get metersPerUnit(){return(0,Z.c9)(this)}get unit(){return(0,Z.qE)(this)||(this.isGeographic?"degrees":null)}writeWkt(Q,G){this.wkid||(G.wkt=Q)}clone(){if(this===U.WGS84)return U.WGS84;if(this===U.WebMercator)return U.WebMercator;const Q=new U;return null!=this.wkid?(Q.wkid=this.wkid,null!=this.latestWkid&&(Q.latestWkid=this.latestWkid),null!=this.vcsWkid&&(Q.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(Q.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(Q.wkt=this.wkt),this.imageCoordinateSystem&&(Q.imageCoordinateSystem=(0,w.d9)(this.imageCoordinateSystem)),Q}equals(Q){if(null==Q)return!1;if(this.imageCoordinateSystem||Q.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==Q.imageCoordinateSystem)return!1;const{id:G,referenceServiceName:k}=Q.imageCoordinateSystem,{geodataXform:z}=Q.imageCoordinateSystem,C=this.imageCoordinateSystem;return null==G||z?JSON.stringify(C)===JSON.stringify(Q.imageCoordinateSystem):k?C.id===G&&C.referenceServiceName===k:C.id===G}return(0,A.fS)(this,Q)}toJSON(Q){return this.write(void 0,Q)}};N.GCS_NAD_1927=null,N.WGS84=null,N.WebMercator=null,N.PlateCarree=null,(0,E._)([(0,se.Cb)({readOnly:!0})],N.prototype,"isWGS84",null),(0,E._)([(0,se.Cb)({readOnly:!0})],N.prototype,"isWebMercator",null),(0,E._)([(0,se.Cb)({readOnly:!0})],N.prototype,"isGeographic",null),(0,E._)([(0,se.Cb)({readOnly:!0})],N.prototype,"isWrappable",null),(0,E._)([(0,se.Cb)({type:x.z8,json:{write:!0}})],N.prototype,"latestWkid",void 0),(0,E._)([(0,se.Cb)({readOnly:!0})],N.prototype,"metersPerUnit",null),(0,E._)([(0,se.Cb)({readOnly:!0})],N.prototype,"unit",null),(0,E._)([(0,se.Cb)({type:x.z8,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkt}}}}}}})],N.prototype,"wkid",void 0),(0,E._)([(0,se.Cb)({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkid}}}}}}})],N.prototype,"wkt",void 0),(0,E._)([(0,W.c)("wkt"),(0,W.c)("web-scene","wkt")],N.prototype,"writeWkt",null),(0,E._)([(0,se.Cb)({type:x.z8,json:{write:!0}})],N.prototype,"vcsWkid",void 0),(0,E._)([(0,se.Cb)({type:x.z8,json:{write:!0}})],N.prototype,"latestVcsWkid",void 0),(0,E._)([(0,se.Cb)()],N.prototype,"imageCoordinateSystem",void 0),N=U=(0,E._)([(0,V.j)("esri.geometry.SpatialReference")],N),N.prototype.toJSON.isDefaultToJSON=!0,N.GCS_NAD_1927=new N({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),N.WGS84=new N(A.Zn),N.WebMercator=new N(A.R_),N.PlateCarree=new N(A.WR),Object.freeze&&(Object.freeze(N.GCS_NAD_1927),Object.freeze(N.WGS84),Object.freeze(N.WebMercator));const J=N},64004:(He,Pe,g)=>{"use strict";g.d(Pe,{Iu:()=>A,JL:()=>se,e8:()=>U,kU:()=>x,mM:()=>V,pn:()=>W});var E=g(53661),T=g(86355),w=g(53492);function Z(N){return{wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${N.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`}}const x=Z(T.sv),se=Z(T.yr),V=Z(T.Z1),W={wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${T.sv.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`};function A(N){return(0,E.pC)(N)&&((0,w.BZ)(N)||(0,w.fS)(N,se))?T.yr:(0,E.pC)(N)&&((0,w.V2)(N)||(0,w.fS)(N,V))?T.Z1:T.sv}function U(N){return(0,w.o$)(N)?T.yr:(0,w.ME)(N)?T.Z1:T.sv}},21789:(He,Pe,g)=>{"use strict";g.d(Pe,{Up:()=>Ie,Bm:()=>Tt,rS:()=>De,iQ:()=>je,kR:()=>le,zD:()=>ce,iV:()=>ve,CM:()=>Wt,oj:()=>Te,dz:()=>ge,JY:()=>Ae,KC:()=>_t,Wt:()=>ft});var E=g(71670),T=g(32995),w=g(93142),Z=g(53661),x=g(30801),se=g(82769),V=g(64137),W=g(33119),A=g(64544),N=(g(92950),g(77765)),J=g(64004),Q=g(10465),G=g(23675),k=g(48323),z=g(35787),C=g(55733),D=g(7913),B=(g(6848),g(86355));Math;const q=B.sv.radius,Y=B.sv.eccentricitySquared,ae={a1:q*Y,a2:q*Y*q*Y,a3:q*Y*Y/2,a4:q*Y*q*Y*2.5,a5:q*Y+q*Y*Y/2,a6:1-Y};var ne=g(16161),ue=g(53492),te=g(39498),ie=g(83970);let fe=null,_e=null,de=null,Oe={};const re=new W.s;function le(){return!!fe&&(0,k.i)()}function ce(lt){return(0,Z.Wi)(de)&&(de=Promise.all([(0,k.l)(),g.e(7640).then(g.bind(g,77640)).then(gt=>gt.g),g.e(8592).then(g.bind(g,45774))])),de.then(([,gt,{hydratedAdapter:it}])=>{(0,x.k_)(lt),_e=it,fe=gt.default,fe._enableProjection(k.p),re.notify()})}function ve(lt,gt,it=null,Dt=null){return Array.isArray(lt)?0===lt.length?[]:Te(_e,lt,lt[0].spatialReference,gt,it,Dt):Te(_e,[lt],lt.spatialReference,gt,it,Dt)[0]}function Te(lt,gt,it,Dt,kt=null,Ms=null){if((0,Z.Wi)(it)||(0,Z.Wi)(Dt))return gt;if(Ie(it,Dt,kt))return gt.map(ws=>(0,Z.Wg)(function be(lt,gt,it){return lt?"x"in lt?function Fe(lt,gt,it,Dt,kt){xs[0]=lt.x,xs[1]=lt.y;const Ms=lt.z;return xs[2]=void 0!==Ms?Ms:kt,Wt(xs,gt,0,xs,Dt,0,1)?(it.x=xs[0],it.y=xs[1],it.spatialReference=Dt,void 0===Ms?(it.z=void 0,it.hasZ=!1):(it.z=xs[2],it.hasZ=!0),void 0===lt.m?(it.m=void 0,it.hasM=!1):(it.m=lt.m,it.hasM=!0),it):null}(lt,gt,new z.Z,it,0):"xmin"in lt?function Qe(lt,gt,it,Dt,kt){const{xmin:Ms,ymin:ws,xmax:gs,ymax:Ds,hasZ:Vs,hasM:ks}=lt;return Rt(Ms,ws,Vs?lt.zmin:kt,gt,xs,Dt)?(it.xmin=xs[0],it.ymin=xs[1],Vs&&(it.zmin=xs[2]),Rt(gs,Ds,Vs?lt.zmax:kt,gt,xs,Dt)?(it.xmax=xs[0],it.ymax=xs[1],Vs&&(it.zmax=xs[2]),ks&&(it.mmin=lt.mmin,it.mmax=lt.mmax),it.spatialReference=Dt,it):null):null}(lt,gt,new Q.Z,it,0):"rings"in lt?Xe(lt,gt,new C.Z,it,0):"paths"in lt?function rt(lt,gt,it,Dt,kt){const{paths:Ms,hasZ:ws,hasM:gs}=lt,Ds=[];return ys(Ms,ws??!1,gs??!1,gt,Ds,Dt,kt)?(it.paths=Ds,it.spatialReference=Dt,it.hasZ=ws,it.hasM=gs,it):null}(lt,gt,new D.Z,it,0):"points"in lt?function Ve(lt,gt,it,Dt,kt){const{points:Ms,hasZ:ws,hasM:gs}=lt,Ds=[],Vs=Ms.length,ks=[];for(const Qs of Ms)ks.push(Qs[0],Qs[1],ws?Qs[2]:kt);if(!Wt(ks,gt,0,ks,Dt,0,Vs))return null;for(let Qs=0;Qs<Vs;++Qs){const _r=3*Qs,tr=ks[_r],en=ks[_r+1];Ds.push(ws&&gs?[tr,en,ks[_r+2],Ms[Qs][3]]:ws?[tr,en,ks[_r+2]]:gs?[tr,en,Ms[Qs][2]]:[tr,en])}return it.points=Ds,it.spatialReference=Dt,it.hasZ=ws,it.hasM=gs,it}(lt,gt,new G.Z,it,0):null:null}(ws,it,Dt)));if((0,Z.Wi)(kt)){const ws=ne.Z.cacheKey(it,Dt);void 0!==Oe[ws]?kt=Oe[ws]:(kt=De(it,Dt,void 0),(0,Z.Wi)(kt)&&(kt=new ne.Z),Oe[ws]=kt)}if((0,Z.Wi)(fe)||(0,Z.Wi)(lt))throw new me;return(0,Z.pC)(Ms)?fe._project(lt,gt,it,Dt,kt,Ms):fe._project(lt,gt,it,Dt,kt)}function ge(lt,gt){const it=Ae([lt],gt);return(0,Z.pC)(it.pending)?{pending:it.pending,geometry:null}:(0,Z.pC)(it.geometries)?{pending:null,geometry:it.geometries[0]}:{pending:null,geometry:null}}function Ae(lt,gt){if(!le())for(const it of lt)if((0,Z.pC)(it)&&!(0,ue.fS)(it.spatialReference,gt)&&(0,ue.JY)(it.spatialReference)&&(0,ue.JY)(gt)&&!Ie(it.spatialReference,gt))return(0,V.it)(re),{pending:ce(),geometries:null};return{pending:null,geometries:lt.map(it=>(0,Z.Wi)(it)?null:(0,ue.fS)(it.spatialReference,gt)?it:(0,ue.JY)(it.spatialReference)&&(0,ue.JY)(gt)?function Ce(lt,gt){try{const it=ve(lt,gt);if(null==it)return null;"xmin"in lt&&"xmin"in it&&(it.zmin=lt.zmin,it.zmax=lt.zmax);const Dt=(0,ie.k)(it.type,lt.spatialReference,gt);return(0,Z.pC)(Dt)&&Dt(it),it}catch(it){if(!(it instanceof me))throw it;return null}}(it,gt):null)}}function De(lt,gt,it=null){if((0,Z.Wi)(lt)||(0,Z.Wi)(gt))return null;if((0,Z.Wi)(fe)||(0,Z.Wi)(_e))throw new me;const Dt=fe._getTransformation(_e,lt,gt,it,it?.spatialReference);return null!==Dt?ne.Z.fromGE(Dt):null}class me extends T.Z{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var ye,lt;function Ie(lt,gt,it){return!it&&(!!(0,ue.fS)(lt,gt)||(0,ue.JY)(lt)&&(0,ue.JY)(gt)&&!!wr(lt,gt,zt))}function je(lt,gt,it,Dt){return Je.apply(this,arguments)}function Je(){return Je=(0,E.Z)(function*(lt,gt,it,Dt){if(le())return(0,x.Yn)(Dt);if(Array.isArray(lt)){for(const{source:kt,dest:Ms,geographicTransformation:ws}of lt)if(!Ie(kt,Ms,ws))return ce(Dt)}else if(!Ie(lt,gt,it))return ce(Dt);return(0,x.Yn)(Dt)}),Je.apply(this,arguments)}function ft(lt,gt,it=gt.spatialReference,Dt=0){return(0,Z.pC)(lt.spatialReference)&&(0,Z.pC)(it)&&(0,Z.pC)(Xe(lt,lt.spatialReference,gt,it,Dt))}function Xe(lt,gt,it,Dt,kt){const{rings:Ms,hasZ:ws,hasM:gs}=lt,Ds=[];return ys(Ms,ws??!1,gs??!1,gt,Ds,Dt,kt)?(it.rings=Ds,it.spatialReference=Dt,it.hasZ=ws,it.hasM=gs,it):null}function _t(lt,gt,it,Dt=0){xs[0]=lt.x,xs[1]=lt.y;const kt=lt.z;return xs[2]=void 0!==kt?kt:Dt,Wt(xs,lt.spatialReference,0,gt,it,0,1)}function Rt(lt,gt,it,Dt,kt,Ms){return ir[0]=lt,ir[1]=gt,ir[2]=it,Wt(ir,Dt,0,kt,Ms,0,1)}function Wt(lt,gt,it,Dt,kt,Ms,ws=1){const gs=wr(gt,kt,zt);if((0,Z.Wi)(gs))return!1;if(gs===Nt){if(lt===Dt&&it===Ms)return!0;const Vs=it+3*ws;for(let ks=it,Qs=Ms;ks<Vs;ks++,Qs++)Dt[Qs]=lt[ks];return!0}const Ds=it+3*ws;for(let Vs=it,ks=Ms;Vs<Ds;Vs+=3,ks+=3)gs(lt,Vs,Dt,ks);return!0}function ys(lt,gt,it,Dt,kt,Ms,ws=0){const gs=new Array;for(const Vs of lt)for(const ks of Vs)gs.push(ks[0],ks[1],gt?ks[2]:ws);if(!Wt(gs,Dt,0,gs,Ms,0,gs.length/3))return!1;let Ds=0;kt.length=0;for(const Vs of lt){const ks=new Array;for(const Qs of Vs)gt&&it?ks.push([gs[Ds++],gs[Ds++],gs[Ds++],Qs[3]]):gt?ks.push([gs[Ds++],gs[Ds++],gs[Ds++]]):it?(ks.push([gs[Ds++],gs[Ds++],Qs[2]]),Ds++):(ks.push([gs[Ds++],gs[Ds++]]),Ds++);kt.push(ks)}return!0}function Tt(lt,gt,it,Dt){if((0,Z.Wi)(lt)||(0,Z.Wi)(Dt))return!1;const kt=Vt(lt,Yr),Ms=Vt(Dt,Hn);if(kt===Ms&&!It(Ms)&&(kt!==ye.UNKNOWN||(0,ue.fS)(lt,Dt)))return(0,A.f)(it,gt),!0;if(It(Ms)){const ws=dr[kt][ye.LON_LAT],gs=dr[ye.LON_LAT][Ms];return!(0,Z.Wi)(ws)&&!(0,Z.Wi)(gs)&&(ws(gt,0,bs,0),gs(bs,0,hr,0),Zt(Xs*bs[0],Xs*bs[1],it),it[12]=hr[0],it[13]=hr[1],it[14]=hr[2],!0)}if((Ms===ye.WEB_MERCATOR||Ms===ye.PLATE_CARREE)&&(kt===ye.WGS84||kt===ye.CGCS2000&&Ms===ye.PLATE_CARREE||kt===ye.SPHERICAL_ECEF||kt===ye.WEB_MERCATOR)){const ws=dr[kt][ye.LON_LAT],gs=dr[ye.LON_LAT][Ms];return!(0,Z.Wi)(ws)&&!(0,Z.Wi)(gs)&&(ws(gt,0,bs,0),gs(bs,0,hr,0),kt===ye.SPHERICAL_ECEF?function Kt(lt,gt,it){Zt(lt,gt,it),(0,A.t)(it,it)}(Xs*bs[0],Xs*bs[1],it):(0,A.i)(it),it[12]=hr[0],it[13]=hr[1],it[14]=hr[2],!0)}return!1}function It(lt){return lt===ye.SPHERICAL_ECEF||lt===ye.SPHERICAL_MARS_PCPF||lt===ye.SPHERICAL_MOON_PCPF}function Zt(lt,gt,it){const Dt=Math.sin(lt),kt=Math.cos(lt),Ms=Math.sin(gt),ws=Math.cos(gt),gs=it;return gs[0]=-Dt,gs[4]=-Ms*kt,gs[8]=ws*kt,gs[12]=0,gs[1]=kt,gs[5]=-Ms*Dt,gs[9]=ws*Dt,gs[13]=0,gs[2]=0,gs[6]=ws,gs[10]=Ms,gs[14]=0,gs[3]=0,gs[7]=0,gs[11]=0,gs[15]=1,gs}function Vt(lt,gt){return lt?gt.spatialReference===lt?gt.spatialReferenceId:(gt.spatialReference=lt,"metersPerUnit"in gt&&(gt.metersPerUnit=(0,se.c9)(lt,1)),gt.spatialReferenceId=lt.wkt===J.kU.wkt?ye.SPHERICAL_ECEF:(0,ue.oR)(lt)?ye.WGS84:(0,ue.sS)(lt)?ye.WEB_MERCATOR:(0,ue.QM)(lt)?ye.PLATE_CARREE:lt.wkt===J.pn.wkt?ye.WGS84_ECEF:lt.wkid===te.W.CGCS2000?ye.CGCS2000:lt.wkt===J.JL.wkt?ye.SPHERICAL_MARS_PCPF:lt.wkt===J.mM.wkt?ye.SPHERICAL_MOON_PCPF:(0,ue.BZ)(lt)?ye.GCSMARS2000:(0,ue.V2)(lt)?ye.GCSMOON2000:ye.UNKNOWN):ye.UNKNOWN}function Nt(lt,gt,it,Dt){lt!==it&&(it[Dt++]=lt[gt++],it[Dt++]=lt[gt++],it[Dt]=lt[gt])}function ls(lt,gt,it,Dt){it[Dt++]=cr*(lt[gt++]/B.sv.radius),it[Dt++]=cr*(Math.PI/2-2*Math.atan(Math.exp(-lt[gt++]/B.sv.radius))),it[Dt]=lt[gt]}function pt(lt,gt,it,Dt){!function Os(lt,gt,it,Dt,kt){const Ms=.4999999*Math.PI,ws=(0,w.uZ)(Xs*lt[gt+1],-Ms,Ms),gs=Math.sin(ws);it[Dt++]=Xs*lt[gt]*kt.radius,it[Dt++]=kt.halfSemiMajorAxis*Math.log((1+gs)/(1-gs)),it[Dt]=lt[gt+2]}(lt,gt,it,Dt,B.sv)}(lt=ye||(ye={}))[lt.UNKNOWN=0]="UNKNOWN",lt[lt.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",lt[lt.WGS84=2]="WGS84",lt[lt.WEB_MERCATOR=3]="WEB_MERCATOR",lt[lt.WGS84_ECEF=4]="WGS84_ECEF",lt[lt.CGCS2000=5]="CGCS2000",lt[lt.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",lt[lt.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",lt[lt.GCSMARS2000=8]="GCSMARS2000",lt[lt.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",lt[lt.GCSMOON2000=10]="GCSMOON2000",lt[lt.LON_LAT=11]="LON_LAT",lt[lt.PLATE_CARREE=12]="PLATE_CARREE";const Pt=B.sv.radius*Math.PI/180,jt=180/(B.sv.radius*Math.PI);function us(lt,gt,it,Dt){it[Dt]=lt[gt]*Pt,it[Dt+1]=lt[gt+1]*Pt,it[Dt+2]=lt[gt+2]}function et(lt,gt,it,Dt){it[Dt]=lt[gt]*jt,it[Dt+1]=lt[gt+1]*jt,it[Dt+2]=lt[gt+2]}function Le(lt,gt,it,Dt,kt){const Ms=kt+lt[gt+2],ws=Xs*lt[gt+1],gs=Xs*lt[gt],Ds=Math.cos(ws);it[Dt++]=Math.cos(gs)*Ds*Ms,it[Dt++]=Math.sin(gs)*Ds*Ms,it[Dt]=Math.sin(ws)*Ms}function wt(lt,gt,it,Dt){Le(lt,gt,it,Dt,B.Z1.radius)}function We(lt,gt,it,Dt){Le(lt,gt,it,Dt,B.yr.radius)}function ke(lt,gt,it,Dt){Le(lt,gt,it,Dt,B.sv.radius)}function Et(lt,gt,it,Dt,kt){const Ms=lt[gt],ws=lt[gt+1],gs=lt[gt+2],Ds=Math.sqrt(Ms*Ms+ws*ws+gs*gs),Vs=(0,w.Kt)(gs/(0===Ds?1:Ds)),ks=Math.atan2(ws,Ms);it[Dt++]=cr*ks,it[Dt++]=cr*Vs,it[Dt]=Ds-kt}function Ut(lt,gt,it,Dt){Et(lt,gt,it,Dt,B.Z1.radius)}function es(lt,gt,it,Dt){Et(lt,gt,it,Dt,B.yr.radius)}function is(lt,gt,it,Dt){Et(lt,gt,it,Dt,B.sv.radius)}function As(lt,gt,it,Dt){!function $s(lt,gt,it,Dt,kt){const Ms=Xs*lt[gt],ws=Xs*lt[gt+1],gs=lt[gt+2],Ds=Math.sin(ws),Vs=Math.cos(ws),ks=kt.radius/Math.sqrt(1-kt.eccentricitySquared*Ds*Ds);it[Dt++]=(ks+gs)*Vs*Math.cos(Ms),it[Dt++]=(ks+gs)*Vs*Math.sin(Ms),it[Dt++]=(ks*(1-kt.eccentricitySquared)+gs)*Ds}(lt,gt,it,Dt,B.sv)}function Gs(lt,gt,it,Dt){const kt=ae,Ms=lt[gt],ws=lt[gt+1],gs=lt[gt+2];let Ds,Vs,ks,Qs,_r,tr,en,js,zr,Dr,Cn,Dn,Br,tn,Nr,yt,Xt,ds,Fs,Cr,yr;Ds=Math.abs(gs),Vs=Ms*Ms+ws*ws,ks=Math.sqrt(Vs),Qs=Vs+gs*gs,_r=Math.sqrt(Qs),Cr=Math.atan2(ws,Ms),tr=gs*gs/Qs,en=Vs/Qs,tn=kt.a2/_r,Nr=kt.a3-kt.a4/_r,en>.3?(js=Ds/_r*(1+en*(kt.a1+tn+tr*Nr)/_r),Fs=Math.asin(js),Dr=js*js,zr=Math.sqrt(1-Dr)):(zr=ks/_r*(1-tr*(kt.a5-tn-en*Nr)/_r),Fs=Math.acos(zr),Dr=1-zr*zr,js=Math.sqrt(Dr)),Cn=1-B.sv.eccentricitySquared*Dr,Dn=B.sv.radius/Math.sqrt(Cn),Br=kt.a6*Dn,tn=ks-Dn*zr,Nr=Ds-Br*js,Xt=zr*tn+js*Nr,yt=zr*Nr-js*tn,ds=yt/(Br/Cn+Xt),Fs+=ds,yr=Xt+yt*ds/2,gs<0&&(Fs=-Fs),it[Dt++]=cr*Cr,it[Dt++]=cr*Fs,it[Dt]=yr}const dr={[ye.WGS84]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Nt,[ye.WGS84_COMPARABLE_LON_LAT]:Nt,[ye.SPHERICAL_ECEF]:ke,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:pt,[ye.PLATE_CARREE]:us,[ye.WGS84]:Nt,[ye.WGS84_ECEF]:As},[ye.CGCS2000]:{[ye.CGCS2000]:Nt,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Nt,[ye.WGS84_COMPARABLE_LON_LAT]:Nt,[ye.SPHERICAL_ECEF]:ke,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:us,[ye.WGS84]:null,[ye.WGS84_ECEF]:As},[ye.GCSMARS2000]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:Nt,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Nt,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:We,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.GCSMOON2000]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:Nt,[ye.LON_LAT]:Nt,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:wt,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.WEB_MERCATOR]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:ls,[ye.WGS84_COMPARABLE_LON_LAT]:ls,[ye.SPHERICAL_ECEF]:function ts(lt,gt,it,Dt){ls(lt,gt,it,Dt),ke(it,Dt,it,Dt)},[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:Nt,[ye.PLATE_CARREE]:function At(lt,gt,it,Dt){ls(lt,gt,it,Dt),us(it,Dt,it,Dt)},[ye.WGS84]:ls,[ye.WGS84_ECEF]:function ms(lt,gt,it,Dt){ls(lt,gt,it,Dt),As(it,Dt,it,Dt)}},[ye.WGS84_ECEF]:{[ye.CGCS2000]:Gs,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Gs,[ye.WGS84_COMPARABLE_LON_LAT]:Gs,[ye.SPHERICAL_ECEF]:function nr(lt,gt,it,Dt){Gs(lt,gt,it,Dt),ke(it,Dt,it,Dt)},[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:function Er(lt,gt,it,Dt){Gs(lt,gt,it,Dt),pt(it,Dt,it,Dt)},[ye.PLATE_CARREE]:function Bt(lt,gt,it,Dt){Gs(lt,gt,it,Dt),us(it,Dt,it,Dt)},[ye.WGS84]:Gs,[ye.WGS84_ECEF]:Nt},[ye.SPHERICAL_ECEF]:{[ye.CGCS2000]:is,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:is,[ye.WGS84_COMPARABLE_LON_LAT]:is,[ye.SPHERICAL_ECEF]:Nt,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:function _s(lt,gt,it,Dt){is(lt,gt,it,Dt),pt(it,Dt,it,Dt)},[ye.PLATE_CARREE]:function Ht(lt,gt,it,Dt){is(lt,gt,it,Dt),us(it,Dt,it,Dt)},[ye.WGS84]:is,[ye.WGS84_ECEF]:function Zs(lt,gt,it,Dt){is(lt,gt,it,Dt),As(it,Dt,it,Dt)}},[ye.SPHERICAL_MARS_PCPF]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:es,[ye.GCSMOON2000]:null,[ye.LON_LAT]:es,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:Nt,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.SPHERICAL_MOON_PCPF]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:Ut,[ye.LON_LAT]:Ut,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:Nt,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.UNKNOWN]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:null,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:Nt,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.LON_LAT]:{[ye.CGCS2000]:Nt,[ye.GCSMARS2000]:Nt,[ye.GCSMOON2000]:Nt,[ye.LON_LAT]:Nt,[ye.WGS84_COMPARABLE_LON_LAT]:Nt,[ye.SPHERICAL_ECEF]:ke,[ye.SPHERICAL_MARS_PCPF]:We,[ye.SPHERICAL_MOON_PCPF]:wt,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:pt,[ye.PLATE_CARREE]:us,[ye.WGS84]:Nt,[ye.WGS84_ECEF]:As},[ye.WGS84_COMPARABLE_LON_LAT]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Nt,[ye.WGS84_COMPARABLE_LON_LAT]:Nt,[ye.SPHERICAL_ECEF]:ke,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:us,[ye.WGS84]:Nt,[ye.WGS84_ECEF]:As},[ye.PLATE_CARREE]:{[ye.CGCS2000]:et,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:et,[ye.WGS84_COMPARABLE_LON_LAT]:et,[ye.SPHERICAL_ECEF]:function cs(lt,gt,it,Dt){et(lt,gt,it,Dt),ke(it,Dt,it,Dt)},[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:function Rs(lt,gt,it,Dt){et(lt,gt,it,Dt),pt(it,Dt,it,Dt)},[ye.PLATE_CARREE]:Nt,[ye.WGS84]:et,[ye.WGS84_ECEF]:function Us(lt,gt,it,Dt){et(lt,gt,it,Dt),As(it,Dt,it,Dt)}}};function wr(lt,gt,it=pn()){return(0,Z.Wi)(lt)||(0,Z.Wi)(gt)?null:function wn(lt,gt,it){if((0,Z.Wi)(lt)||(0,Z.Wi)(gt)||it.source.spatialReference===lt&&it.dest.spatialReference===gt)return it;const Dt=Vt(lt,it.source),kt=Vt(gt,it.dest);return it.projector=Dt===ye.UNKNOWN&&kt===ye.UNKNOWN?(0,ue.fS)(lt,gt)?Nt:null:dr[Dt][kt],it}(lt,gt,it).projector}function pn(){return{source:{spatialReference:null,spatialReferenceId:ye.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ye.UNKNOWN,metersPerUnit:1},projector:Nt}}const Yr={spatialReference:null,spatialReferenceId:ye.UNKNOWN},Hn={spatialReference:null,spatialReferenceId:ye.UNKNOWN},zt=pn(),Xs=(pn(),(0,w.Vl)(1)),cr=(0,w.BV)(1),ir=(0,N.c)(),bs=(0,N.c)(),hr=(0,N.c)(),xs=(0,N.c)();(0,N.c)()},86355:(He,Pe,g)=>{"use strict";g.d(Pe,{Z1:()=>Z,sv:()=>T,yr:()=>w});class E{constructor(se,V,W,A){this.semiMajorAxis=se,this.flattening=V,this.outerAtmosphereRimWidth=W,this.semiMinorAxis=this.semiMajorAxis*(1-this.flattening),this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=A||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const T=new E(6378137,1/298.257223563,3e5,.006694379990137799),w=new E(3396190,1/169.8944472236118,23e4),Z=new E(1737400,0,0)},16161:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>w});let E=0;class T{static fromGE(x){const se=new T;return se._wkt=x.wkt,se._wkid=x.wkid,se._isInverse=x.isInverse,se}constructor(x){this.uid=E++,x?(this._wkt=null!=x.wkt?x.wkt:null,this._wkid=null!=x.wkid?x.wkid:-1,this._isInverse=null!=x.isInverse&&!0===x.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(x){this._wkt=x,this.uid=E++}get wkid(){return this._wkid}set wkid(x){this._wkid=x,this.uid=E++}get isInverse(){return this._isInverse}set isInverse(x){this._isInverse=x,this.uid=E++}getInverse(){const x=new T;return x._wkt=this.wkt,x._wkid=this._wkid,x._isInverse=!this.isInverse,x}}class w{static cacheKey(x,se){return[null!=x.wkid?x.wkid.toString():"-1",null!=x.wkt?x.wkt.toString():"",null!=se.wkid?se.wkid.toString():"-1",null!=se.wkt?se.wkt.toString():""].join(",")}static fromGE(x){const se=new w;let V="";for(const W of x.steps){const A=T.fromGE(W);se.steps.push(A),V+=A.uid.toString()+","}return se._cachedProjection={},se._gtlistentry=null,se._chain=V,se}constructor(x){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,x&&x.steps)for(const se of x.steps)this.steps.push(se instanceof T?se:new T({wkid:se.wkid,wkt:se.wkt,isInverse:se.isInverse}))}getInverse(){const x=new w;x.steps=[];for(let se=this.steps.length-1;se>=0;se--)x.steps.push(this.steps[se].getInverse());return x}getGTListEntry(){let x="";for(const se of this.steps)x+=se.uid.toString()+",";return x!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=x),this._gtlistentry}assignCachedGe(x,se,V){this._cachedProjection[w.cacheKey(x,se)]=V}getCachedGeTransformation(x,se){let V="";for(const A of this.steps)V+=A.uid.toString()+",";V!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=V);const W=this._cachedProjection[w.cacheKey(x,se)];return void 0===W?null:W}}},39498:(He,Pe,g)=>{"use strict";var E,T;g.d(Pe,{W:()=>E}),(T=E||(E={}))[T.CGCS2000=4490]="CGCS2000",T[T.GCSMARS2000=104971]="GCSMARS2000",T[T.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",T[T.GCSMOON2000=104903]="GCSMOON2000"},94009:(He,Pe,g)=>{"use strict";let E;g.d(Pe,{Z:()=>T});const T={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(E=2e3;E<=2045;E++)T[E]=0;for(E=2056;E<=2065;E++)T[E]=0;for(E=2067;E<=2135;E++)T[E]=0;for(E=2137;E<=2154;E++)T[E]=0;for(E=2161;E<=2170;E++)T[E]=0;for(E=2172;E<=2193;E++)T[E]=0;for(E=2195;E<=2198;E++)T[E]=0;for(E=2200;E<=2203;E++)T[E]=0;for(E=2205;E<=2217;E++)T[E]=0;for(E=2222;E<=2224;E++)T[E]=1;for(E=2225;E<=2250;E++)T[E]=2;for(E=2251;E<=2253;E++)T[E]=1;for(E=2257;E<=2264;E++)T[E]=2;for(E=2274;E<=2279;E++)T[E]=2;for(E=2280;E<=2282;E++)T[E]=1;for(E=2283;E<=2289;E++)T[E]=2;for(E=2290;E<=2292;E++)T[E]=0;for(E=2308;E<=2313;E++)T[E]=0;for(E=2315;E<=2491;E++)T[E]=0;for(E=2494;E<=2866;E++)T[E]=0;for(E=2867;E<=2869;E++)T[E]=1;for(E=2870;E<=2888;E++)T[E]=2;for(E=2891;E<=2895;E++)T[E]=2;for(E=2896;E<=2898;E++)T[E]=1;for(E=2902;E<=2908;E++)T[E]=2;for(E=2915;E<=2920;E++)T[E]=2;for(E=2921;E<=2923;E++)T[E]=1;for(E=2924;E<=2930;E++)T[E]=2;for(E=2931;E<=2962;E++)T[E]=0;for(E=2964;E<=2968;E++)T[E]=2;for(E=2969;E<=2973;E++)T[E]=0;for(E=2975;E<=2991;E++)T[E]=0;for(E=2995;E<=3051;E++)T[E]=0;for(E=3054;E<=3079;E++)T[E]=0;for(E=3081;E<=3088;E++)T[E]=0;for(E=3092;E<=3101;E++)T[E]=0;for(E=3106;E<=3138;E++)T[E]=0;for(E=3146;E<=3151;E++)T[E]=0;for(E=3153;E<=3166;E++)T[E]=0;for(E=3168;E<=3172;E++)T[E]=0;for(E=3174;E<=3203;E++)T[E]=0;for(E=3294;E<=3358;E++)T[E]=0;for(E=3367;E<=3403;E++)T[E]=0;for(E=3408;E<=3416;E++)T[E]=0;for(E=3417;E<=3438;E++)T[E]=2;for(E=3441;E<=3446;E++)T[E]=2;for(E=3447;E<=3450;E++)T[E]=0;for(E=3451;E<=3459;E++)T[E]=2;for(E=3460;E<=3478;E++)T[E]=0;for(E=3554;E<=3559;E++)T[E]=0;for(E=3560;E<=3570;E++)T[E]=2;for(E=3571;E<=3581;E++)T[E]=0;for(E=3594;E<=3597;E++)T[E]=0;for(E=3601;E<=3604;E++)T[E]=0;for(E=3637;E<=3639;E++)T[E]=0;for(E=3665;E<=3667;E++)T[E]=0;for(E=3693;E<=3695;E++)T[E]=0;for(E=3701;E<=3727;E++)T[E]=0;for(E=3728;E<=3739;E++)T[E]=2;for(E=3740;E<=3751;E++)T[E]=0;for(E=3753;E<=3760;E++)T[E]=2;for(E=3761;E<=3773;E++)T[E]=0;for(E=3775;E<=3777;E++)T[E]=0;for(E=3779;E<=3781;E++)T[E]=0;for(E=3783;E<=3785;E++)T[E]=0;for(E=3788;E<=3791;E++)T[E]=0;for(E=3797;E<=3802;E++)T[E]=0;for(E=3814;E<=3816;E++)T[E]=0;for(E=3825;E<=3829;E++)T[E]=0;for(E=3832;E<=3841;E++)T[E]=0;for(E=3844;E<=3852;E++)T[E]=0;for(E=3873;E<=3885;E++)T[E]=0;for(E=3890;E<=3893;E++)T[E]=0;for(E=3907;E<=3912;E++)T[E]=0;for(E=3942;E<=3950;E++)T[E]=0;for(E=3968;E<=3970;E++)T[E]=0;for(E=3973;E<=3976;E++)T[E]=0;for(E=3986;E<=3989;E++)T[E]=0;for(E=3994;E<=3997;E++)T[E]=0;for(E=4048;E<=4051;E++)T[E]=0;for(E=4056;E<=4063;E++)T[E]=0;for(E=4093;E<=4096;E++)T[E]=0;for(E=4390;E<=4398;E++)T[E]=0;for(E=4399;E<=4413;E++)T[E]=2;for(E=4418;E<=4433;E++)T[E]=2;for(E=4455;E<=4457;E++)T[E]=2;for(E=4484;E<=4489;E++)T[E]=0;for(E=4491;E<=4554;E++)T[E]=0;for(E=4568;E<=4589;E++)T[E]=0;for(E=4652;E<=4656;E++)T[E]=0;for(E=4766;E<=4800;E++)T[E]=0;for(E=5014;E<=5016;E++)T[E]=0;for(E=5069;E<=5072;E++)T[E]=0;for(E=5105;E<=5130;E++)T[E]=0;for(E=5173;E<=5188;E++)T[E]=0;for(E=5253;E<=5259;E++)T[E]=0;for(E=5269;E<=5275;E++)T[E]=0;for(E=5292;E<=5311;E++)T[E]=0;for(E=5329;E<=5331;E++)T[E]=0;for(E=5343;E<=5349;E++)T[E]=0;for(E=5355;E<=5357;E++)T[E]=0;for(E=5387;E<=5389;E++)T[E]=0;for(E=5459;E<=5463;E++)T[E]=0;for(E=5479;E<=5482;E++)T[E]=0;for(E=5518;E<=5520;E++)T[E]=0;for(E=5530;E<=5539;E++)T[E]=0;for(E=5550;E<=5552;E++)T[E]=0;for(E=5562;E<=5583;E++)T[E]=0;for(E=5623;E<=5625;E++)T[E]=2;for(E=5631;E<=5639;E++)T[E]=0;for(E=5649;E<=5653;E++)T[E]=0;for(E=5663;E<=5680;E++)T[E]=0;for(E=5682;E<=5685;E++)T[E]=0;for(E=5875;E<=5877;E++)T[E]=0;for(E=5896;E<=5899;E++)T[E]=0;for(E=5921;E<=5940;E++)T[E]=0;for(E=6050;E<=6125;E++)T[E]=0;for(E=6244;E<=6275;E++)T[E]=0;for(E=6328;E<=6348;E++)T[E]=0;for(E=6350;E<=6356;E++)T[E]=0;for(E=6366;E<=6372;E++)T[E]=0;for(E=6381;E<=6387;E++)T[E]=0;for(E=6393;E<=6404;E++)T[E]=0;for(E=6480;E<=6483;E++)T[E]=0;for(E=6511;E<=6514;E++)T[E]=0;for(E=6579;E<=6581;E++)T[E]=0;for(E=6619;E<=6624;E++)T[E]=0;for(E=6625;E<=6627;E++)T[E]=2;for(E=6628;E<=6632;E++)T[E]=0;for(E=6634;E<=6637;E++)T[E]=0;for(E=6669;E<=6692;E++)T[E]=0;for(E=6707;E<=6709;E++)T[E]=0;for(E=6720;E<=6723;E++)T[E]=0;for(E=6732;E<=6738;E++)T[E]=0;for(E=6931;E<=6933;E++)T[E]=0;for(E=6956;E<=6959;E++)T[E]=0;for(E=7005;E<=7007;E++)T[E]=0;for(E=7057;E<=7070;E++)T[E]=2;for(E=7074;E<=7082;E++)T[E]=0;for(E=7109;E<=7118;E++)T[E]=0;for(E=7119;E<=7127;E++)T[E]=1;for(E=7374;E<=7376;E++)T[E]=0;for(E=7528;E<=7586;E++)T[E]=0;for(E=7587;E<=7645;E++)T[E]=2;for(E=7692;E<=7696;E++)T[E]=0;for(E=7755;E<=7787;E++)T[E]=0;for(E=7791;E<=7795;E++)T[E]=0;for(E=7799;E<=7801;E++)T[E]=0;for(E=7803;E<=7805;E++)T[E]=0;for(E=7825;E<=7831;E++)T[E]=0;for(E=7845;E<=7859;E++)T[E]=0;for(E=8013;E<=8032;E++)T[E]=0;for(E=8065;E<=8068;E++)T[E]=1;for(E=8518;E<=8529;E++)T[E]=2;for(E=8533;E<=8536;E++)T[E]=2;for(E=8538;E<=8540;E++)T[E]=2;for(E=8677;E<=8679;E++)T[E]=0;for(E=8836;E<=8840;E++)T[E]=0;for(E=8857;E<=8859;E++)T[E]=0;for(E=8908;E<=8910;E++)T[E]=0;for(E=9154;E<=9159;E++)T[E]=0;for(E=9205;E<=9218;E++)T[E]=0;for(E=9271;E<=9273;E++)T[E]=0;for(E=9295;E<=9297;E++)T[E]=0;for(E=9356;E<=9360;E++)T[E]=0;for(E=9404;E<=9407;E++)T[E]=0;for(E=9476;E<=9482;E++)T[E]=0;for(E=9487;E<=9494;E++)T[E]=0;for(E=9697;E<=9699;E++)T[E]=0;for(E=9821;E<=9865;E++)T[E]=0;for(E=20002;E<=20032;E++)T[E]=0;for(E=20047;E<=20049;E++)T[E]=0;for(E=20062;E<=20092;E++)T[E]=0;for(E=20135;E<=20138;E++)T[E]=0;for(E=20248;E<=20258;E++)T[E]=0;for(E=20348;E<=20358;E++)T[E]=0;for(E=20436;E<=20440;E++)T[E]=0;for(E=20822;E<=20824;E++)T[E]=0;for(E=20904;E<=20932;E++)T[E]=0;for(E=20934;E<=20936;E++)T[E]=0;for(E=21004;E<=21032;E++)T[E]=0;for(E=21035;E<=21037;E++)T[E]=0;for(E=21095;E<=21097;E++)T[E]=0;for(E=21148;E<=21150;E++)T[E]=0;for(E=21207;E<=21264;E++)T[E]=0;for(E=21307;E<=21364;E++)T[E]=0;for(E=21413;E<=21423;E++)T[E]=0;for(E=21453;E<=21463;E++)T[E]=0;for(E=21473;E<=21483;E++)T[E]=0;for(E=21780;E<=21782;E++)T[E]=0;for(E=21891;E<=21894;E++)T[E]=0;for(E=21896;E<=21899;E++)T[E]=0;for(E=22171;E<=22177;E++)T[E]=0;for(E=22181;E<=22187;E++)T[E]=0;for(E=22191;E<=22197;E++)T[E]=0;for(E=22207;E<=22222;E++)T[E]=0;for(E=22234;E<=22236;E++)T[E]=0;for(E=22243;E<=22250;E++)T[E]=0;for(E=22262;E<=22265;E++)T[E]=0;for(E=22307;E<=22322;E++)T[E]=0;for(E=22348;E<=22357;E++)T[E]=0;for(E=22407;E<=22422;E++)T[E]=0;for(E=22462;E<=22465;E++)T[E]=0;for(E=22521;E<=22525;E++)T[E]=0;for(E=22607;E<=22622;E++)T[E]=0;for(E=22641;E<=22646;E++)T[E]=0;for(E=22648;E<=22657;E++)T[E]=0;for(E=22707;E<=22722;E++)T[E]=0;for(E=22762;E<=22765;E++)T[E]=0;for(E=22991;E<=22994;E++)T[E]=0;for(E=23028;E<=23038;E++)T[E]=0;for(E=23830;E<=23853;E++)T[E]=0;for(E=23866;E<=23872;E++)T[E]=0;for(E=23877;E<=23884;E++)T[E]=0;for(E=23886;E<=23894;E++)T[E]=0;for(E=23946;E<=23948;E++)T[E]=0;for(E=24311;E<=24313;E++)T[E]=0;for(E=24342;E<=24347;E++)T[E]=0;for(E=24370;E<=24374;E++)T[E]=10;for(E=24375;E<=24381;E++)T[E]=0;for(E=24718;E<=24721;E++)T[E]=0;for(E=24817;E<=24821;E++)T[E]=0;for(E=24877;E<=24882;E++)T[E]=0;for(E=24891;E<=24893;E++)T[E]=0;for(E=25391;E<=25395;E++)T[E]=0;for(E=25828;E<=25838;E++)T[E]=0;for(E=26191;E<=26195;E++)T[E]=0;for(E=26391;E<=26393;E++)T[E]=0;for(E=26701;E<=26722;E++)T[E]=0;for(E=26729;E<=26799;E++)T[E]=2;for(E=26801;E<=26803;E++)T[E]=2;for(E=26811;E<=26813;E++)T[E]=2;for(E=26847;E<=26870;E++)T[E]=2;for(E=26891;E<=26899;E++)T[E]=0;for(E=26901;E<=26923;E++)T[E]=0;for(E=26929;E<=26946;E++)T[E]=0;for(E=26948;E<=26998;E++)T[E]=0;for(E=27037;E<=27040;E++)T[E]=0;for(E=27205;E<=27232;E++)T[E]=0;for(E=27258;E<=27260;E++)T[E]=0;for(E=27391;E<=27398;E++)T[E]=0;for(E=27561;E<=27564;E++)T[E]=0;for(E=27571;E<=27574;E++)T[E]=0;for(E=27581;E<=27584;E++)T[E]=0;for(E=27591;E<=27594;E++)T[E]=0;for(E=28191;E<=28193;E++)T[E]=0;for(E=28348;E<=28358;E++)T[E]=0;for(E=28402;E<=28432;E++)T[E]=0;for(E=28462;E<=28492;E++)T[E]=0;for(E=29118;E<=29122;E++)T[E]=0;for(E=29168;E<=29172;E++)T[E]=0;for(E=29177;E<=29185;E++)T[E]=0;for(E=29187;E<=29195;E++)T[E]=0;for(E=29900;E<=29903;E++)T[E]=0;for(E=30161;E<=30179;E++)T[E]=0;for(E=30491;E<=30494;E++)T[E]=0;for(E=30729;E<=30732;E++)T[E]=0;for(E=31251;E<=31259;E++)T[E]=0;for(E=31265;E<=31268;E++)T[E]=0;for(E=31275;E<=31279;E++)T[E]=0;for(E=31281;E<=31297;E++)T[E]=0;for(E=31461;E<=31469;E++)T[E]=0;for(E=31491;E<=31495;E++)T[E]=0;for(E=31917;E<=31922;E++)T[E]=0;for(E=31965;E<=32e3;E++)T[E]=0;for(E=32001;E<=32003;E++)T[E]=2;for(E=32005;E<=32031;E++)T[E]=2;for(E=32033;E<=32060;E++)T[E]=2;for(E=32064;E<=32067;E++)T[E]=2;for(E=32074;E<=32077;E++)T[E]=2;for(E=32081;E<=32086;E++)T[E]=0;for(E=32107;E<=32130;E++)T[E]=0;for(E=32133;E<=32159;E++)T[E]=0;for(E=32164;E<=32167;E++)T[E]=2;for(E=32180;E<=32199;E++)T[E]=0;for(E=32201;E<=32260;E++)T[E]=0;for(E=32301;E<=32360;E++)T[E]=0;for(E=32601;E<=32662;E++)T[E]=0;for(E=32664;E<=32667;E++)T[E]=2;for(E=32701;E<=32761;E++)T[E]=0;for(E=53001;E<=53004;E++)T[E]=0;for(E=53008;E<=53019;E++)T[E]=0;for(E=53021;E<=53032;E++)T[E]=0;for(E=53034;E<=53037;E++)T[E]=0;for(E=53042;E<=53046;E++)T[E]=0;for(E=53074;E<=53080;E++)T[E]=0;for(E=54001;E<=54004;E++)T[E]=0;for(E=54008;E<=54019;E++)T[E]=0;for(E=54021;E<=54032;E++)T[E]=0;for(E=54034;E<=54037;E++)T[E]=0;for(E=54042;E<=54046;E++)T[E]=0;for(E=54048;E<=54053;E++)T[E]=0;for(E=54074;E<=54080;E++)T[E]=0;for(E=54098;E<=54101;E++)T[E]=0;for(E=102001;E<=102040;E++)T[E]=0;for(E=102042;E<=102063;E++)T[E]=0;for(E=102065;E<=102067;E++)T[E]=0;for(E=102070;E<=102117;E++)T[E]=0;for(E=102122;E<=102216;E++)T[E]=0;for(E=102221;E<=102377;E++)T[E]=0;for(E=102382;E<=102388;E++)T[E]=0;for(E=102389;E<=102398;E++)T[E]=2;for(E=102399;E<=102444;E++)T[E]=0;for(E=102445;E<=102447;E++)T[E]=2;for(E=102448;E<=102458;E++)T[E]=0;for(E=102459;E<=102468;E++)T[E]=2;for(E=102469;E<=102499;E++)T[E]=0;for(E=102500;E<=102519;E++)T[E]=1;for(E=102520;E<=102524;E++)T[E]=0;for(E=102525;E<=102529;E++)T[E]=2;for(E=102530;E<=102588;E++)T[E]=0;for(E=102590;E<=102598;E++)T[E]=0;for(E=102601;E<=102603;E++)T[E]=0;for(E=102605;E<=102628;E++)T[E]=0;for(E=102629;E<=102646;E++)T[E]=2;for(E=102648;E<=102700;E++)T[E]=2;for(E=102701;E<=102703;E++)T[E]=0;for(E=102707;E<=102730;E++)T[E]=2;for(E=102733;E<=102758;E++)T[E]=2;for(E=102767;E<=102900;E++)T[E]=0;for(E=102901;E<=102933;E++)T[E]=2;for(E=102934;E<=102950;E++)T[E]=13;for(E=102951;E<=102955;E++)T[E]=0;for(E=102961;E<=102963;E++)T[E]=0;for(E=102965;E<=102969;E++)T[E]=0;for(E=102971;E<=102973;E++)T[E]=0;for(E=102975;E<=102989;E++)T[E]=0;for(E=102990;E<=102992;E++)T[E]=1;for(E=102997;E<=103002;E++)T[E]=0;for(E=103003;E<=103008;E++)T[E]=2;for(E=103009;E<=103011;E++)T[E]=0;for(E=103012;E<=103014;E++)T[E]=2;for(E=103019;E<=103021;E++)T[E]=0;for(E=103022;E<=103024;E++)T[E]=2;for(E=103029;E<=103031;E++)T[E]=0;for(E=103032;E<=103034;E++)T[E]=2;for(E=103065;E<=103068;E++)T[E]=0;for(E=103074;E<=103076;E++)T[E]=0;for(E=103077;E<=103079;E++)T[E]=1;for(E=103080;E<=103082;E++)T[E]=0;for(E=103083;E<=103085;E++)T[E]=2;for(E=103090;E<=103093;E++)T[E]=0;for(E=103097;E<=103099;E++)T[E]=0;for(E=103100;E<=103102;E++)T[E]=2;for(E=103107;E<=103109;E++)T[E]=0;for(E=103110;E<=103112;E++)T[E]=2;for(E=103113;E<=103116;E++)T[E]=0;for(E=103117;E<=103120;E++)T[E]=2;for(E=103153;E<=103157;E++)T[E]=0;for(E=103158;E<=103162;E++)T[E]=2;for(E=103163;E<=103165;E++)T[E]=0;for(E=103166;E<=103168;E++)T[E]=1;for(E=103169;E<=103171;E++)T[E]=2;for(E=103186;E<=103188;E++)T[E]=0;for(E=103189;E<=103191;E++)T[E]=2;for(E=103192;E<=103195;E++)T[E]=0;for(E=103196;E<=103199;E++)T[E]=2;for(E=103200;E<=103224;E++)T[E]=0;for(E=103225;E<=103227;E++)T[E]=1;for(E=103232;E<=103237;E++)T[E]=0;for(E=103238;E<=103243;E++)T[E]=2;for(E=103244;E<=103246;E++)T[E]=0;for(E=103247;E<=103249;E++)T[E]=2;for(E=103254;E<=103256;E++)T[E]=0;for(E=103257;E<=103259;E++)T[E]=2;for(E=103264;E<=103266;E++)T[E]=0;for(E=103267;E<=103269;E++)T[E]=2;for(E=103300;E<=103375;E++)T[E]=0;for(E=103381;E<=103383;E++)T[E]=0;for(E=103384;E<=103386;E++)T[E]=1;for(E=103387;E<=103389;E++)T[E]=0;for(E=103390;E<=103392;E++)T[E]=2;for(E=103397;E<=103399;E++)T[E]=0;for(E=103400;E<=103471;E++)T[E]=2;for(E=103476;E<=103478;E++)T[E]=0;for(E=103479;E<=103481;E++)T[E]=2;for(E=103486;E<=103488;E++)T[E]=0;for(E=103489;E<=103491;E++)T[E]=2;for(E=103492;E<=103495;E++)T[E]=0;for(E=103496;E<=103499;E++)T[E]=2;for(E=103528;E<=103543;E++)T[E]=0;for(E=103544;E<=103548;E++)T[E]=2;for(E=103549;E<=103551;E++)T[E]=0;for(E=103552;E<=103554;E++)T[E]=1;for(E=103555;E<=103557;E++)T[E]=2;for(E=103558;E<=103560;E++)T[E]=0;for(E=103571;E<=103573;E++)T[E]=0;for(E=103574;E<=103576;E++)T[E]=2;for(E=103577;E<=103580;E++)T[E]=0;for(E=103581;E<=103583;E++)T[E]=2;for(E=103595;E<=103694;E++)T[E]=0;for(E=103696;E<=103699;E++)T[E]=0;for(E=103700;E<=103793;E++)T[E]=2;for(E=103794;E<=103890;E++)T[E]=0;for(E=103891;E<=103896;E++)T[E]=2;for(E=103900;E<=103971;E++)T[E]=2;for(E=103972;E<=103977;E++)T[E]=0;for(E=112e3;E<=112101;E++)T[E]=0},73327:(He,Pe,g)=>{"use strict";g.d(Pe,{Gv:()=>ye,HH:()=>W,JR:()=>ve,TC:()=>U,Tn:()=>Oe,Ue:()=>x,al:()=>se,bZ:()=>Te,cS:()=>le,dp:()=>X,fS:()=>De,is:()=>ge,op:()=>de,pp:()=>J,t8:()=>re});var E=g(53661),T=g(10465);function x(Ce=we){return[Ce[0],Ce[1],Ce[2],Ce[3],Ce[4],Ce[5]]}function se(Ce,Ie,je,Je,oe,be,Ue=x()){return Ue[0]=Ce,Ue[1]=Ie,Ue[2]=je,Ue[3]=Je,Ue[4]=oe,Ue[5]=be,Ue}function W(Ce,Ie){const je=isFinite(Ce[2])||isFinite(Ce[5]);return new T.Z(je?{xmin:Ce[0],xmax:Ce[3],ymin:Ce[1],ymax:Ce[4],zmin:Ce[2],zmax:Ce[5],spatialReference:Ie}:{xmin:Ce[0],xmax:Ce[3],ymin:Ce[1],ymax:Ce[4],spatialReference:Ie})}function U(Ce,Ie){Ce[0]=Math.min(Ce[0],Ie[0]),Ce[1]=Math.min(Ce[1],Ie[1]),Ce[2]=Math.min(Ce[2],Ie[2]),Ce[3]=Math.max(Ce[3],Ie[3]),Ce[4]=Math.max(Ce[4],Ie[4]),Ce[5]=Math.max(Ce[5],Ie[5])}function J(Ce,Ie){Ce[0]=Math.min(Ce[0],Ie[0]),Ce[1]=Math.min(Ce[1],Ie[1]),Ce[2]=Math.min(Ce[2],Ie[2]),Ce[3]=Math.max(Ce[3],Ie[0]),Ce[4]=Math.max(Ce[4],Ie[1]),Ce[5]=Math.max(Ce[5],Ie[2])}function X(Ce,Ie=[0,0,0]){return Ie[0]=function C(Ce){return Ce[0]>=Ce[3]?0:Ce[3]-Ce[0]}(Ce),Ie[1]=function D(Ce){return Ce[1]>=Ce[4]?0:Ce[4]-Ce[1]}(Ce),Ie[2]=function F(Ce){return Ce[2]>=Ce[5]?0:Ce[5]-Ce[2]}(Ce),Ie}function de(Ce,Ie,je=Ce){return je[0]=Ie[0],je[1]=Ie[1],je[2]=Ie[2],je!==Ce&&(je[3]=Ce[3],je[4]=Ce[4],je[5]=Ce[5]),je}function Oe(Ce,Ie,je=Ce){return je[3]=Ie[0],je[4]=Ie[1],je[5]=Ie[2],je!==Ce&&(je[0]=Ce[0],je[1]=Ce[1],je[2]=Ce[2]),Ce}function re(Ce,Ie){return Ce[0]=Ie[0],Ce[1]=Ie[1],Ce[2]=Ie[2],Ce[3]=Ie[3],Ce[4]=Ie[4],Ce[5]=Ie[5],Ce}function le(Ce){return Ce?re(Ce,ye):x(ye)}function ve(Ce,Ie){return Ce[0]=Ie[0],Ce[1]=Ie[1],Ce[2]=Number.NEGATIVE_INFINITY,Ce[3]=Ie[2],Ce[4]=Ie[3],Ce[5]=Number.POSITIVE_INFINITY,Ce}function Te(Ce,Ie,je,Je,oe){return Ce[0]=Ie,Ce[1]=je,Ce[2]=Number.NEGATIVE_INFINITY,Ce[3]=Je,Ce[4]=oe,Ce[5]=Number.POSITIVE_INFINITY,Ce}function ge(Ce){return 6===Ce.length}function De(Ce,Ie,je){if((0,E.Wi)(Ce)||(0,E.Wi)(Ie))return Ce===Ie;if(!ge(Ce)||!ge(Ie))return!1;if(je){for(let Je=0;Je<Ce.length;Je++)if(!je(Ce[Je],Ie[Je]))return!1}else for(let Je=0;Je<Ce.length;Je++)if(Ce[Je]!==Ie[Je])return!1;return!0}g(6848);const ye=[1/0,1/0,1/0,-1/0,-1/0,-1/0],we=[0,0,0,0,0,0];x()},6848:(He,Pe,g)=>{"use strict";g.d(Pe,{Cb:()=>C,Gv:()=>Ae,HH:()=>N,Ho:()=>J,SO:()=>D,Ue:()=>se,Zm:()=>he,al:()=>A,bf:()=>z,cS:()=>le,d9:()=>V,fS:()=>Te,jE:()=>Y,jn:()=>Q,kK:()=>ne,oJ:()=>U,r3:()=>ue}),g(67087),g(93142);var w=g(53661),Z=g(10465);function se(me=De){return[me[0],me[1],me[2],me[3]]}function V(me){return[me[0],me[1],me[2],me[3]]}function W(me,ye){return me!==ye&&(me[0]=ye[0],me[1]=ye[1],me[2]=ye[2],me[3]=ye[3]),me}function A(me,ye,we,$e,Ce=se()){return Ce[0]=me,Ce[1]=ye,Ce[2]=we,Ce[3]=$e,Ce}function U(me,ye=se()){return ye[0]=me.xmin,ye[1]=me.ymin,ye[2]=me.xmax,ye[3]=me.ymax,ye}function N(me,ye){return new Z.Z({xmin:me[0],ymin:me[1],xmax:me[2],ymax:me[3],spatialReference:ye})}function J(me,ye){ye[0]<me[0]&&(me[0]=ye[0]),ye[0]>me[2]&&(me[2]=ye[0]),ye[1]<me[1]&&(me[1]=ye[1]),ye[1]>me[3]&&(me[3]=ye[1])}function Q(me,ye,we){if((0,w.Wi)(ye))W(we,me);else if("length"in ye)ce(ye)?(we[0]=Math.min(me[0],ye[0]),we[1]=Math.min(me[1],ye[1]),we[2]=Math.max(me[2],ye[2]),we[3]=Math.max(me[3],ye[3])):2!==ye.length&&3!==ye.length||(we[0]=Math.min(me[0],ye[0]),we[1]=Math.min(me[1],ye[1]),we[2]=Math.max(me[2],ye[0]),we[3]=Math.max(me[3],ye[1]));else switch(ye.type){case"extent":we[0]=Math.min(me[0],ye.xmin),we[1]=Math.min(me[1],ye.ymin),we[2]=Math.max(me[2],ye.xmax),we[3]=Math.max(me[3],ye.ymax);break;case"point":we[0]=Math.min(me[0],ye.x),we[1]=Math.min(me[1],ye.y),we[2]=Math.max(me[2],ye.x),we[3]=Math.max(me[3],ye.y)}}function z(me){return(0,w.Wi)(me)||me[0]>=me[2]?0:me[2]-me[0]}function C(me){return me[1]>=me[3]?0:me[3]-me[1]}function D(me){return z(me)*C(me)}function Y(me,ye,we){return ye>=me[0]&&we>=me[1]&&ye<=me[2]&&we<=me[3]}function he(me,ye,we){return ye[0]>=me[0]-we&&ye[1]>=me[1]-we&&ye[0]<=me[2]+we&&ye[1]<=me[3]+we}function ne(me,ye){return Math.max(ye[0],me[0])<=Math.min(ye[2],me[2])&&Math.max(ye[1],me[1])<=Math.min(ye[3],me[3])}function ue(me,ye){return ye[0]>=me[0]&&ye[2]<=me[2]&&ye[1]>=me[1]&&ye[3]<=me[3]}function le(me){return me?W(me,Ae):se(Ae)}function ce(me){return null!=me&&4===me.length}function Te(me,ye){return ce(me)&&ce(ye)?me[0]===ye[0]&&me[1]===ye[1]&&me[2]===ye[2]&&me[3]===ye[3]:me===ye}const Ae=[1/0,1/0,-1/0,-1/0],De=[0,0,0,0]},71949:(He,Pe,g)=>{"use strict";function E(G){return void 0!==G.xmin&&void 0!==G.ymin&&void 0!==G.xmax&&void 0!==G.ymax}function T(G){return void 0!==G.points}function w(G){return void 0!==G.x&&void 0!==G.y}function Z(G){return void 0!==G.paths}function x(G){return void 0!==G.rings}function se(G){return function k(z,C){return null==z?C:null==C?z:G(z,C)}}g.d(Pe,{$P:()=>A,C6:()=>N,Yg:()=>U,lC:()=>Q});const V=se(Math.min),W=se(Math.max);function A(G,k){return Z(k)?N(G,k.paths,!1,!1):x(k)?N(G,k.rings,!1,!1):T(k)?Q(G,k.points,!1,!1,!1,!1):E(k)?J(G,k):(w(k)&&(G[0]=k.x,G[1]=k.y,G[2]=k.x,G[3]=k.y),G)}function U(G,k){return Z(k)?N(G,k.paths,!0,!1):x(k)?N(G,k.rings,!0,!1):T(k)?Q(G,k.points,!0,!1,!0,!1):E(k)?J(G,k,0,0,!0,!1):(w(k)&&(G[0]=k.x,G[1]=k.y,G[2]=k.z,G[3]=k.x,G[4]=k.y,G[5]=k.z),G)}function N(G,k,z,C){const D=z?3:2;if(!k.length||!k[0].length)return null;let F,B,$,X,[q,Y]=k[0][0],[ae,he]=k[0][0];for(let ne=0;ne<k.length;ne++){const ue=k[ne];for(let te=0;te<ue.length;te++){const ie=ue[te],[fe,_e]=ie;if(q=V(q,fe),Y=V(Y,_e),ae=W(ae,fe),he=W(he,_e),z&&ie.length>2){const de=ie[2];F=V(F,de),B=W(B,de)}if(C&&ie.length>D){const de=ie[D];$=V(F,de),X=W(B,de)}}}return z?C?(G[0]=q,G[1]=Y,G[2]=F,G[3]=$,G[4]=ae,G[5]=he,G[6]=B,G[7]=X,G.length=8,G):(G[0]=q,G[1]=Y,G[2]=F,G[3]=ae,G[4]=he,G[5]=B,G.length=6,G):C?(G[0]=q,G[1]=Y,G[2]=$,G[3]=ae,G[4]=he,G[5]=X,G.length=6,G):(G[0]=q,G[1]=Y,G[2]=ae,G[3]=he,G.length=4,G)}function J(G,k,z,C,D,F){const B=k.xmin,$=k.xmax,X=k.ymin,q=k.ymax;let Y=k.zmin,ae=k.zmax,he=k.mmin,ne=k.mmax;return D?(Y=Y||0,ae=ae||0,F?(he=he||0,ne=ne||0,G[0]=B,G[1]=X,G[2]=Y,G[3]=he,G[4]=$,G[5]=q,G[6]=ae,G[7]=ne,G):(G[0]=B,G[1]=X,G[2]=Y,G[3]=$,G[4]=q,G[5]=ae,G)):F?(he=he||0,ne=ne||0,G[0]=B,G[1]=X,G[2]=he,G[3]=$,G[4]=q,G[5]=ne,G):(G[0]=B,G[1]=X,G[2]=$,G[3]=q,G)}function Q(G,k,z,C,D,F){const B=z?3:2,$=C&&F,X=z&&D;if(!k.length||!k[0].length)return null;let q,Y,ae,he,[ne,ue]=k[0],[te,ie]=k[0];for(let fe=0;fe<k.length;fe++){const _e=k[fe],[de,Oe]=_e;if(ne=V(ne,de),ue=V(ue,Oe),te=W(te,de),ie=W(ie,Oe),X&&_e.length>2){const re=_e[2];q=V(q,re),Y=W(Y,re)}if($&&_e.length>B){const re=_e[B];ae=V(q,re),he=W(Y,re)}}return D?(q=q||0,Y=Y||0,F?(ae=ae||0,he=he||0,G[0]=ne,G[1]=ue,G[2]=q,G[3]=ae,G[4]=te,G[5]=ie,G[6]=Y,G[7]=he,G):(G[0]=ne,G[1]=ue,G[2]=q,G[3]=te,G[4]=ie,G[5]=Y,G)):F?(ae=ae||0,he=he||0,G[0]=ne,G[1]=ue,G[2]=ae,G[3]=te,G[4]=ie,G[5]=he,G):(G[0]=ne,G[1]=ue,G[2]=te,G[3]=ie,G)}},78127:(He,Pe,g)=>{"use strict";g.d(Pe,{$G:()=>T,DS:()=>x,NA:()=>W,a:()=>Z,tO:()=>w});var E=g(12818);function T(N){return N?N.hasZ?[N.xmax-N.xmin/2,N.ymax-N.ymin/2,N.zmax-N.zmin/2]:[N.xmax-N.xmin/2,N.ymax-N.ymin/2]:null}function w(N){return N?Z(N.rings,N.hasZ??!1):null}function Z(N,J){if(!N||!N.length)return null;const Q=[],G=[],k=J?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let z=0,C=N.length;z<C;z++){const D=x(N[z],J,k);D&&G.push(D)}if(G.sort((z,C)=>{let D=z[2]-C[2];return 0===D&&J&&(D=z[4]-C[4]),D}),G.length&&(Q[0]=G[0][0],Q[1]=G[0][1],J&&(Q[2]=G[0][3]),(Q[0]<k[0]||Q[0]>k[1]||Q[1]<k[2]||Q[1]>k[3]||J&&(Q[2]<k[4]||Q[2]>k[5]))&&(Q.length=0)),!Q.length){const z=N[0]&&N[0].length?function se(N,J){const Q=J?[0,0,0]:[0,0],G=J?[0,0,0]:[0,0];let k=0,z=0,C=0,D=0;for(let F=0,B=N.length;F<B-1;F++){const $=N[F],X=N[F+1];if($&&X){Q[0]=$[0],Q[1]=$[1],G[0]=X[0],G[1]=X[1],J&&$.length>2&&X.length>2&&(Q[2]=$[2],G[2]=X[2]);const q=(0,E.xA)(Q,G);if(q){k+=q;const Y=(0,E.Gi)($,X);z+=q*Y[0],C+=q*Y[1],J&&Y.length>2&&(D+=q*Y[2])}}}return k>0?J?[z/k,C/k,D/k]:[z/k,C/k]:N.length?N[0]:null}(N[0],J):null;if(!z)return null;Q[0]=z[0],Q[1]=z[1],J&&z.length>2&&(Q[2]=z[2])}return Q}function x(N,J,Q){let G=0,k=0,z=0,C=0,D=0;const F=N.length?N[0][0]:0,B=N.length?N[0][1]:0,$=N.length&&J?N[0][2]:0;for(let q=0;q<N.length;q++){const Y=N[q],ae=N[(q+1)%N.length],[he,ne,ue]=Y,te=he-F,ie=ne-B,[fe,_e,de]=ae,Oe=fe-F,re=_e-B,le=te*re-Oe*ie;if(C+=le,G+=(te+Oe)*le,k+=(ie+re)*le,J&&Y.length>2&&ae.length>2){const ce=ue-$,ve=de-$,Te=te*ve-Oe*ce;z+=(ce+ve)*Te,D+=Te}he<Q[0]&&(Q[0]=he),he>Q[1]&&(Q[1]=he),ne<Q[2]&&(Q[2]=ne),ne>Q[3]&&(Q[3]=ne),J&&(ue<Q[4]&&(Q[4]=ue),ue>Q[5]&&(Q[5]=ue))}if(C>0&&(C*=-1),D>0&&(D*=-1),!C)return null;C*=.5,D*=.5;const X=[G/(6*C)+F,k/(6*C)+B,C];return J&&(Q[4]===Q[5]||0===D?(X[3]=(Q[4]+Q[5])/2,X[4]=0):(X[3]=z/(6*D)+$,X[4]=D)),X}const V=1e-6;function W(N){if(!N||!N.rings)return null;const{rings:J}=N;let Q=0;for(let z=0;z<J.length;z++)Q+=(0,E.Sm)(J[z]);if(Q<V)return Z(J,!1);const G=[0,0],k=J[0][0];for(let z=0;z<J.length;z++)U(G,k,J[z]);return G[0]*=1/Q,G[1]*=1/Q,G[0]+=k[0],G[1]+=k[1],G}const A=1/3;function U(N,J,Q){if(!N||!Q||Q.length<3)return null;const G=Q[0],k=[0,0],z=[Q[1][0]-G[0],Q[1][1]-G[1]];let C;for(let B=2;B<Q.length;B++)k[0]=Q[B][0]-G[0],k[1]=Q[B][1]-G[1],C=.5*A*(k[0]*z[1]-k[1]*z[0]),N[0]+=C*(z[0]+k[0]),N[1]+=C*(z[1]+k[1]),z[0]=k[0],z[1]=k[1];const D=(0,E.Sm)(Q),F=[G[0],G[1]];return F[0]-=J[0],F[1]-=J[1],F[0]*=D,F[1]*=D,N[0]+=F[0],N[1]+=F[1],N}},30446:(He,Pe,g)=>{"use strict";g.d(Pe,{CI:()=>A,OQ:()=>se,Qg:()=>V,aV:()=>w,lQ:()=>Z,uP:()=>x,wP:()=>N});var E=g(53661);const T=[0,0];function w(G,k){return!!(0,E.pC)(k)&&W(G,k.x,k.y,k.z)}function Z(G,k){if(!k.points||k.points.length)return!1;for(const z of k.points)if(!se(G,z))return!1;return!0}function x(G,k){const{xmin:z,ymin:C,zmin:D,xmax:F,ymax:B,zmax:$}=k;return G.hasZ&&k.hasZ?W(G,z,C,D)&&W(G,z,B,D)&&W(G,F,B,D)&&W(G,F,C,D)&&W(G,z,C,$)&&W(G,z,B,$)&&W(G,F,B,$)&&W(G,F,C,$):W(G,z,C)&&W(G,z,B)&&W(G,F,B)&&W(G,F,C)}function se(G,k){return W(G,k[0],k[1])}function V(G,k){return W(G,k[0],k[1],k[2])}function W(G,k,z,C){return k>=G.xmin&&k<=G.xmax&&z>=G.ymin&&z<=G.ymax&&(null==C||!G.hasZ||C>=G.zmin&&C<=G.zmax)}function A(G,k){return T[1]=k.y,T[0]=k.x,function U(G,k){return N(G.rings,k)}(G,T)}function N(G,k){if(!G)return!1;if(function J(G){return!Array.isArray(G[0][0])}(G))return Q(!1,G,k);let z=!1;for(let C=0,D=G.length;C<D;C++)z=Q(z,G[C],k);return z}function Q(G,k,z){const[C,D]=z;let F=G,B=0;for(let $=0,X=k.length;$<X;$++){B++,B===X&&(B=0);const[q,Y]=k[$],[ae,he]=k[B];(Y<D&&he>=D||he<D&&Y>=D)&&q+(D-Y)/(he-Y)*(ae-q)<C&&(F=!F)}return F}},12818:(He,Pe,g)=>{"use strict";g.d(Pe,{Gi:()=>A,Sm:()=>F,Tx:()=>se,Zy:()=>k,bu:()=>J,ko:()=>V,pW:()=>G,xA:()=>Z});var E=g(19420);function Z($,X){const q=X[0]-$[0],Y=X[1]-$[1];if($.length>2&&X.length>2){const ae=$[2]-X[2];return Math.sqrt(q*q+Y*Y+ae*ae)}return Math.sqrt(q*q+Y*Y)}function se($,X,q,Y){const[ae,he]=X,[ne,ue]=q[Y],[te,ie]=q[Y+1],fe=te-ne,_e=ie-ue,re=Math.min(1,Math.max(0,((ae-ne)*fe+(he-ue)*_e)/(fe*fe+_e*_e)));return $[0]=ne+fe*re,$[1]=ue+_e*re,$}function V($,X,q){const Y=q.rings;let ae,he,ne=!1,ue=1/0;for(let te=0;te<Y.length;te++){const ie=Y[te];for(let fe=0,_e=ie.length-1;fe<ie.length;_e=fe++)ae=ie[fe],he=ie[_e],ae[1]>X!=he[1]>X&&$<(he[0]-ae[0])*(X-ae[1])/(he[1]-ae[1])+ae[0]&&(ne=!ne),ue=Math.min(ue,W($,X,ae,he))}return 0===ue?0:(ne?1:-1)*Math.sqrt(ue)}function W($,X,q,Y){let ae=q[0],he=q[1],ne=Y[0]-ae,ue=Y[1]-he;if(0!==ne||0!==ue){const te=(($-ae)*ne+(X-he)*ue)/(ne*ne+ue*ue);te>1?(ae=Y[0],he=Y[1]):te>0&&(ae+=ne*te,he+=ue*te)}return ne=$-ae,ue=X-he,ne*ne+ue*ue}function A($,X){return function x($,X,q){const Y=$[0]+q*(X[0]-$[0]),ae=$[1]+q*(X[1]-$[1]);return $.length>2&&X.length>2?[Y,ae,$[2]+q*(X[2]-$[2])]:[Y,ae]}($,X,.5)}function J($,X,q){const Y=$.length;let ae=0,he=0,ne=0;for(let ue=0;ue<Y;ue++){const te=$[ue],ie=$[(ue+1)%Y];let fe=2;ae+=te[0]*ie[1]-ie[0]*te[1],te.length>2&&ie.length>2&&q&&(he+=te[0]*ie[2]-ie[0]*te[2],fe=3),te.length>fe&&ie.length>fe&&X&&(ne+=te[0]*ie[fe]-ie[0]*te[fe])}return ae<=0&&he<=0&&ne<=0}function Q($){const X=$.length;return X>2&&(0,E.fS)($[0],$[X-1])}function G($){if("rings"in $&&(k($),$.rings.length>0&&!J($.rings[0],$.hasM??!1,$.hasZ??!1)))for(const X of $.rings)X.reverse()}function k($){if("rings"in $)for(const X of $.rings)Q(X)||X.push(X[0].slice())}function F($){if(!$||$.length<3)return 0;let X=0;const q=$.length-1;for(let Y=0;Y<q;Y++)X+=($[Y][0]-$[Y+1][0])*($[Y][1]+$[Y+1][1]);return X+=($[q][0]-$[0][0])*($[q][1]+$[0][1]),-.5*X}g(53492)},84572:(He,Pe,g)=>{"use strict";g.d(Pe,{Wn:()=>C,_w:()=>z,aO:()=>Q});var E=g(71949);const V=[];function W(D,F,B,$){return{xmin:D,ymin:F,xmax:B,ymax:$}}function A(D,F,B,$,X,q){return{xmin:D,ymin:F,zmin:B,xmax:$,ymax:X,zmax:q}}function U(D,F,B,$,X,q){return{xmin:D,ymin:F,mmin:B,xmax:$,ymax:X,mmax:q}}function N(D,F,B,$,X,q,Y,ae){return{xmin:D,ymin:F,zmin:B,mmin:$,xmax:X,ymax:q,zmax:Y,mmax:ae}}function J(D,F=!1,B=!1){return F?B?N(D[0],D[1],D[2],D[3],D[4],D[5],D[6],D[7]):A(D[0],D[1],D[2],D[3],D[4],D[5]):B?U(D[0],D[1],D[2],D[3],D[4],D[5]):W(D[0],D[1],D[2],D[3])}function Q(D){return D?function T(D){return void 0!==D.xmin&&void 0!==D.ymin&&void 0!==D.xmax&&void 0!==D.ymax}(D)?D:function Z(D){return void 0!==D.x&&void 0!==D.y}(D)?function k(D){const{x:F,y:B,z:$,m:X}=D,q=null!=X;return null!=$?q?N(F,B,$,X,F,B,$,X):A(F,B,$,F,B,$):q?U(F,B,X,F,B,X):W(F,B,F,B)}(D):function se(D){return void 0!==D.rings}(D)?z(D):function x(D){return void 0!==D.paths}(D)?C(D):function w(D){return void 0!==D.points}(D)?function G(D){const{hasZ:F,hasM:B,points:$}=D;return J((0,E.lC)(V,$,F??!1,B??!1),F,B)}(D):null:null}function z(D){const{hasZ:F,hasM:B,rings:$}=D,X=(0,E.C6)(V,$,F??!1,B??!1);return X?J(X,F,B):null}function C(D){const{hasZ:F,hasM:B,paths:$}=D,X=(0,E.C6)(V,$,F??!1,B??!1);return X?J(X,F,B):null}},76438:(He,Pe,g)=>{"use strict";g.d(Pe,{Ff:()=>k,IY:()=>D,Nl:()=>N,UT:()=>C,h_:()=>w});var E=g(30446);function T(F,B){return(0,E.aV)(F,B)}function w(F,B){let X,q,Y;if(F.xmin<=B.xmin){if(X=B.xmin,F.xmax<X)return!1}else if(X=F.xmin,B.xmax<X)return!1;if(F.ymin<=B.ymin){if(q=B.ymin,F.ymax<q)return!1}else if(q=F.ymin,B.ymax<q)return!1;if(F.hasZ&&B.hasZ&&B.hasZ)if(F.zmin<=B.zmin){if(Y=B.zmin,F.zmax<Y)return!1}else if(Y=F.zmin,B.zmax<Y)return!1;return!0}function Z(F,B){const{points:$,hasZ:X}=B,q=X?E.Qg:E.OQ;for(const Y of $)if(q(F,Y))return!0;return!1}const x=[0,0],se=[0,0],V=[0,0],W=[0,0],A=[x,se,V,W],U=[[V,x],[x,se],[se,W],[W,V]];function N(F,B){return function J(F,B){x[0]=F.xmin,x[1]=F.ymax,se[0]=F.xmax,se[1]=F.ymax,V[0]=F.xmin,V[1]=F.ymin,W[0]=F.xmax,W[1]=F.ymin;for(const $ of A)if((0,E.wP)(B,$))return!0;for(const $ of B){if(!$.length)continue;let X=$[0];if((0,E.OQ)(F,X))return!0;for(let q=1;q<$.length;q++){const Y=$[q];if((0,E.OQ)(F,Y)||z(X,Y,U))return!0;X=Y}}return!1}(F,B.rings)}function Q(F,B){x[0]=F.xmin,x[1]=F.ymax,se[0]=F.xmax,se[1]=F.ymax,V[0]=F.xmin,V[1]=F.ymin,W[0]=F.xmax,W[1]=F.ymin;const $=B.paths;for(const X of $){if(!$.length)continue;let q=X[0];if((0,E.OQ)(F,q))return!0;for(let Y=1;Y<X.length;Y++){const ae=X[Y];if((0,E.OQ)(F,ae)||z(q,ae,U))return!0;q=ae}}return!1}const G=[0,0];function k(F){for(let B=0;B<F.length;B++){const $=F[B];for(let q=0;q<$.length-1;q++){const Y=$[q],ae=$[q+1];for(let he=B+1;he<F.length;he++)for(let ne=0;ne<F[he].length-1;ne++){const ue=F[he][ne],te=F[he][ne+1];if(C(Y,ae,ue,te,G)&&!(G[0]===Y[0]&&G[1]===Y[1]||G[0]===ue[0]&&G[1]===ue[1]||G[0]===ae[0]&&G[1]===ae[1]||G[0]===te[0]&&G[1]===te[1]))return!0}}const X=$.length;if(!(X<=4))for(let q=0;q<X-3;q++){let Y=X-1;0===q&&(Y=X-2);const ae=$[q],he=$[q+1];for(let ne=q+2;ne<Y;ne++){const ue=$[ne],te=$[ne+1];if(C(ae,he,ue,te,G)&&!(G[0]===ae[0]&&G[1]===ae[1]||G[0]===ue[0]&&G[1]===ue[1]||G[0]===he[0]&&G[1]===he[1]||G[0]===te[0]&&G[1]===te[1]))return!0}}}return!1}function z(F,B,$){for(let X=0;X<$.length;X++)if(C(F,B,$[X][0],$[X][1]))return!0;return!1}function C(F,B,$,X,q){const[Y,ae]=F,[he,ne]=B,[ue,te]=$,[ie,fe]=X,_e=ie-ue,de=Y-ue,Oe=he-Y,re=fe-te,le=ae-te,ce=ne-ae,ve=re*Oe-_e*ce;if(0===ve)return!1;const Te=(_e*le-re*de)/ve,ge=(Oe*le-ce*de)/ve;return Te>=0&&Te<=1&&ge>=0&&ge<=1&&(q&&(q[0]=Y+Te*(he-Y),q[1]=ae+Te*(ne-ae)),!0)}function D(F){switch(F){case"esriGeometryEnvelope":case"extent":return w;case"esriGeometryMultipoint":case"multipoint":return Z;case"esriGeometryPoint":case"point":return T;case"esriGeometryPolygon":case"polygon":return N;case"esriGeometryPolyline":case"polyline":return Q}}},71182:(He,Pe,g)=>{"use strict";g.d(Pe,{Ji:()=>k,YX:()=>W,aW:()=>A,im:()=>G,l9:()=>N,oU:()=>J,q9:()=>C,wp:()=>U});var E=g(53661),T=g(10465),w=g(70535),Z=g(23675),x=g(35787),se=g(55733),V=g(7913);function W(D){return void 0!==D.xmin&&void 0!==D.ymin&&void 0!==D.xmax&&void 0!==D.ymax}function A(D){return void 0!==D.points}function U(D){return void 0!==D.x&&void 0!==D.y}function N(D){return void 0!==D.paths}function J(D){return void 0!==D.rings}function G(D){return(0,E.Wi)(D)?null:D instanceof w.Z?D:U(D)?x.Z.fromJSON(D):N(D)?V.Z.fromJSON(D):J(D)?se.Z.fromJSON(D):A(D)?Z.Z.fromJSON(D):W(D)?T.Z.fromJSON(D):null}function k(D){return D?U(D)?"esriGeometryPoint":N(D)?"esriGeometryPolyline":J(D)?"esriGeometryPolygon":W(D)?"esriGeometryEnvelope":A(D)?"esriGeometryMultipoint":null:null}const z={esriGeometryPoint:x.Z,esriGeometryPolyline:V.Z,esriGeometryPolygon:se.Z,esriGeometryEnvelope:T.Z,esriGeometryMultipoint:Z.Z};function C(D){return D&&z[D]||null}},42758:(He,Pe,g)=>{"use strict";g.d(Pe,{aX:()=>ie,or:()=>de});var E=g(71670),T=g(68327),w=g(32995),Z=g(28191),x=g(53661),se=g(55733),V=g(7913),W=g(15686),A=g(53492),U=g(83550),J=(g(6010),g(1897)),Q=g(71182),G=g(25820);function z(){return(z=(0,E.Z)(function*(Oe,re,le,ce){const ve=(0,G.en)(Oe),Te=re[0].spatialReference,ge={...ce,query:{...ve.query,f:"json",sr:JSON.stringify(Te),target:JSON.stringify({geometryType:(0,Q.Ji)(re[0]),geometries:re}),cutter:JSON.stringify(le)}},Ae=yield(0,J.default)(ve.path+"/cut",ge),{cutIndexes:De,geometries:Se=[]}=Ae.data;return{cutIndexes:De,geometries:Se.map(me=>{const ye=(0,Q.im)(me);return ye.spatialReference=Te,ye})}})).apply(this,arguments)}var C=g(55050),D=g(11723);function B(){return(B=(0,E.Z)(function*(Oe,re,le){const ce="string"==typeof Oe?(0,C.mN)(Oe):Oe,ve=re[0].spatialReference,Te=(0,Q.Ji)(re[0]),ge={...le,query:{...ce.query,f:"json",sr:ve.wkid?ve.wkid:JSON.stringify(ve),geometries:JSON.stringify((0,D.F)(re))}},{data:Ae}=yield(0,J.default)(ce.path+"/simplify",ge);return(0,D.o)(Ae.geometries,Te,ve)})).apply(this,arguments)}const $=Z.Z.getLogger("esri.geometry.support.normalizeUtils");function q(Oe){return"polygon"===Oe[0].type}function Y(Oe){return"polyline"===Oe[0].type}function ne(Oe,re,le){if(re){const ce=function he(Oe,re){if(!(Oe instanceof V.Z||Oe instanceof se.Z)){const ve="straightLineDensify: the input geometry is neither polyline nor polygon";throw $.error(ve),new w.Z(ve)}const le=(0,W.x3)(Oe),ce=[];for(const ve of le){const Te=[];ce.push(Te),Te.push([ve[0][0],ve[0][1]]);for(let ge=0;ge<ve.length-1;ge++){const Ae=ve[ge][0],De=ve[ge][1],Se=ve[ge+1][0],me=ve[ge+1][1],ye=Math.sqrt((Se-Ae)*(Se-Ae)+(me-De)*(me-De)),we=(me-De)/ye,$e=(Se-Ae)/ye,Ce=ye/re;if(Ce>1){for(let oe=1;oe<=Ce-1;oe++){const be=oe*re;Te.push([$e*be+Ae,we*be+De])}const Ie=(ye+Math.floor(Ce-1)*re)/2;Te.push([$e*Ie+Ae,we*Ie+De])}Te.push([Se,me])}}return function X(Oe){return"polygon"===Oe.type}(Oe)?new se.Z({rings:ce,spatialReference:Oe.spatialReference}):new V.Z({paths:ce,spatialReference:Oe.spatialReference})}(Oe,1e6);Oe=(0,U.Sx)(ce,!0)}return le&&(Oe=(0,W.Sy)(Oe,le)),Oe}function ue(Oe,re,le){if(Array.isArray(Oe)){const ce=Oe[0];if(ce>re){const ve=(0,W.XZ)(ce,re);Oe[0]=ce+ve*(-2*re)}else if(ce<le){const ve=(0,W.XZ)(ce,le);Oe[0]=ce+ve*(-2*le)}}else{const ce=Oe.x;if(ce>re){const ve=(0,W.XZ)(ce,re);Oe=Oe.clone().offset(ve*(-2*re),0)}else if(ce<le){const ve=(0,W.XZ)(ce,le);Oe=Oe.clone().offset(ve*(-2*le),0)}}return Oe}function ie(Oe,re,le){return fe.apply(this,arguments)}function fe(){return fe=(0,E.Z)(function*(Oe,re,le){if(!Array.isArray(Oe))return ie([Oe],re);re&&"string"!=typeof re&&$.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const ce="string"==typeof re?re:re?.url??T.default.geometryServiceUrl;let ve,Te,ge,Ae,De,Se,me,ye,we=0;const $e=[],Ce=[];for(const Ue of Oe)if((0,x.Wi)(Ue))Ce.push(Ue);else if(ve||(ve=Ue.spatialReference,Te=(0,A.C5)(ve),ge=ve.isWebMercator,Se=ge?102100:4326,Ae=W.UZ[Se].maxX,De=W.UZ[Se].minX,me=W.UZ[Se].plus180Line,ye=W.UZ[Se].minus180Line),Te)if("mesh"===Ue.type)Ce.push(Ue);else if("point"===Ue.type)Ce.push(ue(Ue.clone(),Ae,De));else if("multipoint"===Ue.type){const Fe=Ue.clone();Fe.points=Fe.points.map(Ke=>ue(Ke,Ae,De)),Ce.push(Fe)}else if("extent"===Ue.type){const Fe=Ue.clone()._normalize(!1,!1,Te);Ce.push(Fe.rings?new se.Z(Fe):Fe)}else if(Ue.extent){const Fe=Ue.extent,Ke=(0,W.XZ)(Fe.xmin,De)*(2*Ae);let Ve=0===Ke?Ue.clone():(0,W.Sy)(Ue.clone(),Ke);Fe.offset(Ke,0),Fe.intersects(me)&&Fe.xmax!==Ae?(we=Fe.xmax>we?Fe.xmax:we,Ve=ne(Ve,ge),$e.push(Ve),Ce.push("cut")):Fe.intersects(ye)&&Fe.xmin!==De?(we=Fe.xmax*(2*Ae)>we?Fe.xmax*(2*Ae):we,Ve=ne(Ve,ge,360),$e.push(Ve),Ce.push("cut")):Ce.push(Ve)}else Ce.push(Ue.clone());else Ce.push(Ue);let Ie=(0,W.XZ)(we,Ae),je=-90;const Je=Ie,oe=new V.Z;for(;Ie>0;){const Ue=360*Ie-180;oe.addPath([[Ue,je],[Ue,-1*je]]),je*=-1,Ie--}if($e.length>0&&Je>0){const Ue=function te(Oe,re){let le=-1;for(let ce=0;ce<re.cutIndexes.length;ce++){const ve=re.cutIndexes[ce],Te=re.geometries[ce],ge=(0,W.x3)(Te);for(let Ae=0;Ae<ge.length;Ae++){const De=ge[Ae];De.some(Se=>{if(Se[0]<180)return!0;{let me=0;for(let we=0;we<De.length;we++){const $e=De[we][0];me=$e>me?$e:me}me=Number(me.toFixed(9));const ye=-360*(0,W.XZ)(me,180);for(let we=0;we<De.length;we++){const $e=Te.getPoint(Ae,we);Te.setPoint(Ae,we,$e.clone().offset(ye,0))}return!0}})}if(ve===le){if(q(Oe))for(const Ae of(0,W.x3)(Te))Oe[ve]=Oe[ve].addRing(Ae);else if(Y(Oe))for(const Ae of(0,W.x3)(Te))Oe[ve]=Oe[ve].addPath(Ae)}else le=ve,Oe[ve]=Te}return Oe}($e,yield function k(Oe,re,le,ce){return z.apply(this,arguments)}(ce,$e,oe,le)),Fe=[],Ke=[];for(let rt=0;rt<Ce.length;rt++){const Ne=Ce[rt];if("cut"!==Ne)Ke.push(Ne);else{const qe=Ue.shift(),ft=Oe[rt];(0,x.pC)(ft)&&"polygon"===ft.type&&ft.rings&&ft.rings.length>1&&qe.rings.length>=ft.rings.length?(Fe.push(qe),Ke.push("simplify")):Ke.push(ge?(0,U.$)(qe):qe)}}if(!Fe.length)return Ke;const Ve=yield function F(Oe,re,le){return B.apply(this,arguments)}(ce,Fe,le),tt=[];for(let rt=0;rt<Ke.length;rt++){const Ne=Ke[rt];tt.push("simplify"!==Ne?Ne:ge?(0,U.$)(Ve.shift()):Ve.shift())}return tt}const be=[];for(let Ue=0;Ue<Ce.length;Ue++){const Fe=Ce[Ue];if("cut"!==Fe)be.push(Fe);else{const Ke=$e.shift();be.push(!0===ge?(0,U.$)(Ke):Ke)}}return be}),fe.apply(this,arguments)}function de(Oe,re){const le=(0,A.C5)(re);if(le){const[ce,ve]=le.valid,Te=ve-ce;if(Oe<ce)for(;Oe<ce;)Oe+=Te;if(Oe>ve)for(;Oe>ve;)Oe-=Te}return Oe}},15686:(He,Pe,g)=>{"use strict";g.d(Pe,{Sy:()=>se,UZ:()=>Z,XZ:()=>x,x3:()=>V});var E=g(7913),T=g(68230),w=g(71182);const Z={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new E.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:T.Z.WebMercator}),minus180Line:new E.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:T.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new E.Z({paths:[[[180,-180],[180,180]]],spatialReference:T.Z.WGS84}),minus180Line:new E.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:T.Z.WGS84})}};function x(W,A){return Math.ceil((W-A)/(2*A))}function se(W,A){const U=V(W);for(const N of U)for(const J of N)J[0]+=A;return W}function V(W){return(0,w.oU)(W)?W.rings:W.paths}},78998:(He,Pe,g)=>{"use strict";g.d(Pe,{D9:()=>V,dp:()=>Z,yZ:()=>w});var E=g(82769);const T=96;function w(W,A){const U=A||W.extent,N=W.width,J=(0,E.c9)(U&&U.spatialReference);return U&&N?U.width/N*J*E.hd*T:0}function Z(W,A){return W/((0,E.c9)(A)*E.hd*T)}function V(W,A){const U=W.extent,N=W.width-(W.padding?W.padding.left+W.padding.right:0),J=Z(A,U.spatialReference);return U.clone().expand(J*N/U.width)}},53492:(He,Pe,g)=>{"use strict";g.d(Pe,{BZ:()=>B,C5:()=>J,JY:()=>Y,ME:()=>$,MP:()=>q,N$:()=>G,QM:()=>D,R_:()=>he,V2:()=>X,WR:()=>ne,Zn:()=>ae,fS:()=>N,o$:()=>F,oR:()=>k,sS:()=>C,sT:()=>Q,yW:()=>z});var E=g(53661),T=g(3758),w=g(39498),Z=g(94009);const x={102113:!0,102100:!0,3857:!0,3785:!0},se={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},V='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',W=[-20037508.342788905,20037508.342788905],A=[-20037508.342787,20037508.342787],U={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:W,origin:A,dx:1e-5},102100:{wkTemplate:V,valid:W,origin:A,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:W,origin:A,dx:1e-5},3857:{wkTemplate:V,valid:W,origin:A,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function N(ue,te){return ue===te||!(0,E.Wi)(ue)&&!(0,E.Wi)(te)&&(null!=ue.wkid||null!=te.wkid?ue.wkid===te.wkid||C(ue)&&C(te)||null!=te.latestWkid&&ue.wkid===te.latestWkid||null!=ue.latestWkid&&te.wkid===ue.latestWkid:!(!ue.wkt||!te.wkt)&&ue.wkt.toUpperCase()===te.wkt.toUpperCase())}function J(ue){return Y(ue)&&ue.wkid&&U[ue.wkid]||null}function Q(ue){return!!Y(ue)&&(ue.wkid?null==Z.Z[ue.wkid]:!!ue.wkt&&!!/^\s*GEOGCS/i.test(ue.wkt))}function G(ue){return!(B(ue)||X(ue))}function k(ue){return Y(ue)&&4326===ue.wkid}function z(ue){return Y(ue)&&ue.wkid===w.W.CGCS2000}function C(ue){return Y(ue)&&null!=ue.wkid&&!0===x[ue.wkid]}function D(ue){return Y(ue)&&32662===ue.wkid}function F(ue){return ue===w.W.GCSMARS2000||ue===w.W.GCSMARS2000_SPHERE}function B(ue){return Y(ue)&&null!=ue.wkid&&F(ue.wkid)}function $(ue){return ue===w.W.GCSMOON2000}function X(ue){return Y(ue)&&null!=ue.wkid&&$(ue.wkid)}function q(ue){return Y(ue)&&null!=ue.wkid&&!0===se[ue.wkid]}function Y(ue){return(0,E.pC)(ue)&&(null!=ue.wkid&&ue.wkid>=2e3||null!=ue.wkt)}const ae={wkid:4326,wkt:(0,T.gx)(U[4326].wkTemplate,{Central_Meridian:"0.0"})},he={wkid:102100,latestWkid:3857},ne={wkid:32662}},86230:(He,Pe,g)=>{"use strict";g.d(Pe,{M:()=>T,P:()=>w});var E=g(63321);const T=(0,E.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),w=(0,E.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},83550:(He,Pe,g)=>{"use strict";g.d(Pe,{$:()=>F,Q8:()=>k,R6:()=>D,Sx:()=>B,hG:()=>C,iV:()=>z,mZ:()=>N});var E=g(88684),T=g(53661),w=g(68230),Z=g(86355),x=g(53492);const se=57.29577951308232,V=.017453292519943;function W($){return $*se}function A($){return $*V}function N($){return Math.PI/2-2*Math.atan(Math.exp(-$/Z.sv.radius))}function J($){return null!=$.wkid||null!=$.wkt}const Q=[0,0];function G($,X,q,Y,ae){const he=$,ne=ae;if(ne.spatialReference=q,"x"in he&&"x"in ne)[ne.x,ne.y]=X(he.x,he.y,Q,Y);else if("xmin"in he&&"xmin"in ne)[ne.xmin,ne.ymin]=X(he.xmin,he.ymin,Q,Y),[ne.xmax,ne.ymax]=X(he.xmax,he.ymax,Q,Y);else if("paths"in he&&"paths"in ne||"rings"in he&&"rings"in ne){const ue="paths"in he?he.paths:he.rings,te=[];let ie;for(let fe=0;fe<ue.length;fe++){const _e=ue[fe];ie=[],te.push(ie);for(let de=0;de<_e.length;de++)ie.push(X(_e[de][0],_e[de][1],[0,0],Y)),_e[de].length>2&&ie[de].push(_e[de][2]),_e[de].length>3&&ie[de].push(_e[de][3])}"paths"in ne?ne.paths=te:ne.rings=te}else if("points"in he&&"points"in ne){const ue=he.points,te=[];for(let ie=0;ie<ue.length;ie++)te[ie]=X(ue[ie][0],ue[ie][1],[0,0],Y),ue[ie].length>2&&te[ie].push(ue[ie][2]),ue[ie].length>3&&te[ie].push(ue[ie][3]);ne.points=te}return ae}function k($,X){const q=$&&(J($)?$:$.spatialReference),Y=X&&(J(X)?X:X.spatialReference);return!($&&"type"in $&&"mesh"===$.type||X&&"type"in X&&"mesh"===X.type||!q||!Y)&&(!!(0,x.fS)(Y,q)||(0,x.sS)(Y)&&(0,x.oR)(q)||(0,x.sS)(q)&&(0,x.oR)(Y))}function z($,X){if((0,T.Wi)($))return null;const q=$.spatialReference,Y=X&&(J(X)?X:X.spatialReference);return k(q,Y)?(0,x.fS)(q,Y)?(0,E.d9)($):(0,x.sS)(Y)?G($,C,w.Z.WebMercator,!1,(0,E.d9)($)):(0,x.oR)(Y)?G($,D,w.Z.WGS84,!1,(0,E.d9)($)):null:null}function C($,X,q=[0,0]){X>89.99999?X=89.99999:X<-89.99999&&(X=-89.99999);const Y=A(X);return q[0]=A($)*Z.sv.radius,q[1]=Z.sv.halfSemiMajorAxis*Math.log((1+Math.sin(Y))/(1-Math.sin(Y))),q}function D($,X,q=[0,0],Y=!1){const ae=W($/Z.sv.radius);return q[0]=Y?ae:ae-360*Math.floor((ae+180)/360),q[1]=W(Math.PI/2-2*Math.atan(Math.exp(-X/Z.sv.radius))),q}function F($,X=!1,q=(0,E.d9)($)){return G($,C,w.Z.WebMercator,X,q)}function B($,X=!1,q=(0,E.d9)($)){return G($,D,w.Z.WGS84,X,q)}},13914:(He,Pe,g)=>{"use strict";function E(T,w,Z=!1){let{hasM:x,hasZ:se}=T;Array.isArray(w)?4!==w.length||x||se?3===w.length&&Z&&!x?(se=!0,x=!1):3===w.length&&x&&se&&(x=!1,se=!1):(x=!0,se=!0):(se=!se&&w.hasZ&&(!x||w.hasM),x=!x&&w.hasM&&(!se||w.hasZ)),T.hasZ=se,T.hasM=x}g.d(Pe,{l:()=>E})},83970:(He,Pe,g)=>{"use strict";g.d(Pe,{k:()=>Z});var E=g(53661),T=g(82769),w=g(53492);function Z(U,N,J){if((0,E.Wi)(N)||(0,E.Wi)(J)||J.vcsWkid||(0,w.fS)(N,J))return null;const Q=(0,T._R)(N)/(0,T._R)(J);if(1===Q)return null;switch(U){case"point":case"esriGeometryPoint":return G=>function x(U,N){U&&null!=U.z&&(U.z*=N)}(G,Q);case"polyline":case"esriGeometryPolyline":return G=>function V(U,N){if(U)for(const J of U.paths)for(const Q of J)Q.length>2&&(Q[2]*=N)}(G,Q);case"polygon":case"esriGeometryPolygon":return G=>function se(U,N){if(U)for(const J of U.rings)for(const Q of J)Q.length>2&&(Q[2]*=N)}(G,Q);case"multipoint":case"esriGeometryMultipoint":return G=>function W(U,N){if(U)for(const J of U.points)J.length>2&&(J[2]*=N)}(G,Q);case"extent":case"esriGeometryExtent":return G=>function A(U,N){U&&null!=U.zmin&&null!=U.zmax&&(U.zmin*=N,U.zmax*=N)}(G,Q);default:return null}}},25288:(He,Pe,g)=>{"use strict";g(84836),g(39634),g(55713),g(92051);var x=g(59680),se=g(71670),V=g(1897),W=g(32995),A=g(53661);function N(){return(N=(0,se.Z)(function*(D,F,B,$){const X=F.exec(B);if(!X)throw new W.Z("esri-intl:invalid-bundle",`Bundle id "${B}" is not compatible with the pattern "${F}"`);const q=X[1]?`${X[1]}/`:"",Y=X[2],ae=(0,x.Su)($),he=`${q}${Y}.json`,ne=ae?`${q}${Y}_${ae}.json`:he;let ue;try{ue=yield J(D(ne))}catch(te){if(ne===he)throw new W.Z("intl:unknown-bundle",`Bundle "${B}" cannot be loaded`,{error:te});try{ue=yield J(D(he))}catch(ie){throw new W.Z("intl:unknown-bundle",`Bundle "${B}" cannot be loaded`,{error:ie})}}return ue})).apply(this,arguments)}function J(D){return Q.apply(this,arguments)}function Q(){return(Q=(0,se.Z)(function*(D){if((0,A.pC)(z.fetchBundleAsset))return z.fetchBundleAsset(D);const F=yield(0,V.default)(D,{responseType:"text"});return JSON.parse(F.data)})).apply(this,arguments)}class G{constructor({base:F="",pattern:B,location:$=new URL(window.location.href)}){let X;X="string"==typeof $?q=>new URL(q,new URL($,window.location.href)).href:$ instanceof URL?q=>new URL(q,$).href:$,this.pattern="string"==typeof B?new RegExp(`^${B}`):B,this.getAssetUrl=X,F=F?F.endsWith("/")?F:F+"/":"",this.matcher=new RegExp(`^${F}(?:(.*)/)?(.*)$`)}fetchMessageBundle(F,B){return function U(D,F,B,$){return N.apply(this,arguments)}(this.getAssetUrl,this.matcher,F,B)}}const z={};var C=g(74792);(0,x.tz)(function k(D){return new G(D)}({pattern:"esri/",location:C.V}))},84836:(He,Pe,g)=>{"use strict";g.d(Pe,{Ze:()=>D,p6:()=>F});var E=g(63321),T=g(92051);const w={year:"numeric",month:"numeric",day:"numeric"},Z={year:"numeric",month:"long",day:"numeric"},x={year:"numeric",month:"short",day:"numeric"},se={year:"numeric",month:"long",weekday:"long",day:"numeric"},V={hour:"numeric",minute:"numeric"},W={...V,second:"numeric"},A={"short-date":w,"short-date-short-time":{...w,...V},"short-date-short-time-24":{...w,...V,hour12:!1},"short-date-long-time":{...w,...W},"short-date-long-time-24":{...w,...W,hour12:!1},"short-date-le":w,"short-date-le-short-time":{...w,...V},"short-date-le-short-time-24":{...w,...V,hour12:!1},"short-date-le-long-time":{...w,...W},"short-date-le-long-time-24":{...w,...W,hour12:!1},"long-month-day-year":Z,"long-month-day-year-short-time":{...Z,...V},"long-month-day-year-short-time-24":{...Z,...V,hour12:!1},"long-month-day-year-long-time":{...Z,...W},"long-month-day-year-long-time-24":{...Z,...W,hour12:!1},"day-short-month-year":x,"day-short-month-year-short-time":{...x,...V},"day-short-month-year-short-time-24":{...x,...V,hour12:!1},"day-short-month-year-long-time":{...x,...W},"day-short-month-year-long-time-24":{...x,...W,hour12:!1},"long-date":se,"long-date-short-time":{...se,...V},"long-date-short-time-24":{...se,...V,hour12:!1},"long-date-long-time":{...se,...W},"long-date-long-time-24":{...se,...W,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":V,"long-time":W},U=(0,E.w)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),G=(U.toJSON.bind(U),U.fromJSON.bind(U),{ar:"ar-u-nu-latn-ca-gregory"});let k=new WeakMap,z=A["short-date-short-time"];function D(B){return B?A[B]:null}function F(B,$){return function C(B){const $=B||z;let X=k.get($);if(!X){const q=(0,T.Kd)(),Y=G[(0,T.Kd)()]||q;X=new Intl.DateTimeFormat(Y,$),k.set($,X)}return X}($).format(B)}(0,T.Ze)(()=>{k=new WeakMap,z=A["short-date-short-time"]})},92051:(He,Pe,g)=>{"use strict";let T;g.d(Pe,{Kd:()=>x,Ze:()=>Q,qe:()=>N});const w=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function Z(){return w??globalThis.navigator?.language??"en"}function x(){return void 0===T&&(T=Z()),T}const U=[];function N(k){return U.push(k),{remove(){U.splice(U.indexOf(k),1)}}}const J=[];function Q(k){return J.push(k),{remove(){U.splice(J.indexOf(k),1)}}}globalThis.addEventListener?.("languagechange",function G(){const k=Z();T!==k&&(T=k,[...J].forEach(z=>{z.call(null,k)}),[...U].forEach(z=>{z.call(null,k)}))})},59680:(He,Pe,g)=>{"use strict";g.d(Pe,{ME:()=>J,Su:()=>G,tz:()=>N});var E=g(71670),T=g(32995),w=g(30801),Z=g(92051);const x=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,se={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function V(B){return se[B]??!1}const W=[],A=new Map;function U(B){for(const $ of A.keys())C(B.pattern,$)&&A.delete($)}function N(B){return W.includes(B)||(U(B),W.unshift(B)),{remove(){const $=W.indexOf(B);$>-1&&(W.splice($,1),U(B))}}}function J(B){return Q.apply(this,arguments)}function Q(){return Q=(0,E.Z)(function*(B){const $=(0,Z.Kd)();A.has(B)||A.set(B,function k(B,$){return z.apply(this,arguments)}(B,$));const X=A.get(B);return X&&(yield D.add(X)),X}),Q.apply(this,arguments)}function G(B){if(!x.test(B))return null;const $=x.exec(B);if(null===$)return null;const[,X,q]=$,Y=X+(q?"-"+q.toUpperCase():"");return V(Y)?Y:V(X)?X:null}function z(){return(z=(0,E.Z)(function*(B,$){const X=[];for(const q of W)if(C(q.pattern,B))try{return yield q.fetchMessageBundle(B,$)}catch(Y){X.push(Y)}throw X.length?new T.Z("intl:message-bundle-error",`Errors occurred while loading "${B}"`,{errors:X}):new T.Z("intl:no-message-bundle-loader",`No loader found for message bundle "${B}"`)})).apply(this,arguments)}function C(B,$){return"string"==typeof B?$.startsWith(B):B.test($)}(0,Z.Ze)(()=>{A.clear()});const D=new class{constructor(){this._numLoading=0,this._dfd=null}waitForAll(){var B=this;return(0,E.Z)(function*(){B._dfd&&(yield B._dfd.promise)})()}add(B){return this._increase(),B.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,w.dD)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},39634:(He,Pe,g)=>{"use strict";g.d(Pe,{sh:()=>V,uf:()=>W});var E=g(53661),T=g(92051);const w={ar:"ar-u-nu-latn"};let Z=new WeakMap,x={};function V(A={}){const U={};return null!=A.digitSeparator&&(U.useGrouping=A.digitSeparator),null!=A.places&&(U.minimumFractionDigits=U.maximumFractionDigits=A.places),U}function W(A,U){return-0===A&&(A=0),function se(A){const U=A||x;if(!Z.has(U)){const N=(0,T.Kd)(),J=w[(0,T.Kd)()]||N;Z.set(U,new Intl.NumberFormat(J,A))}return(0,E.j0)(Z.get(U))}(U).format(A)}(0,T.Ze)(()=>{Z=new WeakMap,x={}})},55713:(He,Pe,g)=>{"use strict";g.d(Pe,{n:()=>V});var E=g(28191),T=g(44054),w=g(3758),Z=g(84836),x=g(39634);const se=E.Z.getLogger("esri.intl.substitute");function V(J,Q,G={}){const{format:k={}}=G;return(0,w.gx)(J,z=>function W(J,Q,G){let k,z;const C=J.indexOf(":");if(-1===C?k=J.trim():(k=J.slice(0,C).trim(),z=J.slice(C+1).trim()),!k)return"";const D=(0,T.hS)(k,Q);if(null==D)return"";const F=(z?G?.[z]:null)??G?.[k];return F?function A(J,Q){switch(Q.type){case"date":return(0,Z.p6)(J,Q.intlOptions);case"number":return(0,x.uf)(J,Q.intlOptions);default:return se.warn("missing format descriptor for key {key}"),N(J)}}(D,F):z?function U(J,Q){switch(Q.toLowerCase()){case"dateformat":return(0,Z.p6)(J);case"numberformat":return(0,x.uf)(J);default:return se.warn(`inline format is unsupported since 4.12: ${Q}`),/^(dateformat|datestring)/i.test(Q)?(0,Z.p6)(J):/^numberformat/i.test(Q)?(0,x.uf)(J):N(J)}}(D,z):N(D)}(z,Q,k))}function N(J){switch(typeof J){case"string":return J;case"number":return(0,x.uf)(J);case"boolean":return""+J;default:return J instanceof Date?(0,Z.p6)(J):""}}},84489:(He,Pe,g)=>{"use strict";g.d(Pe,{Dp:()=>W,Nv:()=>x,i8:()=>Z,id:()=>se,qh:()=>V});var E=g(71670),T=g(67087),w=g(55050);const Z="4.26",x={request:(A,U)=>(0,E.Z)(function*(){const{default:N}=yield Promise.resolve().then(g.bind(g,1897)),J=A.options,Q=J.responseType;J.signal=U?.signal,J.responseType="native"===Q||"native-request-init"===Q?"native-request-init":Q&&["blob","json","text"].includes(Q)&&(0,w.oh)(A.url)?.after?Q:"array-buffer";const G=yield N(A.url,J),k={data:G.data,httpStatus:G.httpStatus,ssl:G.ssl};switch(G.requestOptions?.responseType){case"native-request-init":return delete k.data.signal,k;case"blob":k.data=yield k.data.arrayBuffer();break;case"json":k.data=(new TextEncoder).encode(JSON.stringify(k.data)).buffer;break;case"text":k.data=(new TextEncoder).encode(k.data).buffer}return{result:k,transferList:[k.data]}})()};let se;function V(A){se=A}function W(A){const U=se&&se.findCredential(A);return U&&U.token?(0,w.ZN)(A,"token",U.token):A}(0,T.Z)("host-webworker")},36102:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{default:()=>wt});var E=g(71670),T=g(18100),w=g(73889),U=(g(53108),g(72750),g(11822),g(75993),g(33098),g(57712),g(79191)),N=g(70383),J=g(59574),Q=g(27723),G=g(1897),k=g(97708),z=g(94904),C=g(97621),D=g(32995),F=g(40070),B=g(88684),$=g(28191),X=g(53661),q=g(90642),Y=g(44054),ae=g(30801),he=g(96204),ne=g(55050),ue=g(9497),te=g(36734),ie=g(66508),fe=g(20891),_e=g(70425),de=g(77729),Oe=g(57697),re=g(68230),le=g(22735),ve=(g(6010),g(26763)),Te=g(31882),ge=g(67087),Ae=g(48500),De=g(99508),Se=g(28502),me=g(83382),we=(g(19420),g(10729)),$e=g(33300),Ce=g(59937),Ie=g(87096),je=g(10465),Je=g(55733),oe=g(86230);let be=0;const Ue="esri.layers.graphics.sources.MemorySource",Fe=$.Z.getLogger(Ue);let Ke=class extends(Ae.Z.LoadableMixin((0,De.v)((0,Te.p)(C.Z)))){constructor(We){super(We),this._idToClientGraphic=null,this.type="memory"}load(We){const ke=(0,X.pC)(We)?We.signal:null;return this.addResolvingPromise(this._startWorker(ke)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const We=this.layer?.geometryType;return We?this._geometryTypeRequiresClientGraphicMapping(We)?"polygon":We:null}applyEdits(We){return this.load().then(()=>this._applyEdits(We))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(We,ke={}){var Et=this;return(0,E.Z)(function*(){yield Et.load(ke);const Ut=yield Et._connection.invoke("queryFeatures",We?We.toJSON():null,ke);(0,Ce.p)(We,Et.layer.spatialReference,Ut);const es=Ie.Z.fromJSON(Ut);if(!Et._requiresClientGraphicMapping())return es;const is=Et.layer.objectIdField;for(const _s of es.features){const $s=Et._idToClientGraphic.get(_s.attributes[is]);$s&&(_s.geometry=$s.geometry)}return es.geometryType=Et.layer.geometryType,es})()}queryFeaturesJSON(We,ke={}){var Et=this;return(0,E.Z)(function*(){if(Et._requiresClientGraphicMapping())throw new D.Z("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");yield Et.load(ke);const Ut=yield Et._connection.invoke("queryFeatures",We?We.toJSON():null,ke);return(0,Ce.p)(We,Et.layer.spatialReference,Ut),Ut})()}queryFeatureCount(We,ke={}){return this.load(ke).then(()=>this._connection.invoke("queryFeatureCount",We?We.toJSON():null,ke))}queryObjectIds(We,ke={}){return this.load(ke).then(()=>this._connection.invoke("queryObjectIds",We?We.toJSON():null,ke))}queryExtent(We,ke={}){return this.load(ke).then(()=>this._connection.invoke("queryExtent",We?We.toJSON():null,ke)).then(Et=>({count:Et.count,extent:je.Z.fromJSON(Et.extent)}))}querySnapping(We,ke={}){return this.load(ke).then(()=>this._connection.invoke("querySnapping",We,ke))}_applyEdits(We){var ke=this;return(0,E.Z)(function*(){if(!ke._connection)throw new D.Z("feature-layer-source:edit-failure","Memory source not loaded");const Et=ke.layer.objectIdField;let Ut=null;const es=[],is=[];yield Promise.all([ke._prepareClientMapping(We.addFeatures,null),ke._prepareClientMapping(We.updateFeatures,null)]);const _s=Gs=>"objectId"in Gs&&null!=Gs.objectId?Gs.objectId:"attributes"in Gs&&null!=Gs.attributes[Et]?Gs.attributes[Et]:null;if(We.addFeatures&&(Ut=ke._prepareAddFeatures(We.addFeatures)),We.deleteFeatures)for(const Gs of We.deleteFeatures){const nr=_s(Gs);null!=nr&&es.push(nr)}const Zs=We.updateFeatures&&ke._idToClientGraphic?new Map:null;if(We.updateFeatures)for(const Gs of We.updateFeatures)if(is.push(ke._serializeFeature(Gs)),Zs){const nr=_s(Gs);null!=nr&&Zs.set(nr,Gs)}(0,$e.P)(Ut?Ut.features:null,is,ke.layer.spatialReference);const{fullExtent:$s,featureEditResults:As}=yield ke._connection.invoke("applyEdits",{adds:Ut?Ut.features:[],updates:is,deletes:es});return ke.fullExtent=$s,Ut&&Ut.finish(As.uidToObjectId),ke._updateClientGraphicIds(Zs,As),ke._createEditsResult(As)})()}_prepareClientMapping(We,ke){var Et=this;return(0,E.Z)(function*(){if("mesh"!==Et._layerOrSourceGeometryType||(0,X.Wi)(We))return;const Ut=[];for(const{geometry:es}of We)!(0,X.pC)(es)||"mesh"!==es.type||es.hasExtent||es.loaded||Ut.push(es.load({signal:ke}));Ut.length&&(yield Promise.all(Ut))})()}_updateClientGraphicIds(We,ke){if(this._idToClientGraphic){if(We)for(const Et of ke.updateResults){if(!Et.success)continue;const Ut=We.get(Et.objectId);null!=Ut&&this._addIdToClientGraphic(Ut)}for(const Et of ke.deleteResults)Et.success&&this._idToClientGraphic.delete(Et.objectId)}}_createEditsResult(We){return{addFeatureResults:We.addResults?We.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:We.updateResults?We.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:We.deleteResults?We.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(We){const ke=!0===We.success?null:We.error||{code:void 0,description:void 0};return{objectId:We.objectId,globalId:We.globalId,error:ke?new D.Z("feature-layer-source:edit-failure",ke.description,{code:ke.code}):null}}_prepareAddFeatures(We){const ke=new Map,Et=new Array(We.length);let Ut=null;for(let is=0;is<We.length;is++){const _s=We[is],Zs=this._serializeFeature(_s);!Ut&&(0,X.pC)(_s.geometry)&&(Ut=_s.geometry.type),Et[is]=Zs,ke.set(`${Zs.uid}`,_s)}const es=this;return{features:Et,inferredGeometryType:Ut,finish(is){const _s=es.sourceJSON.objectIdField;for(const Zs in is){const $s=is[Zs],As=ke.get(Zs);As&&(As.attributes||(As.attributes={}),-1===$s?delete As.attributes[_s]:As.attributes[_s]=$s,es._addIdToClientGraphic(As))}}}}_addIdToClientGraphic(We){if(!this._idToClientGraphic)return;const Et=We.attributes&&We.attributes[this.sourceJSON.objectIdField];null!=Et&&this._idToClientGraphic.set(Et,We)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(We){return this._geometryTypeRequiresClientGraphicMapping(We.type)}_geometryTypeRequiresClientGraphicMapping(We){return"mesh"===We||"multipatch"===We||"extent"===We}_serializeFeature(We){const{attributes:ke}=We,Et=this._geometryForSerialization(We),Ut=(be++).toString();return Et?{uid:Ut,geometry:Et.toJSON(),attributes:ke}:{uid:Ut,attributes:ke}}_geometryForSerialization(We){const{geometry:ke}=We;return(0,X.Wi)(ke)?null:this._geometryRequiresClientGraphicMapping(ke)?ke.extent?Je.Z.fromExtent(ke.extent):null:ke}_startWorker(We){var ke=this;return(0,E.Z)(function*(){ke._connection=yield(0,Se.bA)("MemorySourceWorker",{strategy:(0,ge.Z)("feature-layers-workers")?"dedicated":"local",signal:We});const{fields:Et,spatialReference:Ut,objectIdField:es,hasM:is,hasZ:_s,timeInfo:Zs}=ke.layer,$s="defaults"===ke.layer.originOf("spatialReference");yield ke._prepareClientMapping(ke.items,We);const As=ke._prepareAddFeatures(ke.items);ke.handles.add(ke.on("before-changes",dr=>{Fe.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),dr.preventDefault()}));const Gs={features:As.features,fields:Et&&Et.map(dr=>dr.toJSON()),geometryType:oe.P.toJSON(ke._workerGeometryType),hasM:"mesh"!==ke._layerOrSourceGeometryType&&is,hasZ:"mesh"===ke._layerOrSourceGeometryType||_s,objectIdField:es,spatialReference:$s?null:Ut&&Ut.toJSON(),timeInfo:Zs?Zs.toJSON():null},nr=yield ke._connection.invoke("load",Gs,{signal:We});for(const dr of nr.warnings)Fe.warn(dr.message,{layer:ke.layer,warning:dr});nr.featureErrors.length&&Fe.warn(`Encountered ${nr.featureErrors.length} validation errors while loading features`,nr.featureErrors);const Er=nr.layerDefinition;ke._geometryTypeRequiresClientGraphicMapping(As.inferredGeometryType)&&(Er.geometryType=oe.P.toJSON(As.inferredGeometryType)),ke.sourceJSON=Er,ke._requiresClientGraphicMapping()&&(ke._idToClientGraphic=new Map),As.finish(nr.assignedObjectIds)})()}};(0,T._)([(0,we.c)({Type:ve.Z,ensureType:(0,me.se)(ve.Z)})],Ke.prototype,"itemType",void 0),(0,T._)([(0,ue.Cb)()],Ke.prototype,"type",void 0),(0,T._)([(0,ue.Cb)({constructOnly:!0})],Ke.prototype,"layer",void 0),(0,T._)([(0,ue.Cb)({readOnly:!0})],Ke.prototype,"_workerGeometryType",null),(0,T._)([(0,ue.Cb)()],Ke.prototype,"sourceJSON",void 0),Ke=(0,T._)([(0,fe.j)(Ue)],Ke);var Ve=g(450),tt=g(6363),rt=g(29812),Ne=g(55123),qe=g(79465),ft=g(37572),Xe=g(30914),dt=g(80828),Qe=g(33829),ot=g(72255),ct=g(16617),_t=g(6365);let Rt=class extends _t.Z{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};(0,T._)([(0,ue.Cb)()],Rt.prototype,"updating",void 0),(0,T._)([(0,ue.Cb)()],Rt.prototype,"status",void 0),Rt=(0,T._)([(0,fe.j)("esri.layers.support.PublishingInfo")],Rt);const qt=Rt,rs="esri.layers.mixins.PublishableLayer",ss=Symbol(rs),Wt=We=>{var ke;let Et=class extends We{constructor(){super(...arguments),this[ke]=!0}get publishingInfo(){if(this.destroyed)return null;const Ut=this._get("publishingInfo");if(Ut)return Ut;const es=new qt;return this._checkPublishingStatus(es),es}_checkPublishingStatus(Ut){var es=this;let Zs=0;const $s=function(){var Gs=(0,E.Z)(function*(nr){let Er;Ut.updating=!0;try{Er=yield es.fetchPublishingStatus()}catch{Er="unavailable"}"published"!==Er&&"unavailable"!==Er||("publishing"===Ut.status&&es.refresh(),As.remove()),Ut.status=Er,Ut.updating=!1,As.removed||(Zs=setTimeout($s,nr,nr+125))});return function(Er){return Gs.apply(this,arguments)}}(),As={removed:!1,remove(){this.removed=!0,clearTimeout(Zs)}};this.when().catch(()=>As.remove()),$s(250),this.own(As)}};return ke=ss,(0,T._)([(0,ue.Cb)({readOnly:!0,clonable:!1})],Et.prototype,"publishingInfo",null),Et=(0,T._)([(0,fe.j)(rs)],Et),Et};var as=g(17085),ys=g(72450),bt=g(37302),Ts=g(4583),nt=g(51299),mt=g(86456),Tt=g(99295),It=g(88419),Zt=g(86465),Kt=g(21230),Vt=g(85770),Nt=g(1586),ls=g(5113),ts=g(59657),ms=g(49067),Os=g(38491),pt=g(2929),Pt=g(28665),jt=g(15354),us=g(67056),et=g(7721);const At="FeatureLayer",Bt="esri.layers.FeatureLayer",Ht=$.Z.getLogger(Bt);function cs(We,ke){return new D.Z("layer:unsupported",`Layer (${We.title}, ${We.id}) of type '${We.declaredClass}' ${ke}`,{layer:We})}function Rs(We){return We&&We instanceof C.Z}const Us=(0,Zt.v)();function mr(We,ke,Et){const Ut=!!Et?.writeLayerSchema;return{enabled:Ut,ignoreOrigin:Ut}}let fs=class extends((0,Xe.B)((0,dt.M)((0,ft.b)(Wt((0,qe.o1)((0,rt.h)((0,ot.c)((0,bt.n)((0,ys.M)((0,as.Q)((0,tt.Y)((0,Qe.q)((0,ct.I)((0,q.R)((0,Ne.N)((0,Ve.V)((0,z.J)(le.Z)))))))))))))))))){constructor(...We){super(...We),this._handles=new F.Z,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=re.Z.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){this.source?.destroy(),this._handles=(0,X.SC)(this._handles)}normalizeCtorArgs(We,ke){return"string"==typeof We?{url:We,...ke}:We}load(We){var ke=this;const Et=(0,X.pC)(We)?We.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(Et).then(es=>this.initLayerProperties(es))),Promise.resolve(this);const Ut=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},We).catch(ae.r9).then((0,E.Z)(function*(){if(ke.url&&null==ke.layerId&&/FeatureServer|MapServer\/*$/i.test(ke.url)){const es=yield ke._fetchFirstLayerId(Et);null!=es&&(ke.layerId=es)}if(!ke.url&&!ke._hasMemorySource())throw new D.Z("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return ke.initLayerProperties(yield ke.createGraphicsSource(Et))})).then(()=>this._setUserPrivileges(this.serviceItemId,We)).then(()=>(0,mt.nU)(this,We));return this.addResolvingPromise(Ut),Promise.resolve(this)}readCapabilities(We,ke){return(0,ls.h)(ke=ke.layerDefinition||ke,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(We){this._overrideIfSome("editingEnabled",We)}readEditingEnabled(We,ke){return this._readEditingEnabled(ke,!1)}readEditingEnabledFromWebMap(We,ke,Et){return this._readEditingEnabled(ke,!0,Et)}writeEditingEnabled(We,ke){this._writeEditingEnabled(We,ke,!1)}writeEditingEnabledToWebMap(We,ke,Et,Ut){this._writeEditingEnabled(We,ke,!0,Ut)}get effectiveEditingEnabled(){return(0,mt.sX)(this)}readIsTable(We,ke){return"Table"===(ke=ke?.layerDefinition??ke).type||!ke.geometryType}writeIsTable(We,ke,Et,Ut){Ut?.writeLayerSchema&&(0,Y.RB)(Et,We?"Table":"Feature Layer",ke)}readGlobalIdField(We,ke){return(0,mt.rk)(ke.layerDefinition||ke)}readObjectIdField(We,ke){return(0,mt.kZ)(ke.layerDefinition||ke)}get parsedUrl(){const We=(0,ne.mN)(this.url);return null!=We&&(null!=this.dynamicDataSource?We.path=(0,ne.v_)(We.path,"dynamicLayer"):null!=this.layerId&&(We.path=(0,ne.v_)(We.path,this.layerId.toString()))),We}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(We){(0,Kt.YN)(We,this.fieldsIndex),this._set("renderer",We)}readRenderer(We,ke,Et){const Ut=(ke=ke.layerDefinition||ke).drawingInfo?.renderer;if(Ut){const es=(0,J.a)(Ut,ke,Et)??void 0;return es||Ht.error("Failed to create renderer",{rendererDefinition:ke.drawingInfo.renderer,layer:this,context:Et}),es}if(ke.defaultSymbol)return ke.types&&ke.types.length?new N.Z({defaultSymbol:Le(ke.defaultSymbol,ke,Et),field:ke.typeIdField,uniqueValueInfos:ke.types.map(es=>({id:es.id,symbol:Le(es.symbol,es,Et)}))}):new U.Z({symbol:Le(ke.defaultSymbol,ke,Et)})}set source(We){const ke=this._get("source");ke!==We&&(Rs(ke)&&this._resetMemorySource(ke),Rs(We)&&this._initMemorySource(We),this._set("source",We))}castSource(We){return We?Array.isArray(We)||We instanceof C.Z?new Ke({layer:this,items:We}):We:null}readSource(We,ke){const Et=Ie.Z.fromJSON(ke.featureSet);return new Ke({layer:this,items:Et?.features??[]})}readTemplates(We,ke){const Et=ke.editFieldsInfo,Ut=Et&&Et.creatorField,es=Et&&Et.editorField;return We=We&&We.map(is=>Tt.Z.fromJSON(is)),this._fixTemplates(We,Ut),this._fixTemplates(We,es),We}readTitle(We,ke){const Et=ke.layerDefinition?.name??ke.name,Ut=ke.title||ke.layerDefinition&&ke.layerDefinition.title;if(Et){const es=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,Ts.a7)(this.url,Et):Et;let is=Et;if(!is&&this.url){const _s=(0,Ts.Qc)(this.url);(0,X.pC)(_s)&&(is=_s.title)}return is?("item-title-and-service-name"===this.sublayerTitleMode&&es&&es!==is&&(is=es+" - "+is),(0,Ts.ld)(is)):void 0}if("item-title"===this.sublayerTitleMode&&Ut)return Ut}readTitleFromWebMap(We,ke){return ke.title||ke.layerDefinition&&ke.layerDefinition.name}readTypeIdField(We,ke){let Et=(ke=ke.layerDefinition||ke).typeIdField;if(Et&&ke.fields){Et=Et.toLowerCase();const Ut=ke.fields.find(es=>es.name.toLowerCase()===Et);Ut&&(Et=Ut.name)}return Et}readTypes(We,ke){We=(ke=ke.layerDefinition||ke).types;const Et=ke.editFieldsInfo,Ut=Et&&Et.creatorField,es=Et&&Et.editorField;return We&&We.map(is=>(is=It.Z.fromJSON(is),this._fixTemplates(is.templates,Ut),this._fixTemplates(is.templates,es),is))}readVisible(We,ke){return ke.layerDefinition&&null!=ke.layerDefinition.defaultVisibility?!!ke.layerDefinition.defaultVisibility:null!=ke.visibility?!!ke.visibility:void 0}addAttachment(We,ke){var Et=this;return(0,E.Z)(function*(){return(0,mt.JD)(Et,We,ke,At)})()}updateAttachment(We,ke,Et){var Ut=this;return(0,E.Z)(function*(){return(0,mt.Y5)(Ut,We,ke,Et,At)})()}applyEdits(We,ke){var Et=this;return(0,E.Z)(function*(){return(0,mt.Jj)(Et,We,ke)})()}on(We,ke){return super.on(We,ke)}createPopupTemplate(We){return(0,us.eZ)(this,We)}createGraphicsSource(We){var ke=this;return(0,E.Z)(function*(){if(ke._hasMemorySource()&&ke.source)return ke.source.load({signal:We});const{default:Et}=yield(0,ae.Hl)(Promise.all([g.e(8592),g.e(1205)]).then(g.bind(g,41205)),We);return new Et({layer:ke}).load({signal:We})})()}createQuery(){const We=(0,mt.rP)(this);We.dynamicDataSource=this.dynamicDataSource;const ke=(0,X.pC)(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,Et=(0,he._)(this.definitionExpression,ke);return We.where=Et||"1=1",We}deleteAttachments(We,ke){var Et=this;return(0,E.Z)(function*(){return(0,mt.FV)(Et,We,ke,At)})()}fetchRecomputedExtents(We){var ke=this;return(0,E.Z)(function*(){return(0,mt.Ci)(ke,We,At)})()}getFeatureType(We){const{typeIdField:ke,types:Et}=this;if(!ke||!We)return null;const Ut=We.attributes?We.attributes[ke]:void 0;if(null==Ut)return null;let es=null;return Et?.some(is=>{const{id:_s}=is;return null!=_s&&(_s.toString()===Ut.toString()&&(es=is),!!es)}),es}getFieldDomain(We,ke){const Ut=this.getFeatureType(ke&&ke.feature);if(Ut){const es=Ut.domains&&Ut.domains[We];if(es&&"inherited"!==es.type)return es}return this._getLayerDomain(We)}getField(We){return this.fieldsIndex.get(We)}queryAttachments(We,ke){var Et=this;return(0,E.Z)(function*(){return(0,mt.SU)(Et,We,ke,At)})()}queryFeatures(We,ke){var Et=this;return(0,E.Z)(function*(){const Ut=yield Et.load(),es=yield Ut.source.queryFeatures(Pt.Z.from(We)??Ut.createQuery(),ke);if(es?.features)for(const is of es.features)is.layer=is.sourceLayer=Ut;return es})()}queryObjectIds(We,ke){var Et=this;return(0,E.Z)(function*(){return(0,mt.tD)(Et,We,ke,At)})()}queryFeatureCount(We,ke){var Et=this;return(0,E.Z)(function*(){return(0,mt.VG)(Et,We,ke,At)})()}queryExtent(We,ke){var Et=this;return(0,E.Z)(function*(){return(0,mt.KE)(Et,We,ke,At)})()}queryRelatedFeatures(We,ke){var Et=this;return(0,E.Z)(function*(){return(0,mt.kp)(Et,We,ke,At)})()}queryRelatedFeaturesCount(We,ke){var Et=this;return(0,E.Z)(function*(){return(0,mt.C9)(Et,We,ke,At)})()}queryTopFeatures(We,ke){var Et=this;return(0,E.Z)(function*(){const{source:Ut,capabilities:es}=yield Et.load();if(!Ut.queryTopFeatures||!es?.query?.supportsTopFeaturesQuery)throw new D.Z(At,"Layer source does not support queryTopFeatures capability");const is=yield Ut.queryTopFeatures(jt.Z.from(We),ke);if(is?.features)for(const _s of is.features)_s.layer=_s.sourceLayer=Et;return is})()}queryTopObjectIds(We,ke){var Et=this;return(0,E.Z)(function*(){const{source:Ut,capabilities:es}=yield Et.load();if(!Ut.queryTopObjectIds||!es?.query.supportsTopFeaturesQuery)throw new D.Z(At,"Layer source does not support queryTopObjectIds capability");return Ut.queryTopObjectIds(jt.Z.from(We),ke)})()}queryTopFeaturesExtent(We,ke){var Et=this;return(0,E.Z)(function*(){const{source:Ut,capabilities:es}=yield Et.load();if(!Ut.queryTopExtents||!es?.query?.supportsTopFeaturesQuery)throw new D.Z(At,"Layer source does not support queryTopExtents capability");return Ut.queryTopExtents(jt.Z.from(We),ke)})()}queryTopFeatureCount(We,ke){var Et=this;return(0,E.Z)(function*(){const{source:Ut,capabilities:es}=yield Et.load();if(!Ut.queryTopCount||!es?.query?.supportsTopFeaturesQuery)throw new D.Z(At,"Layer source does not support queryFeatureCount capability");return Ut.queryTopCount(jt.Z.from(We),ke)})()}read(We,ke){const Et=We.featureCollection;if(Et){const Ut=Et.layers;Ut&&1===Ut.length&&(super.read(Ut[0],ke),null!=Et.showLegend&&super.read({showLegend:Et.showLegend},ke))}super.read(We,ke),ke&&"service"===ke.origin&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(We,ke){ke={...ke,origin:ke?.origin??void 0,writeLayerSchema:ke?.writeLayerSchema??this._hasMemorySource()};const{origin:Et,layerContainerType:Ut,messages:es}=ke;if(this.dynamicDataSource)return es?.push(cs(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if("web-scene"===Et||"web-map"===Et&&"tables"!==Ut)return es?.push(cs(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return es?.push(cs(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===Et&&"tables"===Ut)return es?.push(cs(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(We,ke)}clone(){if(this._hasMemorySource())throw new D.Z(At,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(We){return!!this.loaded&&("memory"===this.source?.type||(0,ms.D)(this,We))}save(We){var ke=this;return(0,E.Z)(function*(){return(yield g.e(3428).then(g.bind(g,63428))).save(ke,We)})()}saveAs(We,ke){var Et=this;return(0,E.Z)(function*(){return(yield g.e(3428).then(g.bind(g,63428))).saveAs(Et,We,ke)})()}_readEditingEnabled(We,ke,Et){let Ut=We.layerDefinition?.capabilities;return Ut?this._hasEditingCapability(Ut):(Ut=We.capabilities,ke&&"web-map"===Et?.origin&&!this._hasMemorySource()&&Ut?this._hasEditingCapability(Ut):void 0)}_hasEditingCapability(We){return We.toLowerCase().split(",").map(ke=>ke.trim()).includes("editing")}_writeEditingEnabled(We,ke,Et,Ut){if(!We){const es=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";(0,Y.RB)("layerDefinition.capabilities",es,ke),Et&&!Ut?.writeLayerSchema&&(ke.capabilities=es)}}_getLayerDomain(We){const ke=this.fieldsIndex.get(We);return ke?ke.domain:null}_fetchFirstLayerId(We){return(0,G.default)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:We}).then(ke=>{const Et=ke.data;if(Et)return Array.isArray(Et.layers)&&Et.layers.length>0?Et.layers[0].id:Array.isArray(Et.tables)&&Et.tables.length>0?Et.tables[0].id:void 0})}initLayerProperties(We){var ke=this;return(0,E.Z)(function*(){return ke._set("source",We),We.sourceJSON&&(ke.sourceJSON=We.sourceJSON,ke.read(We.sourceJSON,{origin:"service",portalItem:ke.portalItem,portal:ke.portalItem?.portal,url:ke.parsedUrl})),ke._verifySource(),ke._verifyFields(),(0,Kt.YN)(ke.renderer,ke.fieldsIndex),(0,Kt.UF)(ke.timeInfo,ke.fieldsIndex),(0,pt.y)(ke,{origin:"service"})})()}hasDataChanged(){var We=this;return(0,E.Z)(function*(){return(0,mt.gG)(We)})()}fetchPublishingStatus(){var We=this;return(0,E.Z)(function*(){const ke=We.source;return ke?.fetchPublishingStatus?ke.fetchPublishingStatus():"unavailable"})()}_verifyFields(){const We=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+We+")"),this.isTable||this._hasMemorySource()||-1!==We.search(/\/FeatureServer\//i)||this.fields?.some(ke=>"geometry"===ke.type)||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+We+")")}_fixTemplates(We,ke){We&&We.forEach(Et=>{const Ut=Et.prototype&&Et.prototype.attributes;Ut&&ke&&delete Ut[ke]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new D.Z("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new D.Z("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(We){We.forEach(ke=>{ke.layer=this,ke.sourceLayer=this}),this._handles.add([We.on("after-add",ke=>{ke.item.layer=this,ke.item.sourceLayer=this}),We.on("after-remove",ke=>{ke.item.layer=null,ke.item.sourceLayer=null})],"fl-source")}_resetMemorySource(We){We.forEach(ke=>{ke.layer=null,ke.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};(0,T._)([(0,ie.r)("service","capabilities")],fs.prototype,"readCapabilities",null),(0,T._)([(0,ue.Cb)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],fs.prototype,"charts",void 0),(0,T._)([(0,ue.Cb)({readOnly:!0})],fs.prototype,"createQueryVersion",null),(0,T._)([(0,ue.Cb)({json:{read:{source:"layerDefinition.copyrightText"}}})],fs.prototype,"copyright",void 0),(0,T._)([(0,ue.Cb)({json:{read:{source:"layerDefinition.displayField"}}})],fs.prototype,"displayField",void 0),(0,T._)([(0,ue.Cb)({types:k.LB,readOnly:!0})],fs.prototype,"defaultSymbol",void 0),(0,T._)([(0,ue.Cb)({type:Os.n})],fs.prototype,"dynamicDataSource",void 0),(0,T._)([(0,ue.Cb)({type:Boolean})],fs.prototype,"editingEnabled",null),(0,T._)([(0,ie.r)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],fs.prototype,"readEditingEnabled",null),(0,T._)([(0,ie.r)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],fs.prototype,"readEditingEnabledFromWebMap",null),(0,T._)([(0,_e.c)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],fs.prototype,"writeEditingEnabled",null),(0,T._)([(0,_e.c)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],fs.prototype,"writeEditingEnabledToWebMap",null),(0,T._)([(0,ue.Cb)({readOnly:!0})],fs.prototype,"effectiveEditingEnabled",null),(0,T._)([(0,ue.Cb)({...Us.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:mr}}}}})],fs.prototype,"fields",void 0),(0,T._)([(0,ue.Cb)(Us.fieldsIndex)],fs.prototype,"fieldsIndex",void 0),(0,T._)([(0,ue.Cb)({type:Oe.Z,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],fs.prototype,"formTemplate",void 0),(0,T._)([(0,ue.Cb)({json:{read:{source:"layerDefinition.extent"}}})],fs.prototype,"fullExtent",void 0),(0,T._)([(0,ue.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:mr,writer(We,ke,Et){const Ut=We?mt.Fr.toJSON(We):null;Ut&&(0,Y.RB)(Et,Ut,ke)}}}},read:{source:"layerDefinition.geometryType",reader:mt.Fr.read}}})],fs.prototype,"geometryType",void 0),(0,T._)([(0,ue.Cb)({json:{read:{source:"layerDefinition.hasM"}}})],fs.prototype,"hasM",void 0),(0,T._)([(0,ue.Cb)({json:{read:{source:"layerDefinition.hasZ"}}})],fs.prototype,"hasZ",void 0),(0,T._)([(0,ue.Cb)(nt.id)],fs.prototype,"id",void 0),(0,T._)([(0,ue.Cb)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],fs.prototype,"infoFor3D",void 0),(0,T._)([(0,ue.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],fs.prototype,"isTable",void 0),(0,T._)([(0,ie.r)("service","isTable",["type","geometryType"]),(0,ie.r)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],fs.prototype,"readIsTable",null),(0,T._)([(0,_e.c)("web-map","isTable")],fs.prototype,"writeIsTable",null),(0,T._)([(0,ue.Cb)(nt.iR)],fs.prototype,"labelsVisible",void 0),(0,T._)([(0,ue.Cb)({type:[Vt.Z],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Nt.r},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Nt.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],fs.prototype,"labelingInfo",void 0),(0,T._)([(0,ue.Cb)((()=>{const We=(0,B.d9)(nt.bT);return We.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(ke,Et,Ut){(0,Y.RB)(Ut,(0,et.a)(ke),Et)}}},We})())],fs.prototype,"opacity",void 0),(0,T._)([(0,ue.Cb)(nt.rn)],fs.prototype,"legendEnabled",void 0),(0,T._)([(0,ue.Cb)({type:["show","hide"],json:(()=>{const We=(0,B.d9)(nt.rT.json);return We.origins["portal-item"]={read:!1,write:!1},We})()})],fs.prototype,"listMode",void 0),(0,T._)([(0,ie.r)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],fs.prototype,"readGlobalIdField",null),(0,T._)([(0,ue.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:mr}}}}})],fs.prototype,"objectIdField",void 0),(0,T._)([(0,ie.r)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],fs.prototype,"readObjectIdField",null),(0,T._)([(0,ue.Cb)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],fs.prototype,"operationalLayerType",void 0),(0,T._)([(0,ue.Cb)(Us.outFields)],fs.prototype,"outFields",void 0),(0,T._)([(0,ue.Cb)({readOnly:!0})],fs.prototype,"parsedUrl",null),(0,T._)([(0,ue.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],fs.prototype,"path",void 0),(0,T._)([(0,ue.Cb)(nt.C_)],fs.prototype,"popupEnabled",void 0),(0,T._)([(0,ue.Cb)({type:w.Z,json:{name:"popupInfo",write:!0}})],fs.prototype,"popupTemplate",void 0),(0,T._)([(0,ue.Cb)({readOnly:!0})],fs.prototype,"defaultPopupTemplate",null),(0,T._)([(0,ue.Cb)({types:Q.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Q.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(We,ke,Et)=>({ignoreOrigin:Et?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(We,ke,Et)=>({ignoreOrigin:Et?.writeLayerSchema})}}})],fs.prototype,"renderer",null),(0,T._)([(0,ie.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,ie.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],fs.prototype,"readRenderer",null),(0,T._)([(0,ue.Cb)((()=>{const We=(0,B.d9)(nt.YI);return We.json.origins["portal-item"]={read:!1,write:!1},We})())],fs.prototype,"screenSizePerspectiveEnabled",void 0),(0,T._)([(0,ue.Cb)({clonable:!1})],fs.prototype,"source",null),(0,T._)([(0,te.p)("source")],fs.prototype,"castSource",null),(0,T._)([(0,ie.r)("portal-item","source",["featureSet"]),(0,ie.r)("web-map","source",["featureSet"])],fs.prototype,"readSource",null),(0,T._)([(0,ue.Cb)({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],fs.prototype,"spatialReference",void 0),(0,T._)([(0,ue.Cb)({type:Number})],fs.prototype,"subtypeCode",void 0),(0,T._)([(0,ue.Cb)({type:[Tt.Z]})],fs.prototype,"templates",void 0),(0,T._)([(0,ie.r)("templates",["editFieldsInfo","creatorField","editorField","templates"])],fs.prototype,"readTemplates",null),(0,T._)([(0,ue.Cb)({type:ts.Z})],fs.prototype,"timeInfo",void 0),(0,T._)([(0,ue.Cb)()],fs.prototype,"title",void 0),(0,T._)([(0,ie.r)("service","title",["name"]),(0,ie.r)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],fs.prototype,"readTitle",null),(0,T._)([(0,ie.r)("web-map","title",["layerDefinition.name","title"])],fs.prototype,"readTitleFromWebMap",null),(0,T._)([(0,ue.Cb)({type:String})],fs.prototype,"sublayerTitleMode",void 0),(0,T._)([(0,ue.Cb)({json:{read:!1}})],fs.prototype,"type",void 0),(0,T._)([(0,ue.Cb)({type:String})],fs.prototype,"typeIdField",void 0),(0,T._)([(0,ie.r)("service","typeIdField"),(0,ie.r)("typeIdField",["layerDefinition.typeIdField"])],fs.prototype,"readTypeIdField",null),(0,T._)([(0,ue.Cb)({type:[It.Z]})],fs.prototype,"types",void 0),(0,T._)([(0,ie.r)("service","types",["types"]),(0,ie.r)("types",["layerDefinition.types"])],fs.prototype,"readTypes",null),(0,T._)([(0,ue.Cb)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],fs.prototype,"visible",void 0),(0,T._)([(0,ie.r)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],fs.prototype,"readVisible",null),fs=(0,T._)([(0,fe.j)(Bt)],fs);const Le=(0,de.d)({types:k.QT}),wt=fs},32870:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(55625),V=g(22735),W=g(29812),A=g(72450),U=g(33928),N=g(13691);let J=class extends((0,W.h)((0,A.M)(V.Z))){constructor(G){super(G),this.elevationInfo=null,this.graphics=new U.J,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(G){return this.graphics.add(G),this}addMany(G){return this.graphics.addMany(G),this}removeAll(){return this.graphics.removeAll(),this}remove(G){this.graphics.remove(G)}removeMany(G){this.graphics.removeMany(G)}on(G,k){return super.on(G,k)}graphicChanged(G){this.emit("graphic-update",G)}};(0,E._)([(0,T.Cb)({type:N.Z})],J.prototype,"elevationInfo",void 0),(0,E._)([(0,T.Cb)((0,se.z)(U.J,"graphics"))],J.prototype,"graphics",void 0),(0,E._)([(0,T.Cb)({type:["show","hide"]})],J.prototype,"listMode",void 0),(0,E._)([(0,T.Cb)()],J.prototype,"screenSizePerspectiveEnabled",void 0),(0,E._)([(0,T.Cb)({readOnly:!0})],J.prototype,"type",void 0),(0,E._)([(0,T.Cb)({constructOnly:!0})],J.prototype,"internal",void 0),J=(0,E._)([(0,x.j)("esri.layers.GraphicsLayer")],J);const Q=J},22735:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>q});var E=g(71670),T=g(18100),Z=(g(6010),g(1897)),x=g(32995),se=g(95442),V=g(20711),W=g(48500),A=g(28191),U=g(30801),N=g(55050),J=g(9497),k=(g(83382),g(19420),g(20891)),z=g(68327);function D(){return(D=(0,E.Z)(function*(Y){const ae="portalItem"in Y?Y:{portalItem:Y},he=yield g.e(2517).then(g.bind(g,22517));try{return yield he.fromItem(ae)}catch(ne){const ue=ae&&ae.portalItem,te=ue&&ue.id||"unset",ie=ue&&ue.portal&&ue.portal.url||z.default.portalUrl;throw A.Z.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+ie+"', id: '"+te+"')",ne),ne}})).apply(this,arguments)}var F=g(10465),B=g(68230);let $=0,X=class extends(se.Z.EventedMixin((0,V.IG)(W.Z))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new F.Z(-180,-90,180,90,B.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+$++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=B.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static fromArcGISServerUrl(Y){return(0,E.Z)(function*(){const ae="string"==typeof Y?{url:Y}:Y;return(yield g.e(5708).then(g.bind(g,25708))).fromUrl(ae)})()}static fromPortalItem(Y){return function C(Y){return D.apply(this,arguments)}(Y)}initialize(){this.when().catch(Y=>{(0,U.D_)(Y)||A.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:Y})})}destroy(){if(this.parent){const Y=this,ae=this.parent;"layers"in ae&&ae.layers.includes(Y)?ae.layers.remove(Y):"tables"in ae&&ae.tables.includes(Y)?ae.tables.remove(Y):"baseLayers"in ae&&ae.baseLayers.includes(Y)?ae.baseLayers.remove(Y):"baseLayers"in ae&&ae.referenceLayers.includes(Y)&&ae.referenceLayers.remove(Y)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,N.mN)(this.url)}fetchAttributionData(){var Y=this;return(0,E.Z)(function*(){const ae=Y.attributionDataUrl;if(Y.hasAttributionData&&ae)return(yield(0,Z.default)(ae,{query:{f:"json"},responseType:"json"})).data;throw new x.Z("layer:no-attribution-data","Layer does not have attribution data")})()}};(0,T._)([(0,J.Cb)({type:String})],X.prototype,"attributionDataUrl",void 0),(0,T._)([(0,J.Cb)({type:F.Z})],X.prototype,"fullExtent",void 0),(0,T._)([(0,J.Cb)({readOnly:!0})],X.prototype,"hasAttributionData",null),(0,T._)([(0,J.Cb)({type:String,clonable:!1})],X.prototype,"id",void 0),(0,T._)([(0,J.Cb)({type:Boolean,nonNullable:!0})],X.prototype,"legendEnabled",void 0),(0,T._)([(0,J.Cb)({type:["show","hide","hide-children"]})],X.prototype,"listMode",void 0),(0,T._)([(0,J.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],X.prototype,"opacity",void 0),(0,T._)([(0,J.Cb)({clonable:!1})],X.prototype,"parent",void 0),(0,T._)([(0,J.Cb)({readOnly:!0})],X.prototype,"parsedUrl",null),(0,T._)([(0,J.Cb)({type:Boolean})],X.prototype,"popupEnabled",void 0),(0,T._)([(0,J.Cb)({type:Boolean})],X.prototype,"attributionVisible",void 0),(0,T._)([(0,J.Cb)({type:B.Z})],X.prototype,"spatialReference",void 0),(0,T._)([(0,J.Cb)({type:String})],X.prototype,"title",void 0),(0,T._)([(0,J.Cb)({readOnly:!0,json:{read:!1}})],X.prototype,"type",void 0),(0,T._)([(0,J.Cb)()],X.prototype,"url",void 0),(0,T._)([(0,J.Cb)({type:Boolean,nonNullable:!0})],X.prototype,"visible",void 0),X=(0,T._)([(0,k.j)("esri.layers.Layer")],X);const q=X},9591:(He,Pe,g)=>{"use strict";g.d(Pe,{rk:()=>J,Tj:()=>Q,GI:()=>G,CE:()=>k,Tq:()=>z,Zx:()=>C,Ee:()=>B});var E=g(32227),T=g(55798),w=g(44171),Z=g(64544);class J{constructor(X,q,Y){this.strength=X,this.radius=q,this.threshold=Y,this.type="bloom"}interpolate(X,q,Y){this.strength=D(X.strength,q.strength,Y),this.radius=D(X.radius,q.radius,Y),this.threshold=D(X.threshold,q.threshold,Y)}clone(){return new J(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:F(this.radius),strength:this.strength,threshold:this.threshold}}}class Q{constructor(X){this.radius=X,this.type="blur"}interpolate(X,q,Y){this.radius=Math.round(D(X.radius,q.radius,Y))}clone(){return new Q(this.radius)}toJSON(){return{type:"blur",radius:F(this.radius)}}}class G{constructor(X,q){this.type=X,this.amount=q,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(X,q,Y){this.amount=D(X.amount,q.amount,Y),this._updateMatrix()}clone(){return new G(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const X=this._colorMatrix||(0,w.c)();switch(this.type){case"brightness":this._colorMatrix=(($,X)=>{const q=(0,Z.s)($,X,0,0,0,0,X,0,0,0,0,X,0,0,0,0,1);return(0,Z.t)(q,q)})(X,this.amount);break;case"contrast":this._colorMatrix=(($,X)=>{const q=(0,Z.s)($,X,0,0,.5-.5*X,0,X,0,.5-.5*X,0,0,X,.5-.5*X,0,0,0,1);return(0,Z.t)(q,q)})(X,this.amount);break;case"grayscale":this._colorMatrix=(($,X)=>{const q=1-this.amount,Y=(0,Z.s)($,.2126+.7874*q,.7152-.7152*q,.0722-.0722*q,0,.2126-.2126*q,.7152+.2848*q,.0722-.0722*q,0,.2126-.2126*q,.7152-.7152*q,.0722+.9278*q,0,0,0,0,1);return(0,Z.t)(Y,Y)})(X);break;case"invert":this._colorMatrix=(($,X)=>{const q=1-2*X,Y=(0,Z.s)($,q,0,0,X,0,q,0,X,0,0,q,X,0,0,0,1);return(0,Z.t)(Y,Y)})(X,this.amount);break;case"saturate":this._colorMatrix=(($,X)=>{const q=(0,Z.s)($,.213+.787*X,.715-.715*X,.072-.072*X,0,.213-.213*X,.715+.285*X,.072-.072*X,0,.213-.213*X,.715-.715*X,.072+.928*X,0,0,0,0,1);return(0,Z.t)(q,q)})(X,this.amount);break;case"sepia":this._colorMatrix=(($,X)=>{const q=1-this.amount,Y=(0,Z.s)($,.393+.607*q,.769-.769*q,.189-.189*q,0,.349-.349*q,.686+.314*q,.168-.168*q,0,.272-.272*q,.534-.534*q,.131+.869*q,0,0,0,0,1);return(0,Z.t)(Y,Y)})(X)}}}class k{constructor(X,q,Y,ae){this.offsetX=X,this.offsetY=q,this.blurRadius=Y,this.color=ae,this.type="drop-shadow"}interpolate(X,q,Y){this.offsetX=D(X.offsetX,q.offsetX,Y),this.offsetY=D(X.offsetY,q.offsetY,Y),this.blurRadius=D(X.blurRadius,q.blurRadius,Y),this.color[0]=Math.round(D(X.color[0],q.color[0],Y)),this.color[1]=Math.round(D(X.color[1],q.color[1],Y)),this.color[2]=Math.round(D(X.color[2],q.color[2],Y)),this.color[3]=D(X.color[3],q.color[3],Y)}clone(){return new k(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const X=[...this.color];return X[3]*=255,{type:"drop-shadow",xoffset:F(this.offsetX),yoffset:F(this.offsetY),blurRadius:F(this.blurRadius),color:X}}}class z{constructor(X){this.angle=X,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(X,q,Y){this.angle=D(X.angle,q.angle,Y),this._updateMatrix()}clone(){return new z(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const X=this._colorMatrix||(0,w.c)();this._colorMatrix=(($,X)=>{const q=Math.sin(X*Math.PI/180),Y=Math.cos(X*Math.PI/180),ae=(0,Z.s)($,.213+.787*Y-.213*q,.715-.715*Y-.715*q,.072-.072*Y+.928*q,0,.213-.213*Y+.143*q,.715+.285*Y+.14*q,.072-.072*Y-.283*q,0,.213-.213*Y-.787*q,.715-.715*Y+.715*q,.072+.928*Y+.072*q,0,0,0,0,1);return(0,Z.t)(ae,ae)})(X,this.angle)}}class C{constructor(X){this.amount=X,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(X,q,Y){this.amount=D(X.amount,q.amount,Y)}clone(){return new C(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function D($,X,q){return $+(X-$)*q}function F($){return Math.round(1e3*(0,T.Wz)($))/1e3}function B($){switch($.type){case"grayscale":case"sepia":case"invert":return new G($.type,0);case"saturate":case"brightness":case"contrast":return new G($.type,1);case"opacity":return new C(1);case"hue-rotate":return new z(0);case"blur":return new Q(0);case"drop-shadow":return new k(0,0,0,[...(0,E.h$)("transparent")]);case"bloom":return new J(0,0,1)}}},10632:(He,Pe,g)=>{"use strict";g.d(Pe,{cW:()=>se,ij:()=>x,rM:()=>U});var E=g(32995),T=g(44054),w=g(76550),Z=g(6517);function x(Q,G,k){try{return function W(Q){if(!Q||0===Q.length)return null;if(function A(Q){const G=Q[0];return!!G&&"scale"in G}(Q)){const G=[];for(const k of Q)G.push({scale:k.scale,value:U(k.value)});return G}return U(Q)}(Q)}catch(z){k?.messages?.push(z)}return null}function se(Q,G,k,z){try{const C=function V(Q){const G=(0,w.Q)(Q);return G?(0,Z.Cb)(G)?G.map(k=>k.toJSON()):G.map(({scale:k,effects:z})=>({scale:k,value:z.map(C=>C.toJSON())})):null}(Q);(0,T.RB)(k,C,G)}catch(C){z.messages&&z.messages.push(C)}}function U(Q){if(!Q||!Q.length)return"";const G=[];for(const k of Q){let z=[];switch(k.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":z=[N(k,"amount")];break;case"blur":z=[N(k,"radius","pt")];break;case"hue-rotate":z=[N(k,"angle","deg")];break;case"drop-shadow":z=[N(k,"xoffset","pt"),N(k,"yoffset","pt"),N(k,"blurRadius","pt"),J(k,"color")];break;case"bloom":z=[N(k,"strength"),N(k,"radius","pt"),N(k,"threshold")]}const C=`${k.type}(${z.filter(Boolean).join(" ")})`;(0,w.Q)(C),G.push(C)}return G.join(" ")}function N(Q,G,k){if(null==Q[G])throw new E.Z("effect:missing-parameter",`Missing parameter '${G}' in ${Q.type} effect`,{effect:Q});return k?Q[G]+k:""+Q[G]}function J(Q,G){if(null==Q[G])throw new E.Z("effect:missing-parameter",`Missing parameter '${G}' in ${Q.type} effect`,{effect:Q});const k=Q[G];return`rgba(${k[0]||0}, ${k[1]||0}, ${k[2]||0}, ${k[3]/255||0})`}},76550:(He,Pe,g)=>{"use strict";g.d(Pe,{Q:()=>A});var se,E=g(32227),T=g(32995),w=g(9591),x=(g(80422),g(6517)),W={};function A(le){if(!le||0===le.length)return null;if("string"==typeof le){const ve=U(le);return ve&&0!==ve.length?ve:null}const ce=le.map(ve=>{if(!Number.isFinite(ve.scale)||ve.scale<=0)throw new T.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:ve});return{scale:ve.scale,effects:U(ve.value)}});ce.sort((ve,Te)=>Te.effects.length-ve.effects.length);for(let ve=0;ve<ce.length-1;ve++){if(!(0,x.AS)(ce[ve].effects,ce[ve+1].effects))throw new T.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:ce[ve].effects,b:ce[ve+1].effects});(0,x.uF)(ce[ve].effects,ce[ve+1].effects)}return ce.sort((ve,Te)=>Te.scale-ve.scale),ce}function U(le){let ce;if(!le)return[];try{ce=W.parse(le)}catch(ve){throw new T.Z("effect:invalid-syntax","Invalid effect syntax",{value:le,error:ve})}return ce.map(ve=>function N(le){try{switch(le.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function J(le){let ce=1;return D(le.parameters,1),1===le.parameters.length&&(ce=ne(le.parameters[0])),new w.GI(le.name,ce)}(le);case"opacity":return function Q(le){let ce=1;return D(le.parameters,1),1===le.parameters.length&&(ce=ne(le.parameters[0])),new w.Zx(ce)}(le);case"hue-rotate":return function G(le){let ce=0;return D(le.parameters,1),1===le.parameters.length&&(ce=function te(le){return function Y(le){if("quantity"!==le.type||!(0===le.value&&null===le.unit||le.unit&&null!=q[le.unit]))throw new T.Z("effect:type-error",`Expected <angle>, Actual: ${F(le)}`,{term:le})}(le),le.value*q[le.unit]||0}(le.parameters[0])),new w.Tq(ce)}(le);case"blur":return function k(le){let ce=0;return D(le.parameters,1),1===le.parameters.length&&(ce=ie(le.parameters[0]),B(ce,le.parameters[0])),new w.Tj(ce)}(le);case"drop-shadow":return function z(le){const ce=[];let ve=null;for(const Te of le.parameters)if("color"===Te.type){if(ce.length&&Object.freeze(ce),ve)throw new T.Z("effect:type-error","Accepts only one color",{});ve=fe(Te)}else{const ge=ie(Te);if(Object.isFrozen(ce))throw new T.Z("effect:type-error","<length> parameters not consecutive",{lengths:ce});ce.push(ge),3===ce.length&&B(ge,Te)}if(ce.length<2||ce.length>3)throw new T.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${ce.length}}`,{lengths:ce});return new w.CE(ce[0],ce[1],ce[2]||0,ve||_e("black"))}(le);case"bloom":return function C(le){let ce=1,ve=0,Te=0;return D(le.parameters,3),le.parameters[0]&&(ce=ne(le.parameters[0])),le.parameters[1]&&(ve=ie(le.parameters[1]),B(ve,le.parameters[1])),le.parameters[2]&&(Te=ne(le.parameters[2])),new w.rk(ce,ve,Te)}(le)}}catch(ce){throw ce.details.filter=le,ce}throw new T.Z("effect:unknown-effect",`Effect '${le.name}' is not supported`,{effect:le})}(ve))}function D(le,ce){if(le.length>ce)throw new T.Z("effect:type-error",`Function supports up to ${ce} parameters, Actual: ${le.length}`,{parameters:le})}function F(le){if("color"===le.type)return"<color>";if(le.unit){if(ae[le.unit])return"<length>";if(q[le.unit])return"<angle>";if("%"===le.unit)return"<percentage>"}return"<double>"}function B(le,ce){if(le<0)throw new T.Z("effect:type-error",`Negative values are not allowed, Actual: ${le}`,{term:ce})}(se={get exports(){return W},set exports(le){W=le}}).exports&&(se.exports=function(){function ce(ge,Ae,De,Se){var me=Error.call(this,ge);return Object.setPrototypeOf&&Object.setPrototypeOf(me,ce.prototype),me.expected=Ae,me.found=De,me.location=Se,me.name="SyntaxError",me}function ve(ge,Ae,De){return De=De||" ",ge.length>Ae?ge:ge+(De+=De.repeat(Ae-=ge.length)).slice(0,Ae)}return function le(ge,Ae){function De(){this.constructor=ge}De.prototype=Ae.prototype,ge.prototype=new De}(ce,Error),ce.prototype.format=function(ge){var Ae="Error: "+this.message;if(this.location){var De,Se=null;for(De=0;De<ge.length;De++)if(ge[De].source===this.location.source){Se=ge[De].text.split(/\r\n|\n|\r/g);break}var me=this.location.start,ye=this.location.source+":"+me.line+":"+me.column;if(Se){var we=this.location.end,$e=ve("",me.line.toString().length," "),Ce=Se[me.line-1],Ie=(me.line===we.line?we.column:Ce.length+1)-me.column||1;Ae+="\n --\x3e "+ye+"\n"+$e+" |\n"+me.line+" | "+Ce+"\n"+$e+" | "+ve("",me.column-1," ")+ve("",Ie,"^")}else Ae+="\n at "+ye}return Ae},ce.buildMessage=function(ge,Ae){var De={literal:function(Ie){return'"'+me(Ie.text)+'"'},class:function(Ie){var je=Ie.parts.map(function(Je){return Array.isArray(Je)?ye(Je[0])+"-"+ye(Je[1]):ye(Je)});return"["+(Ie.inverted?"^":"")+je.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(Ie){return Ie.description}};function Se(Ie){return Ie.charCodeAt(0).toString(16).toUpperCase()}function me(Ie){return Ie.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(je){return"\\x0"+Se(je)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(je){return"\\x"+Se(je)})}function ye(Ie){return Ie.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(je){return"\\x0"+Se(je)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(je){return"\\x"+Se(je)})}function we(Ie){return De[Ie.type](Ie)}return"Expected "+function $e(Ie){var je,Je,oe=Ie.map(we);if(oe.sort(),oe.length>0){for(je=1,Je=1;je<oe.length;je++)oe[je-1]!==oe[je]&&(oe[Je]=oe[je],Je++);oe.length=Je}switch(oe.length){case 1:return oe[0];case 2:return oe[0]+" or "+oe[1];default:return oe.slice(0,-1).join(", ")+", or "+oe[oe.length-1]}}(ge)+" but "+function Ce(Ie){return Ie?'"'+me(Ie)+'"':"end of input"}(Ae)+" found."},{SyntaxError:ce,parse:function Te(ge,Ae){var De,Se={},me=(Ae=void 0!==Ae?Ae:{}).grammarSource,ye={start:ws},we=ws,$e="none",Ce=")",Ie=",",je="(",Je="%",oe="px",be="cm",Ue="mm",Fe="in",Ke="pt",Ve="pc",tt="deg",rt="rad",Ne="grad",qe="turn",ft="#",Xe=".",dt="e",Qe=/^[ \t\n\r]/,ot=/^[a-z\-]/,ct=/^[0-9a-fA-F]/,_t=/^[+\-]/,Rt=/^[0-9]/,qt=gt("none"),rs=xs("none",!1),ss=xs(")",!1),vs=xs(",",!1),Wt=gt("whitespace"),as=qr([" ","\t","\n","\r"],!1,!1),ys=gt("function"),bt=xs("(",!1),Ts=gt("identifier"),nt=qr([["a","z"],"-"],!1,!1),mt=gt("percentage"),Tt=xs("%",!1),It=gt("length"),Zt=xs("px",!1),Kt=xs("cm",!1),Vt=xs("mm",!1),Nt=xs("in",!1),ls=xs("pt",!1),ts=xs("pc",!1),ms=gt("angle"),Os=xs("deg",!1),pt=xs("rad",!1),Pt=xs("grad",!1),jt=xs("turn",!1),us=gt("number"),et=gt("color"),At=xs("#",!1),Bt=qr([["0","9"],["a","f"],["A","F"]],!1,!1),Ht=qr(["+","-"],!1,!1),cs=qr([["0","9"]],!1,!1),Rs=xs(".",!1),Us=xs("e",!1),mr=function(){return[]},fs=function(yt,Xt){return{type:"function",name:yt,parameters:Xt||[]}},Le=function(yt,Xt){return Xt.length>0?function Nr(yt,Xt,ds){return[yt].concat(function tn(yt,Xt){return yt.map(function(ds){return ds[Xt]})}(Xt,ds))}(yt,Xt,3):[yt]},wt=function(yt){return{type:"quantity",value:yt.value,unit:yt.unit}},We=function(yt){return{type:"color",colorType:yt.type,value:yt.value}},ke=function(yt){return yt},Et=function(){return hr()},Ut=function(yt){return{value:yt,unit:"%"}},es=function(yt){return{value:yt,unit:"px"}},is=function(yt){return{value:yt,unit:"cm"}},_s=function(yt){return{value:yt,unit:"mm"}},Zs=function(yt){return{value:yt,unit:"in"}},$s=function(yt){return{value:yt,unit:"pt"}},As=function(yt){return{value:yt,unit:"pc"}},Gs=function(yt){return{value:yt,unit:"deg"}},nr=function(yt){return{value:yt,unit:"rad"}},Er=function(yt){return{value:yt,unit:"grad"}},dr=function(yt){return{value:yt,unit:"turn"}},wr=function(yt){return{value:yt,unit:null}},wn=function(){return{type:"hex",value:hr()}},pn=function(yt){return{type:"function",value:yt}},Yr=function(){return{type:"named",value:hr()}},Hn=function(){return parseFloat(hr())},zt=0,br=0,Xs=[{line:1,column:1}],cr=0,ir=[],bs=0;if("startRule"in Ae){if(!(Ae.startRule in ye))throw new Error("Can't start parsing from rule \""+Ae.startRule+'".');we=ye[Ae.startRule]}function hr(){return ge.substring(br,zt)}function xs(yt,Xt){return{type:"literal",text:yt,ignoreCase:Xt}}function qr(yt,Xt,ds){return{type:"class",parts:yt,inverted:Xt,ignoreCase:ds}}function gt(yt){return{type:"other",description:yt}}function it(yt){var Xt,ds=Xs[yt];if(ds)return ds;for(Xt=yt-1;!Xs[Xt];)Xt--;for(ds={line:(ds=Xs[Xt]).line,column:ds.column};Xt<yt;)10===ge.charCodeAt(Xt)?(ds.line++,ds.column=1):ds.column++,Xt++;return Xs[yt]=ds,ds}function kt(yt){zt<cr||(zt>cr&&(cr=zt,ir=[]),ir.push(yt))}function ws(){var yt;return(yt=function gs(){var yt,Xt;return bs++,yt=zt,_r(),ge.substr(zt,4)===$e?(Xt=$e,zt+=4):(Xt=Se,0===bs&&kt(rs)),Xt!==Se?(_r(),br=yt,yt=mr()):(zt=yt,yt=Se),bs--,yt===Se&&0===bs&&kt(qt),yt}())===Se&&(yt=function Ds(){var yt,Xt;if(yt=[],(Xt=Vs())!==Se)for(;Xt!==Se;)yt.push(Xt),Xt=Vs();else yt=Se;return yt}()),yt}function Vs(){var yt,Xt,ds,Fs;return yt=zt,_r(),(Xt=function tr(){var yt,Xt,ds;return bs++,yt=zt,(Xt=en())!==Se?(40===ge.charCodeAt(zt)?(ds=je,zt++):(ds=Se,0===bs&&kt(bt)),ds!==Se?(br=yt,yt=ke(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),bs--,yt===Se&&(Xt=Se,0===bs&&kt(ys)),yt}())!==Se?(_r(),(ds=function ks(){var yt,Xt,ds,Fs,Cr,yr,kr,rn;if(yt=zt,(Xt=Qs())!==Se){for(ds=[],Fs=zt,Cr=_r(),44===ge.charCodeAt(zt)?(yr=Ie,zt++):(yr=Se,0===bs&&kt(vs)),yr===Se&&(yr=null),kr=_r(),(rn=Qs())!==Se?Fs=Cr=[Cr,yr,kr,rn]:(zt=Fs,Fs=Se);Fs!==Se;)ds.push(Fs),Fs=zt,Cr=_r(),44===ge.charCodeAt(zt)?(yr=Ie,zt++):(yr=Se,0===bs&&kt(vs)),yr===Se&&(yr=null),kr=_r(),(rn=Qs())!==Se?Fs=Cr=[Cr,yr,kr,rn]:(zt=Fs,Fs=Se);br=yt,yt=Le(Xt,ds)}else zt=yt,yt=Se;return yt}())===Se&&(ds=null),_r(),41===ge.charCodeAt(zt)?(Fs=Ce,zt++):(Fs=Se,0===bs&&kt(ss)),Fs!==Se?(_r(),br=yt,yt=fs(Xt,ds)):(zt=yt,yt=Se)):(zt=yt,yt=Se),yt}function Qs(){var yt,Xt;return yt=zt,(Xt=function js(){var yt,Xt,ds;return bs++,yt=zt,_r(),(Xt=Br())!==Se?(37===ge.charCodeAt(zt)?(ds=Je,zt++):(ds=Se,0===bs&&kt(Tt)),ds!==Se?(br=yt,yt=Ut(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),bs--,yt===Se&&0===bs&&kt(mt),yt}())===Se&&(Xt=function zr(){var yt,Xt,ds;return bs++,yt=zt,_r(),(Xt=Br())!==Se?(ge.substr(zt,2)===oe?(ds=oe,zt+=2):(ds=Se,0===bs&&kt(Zt)),ds!==Se?(br=yt,yt=es(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),yt===Se&&(yt=zt,_r(),(Xt=Br())!==Se?(ge.substr(zt,2)===be?(ds=be,zt+=2):(ds=Se,0===bs&&kt(Kt)),ds!==Se?(br=yt,yt=is(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),yt===Se&&(yt=zt,_r(),(Xt=Br())!==Se?(ge.substr(zt,2)===Ue?(ds=Ue,zt+=2):(ds=Se,0===bs&&kt(Vt)),ds!==Se?(br=yt,yt=_s(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),yt===Se&&(yt=zt,_r(),(Xt=Br())!==Se?(ge.substr(zt,2)===Fe?(ds=Fe,zt+=2):(ds=Se,0===bs&&kt(Nt)),ds!==Se?(br=yt,yt=Zs(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),yt===Se&&(yt=zt,_r(),(Xt=Br())!==Se?(ge.substr(zt,2)===Ke?(ds=Ke,zt+=2):(ds=Se,0===bs&&kt(ls)),ds!==Se?(br=yt,yt=$s(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),yt===Se&&(yt=zt,_r(),(Xt=Br())!==Se?(ge.substr(zt,2)===Ve?(ds=Ve,zt+=2):(ds=Se,0===bs&&kt(ts)),ds!==Se?(br=yt,yt=As(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se)))))),bs--,yt===Se&&0===bs&&kt(It),yt}())===Se&&(Xt=function Dr(){var yt,Xt,ds;return bs++,yt=zt,(Xt=Br())!==Se?(ge.substr(zt,3)===tt?(ds=tt,zt+=3):(ds=Se,0===bs&&kt(Os)),ds!==Se?(br=yt,yt=Gs(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),yt===Se&&(yt=zt,(Xt=Br())!==Se?(ge.substr(zt,3)===rt?(ds=rt,zt+=3):(ds=Se,0===bs&&kt(pt)),ds!==Se?(br=yt,yt=nr(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),yt===Se&&(yt=zt,(Xt=Br())!==Se?(ge.substr(zt,4)===Ne?(ds=Ne,zt+=4):(ds=Se,0===bs&&kt(Pt)),ds!==Se?(br=yt,yt=Er(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se),yt===Se&&(yt=zt,(Xt=Br())!==Se?(ge.substr(zt,4)===qe?(ds=qe,zt+=4):(ds=Se,0===bs&&kt(jt)),ds!==Se?(br=yt,yt=dr(Xt)):(zt=yt,yt=Se)):(zt=yt,yt=Se)))),bs--,yt===Se&&(Xt=Se,0===bs&&kt(ms)),yt}())===Se&&(Xt=function Cn(){var yt,Xt;return bs++,yt=zt,_r(),(Xt=Br())!==Se?(br=yt,yt=wr(Xt)):(zt=yt,yt=Se),bs--,yt===Se&&0===bs&&kt(us),yt}()),Xt!==Se&&(br=yt,Xt=wt(Xt)),(yt=Xt)===Se&&(yt=zt,(Xt=function Dn(){var yt,Xt,ds,Fs;if(bs++,yt=zt,35===ge.charCodeAt(zt)?(Xt=ft,zt++):(Xt=Se,0===bs&&kt(At)),Xt!==Se){if(ds=[],ct.test(ge.charAt(zt))?(Fs=ge.charAt(zt),zt++):(Fs=Se,0===bs&&kt(Bt)),Fs!==Se)for(;Fs!==Se;)ds.push(Fs),ct.test(ge.charAt(zt))?(Fs=ge.charAt(zt),zt++):(Fs=Se,0===bs&&kt(Bt));else ds=Se;ds!==Se?(br=yt,yt=wn()):(zt=yt,yt=Se)}else zt=yt,yt=Se;return yt===Se&&(yt=zt,(Xt=Vs())!==Se&&(br=yt,Xt=pn(Xt)),(yt=Xt)===Se&&(yt=zt,(Xt=en())!==Se&&(br=yt,Xt=Yr()),yt=Xt)),bs--,yt===Se&&(Xt=Se,0===bs&&kt(et)),yt}())!==Se&&(br=yt,Xt=We(Xt)),yt=Xt),yt}function _r(){var yt,Xt;for(bs++,yt=[],Qe.test(ge.charAt(zt))?(Xt=ge.charAt(zt),zt++):(Xt=Se,0===bs&&kt(as));Xt!==Se;)yt.push(Xt),Qe.test(ge.charAt(zt))?(Xt=ge.charAt(zt),zt++):(Xt=Se,0===bs&&kt(as));return bs--,Xt=Se,0===bs&&kt(Wt),yt}function en(){var yt,Xt,ds;if(bs++,yt=zt,Xt=[],ot.test(ge.charAt(zt))?(ds=ge.charAt(zt),zt++):(ds=Se,0===bs&&kt(nt)),ds!==Se)for(;ds!==Se;)Xt.push(ds),ot.test(ge.charAt(zt))?(ds=ge.charAt(zt),zt++):(ds=Se,0===bs&&kt(nt));else Xt=Se;return Xt!==Se&&(br=yt,Xt=Et()),bs--,(yt=Xt)===Se&&(Xt=Se,0===bs&&kt(Ts)),yt}function Br(){var yt,Xt,ds,Fs,Cr,yr,kr;for(yt=zt,_t.test(ge.charAt(zt))?(ge.charAt(zt),zt++):0===bs&&kt(Ht),Xt=zt,ds=[],Rt.test(ge.charAt(zt))?(Fs=ge.charAt(zt),zt++):(Fs=Se,0===bs&&kt(cs));Fs!==Se;)ds.push(Fs),Rt.test(ge.charAt(zt))?(Fs=ge.charAt(zt),zt++):(Fs=Se,0===bs&&kt(cs));if(46===ge.charCodeAt(zt)?(Fs=Xe,zt++):(Fs=Se,0===bs&&kt(Rs)),Fs!==Se){if(Cr=[],Rt.test(ge.charAt(zt))?(yr=ge.charAt(zt),zt++):(yr=Se,0===bs&&kt(cs)),yr!==Se)for(;yr!==Se;)Cr.push(yr),Rt.test(ge.charAt(zt))?(yr=ge.charAt(zt),zt++):(yr=Se,0===bs&&kt(cs));else Cr=Se;Cr!==Se?Xt=ds=[ds,Fs,Cr]:(zt=Xt,Xt=Se)}else zt=Xt,Xt=Se;if(Xt===Se)if(Xt=[],Rt.test(ge.charAt(zt))?(ds=ge.charAt(zt),zt++):(ds=Se,0===bs&&kt(cs)),ds!==Se)for(;ds!==Se;)Xt.push(ds),Rt.test(ge.charAt(zt))?(ds=ge.charAt(zt),zt++):(ds=Se,0===bs&&kt(cs));else Xt=Se;if(Xt!==Se){if(ds=zt,101===ge.charCodeAt(zt)?(Fs=dt,zt++):(Fs=Se,0===bs&&kt(Us)),Fs!==Se){if(_t.test(ge.charAt(zt))?(Cr=ge.charAt(zt),zt++):(Cr=Se,0===bs&&kt(Ht)),Cr===Se&&(Cr=null),yr=[],Rt.test(ge.charAt(zt))?(kr=ge.charAt(zt),zt++):(kr=Se,0===bs&&kt(cs)),kr!==Se)for(;kr!==Se;)yr.push(kr),Rt.test(ge.charAt(zt))?(kr=ge.charAt(zt),zt++):(kr=Se,0===bs&&kt(cs));else yr=Se;yr!==Se?ds=Fs=[Fs,Cr,yr]:(zt=ds,ds=Se)}else zt=ds,ds=Se;ds===Se&&(ds=null),br=yt,yt=Hn()}else zt=yt,yt=Se;return yt}if((De=we())!==Se&&zt===ge.length)return De;throw De!==Se&&zt<ge.length&&kt({type:"end"}),function Ms(yt,Xt,ds){return new ce(ce.buildMessage(yt,Xt),yt,Xt,ds)}(ir,cr<ge.length?ge.charAt(cr):null,function Dt(yt,Xt){var ds=it(yt),Fs=it(Xt);return{source:me,start:{offset:yt,line:ds.line,column:ds.column},end:{offset:Xt,line:Fs.line,column:Fs.column}}}(cr,cr<ge.length?cr+1:cr))}}}());const q={deg:1,grad:.9,rad:180/Math.PI,turn:360},ae={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function ne(le){!function X(le){if("quantity"!==le.type||null!==le.unit&&"%"!==le.unit)throw new T.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${F(le)}`,{term:le})}(le);const ce=le.value;return B(ce,le),"%"===le.unit?.01*ce:ce}function ie(le){return function he(le){if("quantity"!==le.type||!(0===le.value&&null===le.unit||le.unit&&null!=ae[le.unit]))throw new T.Z("effect:type-error",`Expected <length>, Actual: ${F(le)}`,{term:le})}(le),le.value*ae[le.unit]||0}function fe(le){switch(le.colorType){case"hex":return(0,E.rW)(le.value);case"named":return _e(le.value);case"function":return function re(le){if(D(le.parameters,4),de.test(le.name))return[ne(le.parameters[0]),ne(le.parameters[1]),ne(le.parameters[2]),le.parameters[3]?ne(le.parameters[3]):1];if(Oe.test(le.name))return(0,E.B7)(function ue(le){return function $(le){if("quantity"!==le.type||null!==le.unit)throw new T.Z("effect:type-error",`Expected <double>, Actual: ${F(le)}`,{term:le})}(le),B(le.value,le),le.value}(le.parameters[0]),ne(le.parameters[1]),ne(le.parameters[2]),le.parameters[3]?ne(le.parameters[3]):1);throw new T.Z("effect:syntax-error",`Invalid color function '${le.name}'`,{colorFunction:le})}(le.value)}}function _e(le){if(!(0,E.St)(le))throw new T.Z("effect:unknown-color",`color '${le}' isn't valid`,{namedColor:le});return(0,E.VL)(le)}const de=/^rgba?/i,Oe=/^hsla?/i},6517:(He,Pe,g)=>{"use strict";g.d(Pe,{AS:()=>T,Cb:()=>Z,uF:()=>w});var E=g(9591);function T(x,se){const V=x.length>se.length?x:se;return(x.length>se.length?se:x).every((W,A)=>W.type===V[A].type)}function w(x,se){const V=x.length>se.length?x:se,W=x.length>se.length?se:x;for(let A=W.length;A<V.length;A++)W.push((0,E.Ee)(V[A]))}function Z(x){const se=x[0];return!!se&&"type"in se}},33510:(He,Pe,g)=>{"use strict";g.d(Pe,{S6:()=>w,nd:()=>Z,u_:()=>T});var E=g(53661);class T{constructor(se=null,V={},W,A){this.geometry=se,this.attributes=V,this.centroid=W,this.objectId=A,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const se=new T(this.geometry,this.attributes,this.centroid,this.objectId);return se.displayId=this.displayId,se.geohashX=this.geohashX,se.geohashY=this.geohashY,se}}function w(x){return!((0,E.Wi)(x.geometry)||!x.geometry.coords||!x.geometry.coords.length)}class Z extends T{}},43921:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>E});class E{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const w=new E;return w.objectIdFieldName=this.objectIdFieldName,w.globalIdFieldName=this.globalIdFieldName,w.geohashFieldName=this.geohashFieldName,w.geometryProperties=this.geometryProperties,w.geometryType=this.geometryType,w.spatialReference=this.spatialReference,w.hasZ=this.hasZ,w.hasM=this.hasM,w.features=this.features,w.fields=this.fields,w.transform=this.transform,w.exceededTransferLimit=this.exceededTransferLimit,w.uniqueIdField=this.uniqueIdField,w.queryGeometry=this.queryGeometry,w.queryGeometryType=this.queryGeometryType,w}}},93846:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>E});class E{constructor(w=[],Z=[],x=!1){this.lengths=w??[],this.coords=Z??[],this.hasIndeterminateRingOrder=x}static fromRect(w){const[Z,x,se,V]=w,W=se-Z,A=V-x;return new E([5],[Z,x,W,0,0,A,-W,0,0,-A])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((w,Z)=>w+Z)}forEachVertex(w){let Z=0;this.lengths.length||w(this.coords[0],this.coords[1]);for(let x=0;x<this.lengths.length;x++){const se=this.lengths[x];for(let V=0;V<se;V++)w(this.coords[2*(V+Z)],this.coords[2*(V+Z)+1]);Z+=se}}clone(w){return w?(w.set(this.coords),new E(this.lengths.slice(),w,this.hasIndeterminateRingOrder)):new E(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},50805:(He,Pe,g)=>{"use strict";g.d(Pe,{$:()=>ct,$g:()=>Rt,E7:()=>be,EI:()=>Ue,GH:()=>Fe,IN:()=>F,Iv:()=>ce,J6:()=>Ae,Jd:()=>D,Nh:()=>Xe,RZ:()=>ft,Uy:()=>$e,XA:()=>Je,Yn:()=>oe,cn:()=>rt,dd:()=>re,di:()=>Ke,eG:()=>ye,fQ:()=>q,hY:()=>qt,h_:()=>Ne,ks:()=>Ce,lM:()=>qe,lz:()=>vs,oB:()=>as,u0:()=>Se,zj:()=>dt});var E=g(32995),T=g(28191),w=g(53661),Z=g(73327),x=g(6848),se=g(71182),V=g(33510),W=g(43921),A=g(93846);function U(nt,mt){return nt?mt?4:3:mt?3:2}const N=T.Z.getLogger("esri.layers.graphics.featureConversionUtils"),J={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Q=(nt,mt,Tt,It,Zt,Kt)=>{nt[Tt]=Zt,nt[Tt+1]=Kt},G=(nt,mt,Tt,It,Zt,Kt)=>{nt[Tt]=Zt,nt[Tt+1]=Kt,nt[Tt+2]=mt[It+2]},k=(nt,mt,Tt,It,Zt,Kt)=>{nt[Tt]=Zt,nt[Tt+1]=Kt,nt[Tt+2]=mt[It+3]},z=(nt,mt,Tt,It,Zt,Kt)=>{nt[Tt]=Zt,nt[Tt+1]=Kt,nt[Tt+2]=mt[It+2],nt[Tt+3]=mt[It+3]};function C(nt,mt,Tt,It){if(nt){if(Tt)return mt&&It?z:G;if(mt&&It)return k}else if(mt&&It)return G;return Q}function D({scale:nt,translate:mt},Tt){return Math.round((Tt-mt[0])/nt[0])}function F({scale:nt,translate:mt},Tt){return Math.round((mt[1]-Tt)/nt[1])}function X({scale:nt,translate:mt},Tt,It){return Tt*nt[It]+mt[It]}function q(nt,mt,Tt){return nt?mt?Tt?ie(nt):he(nt):Tt?ue(nt):Y(nt):null}function Y(nt){const mt=nt.coords;return{x:mt[0],y:mt[1]}}function ae(nt,mt){return nt.coords[0]=mt.x,nt.coords[1]=mt.y,nt}function he(nt){const mt=nt.coords;return{x:mt[0],y:mt[1],z:mt[2]}}function ne(nt,mt){return nt.coords[0]=mt.x,nt.coords[1]=mt.y,nt.coords[2]=mt.z,nt}function ue(nt){const mt=nt.coords;return{x:mt[0],y:mt[1],m:mt[2]}}function te(nt,mt){return nt.coords[0]=mt.x,nt.coords[1]=mt.y,nt.coords[2]=mt.m,nt}function ie(nt){const mt=nt.coords;return{x:mt[0],y:mt[1],z:mt[2],m:mt[3]}}function fe(nt,mt){return nt.coords[0]=mt.x,nt.coords[1]=mt.y,nt.coords[2]=mt.z,nt.coords[3]=mt.m,nt}function de(nt,mt){return nt&&mt?fe:nt?ne:mt?te:ae}function Oe(nt,mt,Tt,It,Zt){const Kt=de(Tt,It);for(const{geometry:Vt,attributes:Nt}of mt){const ls=(0,w.pC)(Vt)?Kt(new A.Z,Vt):null;nt.push(new V.u_(ls,Nt,null,Zt?Nt[Zt]:void 0))}return nt}function re(nt,mt,Tt=de(null!=mt.z,null!=mt.m)){return Tt(nt,mt)}function ce(nt,mt,Tt){if((0,w.Wi)(nt))return null;const It=U(mt,Tt),Zt=[];for(let Kt=0;Kt<nt.coords.length;Kt+=It){const Vt=[];for(let Nt=0;Nt<It;Nt++)Vt.push(nt.coords[Kt+Nt]);Zt.push(Vt)}return mt?Tt?{points:Zt,hasZ:mt,hasM:Tt}:{points:Zt,hasZ:mt}:Tt?{points:Zt,hasM:Tt}:{points:Zt}}function ve(nt,mt,Tt,It,Zt){const Kt=U(Tt,It);for(const{geometry:Vt,attributes:Nt}of mt){const ls=(0,w.pC)(Vt)?Te(new A.Z,Vt,Kt):null;nt.push(new V.u_(ls,Nt,null,Zt?Nt[Zt]:void 0))}return nt}function Te(nt,mt,Tt=U(mt.hasZ,mt.hasM)){nt.lengths[0]=mt.points.length;const It=nt.coords;let Zt=0;for(const Kt of mt.points)for(let Vt=0;Vt<Tt;Vt++)It[Zt++]=Kt[Vt];return nt}function Ae(nt,mt,Tt){if(!nt)return null;const It=U(mt,Tt),{coords:Zt,lengths:Kt}=nt,Vt=[];let Nt=0;for(const ls of Kt){const ts=[];for(let ms=0;ms<ls;ms++){const Os=[];for(let pt=0;pt<It;pt++)Os.push(Zt[Nt++]);ts.push(Os)}Vt.push(ts)}return mt?Tt?{paths:Vt,hasZ:mt,hasM:Tt}:{paths:Vt,hasZ:mt}:Tt?{paths:Vt,hasM:Tt}:{paths:Vt}}function De(nt,mt,Tt,It,Zt){const Kt=U(Tt,It);for(const{geometry:Vt,attributes:Nt}of mt){const ls=(0,w.pC)(Vt)?Se(new A.Z,Vt,Kt):null;nt.push(new V.u_(ls,Nt,null,Zt?Nt[Zt]:void 0))}return nt}function Se(nt,mt,Tt=U(mt.hasZ,mt.hasM)){const{lengths:It,coords:Zt}=nt;let Kt=0;for(const Vt of mt.paths){for(const Nt of Vt)for(let ls=0;ls<Tt;ls++)Zt[Kt++]=Nt[ls];It.push(Vt.length)}return nt}function ye(nt,mt,Tt){if(!nt)return null;const It=U(mt,Tt),{coords:Zt,lengths:Kt}=nt,Vt=[];let Nt=0;for(const ls of Kt){const ts=[];for(let ms=0;ms<ls;ms++){const Os=[];for(let pt=0;pt<It;pt++)Os.push(Zt[Nt++]);ts.push(Os)}Vt.push(ts)}return mt?Tt?{rings:Vt,hasZ:mt,hasM:Tt}:{rings:Vt,hasZ:mt}:Tt?{rings:Vt,hasM:Tt}:{rings:Vt}}function we(nt,mt,Tt,It,Zt){for(const{geometry:Kt,centroid:Vt,attributes:Nt}of mt){const ls=(0,w.pC)(Kt)?$e(new A.Z,Kt,Tt,It):null,ts=Zt?Nt[Zt]:void 0;(0,w.pC)(Vt)?nt.push(new V.u_(ls,Nt,ae(new A.Z,Vt),ts)):nt.push(new V.u_(ls,Nt,null,ts))}return nt}function $e(nt,mt,Tt=mt.hasZ,It=mt.hasM){return Ce(nt,mt.rings,Tt,It),nt}function Ce(nt,mt,Tt,It){const Zt=U(Tt,It),{lengths:Kt,coords:Vt}=nt;let Nt=0;ys(nt);for(const ls of mt){for(const ts of ls)for(let ms=0;ms<Zt;ms++)Vt[Nt++]=ts[ms];Kt.push(ls.length)}return nt}const Ie=[],je=[];function Je(nt,mt,Tt,It,Zt){Ie[0]=nt;const[Kt]=oe(je,Ie,mt,Tt,It,Zt);return bt(Ie),bt(je),Kt}function oe(nt,mt,Tt,It,Zt,Kt){if(bt(nt),!Tt){for(const Vt of mt)nt.push(new V.u_(null,Vt.attributes,null,Kt?Vt.attributes[Kt]:void 0));return nt}switch(Tt){case"esriGeometryPoint":return Oe(nt,mt,It,Zt,Kt);case"esriGeometryMultipoint":return ve(nt,mt,It,Zt,Kt);case"esriGeometryPolyline":return De(nt,mt,It,Zt,Kt);case"esriGeometryPolygon":return we(nt,mt,It,Zt,Kt);default:N.error("convertToFeatureSet:unknown-geometry",new E.Z(`Unable to parse unknown geometry type '${Tt}'`)),bt(nt)}return nt}function be(nt,mt,Tt,It,Zt,Kt){const Vt=nt.length;switch(Tt){case"esriGeometryPoint":Oe(nt,mt,It,Zt,Kt);break;case"esriGeometryMultipoint":ve(nt,mt,It,Zt,Kt);break;case"esriGeometryPolyline":De(nt,mt,It,Zt,Kt);break;case"esriGeometryPolygon":we(nt,mt,It,Zt,Kt);break;default:N.error("convertToFeatureSet:unknown-geometry",new E.Z(`Unable to parse unknown geometry type '${Tt}'`))}for(let Nt=0;Nt<mt.length;Nt++)nt[Nt+Vt].geometryType=Tt,nt[Nt+Vt].insertAfter=mt[Nt].insertAfter,nt[Nt+Vt].groupId=mt[Nt].groupId;return nt}function Ue(nt,mt,Tt,It){je[0]=nt,tt(Ie,je,mt,Tt,It);const Zt=Ie[0];return bt(Ie),bt(je),Zt}function Fe(nt,mt,Tt){if((0,w.Wi)(nt))return null;const It=new A.Z;return"hasZ"in nt&&null==mt&&(mt=nt.hasZ),"hasM"in nt&&null==Tt&&(Tt=nt.hasM),(0,se.wp)(nt)?de(mt??null!=nt.z,Tt??null!=nt.m)(It,nt):(0,se.oU)(nt)?$e(It,nt,mt,Tt):(0,se.l9)(nt)?Se(It,nt,U(mt,Tt)):(0,se.aW)(nt)?Te(It,nt,U(mt,Tt)):void N.error("convertFromGeometry:unknown-geometry",new E.Z(`Unable to parse unknown geometry type '${nt}'`))}function Ke(nt,mt,Tt,It){const Zt=nt&&("coords"in nt?nt:nt.geometry);if((0,w.Wi)(Zt))return null;switch(mt){case"esriGeometryPoint":{let Kt=Y;return Tt&&It?Kt=ie:Tt?Kt=he:It&&(Kt=ue),Kt(Zt)}case"esriGeometryMultipoint":return ce(Zt,Tt,It);case"esriGeometryPolyline":return Ae(Zt,Tt,It);case"esriGeometryPolygon":return ye(Zt,Tt,It);default:return N.error("convertToGeometry:unknown-geometry",new E.Z(`Unable to parse unknown geometry type '${mt}'`)),null}}function tt(nt,mt,Tt,It,Zt){if(bt(nt),(0,w.Wi)(Tt))return function Ve(nt,mt){for(const Tt of mt)nt.push({attributes:Tt.attributes});return nt}(nt,mt);switch(Tt){case"esriGeometryPoint":return function _e(nt,mt,Tt,It){let Zt=Y;Tt&&It?Zt=ie:Tt?Zt=he:It&&(Zt=ue);for(const Kt of mt){const{geometry:Vt,attributes:Nt}=Kt,ls=(0,w.pC)(Vt)?Zt(Vt):null;nt.push({attributes:Nt,geometry:ls})}return nt}(nt,mt,It,Zt);case"esriGeometryMultipoint":return function le(nt,mt,Tt,It){for(const{geometry:Zt,attributes:Kt}of mt)nt.push({attributes:Kt,geometry:(0,w.pC)(Zt)?ce(Zt,Tt,It):null});return nt}(nt,mt,It,Zt);case"esriGeometryPolyline":return function ge(nt,mt,Tt,It){for(const{geometry:Zt,attributes:Kt}of mt)nt.push({attributes:Kt,geometry:(0,w.pC)(Zt)?Ae(Zt,Tt,It):null});return nt}(nt,mt,It,Zt);case"esriGeometryPolygon":return function me(nt,mt,Tt,It){for(const{geometry:Zt,attributes:Kt,centroid:Vt}of mt){const Nt=(0,w.pC)(Zt)?ye(Zt,Tt,It):null;if((0,w.pC)(Vt)){const ls=Y(Vt);nt.push({attributes:Kt,centroid:ls,geometry:Nt})}else nt.push({attributes:Kt,geometry:Nt})}return nt}(nt,mt,It,Zt);default:N.error("convertToFeatureSet:unknown-geometry",new E.Z(`Unable to parse unknown geometry type '${Tt}'`))}return nt}function rt(nt){const{objectIdFieldName:mt,spatialReference:Tt,transform:It,fields:Zt,hasM:Kt,hasZ:Vt,features:Nt,geometryType:ls,exceededTransferLimit:ts,uniqueIdField:ms,queryGeometry:Os,queryGeometryType:pt}=nt,Pt={features:tt([],Nt,ls,Vt,Kt),fields:Zt,geometryType:ls,objectIdFieldName:mt,spatialReference:Tt,uniqueIdField:ms,queryGeometry:Ke(Os,pt,!1,!1)};return It&&(Pt.transform=It),ts&&(Pt.exceededTransferLimit=ts),Kt&&(Pt.hasM=Kt),Vt&&(Pt.hasZ=Vt),Pt}function Ne(nt,mt){const Tt=new W.Z,{hasM:It,hasZ:Zt,features:Kt,objectIdFieldName:Vt,spatialReference:Nt,geometryType:ls,exceededTransferLimit:ts,transform:ms,fields:Os}=nt;return Os&&(Tt.fields=Os),Tt.geometryType=ls??null,Tt.objectIdFieldName=Vt??mt??null,Tt.spatialReference=Nt??null,Tt.objectIdFieldName?(Kt&&oe(Tt.features,Kt,ls,Zt,It,Tt.objectIdFieldName),ts&&(Tt.exceededTransferLimit=ts),It&&(Tt.hasM=It),Zt&&(Tt.hasZ=Zt),ms&&(Tt.transform=ms),Tt):(N.error(new E.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Tt)}function qe(nt){const{transform:mt,features:Tt,hasM:It,hasZ:Zt}=nt;if(!mt)return nt;for(const Kt of Tt)(0,w.pC)(Kt.geometry)&&Rt(Kt.geometry,Kt.geometry,It,Zt,mt),(0,w.pC)(Kt.centroid)&&Rt(Kt.centroid,Kt.centroid,It,Zt,mt);return nt.transform=null,nt}function ft(nt,mt){const{geometryType:Tt,features:It,hasM:Zt,hasZ:Kt}=mt;if(!nt)return mt;for(let Vt=0;Vt<It.length;Vt++){const Nt=It[Vt],ls=Nt.weakClone();ls.geometry=new A.Z,Xe(ls.geometry,Nt.geometry,Zt,Kt,Tt,nt),Nt.centroid&&(ls.centroid=new A.Z,Xe(ls.centroid,Nt.centroid,Zt,Kt,"esriGeometryPoint",nt)),It[Vt]=ls}return mt.transform=nt,mt}function Xe(nt,mt,Tt,It,Zt,Kt,Vt=Tt,Nt=It){if(ys(nt),(0,w.Wi)(mt)||!mt.coords.length)return null;const ls=J[Zt],{coords:ts,lengths:ms}=mt,Os=U(Tt,It),pt=U(Tt&&Vt,It&&Nt),Pt=C(Tt,It,Vt,Nt);if(!ms.length)return Pt(nt.coords,ts,0,0,D(Kt,ts[0]),F(Kt,ts[1])),ys(nt,Os,0),nt;let jt,us,et,At,Bt=0,Ht=0,cs=Ht;for(const Rs of ms){if(Rs<ls)continue;let Us=0;Ht=cs,et=jt=D(Kt,ts[Bt]),At=us=F(Kt,ts[Bt+1]),Pt(nt.coords,ts,Ht,Bt,et,At),Us++,Bt+=Os,Ht+=pt;for(let mr=1;mr<Rs;mr++,Bt+=Os)et=D(Kt,ts[Bt]),At=F(Kt,ts[Bt+1]),et===jt&&At===us||(Pt(nt.coords,ts,Ht,Bt,et-jt,At-us),Ht+=pt,Us++,jt=et,us=At);Us>=ls&&(nt.lengths.push(Us),cs=Ht)}return bt(nt.coords,cs),nt.coords.length?nt:null}function dt(nt,mt,Tt,It,Zt,Kt,Vt=Tt,Nt=It){if(ys(nt),!mt||!mt.coords.length)return null;const ls=J[Zt],{coords:ts,lengths:ms}=mt,Os=U(Tt,It),pt=U(Tt&&Vt,It&&Nt),Pt=C(Tt,It,Vt,Nt);if(!ms.length)return Pt(nt.coords,ts,0,0,ts[0],ts[1]),ys(nt,Os,0),nt;let jt=0;const us=Kt*Kt;for(const et of ms){if(et<ls){jt+=et*Os;continue}const At=nt.coords.length/pt,Bt=jt,Ht=jt+(et-1)*Os;Pt(nt.coords,ts,nt.coords.length,Bt,ts[Bt],ts[Bt+1]),ot(nt.coords,ts,Os,us,Pt,Bt,Ht),Pt(nt.coords,ts,nt.coords.length,Ht,ts[Ht],ts[Ht+1]);const cs=nt.coords.length/pt-At;cs>=ls?nt.lengths.push(cs):bt(nt.coords,At*pt),jt+=et*Os}return nt.coords.length?nt:null}function Qe(nt,mt,Tt,It){const Zt=nt[mt],Kt=nt[mt+1],ls=nt[It],ts=nt[It+1];let ms=nt[Tt],Os=nt[Tt+1],pt=ls-ms,Pt=ts-Os;if(0!==pt||0!==Pt){const jt=((Zt-ms)*pt+(Kt-Os)*Pt)/(pt*pt+Pt*Pt);jt>1?(ms=ls,Os=ts):jt>0&&(ms+=pt*jt,Os+=Pt*jt)}return pt=Zt-ms,Pt=Kt-Os,pt*pt+Pt*Pt}function ot(nt,mt,Tt,It,Zt,Kt,Vt){let Nt,ls=It,ts=0;for(let ms=Kt+Tt;ms<Vt;ms+=Tt)Nt=Qe(mt,ms,Kt,Vt),Nt>ls&&(ts=ms,ls=Nt);ls>It&&(ts-Kt>Tt&&ot(nt,mt,Tt,It,Zt,Kt,ts),Zt(nt,mt,nt.length,ts,mt[ts],mt[ts+1]),Vt-ts>Tt&&ot(nt,mt,Tt,It,Zt,ts,Vt))}function ct(nt,mt,Tt,It){if((0,w.Wi)(mt)||!mt.coords||!mt.coords.length)return null;const Zt=U(Tt,It);let Kt=Number.POSITIVE_INFINITY,Vt=Number.POSITIVE_INFINITY,Nt=Number.NEGATIVE_INFINITY,ls=Number.NEGATIVE_INFINITY;if(mt&&mt.coords){const ts=mt.coords;for(let ms=0;ms<ts.length;ms+=Zt){const Os=ts[ms],pt=ts[ms+1];Kt=Math.min(Kt,Os),Nt=Math.max(Nt,Os),Vt=Math.min(Vt,pt),ls=Math.max(ls,pt)}}return(0,Z.is)(nt)?(0,Z.bZ)(nt,Kt,Vt,Nt,ls):(0,x.al)(Kt,Vt,Nt,ls,nt),nt}function Rt(nt,mt,Tt,It,Zt){const{coords:Kt,lengths:Vt}=mt,Nt=U(Tt,It);if(!Kt.length)return nt!==mt&&ys(nt),nt;(0,w.O3)(Zt);const{originPosition:ls,scale:ts,translate:ms}=Zt,Os=Ts;Os.originPosition=ls;const pt=Os.scale;pt[0]=ts[0]??1,pt[1]=-(ts[1]??1),pt[2]=ts[2]??1,pt[3]=ts[3]??1;const Pt=Os.translate;if(Pt[0]=ms[0]??0,Pt[1]=ms[1]??0,Pt[2]=ms[2]??0,Pt[3]=ms[3]??0,!Vt.length){for(let us=0;us<Nt;++us)nt.coords[us]=X(Os,Kt[us],us);return nt!==mt&&ys(nt,Nt,0),nt}let jt=0;for(let us=0;us<Vt.length;us++){const et=Vt[us];nt.lengths[us]=et;for(let Ht=0;Ht<Nt;++Ht)nt.coords[jt+Ht]=X(Os,Kt[jt+Ht],Ht);let At=nt.coords[jt],Bt=nt.coords[jt+1];jt+=Nt;for(let Ht=1;Ht<et;Ht++,jt+=Nt){At+=Kt[jt]*pt[0],Bt+=Kt[jt+1]*pt[1],nt.coords[jt]=At,nt.coords[jt+1]=Bt;for(let cs=2;cs<Nt;++cs)nt.coords[jt+cs]=X(Os,Kt[jt+cs],cs)}}return nt!==mt&&ys(nt,Kt.length,Vt.length),nt}function qt(nt,mt,Tt,It,Zt,Kt){if(ys(nt),nt.lengths.push(...mt.lengths),Tt===Zt&&It===Kt)for(let Vt=0;Vt<mt.coords.length;Vt++)nt.coords.push(mt.coords[Vt]);else{const Vt=U(Tt,It),Nt=C(Tt,It,Zt,Kt),ls=mt.coords;for(let ts=0;ts<ls.length;ts+=Vt)Nt(nt.coords,ls,nt.coords.length,ts,ls[ts],ls[ts+1])}return nt}function ss(nt,mt,Tt,It){let Zt=0,Kt=nt[It*mt],Vt=nt[It*(mt+1)];for(let Nt=1;Nt<Tt;Nt++){const ls=Kt+nt[It*(mt+Nt)],ts=Vt+nt[It*(mt+Nt)+1],ms=(ls-Kt)*(ts+Vt);Kt=ls,Vt=ts,Zt+=ms}return.5*Zt}function vs(nt,mt){const{coords:Tt,lengths:It}=nt;let Zt=0,Kt=0;for(let Vt=0;Vt<It.length;Vt++){const Nt=It[Vt];Kt+=ss(Tt,Zt,Nt,mt),Zt+=Nt}return Math.abs(Kt)}function as(nt,mt){if((0,w.Wi)(nt))return null;const Tt=nt.clone(),It=nt.coords,Zt=nt.lengths;let Kt=0;for(let Vt=0;Vt<Zt.length;Vt++){const Nt=Zt[Vt];let ls=It[mt*Kt],ts=It[mt*Kt+1];for(let ms=1;ms<Nt;ms++){const Os=ls+It[mt*(Kt+ms)],pt=ts+It[mt*(Kt+ms)+1];Tt.coords[mt*(Kt+ms)]=Os,Tt.coords[mt*(Kt+ms)+1]=pt,ls=Os,ts=pt}Kt+=Nt}return Tt}function ys(nt,mt=0,Tt=0){bt(nt.lengths,Tt),bt(nt.coords,mt)}function bt(nt,mt=0){nt.length!==mt&&(nt.length=mt)}const Ts={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},450:(He,Pe,g)=>{"use strict";g.d(Pe,{V:()=>V});var E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891));const V=W=>{let A=class extends W{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function se(W){return"portalItem"in W}(this)?this.portalItem?.apiKey:null}set apiKey(U){null!=U?this._override("apiKey",U):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,E._)([(0,T.Cb)({type:String})],A.prototype,"apiKey",null),A=(0,E._)([(0,x.j)("esri.layers.mixins.APIKeyMixin")],A),A}},6363:(He,Pe,g)=>{"use strict";g.d(Pe,{Y:()=>A});var E=g(18100),T=g(28191),w=g(53661),Z=g(9497),V=(g(83382),g(19420),g(20891)),W=g(4583);const A=U=>{let N=class extends U{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const J=(0,W.Qc)(this.url);if((0,w.pC)(J)&&J.title)return J.title}return this._get("title")||""}set title(J){this._set("title",J)}set url(J){this._set("url",(0,W.Nm)(J,T.Z.getLogger(this.declaredClass)))}};return(0,E._)([(0,Z.Cb)()],N.prototype,"title",null),(0,E._)([(0,Z.Cb)({type:String})],N.prototype,"url",null),N=(0,E._)([(0,V.j)("esri.layers.mixins.ArcGISService")],N),N}},29812:(He,Pe,g)=>{"use strict";g.d(Pe,{h:()=>W});var E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(10632);const V={read:{reader:se.ij},write:{allowNull:!0,writer:se.cW}},W=A=>{let U=class extends A{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,E._)([(0,T.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],U.prototype,"blendMode",void 0),(0,E._)([(0,T.Cb)({json:{read:!1,write:!1,origins:{"web-map":V,"portal-item":V}}})],U.prototype,"effect",void 0),U=(0,E._)([(0,x.j)("esri.layers.mixins.BlendLayer")],U),U}},55123:(He,Pe,g)=>{"use strict";g.d(Pe,{N:()=>se});var E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891));const se=V=>{let W=class extends V{constructor(){super(...arguments),this.customParameters=null}};return(0,E._)([(0,T.Cb)({type:Object,json:{write:{overridePolicy:A=>({enabled:!!(A&&Object.keys(A).length>0)})}}})],W.prototype,"customParameters",void 0),W=(0,E._)([(0,x.j)("esri.layers.mixins.CustomParametersMixin")],W),W}},79465:(He,Pe,g)=>{"use strict";g.d(Pe,{dU:()=>A,lQ:()=>J,o1:()=>Q});var E=g(18100),T=g(95442),w=g(88684),W=(g(28191),g(83382),g(32995),g(67087),g(20891));const A=new T.Z.EventEmitter,U="esri.layers.mixins.EditBusLayer",N=Symbol(U);function J(G){return null!=G&&"object"==typeof G&&N in G}const Q=G=>{var k;let z=class extends G{constructor(...C){super(...C),this[k]=!0,this.when().then(()=>{this.own([A.on("edits",D=>{const F="layer"in D?D.layer:null,B="layer"in D?D.layer?.url:D.serviceUrl,$="layer"in D?D.layer?.layerId:D.layerId,X=D.event;if(F===this||B!==this.url)return;if(null!=$&&null!=this.layerId&&$===this.layerId)return void this.emit("edits",(0,w.d9)(X));const q=X.editedFeatures?.find(({layerId:Y})=>Y===this.layerId);if(q){const{adds:Y,updates:ae,deletes:he}=q.editedFeatures,ne={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:Y?Y.map(({attributes:ue})=>({objectId:this.objectIdField&&ue[this.objectIdField],globalId:this.globalIdField&&ue[this.globalIdField]})):[],deletedFeatures:he?he.map(({attributes:ue})=>({objectId:this.objectIdField&&ue[this.objectIdField],globalId:this.globalIdField&&ue[this.globalIdField]})):[],updatedFeatures:ae?ae.map(({current:{attributes:ue}})=>({objectId:this.objectIdField&&ue[this.objectIdField],globalId:this.globalIdField&&ue[this.globalIdField]})):[],editedFeatures:(0,w.d9)(X.editedFeatures),exceededTransferLimit:!1};this.emit("edits",ne)}})])},()=>{})}};return k=N,z=(0,E._)([(0,W.j)(U)],z),z}},37572:(He,Pe,g)=>{"use strict";g.d(Pe,{b:()=>W});var E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(32366);const V={write:{allowNull:!0}},W=A=>{let U=class extends A{constructor(){super(...arguments),this.featureEffect=null}};return(0,E._)([(0,T.Cb)({type:se.Z,json:{origins:{"web-map":V,"portal-item":V}}})],U.prototype,"featureEffect",void 0),U=(0,E._)([(0,x.j)("esri.layers.mixins.FeatureEffectLayer")],U),U}},30914:(He,Pe,g)=>{"use strict";g.d(Pe,{B:()=>de});var E=g(18100),T=g(97621),w=g(88684),Z=g(28191),x=g(9497),V=(g(83382),g(66508)),W=g(20891),A=g(70425),U=g(10465),N=g(96095),J=g(68230),Q=g(4583),G=g(51299),k=g(94904),z=g(44480),D=(g(19420),g(27655));let F=class extends((0,k.J)(z.wq)){constructor(Oe){super(Oe),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};(0,E._)([(0,x.Cb)()],F.prototype,"creatorField",void 0),(0,E._)([(0,x.Cb)()],F.prototype,"creationDateField",void 0),(0,E._)([(0,x.Cb)()],F.prototype,"editorField",void 0),(0,E._)([(0,x.Cb)()],F.prototype,"editDateField",void 0),(0,E._)([(0,x.Cb)()],F.prototype,"realm",void 0),(0,E._)([(0,x.Cb)({type:D.Z})],F.prototype,"dateFieldsTimeReference",void 0),F=(0,E._)([(0,W.j)("esri.layers.support.EditFieldsInfo")],F);const B=F;let $=class extends((0,k.J)(z.wq)){constructor(Oe){super(Oe)}};(0,E._)([(0,x.Cb)({constructOnly:!0,json:{write:!0}})],$.prototype,"name",void 0),(0,E._)([(0,x.Cb)({constructOnly:!0,json:{write:!0}})],$.prototype,"fields",void 0),(0,E._)([(0,x.Cb)({constructOnly:!0,json:{write:!0}})],$.prototype,"isAscending",void 0),(0,E._)([(0,x.Cb)({constructOnly:!0,json:{write:!0}})],$.prototype,"indexType",void 0),(0,E._)([(0,x.Cb)({constructOnly:!0,json:{write:!0}})],$.prototype,"isUnique",void 0),(0,E._)([(0,x.Cb)({constructOnly:!0,json:{write:!0}})],$.prototype,"description",void 0),$=(0,E._)([(0,W.j)("esri.layers.support.FeatureIndex")],$);var X=g(86456),q=g(82769);let Y=class extends((0,k.J)(z.wq)){constructor(Oe){super(Oe),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};(0,E._)([(0,x.Cb)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Y.prototype,"shapeAreaField",void 0),(0,E._)([(0,x.Cb)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Y.prototype,"shapeLengthField",void 0),(0,E._)([(0,x.Cb)({type:String,json:{read:Oe=>q.gV.read(Oe)||q.Jo.read(Oe)}})],Y.prototype,"units",void 0),Y=(0,E._)([(0,W.j)("esri.layers.support.GeometryFieldsInfo")],Y);const ae=Y;var he=g(92437),ne=g(63321);const ue=new ne.X({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),te=new ne.X({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let ie=class extends((0,k.J)(z.wq)){constructor(Oe){super(Oe),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,E._)([(0,x.Cb)({json:{read:ue.read,write:ue.write}})],ie.prototype,"cardinality",void 0),(0,E._)([(0,x.Cb)({json:{read:!0,write:!0}})],ie.prototype,"composite",void 0),(0,E._)([(0,x.Cb)({json:{read:!0,write:!0}})],ie.prototype,"id",void 0),(0,E._)([(0,x.Cb)({json:{read:!0,write:!0}})],ie.prototype,"keyField",void 0),(0,E._)([(0,x.Cb)({json:{read:!0,write:!0}})],ie.prototype,"keyFieldInRelationshipTable",void 0),(0,E._)([(0,x.Cb)({json:{read:!0,write:!0}})],ie.prototype,"name",void 0),(0,E._)([(0,x.Cb)({json:{read:!0,write:!0}})],ie.prototype,"relatedTableId",void 0),(0,E._)([(0,x.Cb)({json:{read:!0,write:!0}})],ie.prototype,"relationshipTableId",void 0),(0,E._)([(0,x.Cb)({json:{read:te.read,write:te.write}})],ie.prototype,"role",void 0),ie=(0,E._)([(0,W.j)("esri.layers.support.Relationship")],ie);const fe=ie;var _e=g(5113);const de=Oe=>{let re=class extends Oe{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=J.Z.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(T.Z.ofType($)),this.version=void 0}readCapabilitiesFromService(le,ce){return(0,_e.h)(ce,this.url)}get effectiveCapabilities(){const le=this.capabilities;if(!le)return null;const ce=(0,w.d9)(le),{operations:ve,editing:Te}=ce;return this.sourceJSON?.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(ve.supportsQuery=!0),ce):this.userHasUpdateItemPrivileges?(ve.supportsAdd=ve.supportsDelete=ve.supportsEditing=ve.supportsQuery=ve.supportsUpdate=Te.supportsDeleteByOthers=Te.supportsGeometryUpdate=Te.supportsUpdateByOthers=!0,ce):(this.userHasFullEditingPrivileges&&ve.supportsEditing&&(ve.supportsAdd=ve.supportsDelete=ve.supportsUpdate=Te.supportsGeometryUpdate=!0),ce)}readEditingInfo(le,ce){const{editingInfo:ve}=ce;return ve?{lastEditDate:null!=ve.lastEditDate?new Date(ve.lastEditDate):null}:null}readIsTableFromService(le,ce){return"Table"===ce.type}readMinScale(le,ce){return ce.effectiveMinScale||le||0}readMaxScale(le,ce){return ce.effectiveMaxScale||le||0}readGlobalIdFieldFromService(le,ce){return(0,X.rk)(ce)}readObjectIdFieldFromService(le,ce){return(0,X.kZ)(ce)}readServiceDefinitionExpression(le,ce){return ce.definitionQuery||ce.definitionExpression}set url(le){const ce=(0,Q.XG)({layer:this,url:le,nonStandardUrlAllowed:!0,logger:Z.Z.getLogger(this.declaredClass)});this._set("url",ce.url),null!=ce.layerId&&this._set("layerId",ce.layerId)}writeUrl(le,ce,ve,Te){(0,Q.wH)(this,le,null,ce,Te)}readVersion(le,ce){return(0,X.JY)(ce)}};return(0,E._)([(0,x.Cb)({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],re.prototype,"capabilities",void 0),(0,E._)([(0,V.r)("service","capabilities")],re.prototype,"readCapabilitiesFromService",null),(0,E._)([(0,x.Cb)({readOnly:!0})],re.prototype,"effectiveCapabilities",null),(0,E._)([(0,x.Cb)({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],re.prototype,"copyright",void 0),(0,E._)([(0,x.Cb)({type:D.Z})],re.prototype,"dateFieldsTimeReference",void 0),(0,E._)([(0,x.Cb)({type:Boolean})],re.prototype,"datesInUnknownTimezone",void 0),(0,E._)([(0,x.Cb)({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],re.prototype,"displayField",void 0),(0,E._)([(0,x.Cb)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],re.prototype,"definitionExpression",void 0),(0,E._)([(0,x.Cb)({readOnly:!0,type:B})],re.prototype,"editFieldsInfo",void 0),(0,E._)([(0,x.Cb)({readOnly:!0})],re.prototype,"editingInfo",void 0),(0,E._)([(0,V.r)("editingInfo")],re.prototype,"readEditingInfo",null),(0,E._)([(0,x.Cb)((()=>{const le=(0,w.d9)(G.PV),ce=le.json.origins;return ce["web-map"]={read:!1,write:!1},ce["portal-item"]={read:!1,write:!1},le})())],re.prototype,"elevationInfo",void 0),(0,E._)([(0,x.Cb)({type:he.Z,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],re.prototype,"floorInfo",void 0),(0,E._)([(0,x.Cb)({type:U.Z,json:{origins:{service:{read:{source:"extent"}}}}})],re.prototype,"fullExtent",void 0),(0,E._)([(0,x.Cb)()],re.prototype,"gdbVersion",void 0),(0,E._)([(0,x.Cb)({readOnly:!0,type:ae,json:{read:{source:"geometryProperties"}}})],re.prototype,"geometryFieldsInfo",void 0),(0,E._)([(0,x.Cb)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:X.Fr.read}}}})],re.prototype,"geometryType",void 0),(0,E._)([(0,x.Cb)({type:Boolean,json:{origins:{service:{read:!0}}}})],re.prototype,"hasM",void 0),(0,E._)([(0,x.Cb)({type:Boolean,json:{origins:{service:{read:!0}}}})],re.prototype,"hasZ",void 0),(0,E._)([(0,x.Cb)({readOnly:!0,type:N.Z})],re.prototype,"heightModelInfo",void 0),(0,E._)([(0,x.Cb)({type:Date})],re.prototype,"historicMoment",void 0),(0,E._)([(0,x.Cb)({readOnly:!0})],re.prototype,"isTable",void 0),(0,E._)([(0,V.r)("service","isTable",["type"])],re.prototype,"readIsTableFromService",null),(0,E._)([(0,x.Cb)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],re.prototype,"layerId",void 0),(0,E._)([(0,x.Cb)(G.rO)],re.prototype,"minScale",void 0),(0,E._)([(0,V.r)("service","minScale",["minScale","effectiveMinScale"])],re.prototype,"readMinScale",null),(0,E._)([(0,x.Cb)(G.u1)],re.prototype,"maxScale",void 0),(0,E._)([(0,V.r)("service","maxScale",["maxScale","effectiveMaxScale"])],re.prototype,"readMaxScale",null),(0,E._)([(0,x.Cb)({type:String})],re.prototype,"globalIdField",void 0),(0,E._)([(0,V.r)("service","globalIdField",["globalIdField","fields"])],re.prototype,"readGlobalIdFieldFromService",null),(0,E._)([(0,x.Cb)({type:String})],re.prototype,"objectIdField",void 0),(0,E._)([(0,V.r)("service","objectIdField",["objectIdField","fields"])],re.prototype,"readObjectIdFieldFromService",null),(0,E._)([(0,x.Cb)({type:D.Z})],re.prototype,"preferredTimeReference",void 0),(0,E._)([(0,x.Cb)({type:[fe],readOnly:!0})],re.prototype,"relationships",void 0),(0,E._)([(0,x.Cb)()],re.prototype,"sourceJSON",void 0),(0,E._)([(0,x.Cb)({type:Boolean})],re.prototype,"returnM",void 0),(0,E._)([(0,x.Cb)({type:Boolean})],re.prototype,"returnZ",void 0),(0,E._)([(0,x.Cb)({readOnly:!0})],re.prototype,"serviceDefinitionExpression",void 0),(0,E._)([(0,V.r)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],re.prototype,"readServiceDefinitionExpression",null),(0,E._)([(0,x.Cb)({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],re.prototype,"serviceItemId",void 0),(0,E._)([(0,x.Cb)({type:J.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],re.prototype,"spatialReference",void 0),(0,E._)([(0,x.Cb)({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],re.prototype,"subtypeField",void 0),(0,E._)([(0,x.Cb)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],re.prototype,"trackIdField",void 0),(0,E._)([(0,x.Cb)({readOnly:!0,json:{write:!1}})],re.prototype,"serverGens",void 0),(0,E._)([(0,x.Cb)({type:T.Z.ofType($),readOnly:!0})],re.prototype,"indexes",void 0),(0,E._)([(0,x.Cb)(G.HQ)],re.prototype,"url",null),(0,E._)([(0,A.c)("url")],re.prototype,"writeUrl",null),(0,E._)([(0,x.Cb)({json:{origins:{service:{read:!0}},read:!1}})],re.prototype,"version",void 0),(0,E._)([(0,V.r)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],re.prototype,"readVersion",null),re=(0,E._)([(0,W.j)("esri.layers.mixins.FeatureLayerBase")],re),re}},80828:(He,Pe,g)=>{"use strict";g.d(Pe,{M:()=>ye});var ue,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(39717),V=g(40337),W=g(73889),k=(g(53108),g(72750),g(11822),g(75993),g(33098),g(57712),g(79191)),z=g(70383),C=g(59574),D=g(27723),F=g(97708),B=g(88684),$=g(44054),X=g(4139),q=g(66508),Y=g(70425),ae=g(77729),he=g(51299),ne=g(85770);const te=(0,ae.d)({types:F.QT});let fe=ue=class extends V.B{constructor(we){super(we),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(we,$e,Ce){const Ie=we.filter(je=>"avg_angle"!==je.statisticType).map(je=>je.toJSON());(0,$.RB)(Ce,Ie,$e)}readRenderer(we,$e,Ce){const Ie=$e.drawingInfo?.renderer;return Ie?(0,C.a)(Ie,$e,Ce)??void 0:$e.defaultSymbol?$e.types&&$e.types.length?new z.Z({defaultSymbol:te($e.defaultSymbol,$e,Ce),field:$e.typeIdField,uniqueValueInfos:$e.types.map(je=>({id:je.id,symbol:te(je.symbol,je,Ce)}))}):new k.Z({symbol:te($e.defaultSymbol,$e,Ce)}):null}clone(){return new ue({fields:(0,B.d9)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,B.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:(0,B.d9)(this.popupTemplate),renderer:(0,B.d9)(this.renderer)})}};(0,E._)([(0,X.J)({binning:"binning"})],fe.prototype,"type",void 0),(0,E._)([(0,X.J)({geohash:"geohash"})],fe.prototype,"binType",void 0),(0,E._)([(0,T.Cb)({type:Number,range:{min:1,max:9},json:{write:!0}})],fe.prototype,"fixedBinLevel",void 0),(0,E._)([(0,T.Cb)({type:[ne.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],fe.prototype,"labelingInfo",void 0),(0,E._)([(0,T.Cb)(he.iR)],fe.prototype,"labelsVisible",void 0),(0,E._)([(0,T.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],fe.prototype,"maxScale",void 0),(0,E._)([(0,T.Cb)(he.C_)],fe.prototype,"popupEnabled",void 0),(0,E._)([(0,T.Cb)({type:W.Z,json:{name:"popupInfo",write:!0}})],fe.prototype,"popupTemplate",void 0),(0,E._)([(0,T.Cb)({type:[se.Z],json:{write:!0}})],fe.prototype,"fields",void 0),(0,E._)([(0,Y.c)("fields")],fe.prototype,"writeFields",null),(0,E._)([(0,T.Cb)({types:D.A,json:{write:{target:"drawingInfo.renderer"}}})],fe.prototype,"renderer",void 0),(0,E._)([(0,q.r)("renderer",["drawingInfo.renderer"])],fe.prototype,"readRenderer",null),fe=ue=(0,E._)([(0,x.j)("esri.layers.support.FeatureReductionBinning")],fe);const _e=fe;var re,de=g(44480),Oe=g(55798);const le=(0,ae.d)({types:F.QT});function ve(we){return"simple"===we.type&&!we.visualVariables?.length}let Te=re=class extends de.wq{constructor(we){super(we),this.type="cluster",this.clusterRadius=(0,Oe.t_)("80px"),this.clusterMinSize=(0,Oe.t_)("12px"),this.clusterMaxSize=(0,Oe.t_)("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(we,$e,Ce){const Ie=$e.drawingInfo?.renderer;return Ie?.authoringInfo?.isAutoGenerated?null:Ie?ve(Ie)?null:(0,C.a)(Ie,$e,Ce)??void 0:$e.defaultSymbol?$e.types&&$e.types.length?new z.Z({defaultSymbol:le($e.defaultSymbol,$e,Ce),field:$e.typeIdField,uniqueValueInfos:$e.types.map(je=>({id:je.id,symbol:le(je.symbol,je,Ce)}))}):new k.Z({symbol:le($e.defaultSymbol,$e,Ce)}):null}readSymbol(we,$e,Ce){const Ie=$e.drawingInfo?.renderer;return Ie?.authoringInfo?.isAutoGenerated?null:Ie&&ve(Ie)?(0,C.a)(Ie,$e,Ce)?.symbol:null}writeSymbol(we,$e,Ce,Ie){const je=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||je){const Je=new k.Z({symbol:we});$e.drawingInfo={renderer:Je.write({},Ie)}}}writeFields(we,$e,Ce){const Ie=we.filter(je=>"avg_angle"!==je.statisticType).map(je=>je.toJSON());(0,$.RB)(Ce,Ie,$e)}readFields(we,$e,Ce){return we.filter(Ie=>!Ie.isAutoGenerated).map(Ie=>se.Z.fromJSON(Ie))}clone(){return new re({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,B.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,B.d9)(this.fields),maxScale:this.maxScale,renderer:(0,B.d9)(this.renderer),symbol:(0,B.d9)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,B.d9)(this.popupTemplate)})}};(0,E._)([(0,T.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],Te.prototype,"type",void 0),(0,E._)([(0,T.Cb)({type:Number,cast:we=>"auto"===we?we:(0,Oe.t_)(we),json:{write:!0}})],Te.prototype,"clusterRadius",void 0),(0,E._)([(0,T.Cb)({type:Number,cast:Oe.t_,json:{write:!0}})],Te.prototype,"clusterMinSize",void 0),(0,E._)([(0,T.Cb)({type:Number,cast:Oe.t_,json:{write:!0}})],Te.prototype,"clusterMaxSize",void 0),(0,E._)([(0,T.Cb)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Te.prototype,"maxScale",void 0),(0,E._)([(0,T.Cb)(he.C_)],Te.prototype,"popupEnabled",void 0),(0,E._)([(0,T.Cb)({type:W.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Te.prototype,"popupTemplate",void 0),(0,E._)([(0,T.Cb)({types:D.A,json:{write:{target:"drawingInfo.renderer"}}})],Te.prototype,"renderer",void 0),(0,E._)([(0,q.r)("renderer",["drawingInfo.renderer"])],Te.prototype,"readRenderer",null),(0,E._)([(0,T.Cb)({types:F.AH})],Te.prototype,"symbol",void 0),(0,E._)([(0,q.r)("symbol",["drawingInfo.renderer"])],Te.prototype,"readSymbol",null),(0,E._)([(0,Y.c)("symbol")],Te.prototype,"writeSymbol",null),(0,E._)([(0,T.Cb)({type:[ne.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Te.prototype,"labelingInfo",void 0),(0,E._)([(0,T.Cb)(he.iR)],Te.prototype,"labelsVisible",void 0),(0,E._)([(0,T.Cb)({type:[se.Z],json:{write:!0}})],Te.prototype,"fields",void 0),(0,E._)([(0,Y.c)("fields")],Te.prototype,"writeFields",null),(0,E._)([(0,q.r)("fields")],Te.prototype,"readFields",null),Te=re=(0,E._)([(0,x.j)("esri.layers.support.FeatureReductionCluster")],Te);const ge=Te;var Ae=g(55792);const De={key:"type",base:V.B,typeMap:{cluster:ge,binning:_e}},Se={types:{key:"type",base:V.B,typeMap:{selection:Ae.Z,cluster:ge,binning:_e}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:De},"portal-item":{types:De},"web-scene":{types:{key:"type",base:V.B,typeMap:{selection:Ae.Z}}}}}};var me=g(72720);const ye=we=>{let $e=class extends we{constructor(...Ce){super(...Ce),this.own(this.watch("renderer",()=>{if(this.featureReduction){const Ie=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",Ie)}},!0))}set featureReduction(Ce){const Ie=this._normalizeFeatureReduction(Ce);this._set("featureReduction",Ie)}set renderer(Ce){}_normalizeFeatureReduction(Ce){if("cluster"!==Ce?.type)return Ce;const Ie=Ce.clone(),je=[new se.Z({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],Je=(Ie.fields??[]).filter(be=>!be.isAutoGenerated);if(Ce.renderer&&!Ce.renderer.authoringInfo?.isAutoGenerated)return Ie.fields=[...je,...Je],Ie;if(Ce.symbol)return Ie.fields=[...je,...Je],Ie.renderer=null,Ie;if(!this.renderer)return Ce;const oe=(0,me.S1)(je,this.renderer,Ce,null,!1);return Ie.fields=[...je,...Je],Ie.renderer=oe,Ie}};return(0,E._)([(0,T.Cb)(Se)],$e.prototype,"featureReduction",null),$e=(0,E._)([(0,x.j)("esri.layers.mixins.FeatureReductionLayer")],$e),$e}},33829:(He,Pe,g)=>{"use strict";g.d(Pe,{q:()=>Q});var E=g(18100),T=g(32995),w=g(55050),Z=g(9497),V=(g(83382),g(19420),g(20891)),W=g(70425),A=g(44564),U=g(64939);const N={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}};var J=g(51299);const Q=k=>{let z=class extends k{constructor(){super(...arguments),this.title=null}writeListMode(C,D,F,B){(B&&"ground"===B.layerContainerType||C&&(0,U.d)(this,F,{},B))&&(D[F]=C)}writeOperationalLayerType(C,D,F,B){!C||B&&"tables"===B.layerContainerType||(D.layerType=C)}writeTitle(C,D){D.title=C??"Layer"}read(C,D){D&&(D.layer=this),(0,A.$)(this,C,F=>super.read(C,F),D)}write(C,D){if(D?.origin){const $=`${D.origin}/${D.layerContainerType||"operational-layers"}`,X=N[$];let q=X&&X[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===$&&(q=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===$&&(q=!1),!q)return D.messages?.push(new T.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${$}'`,{layer:this})),null}const F=super.write(C,{...D,layer:this}),B=!!D&&!!D.messages&&!!D.messages.filter($=>$ instanceof T.Z&&"web-document-write:property-required"===$.name).length;return(0,w.jc)(F?.url)?(D?.messages?.push(new T.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&B?null:F}beforeSave(){}};return(0,E._)([(0,Z.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],z.prototype,"id",void 0),(0,E._)([(0,Z.Cb)(J.rT)],z.prototype,"listMode",void 0),(0,E._)([(0,W.c)("listMode")],z.prototype,"writeListMode",null),(0,E._)([(0,Z.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],z.prototype,"operationalLayerType",void 0),(0,E._)([(0,W.c)("operationalLayerType")],z.prototype,"writeOperationalLayerType",null),(0,E._)([(0,Z.Cb)(J.Oh)],z.prototype,"opacity",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],z.prototype,"title",void 0),(0,E._)([(0,W.c)("title"),(0,W.c)(["web-scene"],"title")],z.prototype,"writeTitle",null),(0,E._)([(0,Z.Cb)({type:Boolean,json:{name:"visibility"}})],z.prototype,"visible",void 0),z=(0,E._)([(0,V.j)("esri.layers.mixins.OperationalLayer")],z),z}},72255:(He,Pe,g)=>{"use strict";g.d(Pe,{c:()=>k});var A,E=g(18100),T=g(44054),w=g(9497),se=(g(83382),g(19420),g(20891)),V=g(63321),W=g(44480);const U=new V.X({asc:"ascending",desc:"descending"});let N=A=class extends W.wq{constructor(z){super(z),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new A({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],N.prototype,"field",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],N.prototype,"valueExpression",void 0),(0,E._)([(0,w.Cb)({type:U.apiValues,json:{read:U.read,write:U.write}})],N.prototype,"order",void 0),N=A=(0,E._)([(0,se.j)("esri.layers.support.OrderByInfo")],N);const J=N;function Q(z,C,D){if(!z)return null;const F=z.find($=>!!$.field);if(!F)return null;const B=new J;return B.read(F,D),[B]}function G(z,C,D,F){const B=z.find($=>!!$.field);B&&(0,T.RB)(D,[B.toJSON()],C)}const k=z=>{let C=class extends z{constructor(){super(...arguments),this.orderBy=null}};return(0,E._)([(0,w.Cb)({type:[J],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:Q},write:{target:"layerDefinition.orderBy",writer:G}}})],C.prototype,"orderBy",void 0),C=(0,E._)([(0,se.j)("esri.layers.mixins.OrderedLayer")],C),C}},16617:(He,Pe,g)=>{"use strict";g.d(Pe,{I:()=>q});var E=g(71670),T=g(18100),w=g(68327),Z=g(84489),x=g(1897),se=g(11823),V=g(32995),W=g(28191),A=g(53661),U=g(30801),N=g(55050),J=g(9497),k=(g(83382),g(19420),g(66508)),z=g(20891),C=g(70425),D=g(63719),F=g(37753),B=g(66673),$=g(78422),X=g(39712);const q=ae=>{let he=class extends ae{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,A.SC)(this.portalItem)}set portalItem(ne){ne!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",ne))}readPortalItem(ne,ue,te){if(ue.itemId)return new B.default({id:ue.itemId,portal:te&&te.portal})}writePortalItem(ne,ue){ne&&ne.id&&(ue.itemId=ne.id)}loadFromPortal(ne,ue){var te=this;return(0,E.Z)(function*(){if(te.portalItem&&te.portalItem.id)try{const ie=yield g.e(1248).then(g.bind(g,21248));return(0,U.k_)(ue),yield ie.load({instance:te,supportedTypes:ne.supportedTypes,validateItem:ne.validateItem,supportsData:ne.supportsData,layerModuleTypeMap:ne.layerModuleTypeMap},ue)}catch(ie){throw(0,U.D_)(ie)||W.Z.getLogger(te.declaredClass).warn(`Failed to load layer (${te.title}, ${te.id}) portal item (${te.portalItem.id})\n  ${ie}`),ie}})()}finishLoadEditablePortalLayer(ne){var ue=this;return(0,E.Z)(function*(){ue._set("userHasEditingPrivileges",yield ue._fetchUserHasEditingPrivileges(ne).catch(te=>((0,U.r9)(te),!0)))})()}_setUserPrivileges(ne,ue){var te=this;return(0,E.Z)(function*(){if(!w.default.userPrivilegesApplied)return te.finishLoadEditablePortalLayer(ue);if(te.url)try{const{features:{edit:ie,fullEdit:fe},content:{updateItem:_e}}=yield te._fetchUserPrivileges(ne,ue);te._set("userHasEditingPrivileges",ie),te._set("userHasFullEditingPrivileges",fe),te._set("userHasUpdateItemPrivileges",_e)}catch(ie){(0,U.r9)(ie)}})()}_fetchUserPrivileges(ne,ue){var te=this;return(0,E.Z)(function*(){let ie=te.portalItem;if(!ne||!ie||!ie.loaded||ie.sourceUrl)return te._fetchFallbackUserPrivileges(ue);const fe=ne===ie.id;if(fe&&ie.portal.user)return(0,X.Ss)(ie);let _e,de;if(fe)_e=ie.portal.url;else try{_e=yield(0,D.oP)(te.url,ue)}catch(ce){(0,U.r9)(ce)}if(!_e||!(0,N.Zo)(_e,ie.portal.url))return te._fetchFallbackUserPrivileges(ue);try{const ce=(0,A.pC)(ue)?ue.signal:null;de=yield Z.id?.getCredential(`${_e}/sharing`,{prompt:!1,signal:ce})}catch(ce){(0,U.r9)(ce)}if(!de)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(fe?yield ie.reload():(ie=new B.default({id:ne,portal:{url:_e}}),yield ie.load(ue)),ie.portal.user)return(0,X.Ss)(ie)}catch(ce){(0,U.r9)(ce)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges(ne){var ue=this;return(0,E.Z)(function*(){let te=!0;try{te=yield ue._fetchUserHasEditingPrivileges(ne)}catch(ie){(0,U.r9)(ie)}return{features:{edit:te,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(ne){var ue=this;return(0,E.Z)(function*(){const te=ue.url?Z.id?.findCredential(ue.url):null;if(!te)return!0;const ie=Y.credential===te?Y.user:yield ue._fetchEditingUser(ne);return Y.credential=te,Y.user=ie,(0,A.Wi)(ie)||null==ie.privileges||ie.privileges.includes("features:user:edit")})()}_fetchEditingUser(ne){var ue=this;return(0,E.Z)(function*(){const te=ue.portalItem?.portal?.user;if(te)return te;const ie=Z.id.findServerInfo(ue.url??"");if(!ie?.owningSystemUrl)return null;const fe=`${ie.owningSystemUrl}/sharing/rest`,_e=F.Z.getDefault();if(_e&&_e.loaded&&(0,N.Fv)(_e.restUrl)===(0,N.Fv)(fe))return _e.user;const de=`${fe}/community/self`,Oe=(0,A.pC)(ne)?ne.signal:null,re=yield(0,se.q6)((0,x.default)(de,{authMode:"no-prompt",query:{f:"json"},signal:Oe}));return re.ok?$.default.fromJSON(re.value.data):null})()}read(ne,ue){ue&&(ue.layer=this),super.read(ne,ue)}write(ne,ue){const te=ue&&ue.portal,ie=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||F.Z.getDefault());return te&&ie&&!(0,N.tm)(ie.restUrl,te.restUrl)?(ue.messages&&ue.messages.push(new V.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(ne,{...ue,layer:this})}};return(0,T._)([(0,J.Cb)({type:B.default})],he.prototype,"portalItem",null),(0,T._)([(0,k.r)("web-document","portalItem",["itemId"])],he.prototype,"readPortalItem",null),(0,T._)([(0,C.c)("web-document","portalItem",{itemId:{type:String}})],he.prototype,"writePortalItem",null),(0,T._)([(0,J.Cb)({clonable:!1})],he.prototype,"resourceReferences",void 0),(0,T._)([(0,J.Cb)({type:Boolean,readOnly:!0})],he.prototype,"userHasEditingPrivileges",void 0),(0,T._)([(0,J.Cb)({type:Boolean,readOnly:!0})],he.prototype,"userHasFullEditingPrivileges",void 0),(0,T._)([(0,J.Cb)({type:Boolean,readOnly:!0})],he.prototype,"userHasUpdateItemPrivileges",void 0),he=(0,T._)([(0,z.j)("esri.layers.mixins.PortalLayer")],he),he},Y={credential:null,user:null}},17085:(He,Pe,g)=>{"use strict";g.d(Pe,{Q:()=>ae});var E=g(71670),T=g(18100),w=g(28191),Z=g(30801),x=g(9497),W=(g(83382),g(19420),g(20891)),A=g(97621),Q=(g(67087),g(32995),g(11225),g(50147));const G=new A.Z,k=new WeakMap;function D(he){return null!=he&&"object"==typeof he&&"refreshInterval"in he&&"refresh"in he}function F(he,ne){return Number.isFinite(he)&&Number.isFinite(ne)?ne<=0?he:F(ne,he%ne):0}let B=0,$=0;function X(){const he=Date.now();for(const ne of G)ne.refreshInterval&&he-(k.get(ne)??0)+5>=6e4*ne.refreshInterval&&(k.set(ne,he),ne.refresh(he))}(0,Q.EH)(()=>{const he=Date.now();let ne=0;for(const ue of G)ne=F(Math.round(6e4*ue.refreshInterval),ne),ue.refreshInterval?k.get(ue)||k.set(ue,he):k.delete(ue);if(ne!==$){if($=ne,clearInterval(B),0===$)return void(B=0);B=setInterval(X,$)}});const ae=he=>{let ne=class extends he{constructor(...ue){super(...ue),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,Z.Ds)(()=>this.hasDataChanged()),this.when().then(()=>{!function z(he){D(he)&&G.push(he)}(this)},()=>{})}destroy(){!function C(he){D(he)&&G.includes(he)&&G.remove(he)}(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(ue=Date.now()){(0,Z.R8)(this._debounceHasDataChanged()).then(te=>{te&&this._set("refreshTimestamp",ue),this.emit("refresh",{dataChanged:te})},te=>{w.Z.getLogger(this.declaredClass).error(te),this.emit("refresh",{dataChanged:!1,error:te})})}hasDataChanged(){return(0,E.Z)(function*(){return!0})()}};return(0,T._)([(0,x.Cb)({type:Number,cast:ue=>ue>=.1?ue:ue<=0?0:.1,json:{write:!0}})],ne.prototype,"refreshInterval",void 0),(0,T._)([(0,x.Cb)({readOnly:!0})],ne.prototype,"refreshTimestamp",void 0),(0,T._)([(0,x.Cb)()],ne.prototype,"refreshParameters",null),ne=(0,T._)([(0,W.j)("esri.layers.mixins.RefreshableLayer")],ne),ne}},72450:(He,Pe,g)=>{"use strict";g.d(Pe,{M:()=>se});var E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891));const se=W=>{let A=class extends W{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const U={minScale:this.minScale,maxScale:this.maxScale},N=this.parent;N&&"effectiveScaleRange"in N&&function V(W,A){W.minScale=W.minScale>0?A.minScale>0?Math.min(W.minScale,A.minScale):W.minScale:A.minScale,W.maxScale=W.maxScale>0?A.maxScale>0?Math.max(W.maxScale,A.maxScale):W.maxScale:A.maxScale}(U,N.effectiveScaleRange);const J=this._get("effectiveScaleRange");return J&&J.minScale===U.minScale&&J.maxScale===U.maxScale?J:U}};return(0,E._)([(0,T.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],A.prototype,"minScale",void 0),(0,E._)([(0,T.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],A.prototype,"maxScale",void 0),(0,E._)([(0,T.Cb)({readOnly:!0})],A.prototype,"effectiveScaleRange",null),A=(0,E._)([(0,x.j)("esri.layers.mixins.ScaleRangeLayer")],A),A}},37302:(He,Pe,g)=>{"use strict";g.d(Pe,{n:()=>J});var E=g(18100),T=g(55025),w=g(41240),Z=g(9497),V=(g(83382),g(19420),g(66508)),W=g(20891),A=g(21230),U=g(59657),N=g(87406);const J=Q=>{let G=class extends Q{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(k,z){const C=z.timeInfo.exportOptions;if(!C)return null;const D=C.timeOffset,F=N.v.fromJSON(C.timeOffsetUnits);return D&&F?new w.Z({value:D,unit:F}):null}set timeInfo(k){(0,A.UF)(k,this.fieldsIndex),this._set("timeInfo",k)}};return(0,E._)([(0,Z.Cb)({type:T.Z,json:{write:!1}})],G.prototype,"timeExtent",void 0),(0,E._)([(0,Z.Cb)({type:w.Z})],G.prototype,"timeOffset",void 0),(0,E._)([(0,V.r)("service","timeOffset",["timeInfo.exportOptions"])],G.prototype,"readOffset",null),(0,E._)([(0,Z.Cb)({value:null,type:U.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],G.prototype,"timeInfo",null),(0,E._)([(0,Z.Cb)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],G.prototype,"useViewTime",void 0),G=(0,E._)([(0,W.j)("esri.layers.mixins.TemporalLayer")],G),G}},39717:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(44480),w=g(88684),Z=g(9497),se=(g(83382),g(20891)),V=g(98687);let A=W=class extends T.wq{constructor(N){super(N),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new W({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:(0,w.d9)(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],A.prototype,"isAutoGenerated",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],A.prototype,"name",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],A.prototype,"alias",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],A.prototype,"onStatisticField",void 0),(0,E._)([(0,Z.Cb)({type:V.Z,json:{write:!0}})],A.prototype,"onStatisticExpression",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],A.prototype,"statisticType",void 0),A=W=(0,E._)([(0,se.j)("esri.layers.support.AggregateField")],A);const U=A},98687:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var E=g(18100),T=g(94904),w=g(44480),Z=g(9497),V=(g(83382),g(19420),g(20891));let W=class extends((0,T.J)(w.wq)){constructor(U){super(U),this.expression=null,this.title=null,this.returnType=null}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],W.prototype,"expression",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],W.prototype,"title",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],W.prototype,"returnType",void 0),W=(0,E._)([(0,V.j)("esri.layers.support.ExpressionInfo")],W);const A=W},32366:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>C});var J,E=g(18100),T=g(32995),w=g(44480),Z=g(53661),x=g(44054),se=g(9497),A=(g(83382),g(19420),g(20891)),U=g(10632),N=g(84298);const Q={read:{reader:U.ij},write:{writer:U.cW,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}},G={read:{reader:U.ij},write:{writer:U.cW,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}},k={name:"showExcludedLabels",default:!0};let z=J=class extends w.wq{constructor(D){super(D),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(D,F){const B=super.write(D,F);if(F?.origin){if(B.filter){const $=Object.keys(B.filter);if($.length>1||"where"!==$[0])return F.messages?.push(new T.Z("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:F.layer,effect:this})),null}if("showExcludedLabels"in B)return F.messages?.push(new T.Z("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:F.layer,effect:this})),null}return B}clone(){return new J({filter:(0,Z.pC)(this.filter)?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,E._)([(0,se.Cb)({type:N.Z,json:{write:{allowNull:!0,writer(D,F,B,$){const X=D?.write({},$);X&&0!==Object.keys(X).length?(0,x.RB)(B,X,F):(0,x.RB)(B,null,F)}}}})],z.prototype,"filter",void 0),(0,E._)([(0,se.Cb)({json:{write:!0,origins:{"web-map":Q,"portal-item":Q}}})],z.prototype,"includedEffect",void 0),(0,E._)([(0,se.Cb)({json:{write:!0,origins:{"web-map":G,"portal-item":G}}})],z.prototype,"excludedEffect",void 0),(0,E._)([(0,se.Cb)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":k,"portal-item":k}}})],z.prototype,"excludedLabelsVisible",void 0),z=J=(0,E._)([(0,A.j)("esri.layers.support.FeatureEffect")],z);const C=z},84298:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>z});var J,E=g(18100),T=g(6010),w=g(55025),Z=g(63321),x=g(44480),se=g(88684),V=g(53661),W=g(9497),U=(g(83382),g(20891)),N=g(28665);const Q=new Z.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),G=new Z.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let k=J=class extends x.wq{constructor(C){super(C),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(C={}){const{where:D,geometry:F,spatialRelationship:B,timeExtent:$,objectIds:X,units:q,distance:Y}=this;return new N.Z({geometry:(0,se.d9)(F),objectIds:(0,se.d9)(X),spatialRelationship:B,timeExtent:(0,se.d9)($),where:D,units:q,distance:Y,...C})}clone(){const{where:C,geometry:D,spatialRelationship:F,timeExtent:B,objectIds:$,units:X,distance:q}=this;return new J({geometry:(0,se.d9)(D),objectIds:(0,se.d9)($),spatialRelationship:F,timeExtent:(0,se.d9)(B),where:C,units:X,distance:q})}};(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],k.prototype,"where",void 0),(0,E._)([(0,W.Cb)({types:T.qM,json:{write:!0}})],k.prototype,"geometry",void 0),(0,E._)([(0,W.Cb)({type:Q.apiValues,json:{name:"spatialRel",read:{reader:Q.read},write:{allowNull:!1,writer:Q.write,overridePolicy(){return{enabled:(0,V.pC)(this.geometry)}}}}})],k.prototype,"spatialRelationship",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{write:{overridePolicy(C){return{enabled:null!=C&&null!=this.geometry}}}}})],k.prototype,"distance",void 0),(0,E._)([(0,W.Cb)({type:[Number],json:{write:!0}})],k.prototype,"objectIds",void 0),(0,E._)([(0,W.Cb)({type:G.apiValues,json:{read:G.read,write:{writer:G.write,overridePolicy(C){return{enabled:null!=C&&null!=this.geometry}}}}})],k.prototype,"units",void 0),(0,E._)([(0,W.Cb)({type:w.Z,json:{write:!0}})],k.prototype,"timeExtent",void 0),k=J=(0,E._)([(0,U.j)("esri.layers.support.FeatureFilter")],k);const z=k},40337:(He,Pe,g)=>{"use strict";g.d(Pe,{B:()=>V});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let V=class extends T.wq{constructor(){super(...arguments),this.type=null}};(0,E._)([(0,w.Cb)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],V.prototype,"type",void 0),V=(0,E._)([(0,se.j)("esri.layers.support.FeatureReduction")],V)},55792:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(40337);let W=V=class extends se.B{constructor(U){super(U),this.type="selection"}clone(){return new V}};(0,E._)([(0,T.Cb)({type:["selection"]})],W.prototype,"type",void 0),W=V=(0,E._)([(0,x.j)("esri.layers.support.FeatureReductionSelection")],W);const A=W},99295:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>N});var E=g(18100),T=g(94904),w=g(63321),Z=g(44480),x=g(9497),W=(g(83382),g(19420),g(20891));const A=new w.X({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let U=class extends((0,T.J)(Z.wq)){constructor(J){super(J),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,E._)([(0,x.Cb)({json:{write:!0}})],U.prototype,"name",void 0),(0,E._)([(0,x.Cb)({json:{write:!0}})],U.prototype,"description",void 0),(0,E._)([(0,x.Cb)({json:{read:A.read,write:A.write}})],U.prototype,"drawingTool",void 0),(0,E._)([(0,x.Cb)({json:{write:!0}})],U.prototype,"prototype",void 0),(0,E._)([(0,x.Cb)({json:{write:!0}})],U.prototype,"thumbnail",void 0),U=(0,E._)([(0,W.j)("esri.layers.support.FeatureTemplate")],U);const N=U},88419:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var E=g(18100),T=g(94904),w=g(44480),Z=g(9497),V=(g(83382),g(19420),g(66508)),W=g(20891),A=g(70425),U=g(47016),N=g(99295);let J=class extends((0,T.J)(w.wq)){constructor(G){super(G),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(G){const k={};for(const z of Object.keys(G))k[z]=(0,U.im)(G[z]);return k}writeDomains(G,k){const z={};for(const C of Object.keys(G))G[C]&&(z[C]=G[C]?.toJSON());k.domains=z}};(0,E._)([(0,Z.Cb)({json:{write:!0}})],J.prototype,"id",void 0),(0,E._)([(0,Z.Cb)({json:{write:!0}})],J.prototype,"name",void 0),(0,E._)([(0,Z.Cb)({json:{write:!0}})],J.prototype,"domains",void 0),(0,E._)([(0,V.r)("domains")],J.prototype,"readDomains",null),(0,E._)([(0,A.c)("domains")],J.prototype,"writeDomains",null),(0,E._)([(0,Z.Cb)({type:[N.Z],json:{write:!0}})],J.prototype,"templates",void 0),J=(0,E._)([(0,W.j)("esri.layers.support.FeatureType")],J);const Q=J},23973:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var J,E=g(18100),T=g(63321),w=g(44480),Z=g(9497),x=g(83382),V=(g(19420),g(4139)),W=g(66508),A=g(20891),U=g(47016),N=g(43651);const Q=new T.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let G=J=class extends w.wq{constructor(z){super(z),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(z,{description:C}){let D=null;try{D=C?JSON.parse(C):null}catch{}return D?.value??null}readValueType(z,{description:C}){let D=null;try{D=C?JSON.parse(C):null}catch{}return D?Q.fromJSON(D.fieldValueType):null}clone(){return new J({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],G.prototype,"alias",void 0),(0,E._)([(0,Z.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],G.prototype,"defaultValue",void 0),(0,E._)([(0,Z.Cb)()],G.prototype,"description",void 0),(0,E._)([(0,W.r)("description")],G.prototype,"readDescription",null),(0,E._)([(0,Z.Cb)({types:U.V5,json:{read:{reader:U.im},write:!0}})],G.prototype,"domain",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"editable",void 0),(0,E._)([(0,Z.Cb)({type:x.z8,json:{write:!0}})],G.prototype,"length",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],G.prototype,"name",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"nullable",void 0),(0,E._)([(0,V.J)(N.v)],G.prototype,"type",void 0),(0,E._)([(0,Z.Cb)()],G.prototype,"valueType",void 0),(0,E._)([(0,W.r)("valueType",["description"])],G.prototype,"readValueType",null),(0,E._)([(0,Z.Cb)({type:Boolean,json:{read:!1}})],G.prototype,"visible",void 0),G=J=(0,E._)([(0,A.j)("esri.layers.support.Field")],G);const k=G},19346:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>x});var E=g(21230);function w(W){return"oid"===W.type||"esriFieldTypeOID"===W.type}function Z(W){return"global-id"===W.type||"esriFieldTypeGlobalID"===W.type}class x{constructor(A=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!A)return;this.fields=A;const U=[];for(const N of A){const J=N?.name,Q=V(N?.name);if(J&&Q){const G=se(J);this._fieldsMap.set(J,N),this._fieldsMap.set(G,N),this._normalizedFieldsMap.set(Q,N),U.push(G),"date"===(W=N).type||"esriFieldTypeDate"===W.type?(this.dateFields.push(N),this._dateFieldsSet.add(N)):(0,E.H7)(N)&&(this._numericFieldsSet.add(N),this.numericFields.push(N)),w(N)||Z(N)||(N.editable=null==N.editable||!!N.editable,N.nullable=null==N.nullable||!!N.nullable)}}var W;U.sort(),this.uid=U.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const A of this.fields)w(A)||Z(A)||A.nullable||void 0!==(0,E.os)(A)||this._requiredFields.push(A)}return this._requiredFields}has(A){return null!=this.get(A)}get(A){if(!A)return;let U=this._fieldsMap.get(A);return U||(U=this._fieldsMap.get(se(A))??this._normalizedFieldsMap.get(V(A)),U&&this._fieldsMap.set(A,U),U)}isDateField(A){return this._dateFieldsSet.has(this.get(A))}isNumericField(A){return this._numericFieldsSet.has(this.get(A))}normalizeFieldName(A){const U=this.get(A);if(U)return U.name??void 0}}function se(W){return W.trim().toLowerCase()}function V(W){return(0,E.q6)(W)?.toLowerCase()??""}},2547:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(44480),w=g(9497),Z=g(83382),se=(g(19420),g(20891));let W=V=class extends T.wq{constructor(U){super(U),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new V({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,E._)([(0,w.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],W.prototype,"cols",void 0),(0,E._)([(0,w.Cb)({type:Z.z8,json:{write:!0}})],W.prototype,"level",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],W.prototype,"levelValue",void 0),(0,E._)([(0,w.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],W.prototype,"origin",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],W.prototype,"resolution",void 0),(0,E._)([(0,w.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],W.prototype,"rows",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],W.prototype,"scale",void 0),W=V=(0,E._)([(0,se.j)("esri.layers.support.LOD")],W);const A=W},85770:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>ue});var G,E=g(18100),T=g(97708),w=g(63321),Z=g(44480),x=g(88684),se=g(55798),V=g(9497),A=(g(83382),g(66508)),U=g(20891),N=g(70425),Q=(g(19420),g(60802));let k=G=class extends Z.wq{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(te,ie){return ie.value?(0,Q.dI)(ie.value):te}writeExpression(te,ie,fe){null!=this.value&&(te=(0,Q.dI)(this.value)),null!=te&&(ie[fe]=te)}clone(){return new G({expression:this.expression,title:this.title,value:this.value})}};(0,E._)([(0,V.Cb)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],k.prototype,"expression",void 0),(0,E._)([(0,A.r)("expression",["expression","value"])],k.prototype,"readExpression",null),(0,E._)([(0,N.c)("expression")],k.prototype,"writeExpression",null),(0,E._)([(0,V.Cb)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"title",void 0),(0,E._)([(0,V.Cb)({json:{read:!1,write:!1}})],k.prototype,"value",void 0),k=G=(0,E._)([(0,U.j)("esri.layers.support.LabelExpressionInfo")],k);const z=k;var B,C=g(63719),D=g(32682),F=g(55018);const $=new w.X({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function X(te,ie,fe){return{enabled:!(0,C.A2)(fe?.layer)}}function q(te){return!te||"service"!==te.origin&&"map-image"!==te.layer?.type}function ae(te){return!!function Y(te){return"map-image"===te?.type}(te)&&!!te.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}let ne=B=class extends Z.wq{static evaluateWhere(te,ie){const fe=(_e,de,Oe)=>{switch(de){case"=":return _e==Oe;case"<>":return _e!=Oe;case">":return _e>Oe;case">=":return _e>=Oe;case"<":return _e<Oe;case"<=":return _e<=Oe}return!1};try{if(null==te)return!0;const _e=te.split(" ");if(3===_e.length)return fe(ie[_e[0]],_e[1],_e[2]);if(7===_e.length){const de=fe(ie[_e[0]],_e[1],_e[2]),Oe=_e[3],re=fe(ie[_e[4]],_e[5],_e[6]);switch(Oe){case"AND":return de&&re;case"OR":return de||re}}return!1}catch{console.log("Error.: can't parse = "+te)}}constructor(te){super(te),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=D.Rz,this.useCodedValues=void 0,this.where=null}readLabelExpression(te,ie){const fe=ie.labelExpressionInfo;if(!fe||!fe.value&&!fe.expression)return te}writeLabelExpression(te,ie,fe){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)te=(0,Q.z7)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const _e=(0,Q.el)(this.labelExpressionInfo.expression);_e&&(te="["+_e+"]")}null!=te&&(ie[fe]=te)}writeLabelExpressionInfo(te,ie,fe,_e){if(null==te&&null!=this.labelExpression&&q(_e))te=new z({expression:this.getLabelExpressionArcade()});else if(!te)return;const de=te.toJSON(_e);de.expression&&(ie[fe]=de)}writeMaxScale(te,ie){(te||this.minScale)&&(ie.maxScale=te)}writeMinScale(te,ie){(te||this.maxScale)&&(ie.minScale=te)}getLabelExpression(){return(0,Q.hV)(this)}getLabelExpressionArcade(){return(0,Q.YI)(this)}getLabelExpressionSingleField(){return(0,Q.UO)(this)}hash(){return JSON.stringify(this)}clone(){return new B({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,x.d9)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,x.d9)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,E._)([(0,V.Cb)({type:String,json:{write:!0}})],ne.prototype,"name",void 0),(0,E._)([(0,V.Cb)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:X}}}}})],ne.prototype,"allowOverrun",void 0),(0,E._)([(0,V.Cb)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:X}}}}})],ne.prototype,"deconflictionStrategy",void 0),(0,E._)([(0,V.Cb)({type:String,json:{write:{overridePolicy(te,ie,fe){return this.labelExpressionInfo&&"service"===fe?.origin&&ae(fe.layer)?{enabled:!1}:{allowNull:!0}}}}})],ne.prototype,"labelExpression",void 0),(0,E._)([(0,A.r)("labelExpression")],ne.prototype,"readLabelExpression",null),(0,E._)([(0,N.c)("labelExpression")],ne.prototype,"writeLabelExpression",null),(0,E._)([(0,V.Cb)({type:z,json:{write:{overridePolicy:(te,ie,fe)=>function he(te){return q(te)||ae(te?.layer)}(fe)?{allowNull:!0}:{enabled:!1}}}})],ne.prototype,"labelExpressionInfo",void 0),(0,E._)([(0,N.c)("labelExpressionInfo")],ne.prototype,"writeLabelExpressionInfo",null),(0,E._)([(0,V.Cb)({type:$.apiValues,json:{type:$.jsonValues,read:$.read,write:$.write}})],ne.prototype,"labelPlacement",void 0),(0,E._)([(0,V.Cb)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ne.prototype,"labelPosition",void 0),(0,E._)([(0,V.Cb)({type:Number})],ne.prototype,"maxScale",void 0),(0,E._)([(0,N.c)("maxScale")],ne.prototype,"writeMaxScale",null),(0,E._)([(0,V.Cb)({type:Number})],ne.prototype,"minScale",void 0),(0,E._)([(0,N.c)("minScale")],ne.prototype,"writeMinScale",null),(0,E._)([(0,V.Cb)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:X}}}}})],ne.prototype,"repeatLabel",void 0),(0,E._)([(0,V.Cb)({type:Number,cast:se.t_,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:X}}}}})],ne.prototype,"repeatLabelDistance",void 0),(0,E._)([(0,V.Cb)({types:T.yK,json:{origins:{"web-scene":{types:T.S6,write:F.vX,default:null}},write:F.vX,default:null}})],ne.prototype,"symbol",void 0),(0,E._)([(0,V.Cb)({type:Boolean,json:{write:!0}})],ne.prototype,"useCodedValues",void 0),(0,E._)([(0,V.Cb)({type:String,json:{write:!0}})],ne.prototype,"where",void 0),ne=B=(0,E._)([(0,U.j)("esri.layers.support.LabelClass")],ne);const ue=ne},92437:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(97621),w=g(44480),Z=g(9497),V=(g(83382),g(19420),g(20891));let A=W=class extends w.wq{constructor(N){super(N),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new T.Z}clone(){return new W({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],A.prototype,"floorField",void 0),(0,E._)([(0,Z.Cb)({json:{read:!1,write:!1}})],A.prototype,"viewAllMode",void 0),(0,E._)([(0,Z.Cb)({json:{read:!1,write:!1}})],A.prototype,"viewAllLevelIds",void 0),A=W=(0,E._)([(0,V.j)("esri.layers.support.LayerFloorInfo")],A);const U=A},51015:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>X});var F,E=g(18100),T=g(63321),w=g(44480),Z=g(53661),x=g(82769),se=g(9497),V=g(83382),A=(g(19420),g(66508)),U=g(20891),N=g(70425),J=g(35787),Q=g(68230),G=g(6848),k=g(53492),z=g(83550),C=g(2547),D=g(45933);const B=new T.X({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let $=F=class extends w.wq{static create(q={}){const{resolutionFactor:Y=1,scales:ae,size:he=256,spatialReference:ne=Q.Z.WebMercator,numLODs:ue=24}=q;if(!(0,k.JY)(ne)){const Oe=[];if(ae)for(let re=0;re<ae.length;re++){const le=ae[re];Oe.push(new C.Z({level:re,scale:le,resolution:le}))}else{let re=5e-4;for(let le=ue-1;le>=0;le--)Oe.unshift(new C.Z({level:le,scale:re,resolution:re})),re*=2}return new F({dpi:96,lods:Oe,origin:new J.Z(0,0,ne),size:[he,he],spatialReference:ne})}const te=(0,k.C5)(ne),ie=new J.Z(q.origin?{x:q.origin.x,y:q.origin.y,spatialReference:ne}:te?{x:te.origin[0],y:te.origin[1],spatialReference:ne}:{x:0,y:0,spatialReference:ne}),_e=1/(39.37*(0,x.c9)(ne)*96),de=[];if(ae)for(let Oe=0;Oe<ae.length;Oe++){const re=ae[Oe];de.push(new C.Z({level:Oe,scale:re,resolution:re*_e}))}else{let Oe=(0,k.sT)(ne)?512/he*591657527.5917094:256/he*591657527.591555;const re=Math.ceil(ue/Y);de.push(new C.Z({level:0,scale:Oe,resolution:Oe*_e}));for(let le=1;le<re;le++){const ce=Oe/2**Y;de.push(new C.Z({level:le,scale:ce,resolution:ce*_e})),Oe=ce}}return new F({dpi:96,lods:de,origin:ie,size:[he,he],spatialReference:ne})}constructor(q){super(q),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:q,origin:Y}=this;if(q&&Y){const ae=(0,k.C5)(q);return q.isWrappable&&!!ae&&Math.abs(ae.origin[0]-Y.x)<=ae.dx}return!1}readOrigin(q,Y){return J.Z.fromJSON({spatialReference:Y.spatialReference,...q})}set lods(q){let Y=0,ae=0;const he=[],ne=this._levelToLOD={};q&&(Y=-1/0,ae=1/0,q.forEach(ue=>{he.push(ue.scale),Y=ue.scale>Y?ue.scale:Y,ae=ue.scale<ae?ue.scale:ae,ne[ue.level]=ue})),this._set("scales",he),this._set("minScale",Y),this._set("maxScale",ae),this._set("lods",q),this._initializeUpsampleLevels()}readSize(q,Y){return[Y.cols,Y.rows]}writeSize(q,Y){Y.cols=q[0],Y.rows=q[1]}zoomToScale(q){const Y=this.scales;if(q<=0)return Y[0];if(q>=Y.length-1)return Y[Y.length-1];const ae=Math.floor(q);return Y[ae]/(Y[ae]/Y[ae+1])**(q-ae)}scaleToZoom(q){const Y=this.scales,ae=Y.length-1;let he=0;for(;he<ae;he++){const ne=Y[he],ue=Y[he+1];if(ne<=q)return he;if(ue===q)return he+1;if(ne>q&&ue<q)return he+Math.log(ne/q)/Math.log(ne/ue)}return he}snapScale(q,Y=.95){const ae=this.scaleToZoom(q);return ae%Math.floor(ae)>=Y?this.zoomToScale(Math.ceil(ae)):this.zoomToScale(Math.floor(ae))}tileAt(q,Y,ae,he){const ne=this.lodAt(q);if(!ne)return null;let ue,te;if("number"==typeof Y)ue=Y,te=ae;else if((0,k.fS)(Y.spatialReference,this.spatialReference))ue=Y.x,te=Y.y,he=ae;else{const _e=(0,z.iV)(Y,this.spatialReference);if((0,Z.Wi)(_e))return null;ue=_e.x,te=_e.y,he=ae}const ie=ne.resolution*this.size[0],fe=ne.resolution*this.size[1];return he||(he=new D.f(null,0,0,0,(0,G.Ue)())),he.level=q,he.row=Math.floor((this.origin.y-te)/fe+.001),he.col=Math.floor((ue-this.origin.x)/ie+.001),this.updateTileInfo(he),he}updateTileInfo(q,Y=F.ExtrapolateOptions.NONE){let ae=this.lodAt(q.level);if(!ae&&Y===F.ExtrapolateOptions.POWER_OF_TWO){const te=this.lods[this.lods.length-1];te.level<q.level&&(ae=te)}if(!ae)return;const he=q.level-ae.level,ne=ae.resolution*this.size[0]/2**he,ue=ae.resolution*this.size[1]/2**he;q.id=`${q.level}/${q.row}/${q.col}`,q.extent||(q.extent=(0,G.Ue)()),q.extent[0]=this.origin.x+q.col*ne,q.extent[1]=this.origin.y-(q.row+1)*ue,q.extent[2]=q.extent[0]+ne,q.extent[3]=q.extent[1]+ue}upsampleTile(q){const Y=this._upsampleLevels[q.level];return!(!Y||-1===Y.parentLevel||(q.level=Y.parentLevel,q.row=Math.floor(q.row/Y.factor+.001),q.col=Math.floor(q.col/Y.factor+.001),this.updateTileInfo(q),0))}getTileBounds(q,Y){const ae=this.lodAt(Y.level);if(null==ae)return null;const{resolution:he}=ae,ne=he*this.size[0],ue=he*this.size[1];return q[0]=this.origin.x+Y.col*ne,q[1]=this.origin.y-(Y.row+1)*ue,q[2]=q[0]+ne,q[3]=q[1]+ue,q}lodAt(q){return this._levelToLOD?.[q]??null}clone(){return F.fromJSON(this.write({}))}getOrCreateCompatible(q,Y){if(256===this.size[0]&&256===this.size[1])return 256===q?this:null;const ae=[],he=this.lods.length;for(let ne=0;ne<he;ne++){const ue=this.lods[ne];ae.push(new C.Z({level:ue.level,scale:ue.scale,resolution:ue.resolution*Y}))}return new F({size:[q,q],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:ae})}_initializeUpsampleLevels(){const q=this.lods;this._upsampleLevels=[];let Y=null;for(let ae=0;ae<q.length;ae++){const he=q[ae];this._upsampleLevels[he.level]={parentLevel:Y?Y.level:-1,factor:Y?Y.resolution/he.resolution:0},Y=he}}};var q,Y;(0,E._)([(0,se.Cb)({type:Number,json:{write:!0}})],$.prototype,"compressionQuality",void 0),(0,E._)([(0,se.Cb)({type:Number,json:{write:!0}})],$.prototype,"dpi",void 0),(0,E._)([(0,se.Cb)({type:String,json:{read:B.read,write:B.write,origins:{"web-scene":{read:!1,write:!1}}}})],$.prototype,"format",void 0),(0,E._)([(0,se.Cb)({readOnly:!0})],$.prototype,"isWrappable",null),(0,E._)([(0,se.Cb)({type:J.Z,json:{write:!0}})],$.prototype,"origin",void 0),(0,E._)([(0,A.r)("origin")],$.prototype,"readOrigin",null),(0,E._)([(0,se.Cb)({type:[C.Z],value:null,json:{write:!0}})],$.prototype,"lods",null),(0,E._)([(0,se.Cb)({readOnly:!0})],$.prototype,"minScale",void 0),(0,E._)([(0,se.Cb)({readOnly:!0})],$.prototype,"maxScale",void 0),(0,E._)([(0,se.Cb)({readOnly:!0})],$.prototype,"scales",void 0),(0,E._)([(0,se.Cb)({cast:q=>Array.isArray(q)?q:"number"==typeof q?[q,q]:[256,256]})],$.prototype,"size",void 0),(0,E._)([(0,A.r)("size",["rows","cols"])],$.prototype,"readSize",null),(0,E._)([(0,N.c)("size",{cols:{type:V.z8},rows:{type:V.z8}})],$.prototype,"writeSize",null),(0,E._)([(0,se.Cb)({type:Q.Z,json:{write:!0}})],$.prototype,"spatialReference",void 0),$=F=(0,E._)([(0,U.j)("esri.layers.support.TileInfo")],$),(Y=(q=$||($={})).ExtrapolateOptions||(q.ExtrapolateOptions={}))[Y.NONE=0]="NONE",Y[Y.POWER_OF_TWO=1]="POWER_OF_TWO";const X=$},45933:(He,Pe,g)=>{"use strict";g.d(Pe,{f:()=>E});class E{constructor(w,Z,x,se,V){this.id=w,this.level=Z,this.row=x,this.col=se,this.extent=V}}},59657:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>z});var E=g(18100),T=g(55025),w=g(41240),Z=g(94904),x=g(44480),se=g(53661),V=g(9497),U=(g(83382),g(19420),g(66508)),N=g(20891),J=g(70425),Q=g(27655);function G(C,D){return w.Z.fromJSON({value:C,unit:D})}let k=class extends((0,Z.J)(x.wq)){constructor(C){super(C),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(C,D){if(!D.timeExtent||!Array.isArray(D.timeExtent)||2!==D.timeExtent.length)return null;const F=new Date(D.timeExtent[0]),B=new Date(D.timeExtent[1]);return new T.Z({start:F,end:B})}writeFullTimeExtent(C,D){D.timeExtent=C&&(0,se.pC)(C.start)&&(0,se.pC)(C.end)?[C.start.getTime(),C.end.getTime()]:null}readInterval(C,D){return D.timeInterval&&D.timeIntervalUnits?G(D.timeInterval,D.timeIntervalUnits):D.defaultTimeInterval&&D.defaultTimeIntervalUnits?G(D.defaultTimeInterval,D.defaultTimeIntervalUnits):null}writeInterval(C,D){D.timeInterval=C?.toJSON().value??null,D.timeIntervalUnits=C?.toJSON().unit??null}};(0,E._)([(0,V.Cb)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],k.prototype,"cumulative",void 0),(0,E._)([(0,V.Cb)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],k.prototype,"endField",void 0),(0,E._)([(0,V.Cb)({type:T.Z,json:{write:{enabled:!0,allowNull:!0}}})],k.prototype,"fullTimeExtent",void 0),(0,E._)([(0,U.r)("fullTimeExtent",["timeExtent"])],k.prototype,"readFullTimeExtent",null),(0,E._)([(0,J.c)("fullTimeExtent")],k.prototype,"writeFullTimeExtent",null),(0,E._)([(0,V.Cb)({type:Boolean,json:{write:!0}})],k.prototype,"hasLiveData",void 0),(0,E._)([(0,V.Cb)({type:w.Z,json:{write:{enabled:!0,allowNull:!0}}})],k.prototype,"interval",void 0),(0,E._)([(0,U.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],k.prototype,"readInterval",null),(0,E._)([(0,J.c)("interval")],k.prototype,"writeInterval",null),(0,E._)([(0,V.Cb)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],k.prototype,"startField",void 0),(0,E._)([(0,V.Cb)({type:Q.Z,json:{write:{enabled:!0,allowNull:!0}}})],k.prototype,"timeReference",void 0),(0,E._)([(0,V.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],k.prototype,"trackIdField",void 0),(0,E._)([(0,V.Cb)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],k.prototype,"useTime",void 0),k=(0,E._)([(0,N.j)("esri.layers.support.TimeInfo")],k);const z=k},4583:(He,Pe,g)=>{"use strict";g.d(Pe,{B5:()=>A,DR:()=>N,G:()=>D,M8:()=>G,Nm:()=>k,Qc:()=>U,XG:()=>z,a7:()=>Q,ld:()=>J,wH:()=>C});var E=g(53661),T=g(55050),w=g(29184);const Z={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},x=Object.values(Z),se=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${x.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),V=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${x.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),W=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function A(B){return!!se.test(B)}function U(B){if((0,E.Wi)(B))return null;const $=(0,T.mN)(B),X=$.path.match(se)||$.path.match(V);if(!X)return null;const[,q,Y,ae,he]=X,ne=Y.indexOf("/");return{title:J(-1!==ne?Y.slice(ne+1):Y),serverType:Z[ae.toLowerCase()],sublayer:null!=he&&""!==he?parseInt(he,10):null,url:{path:q}}}function N(B){const $=(0,T.mN)(B).path.match(W);return $?{serviceUrl:$[1],sublayerId:Number($[2])}:null}function J(B){return(B=B.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+B.slice(1)}function Q(B,$){const X=[];if(B){const q=U(B);(0,E.pC)(q)&&q.title&&X.push(q.title)}if($){const q=J($);X.push(q)}if(2===X.length){if(X[0].toLowerCase().includes(X[1].toLowerCase()))return X[0];if(X[1].toLowerCase().includes(X[0].toLowerCase()))return X[1]}return X.join(" - ")}function G(B){if(!B)return!1;const ae=(B=B.toLowerCase()).includes(".arcgis.com/"),he=B.includes("//services")||B.includes("//tiles")||B.includes("//features");return ae&&he}function k(B,$){return B&&(0,T.Qj)((0,T.Hu)(B,$))}function z(B){let{url:$}=B;if(!$)return{url:$};$=(0,T.Hu)($,B.logger);const X=(0,T.mN)($),q=U(X.path);let Y;if((0,E.pC)(q))null!=q.sublayer&&null==B.layer.layerId&&(Y=q.sublayer),$=q.url.path;else if(B.nonStandardUrlAllowed){const ae=N(X.path);(0,E.pC)(ae)&&($=ae.serviceUrl,Y=ae.sublayerId)}return{url:(0,T.Qj)($),layerId:Y}}function C(B,$,X,q,Y){(0,w.w)($,q,"url",Y),q.url&&null!=B.layerId&&(q.url=(0,T.v_)(q.url,X,B.layerId.toString()))}function D(B){if(!B)return!1;const $=B.toLowerCase(),X=$.includes("/services/"),q=$.includes("/mapserver/wmsserver"),Y=$.includes("/imageserver/wmsserver"),ae=$.includes("/wmsserver");return X&&(q||Y||ae)}},51299:(He,Pe,g)=>{"use strict";g.d(Pe,{qG:()=>ae,PV:()=>B,id:()=>ne,iR:()=>C,rn:()=>F,rT:()=>ie,u1:()=>te,rO:()=>ue,Oh:()=>q,bT:()=>Y,C_:()=>z,Lx:()=>$,vg:()=>he,YI:()=>k,HQ:()=>D});var E=g(55025),T=g(10465),w=g(68230),Z=g(29184),x=g(53661),V=(g(30801),g(82588)),Q=g(13691),G=g(7721);const k={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},z={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(fe,_e)=>!_e.disablePopup},write:{enabled:!0,writer(fe,_e,de){_e[de]=!fe}}}},C={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},D={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Z.w}}},F={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},B={value:null,type:Q.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function $(fe){return{type:fe,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const X={write:!0,read:!0},q={type:Number,json:{origins:{"web-document":X,"portal-item":{write:!0}}}},Y={...q,json:{...q.json,origins:{"web-document":{...X,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(fe,_e,de)=>de&&"service"!==de.origin||!_e.drawingInfo||void 0===_e.drawingInfo.transparency?_e.layerDefinition&&_e.layerDefinition.drawingInfo&&void 0!==_e.layerDefinition.drawingInfo.transparency?(0,G.b)(_e.layerDefinition.drawingInfo.transparency):void 0:(0,G.b)(_e.drawingInfo.transparency)}}},ae={type:E.Z,readOnly:!0,get(){if(!this.layer?.timeInfo)return null;const{datesInUnknownTimezone:fe,timeOffset:_e,useViewTime:de}=this.layer,Oe=this.view?.timeExtent;let re=this.layer.timeExtent;fe&&(re=function J(fe){if(!fe)return fe;const{start:_e,end:de}=fe;return new E.Z({start:(0,x.pC)(_e)?(0,V.Nm)(_e,_e.getTimezoneOffset(),"minutes"):_e,end:(0,x.pC)(de)?(0,V.Nm)(de,de.getTimezoneOffset(),"minutes"):de})}(re));let le=de?Oe&&re?Oe.intersection(re):Oe||re:re;if(!le||le.isEmpty||le.isAllTime)return le;_e&&(le=le.offset(-_e.value,_e.unit)),fe&&(le=function N(fe){if(!fe)return fe;const{start:_e,end:de}=fe;return new E.Z({start:(0,x.pC)(_e)?(0,V.Nm)(_e,-_e.getTimezoneOffset(),"minutes"):_e,end:(0,x.pC)(de)?(0,V.Nm)(de,-de.getTimezoneOffset(),"minutes"):de})}(le));const ce=this._get("timeExtent");return le.equals(ce)?ce:le}},he={type:T.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(fe,_e)=>{const de=T.Z.fromJSON(fe);return null!=_e.spatialReference&&"object"==typeof _e.spatialReference&&(de.spatialReference=w.Z.fromJSON(_e.spatialReference)),de}}}},read:!1}},ne={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},ue={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},te={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},ie={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}}},47016:(He,Pe,g)=>{"use strict";g.d(Pe,{im:()=>ue,V5:()=>ne}),g(67087);var U,T=g(18100),w=g(88684),Z=g(9497),se=(g(83382),g(4139)),V=g(20891),W=g(44480);g(19420);let N=U=class extends W.wq{constructor(te){super(te),this.name=null,this.code=null}clone(){return new U({name:this.name,code:this.code})}};(0,T._)([(0,Z.Cb)({type:String,json:{write:!0}})],N.prototype,"name",void 0),(0,T._)([(0,Z.Cb)({type:[String,Number],json:{write:!0}})],N.prototype,"code",void 0),N=U=(0,T._)([(0,V.j)("esri.layers.support.CodedValue")],N);const Q=new(g(63321).X)({inherited:"inherited",codedValue:"coded-value",range:"range"});let G=class extends W.wq{constructor(te){super(te),this.name=null,this.type=null}};(0,T._)([(0,Z.Cb)({type:String,json:{write:!0}})],G.prototype,"name",void 0),(0,T._)([(0,se.J)(Q)],G.prototype,"type",void 0),G=(0,T._)([(0,V.j)("esri.layers.support.Domain")],G);const k=G;var z;let C=z=class extends k{constructor(te){super(te),this.codedValues=null,this.type="coded-value"}getName(te){let ie=null;if(this.codedValues){const fe=String(te);this.codedValues.some(_e=>(String(_e.code)===fe&&(ie=_e.name),!!ie))}return ie}clone(){return new z({codedValues:(0,w.d9)(this.codedValues),name:this.name})}};(0,T._)([(0,Z.Cb)({type:[N],json:{write:!0}})],C.prototype,"codedValues",void 0),(0,T._)([(0,se.J)({codedValue:"coded-value"})],C.prototype,"type",void 0),C=z=(0,T._)([(0,V.j)("esri.layers.support.CodedValueDomain")],C);const D=C;var $;g(28191),g(32995);let X=$=class extends k{constructor(te){super(te),this.type="inherited"}clone(){return new $}};(0,T._)([(0,se.J)({inherited:"inherited"})],X.prototype,"type",void 0),X=$=(0,T._)([(0,V.j)("esri.layers.support.InheritedDomain")],X);const q=X;var Y;let ae=Y=class extends k{constructor(te){super(te),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new Y({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,T._)([(0,Z.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(te,ie)=>ie.range&&ie.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(te,ie,fe){ie[fe]=[this.minValue||0,te]}}}})],ae.prototype,"maxValue",void 0),(0,T._)([(0,Z.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(te,ie)=>ie.range&&ie.range[0]},write:{target:"range",writer(te,ie,fe){ie[fe]=[te,this.maxValue||0]}}}})],ae.prototype,"minValue",void 0),(0,T._)([(0,se.J)({range:"range"})],ae.prototype,"type",void 0),ae=Y=(0,T._)([(0,V.j)("esri.layers.support.RangeDomain")],ae);const he=ae,ne={key:"type",base:k,typeMap:{range:ae,"coded-value":D,inherited:q}};function ue(te){if(!te||!te.type)return null;switch(te.type){case"range":return he.fromJSON(te);case"codedValue":return D.fromJSON(te);case"inherited":return q.fromJSON(te)}return null}},86456:(He,Pe,g)=>{"use strict";g.d(Pe,{C9:()=>de,Ci:()=>$,FV:()=>F,Fr:()=>N,JD:()=>J,JY:()=>ge,Jj:()=>C,KE:()=>te,SU:()=>q,VG:()=>ne,Y5:()=>k,gG:()=>re,kZ:()=>Te,kp:()=>fe,nU:()=>ye,rP:()=>ce,rk:()=>ve,sX:()=>$e,tD:()=>ae});var E=g(71670),T=g(84489),w=g(32995),Z=g(63321),x=g(53661),se=g(96204),V=g(63719),W=g(35981),A=g(28665),U=g(76356);const N=new Z.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});function J(Ce,Ie,je,Je){return Q.apply(this,arguments)}function Q(){return(Q=(0,E.Z)(function*(Ce,Ie,je,Je){const oe=yield Ae(Ce);if(yield G(Ce,Ie,Je),!oe.addAttachment)throw new w.Z(Je,"Layer source does not support addAttachment capability");return oe.addAttachment(Ie,je)})).apply(this,arguments)}function G(Ce,Ie,je){const{attributes:Je}=Ie,{objectIdField:oe}=Ce;return Ce.get("capabilities.data.supportsAttachment")?Ie?Je?oe&&Je[oe]?Promise.resolve():Promise.reject(new w.Z(je,`feature is missing the identifying attribute ${oe}`)):Promise.reject(new w.Z(je,"'attributes' are required on a feature to query attachments")):Promise.reject(new w.Z(je,"A feature is required to add/delete/update attachments")):Promise.reject(new w.Z(je,"this layer doesn't support attachments"))}function k(Ce,Ie,je,Je,oe){return z.apply(this,arguments)}function z(){return(z=(0,E.Z)(function*(Ce,Ie,je,Je,oe){const be=yield Ae(Ce);if(yield G(Ce,Ie,oe),!be.updateAttachment)throw new w.Z(oe,"Layer source does not support updateAttachment capability");return be.updateAttachment(Ie,je,Je)})).apply(this,arguments)}function C(Ce,Ie,je){return D.apply(this,arguments)}function D(){return(D=(0,E.Z)(function*(Ce,Ie,je){const Je=yield Promise.all([g.e(8592),g.e(6458)]).then(g.bind(g,66458)),oe=yield Ce.load();return Je.applyEdits(oe,oe.source,Ie,je)})).apply(this,arguments)}function F(Ce,Ie,je,Je){return B.apply(this,arguments)}function B(){return(B=(0,E.Z)(function*(Ce,Ie,je,Je){const oe=yield Ae(Ce);if(yield G(Ce,Ie,Je),!oe.deleteAttachments)throw new w.Z(Je,"Layer source does not support deleteAttachments capability");return oe.deleteAttachments(Ie,je)})).apply(this,arguments)}function $(Ce,Ie,je){return X.apply(this,arguments)}function X(){return(X=(0,E.Z)(function*(Ce,Ie,je){const Je=(yield Ce.load({signal:Ie?.signal})).source;if(!Je.fetchRecomputedExtents)throw new w.Z(je,"Layer source does not support fetchUpdates capability");return Je.fetchRecomputedExtents(Ie)})).apply(this,arguments)}function q(Ce,Ie,je,Je){return Y.apply(this,arguments)}function Y(){return(Y=(0,E.Z)(function*(Ce,Ie,je,Je){Ie=W.Z.from(Ie),yield Ce.load();const oe=Ce.source,be=Ce.capabilities;if(!be?.data?.supportsAttachment)throw new w.Z(Je,"this layer doesn't support attachments");const{attachmentTypes:Ue,objectIds:Fe,globalIds:Ke,num:Ve,size:tt,start:rt,where:Ne}=Ie;if(!be?.operations?.supportsQueryAttachments&&(Ue?.length>0||Ke?.length>0||tt?.length>0||Ve||rt||Ne))throw new w.Z(Je,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",Ie);if(!(Fe?.length||Ke?.length||Ne))throw new w.Z(Je,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",Ie);if(!oe.queryAttachments)throw new w.Z(Je,"Layer source does not support queryAttachments capability",Ie);return oe.queryAttachments(Ie)})).apply(this,arguments)}function ae(Ce,Ie,je,Je){return he.apply(this,arguments)}function he(){return(he=(0,E.Z)(function*(Ce,Ie,je,Je){const oe=yield Ae(Ce);if(!oe.queryObjectIds)throw new w.Z(Je,"Layer source does not support queryObjectIds capability");return oe.queryObjectIds(A.Z.from(Ie)??Ce.createQuery(),je)})).apply(this,arguments)}function ne(Ce,Ie,je,Je){return ue.apply(this,arguments)}function ue(){return(ue=(0,E.Z)(function*(Ce,Ie,je,Je){const oe=yield Ae(Ce);if(!oe.queryFeatureCount)throw new w.Z(Je,"Layer source does not support queryFeatureCount capability");return oe.queryFeatureCount(A.Z.from(Ie)??Ce.createQuery(),je)})).apply(this,arguments)}function te(Ce,Ie,je,Je){return ie.apply(this,arguments)}function ie(){return(ie=(0,E.Z)(function*(Ce,Ie,je,Je){const oe=yield Ae(Ce);if(!oe.queryExtent)throw new w.Z(Je,"Layer source does not support queryExtent capability");return oe.queryExtent(A.Z.from(Ie)??Ce.createQuery(),je)})).apply(this,arguments)}function fe(Ce,Ie,je,Je){return _e.apply(this,arguments)}function _e(){return(_e=(0,E.Z)(function*(Ce,Ie,je,Je){const oe=yield Ae(Ce);if(!oe.queryRelatedFeatures)throw new w.Z(Je,"Layer source does not support queryRelatedFeatures capability");return oe.queryRelatedFeatures(U.default.from(Ie),je)})).apply(this,arguments)}function de(Ce,Ie,je,Je){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,E.Z)(function*(Ce,Ie,je,Je){const oe=yield Ae(Ce);if(!oe.queryRelatedFeaturesCount)throw new w.Z(Je,"Layer source does not support queryRelatedFeaturesCount capability");return oe.queryRelatedFeaturesCount(U.default.from(Ie),je)})).apply(this,arguments)}function re(Ce){return le.apply(this,arguments)}function le(){return(le=(0,E.Z)(function*(Ce){const Ie=Ce.source;if(Ie?.refresh)try{const{dataChanged:je,updates:Je}=yield Ie.refresh();if((0,x.pC)(Je)&&(Ce.sourceJSON={...Ce.sourceJSON,...Je},Ce.read(Je,{origin:"service",url:Ce.parsedUrl})),je)return!0}catch{}if(Ce.definitionExpression)try{return(yield(0,se.E)(Ce.definitionExpression,Ce.fieldsIndex)).hasDateFunctions}catch{}return!1})).apply(this,arguments)}function ce(Ce){const Ie=new A.Z,je=Ce.get("capabilities.data"),Je=Ce.get("capabilities.query");Ie.historicMoment=Ce.historicMoment,Ie.gdbVersion=Ce.gdbVersion,Ie.returnGeometry=!0,Je&&(Ie.compactGeometryEnabled=Je.supportsCompactGeometry,Ie.defaultSpatialReferenceEnabled=Je.supportsDefaultSpatialReference),je&&(je.supportsZ&&null!=Ce.returnZ&&(Ie.returnZ=Ce.returnZ),je.supportsM&&null!=Ce.returnM&&(Ie.returnM=Ce.returnM)),Ie.outFields=["*"];const{timeOffset:oe,timeExtent:be}=Ce;return Ie.timeExtent=null!=oe&&null!=be?be.offset(-oe.value,oe.unit):be||null,Ie.multipatchOption="multipatch"===Ce.geometryType?"xyFootprint":null,Ie}function ve(Ce){const{globalIdField:Ie,fields:je}=Ce;if(Ie)return Ie;if(je)for(const Je of je)if("esriFieldTypeGlobalID"===Je.type)return Je.name}function Te(Ce){const{objectIdField:Ie,fields:je}=Ce;if(Ie)return Ie;if(je)for(const Je of je)if("esriFieldTypeOID"===Je.type)return Je.name}function ge(Ce){return Ce.currentVersion?Ce.currentVersion:Ce.hasOwnProperty("capabilities")||Ce.hasOwnProperty("drawingInfo")||Ce.hasOwnProperty("hasAttachments")||Ce.hasOwnProperty("htmlPopupType")||Ce.hasOwnProperty("relationships")||Ce.hasOwnProperty("timeInfo")||Ce.hasOwnProperty("typeIdField")||Ce.hasOwnProperty("types")?10:9.3}function Ae(Ce){return De.apply(this,arguments)}function De(){return(De=(0,E.Z)(function*(Ce){return(yield Ce.load()).source})).apply(this,arguments)}function me(){return(me=(0,E.Z)(function*(Ce,Ie){if(!T.id||T.id.findCredential(Ce))return;let je;try{const Je=yield(0,V.oP)(Ce,Ie);Je&&(je=yield T.id.checkSignInStatus(`${Je}/sharing`))}catch{}if(je)try{const Je=(0,x.pC)(Ie)?Ie.signal:null;yield T.id.getCredential(Ce,{signal:Je})}catch{}})).apply(this,arguments)}function ye(Ce,Ie){return we.apply(this,arguments)}function we(){return we=(0,E.Z)(function*(Ce,Ie){const je=Ce.parsedUrl?.path;if(!je)return;const Je=Ce.editFieldsInfo;(Ce.userHasUpdateItemPrivileges||Ce.userHasFullEditingPrivileges&&Ce.capabilities.operations.supportsEditing||Je?.creatorField||Je?.editorField)&&(yield function Se(Ce,Ie){return me.apply(this,arguments)}(je,Ie))}),we.apply(this,arguments)}function $e(Ce){return!Ce.sourceJSON?.isMultiServicesView&&(Ce.userHasUpdateItemPrivileges||Ce.editingEnabled)}},86465:(He,Pe,g)=>{"use strict";g.d(Pe,{v:()=>x});var E=g(28191),T=g(23973),w=g(19346),Z=g(21230);function x(){return{fields:{type:[T.Z],value:null},fieldsIndex:{readOnly:!0,get(){return new w.Z(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(se){this._userOutFields=se,this.notifyChange("outFields")},get:function(){const se=this._userOutFields;if(!se||!se.length)return null;if(se.includes("*"))return["*"];if(!this.fields)return se;for(const V of se)this.fieldsIndex?.has(V)||E.Z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${V} found in outFields`,{layer:this,outFields:se});return(0,Z.Q0)(this.fieldsIndex,se)}}}}},43651:(He,Pe,g)=>{"use strict";g.d(Pe,{v:()=>T});const T=new(g(63321).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},21230:(He,Pe,g)=>{"use strict";g.d(Pe,{io:()=>he,vl:()=>re,ZV:()=>ve,AB:()=>q,gd:()=>X,Ll:()=>De,Mu:()=>Ue,Qj:()=>me,R9:()=>Nt,Q0:()=>$,YN:()=>C,UF:()=>F,O5:()=>ie,CH:()=>je,os:()=>tt,H7:()=>Rt,Ec:()=>Os,qN:()=>qt,q6:()=>G,Pz:()=>as,Lk:()=>Y,Qc:()=>ys,vP:()=>Vt});var x,pt,E=g(71670),T=g(32995),w=g(53661),Z=g(44054);(pt=x||(x={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",pt.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var W=g(77238);const A=/^([0-9])/,U=/[^a-z0-9_\u0080-\uffff]/gi,N=/_{2,}/g,J=/^_/,Q=/_$/;function G(pt){return null==pt?null:pt.trim().replace(U,"_").replace(N,"_").replace(J,"").replace(Q,"").replace(A,"F$1")||null}const k=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],z=["field","normalizationField"];function C(pt,Pt){if(null!=pt&&null!=Pt)for(const jt of Array.isArray(pt)?pt:[pt])if(D(k,jt,Pt),"visualVariables"in jt&&jt.visualVariables)for(const us of jt.visualVariables)D(z,us,Pt)}function D(pt,Pt,jt){if(pt)for(const us of pt){const et=(0,Z.hS)(us,Pt),At=et&&"function"!=typeof et&&jt.get(et);At&&(0,Z.RB)(us,At.name,Pt)}}function F(pt,Pt){if(null!=pt&&Pt?.fields?.length)if("startField"in pt){const jt=Pt.get(pt.startField),us=Pt.get(pt.endField);pt.startField=jt?.name??null,pt.endField=us?.name??null}else{const jt=Pt.get(pt.startTimeField),us=Pt.get(pt.endTimeField);pt.startTimeField=jt?.name??null,pt.endTimeField=us?.name??null}}const B=new Set;function $(pt,Pt){return pt&&Pt?(B.clear(),X(B,pt,Pt),Array.from(B).sort()):[]}function X(pt,Pt,jt){if(jt)if(Pt?.fields?.length)if(jt.includes("*"))for(const{name:us}of Pt.fields)pt.add(us);else for(const us of jt)q(pt,Pt,us);else{if(jt.includes("*"))return pt.clear(),void pt.add("*");for(const us of jt)null!=us&&pt.add(us)}}function q(pt,Pt,jt){if("string"==typeof jt)if(Pt){const us=Pt.get(jt);us&&pt.add(us.name)}else pt.add(jt)}function Y(pt,Pt){return(0,w.Wi)(Pt)||(0,w.Wi)(pt)?[]:Pt.includes("*")?(pt.fields??[]).map(jt=>jt.name):Pt}function he(pt,Pt,jt){return ne.apply(this,arguments)}function ne(){return ne=(0,E.Z)(function*(pt,Pt,jt){if(!jt)return;const{arcadeUtils:us}=yield(0,W.LC)(),et=us.extractFieldNames(jt,Pt?.fields?.map(At=>At.name));for(const At of et)q(pt,Pt,At)}),ne.apply(this,arguments)}function ue(pt,Pt,jt){return te.apply(this,arguments)}function te(){return te=(0,E.Z)(function*(pt,Pt,jt){if(jt&&"1=1"!==jt){const us=(yield Promise.all([g.e(753),g.e(3918)]).then(g.bind(g,30753))).WhereClause.create(jt,Pt);if(!us.isStandardized)throw new T.Z("fieldUtils:collectFilterFields","Where clause is not standardized",{where:jt});X(pt,Pt,us.fieldNames)}}),te.apply(this,arguments)}function ie({displayField:pt,fields:Pt}){return pt||(Pt&&Pt.length?_e(Pt,"name-or-title")||_e(Pt,"unique-identifier")||_e(Pt,"type-or-category")||function fe(pt){for(const Pt of pt){if(!Pt||!Pt.name)continue;const jt=Pt.name.toLowerCase();if(jt.includes("name")||jt.includes("title"))return Pt.name}return null}(Pt):null)}function _e(pt,Pt){for(const jt of pt)if(jt&&jt.valueType&&jt.valueType===Pt)return jt.name;return null}function re(pt,Pt){return le.apply(this,arguments)}function le(){return le=(0,E.Z)(function*(pt,Pt){if(!Pt)return;const jt=Pt.elevationInfo?.featureExpressionInfo;return jt?jt.collectRequiredFields(pt,Pt.fieldsIndex):void 0}),le.apply(this,arguments)}function ve(pt,Pt,jt){return Te.apply(this,arguments)}function Te(){return Te=(0,E.Z)(function*(pt,Pt,jt){if(!Pt||!jt||!("fields"in jt))return;const us=[];us.push(function ge(pt,Pt,jt){return Ae.apply(this,arguments)}(pt,Pt,jt.popupTemplate)),jt.fields&&us.push(...jt.fields.map(function(){var At=(0,E.Z)(function*(Bt){return function ce(pt,Pt,jt){jt.onStatisticExpression?he(pt,Pt,jt.onStatisticExpression.expression):pt.add(jt.onStatisticField)}(pt,Pt.fieldsIndex,Bt)});return function(Bt){return At.apply(this,arguments)}}())),yield Promise.all(us)}),Te.apply(this,arguments)}function Ae(){return Ae=(0,E.Z)(function*(pt,Pt,jt){const us=[];jt?.expressionInfos&&us.push(...jt.expressionInfos.map(At=>he(pt,Pt.fieldsIndex,At.expression)));const et=jt?.content;if(Array.isArray(et))for(const At of et)"expression"===At.type&&At.expressionInfo&&us.push(he(pt,Pt.fieldsIndex,At.expressionInfo.expression));yield Promise.all(us)}),Ae.apply(this,arguments)}function De(pt,Pt,jt){return Se.apply(this,arguments)}function Se(){return Se=(0,E.Z)(function*(pt,Pt,jt){Pt&&(Pt.timeInfo&&(0,w.pC)(jt)&&jt.timeExtent&&X(pt,Pt.fieldsIndex,[Pt.timeInfo.startField,Pt.timeInfo.endField]),Pt.floorInfo&&X(pt,Pt.fieldsIndex,[Pt.floorInfo.floorField]),(0,w.pC)(jt)&&(0,w.pC)(jt.where)&&(yield ue(pt,Pt.fieldsIndex,jt.where)))}),Se.apply(this,arguments)}function me(pt,Pt,jt){return ye.apply(this,arguments)}function ye(){return ye=(0,E.Z)(function*(pt,Pt,jt){Pt&&jt&&(yield Promise.all(jt.map(us=>function we(pt,Pt,jt){return $e.apply(this,arguments)}(pt,Pt,us))))}),ye.apply(this,arguments)}function $e(){return $e=(0,E.Z)(function*(pt,Pt,jt){Pt&&jt&&(jt.valueExpression?yield he(pt,Pt.fieldsIndex,jt.valueExpression):jt.field&&q(pt,Pt.fieldsIndex,jt.field))}),$e.apply(this,arguments)}function je(pt){if(!pt)return[];const Pt="editFieldsInfo"in pt&&pt.editFieldsInfo;return Pt?$(pt.fieldsIndex,[Pt&&Pt.creatorField,Pt&&Pt.creationDateField,Pt&&Pt.editorField,Pt&&Pt.editDateField]):[]}function Ue(pt,Pt){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,E.Z)(function*(pt,Pt){const{labelingInfo:jt,fieldsIndex:us}=Pt;jt&&jt.length&&(yield Promise.all(jt.map(et=>function Ke(pt,Pt,jt){return Ve.apply(this,arguments)}(pt,us,et))))}),Fe.apply(this,arguments)}function Ve(){return Ve=(0,E.Z)(function*(pt,Pt,jt){if(!jt)return;const us=jt.getLabelExpression(),et=jt.where;if("arcade"===us.type)yield he(pt,Pt,us.expression);else{const At=us.expression.match(/{[^}]*}/g);At&&At.forEach(Bt=>{q(pt,Pt,Bt.slice(1,-1))})}yield ue(pt,Pt,et)}),Ve.apply(this,arguments)}function tt(pt){const Pt=pt.defaultValue;return void 0!==Pt&&ot(pt,Pt)?Pt:pt.nullable?null:void 0}function rt(pt){return"number"==typeof pt&&!isNaN(pt)&&isFinite(pt)}function Ne(pt){return null===pt||rt(pt)}const qe="isInteger"in Number?Number.isInteger:pt=>"number"==typeof pt&&isFinite(pt)&&Math.floor(pt)===pt;function ft(pt){return null===pt||qe(pt)}function Xe(pt){return null!=pt&&"string"==typeof pt}function dt(pt){return null===pt||Xe(pt)}function Qe(){return!0}function ot(pt,Pt){let jt;switch(pt.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":jt=pt.nullable?ft:qe;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":jt=pt.nullable?Ne:rt;break;case"string":case"esriFieldTypeString":jt=pt.nullable?dt:Xe;break;default:jt=Qe}return 1===arguments.length?jt:jt(Pt)}const _t=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function Rt(pt){return null!=pt&&_t.has(pt.type)}function qt(pt){return null!=pt&&("string"===pt.type||"esriFieldTypeString"===pt.type)}var vs,Wt;function as(pt){return null==pt||"number"==typeof pt&&isNaN(pt)?null:pt}function ys(pt,Pt){return null==pt||pt.nullable&&null===Pt?null:Rt(pt)&&!function bt(pt,Pt){const jt="string"==typeof pt?nt(pt):pt;if(!jt)return!1;const us=jt.min,et=jt.max;return jt.isInteger?qe(Pt)&&Pt>=us&&Pt<=et:Pt>=us&&Pt<=et}(pt.type,Number(Pt))?vs.OUT_OF_RANGE:ot(pt,Pt)?pt.domain?function se(pt,Pt){switch(pt.type){case"range":{const jt="range"in pt?pt.range[0]:pt.minValue,us="range"in pt?pt.range[1]:pt.maxValue;if(null!=jt&&+Pt<jt||null!=us&&+Pt>us)return x.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==pt.codedValues||pt.codedValues.every(jt=>null==jt||jt.code!==Pt))return x.INVALID_CODED_VALUE}return null}(pt.domain,Pt):null:Wt.INVALID_TYPE}function nt(pt){switch(pt){case"esriFieldTypeSmallInteger":case"small-integer":return Tt;case"esriFieldTypeInteger":case"integer":return It;case"esriFieldTypeSingle":case"single":return Zt;case"esriFieldTypeDouble":case"double":return Kt}}(function(pt){pt.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(vs||(vs={})),function(pt){pt.INVALID_TYPE="type-validation-error::invalid-type"}(Wt||(Wt={}));const Tt={min:-32768,max:32767,isInteger:!0},It={min:-2147483648,max:2147483647,isInteger:!0},Zt={min:-34e37,max:12e37,isInteger:!1},Kt={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Vt(pt,Pt,jt){switch(pt){case x.INVALID_CODED_VALUE:return`Value ${jt} is not in the coded domain - field: ${Pt.name}, domain: ${JSON.stringify(Pt.domain)}`;case x.VALUE_OUT_OF_RANGE:return`Value ${jt} is out of the range of valid values - field: ${Pt.name}, domain: ${JSON.stringify(Pt.domain)}`;case Wt.INVALID_TYPE:return`Value ${jt} is not a valid value for the field type - field: ${Pt.name}, type: ${Pt.type}, nullable: ${Pt.nullable}`;case vs.OUT_OF_RANGE:{const{min:us,max:et}=nt(Pt.type);return`Value ${jt} is out of range for the number type - field: ${Pt.name}, type: ${Pt.type}, value range is ${us} to ${et}`}}}function Nt(pt,Pt){return!function ls(pt,Pt,jt){if(!Pt||!Pt.attributes||!pt){if((0,w.pC)(jt))for(const At of pt??[])jt.add(At);return!0}const us=Pt.attributes;let et=!1;for(const At of pt)if(!(At in us)){if(et=!0,!(0,w.pC)(jt))break;jt.add(At)}return et}(pt,Pt,null)}function Os(pt){return!!pt&&["raster.itempixelvalue","raster.servicepixelvalue"].some(Pt=>pt.toLowerCase().startsWith(Pt))}},60802:(He,Pe,g)=>{"use strict";g.d(Pe,{UO:()=>k,YI:()=>G,dI:()=>z,el:()=>X,hV:()=>Q,z7:()=>J});var E=g(3758);const T="__begin__",w="__end__",Z=new RegExp(T,"ig"),x=new RegExp(w,"ig"),se=new RegExp("^"+T,"i"),V=new RegExp(w+"$","i"),W='"',A=W+" + ",U=" + "+W;function J(q){return q.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function Q(q){const Y={expression:"",type:"none"};return q.labelExpressionInfo?q.labelExpressionInfo.value?(Y.expression=q.labelExpressionInfo.value,Y.type="conventional"):q.labelExpressionInfo.expression&&(Y.expression=q.labelExpressionInfo.expression,Y.type="arcade"):null!=q.labelExpression&&(Y.expression=function N(q){return q.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(q.labelExpression),Y.type="conventional"),Y}function G(q){const Y=Q(q);if(!Y)return null;switch(Y.type){case"conventional":return z(Y.expression);case"arcade":return Y.expression}return null}function k(q){const Y=Q(q);if(!Y)return null;switch(Y.type){case"conventional":return function D(q){const Y=q?.match(C);return Y&&Y[1].trim()||null}(Y.expression);case"arcade":return X(Y.expression)}return null}function z(q){let Y;return q?(Y=(0,E.gx)(q,ae=>T+'$feature["'+ae+'"]'+w),Y=se.test(Y)?Y.replace(se,""):W+Y,Y=V.test(Y)?Y.replace(V,""):Y+W,Y=Y.replace(Z,A).replace(x,U)):Y='""',Y}const C=/^\s*\{([^}]+)\}\s*$/i,F=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,B=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,$=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function X(q){if(!q)return null;let Y=F.exec(q)||B.exec(q);return Y?Y[1]||Y[3]:(Y=$.exec(q),Y?Y[2]:null)}},1586:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>U,r:()=>V});var E=g(32995),T=g(88684),w=g(28191),Z=g(85770);const x=w.Z.getLogger("esri.layers.support.labelingInfo"),se=/\[([^\[\]]+)\]/gi;function V(J,Q,G){return J?J.map(k=>{const z=new Z.Z;if(z.read(k,G),z.labelExpression){const C=Q.fields||Q.layerDefinition&&Q.layerDefinition.fields||this.fields;z.labelExpression=z.labelExpression.replace(se,(D,F)=>`[${function W(J,Q){if(!Q)return J;const G=J.toLowerCase();for(let k=0;k<Q.length;k++){const z=Q[k].name;if(z.toLowerCase()===G)return z}return J}(F,C)}]`)}return z}):null}const A={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function U(J,Q){const G=(0,T.d9)(J);return G.some(k=>function N(J,Q){const G=J.labelPlacement,k=A[Q];if(!J.symbol)return x.warn("No ILabelClass symbol specified."),!0;if(!k)return x.error(new E.Z("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${Q}' is not supported`)),!0;if(!k.includes(G)){const z=k[0];G&&x.warn(`Found invalid label placement type ${G} for ${Q}. Defaulting to ${z}`),J.labelPlacement=z}return!1}(k,Q))?[]:G}},63719:(He,Pe,g)=>{"use strict";g.d(Pe,{A2:()=>A,S1:()=>$,fb:()=>W,ln:()=>q,oP:()=>D,rQ:()=>Q,y2:()=>G});var E=g(71670),T=g(84489),w=g(1897),Z=g(53661);const W={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function A(Y){const ae=Y?.type;return"building-scene"===ae||"integrated-mesh"===ae||"point-cloud"===ae||"scene"===ae}function Q(Y){return"feature"===Y?.type&&!Y.url&&"memory"===Y.source?.type}function G(Y){return"feature"===Y?.type&&"feature-layer"===Y.source?.type}function D(Y,ae){return F.apply(this,arguments)}function F(){return(F=(0,E.Z)(function*(Y,ae){const he=T.id?.findServerInfo(Y);if(null!=he?.currentVersion)return he.owningSystemUrl||null;const ne=Y.toLowerCase().indexOf("/rest/services");if(-1===ne)return null;const ue=`${Y.substring(0,ne)}/rest/info`,te=(0,Z.pC)(ae)?ae.signal:null,{data:ie}=yield(0,w.default)(ue,{query:{f:"json"},responseType:"json",signal:te});return ie?.owningSystemUrl||null})).apply(this,arguments)}function $(Y){return function B(Y){if(!("capabilities"in Y))return!1;switch(Y.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}(Y)?"effectiveCapabilities"in Y?Y.effectiveCapabilities:Y.capabilities:null}function q(Y){return!!function X(Y){if(!("editingEnabled"in Y))return!1;switch(Y.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}(Y)&&("effectiveEditingEnabled"in Y?Y.effectiveEditingEnabled:Y.editingEnabled)}},5113:(He,Pe,g)=>{"use strict";g.d(Pe,{h:()=>A});var E=g(67087),T=g(53661),w=g(4583);const Z={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function x(F,B,$){return!!(F&&F.hasOwnProperty(B)?F[B]:$)}function se(F,B,$){return F&&F.hasOwnProperty(B)?F[B]:$}function V(F){const B=F?.supportedSpatialAggregationStatistics?.map($=>$.toLowerCase());return{envelope:!!B?.includes("envelopeaggregate"),centroid:!!B?.includes("centroidaggregate"),convexHull:!!B?.includes("convexhullaggregate")}}function W(F,B){return!!F?.supportedOperationsWithCacheHint?.map(X=>X.toLowerCase())?.includes(B.toLowerCase())}function A(F,B){return{analytics:U(F),attachment:N(F),data:J(F),metadata:Q(F),operations:G(F.capabilities,F,B),query:k(F,B),queryRelated:z(F),queryTopFeatures:C(F),editing:D(F)}}function U(F){return{supportsCacheHint:W(F.advancedQueryCapabilities,"queryAnalytics")}}function N(F){const B=F.attachmentProperties,$={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:W(F.advancedQueryCapabilities,"queryAttachments"),supportsResize:x(F,"supportsAttachmentsResizing",!1)};return B&&Array.isArray(B)&&B.forEach(X=>{const q=Z[X.name];q&&($[q]=!!X.isEnabled)}),$}function J(F){return{isVersioned:x(F,"isDataVersioned",!1),supportsAttachment:x(F,"hasAttachments",!1),supportsM:x(F,"hasM",!1),supportsZ:x(F,"hasZ",!1)}}function Q(F){return{supportsAdvancedFieldProperties:x(F,"supportsFieldDescriptionProperty",!1)}}function G(F,B,$){const X=F?F.toLowerCase().split(",").map(fe=>fe.trim()):[],q=$?(0,w.Qc)($):null,Y=X.includes((0,T.pC)(q)&&"MapServer"===q.serverType?"data":"query"),ae=X.includes("editing")&&!B.datesInUnknownTimezone;let he=ae&&X.includes("create"),ne=ae&&X.includes("delete"),ue=ae&&X.includes("update");const te=X.includes("changetracking"),ie=B.advancedQueryCapabilities;return ae&&!(he||ne||ue)&&(he=ne=ue=!0),{supportsCalculate:x(B,"supportsCalculate",!1),supportsTruncate:x(B,"supportsTruncate",!1),supportsValidateSql:x(B,"supportsValidateSql",!1),supportsAdd:he,supportsDelete:ne,supportsEditing:ae,supportsChangeTracking:te,supportsQuery:Y,supportsQueryAnalytics:x(ie,"supportsQueryAnalytic",!1),supportsQueryAttachments:x(ie,"supportsQueryAttachments",!1),supportsQueryTopFeatures:x(ie,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:x(B,"supportsAttachmentsResizing",!1),supportsSync:X.includes("sync"),supportsUpdate:ue,supportsExceedsLimitStatistics:x(B,"supportsExceedsLimitStatistics",!1)}}function k(F,B){const $=F.advancedQueryCapabilities,X=F.ownershipBasedAccessControlForFeatures,q=F.archivingInfo,Y=F.currentVersion,ae=B?.includes("MapServer"),he=!ae||Y>=(0,E.Z)("mapserver-pbf-version-support"),ne=(0,w.M8)(B),ue=new Set((F.supportedQueryFormats??"").split(",").map(te=>te.toLowerCase().trim()));return{supportsStatistics:x($,"supportsStatistics",F.supportsStatistics),supportsPercentileStatistics:x($,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:x($,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:V($),supportsCentroid:x($,"supportsReturningGeometryCentroid",!1),supportsDistance:x($,"supportsQueryWithDistance",!1),supportsDistinct:x($,"supportsDistinct",F.supportsAdvancedQueries),supportsExtent:x($,"supportsReturningQueryExtent",!1),supportsGeometryProperties:x($,"supportsReturningGeometryProperties",!1),supportsHavingClause:x($,"supportsHavingClause",!1),supportsOrderBy:x($,"supportsOrderBy",F.supportsAdvancedQueries),supportsPagination:x($,"supportsPagination",!1),supportsQuantization:x(F,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:x(F,"supportsQuantizationEditMode",!1),supportsQueryGeometry:x(F,"supportsReturningQueryGeometry",!1),supportsResultType:x($,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:x($,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:x($,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:x(F,"useStandardizedQueries",!1),supportsTopFeaturesQuery:x($,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:x(X,"allowOthersToQuery",!0),supportsHistoricMoment:x(q,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:he&&ue.has("pbf"),supportsDisjointSpatialRelationship:x($,"supportsDisjointSpatialRel",!1),supportsCacheHint:x($,"supportsQueryWithCacheHint",!1)||W($,"query"),supportsDefaultSpatialReference:x($,"supportsDefaultSR",!1),supportsCompactGeometry:ne,supportsFullTextSearch:x($,"supportsFullTextSearch",!1),maxRecordCountFactor:se(F,"maxRecordCountFactor",void 0),maxRecordCount:se(F,"maxRecordCount",void 0),standardMaxRecordCount:se(F,"standardMaxRecordCount",void 0),tileMaxRecordCount:se(F,"tileMaxRecordCount",void 0)}}function z(F){const B=F.advancedQueryCapabilities,$=x(B,"supportsAdvancedQueryRelated",!1);return{supportsPagination:x(B,"supportsQueryRelatedPagination",!1),supportsCount:$,supportsOrderBy:$,supportsCacheHint:W(B,"queryRelated")}}function C(F){return{supportsCacheHint:W(F.advancedQueryCapabilities,"queryTopFilter")}}function D(F){const B=F.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:x(F,"allowGeometryUpdates",!0),supportsGlobalId:x(F,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:x(F,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:x(F,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:x(F,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:x(F,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:x(B,"allowAnonymousToDelete",!0),supportsDeleteByOthers:x(B,"allowOthersToDelete",!0),supportsUpdateByAnonymous:x(B,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:x(B,"allowOthersToUpdate",!0)}}},38491:(He,Pe,g)=>{"use strict";g.d(Pe,{n:()=>_e});var C,E=g(18100),T=g(63321),w=g(44480),Z=g(9497),x=g(36734),se=g(4139),V=g(66508),W=g(20891),A=g(83382),U=g(77729),N=g(23973),J=g(98747),k=(g(6010),g(19420),g(68230)),z=g(86230);let D=C=class extends w.wq{constructor(de){super(de),this.type="query-table"}clone(){const{workspaceId:de,query:Oe,oidFields:re,spatialReference:le,geometryType:ce}=this,ve={workspaceId:de,query:Oe,oidFields:re,spatialReference:le?.clone()??void 0,geometryType:ce};return new C(ve)}};var F;(0,E._)([(0,se.J)({queryTable:"query-table"})],D.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],D.prototype,"workspaceId",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],D.prototype,"query",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],D.prototype,"oidFields",void 0),(0,E._)([(0,Z.Cb)({type:k.Z,json:{write:!0}})],D.prototype,"spatialReference",void 0),(0,E._)([(0,se.J)(z.M)],D.prototype,"geometryType",void 0),D=C=(0,E._)([(0,W.j)("esri.layers.support.source.QueryTableDataSource")],D);let B=F=class extends w.wq{constructor(de){super(de),this.type="raster"}clone(){const{workspaceId:de,dataSourceName:Oe}=this;return new F({workspaceId:de,dataSourceName:Oe})}};var $;(0,E._)([(0,se.J)({raster:"raster"})],B.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],B.prototype,"dataSourceName",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],B.prototype,"workspaceId",void 0),B=F=(0,E._)([(0,W.j)("esri.layers.support.source.RasterDataSource")],B);let X=$=class extends w.wq{constructor(de){super(de),this.type="table"}clone(){const{workspaceId:de,gdbVersion:Oe,dataSourceName:re}=this;return new $({workspaceId:de,gdbVersion:Oe,dataSourceName:re})}};var q,Y;(0,E._)([(0,se.J)({table:"table"})],X.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],X.prototype,"workspaceId",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],X.prototype,"gdbVersion",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],X.prototype,"dataSourceName",void 0),X=$=(0,E._)([(0,W.j)("esri.layers.support.source.TableDataSource")],X);const ae=(0,T.w)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let he=q=class extends w.wq{constructor(de){super(de),this.type="join-table"}readLeftTableSource(de,Oe,re){return ue()(de,Oe,re)}castLeftTableSource(de){return(0,A.N7)(ie(),de)}readRightTableSource(de,Oe,re){return ue()(de,Oe,re)}castRightTableSource(de){return(0,A.N7)(ie(),de)}clone(){const{leftTableKey:de,rightTableKey:Oe,leftTableSource:re,rightTableSource:le,joinType:ce}=this,ve={leftTableKey:de,rightTableKey:Oe,leftTableSource:re?.clone()??void 0,rightTableSource:le?.clone()??void 0,joinType:ce};return new q(ve)}};(0,E._)([(0,se.J)({joinTable:"join-table"})],he.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],he.prototype,"leftTableKey",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],he.prototype,"rightTableKey",void 0),(0,E._)([(0,Z.Cb)({json:{write:!0}})],he.prototype,"leftTableSource",void 0),(0,E._)([(0,V.r)("leftTableSource")],he.prototype,"readLeftTableSource",null),(0,E._)([(0,x.p)("leftTableSource")],he.prototype,"castLeftTableSource",null),(0,E._)([(0,Z.Cb)({json:{write:!0}})],he.prototype,"rightTableSource",void 0),(0,E._)([(0,V.r)("rightTableSource")],he.prototype,"readRightTableSource",null),(0,E._)([(0,x.p)("rightTableSource")],he.prototype,"castRightTableSource",null),(0,E._)([(0,se.J)(ae)],he.prototype,"joinType",void 0),he=q=(0,E._)([(0,W.j)("esri.layers.support.source.JoinTableDataSource")],he);let ne=null;function ue(){return ne||(ne=(0,U.d)({types:ie()})),ne}let te=null;function ie(){return te||(te={key:"type",base:null,typeMap:{"data-layer":_e,"map-layer":J.R}}),te}const fe={key:"type",base:null,typeMap:{"join-table":he,"query-table":D,raster:B,table:X}};let _e=Y=class extends w.wq{constructor(de){super(de),this.type="data-layer"}clone(){const{fields:de,dataSource:Oe}=this;return new Y({fields:de,dataSource:Oe})}};(0,E._)([(0,se.J)({dataLayer:"data-layer"})],_e.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:[N.Z],json:{write:!0}})],_e.prototype,"fields",void 0),(0,E._)([(0,Z.Cb)({types:fe,json:{write:!0}})],_e.prototype,"dataSource",void 0),_e=Y=(0,E._)([(0,W.j)("esri.layers.support.source.DataLayerSource")],_e),_e.from=(0,A.se)(_e)},98747:(He,Pe,g)=>{"use strict";g.d(Pe,{R:()=>A});var W,E=g(18100),T=g(44480),w=g(9497),Z=g(83382),se=(g(19420),g(4139)),V=g(20891);let A=W=class extends T.wq{constructor(U){super(U),this.type="map-layer"}clone(){const{mapLayerId:U,gdbVersion:N}=this;return new W({mapLayerId:U,gdbVersion:N})}};(0,E._)([(0,se.J)({mapLayer:"map-layer"})],A.prototype,"type",void 0),(0,E._)([(0,w.Cb)({type:Z.z8,json:{write:!0}})],A.prototype,"mapLayerId",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],A.prototype,"gdbVersion",void 0),A=W=(0,E._)([(0,V.j)("esri.layers.support.source.MapLayerSource")],A)},49067:(He,Pe,g)=>{"use strict";g.d(Pe,{D:()=>w});var E=g(4583);const T=[];function w(Z,x){if((0,E.M8)(Z.url??""))return!0;const{wkid:se}=x;for(const V of T){if((Z.version??0)>=V[0])return!0;if("function"==typeof V[1]&&(V[1]=V[1]()),V[1].has(se))return!1}return!0}T.push([10.91,()=>{const Z=new Set([9709,9716,9741,9761,9766]);for(let x=9712;x<=9713;x++)Z.add(x);for(let x=9748;x<=9749;x++)Z.add(x);for(let x=20904;x<=20932;x++)Z.add(x);for(let x=21004;x<=21032;x++)Z.add(x);for(let x=21207;x<=21264;x++)Z.add(x);for(let x=21307;x<=21364;x++)Z.add(x);for(let x=102759;x<=102760;x++)Z.add(x);for(let x=102901;x<=102955;x++)Z.add(x);return Z}]),T.push([10.9,()=>{const Z=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let x=9356;x<=9360;x++)Z.add(x);for(let x=9404;x<=9407;x++)Z.add(x);for(let x=9476;x<=9482;x++)Z.add(x);for(let x=9487;x<=9494;x++)Z.add(x);for(let x=9697;x<=9699;x++)Z.add(x);return Z}]),T.push([10.81,()=>{const Z=new Set([9265,9333,103598,103699]);for(let x=9248;x<=9254;x++)Z.add(x);for(let x=9271;x<=9273;x++)Z.add(x);for(let x=9284;x<=9285;x++)Z.add(x);for(let x=21453;x<=21463;x++)Z.add(x);return Z}]),T.push([10.8,()=>{const Z=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let x=8035;x<=8036;x++)Z.add(x);for(let x=8455;x<=8456;x++)Z.add(x);for(let x=8518;x<=8529;x++)Z.add(x);for(let x=8533;x<=8536;x++)Z.add(x);for(let x=8538;x<=8540;x++)Z.add(x);for(let x=8677;x<=8679;x++)Z.add(x);for(let x=8902;x<=8903;x++)Z.add(x);for(let x=8907;x<=8910;x++)Z.add(x);for(let x=8949;x<=8951;x++)Z.add(x);for(let x=8972;x<=8987;x++)Z.add(x);for(let x=9039;x<=9040;x++)Z.add(x);for(let x=9068;x<=9069;x++)Z.add(x);for(let x=9140;x<=9141;x++)Z.add(x);for(let x=9148;x<=9150;x++)Z.add(x);for(let x=9153;x<=9159;x++)Z.add(x);for(let x=9205;x<=9218;x++)Z.add(x);for(let x=9221;x<=9222;x++)Z.add(x);for(let x=54098;x<=54101;x++)Z.add(x);return Z}]),T.push([10.71,()=>{const Z=new Set([6316]);for(let x=8351;x<=8353;x++)Z.add(x);for(let x=9294;x<=9297;x++)Z.add(x);for(let x=22619;x<=22621;x++)Z.add(x);for(let x=103586;x<=103594;x++)Z.add(x);return Z}]),T.push([10.7,()=>{const Z=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let x=8065;x<=8068;x++)Z.add(x);for(let x=8082;x<=8083;x++)Z.add(x);for(let x=8379;x<=8385;x++)Z.add(x);for(let x=8836;x<=8840;x++)Z.add(x);for(let x=8857;x<=8860;x++)Z.add(x);for(let x=53035;x<=53037;x++)Z.add(x);for(let x=54090;x<=54091;x++)Z.add(x);for(let x=102498;x<=102499;x++)Z.add(x);return Z}]),T.push([10.61,()=>new Set([102497])]),T.push([10.6,()=>{const Z=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let x=7755;x<=7787;x++)Z.add(x);for(let x=7791;x<=7795;x++)Z.add(x);for(let x=7799;x<=7801;x++)Z.add(x);for(let x=7825;x<=7831;x++)Z.add(x);for(let x=7877;x<=7878;x++)Z.add(x);for(let x=7882;x<=7883;x++)Z.add(x);for(let x=7991;x<=7992;x++)Z.add(x);for(let x=8042;x<=8043;x++)Z.add(x);for(let x=8058;x<=8059;x++)Z.add(x);for(let x=8311;x<=8348;x++)Z.add(x);for(let x=9060;x<=9067;x++)Z.add(x);for(let x=102562;x<=102568;x++)Z.add(x);for(let x=102799;x<=102900;x++)Z.add(x);return Z}]),T.push([10.51,()=>{const Z=new Set([7683,7881,7886,7899,8888,9e3]);for(let x=8013;x<=8032;x++)Z.add(x);for(let x=9053;x<=9057;x++)Z.add(x);for(let x=104017;x<=104018;x++)Z.add(x);for(let x=104971;x<=104974;x++)Z.add(x);return Z}]),T.push([10.5,()=>{const Z=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let x=4087;x<=4088;x++)Z.add(x);for(let x=5896;x<=5899;x++)Z.add(x);for(let x=7005;x<=7007;x++)Z.add(x);for(let x=7057;x<=7070;x++)Z.add(x);for(let x=7073;x<=7082;x++)Z.add(x);for(let x=7109;x<=7128;x++)Z.add(x);for(let x=7844;x<=7859;x++)Z.add(x);return Z}])},79201:(He,Pe,g)=>{"use strict";g.d(Pe,{W:()=>w,v:()=>Z});var E=g(29969);const T={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(x,se,V)=>{"-"===se.charAt(0)?x.style.setProperty(se,V):x.style[se]=V}};let w=x=>(0,E.l7)(T,x),Z={create:(x,se)=>(se=w(se),(0,E.WV)(x,document.createElement("div"),void 0,se),(0,E.UQ)(x,se)),append:(x,se,V)=>(V=w(V),(0,E.WV)(se,x,void 0,V),(0,E.UQ)(se,V)),insertBefore:(x,se,V)=>(V=w(V),(0,E.WV)(se,x.parentNode,x,V),(0,E.UQ)(se,V)),merge:(x,se,V)=>(V=w(V),se.domNode=x,(0,E.Yj)(x,se,V),(0,E.UQ)(se,V)),replace:(x,se,V)=>(V=w(V),(0,E.WV)(se,x.parentNode,x,V),x.parentNode.removeChild(x),(0,E.UQ)(se,V))}},29969:(He,Pe,g)=>{"use strict";g.d(Pe,{UQ:()=>ne,WV:()=>q,Yj:()=>X,l7:()=>se});var E=g(89400);const T="http://www.w3.org/",w=`${T}2000/svg`,Z=`${T}1999/xlink`;let x=[],se=(ue,te)=>{let ie={};return Object.keys(ue).forEach(fe=>{ie[fe]=ue[fe]}),te&&Object.keys(te).forEach(fe=>{ie[fe]=te[fe]}),ie},V=(ue,te)=>ue.vnodeSelector===te.vnodeSelector&&(ue.properties&&te.properties?ue.properties.key===te.properties.key&&ue.properties.bind===te.properties.bind:!ue.properties&&!te.properties),W=ue=>{if("string"!=typeof ue)throw new Error("Style values must be strings")},A=(ue,te,ie)=>{if(""!==te.vnodeSelector)for(let fe=ie;fe<ue.length;fe++)if(V(ue[fe],te))return fe;return-1},U=(ue,te,ie,fe)=>{let _e=ue[te];if(""===_e.vnodeSelector)return;let de=_e.properties;if(!de||!(void 0===de.key?de.bind:de.key))for(let Oe=0;Oe<ue.length;Oe++)if(Oe!==te&&V(ue[Oe],_e))throw new Error(`${ie.vnodeSelector} had a ${_e.vnodeSelector} child ${"added"===fe?fe:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)},N=ue=>{if(ue.properties){let te=ue.properties.enterAnimation;te&&te(ue.domNode,ue.properties)}},J=[],Q=!1,G=ue=>{(ue.children||[]).forEach(G),ue.properties&&ue.properties.afterRemoved&&ue.properties.afterRemoved.apply(ue.properties.bind||ue.properties,[ue.domNode])},k=()=>{Q=!1,J.forEach(G),J.length=0},z=ue=>{J.push(ue),Q||(Q=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(k,{timeout:16}):setTimeout(k,16))},C=ue=>{let te=ue.domNode;if(ue.properties){let ie=ue.properties.exitAnimation;if(ie)return te.style.pointerEvents="none",void ie(te,()=>{te.parentNode&&(te.parentNode.removeChild(te),z(ue))},ue.properties)}te.parentNode&&(te.parentNode.removeChild(te),z(ue))},D=(ue,te,ie)=>{if(!te)return;let fe=ie.eventHandlerInterceptor,_e=Object.keys(te),de=_e.length;for(let Oe=0;Oe<de;Oe++){let re=_e[Oe],le=te[re];if("className"===re)throw new Error('Property "className" is not supported, use "class".');if("class"===re)Y(ue,le,!0);else if("classes"===re){let ce=Object.keys(le),ve=ce.length;for(let Te=0;Te<ve;Te++){let ge=ce[Te];le[ge]&&ue.classList.add(ge)}}else if("styles"===re){let ce=Object.keys(le),ve=ce.length;for(let Te=0;Te<ve;Te++){let ge=ce[Te],Ae=le[ge];Ae&&(W(Ae),ie.styleApplyer(ue,ge,Ae))}}else if("key"!==re&&null!=le){let ce=typeof le;"function"===ce?(0===re.lastIndexOf("on",0)&&(fe&&(le=fe(re,le,ue,te)),"oninput"===re&&function(){let ve=le;le=function(Te){ve.apply(this,[Te]),Te.target["oninput-value"]=Te.target.value}}()),ue[re]=le):ie.namespace===w?"href"===re?ue.setAttributeNS(Z,re,le):ue.setAttribute(re,le):"string"===ce&&"value"!==re?"innerHTML"===re?ue[re]=E.w3.sanitize(le):F(ue)&&re in ue?ue[re]=le:ue.setAttribute(re,le):ue[re]=le}}};function F(ue){if(!(ue instanceof Element&&ue.tagName.includes("-")))return!1;const te=window.customElements.get(ue.tagName.toLowerCase());return!!te&&ue instanceof te}let B,X=(ue,te,ie)=>{((ue,te,ie)=>{if(te)for(let fe of te)q(fe,ue,void 0,ie)})(ue,te.children,ie),te.text&&(ue.textContent=te.text),D(ue,te.properties,ie),te.properties&&te.properties.afterCreate&&te.properties.afterCreate.apply(te.properties.bind||te.properties,[ue,ie,te.vnodeSelector,te.properties,te.children])},q=(ue,te,ie,fe)=>{let _e,de=0,Oe=ue.vnodeSelector,re=te.ownerDocument;if(""===Oe)_e=ue.domNode=re.createTextNode(ue.text),void 0!==ie?te.insertBefore(_e,ie):te.appendChild(_e);else{for(let le=0;le<=Oe.length;++le){let ce=Oe.charAt(le);if(le===Oe.length||"."===ce||"#"===ce){let ve=Oe.charAt(de-1),Te=Oe.slice(de,le);"."===ve?_e.classList.add(Te):"#"===ve?_e.id=Te:("svg"===Te&&(fe=se(fe,{namespace:w})),void 0!==fe.namespace?_e=ue.domNode=re.createElementNS(fe.namespace,Te):(_e=ue.domNode=ue.domNode||re.createElement(Te),"input"===Te&&ue.properties&&void 0!==ue.properties.type&&_e.setAttribute("type",ue.properties.type)),void 0!==ie?te.insertBefore(_e,ie):_e.parentNode!==te&&te.appendChild(_e)),de=le+1}}X(_e,ue,fe)}},Y=(ue,te,ie)=>{te&&te.split(" ").forEach(fe=>{fe&&ue.classList.toggle(fe,ie)})};B=(ue,te,ie)=>{let fe=ue.domNode,_e=!1;if(ue===te)return!1;let de=!1;if(""===te.vnodeSelector){if(te.text!==ue.text){let Oe=fe.ownerDocument.createTextNode(te.text);return fe.parentNode.replaceChild(Oe,fe),te.domNode=Oe,_e=!0,_e}te.domNode=fe}else 0===te.vnodeSelector.lastIndexOf("svg",0)&&(ie=se(ie,{namespace:w})),ue.text!==te.text&&(de=!0,void 0===te.text?fe.removeChild(fe.firstChild):fe.textContent=te.text),te.domNode=fe,de=((ue,te,ie,fe,_e)=>{if(ie===fe)return!1;let de,Oe=(ie=ie||x).length,re=(fe=fe||x).length,le=0,ce=0,ve=!1;for(;ce<re;){let Te=le<Oe?ie[le]:void 0,ge=fe[ce];if(void 0!==Te&&V(Te,ge))ve=B(Te,ge,_e)||ve,le++;else{let Ae=A(ie,ge,le+1);if(Ae>=0){for(de=le;de<Ae;de++)C(ie[de]),U(ie,de,ue,"removed");ve=B(ie[Ae],ge,_e)||ve,le=Ae+1}else q(ge,te,le<Oe?ie[le].domNode:void 0,_e),N(ge),U(fe,ce,ue,"added")}ce++}if(Oe>le)for(de=le;de<Oe;de++)C(ie[de]),U(ie,de,ue,"removed");return ve})(te,fe,ue.children,te.children,ie)||de,de=((ue,te,ie,fe)=>{if(!ie)return;let _e=!1,de=Object.keys(ie),Oe=de.length;for(let re=0;re<Oe;re++){let le=de[re],ce=ie[le],ve=te[le];if("class"===le)ve!==ce&&(Y(ue,ve,!1),Y(ue,ce,!0));else if("classes"===le){let Te=ue.classList,ge=Object.keys(ce),Ae=ge.length;for(let De=0;De<Ae;De++){let Se=ge[De],me=!!ce[Se];me!==!!ve[Se]&&(_e=!0,me?Te.add(Se):Te.remove(Se))}}else if("styles"===le){let Te=Object.keys(ce),ge=Te.length;for(let Ae=0;Ae<ge;Ae++){let De=Te[Ae],Se=ce[De];Se!==ve[De]&&(_e=!0,Se?(W(Se),fe.styleApplyer(ue,De,Se)):fe.styleApplyer(ue,De,""))}}else if(ce||"string"!=typeof ve||(ce=""),"value"===le){let Te=ue[le];Te!==ce&&(ue["oninput-value"]?Te===ue["oninput-value"]:ce!==ve)&&(ue[le]=ce,ue["oninput-value"]=void 0),ce!==ve&&(_e=!0)}else if(ce!==ve){let Te=typeof ce;"function"===Te&&fe.eventHandlerInterceptor||(fe.namespace===w?"href"===le?ue.setAttributeNS(Z,le,ce):ue.setAttribute(le,ce):"string"===Te?"innerHTML"===le?ue[le]=E.w3.sanitize(ce):"role"===le&&""===ce?ue.removeAttribute(le):F(ue)&&le in ue?ue[le]=ce:ue.setAttribute(le,ce):ue[le]!==ce&&(ue[le]=ce),_e=!0)}}return _e})(fe,ue.properties,te.properties,ie)||de,te.properties&&te.properties.afterUpdate&&te.properties.afterUpdate.apply(te.properties.bind||te.properties,[fe,ie,te.vnodeSelector,te.properties,te.children]);return de&&te.properties&&te.properties.updateAnimation&&te.properties.updateAnimation(fe,te.properties,ue.properties),_e};let ne=(ue,te)=>({getLastRender:()=>ue,update:ie=>{if(ue.vnodeSelector!==ie.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let fe=ue;ue=ie,B(fe,ie,te)},domNode:ue.domNode})},47508:(He,Pe,g)=>{"use strict";g.d(Pe,{E:()=>se});var E=g(79201);let T;T=Array.prototype.find?(V,W)=>V.find(W):(V,W)=>V.filter(W)[0];let x=(V,W,A)=>{let U=function(N){A("domEvent",N);let J=W(),Q=((V,W)=>{let A=[];for(;V&&V!==W;)A.push(V),V=V.parentNode;return A})(N.currentTarget,J.domNode);Q.reverse();let G,k=((V,W)=>{let A=V;return W.forEach(U=>{A=A&&A.children?T(A.children,N=>N.domNode===U):void 0}),A})(J.getLastRender(),Q);return V.scheduleRender(),k&&(G=k.properties[`on${N.type}`].apply(k.properties.bind||this,arguments)),A("domEventProcessed",N),G};return(N,J,Q,G)=>U},se=V=>{let W,A,U=(0,E.W)(V),N=U.performanceLogger,J=!0,Q=!1,G=[],k=[],z=(D,F,B)=>{let $;U.eventHandlerInterceptor=x(W,()=>$,N),$=D(F,B(),U),G.push($),k.push(B)},C=()=>{if(A=void 0,J){J=!1,N("renderStart",void 0);for(let D=0;D<G.length;D++){let F=k[D]();N("rendered",void 0),G[D].update(F),N("patched",void 0)}N("renderDone",void 0),J=!0}};return W={renderNow:C,scheduleRender:()=>{A||Q||(A=requestAnimationFrame(C))},stop:()=>{A&&(cancelAnimationFrame(A),A=void 0),Q=!0},resume:()=>{Q=!1,J=!0,W.scheduleRender()},append:(D,F)=>{z(E.v.append,D,F)},insertBefore:(D,F)=>{z(E.v.insertBefore,D,F)},merge:(D,F)=>{z(E.v.merge,D,F)},replace:(D,F)=>{z(E.v.replace,D,F)},detach:D=>{for(let F=0;F<k.length;F++)if(k[F]===D)return k.splice(F,1),G.splice(F,1)[0];throw new Error("renderFunction was not found")}},W}},53986:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let W=V=class extends T.wq{constructor(U){super(U),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new V({title:this.title,expression:this.expression})}};(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],W.prototype,"title",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],W.prototype,"expression",void 0),(0,E._)([(0,w.Cb)({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],W.prototype,"returnType",void 0),W=V=(0,E._)([(0,se.j)("esri.popup.ElementExpressionInfo")],W);const A=W},32596:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let W=V=class extends T.wq{constructor(U){super(U),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new V({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],W.prototype,"name",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],W.prototype,"title",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],W.prototype,"expression",void 0),(0,E._)([(0,w.Cb)({type:["string","number"],json:{write:!0}})],W.prototype,"returnType",void 0),W=V=(0,E._)([(0,se.j)("esri.popup.ExpressionInfo")],W);const A=W},17398:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>J});var U,E=g(18100),T=g(63321),w=g(44480),Z=g(88684),x=g(9497),V=(g(83382),g(4139)),W=g(20891),A=g(34674);let N=U=class extends w.wq{constructor(Q){super(Q),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new U({fieldName:this.fieldName,format:this.format?(0,Z.d9)(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"fieldName",void 0),(0,E._)([(0,x.Cb)({type:A.Z,json:{write:!0}})],N.prototype,"format",void 0),(0,E._)([(0,x.Cb)({type:Boolean,json:{write:!0,default:!1}})],N.prototype,"isEditable",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"label",void 0),(0,E._)([(0,V.J)(new T.X({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],N.prototype,"stringFieldOption",void 0),(0,E._)([(0,x.Cb)({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],N.prototype,"statisticType",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"tooltip",void 0),(0,E._)([(0,x.Cb)({type:Boolean,json:{write:!0}})],N.prototype,"visible",void 0),N=U=(0,E._)([(0,W.j)("esri.popup.FieldInfo")],N);const J=N},21777:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(72560);let W=V=class extends se.Z{constructor(U){super(U),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new V({description:this.description,displayType:this.displayType,title:this.title})}};(0,E._)([(0,T.Cb)({type:String,json:{write:!0}})],W.prototype,"description",void 0),(0,E._)([(0,T.Cb)({type:["auto","preview","list"],json:{write:!0}})],W.prototype,"displayType",void 0),(0,E._)([(0,T.Cb)({type:String,json:{write:!0}})],W.prototype,"title",void 0),(0,E._)([(0,T.Cb)({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],W.prototype,"type",void 0),W=V=(0,E._)([(0,x.j)("esri.popup.content.AttachmentsContent")],W);const A=W},78767:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(15188),V=g(9357);let A=W=class extends se.Z{constructor(N){super(N),this.type="bar-chart"}clone(){return new W({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,E._)([(0,T.Cb)({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:V.l.write}})],A.prototype,"type",void 0),A=W=(0,E._)([(0,x.j)("esri.popup.content.BarChartMediaInfo")],A);const U=A},57960:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(15188),V=g(9357);let A=W=class extends se.Z{constructor(N){super(N),this.type="column-chart"}clone(){return new W({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,E._)([(0,T.Cb)({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:V.l.write}})],A.prototype,"type",void 0),A=W=(0,E._)([(0,x.j)("esri.popup.content.ColumnChartMediaInfo")],A);const U=A},72560:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>W});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let V=class extends T.wq{constructor(A){super(A),this.type=null}};(0,E._)([(0,w.Cb)({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],V.prototype,"type",void 0),V=(0,E._)([(0,se.j)("esri.popup.content.Content")],V);const W=V},47709:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(88684),w=g(9497),x=(g(83382),g(20891)),se=g(72560);let W=V=class extends se.Z{constructor(U){super(U),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new V({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?(0,T.d9)(this.outFields):null})}};(0,E._)([(0,w.Cb)()],W.prototype,"creator",void 0),(0,E._)([(0,w.Cb)()],W.prototype,"destroyer",void 0),(0,E._)([(0,w.Cb)()],W.prototype,"outFields",void 0),(0,E._)([(0,w.Cb)({type:["custom"],readOnly:!0})],W.prototype,"type",void 0),W=V=(0,E._)([(0,x.j)("esri.popup.content.CustomContent")],W);const A=W},10825:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(53986),V=g(72560);let A=W=class extends V.Z{constructor(N){super(N),this.expressionInfo=null,this.type="expression"}clone(){return new W({expressionInfo:this.expressionInfo?.clone()})}};(0,E._)([(0,T.Cb)({type:se.Z,json:{write:!0}})],A.prototype,"expressionInfo",void 0),(0,E._)([(0,T.Cb)({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],A.prototype,"type",void 0),A=W=(0,E._)([(0,x.j)("esri.popup.content.ExpressionContent")],A);const U=A},8810:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>N});var A,E=g(18100),T=g(88684),w=g(9497),x=(g(83382),g(20891)),se=g(70425),V=g(17398),W=g(72560);let U=A=class extends W.Z{constructor(J){super(J),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(J,Q){Q.fieldInfos=J&&J.map(G=>G.toJSON())}clone(){return new A((0,T.d9)({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};(0,E._)([(0,w.Cb)({type:Object,json:{write:!0}})],U.prototype,"attributes",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],U.prototype,"description",void 0),(0,E._)([(0,w.Cb)({type:[V.Z]})],U.prototype,"fieldInfos",void 0),(0,E._)([(0,se.c)("fieldInfos")],U.prototype,"writeFieldInfos",null),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],U.prototype,"title",void 0),(0,E._)([(0,w.Cb)({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],U.prototype,"type",void 0),U=A=(0,E._)([(0,x.j)("esri.popup.content.FieldsContent")],U);const N=U},64659:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var W,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(71367),V=g(44480);let A=W=class extends V.wq{constructor(G){super(G),this.linkURL=null,this.sourceURL=null}clone(){return new W({linkURL:this.linkURL,sourceURL:this.sourceURL})}};(0,E._)([(0,T.Cb)({type:String,json:{write:!0}})],A.prototype,"linkURL",void 0),(0,E._)([(0,T.Cb)({type:String,json:{write:!0}})],A.prototype,"sourceURL",void 0),A=W=(0,E._)([(0,x.j)("esri.popup.content.support.ImageMediaInfoValue")],A);const U=A;var N;let J=N=class extends se.Z{constructor(G){super(G),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new N({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};(0,E._)([(0,T.Cb)({type:Number,json:{write:!0}})],J.prototype,"refreshInterval",void 0),(0,E._)([(0,T.Cb)({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],J.prototype,"type",void 0),(0,E._)([(0,T.Cb)({type:U,json:{write:!0}})],J.prototype,"value",void 0),J=N=(0,E._)([(0,x.j)("esri.popup.content.ImageMediaInfo")],J);const Q=J},10060:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(15188),V=g(9357);let A=W=class extends se.Z{constructor(N){super(N),this.type="line-chart"}clone(){return new W({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,E._)([(0,T.Cb)({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:V.l.write}})],A.prototype,"type",void 0),A=W=(0,E._)([(0,x.j)("esri.popup.content.LineChartMediaInfo")],A);const U=A},21303:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>C});var k,E=g(18100),T=g(88684),w=g(9497),x=(g(83382),g(66508)),se=g(20891),V=g(70425),W=g(78767),A=g(57960),U=g(72560),N=g(64659),J=g(10060),Q=g(17318),G=g(25733);let z=k=class extends U.Z{constructor(D){super(D),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(D){return D&&D.map(F=>"image"===F.type?N.Z.fromJSON(F):"barchart"===F.type?W.Z.fromJSON(F):"columnchart"===F.type?A.Z.fromJSON(F):"linechart"===F.type?J.Z.fromJSON(F):"piechart"===F.type?Q.Z.fromJSON(F):void 0).filter(Boolean)}writeMediaInfos(D,F){F.mediaInfos=D&&D.map(B=>B.toJSON())}clone(){return new k((0,T.d9)({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};(0,E._)([(0,w.Cb)()],z.prototype,"activeMediaInfoIndex",void 0),(0,E._)([(0,w.Cb)({type:Object,json:{write:!0}})],z.prototype,"attributes",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],z.prototype,"description",void 0),(0,E._)([(0,w.Cb)({types:[G.V]})],z.prototype,"mediaInfos",void 0),(0,E._)([(0,x.r)("mediaInfos")],z.prototype,"readMediaInfos",null),(0,E._)([(0,V.c)("mediaInfos")],z.prototype,"writeMediaInfos",null),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],z.prototype,"title",void 0),(0,E._)([(0,w.Cb)({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],z.prototype,"type",void 0),z=k=(0,E._)([(0,se.j)("esri.popup.content.MediaContent")],z);const C=z},17318:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(15188),V=g(9357);let A=W=class extends se.Z{constructor(N){super(N),this.type="pie-chart"}clone(){return new W({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,E._)([(0,T.Cb)({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:V.l.write}})],A.prototype,"type",void 0),A=W=(0,E._)([(0,x.j)("esri.popup.content.PieChartMediaInfo")],A);const U=A},60647:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var E=g(18100),T=g(94904),w=g(9497),Z=g(83382),se=(g(19420),g(20891)),V=g(72560),W=g(56584);let A=class extends((0,T.J)(V.Z)){constructor(N){super(N),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],A.prototype,"description",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{type:Z.z8,write:!0}})],A.prototype,"displayCount",void 0),(0,E._)([(0,w.Cb)({type:["list"],json:{write:!0}})],A.prototype,"displayType",void 0),(0,E._)([(0,w.Cb)({type:[W.Z],json:{write:!0}})],A.prototype,"orderByFields",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{type:Z.z8,write:!0}})],A.prototype,"relationshipId",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],A.prototype,"title",void 0),(0,E._)([(0,w.Cb)({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],A.prototype,"type",void 0),A=(0,E._)([(0,se.j)("esri.popup.content.RelationshipContent")],A);const U=A},82797:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(72560);let W=V=class extends se.Z{constructor(U){super(U),this.text=null,this.type="text"}clone(){return new V({text:this.text})}};(0,E._)([(0,T.Cb)({type:String,json:{write:!0}})],W.prototype,"text",void 0),(0,E._)([(0,T.Cb)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],W.prototype,"type",void 0),W=V=(0,E._)([(0,x.j)("esri.popup.content.TextContent")],W);const A=W},15188:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>G});var U,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(71367),V=g(44480),W=g(88684),A=g(32312);let N=U=class extends V.wq{constructor(k){super(k),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new U({fields:(0,W.d9)(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};(0,E._)([(0,T.Cb)({type:[String],json:{write:!0}})],N.prototype,"fields",void 0),(0,E._)([(0,T.Cb)({type:String,json:{write:!0}})],N.prototype,"normalizeField",void 0),(0,E._)([(0,T.Cb)({type:[A.Z],json:{read:!1}})],N.prototype,"series",void 0),(0,E._)([(0,T.Cb)({type:String,json:{write:!0}})],N.prototype,"tooltipField",void 0),N=U=(0,E._)([(0,x.j)("esri.popup.content.support.ChartMediaInfoValue")],N);const J=N;let Q=class extends se.Z{constructor(k){super(k),this.type=null,this.value=null}};(0,E._)([(0,T.Cb)({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Q.prototype,"type",void 0),(0,E._)([(0,T.Cb)({type:J,json:{write:!0}})],Q.prototype,"value",void 0),Q=(0,E._)([(0,x.j)("esri.popup.content.mixins.ChartMediaInfo")],Q);const G=Q},71367:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>W});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let V=class extends T.wq{constructor(A){super(A),this.altText=null,this.caption="",this.title="",this.type=null}};(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],V.prototype,"altText",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],V.prototype,"caption",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],V.prototype,"title",void 0),(0,E._)([(0,w.Cb)({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],V.prototype,"type",void 0),V=(0,E._)([(0,se.j)("esri.popup.content.mixins.MediaInfo")],V);const W=V},32312:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(6365),w=g(9497),se=(g(83382),g(19420),g(20891));let W=V=class extends T.Z{constructor(U){super(U),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new V({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};(0,E._)([(0,w.Cb)()],W.prototype,"fieldName",void 0),(0,E._)([(0,w.Cb)()],W.prototype,"tooltip",void 0),(0,E._)([(0,w.Cb)()],W.prototype,"value",void 0),W=V=(0,E._)([(0,se.j)("esri.popup.content.support.ChartMediaInfoValueSeries")],W);const A=W},9357:(He,Pe,g)=>{"use strict";g.d(Pe,{l:()=>T});const T=(0,g(63321).w)()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})},25733:(He,Pe,g)=>{"use strict";g.d(Pe,{V:()=>V});var E=g(78767),T=g(57960),w=g(64659),Z=g(10060),x=g(17318);const V={base:g(71367).Z,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":E.Z,"column-chart":T.Z,"line-chart":Z.Z,"pie-chart":x.Z,image:w.Z}}},34674:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>D});var E=g(18100);const Z=(0,g(63321).w)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});Z.toJSON.bind(Z),Z.fromJSON.bind(Z);var z,W=g(44480),A=g(9497),U=g(83382),J=(g(19420),g(4139)),Q=g(20891),G=g(84836),k=g(39634);let C=z=class extends W.wq{constructor(F){super(F),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new z({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(F){return this.dateFormat?(0,G.p6)(F,{...(0,G.Ze)(this.dateFormat),...this.dateTimeFormatOptions}):(0,k.uf)(F,(0,k.sh)(this))}formatRasterPixelValue(F){if(F.includes("-"))return F;let B,$;return F.trim().includes(",")?(B=",",$=B+" ",this._formatDelimitedString(F,B,$,this)):F.trim().includes(";")?(B=";",$=B+" ",this._formatDelimitedString(F,B,$,this)):F.trim().includes(" ")?(B=$=" ",this._formatDelimitedString(F,B,$,this)):this.format(Number(F))}_formatDelimitedString(F,B,$,X){return F&&B&&$&&X?F.trim().split(B).map(q=>this.format(Number(q))).join($):F}};(0,E._)([(0,J.J)(Z)],C.prototype,"dateFormat",void 0),(0,E._)([(0,A.Cb)({type:Object,json:{read:!1}})],C.prototype,"dateTimeFormatOptions",void 0),(0,E._)([(0,A.Cb)({type:Boolean,json:{write:!0}})],C.prototype,"digitSeparator",void 0),(0,E._)([(0,A.Cb)({type:U.z8,json:{write:!0}})],C.prototype,"places",void 0),C=z=(0,E._)([(0,Q.j)("esri.popup.support.FieldInfoFormat")],C);const D=C},56584:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let W=V=class extends T.wq{constructor(U){super(U),this.field=null,this.order=null}clone(){return new V({field:this.field,order:this.order})}};(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],W.prototype,"field",void 0),(0,E._)([(0,w.Cb)({type:["asc","desc"],json:{write:!0}})],W.prototype,"order",void 0),W=V=(0,E._)([(0,se.j)("esri.popup.support.RelatedRecordsInfoFieldOrder")],W);const A=W},37753:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>ue});var E=g(71670),T=g(18100),w=g(68327),Z=g(84489),x=g(1897),se=g(32995),V=g(44480),W=g(48500),A=g(53661),U=g(30801),N=g(9497),J=g(83382),G=(g(19420),g(66508)),k=g(20891),z=g(10465),C=g(92051),D=g(6602),F=g(6365);let B=class extends F.Z{constructor(te){super(te),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};(0,T._)([(0,N.Cb)()],B.prototype,"nextQueryParams",void 0),(0,T._)([(0,N.Cb)()],B.prototype,"queryParams",void 0),(0,T._)([(0,N.Cb)()],B.prototype,"results",void 0),(0,T._)([(0,N.Cb)()],B.prototype,"total",void 0),B=(0,T._)([(0,k.j)("esri.portal.PortalQueryResult")],B);const $=B;var Y,X=g(78422),q=g(22660);let ae;const he={PortalGroup:()=>Promise.resolve().then(g.bind(g,90321)),PortalItem:()=>Promise.resolve().then(g.bind(g,66673)),PortalUser:()=>Promise.resolve().then(g.bind(g,78422))};let ne=Y=class extends((0,V.eC)(W.Z)){constructor(te){super(te),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=w.default.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(te){return"string"==typeof te?{url:te}:te}destroy(){this._esriIdCredentialCreateHandle=(0,A.hw)(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(te){if(te)for(const ie of te)w.default.request.trustedServers.includes(ie)||w.default.request.trustedServers.push(ie);return te}readDefaultBasemap(te){return this._readBasemap(te)}readDefaultDevBasemap(te){return this._readBasemap(te)}readDefaultVectorBasemap(te){return this._readBasemap(te)}get extraQuery(){return this.id&&this.user&&this.user.orgId&&!this.canSearchPublic?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let te=this.url;if(te){const ie=te.indexOf("/sharing");te=ie>0?te.substring(0,ie):this.url.replace(/\/+$/,""),te+="/sharing/rest"}return te}get thumbnailUrl(){const te=this.restUrl,ie=this.thumbnail;return te&&ie?this._normalizeSSL(te+"/portals/self/resources/"+ie):null}readUrlKey(te){return te&&te.toLowerCase()}readUser(te){let ie=null;return te&&(ie=X.default.fromJSON(te),ie.portal=this),ie}load(te){const ie=Promise.resolve().then(g.bind(g,51186)).then(({default:fe})=>{(0,U.k_)(te),ae=fe}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,te)).then(fe=>{if(Z.id){const _e=Z.id;this.credential=_e.findCredential(this.restUrl),this.credential||this.authMode!==Y.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle=_e.on("credential-create",()=>{_e.findCredential(this.restUrl)&&this.signIn().catch(()=>{})}))}this.sourceJSON=fe,this.read(fe)});return this.addResolvingPromise(ie),Promise.resolve(this)}createElevationLayers(){var te=this;return(0,E.Z)(function*(){yield te.load();const ie=te._getHelperService("defaultElevationLayers"),fe=(yield Promise.all([g.e(8592),g.e(6243)]).then(g.bind(g,16243))).default;return ie?ie.map(_e=>new fe({id:_e.id,url:_e.url})):[]})()}fetchBasemaps(te,ie){const fe=new D.Z;return fe.query=te||(w.default.apiKey&&(0,q.r)(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),fe.disableExtraQuery=!0,this.queryGroups(fe,ie).then(_e=>{if(fe.num=100,fe.query='type:"Web Map" -type:"Web Application"',_e.total){const de=_e.results[0];return fe.sortField=de.sortField||"name",fe.sortOrder=de.sortOrder||"desc",de.queryItems(fe,ie)}return null}).then(_e=>{let de;return de=_e&&_e.total?_e.results.filter(Oe=>"Web Map"===Oe.type).map(Oe=>new ae({portalItem:Oe})):[],de})}fetchCategorySchema(te){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",te).then(ie=>ie.categorySchema):(0,U.Hc)(te)?Promise.reject((0,U.zE)()):Promise.resolve([])}fetchFeaturedGroups(te){const ie=this.featuredGroups,fe=new D.Z;if(fe.num=100,fe.sortField="title",ie&&ie.length){const _e=[];for(const de of ie)_e.push(`(title:"${de.title}" AND owner:${de.owner})`);return fe.query=_e.join(" OR "),this.queryGroups(fe,te).then(de=>de.results)}return(0,U.Hc)(te)?Promise.reject((0,U.zE)()):Promise.resolve([])}fetchRegions(te){const ie=this.user?.culture||this.culture||(0,C.Kd)();return this.request(this.restUrl+"/portals/regions",{...te,query:{culture:ie}})}fetchSettings(te){const ie=this.user?.culture||this.culture||(0,C.Kd)();return this.request(this.restUrl+"/portals/self/settings",{...te,query:{culture:ie}})}static getDefault(){return Y._default&&!Y._default.destroyed||(Y._default=new Y),Y._default}queryGroups(te,ie){return this.queryPortal("/community/groups",te,"PortalGroup",ie)}queryItems(te,ie){return this.queryPortal("/search",te,"PortalItem",ie)}queryUsers(te,ie){return te.sortField||(te.sortField="username"),this.queryPortal("/community/users",te,"PortalUser",ie)}fetchSelf(te=this.authMode,ie=!1,fe){const _e=this.restUrl+"/portals/self",de={authMode:te,query:{culture:(0,C.Kd)().toLowerCase()},...fe};return"auto"===de.authMode&&(de.authMode="no-prompt"),ie&&(de.query.default=!0),this.request(_e,de)}queryPortal(te,ie,fe,_e){const de=(0,J.se)(D.Z,ie),Oe=re=>this.request(this.restUrl+te,{...de.toRequestOptions(this),..._e}).then(le=>{const ce=de.clone();return ce.start=le.nextStart,new $({nextQueryParams:ce,queryParams:de,total:le.total,results:Y._resultsToTypedArray(re,{portal:this},le,_e)})}).then(le=>Promise.all(le.results.map(ce=>"function"==typeof ce.when?ce.when():le)).then(()=>le,ce=>((0,U.r9)(ce),le)));return fe&&he[fe]?he[fe]().then(({default:re})=>((0,U.k_)(_e),Oe(re))):Oe()}signIn(){if(this.authMode===Y.AUTH_MODE_ANONYMOUS)return Promise.reject(new se.Z("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const te=ie=>Promise.resolve().then(()=>"not-loaded"===this.loadStatus?(ie||(this.authMode="immediate"),this.load().then(()=>null)):"loading"===this.loadStatus?this.load().then(()=>this.credential?null:(this.credential=ie,this.fetchSelf("immediate"))):this.user&&this.credential===ie?null:(this.credential=ie,this.fetchSelf("immediate"))).then(fe=>{fe&&(this.sourceJSON=fe,this.read(fe))});return Z.id?Z.id.getCredential(this.restUrl).then(ie=>te(ie)):te(this.credential)}normalizeUrl(te){const ie=this.credential&&this.credential.token;return this._normalizeSSL(ie?te+(te.includes("?")?"&":"?")+"token="+ie:te)}requestToTypedArray(te,ie,fe){return this.request(te,ie).then(_e=>{const de=Y._resultsToTypedArray(fe,{portal:this},_e);return Promise.all(de.map(Oe=>"function"==typeof Oe.when?Oe.when():_e)).then(()=>de,()=>de)})}request(te,ie={}){const fe={f:"json",...ie.query},{authMode:_e=(this.authMode===Y.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:de=null,cacheBust:Oe=!1,method:re="auto",responseType:le="json",signal:ce}=ie,ve={authMode:_e,body:de,cacheBust:Oe,method:re,query:fe,responseType:le,timeout:0,signal:ce};return(0,x.default)(this._normalizeSSL(te),ve).then(Te=>Te.data)}toJSON(){throw new se.Z("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(te){if(!te)return null;if(te.declaredClass)throw new Error("JSON object is already hydrated");return new Y({sourceJSON:te})}_getHelperService(te){const ie=this.helperServices&&this.helperServices[te];if(!ie)throw new se.Z("portal:service-not-found",`The \`helperServices\` do not include an entry named "${te}"`);return ie}_normalizeSSL(te){return te.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(te){if(te){const ie=ae.fromJSON(te);return ie.portalItem={portal:this},ie}return null}static _resultsToTypedArray(te,ie,fe,_e){let de=[];if(fe){const Oe=(0,A.pC)(_e)?_e.signal:null;de=fe.listings||fe.notifications||fe.userInvitations||fe.tags||fe.items||fe.groups||fe.comments||fe.provisions||fe.results||fe.relatedItems||fe,(te||ie)&&(de=de.map(re=>{const le=Object.assign(te?te.fromJSON(re):re,ie);return"function"==typeof le.load&&le.load(Oe),le}))}else de=[];return de}};ne.AUTH_MODE_ANONYMOUS="anonymous",ne.AUTH_MODE_AUTO="auto",ne.AUTH_MODE_IMMEDIATE="immediate",(0,T._)([(0,N.Cb)()],ne.prototype,"access",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"allSSL",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"authMode",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"authorizedCrossOriginDomains",void 0),(0,T._)([(0,G.r)("authorizedCrossOriginDomains")],ne.prototype,"readAuthorizedCrossOriginDomains",null),(0,T._)([(0,N.Cb)()],ne.prototype,"basemapGalleryGroupQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"bingKey",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"canListApps",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"canListData",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"canListPreProvisionedItems",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"canProvisionDirectPurchase",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"canSearchPublic",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"canShareBingPublic",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"canSharePublic",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"canSignInArcGIS",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"canSignInIDP",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"colorSetsGroupQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"commentsEnabled",void 0),(0,T._)([(0,N.Cb)({type:Date})],ne.prototype,"created",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"credential",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"culture",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"currentVersion",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"customBaseUrl",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"defaultBasemap",void 0),(0,T._)([(0,G.r)("defaultBasemap")],ne.prototype,"readDefaultBasemap",null),(0,T._)([(0,N.Cb)()],ne.prototype,"defaultDevBasemap",void 0),(0,T._)([(0,G.r)("defaultDevBasemap")],ne.prototype,"readDefaultDevBasemap",null),(0,T._)([(0,N.Cb)({type:z.Z})],ne.prototype,"defaultExtent",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"defaultVectorBasemap",void 0),(0,T._)([(0,G.r)("defaultVectorBasemap")],ne.prototype,"readDefaultVectorBasemap",null),(0,T._)([(0,N.Cb)()],ne.prototype,"description",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"devBasemapGalleryGroupQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"eueiEnabled",void 0),(0,T._)([(0,N.Cb)({readOnly:!0})],ne.prototype,"extraQuery",null),(0,T._)([(0,N.Cb)()],ne.prototype,"featuredGroups",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"featuredItemsGroupQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"galleryTemplatesGroupQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"livingAtlasGroupQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"hasCategorySchema",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"helpBase",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"helperServices",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"helpMap",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"homePageFeaturedContent",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"homePageFeaturedContentCount",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"httpPort",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"httpsPort",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"id",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"ipCntryCode",void 0),(0,T._)([(0,N.Cb)({readOnly:!0})],ne.prototype,"isOrganization",null),(0,T._)([(0,N.Cb)()],ne.prototype,"isPortal",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"isReadOnly",void 0),(0,T._)([(0,N.Cb)({readOnly:!0})],ne.prototype,"itemPageUrl",null),(0,T._)([(0,N.Cb)()],ne.prototype,"layerTemplatesGroupQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"maxTokenExpirationMinutes",void 0),(0,T._)([(0,N.Cb)({type:Date})],ne.prototype,"modified",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"name",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"portalHostname",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"portalMode",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"portalProperties",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"region",void 0),(0,T._)([(0,N.Cb)({readOnly:!0})],ne.prototype,"restUrl",null),(0,T._)([(0,N.Cb)()],ne.prototype,"rotatorPanels",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"showHomePageDescription",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"sourceJSON",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"staticImagesUrl",void 0),(0,T._)([(0,N.Cb)({json:{name:"2DStylesGroupQuery"}})],ne.prototype,"stylesGroupQuery2d",void 0),(0,T._)([(0,N.Cb)({json:{name:"stylesGroupQuery"}})],ne.prototype,"stylesGroupQuery3d",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"supportsHostedServices",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"symbolSetsGroupQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"templatesGroupQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"thumbnail",void 0),(0,T._)([(0,N.Cb)({readOnly:!0})],ne.prototype,"thumbnailUrl",null),(0,T._)([(0,N.Cb)()],ne.prototype,"units",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"url",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"urlKey",void 0),(0,T._)([(0,G.r)("urlKey")],ne.prototype,"readUrlKey",null),(0,T._)([(0,N.Cb)()],ne.prototype,"user",void 0),(0,T._)([(0,G.r)("user")],ne.prototype,"readUser",null),(0,T._)([(0,N.Cb)()],ne.prototype,"useStandardizedQuery",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"useVectorBasemaps",void 0),(0,T._)([(0,N.Cb)()],ne.prototype,"vectorBasemapGalleryGroupQuery",void 0),ne=Y=(0,T._)([(0,k.j)("esri.portal.Portal")],ne);const ue=ne},90321:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{default:()=>N});var E=g(18100),T=g(32995),w=g(44480),Z=g(53661),x=g(9497),se=g(83382),W=(g(19420),g(20891)),A=g(6602);let U=class extends w.wq{constructor(J){super(J),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const J=this.url,Q=this.thumbnail;return J&&Q&&this.portal?this.portal?.normalizeUrl(`${J}/info/${Q}?f=json`):null}get url(){const J=this.get("portal.restUrl");return J?J+"/community/groups/"+this.id:null}fetchCategorySchema(J){return(0,Z.s3)(this.portal).request(this.url+"/categorySchema",J).then(Q=>{const G=Q.categorySchema||[];return G.some(k=>"contentCategorySetsGroupQuery.LivingAtlas"===k.source)?this._fetchCategorySchemaSet("LivingAtlas",J):G})}fetchMembers(J){return(0,Z.s3)(this.portal).request(this.url+"/users",J)}getThumbnailUrl(J){let Q=this.thumbnailUrl;return Q&&J&&(Q+=`&w=${J}`),Q}toJSON(){throw new T.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(J,Q){let G=(0,se.se)(A.Z,J);const k=(0,Z.s3)(this.portal);return parseFloat(k.currentVersion)>5?(G=G||new A.Z,k.queryPortal(`/content/groups/${this.id}/search`,G,"PortalItem",Q)):(G=G?G.clone():new A.Z,G.query="group:"+this.id+(G.query?" "+G.query:""),k.queryItems(G,Q))}_fetchCategorySchemaSet(J,Q){const G=(0,Z.s3)(this.portal);return G.fetchSelf(G.authMode,!0,Q).then(k=>{const z=k.contentCategorySetsGroupQuery;if(z){const C=new A.Z;return C.disableExtraQuery=!0,C.num=1,C.query=z,G.queryGroups(C,Q)}throw new T.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(k=>{if(k.total){const z=k.results[0],C=new A.Z;return C.num=1,C.query=`typekeywords:"${J}"`,z.queryItems(C,Q)}throw new T.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(k=>k.total?k.results[0].fetchData("json",Q).then(z=>{const C=z&&z.categorySchema;return C&&C.length?C:[]}):[])}};(0,E._)([(0,x.Cb)()],U.prototype,"access",void 0),(0,E._)([(0,x.Cb)({type:Date})],U.prototype,"created",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"description",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"id",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"isInvitationOnly",void 0),(0,E._)([(0,x.Cb)({type:Date})],U.prototype,"modified",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"owner",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"portal",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"snippet",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"sortField",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"sortOrder",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"tags",void 0),(0,E._)([(0,x.Cb)()],U.prototype,"thumbnail",void 0),(0,E._)([(0,x.Cb)({readOnly:!0})],U.prototype,"thumbnailUrl",null),(0,E._)([(0,x.Cb)()],U.prototype,"title",void 0),(0,E._)([(0,x.Cb)({readOnly:!0})],U.prototype,"url",null),U=(0,E._)([(0,W.j)("esri.portal.PortalGroup")],U);const N=U},66673:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{default:()=>ue});var E=g(71670),T=g(18100),w=g(74792),Z=g(32995),x=g(44480),se=g(88684),V=g(48500),W=g(53661),A=g(55050),U=g(9497),N=g(83382),J=g(66508),Q=g(20891),G=g(10465),k=g(37753),z=g(6365),C=g(28191),D=g(36734);g(19420);let B=class extends z.Z{constructor(te){super(te),this.portalItem=null}normalizeCtorArgs(te){return te&&te.portalItem&&te.path?{...te,path:this._normalizePath(te.path,te.portalItem)}:te}set path(te){(0,W.pC)(te)&&(0,A.YP)(te)?C.Z.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",te)}_castPath(te){return this._normalizePath(te,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(te="json",ie){const fe=this.url;if((0,W.Wi)(fe))throw new Z.Z("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(fe,{responseType:te,query:{token:this.portalItem.apiKey},signal:(0,W.U2)(ie,"signal")})}update(te,ie){var fe=this;return(0,E.Z)(function*(){return(yield g.e(486).then(g.bind(g,90486))).addOrUpdateResource(fe,"update",te,ie)})()}hasPath(){return(0,W.pC)(this.path)}_normalizePath(te,ie){return(0,W.Wi)(te)?te:(te=te.replace(/^\/+/,""),(0,W.pC)(ie)&&(0,A.YP)(te)&&(te=(0,A.PF)(te,ie.itemUrl)),te?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};(0,T._)([(0,U.Cb)()],B.prototype,"portalItem",void 0),(0,T._)([(0,U.Cb)({type:String,value:null})],B.prototype,"path",null),(0,T._)([(0,D.p)("path")],B.prototype,"_castPath",null),(0,T._)([(0,U.Cb)({type:String,readOnly:!0})],B.prototype,"url",null),(0,T._)([(0,U.Cb)({type:String,readOnly:!0})],B.prototype,"itemRelativeUrl",null),B=(0,T._)([(0,Q.j)("esri.portal.PortalItemResource")],B);const $=B;let X=class extends z.Z{constructor(te){super(te),this.created=null,this.rating=null}};(0,T._)([(0,U.Cb)()],X.prototype,"created",void 0),(0,T._)([(0,U.Cb)()],X.prototype,"rating",void 0),X=(0,T._)([(0,Q.j)("esri.portal.PortalRating")],X);const q=X;var Y;const ae=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),he=new Set(["KML","GeoJson","CSV"]);let ne=Y=class extends((0,x.eC)(V.Z)){static from(te){return(0,N.TJ)(Y,te)}constructor(te){super(te),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const te=this.type,ie=this.typeKeywords||[];let fe=te;return"Feature Service"===te||"Feature Collection"===te?fe=ie.includes("Table")?"Table":ie.includes("Route Layer")?"Route Layer":ie.includes("Markup")?"Markup":"Feature Layer":"Image Service"===te?fe=ie.includes("Elevation 3D Layer")?"Elevation Layer":ie.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===te?fe="Scene Layer":"Video Service"===te?fe="Video Layer":"Scene Package"===te?fe="Scene Layer Package":"Stream Service"===te?fe="Feature Layer":"Geoprocessing Service"===te&&this.portal&&this.portal.isPortal?fe=ie.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===te?fe="Locator":"Geoenrichment Service"===te?fe="GeoEnrichment Service":"Microsoft Powerpoint"===te?fe="Microsoft PowerPoint":"GeoJson"===te?fe="GeoJSON":"Globe Service"===te?fe="Globe Layer":"Vector Tile Service"===te?fe="Tile Layer":"netCDF"===te?fe="NetCDF":"Map Service"===te?fe=ie.includes("Spatiotemporal")||!ie.includes("Hosted Service")&&!ie.includes("Tiled")||ie.includes("Relational")?"Map Image Layer":"Tile Layer":te&&te.toLowerCase().includes("add in")?fe=te.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===te?fe="Big Data File Share":"Compact Tile Package"===te?fe="Tile Package (tpkx)":"OGCFeatureServer"===te?fe="OGC Feature Layer":"web mapping application"===te&&ie.includes("configurableApp")?fe="Instant App":"Insights Page"===te&&(fe="Insights Report"),fe}readExtent(te){return te&&te.length?new G.Z(te[0][0],te[0][1],te[1][0],te[1][1]):null}get iconUrl(){const te=this.type&&this.type.toLowerCase()||"",ie=this.typeKeywords||[];let de,Oe=!1,re=!1,le=!1,ce=!1,ve=!1,Te=!1;return te.indexOf("service")>0||"feature collection"===te||"kml"===te||"wms"===te||"wmts"===te||"wfs"===te?(Oe=ie.includes("Hosted Service"),"feature service"===te||"feature collection"===te||"kml"===te||"wfs"===te?(re=ie.includes("Table"),le=ie.includes("Route Layer"),ce=ie.includes("Markup"),ve=ie.includes("Spatiotemporal"),Te=ie.includes("UtilityNetwork"),de=ve&&re?"spatiotemporaltable":re?"table":le?"routelayer":ce?"markup":ve?"spatiotemporal":Oe?"featureshosted":Te?"utilitynetwork":"features"):de="map service"===te||"wms"===te||"wmts"===te?Oe||ie.includes("Tiled")||"wmts"===te?"maptiles":"mapimages":"scene service"===te?ie.includes("Line")?"sceneweblayerline":ie.includes("3DObject")?"sceneweblayermultipatch":ie.includes("Point")?"sceneweblayerpoint":ie.includes("IntegratedMesh")?"sceneweblayermesh":ie.includes("PointCloud")?"sceneweblayerpointcloud":ie.includes("Polygon")?"sceneweblayerpolygon":ie.includes("Building")?"sceneweblayerbuilding":ie.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===te?ie.includes("Elevation 3D Layer")?"elevationlayer":ie.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===te?"streamlayer":"video service"===te?"mediaservice":"vector tile service"===te?"vectortile":"datastore catalog service"===te?"datastorecollection":"geocoding service"===te?"geocodeservice":"geoprocessing service"===te?ie.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"geodata service"===te?"geodataservice":"layers"):de="web map"===te||"cityengine web scene"===te?"maps":"web scene"===te?ie.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===te&&ie.includes("configurableApp")?"instantapps":"web mapping application"===te||"mobile application"===te||"application"===te||"operation view"===te||"desktop application"===te?"apps":"map document"===te||"map package"===te||"published map"===te||"scene document"===te||"globe document"===te||"basemap package"===te||"mobile basemap package"===te||"mobile map package"===te||"project package"===te||"project template"===te||"pro map"===te||"layout"===te||"layer"===te&&ie.includes("ArcGIS Pro")||"explorer map"===te&&ie.indexOf("Explorer Document")?"mapsgray":"service definition"===te||"csv"===te||"shapefile"===te||"cad drawing"===te||"geojson"===te||"360 vr experience"===te||"netcdf"===te||"administrative report"===te?"datafiles":"explorer add in"===te||"desktop add in"===te||"windows viewer add in"===te||"windows viewer configuration"===te?"appsgray":"arcgis pro add in"===te||"arcgis pro configuration"===te?"addindesktop":"rule package"===te||"file geodatabase"===te||"sqlite geodatabase"===te||"csv collection"===te||"kml collection"===te||"windows mobile package"===te||"map template"===te||"desktop application template"===te||"gml"===te||"arcpad package"===te||"code sample"===te||"form"===te||"document link"===te||"earth configuration"===te||"operations dashboard add in"===te||"rules package"===te||"image"===te||"workflow manager package"===te||"explorer map"===te&&ie.includes("Explorer Mapping Application")||ie.includes("Document")?"datafilesgray":"network analysis service"===te||"geoprocessing service"===te||"geodata service"===te||"geometry service"===te||"geoprocessing package"===te||"locator package"===te||"geoprocessing sample"===te||"workflow manager service"===te?"toolsgray":"layer"===te||"layer package"===te||"explorer layer"===te?"layersgray":"scene package"===te?"scenepackage":"mobile scene package"===te?"mobilescenepackage":"tile package"===te||"compact tile package"===te?"tilepackage":"task file"===te?"taskfile":"report template"===te?"report-template":"statistical data collection"===te?"statisticaldatacollection":"insights workbook"===te?"workbook":"insights model"===te?"insightsmodel":"insights page"===te?"insightspage":"insights theme"===te?"insightstheme":"hub initiative"===te?"hubinitiative":"hubpage"===te?"hubpage":"hub event"===te?"hubevent":"hub site application"===te?"hubsite":"hub project"===te?"hubproject":"relational database connection"===te?"relationaldatabaseconnection":"big data file share"===te?"datastorecollection":"image collection"===te?"imagecollection":"style"===te?"style":"desktop style"===te?"desktopstyle":"dashboard"===te?"dashboard":"raster function template"===te?"rasterprocessingtemplate":"vector tile package"===te?"vectortilepackage":"ortho mapping project"===te?"orthomappingproject":"ortho mapping template"===te?"orthomappingtemplate":"solution"===te?"solutions":"geopackage"===te?"geopackage":"deep learning package"===te?"deeplearningpackage":"real time analytic"===te?"realtimeanalytics":"big data analytic"===te?"bigdataanalytics":"feed"===te?"feed":"excalibur imagery project"===te?"excaliburimageryproject":"notebook"===te?"notebook":"storymap"===te?"storymap":"survey123 add in"===te?"survey123addin":"mission"===te?"mission":"mission report"===te?"missionreport":"quickcapture project"===te?"quickcaptureproject":"pro report"===te?"proreport":"pro report template"===te?"proreporttemplate":"urban model"===te?"urbanmodel":"web experience"===te?"experiencebuilder":"web experience template"===te?"webexperiencetemplate":"experience builder widget"===te?"experiencebuilderwidget":"experience builder widget package"===te?"experiencebuilderwidgetpackage":"workflow"===te?"workflow":"insights script"===te?"insightsscript":"kernel gateway connection"===te?"kernelgatewayconnection":"hub initiative template"===te?"hubinitiativetemplate":"storymap theme"===te?"storymaptheme":"knowledge graph"===te?"knowledgegraph":"native application"===te?"nativeapp":"native application installer"===te?"nativeappinstaller":"link chart"===te?"linkchart":"investigation"===te?"investigation":"ogcfeatureserver"===te?"features":"pro project"===te?"proproject":"insights workbook package"===te?"insightsworkbookpackage":"apache parquet"===te?"apacheparquet":"notebook code snippets"===te||"notebook code snippet library"===te?"notebookcodesnippets":"suitability model"===te?"suitabilitymodel":"esri classifier definition"===te?"classifierdefinition":"esri classification schema"===te?"classificationschema":"insights data engineering workbook"===te?"dataengineeringworkbook":"insights data engineering model"===te?"dataengineeringmodel":"deep learning studio project"===te?"deeplearningproject":"discussion"===te?"discussion":"allsource project"===te?"allsourceproject":"api key"===te?"apikey":"maps",de?(0,w.V)("esri/images/portal/"+de+"16.png"):null}get isLayer(){return null!=this.type&&ae.has(this.type)}get itemPageUrl(){const te=this.portal?.itemPageUrl;return te&&this.id?`${te}?id=${this.id}`:null}get itemUrl(){const te=this.portal?.restUrl;return te&&this.id?`${te}/content/items/${this.id}`:null}get thumbnailUrl(){const te=this.itemUrl,ie=this.thumbnail;return te&&ie?this.portal?.normalizeUrl(`${te}/info/${ie}?f=json`)??null:null}get userItemUrl(){const te=this.get("portal.restUrl");if(!te)return null;const ie=this.owner||this.get("portal.user.username");return ie?`${te}/content/users/${this.ownerFolder?`${ie}/${this.ownerFolder}`:ie}/items/${this.id}`:null}load(te){const ie=this.portal??(this.portal=k.Z.getDefault()),fe=ie.load(te).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?ie.request(this.itemUrl,{signal:(0,W.pC)(te)?te.signal:null,query:{token:this.apiKey}}):{}).then(_e=>{this.sourceJSON=_e,this.read(_e)});return this.addResolvingPromise(fe),Promise.resolve(this)}addRating(te){var ie=this;return(0,E.Z)(function*(){const fe={method:"post",query:{}};return te instanceof q&&(te=te.rating),null==te||isNaN(te)||"number"!=typeof te||(fe.query.rating=te),ie.portal?(yield ie.portal.request(ie.itemUrl+"/addRating",fe),new q({rating:te,created:new Date})):null})()}clone(){const te={access:this.access,accessInformation:this.accessInformation,applicationProxies:(0,se.d9)(this.applicationProxies),avgRating:this.avgRating,categories:(0,se.d9)(this.categories),created:(0,se.d9)(this.created),culture:this.culture,description:this.description,extent:(0,se.d9)(this.extent),groupCategories:(0,se.d9)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:(0,se.d9)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:(0,se.d9)(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:(0,se.d9)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,se.d9)(this.typeKeywords),url:this.url};this.loaded&&(te.loadStatus="loaded");const ie=new Y({sourceJSON:this.sourceJSON}).set(te);return ie._set("isOrgItem",this.isOrgItem),ie}createPostQuery(){const te=this.toJSON();for(const fe of["tags","typeKeywords","categories"])te[fe]&&(te[fe]=te[fe].join(", "));const{extent:ie}=te;return ie&&(te.extent=JSON.stringify(ie)),te}deleteRating(){var te=this;return(0,E.Z)(function*(){yield(0,W.s3)(te.portal).request(te.itemUrl+"/deleteRating",{method:"post"})})()}fetchData(te="json",ie){return(0,W.s3)(this.portal).request(this.itemUrl+"/data",{responseType:te,...ie,query:{token:this.apiKey}})}fetchRating(te){var ie=this;return(0,E.Z)(function*(){const fe=yield(0,W.s3)(ie.portal).request(ie.itemUrl+"/rating",{query:{token:ie.apiKey},...te});return null!=fe.rating?(fe.created=new Date(fe.created),new q(fe)):null})()}fetchRelatedItems(te,ie){return(0,W.s3)(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...te,token:this.apiKey},...ie},Y)}getThumbnailUrl(te){let ie=this.thumbnailUrl;return ie&&te&&(ie+=`&w=${te}`),ie}reload(){return(0,W.s3)(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(te=>(this.sourceJSON=te,this.read(te),this))}update(te){return this.id?this.load().then(()=>(0,W.s3)(this.portal).signIn()).then(()=>{const ie=te&&te.data,fe={method:"post"};fe.query=this.createPostQuery();for(const _e in fe.query)null===fe.query[_e]&&(fe.query[_e]="");return fe.query.clearEmptyFields=!0,null!=ie&&("string"==typeof ie?fe.query.text=ie:"object"==typeof ie&&(fe.query.text=JSON.stringify(ie))),this.portal.request(`${this.userItemUrl}/update`,fe).then(()=>this.reload())}):Promise.reject(new Z.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}copy(te){var ie=this;return(0,E.Z)(function*(){if(!ie.id)throw new Z.Z("portal:item-does-not-exist","The item does not exist yet");yield ie.load();const{portal:fe,itemUrl:_e}=ie;yield(0,W.s3)(fe).signIn();const{copyResources:de,folder:Oe,tags:re,title:le}=te||{},ce={method:"post",query:{copyPrivateResources:"all"===de,folder:"string"==typeof Oe?Oe:Oe?.id,includeResources:!!de,tags:re?.join(","),title:le}},{itemId:ve}=yield fe.request(`${_e}/copy`,ce);return new Y({id:ve,portal:fe})})()}updateThumbnail(te){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const ie=te.thumbnail,fe=te.filename,_e={method:"post"};if("string"==typeof ie)_e.query=(0,A.HK)(ie)?{data:ie}:{url:(0,A.hF)(ie)},(0,W.pC)(fe)&&(_e.query.filename=fe);else{const de=new FormData;(0,W.pC)(fe)?de.append("file",ie,fe):de.append("file",ie),_e.body=de}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,_e).then(()=>this.reload())}):Promise.reject(new Z.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}fetchResources(te={},ie){var fe=this;return(0,E.Z)(function*(){return(yield g.e(486).then(g.bind(g,90486))).fetchResources(fe,te,ie)})()}addResource(te,ie,fe){var _e=this;return(0,E.Z)(function*(){const de=yield g.e(486).then(g.bind(g,90486));return te.portalItem=_e,de.addOrUpdateResource(te,"add",ie,fe)})()}removeResource(te,ie){var fe=this;return(0,E.Z)(function*(){const _e=yield g.e(486).then(g.bind(g,90486));if(te.portalItem&&te.portalItem.itemUrl!==fe.itemUrl)throw new Z.Z("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return _e.removeResource(fe,te,ie)})()}removeAllResources(te){var ie=this;return(0,E.Z)(function*(){return(yield g.e(486).then(g.bind(g,90486))).removeAllResources(ie,te)})()}resourceFromPath(te){return new $({portalItem:this,path:te})}toJSON(){const te=this.extent,ie={accessInformation:this.accessInformation,categories:(0,se.d9)(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:te&&[[te.xmin,te.ymin],[te.xmax,te.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:(0,se.d9)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,se.d9)(this.typeKeywords),url:this.url};return(0,se.yd)(ie)}static fromJSON(te){if(!te)return null;if(te.declaredClass)throw new Error("JSON object is already hydrated");return new Y({sourceJSON:te})}_getPostQuery(){const te=this.toJSON();for(const ie in te)"tags"===ie&&null!==te[ie]&&(te[ie]=te[ie].join(", ")),"typeKeywords"===ie&&null!==te[ie]&&(te[ie]=te[ie].join(", ")),"extent"===ie&&te[ie]&&(te[ie]=JSON.stringify(te[ie]));return te}};(0,T._)([(0,U.Cb)({type:["private","shared","org","public"]})],ne.prototype,"access",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"accessInformation",void 0),(0,T._)([(0,U.Cb)({type:String})],ne.prototype,"apiKey",void 0),(0,T._)([(0,U.Cb)({json:{read:{source:"appProxies"}}})],ne.prototype,"applicationProxies",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"avgRating",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"categories",void 0),(0,T._)([(0,U.Cb)({type:Date})],ne.prototype,"created",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"culture",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"description",void 0),(0,T._)([(0,U.Cb)({readOnly:!0})],ne.prototype,"displayName",null),(0,T._)([(0,U.Cb)({type:G.Z})],ne.prototype,"extent",void 0),(0,T._)([(0,J.r)("extent")],ne.prototype,"readExtent",null),(0,T._)([(0,U.Cb)()],ne.prototype,"groupCategories",void 0),(0,T._)([(0,U.Cb)({readOnly:!0})],ne.prototype,"iconUrl",null),(0,T._)([(0,U.Cb)()],ne.prototype,"id",void 0),(0,T._)([(0,U.Cb)({readOnly:!0})],ne.prototype,"isLayer",null),(0,T._)([(0,U.Cb)({type:Boolean,readOnly:!0})],ne.prototype,"isOrgItem",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"itemControl",void 0),(0,T._)([(0,U.Cb)({readOnly:!0})],ne.prototype,"itemPageUrl",null),(0,T._)([(0,U.Cb)({readOnly:!0})],ne.prototype,"itemUrl",null),(0,T._)([(0,U.Cb)()],ne.prototype,"licenseInfo",void 0),(0,T._)([(0,U.Cb)({type:Date})],ne.prototype,"modified",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"name",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"numComments",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"numRatings",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"numViews",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"owner",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"ownerFolder",void 0),(0,T._)([(0,U.Cb)({type:k.Z})],ne.prototype,"portal",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"screenshots",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"size",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"snippet",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"sourceJSON",void 0),(0,T._)([(0,U.Cb)({type:String})],ne.prototype,"sourceUrl",void 0),(0,T._)([(0,U.Cb)({type:String})],ne.prototype,"spatialReference",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"tags",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"thumbnail",void 0),(0,T._)([(0,U.Cb)({readOnly:!0})],ne.prototype,"thumbnailUrl",null),(0,T._)([(0,U.Cb)()],ne.prototype,"title",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"type",void 0),(0,T._)([(0,U.Cb)()],ne.prototype,"typeKeywords",void 0),(0,T._)([(0,U.Cb)({type:String,json:{read(te,ie){if(he.has(ie.type)){const fe=this.portal?.restUrl;te||(te=fe&&this.id?`${fe}/content/items/${this.id}/data`:null)}return te}}})],ne.prototype,"url",void 0),(0,T._)([(0,U.Cb)({readOnly:!0})],ne.prototype,"userItemUrl",null),ne=Y=(0,T._)([(0,Q.j)("esri.portal.PortalItem")],ne);const ue=ne},6602:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var J,E=g(18100),T=g(6365),w=g(63321),Z=g(88684),x=g(53661),se=g(9497),W=(g(83382),g(20891)),A=g(10465),U=g(68230),N=g(83550);const Q=new w.X({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let G=J=class extends T.Z{constructor(z){super(z),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(z){"asc"!==z&&"desc"!==z||this._set("sortOrder",z)}clone(){return new J({categories:this.categories?(0,Z.d9)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(z,C){let D=[];this.categories&&(D=this.categories.map(X=>Array.isArray(X)?JSON.stringify(X):X));let F="";if(this.extent){const X=(0,N.iV)(this.extent,U.Z.WGS84);(0,x.pC)(X)&&(F=`${X.xmin},${X.ymin},${X.xmax},${X.ymax}`)}let B=this.query;!this.disableExtraQuery&&z.extraQuery&&(B="("+B+")"+z.extraQuery);const $={categories:D,bbox:F,q:B,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&($.sortField=this.sortField.split(",").map(X=>Q.toJSON(X.trim())).join(","),$.sortOrder=this.sortOrder),{query:{...C,...$}}}};(0,E._)([(0,se.Cb)()],G.prototype,"categories",void 0),(0,E._)([(0,se.Cb)()],G.prototype,"disableExtraQuery",void 0),(0,E._)([(0,se.Cb)({type:A.Z})],G.prototype,"extent",void 0),(0,E._)([(0,se.Cb)()],G.prototype,"filter",void 0),(0,E._)([(0,se.Cb)()],G.prototype,"num",void 0),(0,E._)([(0,se.Cb)()],G.prototype,"query",void 0),(0,E._)([(0,se.Cb)()],G.prototype,"sortField",void 0),(0,E._)([(0,se.Cb)()],G.prototype,"sortOrder",null),(0,E._)([(0,se.Cb)()],G.prototype,"start",void 0),G=J=(0,E._)([(0,W.j)("esri.portal.PortalQueryParams")],G);const k=G},78422:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{default:()=>Q});var E=g(18100),T=g(32995),w=g(44480),Z=g(9497),V=(g(83382),g(19420),g(20891));let W=class extends w.wq{constructor(G){super(G),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const G=this.get("portal.restUrl");return G?`${G}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new T.Z("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};(0,E._)([(0,Z.Cb)({type:Date})],W.prototype,"created",void 0),(0,E._)([(0,Z.Cb)()],W.prototype,"id",void 0),(0,E._)([(0,Z.Cb)()],W.prototype,"portal",void 0),(0,E._)([(0,Z.Cb)()],W.prototype,"title",void 0),(0,E._)([(0,Z.Cb)({readOnly:!0})],W.prototype,"url",null),(0,E._)([(0,Z.Cb)()],W.prototype,"username",void 0),W=(0,E._)([(0,V.j)("esri.portal.PortalFolder")],W);const A=W;var N,U=g(90321);let J=N=class extends w.wq{constructor(...G){super(...G),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const G=this.url,k=this.thumbnail;return G&&k?this.portal.normalizeUrl(`${G}/info/${k}?f=json`):null}get userContentUrl(){const G=this.get("portal.restUrl");return G?`${G}/content/users/${this.username}`:null}get url(){const G=this.get("portal.restUrl");return G?`${G}/community/users/${this.username}`:null}addItem(G){const k=G&&G.item,z=G&&G.data,C=G&&G.folder,D={method:"post"};k&&(D.query=k.createPostQuery(),null!=z&&("string"==typeof z?D.query.text=z:"object"==typeof z&&(D.query.text=JSON.stringify(z))));let F=this.userContentUrl;return C&&(F+="/"+("string"==typeof C?C:C.id)),this.portal.request(F+"/addItem",D).then(B=>(k.id=B.id,k.portal=this.portal,k.loaded?k.reload():k.load()))}deleteItem(G){let k=this.userContentUrl;return G.ownerFolder&&(k+="/"+G.ownerFolder),this.portal.request(k+`/items/${G.id}/delete`,{method:"post"}).then(()=>{G.id=null,G.portal=null})}deleteItems(G){const k=this.userContentUrl+"/deleteItems",z=G.map(C=>C.id);if(z.length){const C={method:"post",query:{items:z.join(",")}};return this.portal.request(k,C).then(()=>{G.forEach(D=>{D.id=null,D.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){return this.portal.request(this.userContentUrl??"",{query:{num:1}}).then(k=>{let z;return z=k&&k.folders?k.folders.map(C=>{const D=A.fromJSON(C);return D.portal=this.portal,D}):[],z})}fetchGroups(){return this.portal.request(this.url??"").then(G=>{let k;return k=G&&G.groups?G.groups.map(z=>{const C=U.default.fromJSON(z);return C.portal=this.portal,C}):[],k})}fetchItems(G){const k=G??{};let z,C=this.userContentUrl??"";return k.folder&&(C+="/"+k.folder.id),Promise.resolve().then(g.bind(g,66673)).then(({default:D})=>(z=D,this.portal.request(C,{query:{folders:!1,num:k.num||10,start:k.start||1,sortField:k.sortField||"created",sortOrder:k.sortOrder||"asc"}}))).then(D=>{let F;return D&&D.items?(F=D.items.map(B=>{const $=z.fromJSON(B);return $.portal=this.portal,$}),Promise.all(F.map(B=>B.load())).catch(B=>B).then(()=>({items:F,nextStart:D.nextStart,total:D.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(G=>G.tags)}getThumbnailUrl(G){let k=this.thumbnailUrl;return k&&G&&(k+=`&w=${G}`),k}queryFavorites(G){return this.favGroupId?(this._favGroup||(this._favGroup=new U.default({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(G)):Promise.reject(new T.Z("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new T.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(G){if(!G)return null;if(G.declaredClass)throw new Error("JSON object is already hydrated");const k=new N;return k.sourceJSON=G,k.read(G),k}};(0,E._)([(0,Z.Cb)()],J.prototype,"access",void 0),(0,E._)([(0,Z.Cb)({type:Date})],J.prototype,"created",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"culture",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"description",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"email",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"favGroupId",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"fullName",void 0),(0,E._)([(0,Z.Cb)({type:Date})],J.prototype,"modified",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"orgId",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"portal",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"preferredView",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"privileges",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"region",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"role",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"roleId",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"sourceJSON",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"thumbnail",void 0),(0,E._)([(0,Z.Cb)({readOnly:!0})],J.prototype,"thumbnailUrl",null),(0,E._)([(0,Z.Cb)()],J.prototype,"units",void 0),(0,E._)([(0,Z.Cb)({readOnly:!0})],J.prototype,"userContentUrl",null),(0,E._)([(0,Z.Cb)({readOnly:!0})],J.prototype,"url",null),(0,E._)([(0,Z.Cb)()],J.prototype,"username",void 0),(0,E._)([(0,Z.Cb)()],J.prototype,"userType",void 0),J=N=(0,E._)([(0,V.j)("esri.portal.PortalUser")],J);const Q=J},39712:(He,Pe,g)=>{"use strict";g.d(Pe,{$o:()=>U,Kz:()=>J,Ss:()=>Q,_$:()=>W,ck:()=>A,qj:()=>V});var E=g(71670),T=g(21789),w=g(68230),Z=g(83550);function se(){return(se=(0,E.Z)(function*(G){const k=G.spatialReference;if(k.isWGS84)return G.clone();if(k.isWebMercator)return(0,Z.Sx)(G);const z=w.Z.WGS84;return yield(0,T.iQ)(k,z),(0,T.iV)(G,z)})).apply(this,arguments)}function V(G,k){if(!W(G,k)){const z=G.typeKeywords;z?z.push(k):G.typeKeywords=[k]}}function W(G,k){return!!G.typeKeywords?.includes(k)}function A(G,k){const z=G.typeKeywords;if(z){const C=z.indexOf(k);C>-1&&z.splice(C,1)}}function U(G){return N.apply(this,arguments)}function N(){return N=(0,E.Z)(function*(G){const k=G.clone().normalize();let z;if(k.length>1)for(const C of k)z?C.width>z.width&&(z=C):z=C;else z=k[0];return function x(G){return se.apply(this,arguments)}(z)}),N.apply(this,arguments)}const J={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"};function Q(G){const{portal:k,isOrgItem:z,itemControl:C}=G,D=k.user?.privileges;let F=!D||D.includes("features:user:edit"),B=!!z&&!!D?.includes("features:user:fullEdit");const $="update"===C||"admin"===C;return $?B=F=!0:B&&(F=!0),{features:{edit:F,fullEdit:B},content:{updateItem:$}}}},40930:(He,Pe,g)=>{"use strict";g.d(Pe,{P:()=>Z,a:()=>w});const E=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,T={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function w(x){const se=x?.match(E);if(!se)return null;const[,V,W,A]=se;if(!V)return null;let U=null,N=null,J=null;const{devext:Q,qaext:G,www:k}=T;if(W)if(U=V,A)switch(A.toLowerCase()){case"devext":({customBaseUrl:N,portalHostname:J}=Q);break;case"qa":({customBaseUrl:N,portalHostname:J}=G);break;default:return null}else({customBaseUrl:N,portalHostname:J}=k);else switch(V.toLowerCase()){case"devext":({customBaseUrl:N,portalHostname:J}=Q);break;case"qaext":({customBaseUrl:N,portalHostname:J}=G);break;case"www":({customBaseUrl:N,portalHostname:J}=k);break;default:return null}return{customBaseUrl:N,isPortal:!1,portalHostname:J,urlKey:U}}function Z(x){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(x)}},87406:(He,Pe,g)=>{"use strict";g.d(Pe,{v:()=>T});const T=(0,g(63321).w)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},53108:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>te});var X,E=g(71670),T=g(18100),w=g(97708),Z=g(63321),x=g(88684),se=g(28191),V=g(53661),W=g(9497),A=g(36734),U=g(4139),N=g(66508),J=g(20891),Q=g(70425),G=g(83382),k=g(21230),z=g(57712),C=g(75476),D=g(12852),F=g(59122),B=g(81976),$=g(77238);const Y="percent-of-total",ae="field",he=new Z.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:Y,esriNormalizeByField:ae}),ne=(0,G.se)(D.Z);let ue=X=class extends((0,C.W)(z.Z)){constructor(ie){super(ie),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(ie,fe,_e){if(!Array.isArray(ie))return;let de=fe.minValue;return ie.map(Oe=>{const re=new D.Z;return re.read(Oe,_e),null==re.minValue&&(re.minValue=de),null==re.maxValue&&(re.maxValue=re.minValue),de=re.maxValue,re})}writeClassBreakInfos(ie,fe,_e,de){const Oe=ie.map(re=>re.write({},de));this._areClassBreaksConsecutive()&&Oe.forEach(re=>delete re.classMinValue),fe[_e]=Oe}castField(ie){return null==ie?ie:"function"==typeof ie?(se.Z.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,G.Zs)(ie)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let ie=this._get("normalizationType");const fe=!!this.normalizationField,_e=null!=this.normalizationTotal;return fe||_e?(ie=fe&&ae||_e&&Y||null,fe&&_e&&se.Z.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):ie!==ae&&ie!==Y||(ie=null),ie}set normalizationType(ie){this._set("normalizationType",ie)}addClassBreakInfo(ie,fe,_e){let de=null;de="number"==typeof ie?new D.Z({minValue:ie,maxValue:fe,symbol:(0,w.se)(_e)}):ne((0,x.d9)(ie)),this.classBreakInfos.push(de),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(ie,fe){const _e=this.classBreakInfos.length;for(let de=0;de<_e;de++){const Oe=[this.classBreakInfos[de].minValue,this.classBreakInfos[de].maxValue];if(Oe[0]===ie&&Oe[1]===fe){this.classBreakInfos.splice(de,1);break}}}getBreakIndex(ie,fe){return this.valueExpression&&((0,V.Wi)(fe)||(0,V.Wi)(fe.arcade))&&se.Z.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(ie,fe):this._getBreakIndexForField(ie)}getClassBreakInfo(ie,fe){var _e=this;return(0,E.Z)(function*(){let de=fe;_e.valueExpression&&((0,V.Wi)(fe)||(0,V.Wi)(fe.arcade))&&(de={...de,arcade:yield(0,$.LC)()});const Oe=_e.getBreakIndex(ie,de);return-1!==Oe?_e.classBreakInfos[Oe]:null})()}getSymbol(ie,fe){if(this.valueExpression&&((0,V.Wi)(fe)||(0,V.Wi)(fe.arcade)))return void se.Z.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const _e=this.getBreakIndex(ie,fe);return _e>-1?this.classBreakInfos[_e].symbol:this.defaultSymbol}getSymbolAsync(ie,fe){var _e=this;return(0,E.Z)(function*(){let de=fe;if(_e.valueExpression&&((0,V.Wi)(fe)||(0,V.Wi)(fe.arcade))){const re=yield(0,$.LC)(),{arcadeUtils:le}=re;le.hasGeometryOperations(_e.valueExpression)&&(yield le.enableGeometryOperations()),de={...de,arcade:re}}const Oe=_e.getBreakIndex(ie,de);return Oe>-1?_e.classBreakInfos[Oe].symbol:_e.defaultSymbol})()}getSymbols(){const ie=[];return this.classBreakInfos.forEach(fe=>{fe.symbol&&ie.push(fe.symbol)}),this.defaultSymbol&&ie.push(this.defaultSymbol),ie}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((ie,fe)=>ie+fe.getAttributeHash(),"")}getMeshHash(){const ie=JSON.stringify(this.backgroundFillSymbol),fe=JSON.stringify(this.defaultSymbol),_e=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${ie}.${fe}.${this.classBreakInfos.reduce((de,Oe)=>de+Oe.getMeshHash(),"")}.${_e}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new X({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,x.d9)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,x.d9)(this.visualVariables),legendOptions:(0,x.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}collectRequiredFields(ie,fe){var _e=this;return(0,E.Z)(function*(){const de=[_e.collectVVRequiredFields(ie,fe),_e.collectSymbolFields(ie,fe)];yield Promise.all(de)})()}collectSymbolFields(ie,fe){var _e=this;return(0,E.Z)(function*(){const de=[..._e.getSymbols().map(Oe=>Oe.collectRequiredFields(ie,fe)),(0,k.io)(ie,fe,_e.valueExpression)];(0,k.AB)(ie,fe,_e.field),(0,k.AB)(ie,fe,_e.normalizationField),yield Promise.all(de)})()}_getBreakIndexForExpression(ie,fe){const{viewingMode:_e,scale:de,spatialReference:Oe,arcade:re}=(0,V.Pt)(fe,{}),{valueExpression:le}=this;let ce=this._compiledValueExpression.valueExpression===le?this._compiledValueExpression.compiledFunction:null;const ve=(0,V.Wg)(re).arcadeUtils;if(!ce){const ge=ve.createSyntaxTree(le);ce=ve.createFunction(ge),this._compiledValueExpression.compiledFunction=ce}this._compiledValueExpression.valueExpression=le;const Te=ve.executeFunction(ce,ve.createExecContext(ie,ve.getViewInfo({viewingMode:_e,scale:de,spatialReference:Oe})));return this._getBreakIndexfromInfos(Te)}_getBreakIndexForField(ie){const _e=ie.attributes,de=this.normalizationType;let Oe=parseFloat(_e[this.field]);if(de){const re=this.normalizationTotal,le=parseFloat(this.normalizationField?_e[this.normalizationField]:void 0);if("log"===de)Oe=Math.log(Oe)*Math.LOG10E;else if(de!==Y||null==re||isNaN(re)){if(de===ae&&!isNaN(le)){if(isNaN(Oe)||isNaN(le))return-1;Oe/=le}}else Oe=Oe/re*100}return this._getBreakIndexfromInfos(Oe)}_getBreakIndexfromInfos(ie){const fe=this.isMaxInclusive;if(null!=ie&&"number"==typeof ie&&!isNaN(ie))for(let _e=0;_e<this.classBreakInfos.length;_e++){const de=[this.classBreakInfos[_e].minValue,this.classBreakInfos[_e].maxValue];if(de[0]<=ie&&(fe?ie<=de[1]:ie<de[1]))return _e}return-1}_areClassBreaksConsecutive(){const ie=this.classBreakInfos,fe=ie.length;for(let _e=1;_e<fe;_e++)if(ie[_e-1].maxValue!==ie[_e].minValue)return!1;return!0}};(0,T._)([(0,W.Cb)(F.KK)],ue.prototype,"backgroundFillSymbol",void 0),(0,T._)([(0,W.Cb)({type:[D.Z]})],ue.prototype,"classBreakInfos",void 0),(0,T._)([(0,N.r)("classBreakInfos")],ue.prototype,"readClassBreakInfos",null),(0,T._)([(0,Q.c)("classBreakInfos")],ue.prototype,"writeClassBreakInfos",null),(0,T._)([(0,W.Cb)({type:String,json:{write:!0}})],ue.prototype,"defaultLabel",void 0),(0,T._)([(0,W.Cb)(F.Gn)],ue.prototype,"defaultSymbol",void 0),(0,T._)([(0,W.Cb)({type:String,json:{write:!0}})],ue.prototype,"field",void 0),(0,T._)([(0,A.p)("field")],ue.prototype,"castField",null),(0,T._)([(0,W.Cb)({type:Boolean})],ue.prototype,"isMaxInclusive",void 0),(0,T._)([(0,W.Cb)({type:B.I,json:{write:!0}})],ue.prototype,"legendOptions",void 0),(0,T._)([(0,W.Cb)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],ue.prototype,"minValue",null),(0,T._)([(0,W.Cb)({type:String,json:{write:!0}})],ue.prototype,"normalizationField",void 0),(0,T._)([(0,W.Cb)({type:Number,cast:ie=>(0,G.q9)(ie),json:{write:!0}})],ue.prototype,"normalizationTotal",void 0),(0,T._)([(0,W.Cb)({type:he.apiValues,value:null,json:{type:he.jsonValues,read:he.read,write:he.write}})],ue.prototype,"normalizationType",null),(0,T._)([(0,U.J)({classBreaks:"class-breaks"})],ue.prototype,"type",void 0),(0,T._)([(0,W.Cb)({type:String,json:{write:!0}})],ue.prototype,"valueExpression",void 0),(0,T._)([(0,W.Cb)({type:String,json:{write:!0}})],ue.prototype,"valueExpressionTitle",void 0),ue=X=(0,T._)([(0,J.j)("esri.renderers.ClassBreaksRenderer")],ue);const te=ue},72750:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>G});var J,E=g(71670),T=g(18100),w=g(88684),Z=g(9497),se=(g(83382),g(20891)),V=g(70425),W=g(21230),A=g(57712),U=g(75476),N=g(41275);let Q=J=class extends((0,U.W)(A.Z)){constructor(k){super(k),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new N.DictionaryLoader(this.url,this.config,this.fieldMap)}writeData(k,z){k&&(z.scalingExpressionInfo={expression:k,returnType:"number"})}writeVisualVariables(k,z,C,D){D?.origin||super.writeVisualVariables(k,z,C,D)}clone(){return new J({config:(0,w.d9)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,w.d9)(this.fieldMap),url:(0,w.d9)(this.url),visualVariables:(0,w.d9)(this.visualVariables)})}getSymbolAsync(k,z){var C=this;return(0,E.Z)(function*(){return C._loader.getSymbolAsync(k,z)})()}collectRequiredFields(k,z){var C=this;return(0,E.Z)(function*(){yield C.collectVVRequiredFields(k,z),C.scaleExpression&&(yield(0,W.io)(k,z,C.scaleExpression));for(const D in C.fieldMap){const F=C.fieldMap[D];z.has(F)&&k.add(F)}})()}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((k,z)=>k+z.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,T._)([(0,Z.Cb)({type:N.DictionaryLoader})],Q.prototype,"_loader",null),(0,T._)([(0,Z.Cb)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Q.prototype,"config",void 0),(0,T._)([(0,Z.Cb)({type:Object,json:{write:!0}})],Q.prototype,"fieldMap",void 0),(0,T._)([(0,Z.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Q.prototype,"scaleExpression",void 0),(0,T._)([(0,V.c)("scaleExpression")],Q.prototype,"writeData",null),(0,T._)([(0,Z.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(k){return{enabled:!!k&&!!this.scaleExpression}}}}})],Q.prototype,"scaleExpressionTitle",void 0),(0,T._)([(0,Z.Cb)({type:String,json:{write:!0}})],Q.prototype,"url",void 0),(0,T._)([(0,V.c)("visualVariables")],Q.prototype,"writeVisualVariables",null),Q=J=(0,T._)([(0,se.j)("esri.renderers.DictionaryRenderer")],Q);const G=Q},11822:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>X});var k,E=g(71670),T=g(18100),w=g(25764),Z=g(88684),x=g(9497),V=(g(83382),g(4139)),W=g(20891),A=g(21230),U=g(57712),N=g(75476),J=g(46270),Q=g(44480);g(19420);let z=k=class extends Q.wq{constructor(){super(...arguments),this.unit=null}clone(){return new k({unit:this.unit})}};(0,T._)([(0,x.Cb)({type:String,json:{write:!0}})],z.prototype,"unit",void 0),z=k=(0,T._)([(0,W.j)("esri.renderers.support.DotDensityLegendOptions")],z);const C=z;var B,D=g(54084),F=g(21225);let $=B=class extends((0,N.W)(U.Z)){constructor(q){super(q),this.attributes=null,this.backgroundColor=new w.Z([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new F.Z,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(q){if(null==this.referenceScale)return this.dotValue;const Y=q/this.referenceScale*this.dotValue;return Y<1?1:Y}getSymbol(){return new D.Z({outline:this.outline})}getSymbolAsync(){var q=this;return(0,E.Z)(function*(){return q.getSymbol()})()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((q,Y)=>q+Y.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new B({attributes:(0,Z.d9)(this.attributes),backgroundColor:(0,Z.d9)(this.backgroundColor),dotBlendingEnabled:(0,Z.d9)(this.dotBlendingEnabled),dotShape:(0,Z.d9)(this.dotShape),dotSize:(0,Z.d9)(this.dotSize),dotValue:(0,Z.d9)(this.dotValue),legendOptions:(0,Z.d9)(this.legendOptions),outline:(0,Z.d9)(this.outline),referenceScale:(0,Z.d9)(this.referenceScale),visualVariables:(0,Z.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes?.map(Y=>Y.field||Y.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}collectRequiredFields(q,Y){var ae=this;return(0,E.Z)(function*(){yield ae.collectVVRequiredFields(q,Y);for(const he of ae.attributes??[])he.valueExpression&&(yield(0,A.io)(q,Y,he.valueExpression)),he.field&&q.add(he.field)})()}};(0,T._)([(0,x.Cb)({type:[J.Z],json:{write:!0}})],$.prototype,"attributes",void 0),(0,T._)([(0,x.Cb)({type:w.Z,json:{write:!0}})],$.prototype,"backgroundColor",void 0),(0,T._)([(0,x.Cb)({type:Boolean,json:{write:!0}})],$.prototype,"dotBlendingEnabled",void 0),(0,T._)([(0,x.Cb)({type:String,json:{write:!1}})],$.prototype,"dotShape",void 0),(0,T._)([(0,x.Cb)({type:Number,json:{write:!0}})],$.prototype,"dotSize",void 0),(0,T._)([(0,x.Cb)({type:C,json:{write:!0}})],$.prototype,"legendOptions",void 0),(0,T._)([(0,x.Cb)({type:F.Z,json:{default:null,write:!0}})],$.prototype,"outline",void 0),(0,T._)([(0,x.Cb)({type:Number,json:{write:!0}})],$.prototype,"dotValue",void 0),(0,T._)([(0,x.Cb)({type:Number,json:{write:!0}})],$.prototype,"referenceScale",void 0),(0,T._)([(0,x.Cb)({type:Number,json:{write:!0}})],$.prototype,"seed",void 0),(0,T._)([(0,V.J)({dotDensity:"dot-density"})],$.prototype,"type",void 0),$=B=(0,T._)([(0,W.j)("esri.renderers.DotDensityRenderer")],$);const X=$},75993:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>ie});var E=g(71670),T=g(18100),w=g(25764),x=(g(97708),g(60215)),se=g(88684),V=g(28191),W=g(91409),A=g(55798),U=g(9497),J=(g(83382),g(38904)),Q=g(4139),G=g(20891),k=g(21230),z=g(57712),C=g(60754),D=g(22713),F=g(94904),B=g(44480);g(19420);let X=class extends((0,F.J)(B.wq)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,T._)([(0,U.Cb)({type:String,json:{write:!0}})],X.prototype,"minLabel",void 0),(0,T._)([(0,U.Cb)({type:String,json:{write:!0}})],X.prototype,"maxLabel",void 0),(0,T._)([(0,U.Cb)({type:String,json:{write:!0}})],X.prototype,"title",void 0),X=(0,T._)([(0,G.j)("esri.renderers.support.HeatmapLegendOptions")],X);var ae,q=g(45811),Y=g(84738);const he="esri.renderers.HeatmapRenderer",ne=V.Z.getLogger(he);function ue(fe){if(null!=fe){const{maxDensity:_e,minDensity:de,radius:Oe}=fe;if(null!=_e||null!=de||null!=Oe){const{blurRadius:re,maxPixelIntensity:le,minPixelIntensity:ce,...ve}=fe;return ve}}return fe}let te=ae=class extends z.Z{constructor(fe){super(fe),this.authoringInfo=null,this.colorStops=[new D.Z({ratio:0,color:new w.Z("rgba(255, 140, 0, 0)")}),new D.Z({ratio:.75,color:new w.Z("rgba(255, 140, 0, 1)")}),new D.Z({ratio:.9,color:new w.Z("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(fe){return ue(fe)}get blurRadius(){return(0,q.AJ)(this.radius)}set blurRadius(fe){const _e=this.maxPixelIntensity,de=this.minPixelIntensity;this._set("radius",(0,q.k0)(fe)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",_e*this._pixelIntensityToDensity),this._set("minDensity",de*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(fe){this._set("maxDensity",fe*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(fe){this._set("minDensity",fe*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(q.nu**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(fe,_e){this._warnedProps[fe]||"user"===(0,J.vw)(this).getDefaultOrigin()&&(this._warnedProps[fe]=!0,(0,W.Os)(()=>{(0,x.Mr)(ne,fe,{replacement:`${String(_e)} (suggested value: ${this._get(_e)})`,version:"4.24"})}))}read(fe,_e){fe=ue(fe),super.read(fe,_e)}getSymbol(){return new Y.Z}getSymbolAsync(){var fe=this;return(0,E.Z)(function*(){return fe.getSymbol()})()}getSymbols(){return[this.getSymbol()]}collectRequiredFields(fe,_e){var de=this;return(0,E.Z)(function*(){const Oe=de.field,re=de.valueExpression;Oe&&"string"==typeof Oe&&(yield(0,k.AB)(fe,_e,Oe)),re&&"string"==typeof re&&(yield(0,k.io)(fe,_e,re))})()}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new ae({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:(0,se.d9)(this.colorStops),field:this.field,legendOptions:(0,se.d9)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,T._)([(0,U.Cb)({type:C.Z,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],te.prototype,"authoringInfo",void 0),(0,T._)([(0,U.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],te.prototype,"blurRadius",null),(0,T._)([(0,U.Cb)({type:[D.Z],json:{write:!0}})],te.prototype,"colorStops",void 0),(0,T._)([(0,U.Cb)({type:String,json:{write:!0}})],te.prototype,"field",void 0),(0,T._)([(0,U.Cb)({type:Number,json:{write:{overridePolicy:(fe,_e,de)=>({enabled:null==de})},origins:{"web-scene":{write:!1}}}})],te.prototype,"fieldOffset",void 0),(0,T._)([(0,U.Cb)({type:X,json:{write:!0}})],te.prototype,"legendOptions",void 0),(0,T._)([(0,U.Cb)({type:Number,json:{write:!0}})],te.prototype,"maxDensity",void 0),(0,T._)([(0,U.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],te.prototype,"maxPixelIntensity",null),(0,T._)([(0,U.Cb)({type:Number,json:{write:!0}})],te.prototype,"minDensity",void 0),(0,T._)([(0,U.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],te.prototype,"minPixelIntensity",null),(0,T._)([(0,U.Cb)({type:Number,cast:A.t_,json:{write:!0}})],te.prototype,"radius",void 0),(0,T._)([(0,U.Cb)({type:Number,range:{min:0},json:{default:0,write:!0}})],te.prototype,"referenceScale",void 0),(0,T._)([(0,Q.J)({heatmap:"heatmap"})],te.prototype,"type",void 0),(0,T._)([(0,U.Cb)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],te.prototype,"valueExpression",void 0),(0,T._)([(0,U.Cb)({type:String})],te.prototype,"valueExpressionTitle",void 0),(0,T._)([(0,U.Cb)({readOnly:!0})],te.prototype,"_pixelIntensityToDensity",null),te=ae=(0,T._)([(0,G.j)(he)],te);const ie=te},33098:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Y});var E=g(71670),T=g(18100),w=g(25764),x=(g(97708),g(94904)),se=g(53661),V=g(55798),W=g(9497),N=(g(83382),g(19420),g(4139)),J=g(20891),Q=g(21230),G=g(57712),k=g(75476),z=g(46270),C=g(44480);let D=class extends((0,x.J)(C.wq)){constructor(){super(...arguments),this.color=new w.Z([0,0,0,0]),this.label=null,this.threshold=0}};(0,T._)([(0,W.Cb)({type:w.Z,json:{write:!0}})],D.prototype,"color",void 0),(0,T._)([(0,W.Cb)({type:String,json:{write:!0}})],D.prototype,"label",void 0),(0,T._)([(0,W.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],D.prototype,"threshold",void 0),D=(0,T._)([(0,J.j)("esri.renderers.support.OthersCategory")],D);let F=class extends((0,x.J)(C.wq)){constructor(){super(...arguments),this.title=null}};(0,T._)([(0,W.Cb)({type:String,json:{write:!0}})],F.prototype,"title",void 0),F=(0,T._)([(0,J.j)("esri.renderers.support.PieChartLegendOptions")],F);var B=g(84738),$=g(54084),X=g(21225);let q=class extends((0,k.W)((0,x.J)(G.Z))){constructor(ae){super(ae),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new w.Z([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new D,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new B.Z({size:this.size?this.size/2+(this.outline?.width||0):0})}getSymbolAsync(){var ae=this;return(0,E.Z)(function*(){return ae.getSymbol()})()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(se.pC)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((ae,he)=>ae+he.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((ae,he)=>ae+JSON.stringify(he),"")}collectRequiredFields(ae,he){var ne=this;return(0,E.Z)(function*(){yield ne.collectVVRequiredFields(ae,he);for(const ue of ne.attributes)ue.valueExpression&&(yield(0,Q.io)(ae,he,ue.valueExpression)),ue.field&&ae.add(ue.field)})()}};(0,T._)([(0,W.Cb)({type:[z.Z],json:{write:!0}})],q.prototype,"attributes",void 0),(0,T._)([(0,W.Cb)({type:$.Z,json:{default:null,write:!0}})],q.prototype,"backgroundFillSymbol",void 0),(0,T._)([(0,W.Cb)({type:w.Z,json:{write:!0}})],q.prototype,"defaultColor",void 0),(0,T._)([(0,W.Cb)({type:String,json:{write:!0}})],q.prototype,"defaultLabel",void 0),(0,T._)([(0,W.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],q.prototype,"holePercentage",void 0),(0,T._)([(0,W.Cb)({type:D,json:{write:!0}})],q.prototype,"othersCategory",void 0),(0,T._)([(0,W.Cb)({type:F,json:{write:!0}})],q.prototype,"legendOptions",void 0),(0,T._)([(0,W.Cb)({type:X.Z,json:{default:null,write:!0}})],q.prototype,"outline",void 0),(0,T._)([(0,W.Cb)({type:Number,cast:V.t_,json:{write:!0}})],q.prototype,"size",void 0),(0,T._)([(0,N.J)({pieChart:"pie-chart"})],q.prototype,"type",void 0),q=(0,T._)([(0,J.j)("esri.renderers.PieChartRenderer")],q);const Y=q},57712:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>J});var E=g(71670),T=g(18100),w=g(63321),Z=g(44480),x=g(9497),W=(g(83382),g(19420),g(20891)),A=g(60754);const U=new w.X({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let N=class extends Z.wq{constructor(Q){super(Q),this.authoringInfo=null,this.type=null}getRequiredFields(Q){var G=this;return(0,E.Z)(function*(){if(!G.collectRequiredFields)return[];const k=new Set;return yield G.collectRequiredFields(k,Q),Array.from(k).sort()})()}getSymbol(Q,G){}getSymbolAsync(Q,G){return(0,E.Z)(function*(){})()}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,T._)([(0,x.Cb)({type:A.Z,json:{write:!0}})],N.prototype,"authoringInfo",void 0),(0,T._)([(0,x.Cb)({type:U.apiValues,readOnly:!0,json:{type:U.jsonValues,read:!1,write:{writer:U.write,ignoreOrigin:!0}}})],N.prototype,"type",void 0),N=(0,T._)([(0,W.j)("esri.renderers.Renderer")],N);const J=N},79191:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var N,E=g(71670),T=g(18100),w=g(88684),Z=g(9497),se=(g(83382),g(4139)),V=g(20891),W=g(57712),A=g(75476),U=g(59122);let J=N=class extends((0,A.W)(W.Z)){constructor(G){super(G),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(G,k){var z=this;return(0,E.Z)(function*(){yield Promise.all([z.collectSymbolFields(G,k),z.collectVVRequiredFields(G,k)])})()}collectSymbolFields(G,k){var z=this;return(0,E.Z)(function*(){yield Promise.all(z.getSymbols().map(C=>C.collectRequiredFields(G,k)))})()}getSymbol(G,k){return this.symbol}getSymbolAsync(G,k){var z=this;return(0,E.Z)(function*(){return z.symbol})()}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((G,k)=>G+k.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((G,k)=>G+JSON.stringify(k),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new N({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:(0,w.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};(0,T._)([(0,Z.Cb)({type:String,json:{write:!0}})],J.prototype,"description",void 0),(0,T._)([(0,Z.Cb)({type:String,json:{write:!0}})],J.prototype,"label",void 0),(0,T._)([(0,Z.Cb)(U.Gn)],J.prototype,"symbol",void 0),(0,T._)([(0,se.J)({simple:"simple"})],J.prototype,"type",void 0),J=N=(0,T._)([(0,V.j)("esri.renderers.SimpleRenderer")],J);const Q=J},70383:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>$e});var E=g(71670),T=g(18100),w=g(97708),Z=g(32995),x=g(88684),se=g(28191),V=g(53661),W=g(44054),A=g(7521),U=g(9497),N=g(36734),J=g(4139),Q=g(66508),G=g(20891),k=g(70425),z=g(51118),C=g(83382),D=g(21230),F=g(37753),B=g(57712),$=g(75476),X=g(59122),q=g(81976),Y=g(94904),ae=g(44480);g(19420);let ne=class extends((0,Y.J)(ae.wq)){constructor(Ce){super(Ce),this.value=null,this.value2=null,this.value3=null}};(0,T._)([(0,U.Cb)(X.GY)],ne.prototype,"value",void 0),(0,T._)([(0,U.Cb)(X.GY)],ne.prototype,"value2",void 0),(0,T._)([(0,U.Cb)(X.GY)],ne.prototype,"value3",void 0),ne=(0,T._)([(0,G.j)("esri.renderers.support.UniqueValue")],ne);const ue=ne;let te=class extends((0,Y.J)(ae.wq)){constructor(Ce){super(Ce),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(Ce){if(null==Ce)return null;const Ie=typeof(Ce=Array.isArray(Ce)?Ce:[Ce])[0];return"string"===Ie||"number"===Ie?Ce.map(je=>new ue({value:je})):"object"===Ie?Ce[0]instanceof ue?Ce:Ce.map(je=>new ue(je)):null}};(0,T._)([(0,U.Cb)({type:String,json:{write:!0}})],te.prototype,"description",void 0),(0,T._)([(0,U.Cb)({type:String,json:{write:!0}})],te.prototype,"label",void 0),(0,T._)([(0,U.Cb)(X.Gn)],te.prototype,"symbol",void 0),(0,T._)([(0,U.Cb)({type:[ue],json:{type:[[String]],read:{reader:Ce=>Ce?Ce.map(Ie=>new ue({value:Ie[0],value2:Ie[1],value3:Ie[2]})):null},write:{writer:(Ce,Ie)=>{const je=[];for(const Je of Ce){const oe=[Je.value,Je.value2,Je.value3].filter(V.pC).map(be=>be.toString());je.push(oe)}Ie.values=je}}}})],te.prototype,"values",void 0),(0,T._)([(0,N.p)("values")],te.prototype,"castValues",null),te=(0,T._)([(0,G.j)("esri.renderers.support.UniqueValueClass")],te);const ie=te;let fe=class extends((0,Y.J)(ae.wq)){constructor(Ce){super(Ce),this.heading=null,this.classes=null}};(0,T._)([(0,U.Cb)({type:String,json:{write:!0}})],fe.prototype,"heading",void 0),(0,T._)([(0,U.Cb)({type:[ie],json:{write:!0}})],fe.prototype,"classes",void 0),fe=(0,T._)([(0,G.j)("esri.renderers.support.UniqueValueGroup")],fe);const _e=fe;var ve,de=g(11457),Oe=g(77238),re=g(29184),le=g(32569),ce=g(13856);const Te="esri.renderers.UniqueValueRenderer",ge=se.Z.getLogger(Te),Ae="uvInfos-watcher",De="uvGroups-watcher",me=(0,C.se)(de.Z);let we=ve=class extends((0,$.W)(B.Z)){constructor(Ce){super(Ce),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(Ie,je){if(!Ie&&!je)return;if(!Ie||!je)return{type:"complete",oldValue:Ie,newValue:je};let Je=!1;const oe={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let be=0;be<je.length;be++){const Ue=Ie.find(Fe=>Fe.value===je[be].value);Ue?(0,z.Hg)(Ue,je[be])?(oe.changed.push({type:"complete",oldValue:Ue,newValue:je[be]}),Je=!0):oe.unchanged.push({oldValue:Ue,newValue:je[be]}):(oe.added.push(je[be]),Je=!0)}for(let be=0;be<Ie.length;be++)je.find(Ue=>Ue.value===Ie[be].value)||(oe.removed.push(Ie[be]),Je=!0);return Je?oe:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(Ce){this._set("field",Ce),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(Ce){return null==Ce||"function"==typeof Ce?Ce:(0,C.Zs)(Ce)}writeField(Ce,Ie,je,Je){"string"==typeof Ce?Ie[je]=Ce:Je&&Je.messages?Je.messages.push(new Z.Z("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):ge.error(".field: cannot write field to JSON since it's not a string value")}set field2(Ce){this._set("field2",Ce),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(Ce){this._set("field3",Ce),this._updateUniqueValues()}set valueExpression(Ce){this._set("valueExpression",Ce),this._updateUniqueValues()}set defaultSymbol(Ce){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",Ce)}set fieldDelimiter(Ce){this._set("fieldDelimiter",Ce),this._updateUniqueValues()}readPortal(Ce,Ie,je){return je.portal||F.Z.getDefault()}readStyleOrigin(Ce,Ie,je){if(Ie.styleName)return Object.freeze({styleName:Ie.styleName});if(Ie.styleUrl){const Je=(0,re.f)(Ie.styleUrl,je);return Object.freeze({styleUrl:Je})}}writeStyleOrigin(Ce,Ie,je,Je){Ce.styleName?Ie.styleName=Ce.styleName:Ce.styleUrl&&(Ie.styleUrl=(0,re.t)(Ce.styleUrl,Je))}set uniqueValueGroups(Ce){this.styleOrigin?ge.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",Ce),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(Ce){this.styleOrigin?ge.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",Ce),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(Ce,Ie){if(this.styleOrigin)return void ge.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let je;je="object"==typeof Ce?me(Ce):new de.Z({value:Ce,symbol:(0,w.se)(Ie)}),this.uniqueValueInfos?.push(je),this._valueInfoMap[je.value]=je,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(Ce){if(this.styleOrigin)return void ge.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const Ie=this.uniqueValueInfos;if(Ie)for(let je=0;je<Ie.length;je++)if(Ie[je].value===Ce+""){delete this._valueInfoMap[Ce],Ie.splice(je,1);break}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}getUniqueValueInfo(Ce,Ie){var je=this;return(0,E.Z)(function*(){let Je=Ie;return je.valueExpression&&((0,V.Wi)(Ie)||(0,V.Wi)(Ie.arcade))&&(Je={...Je,arcade:yield(0,Oe.LC)()}),je._getUniqueValueInfo(Ce,Je)})()}getSymbol(Ce,Ie){if(this.valueExpression&&((0,V.Wi)(Ie)||(0,V.Wi)(Ie.arcade)))return void ge.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const je=this._getUniqueValueInfo(Ce,Ie);return je&&je.symbol||this.defaultSymbol}getSymbolAsync(Ce,Ie){var je=this;return(0,E.Z)(function*(){let Je=Ie;if(je.valueExpression&&((0,V.Wi)(Je)||(0,V.Wi)(Je.arcade))){const be=yield(0,Oe.LC)(),{arcadeUtils:Ue}=be;Ue.hasGeometryOperations(je.valueExpression)&&(yield Ue.enableGeometryOperations()),Je={...Je,arcade:be}}const oe=je._getUniqueValueInfo(Ce,Je);return oe&&oe.symbol||je.defaultSymbol})()}getSymbols(){const Ce=[];for(const Ie of this.uniqueValueInfos??[])Ie.symbol&&Ce.push(Ie.symbol);return this.defaultSymbol&&Ce.push(this.defaultSymbol),Ce}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((Ce,Ie)=>Ce+Ie.getAttributeHash(),"")}getMeshHash(){const Ce=JSON.stringify(this.backgroundFillSymbol),Ie=JSON.stringify(this.defaultSymbol),je=this.uniqueValueInfos?.reduce((Je,oe)=>Je+oe.getMeshHash(),"");return`${Ce}.${Ie}.${je}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const Ce=new ve({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,x.d9)(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,x.d9)(this.visualVariables),legendOptions:(0,x.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,x.d9)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(Ce._isDefaultSymbolDerived=!0),Ce._set("portal",this.portal);const Ie=(0,x.d9)(this.uniqueValueInfos),je=(0,x.d9)(this.uniqueValueGroups);return this.styleOrigin&&(Ce._set("styleOrigin",Object.freeze((0,x.d9)(this.styleOrigin))),Object.freeze(Ie),Object.freeze(je)),Ce._set("uniqueValueInfos",Ie),Ce._updateValueInfoMap(),Ce._set("uniqueValueGroups",je),Ce._isInfosSource=this._isInfosSource,Ce._watchUniqueValueInfosAndGroups(),Ce}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}collectRequiredFields(Ce,Ie){var je=this;return(0,E.Z)(function*(){const Je=[je.collectVVRequiredFields(Ce,Ie),je.collectSymbolFields(Ce,Ie)];yield Promise.all(Je)})()}collectSymbolFields(Ce,Ie){var je=this;return(0,E.Z)(function*(){const Je=[...je.getSymbols().map(oe=>oe.collectRequiredFields(Ce,Ie)),(0,D.io)(Ce,Ie,je.valueExpression)];(0,D.AB)(Ce,Ie,je.field),(0,D.AB)(Ce,Ie,je.field2),(0,D.AB)(Ce,Ie,je.field3),yield Promise.all(Je)})()}populateFromStyle(){return(0,le.n2)(this.styleOrigin,{portal:this.portal}).then(Ce=>{const Ie=[];return this._valueInfoMap={},Ce&&Ce.data&&Array.isArray(Ce.data.items)&&Ce.data.items.forEach(je=>{const Je=new ce.Z({styleUrl:Ce.styleUrl,styleName:Ce.styleName,portal:this.portal,name:je.name});this.defaultSymbol||je.name!==Ce.data.defaultItem||(this.defaultSymbol=Je,this._isDefaultSymbolDerived=!0);const oe=new de.Z({value:je.name,symbol:Je});Ie.push(oe),this._valueInfoMap[je.name]=oe}),this._set("uniqueValueInfos",Object.freeze(Ie)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}_updateUniqueValues(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:Ce}=this;if(Ce)for(const Ie of Ce)this._valueInfoMap[Ie.value+""]=Ie}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(Ae);const{uniqueValueInfos:Ce}=this;if(Ce){const Ie=[];for(const je of Ce)Ie.push((0,A.YP)(()=>({symbol:je.symbol,value:je.value,label:je.label,description:je.description}),(Je,oe)=>{Je!==oe&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(Ie,Ae)}}_watchUniqueValueGroups(){this.removeHandles(De);const{uniqueValueGroups:Ce}=this;if(Ce){const Ie=[];for(const je of Ce){Ie.push((0,A.YP)(()=>({classes:je.classes}),(Je,oe)=>{Je!==oe&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const Je of je.classes??[])Ie.push((0,A.YP)(()=>({symbol:Je.symbol,values:Je.values,label:Je.label,description:Je.description}),(oe,be)=>{oe!==be&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(Ie,De)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const Ce=[],{field:Ie,field2:je,field3:Je,fieldDelimiter:oe,uniqueValueGroups:be,valueExpression:Ue}=this;if(!Ie&&!Ue)return this._set("uniqueValueInfos",Ce),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const Fe=!(!Ie||!je);for(const Ke of be)for(const Ve of Ke.classes??[]){const{symbol:tt,label:rt,values:Ne,description:qe}=Ve;for(const ft of Ne??[]){const{value:Xe,value2:dt,value3:Qe}=ft,ot=[Xe];je&&ot.push(dt),Je&&ot.push(Qe);const ct=Fe?ot.join(oe||""):ot[0];Ce.push(new de.Z({symbol:tt,label:rt,value:ct,description:qe}))}}this._set("uniqueValueInfos",Ce),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(Ce=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:Ie,field2:je,valueExpression:Je,fieldDelimiter:oe,uniqueValueInfos:be}=this;if(!Ie&&!Je||!be.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const Ue=!(!Ie||!je),Fe=be.map(Ve=>{const{symbol:tt,label:rt,value:Ne,description:qe}=Ve,[ft,Xe,dt]=Ue?Ne?.toString()?.split(oe||"")||[]:[Ne];return new ie({symbol:tt,label:rt,description:qe,values:[new ue({value:ft,value2:Xe,value3:dt})]})}),Ke=[new _e({classes:Fe})];Ce&&Object.freeze(Ke),this._set("uniqueValueGroups",Ke),this._watchUniqueValueGroups()}_getUniqueValueInfo(Ce,Ie){return this.valueExpression?this._getUnqiueValueInfoForExpression(Ce,Ie):this._getUnqiueValueInfoForFields(Ce)}_getUnqiueValueInfoForExpression(Ce,Ie){const{viewingMode:je,scale:Je,spatialReference:oe,arcade:be}=(0,V.Pt)(Ie,{});let Ue=this._cache.compiledFunc;const Fe=(0,V.Wg)(be).arcadeUtils;if(!Ue){const Ve=Fe.createSyntaxTree(this.valueExpression);Ue=Fe.createFunction(Ve),this._cache.compiledFunc=Ue}const Ke=Fe.executeFunction(Ue,Fe.createExecContext(Ce,Fe.getViewInfo({viewingMode:je,scale:Je,spatialReference:oe})));return this._valueInfoMap[Ke+""]}_getUnqiueValueInfoForFields(Ce){const Ie=this.field,je=Ce.attributes;let Je;if("function"!=typeof Ie&&this.field2){const oe=this.field2,be=this.field3,Ue=[];Ie&&Ue.push(je[Ie]),oe&&Ue.push(je[oe]),be&&Ue.push(je[be]),Je=Ue.join(this.fieldDelimiter||"")}else"function"==typeof Ie?Je=Ie(Ce):Ie&&(Je=je[Ie]);return this._valueInfoMap[Je+""]}static fromPortalStyle(Ce,Ie){const je=new ve(Ie&&Ie.properties);je._set("styleOrigin",Object.freeze({styleName:Ce})),je._set("portal",Ie&&Ie.portal||F.Z.getDefault());const Je=je.populateFromStyle();return Je.catch(oe=>{ge.error(`#fromPortalStyle('${Ce}'[, ...])`,"Failed to create unique value renderer from style name",oe)}),Je}static fromStyleUrl(Ce,Ie){const je=new ve(Ie&&Ie.properties);je._set("styleOrigin",Object.freeze({styleUrl:Ce}));const Je=je.populateFromStyle();return Je.catch(oe=>{ge.error(`#fromStyleUrl('${Ce}'[, ...])`,"Failed to create unique value renderer from style URL",oe)}),Je}};(0,T._)([(0,U.Cb)({readOnly:!0})],we.prototype,"_cache",null),(0,T._)([(0,J.J)({uniqueValue:"unique-value"})],we.prototype,"type",void 0),(0,T._)([(0,U.Cb)(X.KK)],we.prototype,"backgroundFillSymbol",void 0),(0,T._)([(0,U.Cb)({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],we.prototype,"field",null),(0,T._)([(0,N.p)("field")],we.prototype,"castField",null),(0,T._)([(0,k.c)("field")],we.prototype,"writeField",null),(0,T._)([(0,U.Cb)({type:String,value:null,json:{write:!0}})],we.prototype,"field2",null),(0,T._)([(0,U.Cb)({type:String,value:null,json:{write:!0}})],we.prototype,"field3",null),(0,T._)([(0,U.Cb)({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],we.prototype,"orderByClassesEnabled",void 0),(0,T._)([(0,U.Cb)({type:String,value:null,json:{write:!0}})],we.prototype,"valueExpression",null),(0,T._)([(0,U.Cb)({type:String,json:{write:!0}})],we.prototype,"valueExpressionTitle",void 0),(0,T._)([(0,U.Cb)({type:q.I,json:{write:!0}})],we.prototype,"legendOptions",void 0),(0,T._)([(0,U.Cb)({type:String,json:{write:!0}})],we.prototype,"defaultLabel",void 0),(0,T._)([(0,U.Cb)((0,W.RH)({...X.Gn},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],we.prototype,"defaultSymbol",null),(0,T._)([(0,U.Cb)({type:String,value:null,json:{write:!0}})],we.prototype,"fieldDelimiter",null),(0,T._)([(0,U.Cb)({type:F.Z,readOnly:!0})],we.prototype,"portal",void 0),(0,T._)([(0,Q.r)("portal",["styleName"])],we.prototype,"readPortal",null),(0,T._)([(0,U.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],we.prototype,"styleOrigin",void 0),(0,T._)([(0,Q.r)("styleOrigin",["styleName","styleUrl"])],we.prototype,"readStyleOrigin",null),(0,T._)([(0,k.c)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],we.prototype,"writeStyleOrigin",null),(0,T._)([(0,U.Cb)({type:[_e],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(Ce,Ie,je)=>(Ie.uniqueValueGroups||function ye(Ce){const{field1:Ie,field2:je,field3:Je,fieldDelimiter:oe,uniqueValueInfos:be,valueExpression:Ue}=Ce,Fe=!(!Ie||!je);return[{classes:(be??[]).map(Ke=>{const{symbol:Ve,label:tt,value:rt,description:Ne}=Ke,[qe,ft,Xe]=Fe?rt?.toString()?.split(oe||"")||[]:[rt],dt=[];return(Ie||Ue)&&dt.push(qe),je&&dt.push(ft),Je&&dt.push(Xe),{symbol:Ve,label:tt,values:[dt],description:Ne}})}]}(Ie)).map(Je=>_e.fromJSON(Je,je))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],we.prototype,"uniqueValueGroups",null),(0,T._)([(0,U.Cb)({type:[de.Z],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],we.prototype,"uniqueValueInfos",null),we=ve=(0,T._)([(0,G.j)(Te)],we);const $e=we},75476:(He,Pe,g)=>{"use strict";g.d(Pe,{W:()=>ve});var E=g(71670),T=g(18100),w=g(53661),Z=g(9497),x=g(83382),V=(g(19420),g(66508)),W=g(20891),A=g(70425),U=g(21230);const J=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var k,Q=g(55291),G=g(27969);let z=k=class extends Q.Z{constructor(ge){super(ge),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(ge){ge&&Array.isArray(ge)&&(ge=ge.filter(Ae=>!!Ae)).sort((Ae,De)=>Ae.value-De.value),this._set("stops",ge)}clone(){return new k({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(ge=>ge.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(ge=>ge.value||0)}};(0,T._)([(0,Z.Cb)({readOnly:!0})],z.prototype,"cache",null),(0,T._)([(0,Z.Cb)({type:["color"],json:{type:["colorInfo"]}})],z.prototype,"type",void 0),(0,T._)([(0,Z.Cb)({type:String,json:{write:!0}})],z.prototype,"normalizationField",void 0),(0,T._)([(0,Z.Cb)({type:[G.Z],json:{write:!0}})],z.prototype,"stops",null),z=k=(0,T._)([(0,W.j)("esri.renderers.visualVariables.ColorVariable")],z);const C=z;var B,D=g(44480),F=g(7721);let $=B=class extends D.wq{constructor(ge){super(ge),this.label=null,this.opacity=null,this.value=null}readOpacity(ge,Ae){return(0,F.b)(Ae.transparency)}writeOpacity(ge,Ae,De){Ae[De]=(0,F.a)(ge)}clone(){return new B({label:this.label,opacity:this.opacity,value:this.value})}};(0,T._)([(0,Z.Cb)({type:String,json:{write:!0}})],$.prototype,"label",void 0),(0,T._)([(0,Z.Cb)({type:Number,json:{type:x.z8,write:{target:"transparency"}}})],$.prototype,"opacity",void 0),(0,T._)([(0,V.r)("opacity",["transparency"])],$.prototype,"readOpacity",null),(0,T._)([(0,A.c)("opacity")],$.prototype,"writeOpacity",null),(0,T._)([(0,Z.Cb)({type:Number,json:{write:!0}})],$.prototype,"value",void 0),$=B=(0,T._)([(0,W.j)("esri.renderers.visualVariables.support.OpacityStop")],$);const X=$;var q;let Y=q=class extends Q.Z{constructor(ge){super(ge),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(ge){ge&&Array.isArray(ge)&&(ge=ge.filter(Ae=>!!Ae)).sort((Ae,De)=>Ae.value-De.value),this._set("stops",ge)}clone(){return new q({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(ge=>ge.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(ge=>ge.value||0)}};(0,T._)([(0,Z.Cb)({readOnly:!0})],Y.prototype,"cache",null),(0,T._)([(0,Z.Cb)({type:["opacity"],json:{type:["transparencyInfo"]}})],Y.prototype,"type",void 0),(0,T._)([(0,Z.Cb)({type:String,json:{write:!0}})],Y.prototype,"normalizationField",void 0),(0,T._)([(0,Z.Cb)({type:[X],json:{write:!0}})],Y.prototype,"stops",null),Y=q=(0,T._)([(0,W.j)("esri.renderers.visualVariables.OpacityVariable")],Y);const ae=Y;var he=g(96238),ne=g(16563),ue=g(6365),te=g(63321),ie=g(28191),fe=g(23476);const _e={color:C,size:ne.Z,opacity:ae,rotation:he.Z},de=new te.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Oe=/^\[([^\]]+)\]$/i;let re=class extends ue.Z{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(ge){if(this._resetVariables(),(ge=ge&&ge.filter(Ae=>!!Ae))&&ge.length){for(const Ae of ge)switch(Ae.type){case"color":this.colorVariables.push(Ae);break;case"opacity":this.opacityVariables.push(Ae);break;case"rotation":this.rotationVariables.push(Ae);break;case"size":this.sizeVariables.push(Ae)}this.sizeVariables.length&&this.sizeVariables.some(Ae=>!!Ae.target)&&ge.sort((Ae,De)=>{let Se=null;return Se=Ae.target===De.target?0:Ae.target?1:-1,Se});for(let Ae=0;Ae<ge.length;Ae++)ge[Ae].index=Ae;this._set("visualVariables",ge)}else this._set("visualVariables",ge)}readVariables(ge,Ae,De){const{rotationExpression:Se,rotationType:me}=Ae,ye=Se&&Se.match(Oe),we=ye&&ye[1];if(we&&(ge||(ge=[]),ge.push({type:"rotationInfo",rotationType:me,field:we})),ge)return ge.map($e=>{const Ce=de.read($e.type),Ie=_e[Ce];Ie||(ie.Z.getLogger(this.declaredClass).warn(`Unknown variable type: ${Ce}`),De&&De.messages&&De.messages.push(new fe.Z("visual-variable:unsupported",`visualVariable of type '${Ce}' is not supported`,{definition:$e,context:De})));const je=new Ie;return je.read($e,De),je})}writeVariables(ge,Ae){const De=[];for(const Se of ge){const me=Se.toJSON(Ae);me&&De.push(me)}return De}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,T._)([(0,Z.Cb)()],re.prototype,"visualVariables",null),re=(0,T._)([(0,W.j)("esri.renderers.visualVariables.VisualVariableFactory")],re);const le=re,ce={base:Q.Z,key:"type",typeMap:{opacity:ae,color:C,rotation:he.Z,size:ne.Z}},ve=ge=>{let Ae=class extends ge{constructor(){super(...arguments),this._vvFactory=new le}set visualVariables(De){this._vvFactory.visualVariables=De,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(De,Se,me){return this._vvFactory.readVariables(De,Se,me)}writeVisualVariables(De,Se,me,ye){Se[me]=this._vvFactory.writeVariables(De,ye)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const De of this.visualVariables)if(De.arcadeRequired)return!0;return!1}hasVisualVariables(De,Se){return De?this.getVisualVariablesForType(De,Se).length>0:this.getVisualVariablesForType("size",Se).length>0||this.getVisualVariablesForType("color",Se).length>0||this.getVisualVariablesForType("opacity",Se).length>0||this.getVisualVariablesForType("rotation",Se).length>0}getVisualVariablesForType(De,Se){const me=this.visualVariables;return me?me.filter(ye=>ye.type===De&&("string"==typeof Se?ye.target===Se:!1!==Se||!ye.target)):[]}collectVVRequiredFields(De,Se){var me=this;return(0,E.Z)(function*(){let ye=[];me.visualVariables&&(ye=ye.concat(me.visualVariables));for(const we of ye)we&&(we.field&&(0,U.AB)(De,Se,we.field),we.normalizationField&&(0,U.AB)(De,Se,we.normalizationField),we.valueExpression&&(Te(we.valueExpression,De,Se)||(yield(0,U.io)(De,Se,we.valueExpression))))})()}};return(0,T._)([(0,Z.Cb)({types:[ce],value:null,json:{write:!0}})],Ae.prototype,"visualVariables",null),(0,T._)([(0,V.r)("visualVariables",["visualVariables","rotationType","rotationExpression"])],Ae.prototype,"readVisualVariables",null),(0,T._)([(0,A.c)("visualVariables")],Ae.prototype,"writeVisualVariables",null),Ae=(0,T._)([(0,W.j)("esri.renderers.mixins.VisualVariablesMixin")],Ae),Ae};function Te(ge,Ae,De){const Se=function N(ge){return ge.match(J)?.[1]?.replace(/\\'/g,"'")??null}(ge);return!!(0,w.pC)(Se)&&((0,U.AB)(Ae,De,Se),!0)}},46270:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>J});var U,E=g(18100),T=g(25764),w=g(44480),Z=g(28191),x=g(9497),se=g(36734),W=(g(19420),g(20891)),A=g(83382);let N=U=class extends w.wq{constructor(Q){super(Q),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(Q){return null==Q?Q:"function"==typeof Q?(Z.Z.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,A.Zs)(Q)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new U({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,E._)([(0,x.Cb)({type:T.Z,json:{type:[Number],write:!0}})],N.prototype,"color",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"field",void 0),(0,E._)([(0,se.p)("field")],N.prototype,"castField",null),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"label",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"valueExpression",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"valueExpressionTitle",void 0),N=U=(0,E._)([(0,W.j)("esri.renderers.support.AttributeColorInfo")],N);const J=N},60754:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Oe});var U,E=g(18100),T=g(63321),w=g(44480),Z=g(88684),x=g(9497),se=g(83382),V=g(66508),W=g(20891);g(19420);let N=U=class extends w.wq{constructor(re){super(re),this.minValue=0,this.maxValue=0}clone(){return new U({minValue:this.minValue,maxValue:this.maxValue})}};var J;(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],N.prototype,"minValue",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],N.prototype,"maxValue",void 0),N=U=(0,E._)([(0,W.j)("esri.renderer.support.AuthoringInfoClassBreakInfo")],N);let Q=J=class extends w.wq{constructor(re){super(re),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new J({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,Z.d9)(this.classBreakInfos)})}};(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],Q.prototype,"field",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],Q.prototype,"normalizationField",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],Q.prototype,"label",void 0),(0,E._)([(0,x.Cb)({type:[N],json:{write:!0}})],Q.prototype,"classBreakInfos",void 0),Q=J=(0,E._)([(0,W.j)("esri.renderers.support.AuthoringInfoFieldInfo")],Q);var k,G=g(36734);const z=new T.X({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),C=new T.X({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),D={key:re=>"number"==typeof re?"number":"string",typeMap:{number:Number,string:String},base:null},F=["high-to-low","above-and-below","centered-on","extremes"],B=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],$=["seconds","minutes","hours","days","months","years"];let X=k=class extends w.wq{constructor(re){super(re),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(re){return"string"==typeof re||"number"==typeof re?re:null}castStartTime(re){return"string"==typeof re||"number"==typeof re?re:null}get style(){return"color"===this.type?this._get("style"):null}set style(re){this._set("style",re)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(re){this._set("theme",re)}clone(){return new k({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,E._)([(0,x.Cb)({types:D,json:{write:!0}})],X.prototype,"endTime",void 0),(0,E._)([(0,G.p)("endTime")],X.prototype,"castEndTime",null),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],X.prototype,"field",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],X.prototype,"maxSliderValue",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],X.prototype,"minSliderValue",void 0),(0,E._)([(0,x.Cb)({types:D,json:{write:!0}})],X.prototype,"startTime",void 0),(0,E._)([(0,G.p)("startTime")],X.prototype,"castStartTime",null),(0,E._)([(0,x.Cb)({type:z.apiValues,value:null,json:{type:z.jsonValues,read:z.read,write:z.write}})],X.prototype,"style",null),(0,E._)([(0,x.Cb)({type:B,value:null,json:{type:B,origins:{"web-scene":{type:F,write:{writer:(re,le)=>{F.includes(re)&&(le.theme=re)}}}},write:!0}})],X.prototype,"theme",null),(0,E._)([(0,x.Cb)({type:C.apiValues,json:{type:C.jsonValues,read:C.read,write:C.write}})],X.prototype,"type",void 0),(0,E._)([(0,x.Cb)({type:$,json:{type:$,write:!0}})],X.prototype,"units",void 0),X=k=(0,E._)([(0,W.j)("esri.renderers.support.AuthoringInfoVisualVariable")],X);const q=X;var ae,Y=g(57078);const he=new T.X({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),ne=new T.X({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),ue=new T.X({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),te=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let de=ae=class extends w.wq{constructor(re){super(re),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const re=this._get("classificationMethod"),le=this.type;return le&&"relationship"!==le?"class-breaks-size"===le||"class-breaks-color"===le?re||"manual":null:re}set classificationMethod(re){this._set("classificationMethod",re)}readColorRamp(re){return re?(0,Y.i)(re):void 0}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(re){this._set("fields",re)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(re){this._set("field1",re)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(re){this._set("field2",re)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(re){this._set("flowTheme",re)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(re){this._set("focus",re)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(re){this._set("numClasses",re)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(re){this._set("statistics",re)}get standardDeviationInterval(){const re=this.type;return re&&"relationship"!==re&&"class-breaks-size"!==re&&"class-breaks-color"!==re||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(re){this._set("standardDeviationInterval",re)}get type(){return this._get("type")}set type(re){let le=re;"classed-size"===re?le="class-breaks-size":"classed-color"===re&&(le="class-breaks-color"),this._set("type",le)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(re){this._set("univariateSymbolStyle",re)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(re){this._set("univariateTheme",re)}clone(){return new ae({classificationMethod:this.classificationMethod,colorRamp:(0,Z.d9)(this.colorRamp),fadeRatio:(0,Z.d9)(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:(0,Z.d9)(this.field1),field2:(0,Z.d9)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(re=>re.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,E._)([(0,x.Cb)({type:he.apiValues,value:null,json:{type:he.jsonValues,read:he.read,write:he.write,origins:{"web-document":{default:"manual",type:he.jsonValues,read:he.read,write:he.write}}}})],de.prototype,"classificationMethod",null),(0,E._)([(0,x.Cb)({types:Y.V,json:{write:!0}})],de.prototype,"colorRamp",void 0),(0,E._)([(0,V.r)("colorRamp")],de.prototype,"readColorRamp",null),(0,E._)([(0,x.Cb)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],de.prototype,"fadeRatio",void 0),(0,E._)([(0,x.Cb)({type:[String],value:null,json:{write:!0}})],de.prototype,"fields",null),(0,E._)([(0,x.Cb)({type:Q,value:null,json:{write:!0}})],de.prototype,"field1",null),(0,E._)([(0,x.Cb)({type:Q,value:null,json:{write:!0}})],de.prototype,"field2",null),(0,E._)([(0,x.Cb)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],de.prototype,"flowTheme",null),(0,E._)([(0,x.Cb)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],de.prototype,"focus",null),(0,E._)([(0,x.Cb)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],de.prototype,"isAutoGenerated",void 0),(0,E._)([(0,x.Cb)({type:Number,value:null,json:{type:se.z8,write:!0}})],de.prototype,"numClasses",null),(0,E._)([(0,x.Cb)({type:te,json:{type:te,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],de.prototype,"lengthUnit",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],de.prototype,"maxSliderValue",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],de.prototype,"minSliderValue",void 0),(0,E._)([(0,x.Cb)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],de.prototype,"statistics",null),(0,E._)([(0,x.Cb)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],de.prototype,"standardDeviationInterval",null),(0,E._)([(0,x.Cb)({type:ne.apiValues,value:null,json:{type:ne.jsonValues,read:ne.read,write:ne.write,origins:{"web-scene":{type:ue.jsonValues,write:{writer:ue.write,overridePolicy:re=>({enabled:"flow"!==re})}}}}})],de.prototype,"type",null),(0,E._)([(0,x.Cb)({type:[q],json:{write:!0}})],de.prototype,"visualVariables",void 0),(0,E._)([(0,x.Cb)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],de.prototype,"univariateSymbolStyle",null),(0,E._)([(0,x.Cb)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],de.prototype,"univariateTheme",null),de=ae=(0,E._)([(0,W.j)("esri.renderers.support.AuthoringInfo")],de);const Oe=de},12852:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891)),V=g(59122);let A=W=class extends T.wq{constructor(N){super(N),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new W({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const N=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${N}`}};(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],A.prototype,"description",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],A.prototype,"label",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],A.prototype,"minValue",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],A.prototype,"maxValue",void 0),(0,E._)([(0,w.Cb)(V.Gn)],A.prototype,"symbol",void 0),A=W=(0,E._)([(0,se.j)("esri.renderers.support.ClassBreakInfo")],A);const U=A},41275:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{DictionaryLoader:()=>G});var E=g(71670),T=g(25764),w=g(1897),Z=g(32995),x=g(28191),se=g(61101),V=g(53661),W=g(30801),A=g(3758),U=g(77238),N=g(55343);const J="esri.renderers.support.DictionaryLoader",Q={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class G{constructor(D,F,B){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new se.Z(100),this._dictionaryPromise=null,this.url=D,this.config=F,this.fieldMap=B}getSymbolFields(){return this._symbolFields}getSymbolAsync(D,F){var B=this;return(0,E.Z)(function*(){let $;B._dictionaryPromise||(B._dictionaryPromise=B.fetchResources(F));try{$=yield B._dictionaryPromise}catch(fe){if((0,W.D_)(fe))return B._dictionaryPromise=null,null}const X={};if(B.fieldMap)for(const fe of B._symbolFields){const _e=B.fieldMap[fe];X[fe]=_e&&null!=D.attributes[_e]?""+D.attributes[_e]:""}const q=$?.(X,F);if(!q||"string"!=typeof q)return null;const Y=(0,A.hP)(q).toString(),ae=B._symbolCache.get(Y);if(ae)return ae.catch(()=>{B._symbolCache.pop(Y)}),ae;const he=q.split(";"),ne=[],ue=[];for(const fe of he)if(fe)if(fe.includes("po:")){const _e=fe.substr(3).split("|");if(3===_e.length){const de=_e[0],Oe=_e[1];let re=_e[2];if("DashTemplate"===Oe)re=re.split(" ").map(le=>Number(le));else if("Color"===Oe){const le=new T.Z(re).toRgba();re=[le[0],le[1],le[2],255*le[3]]}else re=Number(re);ue.push({primitiveName:de,propertyName:Oe,value:re})}}else if(fe.includes("|")){for(const _e of fe.split("|"))if(B._itemNames.has(_e)){ne.push(_e);break}}else B._itemNames.has(fe)&&ne.push(fe);const te=!(0,V.pC)(D.geometry)||!D.geometry.hasZ&&"point"===D.geometry.type,ie=B._cimPartsToCIMSymbol(ne,ue,te,F);return B._symbolCache.put(Y,ie,1),ie})()}fetchResources(D){var F=this;return(0,E.Z)(function*(){if(F._dictionaryPromise)return F._dictionaryPromise;if(!F.url)return void x.Z.getLogger(J).error("no valid URL!");const B=(0,w.default)(F.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:(0,V.pC)(D)?D.signal:null}),[{data:$}]=yield Promise.all([B,(0,U.LC)()]);if(!$)throw F._dictionaryPromise=null,new Z.Z("esri.renderers.DictionaryRenderer","Bad dictionary data!");const X=$.expression,q=$.authoringInfo;F._refSymbolUrlTemplate=F.url+"/"+$.cimRefTemplateUrl,F._itemNames=new Set($.itemsNames),F._symbolFields=q.symbol;const Y={};if(F.config){const ne=F.config;for(const ue in ne)Y[ue]=ne[ue]}if(q.configuration)for(const ne of q.configuration)Y.hasOwnProperty(ne.name)||(Y[ne.name]=ne.value);const ae=[];if((0,V.pC)(D)&&D.fields&&F.fieldMap)for(const ne of F._symbolFields){const ue=F.fieldMap[ne],te=D.fields.filter(ie=>ie.name===ue);te.length>0&&ae.push({...te[0],name:ne})}const he=(0,U.pp)(X,(0,V.pC)(D)?D.spatialReference:null,ae,Y).then(ne=>{const ue={scale:0};return(te,ie)=>{if((0,V.Wi)(ne))return null;const fe=ne.repurposeFeature({geometry:null,attributes:te});return ue.scale=(0,V.pC)(ie)?ie.scale??void 0:void 0,ne.evaluate({$feature:fe,$view:ue})}}).catch(ne=>(x.Z.getLogger(J).error("Creating dictinoary expression failed:",ne),null));return F._dictionaryPromise=he,he})()}_cimPartsToCIMSymbol(D,F,B,$){var X=this;return(0,E.Z)(function*(){const q=new Array(D.length);for(let he=0;he<D.length;he++)q[he]=X._getSymbolPart(D[he],$);const Y=yield Promise.all(q),ae=X.fieldMap;if(ae)for(const he of Y)k(he,ae);return new N.Z({data:X._combineSymbolParts(Y,F,B)})})()}_getSymbolPart(D,F){var B=this;return(0,E.Z)(function*(){if(B._ongoingRequests.has(D))return B._ongoingRequests.get(D).then(q=>q.data);const $=B._refSymbolUrlTemplate.replace(/\{itemName\}/gi,D),X=(0,w.default)($,{responseType:"json",query:{f:"json"},...F});B._ongoingRequests.set(D,X);try{return(yield X).data}catch(q){throw B._ongoingRequests.delete(D),q}})()}_combineSymbolParts(D,F,B){if(!D||0===D.length)return null;const $={...D[0]};if(D.length>1){$.symbolLayers=[];for(const X of D)$.symbolLayers.unshift(...X.symbolLayers)}return B&&($.callout=Q),{type:"CIMSymbolReference",symbol:$,primitiveOverrides:F}}}function k(C,D){if(!C)return;const F=C.symbolLayers;if(!F)return;let B=F.length;for(;B--;){const $=F[B];$&&!1!==$.enable&&"CIMVectorMarker"===$.type&&z($,D)}}function z(C,D){const F=C.markerGraphics;if(F)for(const B of F){if(!B)continue;const $=B.symbol;if($)switch($.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":k($,D);break;case"CIMTextSymbol":$.fieldMap=D}}}},22713:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(25764),w=g(44480),Z=g(9497),x=g(83382),V=(g(19420),g(20891));let A=W=class extends w.wq{constructor(N){super(N),this.color=null,this.ratio=null}clone(){return new W({color:this.color,ratio:this.ratio})}};(0,E._)([(0,Z.Cb)({type:T.Z,json:{type:[x.z8],default:null,write:!0}})],A.prototype,"color",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],A.prototype,"ratio",void 0),A=W=(0,E._)([(0,V.j)("esri.renderers.support.HeatmapColorStop")],A);const U=A},81976:(He,Pe,g)=>{"use strict";g.d(Pe,{I:()=>W});var V,E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let W=V=class extends T.wq{constructor(){super(...arguments),this.title=null}clone(){return new V({title:this.title})}};(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],W.prototype,"title",void 0),W=V=(0,E._)([(0,se.j)("esri.renderers.support.LegendOptions")],W)},11457:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891)),V=g(59122);let A=W=class extends T.wq{constructor(N){super(N),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new W({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const N=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${N}`}};(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],A.prototype,"description",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],A.prototype,"label",void 0),(0,E._)([(0,w.Cb)(V.Gn)],A.prototype,"symbol",void 0),(0,E._)([(0,w.Cb)(V.GY)],A.prototype,"value",void 0),A=W=(0,E._)([(0,se.j)("esri.renderers.support.UniqueValueInfo")],A);const U=A},59122:(He,Pe,g)=>{"use strict";g.d(Pe,{GY:()=>W,Gn:()=>se,KK:()=>V});var E=g(97708),T=g(77729),w=g(55018),Z=g(67885),x=g(47900);const se={types:E.QT,json:{write:{writer:w.cW},origins:{"web-scene":{types:E.f_,write:{writer:w.cW},read:{reader:(0,T.d)({types:E.f_})}}}}},V={types:{base:Z.Z,key:"type",typeMap:{"simple-fill":E.LB.typeMap["simple-fill"],"picture-fill":E.LB.typeMap["picture-fill"],"polygon-3d":E.LB.typeMap["polygon-3d"]}},json:{write:{writer:w.cW},origins:{"web-scene":{type:x.Z,write:{writer:w.cW}}}}},W={cast:A=>null==A||"string"==typeof A||"number"==typeof A?A:`${A}`,json:{type:String,write:{writer:(A,U)=>{U.value=A?.toString()}}}}},45811:(He,Pe,g)=>{"use strict";g.d(Pe,{AJ:()=>V,If:()=>Q,QM:()=>U,hy:()=>N,k0:()=>se,nu:()=>x,uI:()=>A,wx:()=>G});var E=g(93142),T=g(55798),w=g(71943),Z=g(91746);const x=2.4;function se(z){return(0,T.Wz)(z*x)}function V(z){return(0,T.F2)(z)/x}function W(z,C,D,F){let{color:B,ratio:$}=C,{color:X,ratio:q}=D;q===$&&(1===q?$-=1e-6:q+=1e-6);const Y=(0,E.uZ)((F-$)/(q-$),0,1);(0,w.l)(z,B.toArray(),X.toArray(),Y)}function A(z){const D=new Uint8ClampedArray(2048);if((z=z.filter(({ratio:q})=>q>=0&&q<=1).sort((q,Y)=>q.ratio-Y.ratio).map(({color:q,ratio:Y})=>({color:q,ratio:Math.max(Y,.001)}))).length<1)return D;let F=z[0],B=z[0],$=1;const X=(0,Z.c)();for(let q=0;q<512;q++){const Y=(q+.5)/512;for(;Y>B.ratio&&$<z.length;)F=B,B=z[$++];W(X,F,B,Y),D.set(X,4*q)}return D}function U(z,C,D,F){const{radius:B,fieldOffset:$,field:X}=C,q=Math.round((0,T.F2)(B)),Y=new Float64Array(D*F);let ae,he=Number.NEGATIVE_INFINITY;const ne=function k(z,C){return null!=z?"string"==typeof C?D=>-1*+D.readAttribute(z):D=>+D.readAttribute(z)+C:D=>1}(X,$),ue=new Set;for(const te of z){const ie=te.getCursor();for(;ie.next();){const fe=ie.getObjectId();if(ue.has(fe))continue;ue.add(fe);const _e=ie.readLegacyPointGeometry(),de=128;if(_e.x<-de||_e.x>=D+de||_e.y<-de||_e.y>F+de)continue;const Oe=+ne(ie),re=Math.max(0,Math.round(_e.x)-q),le=Math.max(0,Math.round(_e.y)-q),ce=Math.min(F,Math.round(_e.y)+q),ve=Math.min(D,Math.round(_e.x)+q);for(let Te=le;Te<ce;Te++)for(let ge=re;ge<ve;ge++){const Ae=Te*D+ge,De=Q(_e.x-ge,_e.y-Te,q);ae=Y[Ae]+=De*Oe,ae>he&&(he=ae)}}}return{matrix:Y.buffer,max:he}}function N(z,C,D,F,B,$){z.canvas.width=z.canvas.height=C,z.clearRect(0,0,C,C);const X=z.getImageData(0,0,C,C);D&&F&&X.data.set(new Uint8ClampedArray(function J(z,C,D,F,B){const $=new Uint32Array(z*z),X="buffer"in C?C:new Float64Array(C),q="buffer"in D?new Uint32Array(D.buffer):new Uint32Array(new Uint8Array(D).buffer),Y=q.length/(B-F);for(let ae=0;ae<X.length;ae++){const ne=Math.floor((X[ae]-F)*Y);$[ae]=q[(0,E.uZ)(ne,0,q.length-1)]}return $.buffer}(C,D,F,B,$))),z.putImageData(X,0,0)}function Q(z,C,D){const F=Math.sqrt(z**2+C**2)/D;return F>1?0:3/(Math.PI*D**2)*(1-F**2)**2}function G(z,C){return"function"==typeof z?z:z?"string"==typeof C?D=>-1*+D[z]:D=>+D[z]+C:()=>1}},59574:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>se,i:()=>Z});var E=g(23476),T=g(77729),w=g(27723);function Z(V,W){return se(V,null,W)}const x=(0,T.d)({types:w.A});function se(V,W,A){return V?V&&(V.styleName||V.styleUrl)&&"uniqueValue"!==V.type?(A&&A.messages&&A.messages.push(new E.Z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+V.type+"'",{definition:V,context:A})),null):x(V,W,A):null}},1611:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>w});var E=g(82769),T=g(86355);const w={inches:(0,E.En)(1,"meters","inches"),feet:(0,E.En)(1,"meters","feet"),"us-feet":(0,E.En)(1,"meters","us-feet"),yards:(0,E.En)(1,"meters","yards"),miles:(0,E.En)(1,"meters","miles"),"nautical-miles":(0,E.En)(1,"meters","nautical-miles"),millimeters:(0,E.En)(1,"meters","millimeters"),centimeters:(0,E.En)(1,"meters","centimeters"),decimeters:(0,E.En)(1,"meters","decimeters"),meters:(0,E.En)(1,"meters","meters"),kilometers:(0,E.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,E.ty)(1,"meters",T.sv.radius)}},2929:(He,Pe,g)=>{"use strict";g.d(Pe,{y:()=>x});var E=g(71670),T=g(11823),w=g(30801),Z=g(23476);function x(V,W,A){return se.apply(this,arguments)}function se(){return(se=(0,E.Z)(function*(V,W,A){const U=V&&V.getAtOrigin&&V.getAtOrigin("renderer",W.origin);if(U&&"unique-value"===U.type&&U.styleOrigin){const N=yield(0,T.q6)(U.populateFromStyle());if((0,w.k_)(A),!1===N.ok){const J=N.error;W&&W.messages&&W.messages.push(new Z.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${J.message}`,{error:J,context:W})),V.clear("renderer",W?.origin)}}})).apply(this,arguments)}},27723:(He,Pe,g)=>{"use strict";g.d(Pe,{A:()=>A,o:()=>U});var E=g(53108),T=g(72750),w=g(11822),Z=g(75993),x=g(33098),se=g(57712),V=g(79191),W=g(70383);const A={key:"type",base:se.Z,typeMap:{heatmap:Z.Z,simple:V.Z,"unique-value":W.Z,"class-breaks":E.Z,"dot-density":w.Z,dictionary:T.Z,"pie-chart":x.Z},errorContext:"renderer"},U={key:"type",base:se.Z,typeMap:{simple:V.Z,"unique-value":W.Z,"class-breaks":E.Z,heatmap:Z.Z},errorContext:"renderer"}},96238:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>N});var A,E=g(18100),T=g(32995),w=g(9497),se=(g(83382),g(19420),g(20891)),V=g(70425),W=g(55291);let U=A=class extends W.Z{constructor(J){super(J),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(J,Q,G,k){k&&k.messages&&k.messages.push(new T.Z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:`visualVariables[${this.index}].valueExpressionTitle`,context:k}))}clone(){return new A({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};(0,E._)([(0,w.Cb)({readOnly:!0})],U.prototype,"cache",null),(0,E._)([(0,w.Cb)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],U.prototype,"axis",void 0),(0,E._)([(0,w.Cb)({type:["rotation"],json:{type:["rotationInfo"]}})],U.prototype,"type",void 0),(0,E._)([(0,w.Cb)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],U.prototype,"rotationType",void 0),(0,E._)([(0,w.Cb)({type:String,json:{write:!0}})],U.prototype,"valueExpressionTitle",void 0),(0,E._)([(0,V.c)("web-scene","valueExpressionTitle")],U.prototype,"writeValueExpressionTitleWebScene",null),U=A=(0,E._)([(0,se.j)("esri.renderers.visualVariables.RotationVariable")],U);const N=U},16563:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>ne});var z,E=g(18100),T=g(32995),w=g(63321),Z=g(28191),x=g(55798),se=g(9497),V=g(36734),W=g(66508),A=g(20891),U=g(70425),N=g(55291),J=g(73326),k=(g(83382),g(19420),g(21882));let C=z=class extends k.Z{constructor(){super(...arguments),this.customValues=null}clone(){return new z({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};(0,E._)([(0,se.Cb)({type:[Number],json:{write:!0}})],C.prototype,"customValues",void 0),C=z=(0,E._)([(0,A.j)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],C);const D=C;var $,F=g(72902),B=g(35162);const X=new w.X({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),q=new w.X({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function Y(ue){if(null!=ue)return"string"==typeof ue||"number"==typeof ue?(0,x.t_)(ue):"size"===ue.type?(0,F.iY)(ue)?ue:(delete(ue={...ue}).type,new he(ue)):void 0}function ae(ue,te,ie){if("object"!=typeof ue)return ue;const fe=new he;return fe.read(ue,ie),fe}let he=$=class extends N.Z{constructor(ue){super(ue),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&B.viewScaleRE.test(this.valueExpression)}}set expression(ue){Z.Z.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===ue?(this.valueExpression="$view.scale",this._set("expression",ue)):this._set("expression",null)}set index(ue){(0,F.iY)(this.maxSize)&&(this.maxSize.index=`visualVariables[${ue}].maxSize`),(0,F.iY)(this.minSize)&&(this.minSize.index=`visualVariables[${ue}].minSize`),this._set("index",ue)}get inputValueType(){return(0,F.PS)(this)}set maxDataValue(ue){ue&&this.stops&&(Z.Z.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),ue=null),this._set("maxDataValue",ue)}set maxSize(ue){ue&&this.stops&&(Z.Z.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),ue=null),this._set("maxSize",ue)}castMaxSize(ue){return Y(ue)}readMaxSize(ue,te,ie){return ae(ue,0,ie)}set minDataValue(ue){ue&&this.stops&&(Z.Z.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),ue=null),this._set("minDataValue",ue)}set minSize(ue){ue&&this.stops&&(Z.Z.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),ue=null),this._set("minSize",ue)}castMinSize(ue){return Y(ue)}readMinSize(ue,te,ie){return ae(ue,0,ie)}get arcadeRequired(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(ue){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?ue&&Array.isArray(ue)&&(ue=ue.filter(te=>!!te)).sort((te,ie)=>te.value-ie.value):ue&&(Z.Z.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),ue=null),this._set("stops",ue)}get transformationType(){return(0,F.QW)(this,this.inputValueType)}readValueExpression(ue,te){return ue||te.expression&&"$view.scale"}writeValueExpressionWebScene(ue,te,ie,fe){if("$view.scale"===ue){if(fe&&fe.messages){const _e=this.index;fe.messages.push(new T.Z("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"==typeof _e?_e:`visualVariables[${_e}]`)+".valueExpression",context:fe}))}}else te[ie]=ue}readValueUnit(ue){return ue?q.read(ue):null}clone(){return new $({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,F.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,F.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(ue=>ue.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===F.hL.ClampedLinear){const{minSize:ue,maxSize:te}=this;return this.minSize=te,this.maxSize=ue,this}if(this.transformationType===F.hL.Stops){const ue=this.stops;if(!ue)return this;const te=ue.map(fe=>fe.size).reverse(),ie=ue.length;for(let fe=0;fe<ie;fe++)ue[fe].size=te[fe];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(ue=>ue.value||0)}};(0,E._)([(0,se.Cb)({readOnly:!0})],he.prototype,"cache",null),(0,E._)([(0,se.Cb)({type:X.apiValues,json:{type:X.jsonValues,origins:{"web-map":{read:!1}},read:X.read,write:X.write}})],he.prototype,"axis",void 0),(0,E._)([(0,se.Cb)({type:String,value:null,json:{read:!1}})],he.prototype,"expression",null),(0,E._)([(0,se.Cb)()],he.prototype,"index",null),(0,E._)([(0,se.Cb)({type:String,readOnly:!0})],he.prototype,"inputValueType",null),(0,E._)([(0,se.Cb)({type:D,json:{write:!0}})],he.prototype,"legendOptions",void 0),(0,E._)([(0,se.Cb)({type:Number,value:null,json:{write:!0}})],he.prototype,"maxDataValue",null),(0,E._)([(0,se.Cb)({type:Number,value:null,json:{write:!0}})],he.prototype,"maxSize",null),(0,E._)([(0,V.p)("maxSize")],he.prototype,"castMaxSize",null),(0,E._)([(0,W.r)("maxSize")],he.prototype,"readMaxSize",null),(0,E._)([(0,se.Cb)({type:Number,value:null,json:{write:!0}})],he.prototype,"minDataValue",null),(0,E._)([(0,se.Cb)({type:Number,value:null,json:{write:!0}})],he.prototype,"minSize",null),(0,E._)([(0,V.p)("minSize")],he.prototype,"castMinSize",null),(0,E._)([(0,W.r)("minSize")],he.prototype,"readMinSize",null),(0,E._)([(0,se.Cb)({type:String,json:{write:!0}})],he.prototype,"normalizationField",void 0),(0,E._)([(0,se.Cb)({readOnly:!0})],he.prototype,"arcadeRequired",null),(0,E._)([(0,se.Cb)({type:String})],he.prototype,"scaleBy",void 0),(0,E._)([(0,se.Cb)({type:[J.Z],value:null,json:{write:!0}})],he.prototype,"stops",null),(0,E._)([(0,se.Cb)({type:["outline"],json:{write:!0}})],he.prototype,"target",void 0),(0,E._)([(0,se.Cb)({type:String,readOnly:!0})],he.prototype,"transformationType",null),(0,E._)([(0,se.Cb)({type:["size"],json:{type:["sizeInfo"]}})],he.prototype,"type",void 0),(0,E._)([(0,se.Cb)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],he.prototype,"useSymbolValue",void 0),(0,E._)([(0,se.Cb)({type:String,json:{write:!0}})],he.prototype,"valueExpression",void 0),(0,E._)([(0,W.r)("valueExpression",["valueExpression","expression"])],he.prototype,"readValueExpression",null),(0,E._)([(0,U.c)("web-scene","valueExpression")],he.prototype,"writeValueExpressionWebScene",null),(0,E._)([(0,se.Cb)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],he.prototype,"valueRepresentation",void 0),(0,E._)([(0,se.Cb)({type:q.apiValues,json:{write:q.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],he.prototype,"valueUnit",void 0),(0,E._)([(0,W.r)("valueUnit")],he.prototype,"readValueUnit",null),he=$=(0,E._)([(0,A.j)("esri.renderers.visualVariables.SizeVariable")],he);const ne=he},55291:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>J});var E=g(18100),T=g(63321),w=g(44480),Z=g(28191),x=g(9497),se=g(36734),V=g(20891),W=g(83382),A=g(21882);const U=new T.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let N=class extends w.wq{constructor(Q){super(Q),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(Q){return null==Q?Q:"function"==typeof Q?(Z.Z.getLogger(this.declaredClass).error(".field: field must be a string value"),null):(0,W.Zs)(Q)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,E._)([(0,x.Cb)()],N.prototype,"index",void 0),(0,E._)([(0,x.Cb)({type:U.apiValues,readOnly:!0,json:{read:U.read,write:U.write}})],N.prototype,"type",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"field",void 0),(0,E._)([(0,se.p)("field")],N.prototype,"castField",null),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"valueExpression",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"valueExpressionTitle",void 0),(0,E._)([(0,x.Cb)({readOnly:!0})],N.prototype,"arcadeRequired",null),(0,E._)([(0,x.Cb)({type:A.Z,json:{write:!0}})],N.prototype,"legendOptions",void 0),N=(0,E._)([(0,V.j)("esri.renderers.visualVariables.VisualVariable")],N);const J=N},27969:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>N});var A,E=g(18100),T=g(25764),w=g(44480),Z=g(9497),x=g(83382),V=(g(19420),g(20891)),W=g(70425);let U=A=class extends w.wq{constructor(J){super(J),this.color=null,this.label=null,this.value=null}writeValue(J,Q,G){Q[G]=J??0}clone(){return new A({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,E._)([(0,Z.Cb)({type:T.Z,json:{type:[x.z8],write:!0}})],U.prototype,"color",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],U.prototype,"label",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],U.prototype,"value",void 0),(0,E._)([(0,W.c)("value")],U.prototype,"writeValue",null),U=A=(0,E._)([(0,V.j)("esri.renderers.visualVariables.support.ColorStop")],U);const N=U},73326:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(44480),w=g(55798),Z=g(9497),V=(g(83382),g(19420),g(20891));let A=W=class extends T.wq{constructor(N){super(N),this.label=null,this.size=null,this.value=null}clone(){return new W({label:this.label,size:this.size,value:this.value})}};(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],A.prototype,"label",void 0),(0,E._)([(0,Z.Cb)({type:Number,cast:w.t_,json:{write:!0}})],A.prototype,"size",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0}})],A.prototype,"value",void 0),A=W=(0,E._)([(0,V.j)("esri.renderers.visualVariables.support.SizeStop")],A);const U=A},21882:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(81976);let W=V=class extends se.I{constructor(){super(...arguments),this.showLegend=null}clone(){return new V({title:this.title,showLegend:this.showLegend})}};(0,E._)([(0,T.Cb)({type:Boolean,json:{write:!0}})],W.prototype,"showLegend",void 0),W=V=(0,E._)([(0,x.j)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],W);const A=W},72902:(He,Pe,g)=>{"use strict";var E,T,V;function w(V){return V&&"esri.renderers.visualVariables.SizeVariable"===V.declaredClass}function Z(V){return null!=V&&!isNaN(V)&&isFinite(V)}function x(V){return V.valueExpression?E.Expression:V.field&&"string"==typeof V.field?E.Field:E.Unknown}function se(V,W){return(W||x(V))===E.Unknown?T.Constant:V.stops?T.Stops:null!=V.minSize&&null!=V.maxSize&&null!=V.minDataValue&&null!=V.maxDataValue?T.ClampedLinear:"unknown"===(V.valueUnit||"unknown")?null!=V.minSize&&null!=V.minDataValue?V.minSize&&V.minDataValue?T.Proportional:T.Additive:T.Identity:T.RealWorldSize}g.d(Pe,{PS:()=>x,QW:()=>se,RY:()=>E,hL:()=>T,iY:()=>w,qh:()=>Z}),(V=E||(E={})).Unknown="unknown",V.Expression="expression",V.Field="field",function(V){V.Unknown="unknown",V.Stops="stops",V.ClampedLinear="clamped-linear",V.Proportional="proportional",V.Additive="additive",V.Constant="constant",V.Identity="identity",V.RealWorldSize="real-world-size"}(T||(T={}))},35162:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{getAllSizes:()=>fe,getColor:()=>J,getOpacity:()=>Q,getRotationAngle:()=>G,getSize:()=>C,getSizeForValue:()=>ne,getSizeFromNumberOrVariable:()=>D,getSizeRangeAtScale:()=>ue,getVisualVariableValues:()=>te,viewScaleRE:()=>N});var E=g(25764),T=g(26763),w=g(31385),Z=g(28191),x=g(53661),se=g(1611),V=g(72902);const W=Z.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),A=new T.Z,U=Math.PI,N=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function J(_e,de,Oe){const re="visualVariables"in _e&&_e.visualVariables?_e.visualVariables.find(we=>"color"===we.type):_e;if(!re)return;if("esri.renderers.visualVariables.ColorVariable"!==re.declaredClass)return void W.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const le="number"==typeof de,ce=le?null:de,ve=ce&&ce.attributes;let Te=le?de:null;const ge=re.field,{ipData:Ae,hasExpression:De}=re.cache;let Se=re.cache.compiledFunc;if(!ge&&!De){const we=re.stops;return we&&we[0]&&we[0].color}if("number"!=typeof Te)if(De){if((0,x.Wi)(Oe)||(0,x.Wi)(Oe.arcade))return void W.error("Use of arcade expressions requires an arcade context");const $e=Oe.arcade.arcadeUtils,Ce=$e.getViewInfo({viewingMode:Oe.viewingMode,scale:Oe.scale,spatialReference:Oe.spatialReference}),Ie=$e.createExecContext(ce,Ce);if(!Se){const je=$e.createSyntaxTree(re.valueExpression);Se=$e.createFunction(je),re.cache.compiledFunc=Se}Te=$e.executeFunction(Se,Ie)}else ve&&(Te=ve[ge]);const me=re.normalizationField,ye=null!=ve&&null!=me?parseFloat(ve[me]):void 0;if(null!=Te&&(!me||le||!isNaN(ye)&&0!==ye)){isNaN(ye)||le||(Te/=ye);const we=ie(Te,Ae);if(we){const $e=we[0],Ce=we[1],Ie=$e===Ce?re.stops[$e].color:E.Z.blendColors(re.stops[$e].color,re.stops[Ce].color,we[2],(0,x.pC)(Oe)?Oe.color:void 0);return new E.Z(Ie)}}}function Q(_e,de,Oe){const re="visualVariables"in _e&&_e.visualVariables?_e.visualVariables.find(we=>"opacity"===we.type):_e;if(!re)return;if("esri.renderers.visualVariables.OpacityVariable"!==re.declaredClass)return void W.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const le="number"==typeof de,ce=le?null:de,ve=ce&&ce.attributes;let Te=le?de:null;const ge=re.field,{ipData:Ae,hasExpression:De}=re.cache;let Se=re.cache.compiledFunc;if(!ge&&!De){const we=re.stops;return we&&we[0]&&we[0].opacity}if("number"!=typeof Te)if(De){if((0,x.Wi)(Oe)||(0,x.Wi)(Oe.arcade))return void W.error("Use of arcade expressions requires an arcade context");const $e=Oe.arcade.arcadeUtils,Ce=$e.getViewInfo({viewingMode:Oe.viewingMode,scale:Oe.scale,spatialReference:Oe.spatialReference}),Ie=$e.createExecContext(ce,Ce);if(!Se){const je=$e.createSyntaxTree(re.valueExpression);Se=$e.createFunction(je),re.cache.compiledFunc=Se}Te=$e.executeFunction(Se,Ie)}else ve&&(Te=ve[ge]);const me=re.normalizationField,ye=null!=ve&&null!=me?parseFloat(ve[me]):void 0;if(null!=Te&&(!me||le||!isNaN(ye)&&0!==ye)){isNaN(ye)||le||(Te/=ye);const we=ie(Te,Ae);if(we){const $e=we[0],Ce=we[1];if($e===Ce)return re.stops[$e].opacity;{const Ie=re.stops[$e].opacity;return Ie+(re.stops[Ce].opacity-Ie)*we[2]}}}}function G(_e,de,Oe){const re="visualVariables"in _e&&_e.visualVariables?_e.visualVariables.find(ye=>"rotation"===ye.type):_e;if(!re)return;if("esri.renderers.visualVariables.RotationVariable"!==re.declaredClass)return void W.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const le=re.axis||"heading",ce="heading"===le&&"arithmetic"===re.rotationType?90:0,ve="heading"===le&&"arithmetic"===re.rotationType?-1:1,Te="number"==typeof de?null:de,ge=Te&&Te.attributes,Ae=re.field,{hasExpression:De}=re.cache;let Se=re.cache.compiledFunc,me=0;if(!Ae&&!De)return me;if(De){if((0,x.Wi)(Oe)||(0,x.Wi)(Oe.arcade))return void W.error("Use of arcade expressions requires an arcade context");const we=Oe.arcade.arcadeUtils,$e=we.getViewInfo({viewingMode:Oe.viewingMode,scale:Oe.scale,spatialReference:Oe.spatialReference}),Ce=we.createExecContext(Te,$e);if(!Se){const Ie=we.createSyntaxTree(re.valueExpression);Se=we.createFunction(Ie),re.cache.compiledFunc=Se}me=we.executeFunction(Se,Ce)}else ge&&(me=ge[Ae]||0);return me="number"!=typeof me||isNaN(me)?null:ce+ve*me,me}function C(_e,de,Oe){const re="visualVariables"in _e&&_e.visualVariables?_e.visualVariables.find(ce=>"size"===ce.type):_e;if(!re)return;if("esri.renderers.visualVariables.SizeVariable"!==re.declaredClass)return void W.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const le=ne(function k(_e,de,Oe){const re="number"==typeof de,le=re?null:de,ce=le&&le.attributes;let ve=re?de:null;const{isScaleDriven:Te}=_e.cache;let ge=_e.cache.compiledFunc;if(Te){const De=(0,x.pC)(Oe)?Oe.scale:void 0,Se=(0,x.pC)(Oe)?Oe.view:void 0;ve=null==De||"3d"===Se?function z(_e){let de=null,Oe=null;const re=_e.stops;return re?(de=re[0].value,Oe=re[re.length-1].value):(de=_e.minDataValue||0,Oe=_e.maxDataValue||0),(de+Oe)/2}(_e):De}else if(!re)switch(_e.inputValueType){case V.RY.Expression:{if((0,x.Wi)(Oe)||(0,x.Wi)(Oe.arcade))return void W.error("Use of arcade expressions requires an arcade context");const Se=Oe.arcade.arcadeUtils,me=Se.getViewInfo({viewingMode:Oe.viewingMode,scale:Oe.scale,spatialReference:Oe.spatialReference}),ye=Se.createExecContext(le,me);if(!ge){const we=Se.createSyntaxTree(_e.valueExpression);ge=Se.createFunction(we),_e.cache.compiledFunc=ge}ve=Se.executeFunction(ge,ye);break}case V.RY.Field:ce&&(ve=ce[_e.field]);break;case V.RY.Unknown:ve=null}if(!(0,V.qh)(ve))return null;if(re||!_e.normalizationField)return ve;const Ae=ce?parseFloat(ce[_e.normalizationField]):null;return(0,V.qh)(Ae)&&0!==Ae?ve/Ae:null}(re,de,Oe),re,de,Oe,re.cache.ipData);return null==le||isNaN(le)?0:le}function D(_e,de,Oe){return null==_e?null:(0,V.iY)(_e)?C(_e,de,Oe):(0,V.qh)(_e)?_e:null}function F(_e,de,Oe){return(0,V.qh)(Oe)&&_e>Oe?Oe:(0,V.qh)(de)&&_e<de?de:_e}function ne(_e,de,Oe,re,le){switch(de.transformationType){case V.hL.Additive:return function B(_e,de,Oe,re){return _e+((D(de.minSize,Oe,re)||de.minDataValue)??0)}(_e,de,Oe,re);case V.hL.Constant:return function $(_e,de,Oe){const re=_e.stops;let le=re&&re.length&&re[0].size;return null==le&&(le=_e.minSize),D(le,de,Oe)}(de,Oe,re);case V.hL.ClampedLinear:return function X(_e,de,Oe,re){const le=(_e-de.minDataValue)/(de.maxDataValue-de.minDataValue),ce=D(de.minSize,Oe,re),ve=D(de.maxSize,Oe,re),Te=(0,x.pC)(re)?re.shape:void 0;if(_e<=de.minDataValue)return ce;if(_e>=de.maxDataValue)return ve;if(null==ce||null==ve)return null;if("area"===de.scaleBy&&Te){const ge="circle"===Te,Ae=ge?U*(ce/2)**2:ce*ce,De=Ae+le*((ge?U*(ve/2)**2:ve*ve)-Ae);return ge?2*Math.sqrt(De/U):Math.sqrt(De)}return ce+le*(ve-ce)}(_e,de,Oe,re);case V.hL.Proportional:return function q(_e,de,Oe,re){const le=(0,x.pC)(re)?re.shape:void 0,ce=_e/de.minDataValue,ve=D(de.minSize,Oe,re),Te=D(de.maxSize,Oe,re);let ge=null;return ge="circle"===le?2*Math.sqrt(ce*(ve/2)**2):"square"===le||"diamond"===le||"image"===le?Math.sqrt(ce*ve**2):ce*ve,F(ge,ve,Te)}(_e,de,Oe,re);case V.hL.Stops:return function Y(_e,de,Oe,re,le){const[ce,ve,Te]=ie(_e,le);if(ce===ve)return D(de.stops?.[ce].size,Oe,re);{const ge=D(de.stops?.[ce].size,Oe,re);return ge+(D(de.stops?.[ve].size,Oe,re)-ge)*Te}}(_e,de,Oe,re,le);case V.hL.RealWorldSize:return function ae(_e,de,Oe,re){const le=((0,x.pC)(re)&&re.resolution?re.resolution:1)*se.a[de.valueUnit],ce=D(de.minSize,Oe,re),ve=D(de.maxSize,Oe,re),{valueRepresentation:Te}=de;let ge=null;return ge="area"===Te?2*Math.sqrt(_e/U)/le:"radius"===Te||"distance"===Te?2*_e/le:_e/le,F(ge,ce,ve)}(_e,de,Oe,re);case V.hL.Identity:return _e;case V.hL.Unknown:return null}}function ue(_e,de,Oe){const{isScaleDriven:re}=_e.cache;if(!(re&&"3d"===Oe||de))return null;const le={scale:de,view:Oe};let ce=D(_e.minSize,A,le),ve=D(_e.maxSize,A,le);if(null!=ce||null!=ve){if(ce>ve){const Te=ve;ve=ce,ce=Te}return{minSize:ce,maxSize:ve}}}function te(_e,de,Oe){if(!_e.visualVariables)return;const re=[],le=[],ce=[],ve=[],Te=[];for(const ge of _e.visualVariables)switch(ge.type){case"color":le.push(ge);break;case"opacity":ce.push(ge);break;case"rotation":Te.push(ge);break;case"size":ve.push(ge)}return le.forEach(ge=>{const Ae=J(ge,de,Oe);re.push({variable:ge,value:Ae})}),ce.forEach(ge=>{const Ae=Q(ge,de,Oe);re.push({variable:ge,value:Ae})}),Te.forEach(ge=>{const Ae=G(ge,de,Oe);re.push({variable:ge,value:Ae})}),ve.forEach(ge=>{const Ae=C(ge,de,Oe);re.push({variable:ge,value:Ae})}),re.filter(ge=>null!=ge.value)}function ie(_e,de){if(!de)return;let Oe=0,re=de.length-1;return de.some((le,ce)=>_e<le?(re=ce,!0):(Oe=ce,!1)),[Oe,re,(_e-de[Oe])/(de[re]-de[Oe])]}function fe(_e,de,Oe){const re=["proportional","proportional","proportional"];for(const le of _e){const ce=le.useSymbolValue?"symbol-value":C(le,de,Oe);switch(le.axis){case"width":re[0]=ce;break;case"depth":re[1]=ce;break;case"height":re[2]=ce;break;case"width-and-depth":re[0]=ce,re[1]=ce;break;case"all":case void 0:case null:re[0]=ce,re[1]=ce,re[2]=ce;break;default:(0,w.Bg)(le.axis)}}return re}},1897:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{default:()=>Q});var E=g(71670),T=g(68327),w=g(84489),Z=g(32995),x=g(67087),se=g(88684),V=g(53661),W=g(30801),A=g(55050),U=g(40930),N=g(22660),J=g(90103);function Q(me,ye){return G.apply(this,arguments)}function G(){return G=(0,E.Z)(function*(me,ye){const we=(0,A.HK)(me),$e=(0,A.jc)(me);$e||we||(me=(0,A.Fv)(me));const Ce={url:me,requestOptions:{...(0,V.Wg)(ye)}};let Ie=(0,A.oh)(me);if(Ie){const be=yield function re(me,ye){return le.apply(this,arguments)}(Ie,Ce);if(null!=be)return{data:be,getHeader:$,httpStatus:200,requestOptions:Ce.requestOptions,url:Ce.url};Ie.after||Ie.error||(Ie=null)}if(me=Ce.url,"image"===(ye=Ce.requestOptions).responseType){if((0,x.Z)("host-webworker")||(0,x.Z)("host-node"))throw ae("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),Ce)}else if(we)throw ae("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+ye.responseType),Ce);if("head"===ye.method){if(ye.body)throw ae("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),Ce);if(we||$e)throw ae("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),Ce)}if(yield function he(){return ne.apply(this,arguments)}(),k)return k.execute(me,ye);const je=new AbortController;(0,W.fu)(ye,()=>je.abort());const Je={controller:je,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:Ie,params:Ce,redoRequest:!1,useIdentity:z.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},oe=yield function Te(me){return ge.apply(this,arguments)}(Je);return Ie?.after?.(oe),oe}),G.apply(this,arguments)}let k;const z=T.default.request,C="FormData"in globalThis,D=[499,498,403,401],F=["COM_0056","COM_0057","SB_0008"],B=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],$=()=>null,X=Symbol();function Y(me){const ye=(0,A.P$)(me);return!ye||ye.endsWith(".arcgis.com")||Q._corsServers.includes(ye)||(0,A.kl)(ye)}function ae(me,ye,we,$e){let Ce="Error";const Ie={url:we.url,requestOptions:we.requestOptions,getHeader:$,ssl:!1};if(ye instanceof Z.Z)return ye.details?(ye.details=(0,se.d9)(ye.details),ye.details.url=we.url,ye.details.requestOptions=we.requestOptions):ye.details=Ie,ye;if(ye){const je=$e&&(be=>$e.headers.get(be)),Je=$e&&$e.status,oe=ye.message;oe&&(Ce=oe),je&&(Ie.getHeader=je),Ie.httpStatus=(null!=ye.httpCode?ye.httpCode:ye.code)||Je||0,Ie.subCode=ye.subcode,Ie.messageCode=ye.messageCode,Ie.messages="string"==typeof ye.details?[ye.details]:ye.details,Ie.raw=X in ye?ye[X]:ye}return(0,W.D_)(ye)?(0,W.zE)():new Z.Z(me,Ce,Ie)}function ne(){return(ne=(0,E.Z)(function*(){(0,x.Z)("host-webworker")?k||(k=yield g.e(4148).then(g.bind(g,83213))):Q._abortableFetch||(Q._abortableFetch=globalThis.fetch.bind(globalThis))})).apply(this,arguments)}function ue(){return te.apply(this,arguments)}function te(){return(te=(0,E.Z)(function*(){w.id||(yield g.e(4091).then(g.bind(g,64091)))})).apply(this,arguments)}function fe(){return(fe=(0,E.Z)(function*(me){const ye=me.params.url,we=me.params.requestOptions,$e=me.controller.signal,Ce=we.body;let Ie=null,je=null;if(C&&"HTMLFormElement"in globalThis&&(Ce instanceof FormData?Ie=Ce:Ce instanceof HTMLFormElement&&(Ie=new FormData(Ce))),"string"==typeof Ce&&(je=Ce),me.fetchOptions={cache:we.cacheBust&&!Q._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:we.headers||{},method:"head"===we.method?"HEAD":"GET",mode:"cors",priority:z.priority,redirect:"follow",signal:$e},(Ie||je)&&(me.fetchOptions.body=Ie||je),"anonymous"===we.authMode&&(me.useIdentity=!1),me.hasToken=!!(/token=/i.test(ye)||we.query?.token||Ie?.get("token")),!me.hasToken&&T.default.apiKey&&(0,N.r)(ye)&&(we.query||(we.query={}),we.query.token=T.default.apiKey,me.hasToken=!0),me.useIdentity&&!me.hasToken&&!me.credentialToken&&!_e(ye)&&!(0,W.Hc)($e)){let Je;"immediate"===we.authMode?(yield ue(),Je=yield w.id.getCredential(ye,{signal:$e}),me.credential=Je):"no-prompt"===we.authMode?(yield ue(),Je=yield w.id.getCredential(ye,{prompt:!1,signal:$e}).catch(()=>{}),me.credential=Je):w.id&&(Je=w.id.findCredential(ye)),Je&&(me.credentialToken=Je.token,me.useSSL=!!Je.ssl)}})).apply(this,arguments)}function _e(me){return B.some(ye=>ye.test(me))}function de(me){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,E.Z)(function*(me){let ye=me.params.url;const we=me.params.requestOptions,$e=me.fetchOptions??{},Ce=(0,A.jc)(ye)||(0,A.HK)(ye),Ie=we.responseType||"json",je=Ce?0:null!=we.timeout?we.timeout:z.timeout;let Je=!1;if(!Ce){me.useSSL&&(ye=(0,A.hO)(ye)),we.cacheBust&&"default"===$e.cache&&(ye=(0,A.ZN)(ye,"request.preventCache",Date.now()));let Ke={...we.query};me.credentialToken&&(Ke.token=me.credentialToken);let Ve=(0,A.B7)(Ke);(0,x.Z)("esri-url-encodes-apostrophe")&&(Ve=Ve.replace(/'/g,"%27"));const tt=ye.length+1+Ve.length;let rt;Je="delete"===we.method||"post"===we.method||"put"===we.method||!!we.body||tt>z.maxUrlLength;const Ne=we.useProxy||!!(0,A.ed)(ye);if(Ne){const qe=(0,A.b7)(ye);rt=qe.path,!Je&&rt.length+1+tt>z.maxUrlLength&&(Je=!0),qe.query&&(Ke={...qe.query,...Ke})}if("HEAD"===$e.method&&(Je||Ne)){if(Je)throw ae("request:invalid-parameters",tt>z.maxUrlLength?new Error("URL exceeds maximum length"):new Error("cannot use POST request when method is 'head'"),me.params);if(Ne)throw ae("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),me.params)}if(Je?($e.method="delete"===we.method?"DELETE":"put"===we.method?"PUT":"POST",we.body?ye=(0,A.fl)(ye,Ke):($e.body=(0,A.B7)(Ke),$e.headers||($e.headers={}),$e.headers["Content-Type"]="application/x-www-form-urlencoded")):ye=(0,A.fl)(ye,Ke),Ne&&(me.useProxy=!0,ye=`${rt}?${ye}`),Ke.token&&C&&$e.body instanceof FormData&&!(0,U.P)(ye)&&$e.body.set("token",Ke.token),we.hasOwnProperty("withCredentials"))me.withCredentials=we.withCredentials;else if(!(0,A.D6)(ye,(0,A.TI)()))if((0,A.kl)(ye))me.withCredentials=!0;else if(w.id){const qe=w.id.findServerInfo(ye);qe&&qe.webTierAuth&&(me.withCredentials=!0)}me.withCredentials&&($e.credentials="include",(0,J.jH)(ye)&&(yield(0,J.jz)(Je?(0,A.fl)(ye,Ke):ye)))}let oe,be,Ue=0,Fe=!1;je>0&&(Ue=setTimeout(()=>{Fe=!0,me.controller.abort()},je));try{if("native-request-init"===we.responseType)be=$e,be.url=ye;else if("image"!==we.responseType||"default"!==$e.cache||"GET"!==$e.method||Je||function ce(me){if(me)for(const ye of Object.getOwnPropertyNames(me))if(me[ye])return!0;return!1}(we.headers)||!Ce&&!me.useProxy&&z.proxyUrl&&!Y(ye)){if(oe=yield Q._abortableFetch(ye,$e),me.useProxy||function q(me){const ye=(0,A.P$)(me);ye&&!Q._corsServers.includes(ye)&&Q._corsServers.push(ye)}(ye),"native"===we.responseType)be=oe;else if("HEAD"!==$e.method)if(oe.ok){switch(Ie){case"array-buffer":be=yield oe.arrayBuffer();break;case"blob":case"image":be=yield oe.blob();break;default:be=yield oe.text()}if(Ue&&(clearTimeout(Ue),Ue=0),"json"===Ie||"xml"===Ie||"document"===Ie)if(be)switch(Ie){case"json":be=JSON.parse(be);break;case"xml":be=ve(be,"application/xml");break;case"document":be=ve(be,"text/html")}else be=null;if(be){if("array-buffer"===Ie||"blob"===Ie){const Ke=oe.headers.get("Content-Type");if(Ke&&/application\/json|text\/plain/i.test(Ke)&&be["blob"===Ie?"size":"byteLength"]<=750)try{const Ve=yield new Response(be).json();Ve.error&&(be=Ve)}catch{}}"image"===Ie&&be instanceof Blob&&(be=yield Se(URL.createObjectURL(be),me,!0))}}else be=yield oe.text()}else be=yield Se(ye,me)}catch(Ke){if("AbortError"===Ke.name)throw Fe?new Error("Timeout exceeded"):(0,W.zE)("Request canceled");if(!(!oe&&Ke instanceof TypeError&&z.proxyUrl)||we.body||"delete"===we.method||"head"===we.method||"post"===we.method||"put"===we.method||me.useProxy||Y(ye))throw Ke;me.redoRequest=!0,(0,A.tD)({proxyUrl:z.proxyUrl,urlPrefix:(0,A.P$)(ye)??""})}finally{Ue&&clearTimeout(Ue)}return[oe,be]})).apply(this,arguments)}function le(){return(le=(0,E.Z)(function*(me,ye){if(null!=me.responseData)return me.responseData;if(me.headers&&(ye.requestOptions.headers={...ye.requestOptions.headers,...me.headers}),me.query&&(ye.requestOptions.query={...ye.requestOptions.query,...me.query}),me.before){let we,$e;try{$e=yield me.before(ye)}catch(Ce){we=ae("request:interceptor",Ce,ye)}if(($e instanceof Error||$e instanceof Z.Z)&&(we=ae("request:interceptor",$e,ye)),we)throw me.error&&me.error(we),we;return $e}})).apply(this,arguments)}function ve(me,ye){let we;try{we=(new DOMParser).parseFromString(me,ye)}catch{}if(!we||we.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return we}function ge(){return ge=(0,E.Z)(function*(me){let ye,we;yield function ie(me){return fe.apply(this,arguments)}(me);try{do{[ye,we]=yield de(me)}while(!(yield Ae(me,ye,we)))}catch(Ie){const je=ae("request:server",Ie,me.params,ye);throw je.details.ssl=me.useSSL,me.interceptor&&me.interceptor.error&&me.interceptor.error(je),je}const $e=me.params.url;if(we&&/\/sharing\/rest\/(accounts|portals)\/self/i.test($e)){if(!me.hasToken&&!me.credentialToken&&we.user?.username&&!(0,A.kl)($e)){const Ie=(0,A.P$)($e,!0);Ie&&z.trustedServers.push(Ie)}Array.isArray(we.authorizedCrossOriginNoCorsDomains)&&(0,J.Hu)(we.authorizedCrossOriginNoCorsDomains)}const Ce=me.credential;if(Ce&&w.id){const Ie=w.id.findServerInfo(Ce.server);let je=Ie&&Ie.owningSystemUrl;if(je){je=je.replace(/\/?$/,"/sharing");const Je=w.id.findCredential(je,Ce.userId);Je&&-1===w.id._getIdenticalSvcIdx(je,Je)&&Je.resources.unshift(je)}}return{data:we,getHeader:ye?Ie=>ye?.headers.get(Ie):$,httpStatus:ye?.status??200,requestOptions:me.params.requestOptions,ssl:me.useSSL,url:me.params.url}}),ge.apply(this,arguments)}function Ae(me,ye,we){return De.apply(this,arguments)}function De(){return(De=(0,E.Z)(function*(me,ye,we){if(me.redoRequest)return me.redoRequest=!1,!1;const $e=me.params.requestOptions;if(!ye||"native"===$e.responseType||"native-request-init"===$e.responseType)return!0;let Ce,Ie;if(!ye.ok)throw Ce=new Error(`Unable to load ${ye.url} status: ${ye.status}`),Ce[X]=we,Ce;we&&(we.error?Ce=we.error:"error"===we.status&&Array.isArray(we.messages)&&(Ce={...we},Ce[X]=we,Ce.details=we.messages));let je,Je=null;Ce&&(Ie=Number(Ce.code),Je=Ce.hasOwnProperty("subcode")?Number(Ce.subcode):null,je=Ce.messageCode,je=je&&je.toUpperCase());const oe=$e.authMode;if(403===Ie&&(4===Je||Ce.message&&Ce.message.toLowerCase().includes("ssl")&&!Ce.message.toLowerCase().includes("permission"))){if(!me.useSSL)return me.useSSL=!0,!1}else if(!me.hasToken&&me.useIdentity&&("no-prompt"!==oe||498===Ie)&&void 0!==Ie&&D.includes(Ie)&&!_e(me.params.url)&&(403!==Ie||je&&!F.includes(je)&&(null==Je||2===Je&&me.credentialToken))){yield ue();try{const be=yield w.id.getCredential(me.params.url,{error:ae("request:server",Ce,me.params),prompt:"no-prompt"!==oe,signal:me.controller.signal,token:me.credentialToken});return me.credential=be,me.credentialToken=be.token,me.useSSL=me.useSSL||be.ssl,!1}catch(be){if("no-prompt"===oe)return me.credential=void 0,me.credentialToken=void 0,!1;Ce=be}}if(Ce)throw Ce;return!0})).apply(this,arguments)}function Se(me,ye,we=!1){const $e=ye.controller.signal,Ce=new Image;return Ce.crossOrigin=ye.withCredentials?"use-credentials":"anonymous",Ce.alt="",Ce.fetchPriority=z.priority,Ce.src=me,(0,J.fY)(Ce,me,we,$e)}Q._abortableFetch=null,Q._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"]},46395:(He,Pe,g)=>{"use strict";g.d(Pe,{i:()=>A});var E=g(71670),T=g(1897),w=g(83382),Z=g(71182),x=g(25820),se=g(11723),V=g(19569);const W=(0,w.se)(V.Z);function A(N,J,Q){return U.apply(this,arguments)}function U(){return(U=(0,E.Z)(function*(N,J,Q){J=W(J);const G=(0,x.en)(N),k={...G.query,f:"json",...J.toJSON()},z=J.outSpatialReference,C=(0,Z.Ji)(J.geometries[0]),D=(0,x.lA)(k,Q);return(0,T.default)(G.path+"/project",D).then(({data:{geometries:F}})=>(0,se.o)(F,C,z))})).apply(this,arguments)}},11723:(He,Pe,g)=>{"use strict";g.d(Pe,{F:()=>T,o:()=>w});var E=g(71182);function T(Z){return{geometryType:(0,E.Ji)(Z[0]),geometries:Z.map(x=>x.toJSON())}}function w(Z,x,se){const V=(0,E.q9)(x);return Z.map(W=>{const A=V.fromJSON(W);return A.spatialReference=se,A})}},58558:(He,Pe,g)=>{"use strict";function E(T){const w={};for(const Z in T){if("declaredClass"===Z)continue;const x=T[Z];if(null!=x&&"function"!=typeof x)if(Array.isArray(x)){w[Z]=[];for(let se=0;se<x.length;se++)w[Z][se]=E(x[se])}else"object"==typeof x?x.toJSON&&(w[Z]=JSON.stringify(x)):w[Z]=x}return w}g.d(Pe,{A:()=>E})},60355:(He,Pe,g)=>{"use strict";g.d(Pe,{F:()=>W,e:()=>se});var E=g(71670),T=g(25820),w=g(78170),Z=g(87096),x=g(28665);function se(U,N,J){return V.apply(this,arguments)}function V(){return(V=(0,E.Z)(function*(U,N,J){const Q=yield W(U,N,J);return Z.Z.fromJSON(Q)})).apply(this,arguments)}function W(U,N,J){return A.apply(this,arguments)}function A(){return(A=(0,E.Z)(function*(U,N,J){const Q=(0,T.en)(U),G={...J},k=x.Z.from(N),{data:z}=yield(0,w.JT)(Q,k,k.sourceSpatialReference,G);return z})).apply(this,arguments)}},33300:(He,Pe,g)=>{"use strict";g.d(Pe,{P:()=>x});var E=g(53661),T=g(82769),w=g(53492);function Z(W,A,U){if(null==W.hasM||W.hasZ)for(const N of A)for(const J of N)J.length>2&&(J[2]*=U)}function x(W,A,U){if(!W&&!A||!U)return;const N=(0,T._R)(U);se(W,U,N),se(A,U,N)}function se(W,A,U){if(W)for(const N of W)V(N.geometry,A,U)}function V(W,A,U){if((0,E.Wi)(W)||!W.spatialReference||(0,w.fS)(W.spatialReference,A))return;const N=(0,T._R)(W.spatialReference)/U;if(1!==N)if("x"in W)null!=W.z&&(W.z*=N);else if("rings"in W)Z(W,W.rings,N);else if("paths"in W)Z(W,W.paths,N);else if("points"in W&&(null==W.hasM||W.hasZ))for(const J of W.points)J.length>2&&(J[2]*=N)}},58583:(He,Pe,g)=>{"use strict";g.d(Pe,{G$:()=>X,K9:()=>ne,O7:()=>A});var E=g(32995),T=g(53661),w=g(74617),Z=g(93846),x=g(36621);const se=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],V=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],W=["upperLeft","lowerLeft"];function A(ue){return ue>=se.length?null:se[ue]}function U(ue){return ue>=V.length?null:V[ue]}function N(ue){return ue>=W.length?null:W[ue]}function J(ue,te){return te>=ue.geometryTypes.length?null:ue.geometryTypes[te]}function Q(ue,te,ie){const _e=ue.asUnsafe(),de=te.createPointGeometry(ie);for(;_e.next();)switch(_e.tag()){case 3:{const Oe=_e.getUInt32(),re=_e.pos()+Oe;let le=0;for(;_e.pos()<re;)te.addCoordinatePoint(de,_e.getSInt64(),le++);break}default:_e.skip()}return de}function G(ue,te,ie){const de=ue.asUnsafe(),Oe=te.createGeometry(ie),re=2+(ie.hasZ?1:0)+(ie.hasM?1:0);for(;de.next();)switch(de.tag()){case 2:{const le=de.getUInt32(),ce=de.pos()+le;let ve=0;for(;de.pos()<ce;)te.addLength(Oe,de.getUInt32(),ve++);break}case 3:{const le=de.getUInt32(),ce=de.pos()+le;let ve=0;for(te.allocateCoordinates(Oe);de.pos()<ce;)te.addCoordinate(Oe,de.getSInt64(),ve),ve++,ve===re&&(ve=0);break}default:de.skip()}return Oe}function k(ue){const _e=ue.asUnsafe(),de=new Z.Z;let Oe="esriGeometryPoint";for(;_e.next();)switch(_e.tag()){case 2:{const re=_e.getUInt32(),le=_e.pos()+re;for(;_e.pos()<le;)de.lengths.push(_e.getUInt32());break}case 3:{const re=_e.getUInt32(),le=_e.pos()+re;for(;_e.pos()<le;)de.coords.push(_e.getSInt64());break}case 1:Oe=x.A[_e.getEnum()];break;default:_e.skip()}return{queryGeometry:de,queryGeometryType:Oe}}function z(ue){const ve=ue.asUnsafe();for(;ve.next();)switch(ve.tag()){case 1:return ve.getString();case 2:return ve.getFloat();case 3:return ve.getDouble();case 4:return ve.getSInt32();case 5:return ve.getUInt32();case 6:return ve.getInt64();case 7:return ve.getUInt64();case 8:return ve.getSInt64();case 9:return ve.getBool();default:return ve.skip(),null}return null}function C(ue){const re=ue.asUnsafe(),le={type:A(0)};for(;re.next();)switch(re.tag()){case 1:le.name=re.getString();break;case 2:le.type=A(re.getEnum());break;case 3:le.alias=re.getString();break;case 4:le.sqlType=U(re.getEnum());break;case 5:default:re.skip();break;case 6:le.defaultValue=re.getString()}return le}function D(ue){const fe={},_e=ue.asUnsafe();for(;_e.next();)switch(_e.tag()){case 1:fe.name=_e.getString();break;case 2:fe.isSystemMaintained=_e.getBool();break;default:_e.skip()}return fe}function F(ue,te,ie,fe){const re=te.createFeature(ie);let le=0;for(;ue.next();)switch(ue.tag()){case 1:{const ce=fe[le++].name;re.attributes[ce]=ue.processMessage(z);break}case 2:re.geometry=ue.processMessageWithArgs(G,te,ie);break;case 4:re.centroid=ue.processMessageWithArgs(Q,te,ie);break;default:ue.skip()}return re}function B(ue){const de=[1,1,1,1],Oe=ue.asUnsafe();for(;Oe.next();)switch(Oe.tag()){case 1:de[0]=Oe.getDouble();break;case 2:de[1]=Oe.getDouble();break;case 4:de[2]=Oe.getDouble();break;case 3:de[3]=Oe.getDouble();break;default:Oe.skip()}return de}function $(ue){const de=[0,0,0,0],Oe=ue.asUnsafe();for(;Oe.next();)switch(Oe.tag()){case 1:de[0]=Oe.getDouble();break;case 2:de[1]=Oe.getDouble();break;case 4:de[2]=Oe.getDouble();break;case 3:de[3]=Oe.getDouble();break;default:Oe.skip()}return de}function X(ue){const _e={originPosition:N(0)},de=ue.asUnsafe();for(;de.next();)switch(de.tag()){case 1:_e.originPosition=N(de.getEnum());break;case 2:_e.scale=de.processMessage(B);break;case 3:_e.translate=de.processMessage($);break;default:de.skip()}return _e}function q(ue){const _e={},de=ue.asUnsafe();for(;de.next();)switch(de.tag()){case 1:_e.shapeAreaFieldName=de.getString();break;case 2:_e.shapeLengthFieldName=de.getString();break;case 3:_e.units=de.getString();break;default:de.skip()}return _e}function Y(ue,te){const re=te.createSpatialReference();for(;ue.next();)switch(ue.tag()){case 1:re.wkid=ue.getUInt32();break;case 5:re.wkt=ue.getString();break;case 2:re.latestWkid=ue.getUInt32();break;case 3:re.vcsWkid=ue.getUInt32();break;case 4:re.latestVcsWkid=ue.getUInt32();break;default:ue.skip()}return re}function ae(ue,te){const Se=te.createFeatureResult(),me=ue.asUnsafe();Se.geometryType=J(te,0);let ye=!1;for(;me.next();)switch(me.tag()){case 1:Se.objectIdFieldName=me.getString();break;case 3:Se.globalIdFieldName=me.getString();break;case 4:Se.geohashFieldName=me.getString();break;case 5:Se.geometryProperties=me.processMessage(q);break;case 7:Se.geometryType=J(te,me.getEnum());break;case 8:Se.spatialReference=me.processMessageWithArgs(Y,te);break;case 10:Se.hasZ=me.getBool();break;case 11:Se.hasM=me.getBool();break;case 12:Se.transform=me.processMessage(X);break;case 9:{const we=me.getBool();Se.exceededTransferLimit=we;break}case 13:te.addField(Se,me.processMessage(C));break;case 15:ye||(te.prepareFeatures(Se),ye=!0),te.addFeature(Se,me.processMessageWithArgs(F,te,Se,Se.fields));break;case 2:Se.uniqueIdField=me.processMessage(D);break;default:me.skip()}return te.finishFeatureResult(Se),Se}function he(ue,te){const _e={};let de=null;for(;ue.next();)switch(ue.tag()){case 4:de=ue.processMessageWithArgs(k);break;case 1:_e.featureResult=ue.processMessageWithArgs(ae,te);break;default:ue.skip()}return(0,T.pC)(de)&&_e.featureResult&&te.addQueryGeometry(_e,de),_e}function ne(ue,te){try{const fe=new w.Z(new Uint8Array(ue),new DataView(ue)),_e={};for(;fe.next();)2===fe.tag()?_e.queryResult=fe.processMessageWithArgs(he,te):fe.skip();return _e}catch(ie){throw new E.Z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:ie})}}},36621:(He,Pe,g)=>{"use strict";g.d(Pe,{A:()=>se,J:()=>V});var E=g(82769),T=g(53492),w=g(33510),Z=g(43921),x=g(93846);const se=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class V{constructor(A){this._options=A,this.geometryTypes=se,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Z.Z}prepareFeatures(A){this._vertexDimension=2,A.hasZ&&this._vertexDimension++,A.hasM&&this._vertexDimension++}finishFeatureResult(A){if(!A||!A.features||!A.hasZ||!this._options.sourceSpatialReference||!A.spatialReference||(0,T.fS)(A.spatialReference,this._options.sourceSpatialReference)||A.spatialReference.vcsWkid)return;const U=(0,E._R)(this._options.sourceSpatialReference)/(0,E._R)(A.spatialReference);if(1!==U)for(const N of A.features){if(!(0,w.S6)(N))continue;const J=N.geometry.coords;for(let Q=2;Q<J.length;Q+=3)J[Q]*=U}}addFeature(A,U){A.features.push(U)}createFeature(){return new w.u_}createSpatialReference(){return{wkid:0}}createGeometry(){return new x.Z}addField(A,U){A.fields.push(U)}allocateCoordinates(A){A.coords.length=A.lengths.reduce((U,N)=>U+N,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(A,U){A.coords[this._coordinatePtr++]=U}addCoordinatePoint(A,U){A.coords.push(U)}addLength(A,U){A.lengths.push(U)}addQueryGeometry(A,U){A.queryGeometry=U.queryGeometry,A.queryGeometryType=U.queryGeometryType}createPointGeometry(){return new x.Z}}},49592:(He,Pe,g)=>{"use strict";g.d(Pe,{C:()=>T});var E=g(58583);function T(w,Z){const x=(0,E.K9)(w,Z),se=x.queryResult.featureResult,V=x.queryResult.queryGeometry,W=x.queryResult.queryGeometryType;if(se&&se.features&&se.features.length&&se.objectIdFieldName){const A=se.objectIdFieldName;for(const U of se.features)U.attributes&&(U.objectId=U.attributes[A])}return se&&(se.queryGeometry=V,se.queryGeometryType=W),se}},78170:(He,Pe,g)=>{"use strict";g.d(Pe,{Ev:()=>D,JT:()=>Q,Vr:()=>B,hH:()=>F,n7:()=>C,qp:()=>k});var E=g(71670),T=g(1897),w=g(53661),Z=g(55050),x=g(71182),se=g(42758),V=g(58558),W=g(49592),A=g(59937);const U="Layer does not support extent calculation.";function J(X,q){const Y=X.geometry,ae=X.toJSON();delete ae.compactGeometryEnabled,delete ae.defaultSpatialReferenceEnabled;const he=ae;let ne,ue,te;if((0,w.pC)(Y)&&(ue=Y.spatialReference,te=Y.spatialReference.wkid||JSON.stringify(Y.spatialReference),he.geometryType=(0,x.Ji)(Y),he.geometry=function N(X,q){if(q&&"extent"===X.type)return`${X.xmin},${X.ymin},${X.xmax},${X.ymax}`;if(q&&"point"===X.type)return`${X.x},${X.y}`;const Y=X.toJSON();return delete Y.spatialReference,JSON.stringify(Y)}(Y,X.compactGeometryEnabled),he.inSR=te),ae.groupByFieldsForStatistics&&(he.groupByFieldsForStatistics=ae.groupByFieldsForStatistics.join(",")),ae.objectIds&&(he.objectIds=ae.objectIds.join(",")),ae.orderByFields&&(he.orderByFields=ae.orderByFields.join(",")),!ae.outFields||!ae.returnDistinctValues&&(q?.returnCountOnly||q?.returnExtentOnly||q?.returnIdsOnly)?delete he.outFields:he.outFields=ae.outFields.includes("*")?"*":ae.outFields.join(","),ae.outSR?(he.outSR=ae.outSR.wkid||JSON.stringify(ae.outSR),ne=X.outSpatialReference):Y&&(ae.returnGeometry||ae.returnCentroid)&&(he.outSR=he.inSR,ne=ue),ae.returnGeometry&&delete ae.returnGeometry,ae.outStatistics&&(he.outStatistics=JSON.stringify(ae.outStatistics)),ae.fullText&&(he.fullText=JSON.stringify(ae.fullText)),ae.pixelSize&&(he.pixelSize=JSON.stringify(ae.pixelSize)),ae.quantizationParameters&&(X.defaultSpatialReferenceEnabled&&(0,w.pC)(ue)&&(0,w.pC)(X.quantizationParameters)&&(0,w.pC)(X.quantizationParameters.extent)&&ue.equals(X.quantizationParameters.extent.spatialReference)&&delete ae.quantizationParameters.extent.spatialReference,he.quantizationParameters=JSON.stringify(ae.quantizationParameters)),ae.parameterValues&&(he.parameterValues=JSON.stringify(ae.parameterValues)),ae.rangeValues&&(he.rangeValues=JSON.stringify(ae.rangeValues)),ae.dynamicDataSource&&(he.layer=JSON.stringify({source:ae.dynamicDataSource}),delete ae.dynamicDataSource),ae.timeExtent){const ie=ae.timeExtent,{start:fe,end:_e}=ie;null==fe&&null==_e||(he.time=fe===_e?fe:`${fe??"null"},${_e??"null"}`),delete ae.timeExtent}return X.defaultSpatialReferenceEnabled&&(0,w.pC)(ue)&&(0,w.pC)(ne)&&ue.equals(ne)&&(he.defaultSR=he.inSR,delete he.inSR,delete he.outSR),he}function Q(X,q,Y,ae){return G.apply(this,arguments)}function G(){return(G=(0,E.Z)(function*(X,q,Y,ae){const he=(0,w.pC)(q.timeExtent)&&q.timeExtent.isEmpty?{data:{features:[]}}:yield $(X,q,"json",ae);return(0,A.p)(q,Y,he.data),he})).apply(this,arguments)}function k(X,q,Y,ae){return z.apply(this,arguments)}function z(){return(z=(0,E.Z)(function*(X,q,Y,ae){if((0,w.pC)(q.timeExtent)&&q.timeExtent.isEmpty)return{data:Y.createFeatureResult()};const he=yield C(X,q,ae),ne=he;return ne.data=(0,W.C)(he.data,Y),ne})).apply(this,arguments)}function C(X,q,Y){return $(X,q,"pbf",Y)}function D(X,q,Y){return(0,w.pC)(q.timeExtent)&&q.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):$(X,q,"json",Y,{returnIdsOnly:!0})}function F(X,q,Y){return(0,w.pC)(q.timeExtent)&&q.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):$(X,q,"json",Y,{returnIdsOnly:!0,returnCountOnly:!0})}function B(X,q,Y){return(0,w.pC)(q.timeExtent)&&q.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):$(X,q,"json",Y,{returnExtentOnly:!0,returnCountOnly:!0}).then(ae=>{const he=ae.data;if(he.hasOwnProperty("extent"))return ae;if(he.features)throw new Error(U);if(he.hasOwnProperty("count"))throw new Error(U);return ae})}function $(X,q,Y,ae={},he={}){const ne="string"==typeof X?(0,Z.mN)(X):X,ue=q.geometry?[q.geometry]:[];return ae.responseType="pbf"===Y?"array-buffer":"json",(0,se.aX)(ue,null,ae).then(te=>{const ie=te&&te[0];(0,w.pC)(ie)&&((q=q.clone()).geometry=ie);const fe=(0,V.A)({...ne.query,f:Y,...he,...J(q,he)});return(0,T.default)((0,Z.v_)(ne.path,"query"),{...ae,query:{...fe,...ae.query}})})}},59937:(He,Pe,g)=>{"use strict";g.d(Pe,{p:()=>w});var E=g(53661),T=g(83970);function w(Z,x,se){if(!se||!se.features||!se.hasZ)return;const V=(0,T.k)(se.geometryType,x,Z.outSpatialReference);if(!(0,E.Wi)(V))for(const W of se.features)V(W.geometry)}},25634:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>J});var A,E=g(18100),T=g(44480),w=g(9497),Z=g(83382),se=(g(19420),g(20891));const U={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let N=A=class extends T.wq{constructor(Q){super(Q),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:Q}=this,G=function V(Q){const{exifInfo:G,exifName:k,tagName:z}=Q;if(!G||!k||!z)return null;const C=G.find(D=>D.name===k);return C?function W(Q){const{tagName:G,tags:k}=Q;if(!k||!G)return null;const z=k.find(C=>C.name===G);return z&&z.value||null}({tagName:z,tags:C.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:Q});return U[G]||null}clone(){return new A({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};(0,E._)([(0,w.Cb)({type:String})],N.prototype,"contentType",void 0),(0,E._)([(0,w.Cb)()],N.prototype,"exifInfo",void 0),(0,E._)([(0,w.Cb)({readOnly:!0})],N.prototype,"orientationInfo",null),(0,E._)([(0,w.Cb)({type:Z.z8})],N.prototype,"id",void 0),(0,E._)([(0,w.Cb)({type:String})],N.prototype,"globalId",void 0),(0,E._)([(0,w.Cb)({type:String})],N.prototype,"keywords",void 0),(0,E._)([(0,w.Cb)({type:String})],N.prototype,"name",void 0),(0,E._)([(0,w.Cb)({json:{read:!1}})],N.prototype,"parentGlobalId",void 0),(0,E._)([(0,w.Cb)({json:{read:!1}})],N.prototype,"parentObjectId",void 0),(0,E._)([(0,w.Cb)({type:Z.z8})],N.prototype,"size",void 0),(0,E._)([(0,w.Cb)({json:{read:!1}})],N.prototype,"url",void 0),N=A=(0,E._)([(0,se.j)("esri.layers.support.AttachmentInfo")],N);const J=N},24724:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>N});var A,E=g(18100),T=g(25764),w=g(88684),Z=g(9497),x=g(83382),se=g(4139),V=g(20891),W=g(787);let U=A=class extends W.Z{constructor(J){super(J),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new A({fromColor:(0,w.d9)(this.fromColor),toColor:(0,w.d9)(this.toColor),algorithm:this.algorithm})}};(0,E._)([(0,se.J)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],U.prototype,"algorithm",void 0),(0,E._)([(0,Z.Cb)({type:T.Z,json:{type:[x.z8],write:!0}})],U.prototype,"fromColor",void 0),(0,E._)([(0,Z.Cb)({type:T.Z,json:{type:[x.z8],write:!0}})],U.prototype,"toColor",void 0),(0,E._)([(0,Z.Cb)({type:["algorithmic"]})],U.prototype,"type",void 0),U=A=(0,E._)([(0,V.j)("esri.rest.support.AlgorithmicColorRamp")],U);const N=U},35981:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(44480),w=g(88684),Z=g(9497),x=g(83382),se=g(20891),V=g(70425);let A=W=class extends T.wq{constructor(N){super(N),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(N,J){J.resultOffset=this.start,J.resultRecordCount=this.num||10}clone(){return new W((0,w.d9)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,E._)([(0,Z.Cb)({type:[String],json:{write:!0}})],A.prototype,"attachmentTypes",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],A.prototype,"attachmentsWhere",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{write:!0}})],A.prototype,"cacheHint",void 0),(0,E._)([(0,Z.Cb)({type:[String],json:{write:!0}})],A.prototype,"keywords",void 0),(0,E._)([(0,Z.Cb)({type:[Number],json:{write:!0}})],A.prototype,"globalIds",void 0),(0,E._)([(0,Z.Cb)({json:{write:!0}})],A.prototype,"name",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],A.prototype,"num",void 0),(0,E._)([(0,Z.Cb)({type:[Number],json:{write:!0}})],A.prototype,"objectIds",void 0),(0,E._)([(0,Z.Cb)({type:Boolean,json:{default:!1,write:!0}})],A.prototype,"returnMetadata",void 0),(0,E._)([(0,Z.Cb)({type:[Number],json:{write:!0}})],A.prototype,"size",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],A.prototype,"start",void 0),(0,E._)([(0,V.c)("start"),(0,V.c)("num")],A.prototype,"writeStart",null),(0,E._)([(0,Z.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],A.prototype,"where",void 0),A=W=(0,E._)([(0,se.j)("esri.rest.support.AttachmentQuery")],A),A.from=(0,x.se)(A);const U=A},787:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>W});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let V=class extends T.wq{constructor(A){super(A),this.type=null}};(0,E._)([(0,w.Cb)({readOnly:!0,json:{read:!1,write:!0}})],V.prototype,"type",void 0),V=(0,E._)([(0,se.j)("esri.rest.support.ColorRamp")],V);const W=V},87096:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>F});var z,E=g(18100),T=g(6010),w=g(26763),Z=g(63321),x=g(44480),se=g(88684),V=g(53661),W=g(9497),U=(g(83382),g(66508)),N=g(20891),J=g(70425),Q=g(68230),G=g(71182),k=g(23973);const C=new Z.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let D=z=class extends x.wq{constructor(B){super(B),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(B,$){const X=Q.Z.fromJSON($.spatialReference),q=[];for(let Y=0;Y<B.length;Y++){const ae=B[Y],he=w.Z.fromJSON(ae),ne=ae.geometry&&ae.geometry.spatialReference;(0,V.pC)(he.geometry)&&!ne&&(he.geometry.spatialReference=X);const ue=ae.aggregateGeometries,te=he.aggregateGeometries;if(ue&&(0,V.pC)(te))for(const ie in te){const fe=te[ie],_e=ue[ie]?.spatialReference;(0,V.pC)(fe)&&!_e&&(fe.spatialReference=X)}q.push(he)}return q}writeGeometryType(B,$,X,q){if(B)return void C.write(B,$,X,q);const{features:Y}=this;if(Y)for(const ae of Y)if(ae&&(0,V.pC)(ae.geometry))return void C.write(ae.geometry.type,$,X,q)}readQueryGeometry(B,$){if(!B)return null;const X=!!B.spatialReference,q=(0,G.im)(B);return q&&!X&&$.spatialReference&&(q.spatialReference=Q.Z.fromJSON($.spatialReference)),q}writeSpatialReference(B,$){if(B)return void($.spatialReference=B.toJSON());const{features:X}=this;if(X)for(const q of X)if(q&&(0,V.pC)(q.geometry)&&q.geometry.spatialReference)return void($.spatialReference=q.geometry.spatialReference.toJSON())}clone(){return new z(this.cloneProperties())}cloneProperties(){return(0,se.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(B){const $=this.write();if($.features&&Array.isArray(B)&&B.length>0)for(let X=0;X<$.features.length;X++){const q=$.features[X];if(q.geometry){const Y=B&&B[X];q.geometry=Y&&Y.toJSON()||q.geometry}}return $}quantize(B){const{scale:[$,X],translate:[q,Y]}=B,ne=this.features,ue=this._getQuantizationFunction(this.geometryType,te=>Math.round((te-q)/$),te=>Math.round((Y-te)/X));for(let te=0,ie=ne.length;te<ie;te++)ue?.((0,V.Wg)(ne[te].geometry))||(ne.splice(te,1),te--,ie--);return this.transform=B,this}unquantize(){const{geometryType:B,features:$,transform:X}=this;if(!X)return this;const{translate:[q,Y],scale:[ae,he]}=X,te=this._getHydrationFunction(B,ie=>ie*ae+q,ie=>Y-ie*he);for(const{geometry:ie}of $)(0,V.pC)(ie)&&te&&te(ie);return this.transform=null,this}_quantizePoints(B,$,X){let q,Y;const ae=[];for(let he=0,ne=B.length;he<ne;he++){const ue=B[he];if(he>0){const te=$(ue[0]),ie=X(ue[1]);te===q&&ie===Y||(ae.push([te-q,ie-Y]),q=te,Y=ie)}else q=$(ue[0]),Y=X(ue[1]),ae.push([q,Y])}return ae.length>0?ae:null}_getQuantizationFunction(B,$,X){return"point"===B?q=>(q.x=$(q.x),q.y=X(q.y),q):"polyline"===B||"polygon"===B?q=>{const Y=(0,G.oU)(q)?q.rings:q.paths,ae=[];for(let he=0,ne=Y.length;he<ne;he++){const te=this._quantizePoints(Y[he],$,X);te&&ae.push(te)}return ae.length>0?((0,G.oU)(q)?q.rings=ae:q.paths=ae,q):null}:"multipoint"===B?q=>{const Y=this._quantizePoints(q.points,$,X);return Y&&Y.length>0?(q.points=Y,q):null}:"extent"===B?q=>q:null}_getHydrationFunction(B,$,X){return"point"===B?q=>{q.x=$(q.x),q.y=X(q.y)}:"polyline"===B||"polygon"===B?q=>{const Y=(0,G.oU)(q)?q.rings:q.paths;let ae,he;for(let ne=0,ue=Y.length;ne<ue;ne++){const te=Y[ne];for(let ie=0,fe=te.length;ie<fe;ie++){const _e=te[ie];ie>0?(ae+=_e[0],he+=_e[1]):(ae=_e[0],he=_e[1]),_e[0]=$(ae),_e[1]=X(he)}}}:"extent"===B?q=>{q.xmin=$(q.xmin),q.ymin=X(q.ymin),q.xmax=$(q.xmax),q.ymax=X(q.ymax)}:"multipoint"===B?q=>{const Y=q.points;let ae,he;for(let ne=0,ue=Y.length;ne<ue;ne++){const te=Y[ne];ne>0?(ae+=te[0],he+=te[1]):(ae=te[0],he=te[1]),te[0]=$(ae),te[1]=X(he)}}:null}};(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],D.prototype,"displayFieldName",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{write:{overridePolicy:B=>({enabled:B})}}})],D.prototype,"exceededTransferLimit",void 0),(0,E._)([(0,W.Cb)({type:[w.Z],json:{write:!0}})],D.prototype,"features",void 0),(0,E._)([(0,U.r)("features")],D.prototype,"readFeatures",null),(0,E._)([(0,W.Cb)({type:[k.Z],json:{write:!0}})],D.prototype,"fields",void 0),(0,E._)([(0,W.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:C.read}}})],D.prototype,"geometryType",void 0),(0,E._)([(0,J.c)("geometryType")],D.prototype,"writeGeometryType",null),(0,E._)([(0,W.Cb)({type:Boolean,json:{write:{overridePolicy:B=>({enabled:B})}}})],D.prototype,"hasM",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{write:{overridePolicy:B=>({enabled:B})}}})],D.prototype,"hasZ",void 0),(0,E._)([(0,W.Cb)({types:T.qM,json:{write:!0}})],D.prototype,"queryGeometry",void 0),(0,E._)([(0,U.r)("queryGeometry")],D.prototype,"readQueryGeometry",null),(0,E._)([(0,W.Cb)({type:Q.Z,json:{write:!0}})],D.prototype,"spatialReference",void 0),(0,E._)([(0,J.c)("spatialReference")],D.prototype,"writeSpatialReference",null),(0,E._)([(0,W.Cb)({json:{write:!0}})],D.prototype,"transform",void 0),D=z=(0,E._)([(0,N.j)("esri.rest.support.FeatureSet")],D),D.prototype.toJSON.isDefaultToJSON=!0;const F=D},71245:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var E=g(18100),T=g(94904),w=g(44480),Z=g(53661),x=g(9497),W=(g(83382),g(19420),g(20891));let A=class extends((0,T.J)(w.wq)){constructor(N){super(N),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};(0,E._)([(0,x.Cb)({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,Z.pC)(this.onFields)&&this.onFields.length>0}}}}})],A.prototype,"onFields",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],A.prototype,"operator",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],A.prototype,"searchTerm",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],A.prototype,"searchType",void 0),A=(0,E._)([(0,W.j)("esri.rest.support.FullTextSearch")],A);const U=A},87612:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(88684),w=g(9497),x=(g(83382),g(20891)),se=g(24724),V=g(787);let A=W=class extends V.Z{constructor(N){super(N),this.colorRamps=null,this.type="multipart"}clone(){return new W({colorRamps:(0,T.d9)(this.colorRamps)})}};(0,E._)([(0,w.Cb)({type:[se.Z],json:{write:!0}})],A.prototype,"colorRamps",void 0),(0,E._)([(0,w.Cb)({type:["multipart"]})],A.prototype,"type",void 0),A=W=(0,E._)([(0,x.j)("esri.rest.support.MultipartColorRamp")],A);const U=A},19569:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891)),V=g(71182);let W=class extends T.wq{constructor(U){super(U),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const U=this.geometries.map(Q=>Q.toJSON()),N=this.geometries[0],J={};return J.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),J.inSR=N.spatialReference.wkid||JSON.stringify(N.spatialReference.toJSON()),J.geometries=JSON.stringify({geometryType:(0,V.Ji)(N),geometries:U}),this.transformation&&(J.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(J.transformForward=this.transformForward),J}};(0,E._)([(0,w.Cb)()],W.prototype,"geometries",void 0),(0,E._)([(0,w.Cb)({json:{read:{source:"outSR"}}})],W.prototype,"outSpatialReference",void 0),(0,E._)([(0,w.Cb)()],W.prototype,"transformation",void 0),(0,E._)([(0,w.Cb)()],W.prototype,"transformForward",void 0),W=(0,E._)([(0,se.j)("esri.rest.support.ProjectParameters")],W);const A=W},42806:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var U,E=g(18100),w=(g(6010),g(63321)),Z=g(44480),x=g(88684),se=g(9497),W=(g(83382),g(20891)),A=g(10465);const N=new w.X({upperLeft:"upper-left",lowerLeft:"lower-left"});let J=U=class extends Z.wq{constructor(G){super(G),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new U((0,x.d9)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,E._)([(0,se.Cb)({type:A.Z,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],J.prototype,"extent",void 0),(0,E._)([(0,se.Cb)({type:["view","edit"],json:{write:!0}})],J.prototype,"mode",void 0),(0,E._)([(0,se.Cb)({type:String,json:{read:N.read,write:N.write}})],J.prototype,"originPosition",void 0),(0,E._)([(0,se.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],J.prototype,"tolerance",void 0),J=U=(0,E._)([(0,W.j)("esri.rest.support.QuantizationParameters")],J);const Q=J},28665:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>ae});var $,E=g(18100),T=g(6010),w=g(55025),Z=g(63321),x=g(44480),se=g(88684),V=g(53661),W=g(9497),A=g(36734),U=g(4139),N=g(20891),J=g(70425),Q=g(83382),G=g(71182),k=g(38491),z=g(71245),C=g(42806),D=g(58469),F=g(68230),B=g(35787);const X=new Z.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),q=new Z.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Y=$=class extends x.wq{static from(he){return(0,Q.TJ)($,he)}constructor(he){super(he),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(he){return"number"==typeof he||"object"==typeof he?he:null}writeHistoricMoment(he,ne){ne.historicMoment=he&&he.getTime()}writeParameterValues(he,ne){if(he){const ue={};for(const te in he){const ie=he[te];ue[te]=Array.isArray(ie)?ie.map(fe=>fe instanceof Date?fe.getTime():fe):ie instanceof Date?ie.getTime():ie}ne.parameterValues=ue}}writeStart(he,ne){ne.resultOffset=this.start,ne.resultRecordCount=this.num||10,ne.where="1=1"}writeWhere(he,ne){ne.where=he||"1=1"}clone(){return new $((0,se.d9)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:(0,V.pC)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Y.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,E._)([(0,W.Cb)({json:{write:!0}})],Y.prototype,"aggregateIds",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"cacheHint",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,"compactGeometryEnabled",void 0),(0,E._)([(0,W.Cb)({json:{write:!0}})],Y.prototype,"datumTransformation",void 0),(0,E._)([(0,A.p)("datumTransformation")],Y.prototype,"castDatumTransformation",null),(0,E._)([(0,W.Cb)({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,"defaultSpatialReferenceEnabled",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{write:{overridePolicy:he=>({enabled:he>0})}}})],Y.prototype,"distance",void 0),(0,E._)([(0,W.Cb)({type:k.n,json:{write:!0}})],Y.prototype,"dynamicDataSource",void 0),(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],Y.prototype,"formatOf3DObjects",void 0),(0,E._)([(0,W.Cb)({type:[z.Z],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,V.pC)(this.fullText)&&this.fullText.length>0}}}}})],Y.prototype,"fullText",void 0),(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],Y.prototype,"gdbVersion",void 0),(0,E._)([(0,W.Cb)({types:T.qM,json:{read:G.im,write:!0}})],Y.prototype,"geometry",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{write:!0}})],Y.prototype,"geometryPrecision",void 0),(0,E._)([(0,W.Cb)({type:[String],json:{write:!0}})],Y.prototype,"groupByFieldsForStatistics",void 0),(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],Y.prototype,"having",void 0),(0,E._)([(0,W.Cb)({type:Date})],Y.prototype,"historicMoment",void 0),(0,E._)([(0,J.c)("historicMoment")],Y.prototype,"writeHistoricMoment",null),(0,E._)([(0,W.Cb)({type:Number,json:{write:!0}})],Y.prototype,"maxAllowableOffset",void 0),(0,E._)([(0,W.Cb)({type:Number,cast:he=>he<1?1:he>$.MAX_MAX_RECORD_COUNT_FACTOR?$.MAX_MAX_RECORD_COUNT_FACTOR:he,json:{write:{overridePolicy:he=>({enabled:he>1})}}})],Y.prototype,"maxRecordCountFactor",void 0),(0,E._)([(0,W.Cb)({type:["xyFootprint"],json:{write:!0}})],Y.prototype,"multipatchOption",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],Y.prototype,"num",void 0),(0,E._)([(0,W.Cb)({json:{write:!0}})],Y.prototype,"objectIds",void 0),(0,E._)([(0,W.Cb)({type:[String],json:{write:!0}})],Y.prototype,"orderByFields",void 0),(0,E._)([(0,W.Cb)({type:[String],json:{write:!0}})],Y.prototype,"outFields",void 0),(0,E._)([(0,W.Cb)({type:F.Z,json:{name:"outSR",write:!0}})],Y.prototype,"outSpatialReference",void 0),(0,E._)([(0,W.Cb)({type:[D.Z],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,V.pC)(this.outStatistics)&&this.outStatistics.length>0}}}}})],Y.prototype,"outStatistics",void 0),(0,E._)([(0,W.Cb)({json:{write:!0}})],Y.prototype,"parameterValues",void 0),(0,E._)([(0,J.c)("parameterValues")],Y.prototype,"writeParameterValues",null),(0,E._)([(0,W.Cb)({type:B.Z,json:{write:!0}})],Y.prototype,"pixelSize",void 0),(0,E._)([(0,W.Cb)({type:C.Z,json:{write:!0}})],Y.prototype,"quantizationParameters",void 0),(0,E._)([(0,W.Cb)({type:[Object],json:{write:!0}})],Y.prototype,"rangeValues",void 0),(0,E._)([(0,W.Cb)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],Y.prototype,"relationParameter",void 0),(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],Y.prototype,"resultType",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,"returnCentroid",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,"returnDistinctValues",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{default:!0,write:!0}})],Y.prototype,"returnExceededLimitFeatures",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{write:!0}})],Y.prototype,"returnGeometry",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,"returnQueryGeometry",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,"returnM",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{write:{overridePolicy:he=>({enabled:he})}}})],Y.prototype,"returnZ",void 0),(0,E._)([(0,W.Cb)({type:F.Z,json:{write:!0}})],Y.prototype,"sourceSpatialReference",void 0),(0,E._)([(0,U.J)(X,{ignoreUnknown:!1,name:"spatialRel"})],Y.prototype,"spatialRelationship",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],Y.prototype,"start",void 0),(0,E._)([(0,J.c)("start"),(0,J.c)("num")],Y.prototype,"writeStart",null),(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],Y.prototype,"sqlFormat",void 0),(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],Y.prototype,"text",void 0),(0,E._)([(0,W.Cb)({type:w.Z,json:{write:!0}})],Y.prototype,"timeExtent",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{default:!1,write:!0}})],Y.prototype,"timeReferenceUnknownClient",void 0),(0,E._)([(0,U.J)(q,{ignoreUnknown:!1}),(0,W.Cb)({json:{write:{overridePolicy(he){return{enabled:!!he&&null!=this.distance&&this.distance>0}}}}})],Y.prototype,"units",void 0),(0,E._)([(0,W.Cb)({type:String,json:{write:{overridePolicy(he){return{enabled:null!=he||null!=this.start&&this.start>0}}}}})],Y.prototype,"where",void 0),(0,E._)([(0,J.c)("where")],Y.prototype,"writeWhere",null),Y=$=(0,E._)([(0,N.j)("esri.rest.support.Query")],Y);const ae=Y},76356:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{default:()=>Q});var N,E=g(18100),w=(g(6010),g(44480)),Z=g(88684),x=g(9497),se=g(83382),V=g(20891),W=g(70425),A=g(38491),U=g(68230);let J=N=class extends w.wq{constructor(G){super(G),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(G,k){k.historicMoment=G&&G.getTime()}writeStart(G,k){k.resultOffset=this.start,k.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(k.definitionExpression="1=1")}clone(){return new N((0,Z.d9)({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,E._)([(0,x.Cb)({type:Boolean,json:{write:!0}})],J.prototype,"cacheHint",void 0),(0,E._)([(0,x.Cb)({type:A.n,json:{write:!0}})],J.prototype,"dynamicDataSource",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],J.prototype,"gdbVersion",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],J.prototype,"geometryPrecision",void 0),(0,E._)([(0,x.Cb)({type:Date})],J.prototype,"historicMoment",void 0),(0,E._)([(0,W.c)("historicMoment")],J.prototype,"_writeHistoricMoment",null),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],J.prototype,"maxAllowableOffset",void 0),(0,E._)([(0,x.Cb)({type:[Number],json:{write:!0}})],J.prototype,"objectIds",void 0),(0,E._)([(0,x.Cb)({type:[String],json:{write:!0}})],J.prototype,"orderByFields",void 0),(0,E._)([(0,x.Cb)({type:[String],json:{write:!0}})],J.prototype,"outFields",void 0),(0,E._)([(0,x.Cb)({type:U.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],J.prototype,"outSpatialReference",void 0),(0,E._)([(0,x.Cb)({json:{write:!0}})],J.prototype,"relationshipId",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],J.prototype,"start",void 0),(0,E._)([(0,W.c)("start"),(0,W.c)("num")],J.prototype,"writeStart",null),(0,E._)([(0,x.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],J.prototype,"num",void 0),(0,E._)([(0,x.Cb)({json:{write:!0}})],J.prototype,"returnGeometry",void 0),(0,E._)([(0,x.Cb)({type:Boolean,json:{write:{overridePolicy:G=>({enabled:G})}}})],J.prototype,"returnM",void 0),(0,E._)([(0,x.Cb)({type:Boolean,json:{write:{overridePolicy:G=>({enabled:G})}}})],J.prototype,"returnZ",void 0),(0,E._)([(0,x.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],J.prototype,"where",void 0),J=N=(0,E._)([(0,V.j)("esri.rest.support.RelationshipQuery")],J),J.from=(0,se.se)(J);const Q=J},58469:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>J});var A,E=g(18100),T=g(63321),w=g(44480),Z=g(88684),x=g(9497),V=(g(83382),g(20891)),W=g(70425);const U=new T.X({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let N=A=class extends w.wq{constructor(Q){super(Q),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(Q,G){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(G.statisticParameters=(0,Z.d9)(Q))}clone(){return new A({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,Z.d9)(this.statisticParameters)})}};(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],N.prototype,"maxPointCount",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],N.prototype,"maxRecordCount",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],N.prototype,"maxVertexCount",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"onStatisticField",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],N.prototype,"outStatisticFieldName",void 0),(0,E._)([(0,x.Cb)({type:String,json:{read:{source:"statisticType",reader:U.read},write:{target:"statisticType",writer:U.write}}})],N.prototype,"statisticType",void 0),(0,E._)([(0,x.Cb)({type:Object})],N.prototype,"statisticParameters",void 0),(0,E._)([(0,W.c)("statisticParameters")],N.prototype,"writeStatisticParameters",null),N=A=(0,E._)([(0,V.j)("esri.rest.support.StatisticDefinition")],N);const J=N},15354:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>X});var G,E=g(18100),T=g(6010),w=g(55025),Z=g(63321),x=g(44480),se=g(88684),V=g(53661),W=g(9497),A=g(83382),U=g(20891),N=g(70425),J=g(71182);g(19420);let k=G=class extends x.wq{constructor(q){super(q),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new G({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,E._)([(0,W.Cb)({type:[String],json:{write:!0}})],k.prototype,"groupByFields",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{write:!0}})],k.prototype,"topCount",void 0),(0,E._)([(0,W.Cb)({type:[String],json:{write:!0}})],k.prototype,"orderByFields",void 0),k=G=(0,E._)([(0,U.j)("esri.rest.support.TopFilter")],k);const z=k;var D,C=g(68230);const F=new Z.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),B=new Z.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let $=D=class extends x.wq{constructor(q){super(q),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(q,Y){Y.resultOffset=this.start,Y.resultRecordCount=this.num||10}clone(){return new D((0,se.d9)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,E._)([(0,W.Cb)({type:Boolean,json:{write:!0}})],$.prototype,"cacheHint",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{write:{overridePolicy:q=>({enabled:q>0})}}})],$.prototype,"distance",void 0),(0,E._)([(0,W.Cb)({types:T.qM,json:{read:J.im,write:!0}})],$.prototype,"geometry",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{write:!0}})],$.prototype,"geometryPrecision",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{write:!0}})],$.prototype,"maxAllowableOffset",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],$.prototype,"num",void 0),(0,E._)([(0,W.Cb)({json:{write:!0}})],$.prototype,"objectIds",void 0),(0,E._)([(0,W.Cb)({type:[String],json:{write:!0}})],$.prototype,"orderByFields",void 0),(0,E._)([(0,W.Cb)({type:[String],json:{write:!0}})],$.prototype,"outFields",void 0),(0,E._)([(0,W.Cb)({type:C.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],$.prototype,"outSpatialReference",void 0),(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],$.prototype,"resultType",void 0),(0,E._)([(0,W.Cb)({json:{write:!0}})],$.prototype,"returnGeometry",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{write:{overridePolicy:q=>({enabled:q})}}})],$.prototype,"returnM",void 0),(0,E._)([(0,W.Cb)({type:Boolean,json:{write:{overridePolicy:q=>({enabled:q})}}})],$.prototype,"returnZ",void 0),(0,E._)([(0,W.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],$.prototype,"start",void 0),(0,E._)([(0,N.c)("start"),(0,N.c)("num")],$.prototype,"writeStart",null),(0,E._)([(0,W.Cb)({type:String,json:{read:{source:"spatialRel",reader:F.read},write:{target:"spatialRel",writer:F.write}}})],$.prototype,"spatialRelationship",void 0),(0,E._)([(0,W.Cb)({type:w.Z,json:{write:!0}})],$.prototype,"timeExtent",void 0),(0,E._)([(0,W.Cb)({type:z,json:{write:!0}})],$.prototype,"topFilter",void 0),(0,E._)([(0,W.Cb)({type:String,json:{read:B.read,write:{writer:B.write,overridePolicy(q){return{enabled:(0,V.pC)(q)&&(0,V.pC)(this.distance)&&this.distance>0}}}}})],$.prototype,"units",void 0),(0,E._)([(0,W.Cb)({type:String,json:{write:!0}})],$.prototype,"where",void 0),$=D=(0,E._)([(0,U.j)("esri.rest.support.TopFeaturesQuery")],$),$.from=(0,A.se)($);const X=$},57078:(He,Pe,g)=>{"use strict";g.d(Pe,{V:()=>Z,i:()=>x});var E=g(24724),T=g(787),w=g(87612);const Z={key:"type",base:T.Z,typeMap:{algorithmic:E.Z,multipart:w.Z}};function x(se){return se&&se.type?"algorithmic"===se.type?E.Z.fromJSON(se):"multipart"===se.type?w.Z.fromJSON(se):null:null}},80183:(He,Pe,g)=>{"use strict";g.d(Pe,{q:()=>E});const E={type:String,json:{read:{source:"token"},write:{target:"token"}}}},25820:(He,Pe,g)=>{"use strict";g.d(Pe,{cv:()=>W,en:()=>V,lA:()=>se}),g(68327),g(84489);var w=g(88684),Z=g(55050);function se(U,N){return N?{...N,query:{...U??{},...N.query}}:{query:U}}function V(U){return"string"==typeof U?(0,Z.mN)(U):(0,w.d9)(U)}function W(U,N,J){const Q={};for(const G in U){if("declaredClass"===G)continue;const k=U[G];if(null!=k&&"function"!=typeof k)if(Array.isArray(k)){Q[G]=[];for(let z=0;z<k.length;z++)Q[G][z]=W(k[z])}else if("object"==typeof k)if(k.toJSON){const z=k.toJSON(J&&J[G]);Q[G]=N?z:JSON.stringify(z)}else Q[G]=N?k:JSON.stringify(k);else Q[G]=k}return Q}g(22660)},33928:(He,Pe,g)=>{"use strict";g.d(Pe,{J:()=>N});var E=g(18100),T=g(26763),Z=(g(28191),g(83382)),W=(g(19420),g(32995),g(67087),g(10729)),A=g(20891),U=g(55625);let N=class extends U.a{_own(J){J.layer&&"remove"in J.layer&&J.layer!==this.owner&&J.layer.remove(J),J.layer=this.owner}_release(J){J.layer===this.owner&&(J.layer=null)}};(0,E._)([(0,W.c)({Type:T.Z,ensureType:(0,Z.se)(T.Z)})],N.prototype,"itemType",void 0),N=(0,E._)([(0,A.j)("esri.support.GraphicsCollection")],N)},38270:(He,Pe,g)=>{"use strict";g.d(Pe,{K:()=>J});var E=g(18100),T=g(97621),w=g(40434),Z=g(28191),x=g(30801),se=g(9497),A=(g(83382),g(19420),g(20891)),U=g(22735);function N(Q,G,k){let z,C;if(Q)for(let D=0,F=Q.length;D<F;D++){if(z=Q.getItemAt(D),z[G]===k)return z;if("group"===z?.type&&(C=N(z.layers,G,k),C))return C}}const J=Q=>{let G=class extends Q{constructor(...k){super(...k),this.layers=new T.Z;const C=F=>{F.parent=this,this.layerAdded(F),"elevation"!==F.type&&"base-elevation"!==F.type||Z.Z.getLogger(this.declaredClass).error(`Layer 'title:${F.title}, id:${F.id}' of type '${F.type}' is not supported as an operational layer and will therefore be ignored.`)},D=F=>{F.parent=null,this.layerRemoved(F)};this.layers.on("before-add",F=>(F=>{F.parent&&"remove"in F.parent&&F.parent.remove(F)})(F.item)),this.layers.on("after-add",F=>C(F.item)),this.layers.on("after-remove",F=>D(F.item))}destroy(){const k=this.layers.removeAll();for(const z of k)this.layerRemoved(z),z.destroy();this.layers.destroy()}set layers(k){this._set("layers",(0,w.Z)(k,this._get("layers")))}add(k,z){const C=this.layers;if(z=C.getNextIndex(z),k instanceof U.Z){const D=k;D.parent===this?this.reorder(D,z):C.add(D,z)}else(0,x.y8)(k)?k.then(D=>{this.destroyed||this.add(D,z)}):Z.Z.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(k,z){const C=this.layers;let D=C.getNextIndex(z);k.slice().forEach(F=>{F.parent!==this?(C.add(F,D),D+=1):this.reorder(F,D)})}findLayerById(k){return N(this.layers,"id",k)}findLayerByUid(k){return N(this.layers,"uid",k)}remove(k){return this.layers.remove(k)}removeMany(k){return this.layers.removeMany(k)}removeAll(){return this.layers.removeAll()}reorder(k,z){return this.layers.reorder(k,z)}layerAdded(k){}layerRemoved(k){}};return(0,E._)([(0,se.Cb)()],G.prototype,"layers",null),G=(0,E._)([(0,A.j)("esri.support.LayersMixin")],G),G}},88801:(He,Pe,g)=>{"use strict";g.d(Pe,{Q:()=>U});var E=g(18100),T=g(97621),w=g(40434),Z=g(28191),x=g(9497),W=(g(83382),g(19420),g(20891));function A(N,J,Q){if(N)for(let G=0,k=N.length;G<k;G++){const z=N.getItemAt(G);if(z[J]===Q)return z;if("group"===z?.type){const C=A(z.tables,J,Q);if(C)return C}}}const U=N=>{let J=class extends N{constructor(...Q){super(...Q),this.tables=new T.Z,this.tables.on("after-add",G=>{const k=G.item;k.parent&&k.parent!==this&&"tables"in k.parent&&k.parent.tables.remove(k),k.parent=this,"feature"!==k.type&&Z.Z.getLogger(this.declaredClass).error(`Layer 'title:${k.title}, id:${k.id}' of type '${k.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",G=>{G.item.parent=null})}destroy(){const Q=this.tables.removeAll();for(const G of Q)G.destroy();this.tables.destroy()}set tables(Q){this._set("tables",(0,w.Z)(Q,this._get("tables")))}findTableById(Q){return A(this.tables,"id",Q)}findTableByUid(Q){return A(this.tables,"uid",Q)}};return(0,E._)([(0,x.Cb)()],J.prototype,"tables",null),J=(0,E._)([(0,W.j)("esri.support.TablesMixin")],J),J}},47949:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(6365),w=g(20711),Z=g(9497),V=(g(83382),g(19420),g(20891));let A=W=class extends((0,w.IG)(T.Z)){constructor(N){super(N),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new W({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};(0,E._)([(0,Z.Cb)()],A.prototype,"active",void 0),(0,E._)([(0,Z.Cb)()],A.prototype,"className",void 0),(0,E._)([(0,Z.Cb)()],A.prototype,"disabled",void 0),(0,E._)([(0,Z.Cb)()],A.prototype,"id",void 0),(0,E._)([(0,Z.Cb)()],A.prototype,"indicator",void 0),(0,E._)([(0,Z.Cb)()],A.prototype,"title",void 0),(0,E._)([(0,Z.Cb)()],A.prototype,"type",void 0),(0,E._)([(0,Z.Cb)()],A.prototype,"visible",void 0),A=W=(0,E._)([(0,V.j)("esri.support.actions.ActionBase")],A);const U=A},82844:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(47949);let W=V=class extends se.Z{constructor(U){super(U),this.image=null,this.type="button"}clone(){return new V({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};(0,E._)([(0,T.Cb)()],W.prototype,"image",void 0),W=V=(0,E._)([(0,x.j)("esri.support.Action.ActionButton")],W);const A=W},23648:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var V,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(47949);let W=V=class extends se.Z{constructor(U){super(U),this.image=null,this.type="toggle",this.value=!1}clone(){return new V({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};(0,E._)([(0,T.Cb)()],W.prototype,"image",void 0),(0,E._)([(0,T.Cb)()],W.prototype,"value",void 0),W=V=(0,E._)([(0,x.j)("esri.support.Action.ActionToggle")],W);const A=W},22660:(He,Pe,g)=>{"use strict";g.d(Pe,{r:()=>Z});var E=g(55050);const T=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function Z(x){const se=(0,E.P$)(x,!0);return!!se&&se.endsWith(".arcgis.com")&&!T.includes(se)&&!x.endsWith("/sharing/rest/generateToken")}},77238:(He,Pe,g)=>{"use strict";g.d(Pe,{LC:()=>A,WW:()=>U,Yi:()=>N,mz:()=>G,pp:()=>Q});var E=g(71670),w=(g(6010),g(32995)),Z=g(28191),x=g(53661),se=g(68230);const V=Z.Z.getLogger("esri.support.arcadeOnDemand");let W;function A(){return W||(W=(0,E.Z)(function*(){const k=yield Promise.all([g.e(8592),g.e(5425)]).then(g.bind(g,55425));return{arcade:k.arcade,arcadeUtils:k,Dictionary:k.Dictionary,Feature:k.arcadeFeature}})()),W}const U=(k,z,C)=>G.create(k,z,C,null,["$feature"]),N=(k,z,C)=>G.create(k,z,C,null,["$feature","$view"]),Q=(k,z,C,D)=>G.create(k,z,C,D,["$feature","$view"]);class G{constructor(z,C,D,F,B,$,X){this.script=z,this.evaluate=F;const q=Array.isArray($)?$:$.fields;this.fields=q,this._syntaxTree=D,this._arcade=C,this._arcadeFeature=B,this._spatialReference=X,this._referencesGeometry=C.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static create(z,C,D,F,B,$){return(0,E.Z)(function*(){const{arcade:X,Feature:q,Dictionary:Y}=yield A(),ae=se.Z.fromJSON(C);let he;try{he=X.parseScript(z,$)}catch(Te){return V.error(new w.Z("arcade-bad-expression","Failed to parse arcade script",{script:z,error:Te})),null}const ne=B.reduce((Te,ge)=>({...Te,[ge]:null}),{});let ue=null;(0,x.pC)(F)&&(ue=new Y(F),ue.immutable=!0,ne.$config=null);const te=X.scriptUsesGeometryEngine(he),ie=te&&X.enableGeometrySupport(),fe=X.scriptUsesFeatureSet(he)&&X.enableFeatureSetSupport(),_e=X.scriptIsAsync(he),de=_e&&X.enableAsyncSupport(),Oe={vars:ne,spatialReference:ae,useAsync:!!de};yield Promise.all([ie,fe,de]);const re=new Set;yield X.loadDependentModules(re,he,null,_e,te);const le=new Y;le.immutable=!1,le.setField("scale",0);const ce=X.compileScript(he,Oe);return new G(z,X,he,Te=>("$view"in Te&&Te.$view&&(le.setField("scale","object"==typeof Te.$view?Te.$view.scale:void 0),Te.$view=le),ue&&(Te.$config=ue),ce({vars:Te,spatialReference:ae})),new q,D,ae)})()}repurposeFeature(z){return z.geometry&&!z.geometry.spatialReference&&(z.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(z.geometry,z.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}}},91118:(He,Pe,g)=>{"use strict";g.d(Pe,{g:()=>Z,s:()=>se});var E=g(71670),T=g(74792),w=g(59680);function Z(V){return x.apply(this,arguments)}function x(){return(x=(0,E.Z)(function*(V){if(!V)return;const W=V.includes("-vector")?V.slice(0,V.indexOf("-vector")):V,A=yield(0,w.ME)("esri/t9n/basemaps");return A[V]||A[W]})).apply(this,arguments)}const se={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return(0,T.V)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}}},48604:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>T});var E=g(47384);function T(w){return new E.Z({getCollections:()=>[w.tables,w.layers],getChildrenFunction:Z=>{const x=[];return"tables"in Z&&x.push(Z.tables),"layers"in Z&&x.push(Z.layers),x},itemFilterFunction:Z=>{const x=Z.parent;return!!x&&"tables"in x&&x.tables.includes(Z)}})}},51319:(He,Pe,g)=>{"use strict";g.d(Pe,{K3:()=>T,Rx:()=>x});var E=g(67087);const T=()=>!!(0,E.Z)("enable-feature:force-wosr"),x=()=>!!(0,E.Z)("enable-feature:SceneLayer-editing")},67056:(He,Pe,g)=>{"use strict";g.d(Pe,{eZ:()=>k});var E=g(73889),T=g(21230),w=g(21777),V=(g(72560),g(47709),g(10825),g(8810)),N=(g(21303),g(60647),g(82797),g(17398)),J=g(34674);const Q=["oid","global-id"],G=["oid","global-id","guid"];function k({displayField:de,editFieldsInfo:Oe,fields:re,objectIdField:le,title:ce},ve){if(!re)return null;const Te=function Y({editFieldsInfo:de,fields:Oe,objectIdField:re},le){return function F(de,Oe){const re=de;return Oe&&(de=de.filter(le=>!Oe.includes(le.type))),de===re&&(de=de.slice()),de.sort(B),de}(Oe??[],le?.ignoreFieldTypes||_e).map(ce=>new N.Z({fieldName:ce.name,isEditable:X(ce,de),label:ce.alias,format:ne(ce),visible:D(ce,{editFieldsInfo:de,objectIdField:re,visibleFieldNames:le?.visibleFieldNames})}))}({editFieldsInfo:Oe,fields:re,objectIdField:le},ve);if(!Te.length)return null;const ge=function ie(de){const Oe=(0,T.O5)(de),{titleBase:re}=de;return Oe?`${re}: {${Oe.trim()}}`:re??""}({titleBase:ce,fields:re,displayField:de}),Ae=function ue(){return[new V.Z,new w.Z]}();return new E.Z({title:ge,content:Ae,fieldInfos:Te})}const C=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],D=(de,{editFieldsInfo:Oe,objectIdField:re,visibleFieldNames:le})=>le?le.has(de.name):!($(de.name,Oe)||re&&de.name===re||Q.includes(de.type)||C.some(ce=>ce.test(de.name)));function B(de,Oe){return"oid"===de.type?-1:"oid"===Oe.type?1:fe(de)?-1:fe(Oe)?1:(de.alias||de.name).toLocaleLowerCase().localeCompare((Oe.alias||Oe.name).toLocaleLowerCase())}function $(de,Oe){if(!de||!Oe)return!1;const{creationDateField:re,creatorField:le,editDateField:ce,editorField:ve}=Oe;return[re&&re.toLowerCase(),le&&le.toLowerCase(),ce&&ce.toLowerCase(),ve&&ve.toLowerCase()].includes(de.toLowerCase())}function X(de,Oe){return de.editable&&!G.includes(de.type)&&!$(de.name,Oe)}function ne(de){switch(de.type){case"small-integer":case"integer":case"single":return new J.Z({digitSeparator:!0,places:0});case"double":return new J.Z({digitSeparator:!0,places:2});case"date":return new J.Z({dateFormat:"long-month-day-year"});default:return"string"===de.type&&(0,T.Ec)(de.name)?new J.Z({digitSeparator:!0,places:0}):null}}function fe(de){return"name"===(de.name&&de.name.toLowerCase())||"name"===(de.alias&&de.alias.toLowerCase())}const _e=["geometry","blob","raster","guid","xml"]},90103:(He,Pe,g)=>{"use strict";g.d(Pe,{Hu:()=>A,fY:()=>V,jH:()=>U,jz:()=>N});var E=g(71670),T=g(68327),w=g(67087),Z=g(53661),x=g(30801),se=g(55050);function V(Q,G,k=!1,z){return new Promise((C,D)=>{if((0,x.Hc)(z))return void D(W());let F=()=>{X(),D(new Error(`Unable to load ${G}`))},B=()=>{const q=Q;X(),C(q)},$=()=>{if(!Q)return;const q=Q;X(),q.src="",D(W())};const X=()=>{(0,w.Z)("esri-image-decode")||(Q.removeEventListener("error",F),Q.removeEventListener("load",B)),F=null,B=null,Q=null,(0,Z.pC)(z)&&z.removeEventListener("abort",$),$=null,k&&URL.revokeObjectURL(G)};(0,Z.pC)(z)&&z.addEventListener("abort",$),(0,w.Z)("esri-image-decode")?Q.decode().then(B,F):(Q.addEventListener("error",F),Q.addEventListener("load",B))})}function W(){try{return new DOMException("Aborted","AbortError")}catch{const Q=new Error;return Q.name="AbortError",Q}}function A(Q){T.default.request.crossOriginNoCorsDomains||(T.default.request.crossOriginNoCorsDomains={});const G=T.default.request.crossOriginNoCorsDomains;for(let k of Q)k=k.toLowerCase(),/^https?:\/\//.test(k)?G[(0,se.P$)(k)??""]=0:(G[(0,se.P$)("http://"+k)??""]=0,G[(0,se.P$)("https://"+k)??""]=0)}function U(Q){const G=T.default.request.crossOriginNoCorsDomains;if(G){let k=(0,se.P$)(Q);if(k)return k=k.toLowerCase(),!(0,se.D6)(k,(0,se.TI)())&&G[k]<Date.now()-36e5}return!1}function N(Q){return J.apply(this,arguments)}function J(){return(J=(0,E.Z)(function*(Q){const G=T.default.request.crossOriginNoCorsDomains,k=(0,se.P$)(Q);G&&k&&(G[k.toLowerCase()]=Date.now());const z=(0,se.mN)(Q);Q=z.path,"json"===z.query?.f&&(Q+="?f=json");try{yield fetch(Q,{mode:"no-cors",credentials:"include"})}catch{}})).apply(this,arguments)}},99624:(He,Pe,g)=>{"use strict";g.d(Pe,{$:()=>T,r:()=>E});const E="20230301",T="2657e728c1857e6d94c324181c0788310bb0958a"},97708:(He,Pe,g)=>{"use strict";g.d(Pe,{se:()=>oe,cT:()=>De,dU:()=>Se,S9:()=>we,LB:()=>me,AH:()=>ye,yK:()=>Ce,S6:()=>Je,QT:()=>$e,f_:()=>je});var q,E=g(83382),T=g(77729),w=g(55343),x=(g(86413),g(56989)),A=(g(47166),g(50572),g(95707),g(23246)),U=g(79811),Q=(g(32339),g(79325),g(77951)),z=(g(6594),g(72488),g(18100)),C=g(88684),D=g(55798),F=g(9497),B=g(4139),$=g(20891),X=g(36214);let Y=q=class extends x.Z{constructor(...be){super(...be),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(be,Ue,Fe,Ke){if(be&&"string"!=typeof be&&null==be.imageData)return be;const Ve={};return be&&(Ve.url=be),Ue&&(Ve.outline=Ue),null!=Fe&&(Ve.width=(0,D.t_)(Fe)),null!=Ke&&(Ve.height=(0,D.t_)(Ke)),Ve}clone(){const be=new q({color:(0,C.d9)(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return be._set("source",(0,C.d9)(this.source)),be}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};(0,z._)([(0,B.J)({esriPFS:"picture-fill"},{readOnly:!0})],Y.prototype,"type",void 0),(0,z._)([(0,F.Cb)(X.KA)],Y.prototype,"url",void 0),(0,z._)([(0,F.Cb)({type:Number,json:{write:!0}})],Y.prototype,"xscale",void 0),(0,z._)([(0,F.Cb)({type:Number,json:{write:!0}})],Y.prototype,"yscale",void 0),(0,z._)([(0,F.Cb)({type:Number,cast:D.t_,json:{write:!0}})],Y.prototype,"width",void 0),(0,z._)([(0,F.Cb)({type:Number,cast:D.t_,json:{write:!0}})],Y.prototype,"height",void 0),(0,z._)([(0,F.Cb)({type:Number,cast:D.t_,json:{write:!0}})],Y.prototype,"xoffset",void 0),(0,z._)([(0,F.Cb)({type:Number,cast:D.t_,json:{write:!0}})],Y.prototype,"yoffset",void 0),(0,z._)([(0,F.Cb)(X.Ds)],Y.prototype,"source",void 0),Y=q=(0,z._)([(0,$.j)("esri.symbols.PictureFillSymbol")],Y);const ae=Y;var he=g(79409),ne=g(58913),ue=g(47900),te=g(54084),ie=g(21225),fe=g(84738),_e=g(67885),re=(g(42040),g(53563),g(52289)),ve=(g(87801),g(6134),g(13856));function De(be){if(!be)return!1;switch(be.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Se(be){if(!be)return!1;switch(be.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}g(97854),g(11830);const me={base:_e.Z,key:"type",typeMap:{"simple-fill":te.Z,"picture-fill":ae,"picture-marker":he.Z,"simple-line":ie.Z,"simple-marker":fe.Z,text:re.Z,"label-3d":A.Z,"line-3d":U.Z,"mesh-3d":Q.Z,"point-3d":ne.Z,"polygon-3d":ue.Z,"web-style":ve.Z,cim:w.Z},errorContext:"symbol"},ye={base:_e.Z,key:"type",typeMap:{"picture-marker":he.Z,"simple-marker":fe.Z,text:re.Z,"web-style":ve.Z,cim:w.Z},errorContext:"symbol"},we=(0,T.d)({types:me}),$e={base:_e.Z,key:"type",typeMap:{"simple-fill":te.Z,"picture-fill":ae,"picture-marker":he.Z,"simple-line":ie.Z,"simple-marker":fe.Z,text:re.Z,"line-3d":U.Z,"mesh-3d":Q.Z,"point-3d":ne.Z,"polygon-3d":ue.Z,"web-style":ve.Z,cim:w.Z},errorContext:"symbol"},Ce={base:_e.Z,key:"type",typeMap:{text:re.Z,"label-3d":A.Z},errorContext:"symbol"},je={base:_e.Z,key:"type",typeMap:{"line-3d":U.Z,"mesh-3d":Q.Z,"point-3d":ne.Z,"polygon-3d":ue.Z,"web-style":ve.Z,cim:w.Z},errorContext:"symbol"},Je={base:_e.Z,key:"type",typeMap:{"label-3d":A.Z},errorContext:"symbol"},oe=(0,E.N7)(me)},55343:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var Q,E=g(71670),T=g(18100),w=g(88684),Z=g(3758),x=g(9497),V=(g(83382),g(4139)),W=g(66508),A=g(20891),U=g(70425),N=g(21230),J=g(67885);let G=Q=class extends J.Z{constructor(z){super(z),this.data=null,this.type="cim"}readData(z,C){return C}writeData(z,C){if(z)for(const D in z)C[D]=z[D]}collectRequiredFields(z,C){var D=this;return(0,E.Z)(function*(){if("CIMSymbolReference"===D.data?.type){const F=D.data.primitiveOverrides;if(F){const B=F.map($=>(0,N.io)(z,C,$.valueExpressionInfo.expression));yield Promise.all(B)}}})()}clone(){return new Q({data:(0,w.d9)(this.data)})}hash(){return(0,Z.hP)(JSON.stringify(this.data)).toString()}};(0,T._)([(0,x.Cb)({json:{write:!1}})],G.prototype,"color",void 0),(0,T._)([(0,x.Cb)({json:{write:!0}})],G.prototype,"data",void 0),(0,T._)([(0,W.r)("data",["symbol"])],G.prototype,"readData",null),(0,T._)([(0,U.c)("data",{})],G.prototype,"writeData",null),(0,T._)([(0,V.J)({CIMSymbolReference:"cim"},{readOnly:!0})],G.prototype,"type",void 0),G=Q=(0,T._)([(0,A.j)("esri.symbols.CIMSymbol")],G);const k=G},86413:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var N,E=g(18100),T=g(53661),w=g(9497),se=(g(83382),g(19420),g(4139)),V=g(20891),W=g(53563),A=g(62259),U=g(15935);let J=N=class extends W.Z{constructor(G){super(G),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new N({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:(0,T.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};(0,E._)([(0,se.J)({Extrude:"extrude"},{readOnly:!0})],J.prototype,"type",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],J.prototype,"size",void 0),(0,E._)([(0,w.Cb)({type:U.b,json:{write:!0}})],J.prototype,"material",void 0),(0,E._)([(0,w.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],J.prototype,"castShadows",void 0),(0,E._)([(0,w.Cb)(A.Z)],J.prototype,"edges",void 0),J=N=(0,E._)([(0,V.j)("esri.symbols.ExtrudeSymbol3DLayer")],J);const Q=J},56989:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(21225),V=g(67885);let W=class extends V.Z{constructor(U){super(U),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};(0,E._)([(0,T.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":se.Z}},json:{default:null,write:!0}})],W.prototype,"outline",void 0),(0,E._)([(0,T.Cb)({type:["simple-fill","picture-fill"],readOnly:!0})],W.prototype,"type",void 0),W=(0,E._)([(0,x.j)("esri.symbols.FillSymbol")],W);const A=W},47166:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>te});var D,E=g(18100),T=g(53661),w=g(9497),se=(g(83382),g(19420),g(4139)),V=g(20891),W=g(53563),A=g(62259),U=g(34252),N=g(44385),J=g(73310),Q=g(1902),C=(g(28191),g(32995),g(67087),g(15935));let F=D=class extends C.b{constructor(ie){super(ie),this.colorMixMode=null}clone(){const ie={color:(0,T.pC)(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new D(ie)}};(0,E._)([(0,se.J)({multiply:"multiply",replace:"replace",tint:"tint"})],F.prototype,"colorMixMode",void 0),F=D=(0,E._)([(0,V.j)("esri.symbols.support.Symbol3DFillMaterial")],F);var ae,B=g(25764),$=g(44480),X=g(55798),q=g(1344),Y=g(16434);let he=ae=class extends $.wq{constructor(ie){super(ie),this.color=new B.Z([0,0,0,1]),this.size=(0,X.Wz)(1),this.pattern=null,this.patternCap="butt"}clone(){const ie={color:(0,T.pC)(this.color)?this.color.clone():null,size:this.size,pattern:(0,T.pC)(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new ae(ie)}};var ne;(0,E._)([(0,w.Cb)(q.a)],he.prototype,"color",void 0),(0,E._)([(0,w.Cb)(q.y)],he.prototype,"size",void 0),(0,E._)([(0,w.Cb)(J.D)],he.prototype,"pattern",void 0),(0,E._)([(0,w.Cb)({type:Y.Hc,json:{default:"butt",write:{overridePolicy(){return{enabled:(0,T.pC)(this.pattern)}}}}})],he.prototype,"patternCap",void 0),he=ae=(0,E._)([(0,V.j)("esri.symbols.support.Symbol3DOutline")],he);let ue=ne=class extends W.Z{constructor(ie){super(ie),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const ie={edges:(0,T.pC)(this.edges)?this.edges.clone():null,enabled:this.enabled,material:(0,T.pC)(this.material)?this.material.clone():null,pattern:(0,T.pC)(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:(0,T.pC)(this.outline)?this.outline.clone():null};return new ne(ie)}static fromSimpleFillSymbol(ie){const fe=ie.outline&&ie.outline.style&&"inside-frame"!==ie.outline.style&&"solid"!==ie.outline.style?new U.Z({style:ie.outline.style}):null,_e={size:ie.outline?.width??0,color:(ie.outline?.color??Q.ix).clone(),pattern:fe};return fe&&ie.outline?.cap&&(_e.patternCap=ie.outline.cap),new ne({material:new F({color:(ie.color??Q.l9).clone()}),pattern:ie.style&&"solid"!==ie.style?new N.Z({style:ie.style}):null,outline:_e})}};(0,E._)([(0,se.J)({Fill:"fill"},{readOnly:!0})],ue.prototype,"type",void 0),(0,E._)([(0,w.Cb)({type:F,json:{write:!0}})],ue.prototype,"material",void 0),(0,E._)([(0,w.Cb)(J.q)],ue.prototype,"pattern",void 0),(0,E._)([(0,w.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ue.prototype,"castShadows",void 0),(0,E._)([(0,w.Cb)({type:he,json:{write:!0}})],ue.prototype,"outline",void 0),(0,E._)([(0,w.Cb)(A.Z)],ue.prototype,"edges",void 0),ue=ne=(0,E._)([(0,V.j)("esri.symbols.FillSymbol3DLayer")],ue);const te=ue},50572:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>N});var A,E=g(18100),T=g(44480),w=g(55798),Z=g(9497),x=g(36734),V=(g(19420),g(20891)),W=g(6713);let U=A=class extends T.wq{constructor(J){super(J),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(J){return(0,w.t_)(J)}clone(){return new A({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};(0,E._)([(0,Z.Cb)({type:W.JT,json:{default:"none",write:!0}})],U.prototype,"decoration",void 0),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],U.prototype,"family",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:{overridePolicy:(J,Q,G)=>({enabled:!G||!G.textSymbol3D})}}})],U.prototype,"size",void 0),(0,E._)([(0,x.p)("size")],U.prototype,"castSize",null),(0,E._)([(0,Z.Cb)({type:W.g6,json:{default:"normal",write:!0}})],U.prototype,"style",void 0),(0,E._)([(0,Z.Cb)({type:W.vC,json:{default:"normal",write:!0}})],U.prototype,"weight",void 0),U=A=(0,E._)([(0,V.j)("esri.symbols.Font")],U);const N=U},95707:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>ue});var D,E=g(18100),T=g(28191),w=g(53661),Z=g(55050),x=g(9497),W=(g(83382),g(19420),g(4139)),A=g(20891),U=g(53563),N=g(1902),J=g(55315),Q=g(1344),G=g(87804),k=g(25764),z=g(44480),C=g(55798);let F=D=class extends z.wq{constructor(te){super(te),this.color=new k.Z([0,0,0,1]),this.size=(0,C.Wz)(1)}clone(){const te={color:(0,w.pC)(this.color)?this.color.clone():null,size:this.size};return new D(te)}};(0,E._)([(0,x.Cb)(Q.a)],F.prototype,"color",void 0),(0,E._)([(0,x.Cb)(Q.y)],F.prototype,"size",void 0),F=D=(0,E._)([(0,A.j)("esri.symbols.support.Symbol3DIconOutline")],F);var $,B=g(15935);const X="esri.symbols.IconSymbol3DLayer";let q=$=class extends U.Z{constructor(te){super(te),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new $({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:(0,w.pC)(this.material)?this.material.clone():null,outline:(0,w.pC)(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(te){const ie=te.color||N.ix,fe=Y(te),_e=te.outline&&te.outline.width>0?{size:te.outline.width,color:(te.outline.color||N.ix).clone()}:null;return new $({size:te.size,resource:{primitive:ne(te.style)},material:{color:ie},outline:_e,anchor:fe?"relative":void 0,anchorPosition:fe})}static fromPictureMarkerSymbol(te){const ie=!te.color||(0,N.rx)(te.color)?N.ix:te.color,fe=Y(te);return new $({size:te.width<=te.height?te.height:te.width,resource:{href:te.url},material:{color:ie.clone()},anchor:fe?"relative":void 0,anchorPosition:fe})}static fromCIMSymbol(te){return new $({resource:{href:(0,Z._l)({mediaType:"application/json",data:JSON.stringify(te.data)})}})}};function Y(te){const ie="width"in te?te.width:te.size,fe="height"in te?te.height:te.size,_e=ae(te.xoffset),de=ae(te.yoffset);return(_e||de)&&ie&&fe?{x:-_e/ie,y:de/fe}:null}function ae(te){return isFinite(te)?te:0}(0,E._)([(0,x.Cb)({type:B.b,json:{write:!0}})],q.prototype,"material",void 0),(0,E._)([(0,x.Cb)({type:J.b,json:{write:!0}})],q.prototype,"resource",void 0),(0,E._)([(0,W.J)({Icon:"icon"},{readOnly:!0})],q.prototype,"type",void 0),(0,E._)([(0,x.Cb)(Q.y)],q.prototype,"size",void 0),(0,E._)([(0,W.J)({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),(0,x.Cb)({json:{default:"center"}})],q.prototype,"anchor",void 0),(0,E._)([(0,x.Cb)({type:G.e,json:{type:[Number],read:{reader:te=>new G.e({x:te[0],y:te[1]})},write:{writer:(te,ie)=>{ie.anchorPosition=[te.x,te.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],q.prototype,"anchorPosition",void 0),(0,E._)([(0,x.Cb)({type:F,json:{write:!0}})],q.prototype,"outline",void 0),q=$=(0,E._)([(0,A.j)(X)],q);const he={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function ne(te){return he[te]||(T.Z.getLogger(X).warn(`${te} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const ue=q},23246:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var J,E=g(18100),T=g(97621),w=g(88684),Z=g(9497),se=(g(83382),g(4139)),V=g(20891),W=g(42040),A=g(87801),U=g(91738),N=g(5265);const Q=T.Z.ofType({base:null,key:"type",typeMap:{text:A.Z}});let G=J=class extends W.Z{constructor(z){super(z),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Q,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return(0,U.gv)(this)}hasVisibleVerticalOffset(){return(0,U.Uy)(this)}clone(){return new J({styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail),callout:(0,w.d9)(this.callout),verticalOffset:(0,w.d9)(this.verticalOffset)})}static fromTextSymbol(z){return new J({symbolLayers:[A.Z.fromTextSymbol(z)]})}};(0,E._)([(0,Z.Cb)({type:N.Z,json:{write:!0}})],G.prototype,"verticalOffset",void 0),(0,E._)([(0,Z.Cb)(U.Y2)],G.prototype,"callout",void 0),(0,E._)([(0,Z.Cb)({json:{read:!1,write:!1}})],G.prototype,"styleOrigin",void 0),(0,E._)([(0,Z.Cb)({type:Q})],G.prototype,"symbolLayers",void 0),(0,E._)([(0,se.J)({LabelSymbol3D:"label-3d"},{readOnly:!0})],G.prototype,"type",void 0),G=J=(0,E._)([(0,V.j)("esri.symbols.LabelSymbol3D")],G);const k=G},79811:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var N,E=g(18100),T=g(97621),w=g(88684),Z=g(9497),se=(g(83382),g(4139)),V=g(20891),W=g(32339),A=g(72488),U=g(42040);const J=T.Z.ofType({base:null,key:"type",typeMap:{line:W.Z,path:A.Z}}),Q=T.Z.ofType({base:null,key:"type",typeMap:{line:W.Z,path:A.Z}});let G=N=class extends U.Z{constructor(z){super(z),this.symbolLayers=new J,this.type="line-3d"}clone(){return new N({styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail)})}static fromSimpleLineSymbol(z){return new N({symbolLayers:[W.Z.fromSimpleLineSymbol(z)]})}};(0,E._)([(0,Z.Cb)({type:J,json:{type:Q}})],G.prototype,"symbolLayers",void 0),(0,E._)([(0,se.J)({LineSymbol3D:"line-3d"},{readOnly:!0})],G.prototype,"type",void 0),G=N=(0,E._)([(0,V.j)("esri.symbols.LineSymbol3D")],G);const k=G},32339:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Y});var E=g(18100),T=g(53661),w=g(55798),Z=g(9497),x=g(83382),V=(g(19420),g(4139)),W=g(20891),A=g(25764),U=g(94904),N=g(44480),J=g(7155);let Q=class extends((0,U.J)(N.wq)){constructor(ae){super(ae),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(ae){return(0,T.pC)(ae)&&ae.placement===this.placement&&ae.style===this.style&&((0,T.Wi)(this.color)&&(0,T.Wi)(ae.color)||(0,T.pC)(this.color)&&(0,T.pC)(ae.color)&&this.color.toJSON()===ae.color.toJSON())}};(0,E._)([(0,Z.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Q.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:J.J,json:{default:"begin-end",write:!0}})],Q.prototype,"placement",void 0),(0,E._)([(0,Z.Cb)({type:J.k,json:{default:"arrow",write:!0}})],Q.prototype,"style",void 0),(0,E._)([(0,Z.Cb)({type:A.Z,json:{type:[x.z8],default:null,write:!0}})],Q.prototype,"color",void 0),Q=(0,E._)([(0,W.j)("esri.symbols.LineStyleMarker3D")],Q);const G=Q;var X,k=g(53563),z=g(34252),C=g(73310),D=g(1902),F=g(1344),B=g(15935),$=g(16434);let q=X=class extends k.Z{constructor(ae){super(ae),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=(0,w.Wz)(1),this.pattern=null,this.marker=null}clone(){const ae={enabled:this.enabled,material:(0,T.pC)(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:(0,T.pC)(this.pattern)?this.pattern.clone():null,marker:(0,T.pC)(this.marker)?this.marker.clone():null};return new X(ae)}static fromSimpleLineSymbol(ae){const he={enabled:!0,size:ae.width??(0,w.Wz)(1),cap:ae.cap||"butt",join:ae.join||"miter",pattern:ae.style&&"inside-frame"!==ae.style?new z.Z({style:ae.style}):null,material:new B.b({color:(ae.color||D.ix).clone()}),marker:ae.marker?new G({placement:ae.marker.placement,style:ae.marker.style,color:ae.marker.color?.clone()??null}):null};return new X(he)}};(0,E._)([(0,Z.Cb)({type:B.b,json:{write:!0}})],q.prototype,"material",void 0),(0,E._)([(0,V.J)({Line:"line"},{readOnly:!0})],q.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:$.w2,json:{write:!0,default:"miter"}})],q.prototype,"join",void 0),(0,E._)([(0,Z.Cb)({type:$.Hc,json:{write:!0,default:"butt"}})],q.prototype,"cap",void 0),(0,E._)([(0,Z.Cb)(F.y)],q.prototype,"size",void 0),(0,E._)([(0,Z.Cb)(C.D)],q.prototype,"pattern",void 0),(0,E._)([(0,Z.Cb)({types:{key:"type",base:G,typeMap:{style:G}},json:{write:!0}})],q.prototype,"marker",void 0),q=X=(0,E._)([(0,W.j)("esri.symbols.LineSymbol3DLayer")],q);const Y=q},79325:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var E=g(18100),T=g(55798),w=g(9497),se=(g(83382),g(19420),g(20891)),V=g(67885);let W=class extends V.Z{constructor(U){super(U),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};(0,E._)([(0,w.Cb)({type:Number,json:{read:U=>U&&-1*U,write:(U,N)=>N.angle=U&&-1*U}})],W.prototype,"angle",void 0),(0,E._)([(0,w.Cb)({type:["simple-marker","picture-marker"],readOnly:!0})],W.prototype,"type",void 0),(0,E._)([(0,w.Cb)({type:Number,cast:T.t_,json:{write:!0}})],W.prototype,"xoffset",void 0),(0,E._)([(0,w.Cb)({type:Number,cast:T.t_,json:{write:!0}})],W.prototype,"yoffset",void 0),(0,E._)([(0,w.Cb)({type:Number,cast:U=>"auto"===U?U:(0,T.t_)(U),json:{write:!0}})],W.prototype,"size",void 0),W=(0,E._)([(0,se.j)("esri.symbols.MarkerSymbol")],W);const A=W},77951:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var U,E=g(18100),T=g(97621),w=g(88684),Z=g(9497),se=(g(83382),g(4139)),V=g(20891),W=g(47166),A=g(42040);const N=T.Z.ofType({base:null,key:"type",typeMap:{fill:W.Z}});let J=U=class extends A.Z{constructor(G){super(G),this.symbolLayers=new N,this.type="mesh-3d"}clone(){return new U({styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail)})}static fromSimpleFillSymbol(G){return new U({symbolLayers:[W.Z.fromSimpleFillSymbol(G)]})}};(0,E._)([(0,Z.Cb)({type:N})],J.prototype,"symbolLayers",void 0),(0,E._)([(0,se.J)({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],J.prototype,"type",void 0),J=U=(0,E._)([(0,V.j)("esri.symbols.MeshSymbol3D")],J);const Q=J},6594:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>z});var N,E=g(18100),T=g(53661),w=g(9497),se=(g(83382),g(19420),g(4139)),V=g(20891),W=g(53563),A=g(82751),U=g(6365);let J=N=class extends U.Z{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new N({x:this.x,y:this.y,z:this.z})}};(0,E._)([(0,w.Cb)({type:Number})],J.prototype,"x",void 0),(0,E._)([(0,w.Cb)({type:Number})],J.prototype,"y",void 0),(0,E._)([(0,w.Cb)({type:Number})],J.prototype,"z",void 0),J=N=(0,E._)([(0,V.j)("esri.symbols.support.Symbol3DAnchorPosition3D")],J);var G,Q=g(15935);let k=G=class extends W.Z{constructor(C){super(C),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new G({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:(0,T.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}};(0,E._)([(0,w.Cb)({type:Q.b,json:{write:!0}})],k.prototype,"material",void 0),(0,E._)([(0,w.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],k.prototype,"castShadows",void 0),(0,E._)([(0,w.Cb)({type:A.k,json:{write:!0}})],k.prototype,"resource",void 0),(0,E._)([(0,se.J)({Object:"object"},{readOnly:!0})],k.prototype,"type",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],k.prototype,"width",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],k.prototype,"height",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],k.prototype,"depth",void 0),(0,E._)([(0,se.J)({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),(0,w.Cb)({json:{default:"origin"}})],k.prototype,"anchor",void 0),(0,E._)([(0,w.Cb)({type:J,json:{type:[Number],read:{reader:C=>new J({x:C[0],y:C[1],z:C[2]})},write:{writer:(C,D)=>{D.anchorPosition=[C.x,C.y,C.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],k.prototype,"anchorPosition",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],k.prototype,"heading",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],k.prototype,"tilt",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],k.prototype,"roll",void 0),(0,E._)([(0,w.Cb)({readOnly:!0})],k.prototype,"isPrimitive",null),k=G=(0,E._)([(0,V.j)("esri.symbols.ObjectSymbol3DLayer")],k);const z=k},72488:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>G});var J,E=g(18100),T=g(53661),w=g(9497),se=(g(83382),g(19420),g(4139)),V=g(66508),W=g(20891),A=g(53563),U=g(15935),N=g(16434);let Q=J=class extends A.Z{constructor(k){super(k),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(k,z){return k??(null==z.height&&null!=z.size?z.size:void 0)}readHeight(k,z){return k??(null==z.width&&null!=z.size?z.size:void 0)}clone(){return new J({enabled:this.enabled,material:(0,T.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};(0,E._)([(0,w.Cb)({type:U.b,json:{write:!0}})],Q.prototype,"material",void 0),(0,E._)([(0,w.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Q.prototype,"castShadows",void 0),(0,E._)([(0,se.J)({Path:"path"},{readOnly:!0})],Q.prototype,"type",void 0),(0,E._)([(0,w.Cb)({type:["circle","quad"],json:{write:!0,default:"circle"}})],Q.prototype,"profile",void 0),(0,E._)([(0,w.Cb)({type:N.w2,json:{write:!0,default:"miter"}})],Q.prototype,"join",void 0),(0,E._)([(0,w.Cb)({type:N.KW,json:{write:!0,default:"butt"}})],Q.prototype,"cap",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Q.prototype,"width",void 0),(0,E._)([(0,V.r)("width",["width","size","height"])],Q.prototype,"readWidth",null),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],Q.prototype,"height",void 0),(0,E._)([(0,V.r)("height",["height","size","width"])],Q.prototype,"readHeight",null),(0,E._)([(0,w.Cb)({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Q.prototype,"anchor",void 0),(0,E._)([(0,w.Cb)({type:["heading","all"],json:{write:!0,default:"all"}})],Q.prototype,"profileRotation",void 0),Q=J=(0,E._)([(0,W.j)("esri.symbols.PathSymbol3DLayer")],Q);const G=Q},79409:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var N,E=g(18100),T=g(88684),w=g(55798),Z=g(9497),se=(g(83382),g(4139)),V=g(66508),W=g(20891),A=g(79325),U=g(36214);let J=N=class extends A.Z{constructor(...G){super(...G),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(G,k,z){if(G&&"string"!=typeof G&&null==G.imageData)return G;const C={};return G&&(C.url=G),null!=k&&(C.width=(0,w.t_)(k)),null!=z&&(C.height=(0,w.t_)(z)),C}readHeight(G,k){return k.size||G}readWidth(G,k){return k.size||G}clone(){const G=new N({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return G._set("source",(0,T.d9)(this.source)),G}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};(0,E._)([(0,Z.Cb)({json:{write:!1}})],J.prototype,"color",void 0),(0,E._)([(0,se.J)({esriPMS:"picture-marker"},{readOnly:!0})],J.prototype,"type",void 0),(0,E._)([(0,Z.Cb)(U.KA)],J.prototype,"url",void 0),(0,E._)([(0,Z.Cb)(U.Ds)],J.prototype,"source",void 0),(0,E._)([(0,Z.Cb)({type:Number,cast:w.t_,json:{write:!0}})],J.prototype,"height",void 0),(0,E._)([(0,V.r)("height",["height","size"])],J.prototype,"readHeight",null),(0,E._)([(0,Z.Cb)({type:Number,cast:w.t_,json:{write:!0}})],J.prototype,"width",void 0),(0,E._)([(0,Z.Cb)({json:{write:!1}})],J.prototype,"size",void 0),J=N=(0,E._)([(0,W.j)("esri.symbols.PictureMarkerSymbol")],J);const Q=J},58913:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>C});var G,E=g(18100),T=g(97621),w=g(88684),Z=g(9497),se=(g(83382),g(4139)),V=g(20891),W=g(95707),A=g(6594),U=g(42040),N=g(87801),J=g(91738),Q=g(5265);const k=T.Z.ofType({base:null,key:"type",typeMap:{icon:W.Z,object:A.Z,text:N.Z}});let z=G=class extends U.Z{constructor(D){super(D),this.verticalOffset=null,this.callout=null,this.symbolLayers=new k,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const D of this.symbolLayers.items)switch(D.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return(0,J.gv)(this)}hasVisibleVerticalOffset(){return(0,J.Uy)(this)}clone(){return new G({verticalOffset:(0,w.d9)(this.verticalOffset),callout:(0,w.d9)(this.callout),styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail)})}static fromSimpleMarkerSymbol(D){return new G({symbolLayers:[W.Z.fromSimpleMarkerSymbol(D)]})}static fromPictureMarkerSymbol(D){return new G({symbolLayers:[W.Z.fromPictureMarkerSymbol(D)]})}static fromCIMSymbol(D){if("CIMPointSymbol"!==D.data?.symbol?.type)return null;const B=D.data.symbol;return new G(B?.callout?{symbolLayers:[W.Z.fromCIMSymbol(D)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[W.Z.fromCIMSymbol(D)]})}static fromTextSymbol(D){return new G({symbolLayers:[N.Z.fromTextSymbol(D)]})}};(0,E._)([(0,Z.Cb)({type:Q.Z,json:{write:!0}})],z.prototype,"verticalOffset",void 0),(0,E._)([(0,Z.Cb)(J.Y2)],z.prototype,"callout",void 0),(0,E._)([(0,Z.Cb)({type:k,json:{origins:{"web-scene":{write:!0}}}})],z.prototype,"symbolLayers",void 0),(0,E._)([(0,se.J)({PointSymbol3D:"point-3d"},{readOnly:!0})],z.prototype,"type",void 0),z=G=(0,E._)([(0,V.j)("esri.symbols.PointSymbol3D")],z);const C=z},47900:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>B});var C,E=g(18100),T=g(97621),w=g(88684),Z=g(53661),x=g(9497),V=(g(83382),g(4139)),W=g(20891),A=g(86413),U=g(47166),N=g(95707),J=g(32339),Q=g(6594),G=g(42040),k=g(87801),z=g(6134);const D=T.Z.ofType({base:null,key:"type",typeMap:{extrude:A.Z,fill:U.Z,icon:N.Z,line:J.Z,object:Q.Z,text:k.Z,water:z.Z}});let F=C=class extends G.Z{constructor($){super($),this.symbolLayers=new D,this.type="polygon-3d"}clone(){return new C({styleOrigin:(0,w.d9)(this.styleOrigin),symbolLayers:(0,w.d9)(this.symbolLayers),thumbnail:(0,w.d9)(this.thumbnail)})}static fromJSON($){const X=new C;if(X.read($),2===X.symbolLayers.length&&"fill"===X.symbolLayers.getItemAt(0).type&&"line"===X.symbolLayers.getItemAt(1).type){const q=X.symbolLayers.getItemAt(0),Y=X.symbolLayers.getItemAt(1);!Y.enabled||$.symbolLayers&&$.symbolLayers[1]&&!1===$.symbolLayers[1].enable||(q.outline={size:Y.size,color:(0,Z.pC)(Y.material)?Y.material.color:null}),X.symbolLayers.removeAt(1)}return X}static fromSimpleFillSymbol($){return new C({symbolLayers:[U.Z.fromSimpleFillSymbol($)]})}};(0,E._)([(0,x.Cb)({type:D,json:{write:!0}})],F.prototype,"symbolLayers",void 0),(0,E._)([(0,V.J)({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],F.prototype,"type",void 0),F=C=(0,E._)([(0,W.j)("esri.symbols.PolygonSymbol3D")],F);const B=F},54084:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>G});var N,E=g(18100),T=g(25764),w=g(63321),Z=g(88684),x=g(9497),V=(g(83382),g(4139)),W=g(20891),A=g(56989),U=g(21225);const J=new w.X({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Q=N=class extends A.Z{constructor(...k){super(...k),this.color=new T.Z([0,0,0,.25]),this.outline=new U.Z,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(k,z,C){if(k&&"string"!=typeof k)return k;const D={};return k&&(D.style=k),z&&(D.outline=z),C&&(D.color=C),D}clone(){return new N({color:(0,Z.d9)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};(0,E._)([(0,x.Cb)()],Q.prototype,"color",void 0),(0,E._)([(0,x.Cb)()],Q.prototype,"outline",void 0),(0,E._)([(0,V.J)({esriSFS:"simple-fill"},{readOnly:!0})],Q.prototype,"type",void 0),(0,E._)([(0,x.Cb)({type:J.apiValues,json:{read:J.read,write:J.write}})],Q.prototype,"style",void 0),Q=N=(0,E._)([(0,W.j)("esri.symbols.SimpleFillSymbol")],Q);const G=Q},21225:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Y});var E=g(18100),T=g(63321),w=g(88684),Z=g(55798),x=g(9497),V=(g(83382),g(4139)),W=g(20891),U=(g(19420),g(67885));let N=class extends U.Z{constructor(ae){super(ae),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};(0,E._)([(0,V.J)({esriSLS:"simple-line"},{readOnly:!0})],N.prototype,"type",void 0),(0,E._)([(0,x.Cb)({type:Number,cast:Z.t_,json:{write:!0}})],N.prototype,"width",void 0),N=(0,E._)([(0,W.j)("esri.symbols.LineSymbol")],N);const J=N;var D,Q=g(25764),G=g(44480),k=g(66508),z=g(70425),C=g(7155);let F=D=class extends G.wq{constructor(ae){super(ae),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(ae,he,ne,ue){he[ne]="web-map"===ue?.origin?"arrow":ae}set color(ae){this._set("color",ae)}readColor(ae){return ae&&null!=ae[0]?[ae[0],ae[1],ae[2],ae[3]/255]:ae}writeColor(ae,he,ne,ue){"web-map"===ue?.origin||(he[ne]=ae)}clone(){return new D({color:(0,w.d9)(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};(0,E._)([(0,x.Cb)({type:["begin","end","begin-end"],json:{write:!0}})],F.prototype,"placement",void 0),(0,E._)([(0,V.J)({"line-marker":"line-marker"},{readOnly:!0}),(0,x.Cb)({json:{origins:{"web-map":{write:!1}}}})],F.prototype,"type",void 0),(0,E._)([(0,x.Cb)({type:C.k})],F.prototype,"style",void 0),(0,E._)([(0,z.c)("style")],F.prototype,"writeStyle",null),(0,E._)([(0,x.Cb)({type:Q.Z,value:null,json:{write:{allowNull:!0}}})],F.prototype,"color",null),(0,E._)([(0,k.r)("color")],F.prototype,"readColor",null),(0,E._)([(0,z.c)("color")],F.prototype,"writeColor",null),F=D=(0,E._)([(0,W.j)("esri.symbols.LineSymbolMarker")],F);const B=F;var $;const X=new T.X({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let q=$=class extends J{constructor(...ae){super(...ae),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(ae,he,ne,ue,te,ie){if(ae&&"string"!=typeof ae)return ae;const fe={};return null!=ae&&(fe.style=ae),null!=he&&(fe.color=he),null!=ne&&(fe.width=(0,Z.t_)(ne)),null!=ue&&(fe.cap=ue),null!=te&&(fe.join=te),null!=ie&&(fe.miterLimit=(0,Z.t_)(ie)),fe}clone(){return new $({color:(0,w.d9)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};(0,E._)([(0,V.J)({esriSLS:"simple-line"},{readOnly:!0})],q.prototype,"type",void 0),(0,E._)([(0,x.Cb)({type:X.apiValues,json:{read:X.read,write:X.write}})],q.prototype,"style",void 0),(0,E._)([(0,x.Cb)({type:["butt","round","square"],json:{write:{overridePolicy:(ae,he,ne)=>({enabled:"round"!==ae&&(null==ne||null==ne.origin)})}}})],q.prototype,"cap",void 0),(0,E._)([(0,x.Cb)({type:["miter","round","bevel"],json:{write:{overridePolicy:(ae,he,ne)=>({enabled:"round"!==ae&&(null==ne||null==ne.origin)})}}})],q.prototype,"join",void 0),(0,E._)([(0,x.Cb)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":B}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],q.prototype,"marker",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{read:!1,write:!1}})],q.prototype,"miterLimit",void 0),q=$=(0,E._)([(0,W.j)("esri.symbols.SimpleLineSymbol")],q);const Y=q},84738:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>z});var Q,E=g(18100),T=g(25764),w=g(63321),Z=g(88684),x=g(55798),se=g(9497),W=(g(83382),g(4139)),A=g(20891),U=g(70425),N=g(79325),J=g(21225);const G=new w.X({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let k=Q=class extends N.Z{constructor(...C){super(...C),this.color=new T.Z([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new J.Z}normalizeCtorArgs(C,D,F,B){if(C&&"string"!=typeof C)return C;const $={};return C&&($.style=C),null!=D&&($.size=(0,x.t_)(D)),F&&($.outline=F),B&&($.color=B),$}writeColor(C,D){C&&"x"!==this.style&&"cross"!==this.style&&(D.color=C.toJSON()),null===C&&(D.color=null)}set path(C){this.style="path",this._set("path",C)}clone(){return new Q({angle:this.angle,color:(0,Z.d9)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};(0,E._)([(0,se.Cb)()],k.prototype,"color",void 0),(0,E._)([(0,U.c)("color")],k.prototype,"writeColor",null),(0,E._)([(0,W.J)({esriSMS:"simple-marker"},{readOnly:!0})],k.prototype,"type",void 0),(0,E._)([(0,se.Cb)()],k.prototype,"size",void 0),(0,E._)([(0,se.Cb)({type:G.apiValues,json:{read:G.read,write:G.write}})],k.prototype,"style",void 0),(0,E._)([(0,se.Cb)({type:String,json:{write:!0}})],k.prototype,"path",null),(0,E._)([(0,se.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":J.Z}},json:{default:null,write:!0}})],k.prototype,"outline",void 0),k=Q=(0,E._)([(0,A.j)("esri.symbols.SimpleMarkerSymbol")],k);const z=k},67885:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>G});var E=g(71670),T=g(18100),w=g(25764),Z=g(63321),x=g(44480),se=g(9497),A=(g(83382),g(19420),g(66508)),U=g(20891);const N=new Z.X({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let J=0,Q=class extends x.wq{constructor(k){super(k),this.id="sym"+J++,this.type=null,this.color=new w.Z([0,0,0,1])}readColor(k){return k&&null!=k[0]?[k[0],k[1],k[2],k[3]/255]:k}collectRequiredFields(k,z){return(0,E.Z)(function*(){})()}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,T._)([(0,se.Cb)({type:N.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:N.write}}})],Q.prototype,"type",void 0),(0,T._)([(0,se.Cb)({type:w.Z,json:{write:{allowNull:!0}}})],Q.prototype,"color",void 0),(0,T._)([(0,A.r)("color")],Q.prototype,"readColor",null),Q=(0,T._)([(0,U.j)("esri.symbols.Symbol")],Q);const G=Q},42040:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>ie});var E=g(18100),T=g(97621),w=g(40434),Z=g(28191),x=g(55050),se=g(23476),V=g(9497),W=g(36734),U=(g(19420),g(66508)),N=g(20891),J=g(70425),Q=g(37753),G=g(29184),k=g(86413),z=g(47166),C=g(95707),D=g(32339),F=g(6594),B=g(72488),$=g(67885),X=g(53563),q=g(87801),Y=g(6134),ae=g(62094),he=g(79232);const ne={icon:C.Z,object:F.Z,line:D.Z,path:B.Z,fill:z.Z,extrude:k.Z,text:q.Z,water:Y.Z},ue=T.Z.ofType({base:X.Z,key:"type",typeMap:ne,errorContext:"symbol-layer"});let te=class extends $.Z{constructor(fe){super(fe),this.styleOrigin=null,this.thumbnail=null,this.type=null;const _e=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers;this._set("symbolLayers",new(_e&&_e.type||T.Z))}get color(){return null}set color(fe){this.constructed&&Z.Z.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(fe){(0,w.Z)(fe,this._get("symbolLayers"))}readStyleOrigin(fe,_e,de){if(fe.styleUrl&&fe.name){const Oe=(0,G.f)(fe.styleUrl,de);return new ae.Z({styleUrl:Oe,name:fe.name})}if(fe.styleName&&fe.name)return new ae.Z({portal:de&&de.portal||Q.Z.getDefault(),styleName:fe.styleName,name:fe.name});de&&de.messages&&de.messages.push(new se.Z("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:de,definition:fe}))}writeStyleOrigin(fe,_e,de,Oe){if(fe.styleUrl&&fe.name){let re=(0,G.t)(fe.styleUrl,Oe);(0,x.YP)(re)&&(re=(0,x.Fv)(re)),_e.styleOrigin={styleUrl:re,name:fe.name}}else fe.styleName&&fe.name&&(fe.portal&&Oe&&Oe.portal&&!(0,x.tm)(fe.portal.restUrl,Oe.portal.restUrl)?Oe&&Oe.messages&&Oe.messages.push(new se.Z("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):_e.styleOrigin={styleName:fe.styleName,name:fe.name})}normalizeCtorArgs(fe){return fe instanceof X.Z||fe&&ne[fe.type]?{symbolLayers:[fe]}:Array.isArray(fe)?{symbolLayers:fe}:fe}};(0,E._)([(0,V.Cb)({json:{read:!1,write:!1}})],te.prototype,"color",null),(0,E._)([(0,V.Cb)({type:ue,nonNullable:!0,json:{write:!0}}),(0,W.p)(w.R)],te.prototype,"symbolLayers",null),(0,E._)([(0,V.Cb)({type:ae.Z})],te.prototype,"styleOrigin",void 0),(0,E._)([(0,U.r)("styleOrigin")],te.prototype,"readStyleOrigin",null),(0,E._)([(0,J.c)("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],te.prototype,"writeStyleOrigin",null),(0,E._)([(0,V.Cb)({type:he.p,json:{read:!1}})],te.prototype,"thumbnail",void 0),(0,E._)([(0,V.Cb)({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],te.prototype,"type",void 0),te=(0,E._)([(0,N.j)("esri.symbols.Symbol3D")],te);const ie=te},53563:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891)),V=g(70425);let W=class extends T.wq{constructor(U){super(U),this.enabled=!0,this.type=null}writeEnabled(U,N,J){U||(N[J]=U)}};(0,E._)([(0,w.Cb)({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],W.prototype,"enabled",void 0),(0,E._)([(0,V.c)("enabled")],W.prototype,"writeEnabled",null),(0,E._)([(0,w.Cb)({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],W.prototype,"type",void 0),W=(0,E._)([(0,se.j)("esri.symbols.Symbol3DLayer")],W);const A=W},52289:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var Q,E=g(18100),T=g(25764),w=g(88684),Z=g(55798),x=g(9497),se=g(36734),V=g(4139),W=g(20891),A=g(70425),U=g(50572),N=g(67885),J=g(6713);let G=Q=class extends N.Z{constructor(...z){super(...z),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new U.Z,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(z,C,D){if(z&&"string"!=typeof z)return z;const F={};return z&&(F.text=z),C&&(F.font=C),D&&(F.color=D),F}writeLineWidth(z,C,D,F){F&&"string"!=typeof F||(C[D]=z)}castLineWidth(z){return(0,Z.t_)(z)}writeLineHeight(z,C,D,F){F&&"string"!=typeof F||(C[D]=z)}clone(){return new Q({angle:this.angle,backgroundColor:(0,w.d9)(this.backgroundColor),borderLineColor:(0,w.d9)(this.borderLineColor),borderLineSize:this.borderLineSize,color:(0,w.d9)(this.color),font:this.font&&this.font.clone(),haloColor:(0,w.d9)(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};(0,E._)([(0,x.Cb)({type:T.Z,json:{write:!0}})],G.prototype,"backgroundColor",void 0),(0,E._)([(0,x.Cb)({type:T.Z,json:{write:!0}})],G.prototype,"borderLineColor",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0},cast:Z.t_})],G.prototype,"borderLineSize",void 0),(0,E._)([(0,x.Cb)({type:U.Z,json:{write:!0}})],G.prototype,"font",void 0),(0,E._)([(0,x.Cb)({...J.x0,json:{write:!0}})],G.prototype,"horizontalAlignment",void 0),(0,E._)([(0,x.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"kerning",void 0),(0,E._)([(0,x.Cb)({type:T.Z,json:{write:!0}})],G.prototype,"haloColor",void 0),(0,E._)([(0,x.Cb)({type:Number,cast:Z.t_,json:{write:!0}})],G.prototype,"haloSize",void 0),(0,E._)([(0,x.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"rightToLeft",void 0),(0,E._)([(0,x.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"rotated",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],G.prototype,"text",void 0),(0,E._)([(0,V.J)({esriTS:"text"},{readOnly:!0})],G.prototype,"type",void 0),(0,E._)([(0,x.Cb)({...J.Nj,json:{write:!0}})],G.prototype,"verticalAlignment",void 0),(0,E._)([(0,x.Cb)({type:Number,cast:Z.t_,json:{write:!0}})],G.prototype,"xoffset",void 0),(0,E._)([(0,x.Cb)({type:Number,cast:Z.t_,json:{write:!0}})],G.prototype,"yoffset",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{read:z=>z&&-1*z,write:(z,C)=>C.angle=z&&-1*z}})],G.prototype,"angle",void 0),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],G.prototype,"width",void 0),(0,E._)([(0,x.Cb)({type:Number})],G.prototype,"lineWidth",void 0),(0,E._)([(0,A.c)("lineWidth")],G.prototype,"writeLineWidth",null),(0,E._)([(0,se.p)("lineWidth")],G.prototype,"castLineWidth",null),(0,E._)([(0,x.Cb)(J.Ck)],G.prototype,"lineHeight",void 0),(0,E._)([(0,A.c)("lineHeight")],G.prototype,"writeLineHeight",null),G=Q=(0,E._)([(0,W.j)("esri.symbols.TextSymbol")],G);const k=G},87801:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Y});var G,E=g(18100),T=g(88684),w=g(53661),Z=g(9497),se=(g(83382),g(4139)),V=g(20891),W=g(70425),A=g(50572),U=g(53563),N=g(1344),J=g(25764),Q=g(44480);let k=G=class extends Q.wq{constructor(){super(...arguments),this.color=new J.Z([0,0,0,1]),this.size=0}clone(){const ae={color:(0,T.d9)(this.color),size:this.size};return new G(ae)}};(0,E._)([(0,Z.Cb)(N.a)],k.prototype,"color",void 0),(0,E._)([(0,Z.Cb)(N.y)],k.prototype,"size",void 0),k=G=(0,E._)([(0,V.j)("esri.symbols.support.Symbol3DHalo")],k);var z=g(15935),C=g(94904);g(19420);let F=class extends((0,C.J)(Q.wq)){constructor(ae){super(ae),this.color=null}};(0,E._)([(0,Z.Cb)(N.a)],F.prototype,"color",void 0),F=(0,E._)([(0,V.j)("esri.symbols.support.Symbol3DTextBackground")],F);var $,B=g(6713);let X=$=class extends U.Z{constructor(ae){super(ae),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(ae){(0,w.pC)(ae)&&(0,w.pC)(this._userSize)&&(ae.size=this._userSize),this._set("font",ae)}writeFont(ae,he,ne,ue){const te={...ue,textSymbol3D:!0};he.font=ae.write({},te),delete he.font.size}get size(){return(0,w.pC)(this._userSize)?this._userSize:(0,w.pC)(this.font)&&null!=this.font.size?this.font.size:9}set size(ae){this._userSize=ae,(0,w.pC)(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const ae=new $({enabled:this.enabled,font:this.font&&(0,T.d9)(this.font),halo:this.halo&&(0,T.d9)(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:(0,w.pC)(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:(0,T.d9)(this.background)});return ae._userSize=this._userSize,ae}static fromTextSymbol(ae){return new $({font:(0,w.pC)(ae.font)?ae.font.clone():new A.Z,halo:q(ae.haloColor,ae.haloSize),horizontalAlignment:ae.horizontalAlignment,lineHeight:ae.lineHeight,material:ae.color?new z.b({color:ae.color.clone()}):null,text:ae.text,verticalAlignment:ae.verticalAlignment,background:ae.backgroundColor?new F({color:ae.backgroundColor.clone()}):null})}};function q(ae,he){return ae&&null!=he&&he>0?new k({color:(0,T.d9)(ae),size:he}):null}(0,E._)([(0,Z.Cb)({type:A.Z,json:{write:!0}})],X.prototype,"font",null),(0,E._)([(0,W.c)("font")],X.prototype,"writeFont",null),(0,E._)([(0,Z.Cb)({type:k,json:{write:!0}})],X.prototype,"halo",void 0),(0,E._)([(0,Z.Cb)({...B.x0,json:{default:"center",write:!0}})],X.prototype,"horizontalAlignment",void 0),(0,E._)([(0,Z.Cb)({...B.Ck,json:{default:1,write:!0}})],X.prototype,"lineHeight",void 0),(0,E._)([(0,Z.Cb)({type:z.b,json:{write:!0}})],X.prototype,"material",void 0),(0,E._)([(0,Z.Cb)({type:F,json:{write:!0}})],X.prototype,"background",void 0),(0,E._)([(0,Z.Cb)(N.y)],X.prototype,"size",null),(0,E._)([(0,Z.Cb)({type:String,json:{write:!0}})],X.prototype,"text",void 0),(0,E._)([(0,se.J)({Text:"text"},{readOnly:!0})],X.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({...B.Nj,json:{default:"baseline",write:!0}})],X.prototype,"verticalAlignment",void 0),X=$=(0,E._)([(0,V.j)("esri.symbols.TextSymbol3DLayer")],X);const Y=X},6134:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>J});var A,E=g(18100),T=g(25764),w=g(88684),Z=g(9497),x=g(83382),se=g(4139),V=g(20891),W=g(53563);let U=A=class extends W.Z{constructor(Q){super(Q),this.color=N.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new A({color:(0,w.d9)(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};(0,E._)([(0,Z.Cb)({type:T.Z,nonNullable:!0,json:{type:[x.z8],write:(Q,G,k)=>G[k]=Q.toArray(T.Z.AlphaMode.UNLESS_OPAQUE),default:()=>N.clone(),defaultEquals:Q=>Q.toCss(!0)===N.toCss(!0)}})],U.prototype,"color",void 0),(0,E._)([(0,se.J)({Water:"water"},{readOnly:!0})],U.prototype,"type",void 0),(0,E._)([(0,Z.Cb)({type:["small","medium","large"],json:{write:!0,default:"medium"}})],U.prototype,"waterbodySize",void 0),(0,E._)([(0,Z.Cb)({type:Number,json:{write:!0,default:null}})],U.prototype,"waveDirection",void 0),(0,E._)([(0,Z.Cb)({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],U.prototype,"waveStrength",void 0),U=A=(0,E._)([(0,V.j)("esri.symbols.WaterSymbol3DLayer")],U);const N=new T.Z([0,119,190]),J=U},13856:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>D});var k,E=g(71670),T=g(18100),w=g(28191),Z=g(53661),x=g(30801),se=g(9497),A=(g(83382),g(19420),g(4139)),U=g(20891),N=g(37753),J=g(29184),Q=g(67885),G=g(79232);let z=k=class extends Q.Z{constructor(F){super(F),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const F=(0,Z.pC)(this.portal)?this.portal:N.Z.getDefault();return`${this.styleName}:${this.styleUrl}:${this.name}:${F.user?F.user.username:null}:${F.url}`}read(F,B){this.portal=B?.portal,super.read(F,B)}clone(){return new k({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(F){return this._fetchSymbol("webRef",F)}fetchCIMSymbol(F){return this._fetchSymbol("cimRef",F)}_fetchSymbol(F,B){var $=this;return(0,E.Z)(function*(){const X=(0,Z.pC)(B)?B.cache:null,q=X?$._fetchCacheKey:null;if((0,Z.pC)(X)){const ne=q&&X.get(q);if(ne)return ne.clone()}const Y=yield function C(){return Promise.resolve().then(g.bind(g,73858))}();(0,x.k_)(B);const ae=Y.resolveWebStyleSymbol($,{portal:$.portal},F,B);ae.catch(ne=>{w.Z.getLogger($.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",ne)});const he=yield ae;return"webRef"===F&&"point-3d"===he.type||"cimRef"===F&&"cim"===he.type?((0,Z.pC)(X)&&X.set(q,he.clone()),he):null})()}};(0,T._)([(0,se.Cb)({json:{write:!1}})],z.prototype,"color",void 0),(0,T._)([(0,se.Cb)({type:String,json:{write:!0}})],z.prototype,"styleName",void 0),(0,T._)([(0,se.Cb)({type:N.Z,json:{write:!1}})],z.prototype,"portal",void 0),(0,T._)([(0,se.Cb)({type:String,json:{read:J.r,write:J.w}})],z.prototype,"styleUrl",void 0),(0,T._)([(0,se.Cb)({type:G.p,json:{read:!1}})],z.prototype,"thumbnail",void 0),(0,T._)([(0,se.Cb)({type:String,json:{write:!0}})],z.prototype,"name",void 0),(0,T._)([(0,A.J)({styleSymbolReference:"web-style"},{readOnly:!0})],z.prototype,"type",void 0),(0,T._)([(0,se.Cb)()],z.prototype,"_fetchCacheKey",null),z=k=(0,T._)([(0,U.j)("esri.symbols.WebStyleSymbol")],z);const D=z},47064:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>W});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let V=class extends T.wq{constructor(A){super(A),this.visible=!0}clone(){}};(0,E._)([(0,w.Cb)({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],V.prototype,"type",void 0),(0,E._)([(0,w.Cb)({readOnly:!0})],V.prototype,"visible",void 0),V=(0,E._)([(0,se.j)("esri.symbols.callouts.Callout3D")],V);const W=V},97854:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var Q,E=g(18100),T=g(25764),w=g(88684),Z=g(53661),x=g(55798),se=g(9497),W=(g(83382),g(4139)),A=g(20891),U=g(47064),N=g(11830),J=g(1344);let G=Q=class extends U.Z{constructor(z){super(z),this.type="line",this.color=new T.Z([0,0,0,1]),this.size=(0,x.Wz)(1),this.border=null}get visible(){return this.size>0&&(0,Z.pC)(this.color)&&this.color.a>0}clone(){return new Q({color:(0,w.d9)(this.color),size:this.size,border:(0,w.d9)(this.border)})}};(0,E._)([(0,W.J)({line:"line"},{readOnly:!0})],G.prototype,"type",void 0),(0,E._)([(0,se.Cb)(J.a)],G.prototype,"color",void 0),(0,E._)([(0,se.Cb)(J.y)],G.prototype,"size",void 0),(0,E._)([(0,se.Cb)({type:N.a,json:{write:!0}})],G.prototype,"border",void 0),(0,E._)([(0,se.Cb)({readOnly:!0})],G.prototype,"visible",null),G=Q=(0,E._)([(0,A.j)("esri.symbols.callouts.LineCallout3D")],G);const k=G},91738:(He,Pe,g)=>{"use strict";g.d(Pe,{Uy:()=>Z,Y2:()=>W,gv:()=>x});var E=g(53661),T=g(47064),w=g(97854);function Z(A){if(!A)return!1;const U=A.verticalOffset;return!!U&&!(U.screenLength<=0||(0,E.pC)(U.maxWorldLength)&&U.maxWorldLength<=0)}function x(A){if(!A||!A.supportsCallout||!A.supportsCallout())return!1;const U=A.callout;return!!U&&!!U.visible&&!!Z(A)}const W={types:{key:"type",base:T.Z,typeMap:{line:w.Z}},json:{write:!0}}},2047:(He,Pe,g)=>{"use strict";function T(de,Oe,re,le){return function E(de){return"function"==typeof de}(de)?de(Oe,re,le):de}function w(de){return[de.r,de.g,de.b,de.a]}g.d(Pe,{$Z:()=>he,BX:()=>Y,Cc:()=>F,E_:()=>V,F:()=>ne,FG:()=>te,H1:()=>se,JW:()=>_e,NA:()=>C,NO:()=>N,On:()=>X,QI:()=>A,Qf:()=>ie,Qs:()=>W,RI:()=>B,TB:()=>fe,TT:()=>U,W7:()=>ae,X_:()=>ue,be:()=>J,cO:()=>D,gJ:()=>z,hf:()=>T,nn:()=>w,pJ:()=>$,wi:()=>q,yL:()=>G,zL:()=>Q});const Z=" /-,\n";function x(de){let Oe=de.length;for(;Oe--;)if(!Z.includes(de.charAt(Oe)))return!1;return!0}function se(de,Oe){const re=[];let le=0,ce=-1;do{if(ce=de.indexOf("[",le),ce>=le){if(ce>le){const ve=de.substr(le,ce-le);re.push([ve,null,x(ve)])}if(le=ce+1,ce=de.indexOf("]",le),ce>=le){if(ce>le){const ve=Oe[de.substr(le,ce-le)];ve&&re.push([null,ve,!1])}le=ce+1}}}while(-1!==ce);if(le<de.length-1){const ve=de.substr(le);re.push([ve,null,x(ve)])}return re}function V(de,Oe,re){let le="",ce=null;for(const ve of Oe){const[Te,ge,Ae]=ve;if(Te)Ae?ce=Te:(ce&&(le+=ce,ce=null),le+=Te);else{const De=de.attributes[ge];De&&(ce&&(le+=ce,ce=null),le+=De)}}return A(le,re)}function W(de,Oe,re){const le=se(Oe,de);return ce=>V(ce,le,re)}function A(de,Oe){switch("string"!=typeof de&&(de=String(de)),Oe){case"LowerCase":return de.toLowerCase();case"Allcaps":return de.toUpperCase();default:return de}}function U(de,Oe,re,le,ce,ve,Te=!0){const ge=Oe/ce,Ae=re/ve,De=Math.ceil(ge/2),Se=Math.ceil(Ae/2);for(let me=0;me<ve;me++)for(let ye=0;ye<ce;ye++){const we=4*(ye+(Te?ve-me-1:me)*ce);let $e=0,Ce=0,Ie=0,je=0,Je=0,oe=0,be=0;const Ue=(me+.5)*Ae;for(let Fe=Math.floor(me*Ae);Fe<(me+1)*Ae;Fe++){const Ke=Math.abs(Ue-(Fe+.5))/Se,Ve=(ye+.5)*ge,tt=Ke*Ke;for(let rt=Math.floor(ye*ge);rt<(ye+1)*ge;rt++){let Ne=Math.abs(Ve-(rt+.5))/De;const qe=Math.sqrt(tt+Ne*Ne);qe>=-1&&qe<=1&&($e=2*qe*qe*qe-3*qe*qe+1,$e>0&&(Ne=4*(rt+Fe*Oe),be+=$e*de[Ne+3],Ie+=$e,de[Ne+3]<255&&($e=$e*de[Ne+3]/250),je+=$e*de[Ne],Je+=$e*de[Ne+1],oe+=$e*de[Ne+2],Ce+=$e))}}le[we]=je/Ce,le[we+1]=Je/Ce,le[we+2]=oe/Ce,le[we+3]=be/Ie}}function N(de){return de?{r:de[0],g:de[1],b:de[2],a:de[3]/255}:{r:0,g:0,b:0,a:0}}function J(de){return de.data?.symbol??null}function Q(de){return"CIMVectorMarker"===de.type||"CIMPictureMarker"===de.type||"CIMBarChartMarker"===de.type||"CIMCharacterMarker"===de.type||"CIMPieChartMarker"===de.type||"CIMStackedBarChartMarker"===de.type}function G(de){return"CIMGradientStroke"===de.type||"CIMPictureStroke"===de.type||"CIMSolidStroke"===de.type}function z(de){return null!=de&&("CIMMarkerPlacementAlongLineRandomSize"===de.type||"CIMMarkerPlacementAlongLineSameSize"===de.type||"CIMMarkerPlacementAlongLineVariableSize"===de.type||"CIMMarkerPlacementAtExtremities"===de.type||"CIMMarkerPlacementAtMeasuredUnits"===de.type||"CIMMarkerPlacementAtRatioPositions"===de.type||"CIMMarkerPlacementOnLine"===de.type||"CIMMarkerPlacementOnVertices"===de.type)}const C=(de,Oe=0)=>null==de||isNaN(de)?Oe:de,D=de=>de.tintColor?N(de.tintColor):{r:255,g:255,b:255,a:1},F=de=>{if(!de)return!1;for(const Oe of de)switch(Oe.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function B(){return Promise.all([g.e(7640),g.e(8592),g.e(7409)]).then(g.bind(g,15390))}function $(de){if(!de)return"normal";switch(de.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function X(de){if(!de)return"normal";switch(de.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function q(de){let Oe="",re="";if(de){const le=de.toLowerCase();le.includes("italic")?Oe="italic":le.includes("oblique")&&(Oe="oblique"),le.includes("bold")?re="bold":le.includes("light")&&(re="lighter")}return{style:Oe,weight:re}}function Y(de){return de.underline?"underline":de.strikethrough?"line-through":"none"}function ae(de){if(!de)return null;switch(de.type){case"CIMPolygonSymbol":if(de.symbolLayers)for(const Oe of de.symbolLayers){const re=ae(Oe);if(null!=re)return re}break;case"CIMTextSymbol":return ae(de.symbol);case"CIMSolidFill":return de.color}}function he(de){if(de)switch(de.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const Oe=de.symbolLayers;if(Oe)for(const re of Oe){const le=he(re);if(null!=le)return le}break}case"CIMTextSymbol":return he(de.symbol);case"CIMSolidStroke":case"CIMSolidFill":return de.color}}function ne(de){if(de)switch(de.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(de.symbolLayers)for(const Oe of de.symbolLayers){const re=ne(Oe);if(void 0!==re)return re}break;case"CIMTextSymbol":return ne(de.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return de.width}}function ue(de){switch(de){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function te(de){switch(de){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function ie(de){return(de?Object.keys(de):[]).map(Oe=>({name:Oe,alias:Oe,type:"string"==typeof de[Oe]?"esriFieldTypeString":"esriFieldTypeDouble"}))}const fe=de=>de.includes("data:image/svg+xml");function _e(de){if(!de)return null;switch(de.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}},62259:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>q});var E=g(18100),T=g(25764),w=g(44480),Z=g(88684),x=g(55798),se=g(9497),W=(g(83382),g(20891)),A=g(1344);let U=class extends w.wq{constructor(Y){super(Y),this.color=new T.Z([0,0,0,1]),this.extensionLength=0,this.size=(0,x.Wz)(1)}clone(){}cloneProperties(){return{color:(0,Z.d9)(this.color),size:this.size,extensionLength:this.extensionLength}}};(0,E._)([(0,se.Cb)({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],U.prototype,"type",void 0),(0,E._)([(0,se.Cb)(A.a)],U.prototype,"color",void 0),(0,E._)([(0,se.Cb)({...A.y,json:{write:{overridePolicy:Y=>({enabled:!!Y})}}})],U.prototype,"extensionLength",void 0),(0,E._)([(0,se.Cb)(A.y)],U.prototype,"size",void 0),U=(0,E._)([(0,W.j)("esri.symbols.edges.Edges3D")],U);const N=U;g(28191),g(19420),g(32995),g(67087);var C,z=g(4139);let D=C=class extends N{constructor(Y){super(Y),this.type="sketch"}clone(){return new C(this.cloneProperties())}};(0,E._)([(0,z.J)({sketch:"sketch"},{readOnly:!0})],D.prototype,"type",void 0),D=C=(0,E._)([(0,W.j)("esri.symbols.edges.SketchEdges3D")],D);const F=D;var B;let $=B=class extends N{constructor(Y){super(Y),this.type="solid"}clone(){return new B(this.cloneProperties())}};(0,E._)([(0,z.J)({solid:"solid"},{readOnly:!0})],$.prototype,"type",void 0),$=B=(0,E._)([(0,W.j)("esri.symbols.support.SolidEdges3D")],$);const q={types:{key:"type",base:N,typeMap:{solid:$,sketch:F}},json:{write:!0}}},70294:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>W});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let V=class extends T.wq{constructor(A){super(A)}clone(){}};(0,E._)([(0,w.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],V.prototype,"type",void 0),V=(0,E._)([(0,se.j)("esri.symbols.patterns.LinePattern3D")],V);const W=V},34252:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var U,E=g(18100),T=g(63321),w=g(9497),se=(g(83382),g(19420),g(4139)),V=g(20891),W=g(70294);const N=(0,T.w)()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let J=U=class extends W.Z{constructor(G){super(G),this.type="style",this.style="solid"}clone(){return new U({style:this.style})}};(0,E._)([(0,w.Cb)({type:["style"]})],J.prototype,"type",void 0),(0,E._)([(0,se.J)(N),(0,w.Cb)({type:["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"]})],J.prototype,"style",void 0),J=U=(0,E._)([(0,V.j)("esri.symbols.patterns.LineStylePattern3D")],J);const Q=J},55805:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>W});var E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891));let V=class extends T.wq{constructor(A){super(A)}clone(){}};(0,E._)([(0,w.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],V.prototype,"type",void 0),V=(0,E._)([(0,se.j)("esri.symbols.patterns.Pattern3D")],V);const W=V},44385:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(9497),x=(g(83382),g(19420),g(20891)),se=g(55805);let A=W=class extends se.Z{constructor(N){super(N),this.type="style",this.style="solid"}clone(){return new W({style:this.style})}};(0,E._)([(0,T.Cb)({type:["style"]})],A.prototype,"type",void 0),(0,E._)([(0,T.Cb)({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],A.prototype,"style",void 0),A=W=(0,E._)([(0,x.j)("esri.symbols.patterns.StylePattern3D")],A);const U=A},73310:(He,Pe,g)=>{"use strict";g.d(Pe,{D:()=>se,q:()=>x});var E=g(70294),T=g(34252),w=g(55805),Z=g(44385);const x={types:{key:"type",base:w.Z,typeMap:{style:Z.Z}},json:{write:!0}},se={types:{key:"type",base:E.Z,typeMap:{style:T.Z}},json:{write:!0}}},13691:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>$});var Q,E=g(18100),T=g(63321),w=g(44480),Z=g(53661),x=g(9497),W=(g(83382),g(19420),g(66508)),A=g(20891),U=g(70425),N=g(71670),J=g(21230);let G=Q=class extends w.wq{constructor(X){super(X)}collectRequiredFields(X,q){var Y=this;return(0,N.Z)(function*(){return(0,J.io)(X,q,Y.expression)})()}clone(){return new Q({expression:this.expression,title:this.title})}equals(X){return this.expression===X.expression&&this.title===X.title}};(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],G.prototype,"expression",void 0),(0,E._)([(0,x.Cb)({type:String,json:{write:!0}})],G.prototype,"title",void 0),G=Q=(0,E._)([(0,A.j)("esri.layers.support.FeatureExpressionInfo")],G);const k=G;var C,z=g(55821);const D=(0,T.w)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),F=new T.X({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let B=C=class extends w.wq{constructor(X){super(X),this.offset=null}readFeatureExpressionInfo(X,q){return X??(q.featureExpression&&0===q.featureExpression.value?{expression:"0"}:void 0)}writeFeatureExpressionInfo(X,q,Y,ae){q[Y]=X.write({},ae),"0"===X.expression&&(q.featureExpression={value:0})}get mode(){const{offset:X,featureExpressionInfo:q}=this;return this._isOverridden("mode")?this._get("mode"):(0,Z.pC)(X)||q?"relative-to-ground":"on-the-ground"}set mode(X){this._override("mode",X)}set unit(X){this._set("unit",X)}write(X,q){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(X,q):null}clone(){return new C({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(X){return this.mode===X.mode&&this.offset===X.offset&&this.unit===X.unit&&(0,Z._W)(this.featureExpressionInfo,X.featureExpressionInfo)}};(0,E._)([(0,x.Cb)({type:k,json:{write:!0}})],B.prototype,"featureExpressionInfo",void 0),(0,E._)([(0,W.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],B.prototype,"readFeatureExpressionInfo",null),(0,E._)([(0,U.c)("featureExpressionInfo",{featureExpressionInfo:{type:k},"featureExpression.value":{type:[0]}})],B.prototype,"writeFeatureExpressionInfo",null),(0,E._)([(0,x.Cb)({type:D.apiValues,nonNullable:!0,json:{type:D.jsonValues,read:D.read,write:{writer:D.write,isRequired:!0}}})],B.prototype,"mode",null),(0,E._)([(0,x.Cb)({type:Number,json:{write:!0}})],B.prototype,"offset",void 0),(0,E._)([(0,x.Cb)({type:z.f9,json:{type:String,read:F.read,write:F.write}})],B.prototype,"unit",null),B=C=(0,E._)([(0,A.j)("esri.layers.support.ElevationInfo")],B);const $=B},55315:(He,Pe,g)=>{"use strict";g.d(Pe,{S:()=>z,b:()=>k});var Q,E=g(18100),T=g(63321),w=g(44480),Z=g(55050),x=g(9497),W=(g(83382),g(19420),g(4139)),A=g(66508),U=g(20891),N=g(70425),J=g(29184);const G=(0,T.w)()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let k=Q=class extends w.wq{constructor(C){super(C)}readHref(C,D,F){return C?(0,J.f)(C,F):D.dataURI}writeHref(C,D,F,B){C&&((0,Z.HK)(C)?D.dataURI=C:(D.href=(0,J.t)(C,B),(0,Z.YP)(D.href)&&(D.href=(0,Z.Fv)(D.href))))}clone(){return new Q({href:this.href,primitive:this.primitive})}};(0,E._)([(0,x.Cb)({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],k.prototype,"href",void 0),(0,E._)([(0,A.r)("href")],k.prototype,"readHref",null),(0,E._)([(0,N.c)("href",{href:{type:String},dataURI:{type:String}})],k.prototype,"writeHref",null),(0,E._)([(0,W.J)(G)],k.prototype,"primitive",void 0),k=Q=(0,E._)([(0,U.j)("esri.symbols.support.IconSymbol3DLayerResource")],k);const z="circle"},82751:(He,Pe,g)=>{"use strict";g.d(Pe,{S:()=>Q,k:()=>J});var U,E=g(18100),T=g(63321),w=g(44480),Z=g(9497),V=(g(83382),g(19420),g(4139)),W=g(20891),A=g(29184);const N=(0,T.w)()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let J=U=class extends w.wq{clone(){return new U({href:this.href,primitive:this.primitive})}};(0,E._)([(0,Z.Cb)({type:String,json:{read:A.r,write:A.w}})],J.prototype,"href",void 0),(0,E._)([(0,V.J)(N)],J.prototype,"primitive",void 0),J=U=(0,E._)([(0,W.j)("esri.symbols.support.ObjectSymbol3DLayerResource")],J);const Q="sphere"},62094:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(6365),w=g(9497),se=(g(83382),g(19420),g(20891)),V=g(37753);let A=W=class extends T.Z{constructor(N){super(N),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new W({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};(0,E._)([(0,w.Cb)({type:String})],A.prototype,"name",void 0),(0,E._)([(0,w.Cb)({type:String})],A.prototype,"styleUrl",void 0),(0,E._)([(0,w.Cb)({type:String})],A.prototype,"styleName",void 0),(0,E._)([(0,w.Cb)({type:V.Z})],A.prototype,"portal",void 0),A=W=(0,E._)([(0,se.j)("esri.symbols.support.StyleOrigin")],A);const U=A},87804:(He,Pe,g)=>{"use strict";g.d(Pe,{e:()=>W});var V,E=g(18100),T=g(6365),w=g(9497),se=(g(83382),g(19420),g(20891));let W=V=class extends T.Z{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new V({x:this.x,y:this.y})}};(0,E._)([(0,w.Cb)({type:Number})],W.prototype,"x",void 0),(0,E._)([(0,w.Cb)({type:Number})],W.prototype,"y",void 0),W=V=(0,E._)([(0,se.j)("esri.symbols.support.Symbol3DAnchorPosition2D")],W)},15935:(He,Pe,g)=>{"use strict";g.d(Pe,{b:()=>U});var A,E=g(18100),T=g(44480),w=g(53661),Z=g(9497),V=(g(83382),g(19420),g(20891)),W=g(1344);let U=A=class extends T.wq{constructor(N){super(N),this.color=null}clone(){const N={color:(0,w.pC)(this.color)?this.color.clone():null};return new A(N)}};(0,E._)([(0,Z.Cb)(W.a)],U.prototype,"color",void 0),U=A=(0,E._)([(0,V.j)("esri.symbols.support.Symbol3DMaterial")],U)},5265:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U});var W,E=g(18100),T=g(44480),w=g(9497),se=(g(83382),g(19420),g(20891)),V=g(1344);let A=W=class extends T.wq{constructor(N){super(N),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new W({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};(0,E._)([(0,w.Cb)(V.y)],A.prototype,"screenLength",void 0),(0,E._)([(0,w.Cb)({type:Number,nonNullable:!0,json:{write:!0,default:0}})],A.prototype,"minWorldLength",void 0),(0,E._)([(0,w.Cb)({type:Number,json:{write:!0}})],A.prototype,"maxWorldLength",void 0),A=W=(0,E._)([(0,se.j)("esri.symbols.support.Symbol3DVerticalOffset")],A);const U=A},79232:(He,Pe,g)=>{"use strict";g.d(Pe,{p:()=>W});var V,E=g(18100),T=g(6365),w=g(9497),se=(g(83382),g(19420),g(20891));let W=V=class extends T.Z{constructor(){super(...arguments),this.url=""}clone(){return new V({url:this.url})}};(0,E._)([(0,w.Cb)({type:String})],W.prototype,"url",void 0),W=V=(0,E._)([(0,se.j)("esri.symbols.support.Thumbnail")],W)},23638:(He,Pe,g)=>{"use strict";g.d(Pe,{FW:()=>V,iW:()=>U});var E=g(25764),T=g(2047);function se(D,F,B,$){if(D)if("CIMTextSymbol"!==D.type){if(B&&D.effects)for(const X of D.effects)A(X,F);if(D.symbolLayers)for(const X of D.symbolLayers)switch(X.type){case"CIMPictureMarker":case"CIMVectorMarker":V(X,F,$);break;case"CIMPictureStroke":case"CIMSolidStroke":!$?.preserveOutlineWidth&&X.width&&(X.width*=F);break;case"CIMPictureFill":X.height&&(X.height*=F),X.offsetX&&(X.offsetX*=F),X.offsetY&&(X.offsetY*=F);break;case"CIMHatchFill":se(X.lineSymbol,F,!0,{...$,preserveOutlineWidth:!1}),X.offsetX&&(X.offsetX*=F),X.offsetY&&(X.offsetY*=F),X.separation&&(X.separation*=F)}}else null!=D.height&&(D.height*=F)}function V(D,F,B){if(D&&(D.markerPlacement&&function W(D,F){switch((0,T.gJ)(D)&&D.offset&&(D.offset*=F),D.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(D.customEndingOffset&&(D.customEndingOffset*=F),D.offsetAlongLine&&(D.offsetAlongLine*=F),D.placementTemplate&&D.placementTemplate.length){const B=D.placementTemplate.map($=>$*F);D.placementTemplate=B}break;case"CIMMarkerPlacementAlongLineVariableSize":if(D.maxRandomOffset&&(D.maxRandomOffset*=F),D.placementTemplate&&D.placementTemplate.length){const B=D.placementTemplate.map($=>$*F);D.placementTemplate=B}break;case"CIMMarkerPlacementOnLine":D.startPointOffset&&(D.startPointOffset*=F);break;case"CIMMarkerPlacementAtExtremities":D.offsetAlongLine&&(D.offsetAlongLine*=F);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":D.beginPosition&&(D.beginPosition*=F),D.endPosition&&(D.endPosition*=F);break;case"CIMMarkerPlacementPolygonCenter":D.offsetX&&(D.offsetX*=F),D.offsetY&&(D.offsetY*=F);break;case"CIMMarkerPlacementInsidePolygon":D.offsetX&&(D.offsetX*=F),D.offsetY&&(D.offsetY*=F),D.stepX&&(D.stepX*=F),D.stepY&&(D.stepY*=F)}}(D.markerPlacement,F),D.offsetX&&(D.offsetX*=F),D.offsetY&&(D.offsetY*=F),D.anchorPoint&&"Absolute"===D.anchorPointUnits&&(D.anchorPoint={x:D.anchorPoint.x*F,y:D.anchorPoint.y*F}),D.size=null!=D.size?D.size*F:0,"CIMVectorMarker"===D.type&&D.markerGraphics))for(const $ of D.markerGraphics)D.scaleSymbolsProportionally||se($.symbol,F,!0,B)}function A(D,F){switch(D.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":D.width&&(D.width*=F);break;case"CIMGeometricEffectBuffer":D.size&&(D.size*=F);break;case"CIMGeometricEffectCut":D.beginCut&&(D.beginCut*=F),D.endCut&&(D.endCut*=F),D.middleCut&&(D.middleCut*=F);break;case"CIMGeometricEffectDashes":if(D.customEndingOffset&&(D.customEndingOffset*=F),D.offsetAlongLine&&(D.offsetAlongLine*=F),D.dashTemplate&&D.dashTemplate.length){const B=D.dashTemplate.map($=>$*F);D.dashTemplate=B}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":D.length&&(D.length*=F);break;case"CIMGeometricEffectMove":D.offsetX&&(D.offsetX*=F),D.offsetY&&(D.offsetY*=F);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":D.offset&&(D.offset*=F);break;case"CIMGeometricEffectRegularPolygon":D.radius&&(D.radius*=F);break;case"CIMGeometricEffectTaperedPolygon":D.fromWidth&&(D.fromWidth*=F),D.length&&(D.length*=F),D.toWidth&&(D.toWidth*=F);break;case"CIMGeometricEffectWave":D.amplitude&&(D.amplitude*=F),D.period&&(D.period*=F)}}function U(D){const F=[];return N((0,T.be)(D),F),F.length?new E.Z((0,T.NO)(F[0])):null}function N(D,F){if(!D)return;let B;B="CIMTextSymbol"===D.type?D.symbol:D;const $="CIMPolygonSymbol"===D.type;if(B?.symbolLayers)for(const X of B.symbolLayers)if(!(X.colorLocked||$&&((0,T.yL)(X)||(0,T.zL)(X)&&X.markerPlacement&&(0,T.gJ)(X.markerPlacement))))switch(X.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":X.tintColor&&J(F,X.tintColor);break;case"CIMVectorMarker":X.markerGraphics?.forEach(q=>{N(q.symbol,F)});break;case"CIMSolidStroke":case"CIMSolidFill":J(F,X.color);break;case"CIMHatchFill":N(X.lineSymbol,F)}}function J(D,F){for(const B of D)if(B.join(".")===F.join("."))return;D.push(F)}},1902:(He,Pe,g)=>{"use strict";g.d(Pe,{ix:()=>T,l9:()=>Z,rx:()=>x});var E=g(25764);const T=new E.Z("white"),Z=(new E.Z("black"),new E.Z([255,255,255,0]));function x(se){return 0===se.r&&0===se.g&&0===se.b}},32682:(He,Pe,g)=>{"use strict";g.d(Pe,{CJ:()=>W,G:()=>J,Rz:()=>U,kD:()=>G,mW:()=>Q,xA:()=>V,z3:()=>A}),g(67087);var T=g(54084),w=g(21225),Z=g(84738),x=g(52289),se=g(66071);const V=Z.Z.fromJSON(se.I4),W=w.Z.fromJSON(se.ET),A=T.Z.fromJSON(se.lF),U=x.Z.fromJSON(se.qP),J=Z.Z.fromJSON(se.eG),Q=w.Z.fromJSON(se.wW),G=T.Z.fromJSON(se.lj)},66071:(He,Pe,g)=>{"use strict";g.d(Pe,{ET:()=>Z,I4:()=>w,eG:()=>V,lF:()=>x,lj:()=>A,qP:()=>se,wW:()=>W});const E=[252,146,31,255],w={type:"esriSMS",style:"esriSMSCircle",size:6,color:E,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Z={type:"esriSLS",style:"esriSLSSolid",width:.75,color:E},x={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},se={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},V={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},W={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},A={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},64702:(He,Pe,g)=>{"use strict";g.d(Pe,{Ne:()=>D,Od:()=>k,Sp:()=>C,_M:()=>G,mx:()=>z});var E=g(74792),T=g(25764),w=g(1897),Z=g(29583),x=g(55798),se=g(23638);const V="picture-fill",W="simple-fill",A="simple-line",U="simple-marker",N="text",J="cim",Q=new Z.Z(1e3);function G(F){const B=F.style;let $=null;if(F)switch(F.type){case U:"cross"!==B&&"x"!==B&&($=F.color);break;case W:"solid"===B?$=F.color:"none"!==B&&($={type:"pattern",x:0,y:0,src:(0,E.V)(`esri/symbols/patterns/${B}.png`),width:5,height:5});break;case V:$={type:"pattern",src:F.url,width:(0,x.F2)(F.width)*F.xscale,height:(0,x.F2)(F.height)*F.yscale,x:(0,x.F2)(F.xoffset),y:(0,x.F2)(F.yoffset)};break;case N:$=F.color;break;case J:$=(0,se.iW)(F)}return $}function k(F,B){const $=F+"-"+B;return void 0!==Q.get($)?Promise.resolve(Q.get($)):(0,w.default)(F,{responseType:"image"}).then(X=>{const q=X.data,Y=q.naturalWidth,ae=q.naturalHeight,he=document.createElement("canvas");he.width=Y,he.height=ae;const ne=he.getContext("2d");ne.fillStyle=B,ne.fillRect(0,0,Y,ae),ne.globalCompositeOperation="destination-in",ne.drawImage(q,0,0);const ue=he.toDataURL();return Q.put($,ue),ue})}function z(F){if(!F)return null;let B=null;switch(F.type){case W:case V:case U:B=z(F.outline);break;case A:{const $=(0,x.F2)(F.width);null!=F.style&&"none"!==F.style&&0!==$&&(B={color:F.color,style:C(F.style),width:$,cap:F.cap,join:"miter"===F.join?(0,x.F2)(F.miterLimit):F.join});break}default:B=null}return B}const C=(()=>{const F={};return B=>{if(F[B])return F[B];const $=B.replace(/-/g,"");return F[B]=$,$}})(),D=new T.Z([128,128,128])},55018:(He,Pe,g)=>{"use strict";g.d(Pe,{im:()=>q,cW:()=>F,vX:()=>B});var E=g(97708),T=g(32995),w=g(53661),Z=g(63719),x=g(42040),se=g(13856),V=g(58913),W=g(21225),A=g(79811),U=g(84738),N=g(79409),J=g(54084),Q=g(77951),G=g(47900),k=g(52289),z=g(23246);const C={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function F(Y,ae,he,ne){const ue=X(Y,{},{context:ne,isLabelSymbol:!1});(0,w.pC)(ue)&&(ae[he]=ue)}function B(Y,ae,he,ne){const ue=X(Y,{},{context:ne,isLabelSymbol:!0});(0,w.pC)(ue)&&(ae[he]=ue)}function $(Y){return Y instanceof x.Z||Y instanceof se.Z}function X(Y,ae,he){if((0,w.Wi)(Y))return null;const{context:ne,isLabelSymbol:ue}=he,te=ne?.origin,ie=ne?.messages;if("web-scene"===te&&!$(Y)){const fe=function D(Y,ae=C){if(!Y)return{symbol:null};const{retainId:he=C.retainId,ignoreDrivers:ne=C.ignoreDrivers,hasLabelingContext:ue=C.hasLabelingContext,retainCIM:te=C.retainCIM}=ae;let ie=null;if((0,E.dU)(Y)||Y instanceof se.Z)ie=Y.clone();else if("cim"===Y.type){const fe=Y.data?.symbol?.type;if("CIMPointSymbol"!==fe)return{error:new T.Z("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${fe||"unknown"}' is unsupported in 3D`,{symbol:Y})};ie=te?Y.clone():V.Z.fromCIMSymbol(Y)}else if(Y instanceof W.Z)ie=A.Z.fromSimpleLineSymbol(Y);else if(Y instanceof U.Z)ie=V.Z.fromSimpleMarkerSymbol(Y);else if(Y instanceof N.Z)ie=V.Z.fromPictureMarkerSymbol(Y);else if(Y instanceof J.Z)ie=ae.geometryType&&"mesh"===ae.geometryType?Q.Z.fromSimpleFillSymbol(Y):G.Z.fromSimpleFillSymbol(Y);else{if(!(Y instanceof k.Z))return{error:new T.Z("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${Y.type||Y.declaredClass}' is unsupported in 3D`,{symbol:Y})};ie=ue?z.Z.fromTextSymbol(Y):V.Z.fromTextSymbol(Y)}if(he&&ie&&"cim"!==ie.type&&(ie.id=Y.id),ne&&(0,E.dU)(ie))for(let fe=0;fe<ie.symbolLayers.length;++fe)ie.symbolLayers.getItemAt(fe)._ignoreDrivers=!0;return{symbol:ie}}(Y,{retainCIM:!0,hasLabelingContext:ue});return(0,w.pC)(fe.symbol)?fe.symbol.write(ae,ne):(ie?.push(new T.Z("symbol:unsupported",`Symbols of type '${Y.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:Y,context:ne,error:fe.error})),null)}return("web-map"===te||"portal-item"===te&&!(0,Z.A2)(ne?.layer))&&$(Y)?(ie?.push(new T.Z("symbol:unsupported",`Symbols of type '${Y.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:Y,context:ne})),null):Y.write(ae,ne)}function q(Y,ae){return(0,E.S9)(Y,null,ae)}},7155:(He,Pe,g)=>{"use strict";g.d(Pe,{J:()=>E,k:()=>T});const E=["begin","end","begin-end"],T=["arrow","circle","square","diamond","cross","x"]},1344:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>V,y:()=>W});var E=g(25764),T=g(55798),w=g(83382),Z=g(7721);const V={type:E.Z,json:{type:[w.z8],default:null,read:{source:["color","transparency"],reader:function x(A,U){const N=null!=U.transparency?(0,Z.b)(U.transparency):1,J=U.color;return J&&Array.isArray(J)?new E.Z([J[0]||0,J[1]||0,J[2]||0,N]):null}},write:{target:{color:{type:[w.z8]},transparency:{type:w.z8}},writer:function se(A,U){U.color=A.toJSON().slice(0,3);const N=(0,Z.a)(A.a);0!==N&&(U.transparency=N)}}}},W={type:Number,cast:T.t_,json:{write:!0}}},32502:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{getPatternDescriptor:()=>ne,getSizeFromOptions:()=>re,getSymbolLayerFill:()=>he,previewSymbol3D:()=>Ae});var E=g(71670),T=g(74792),w=g(44660),x=(g(67087),g(32995)),se=g(28191),V=g(53661),W=g(30801),A=g(55798),U=g(64702),N=g(55315),J=g(82751),Q=g(10532),G=g(31319),k=g(80065),z=g(73858);const C=Q.b_.size,D=Q.b_.maxSize,F=Q.b_.maxOutlineSize,B=Q.b_.lineWidth,$=Q.b_.tallSymbolWidth;function X(De){const Se=De.outline,me=(0,V.pC)(De.material)?De.material.color:null,ye=(0,V.pC)(me)?me.toHex():null;if((0,V.Wi)(Se)||"pattern"in Se&&(0,V.pC)(Se.pattern)&&"style"===Se.pattern.type&&"none"===Se.pattern.style)return"fill"===De.type&&"#ffffff"===ye?{color:"#bdc3c7",width:.75}:null;const we=(0,A.F2)(Se.size)||0;return{color:"rgba("+((0,V.pC)(Se.color)?Se.color.toRgba():"255,255,255,1")+")",width:Math.min(we,F),style:"pattern"in Se&&(0,V.pC)(Se.pattern)&&"style"===Se.pattern.type?(0,U.Sp)(Se.pattern.style):null,join:"butt",cap:"patternCap"in Se?Se.patternCap:"butt"}}function Y(De,Se=1){const me=De.a,ye=(0,w._Y)(De),we=ye.h,$e=ye.s/Se,Ce=100-(100-ye.v)/Se,{r:Ie,g:je,b:Je}=(0,w.xr)({h:we,s:$e,v:Ce});return[Ie,je,Je,me]}function ae(De){return"water"===De.type?(0,V.Wi)(De.color)?null:De.color:(0,V.Wi)(De.material)||(0,V.Wi)(De.material.color)?null:De.material.color}function he(De,Se=0){const me=ae(De);if(!me){if("fill"===De.type)return null;const $e=(0,Q.uH)(U.Ne.r,Se);return[$e,$e,$e,100]}const ye=me.toRgba();for(let we=0;we<3;we++)ye[we]=(0,Q.uH)(ye[we],Se);return ye}function ne(De,Se){return ue.apply(this,arguments)}function ue(){return(ue=(0,E.Z)(function*(De,Se){const me=De.style;return"none"===me?null:{type:"pattern",x:0,y:0,src:yield(0,U.Od)((0,T.V)(`esri/symbols/patterns/${me}.png`),Se.toCss(!0)),width:5,height:5}})).apply(this,arguments)}function te(De){return De.outline?X(De):{color:"rgba(0, 0, 0, 1)",width:1.5}}function ie(De,Se){const me=ae(De);if(!me)return null;let ye="rgba(";return ye+=(0,Q.uH)(me.r,Se)+",",ye+=(0,Q.uH)(me.g,Se)+",",ye+=(0,Q.uH)(me.b,Se)+",",ye+me.a+");"}function fe(De,Se){const me=ie(De,Se);return me?"pattern"in De&&(0,V.pC)(De.pattern)&&"style"===De.pattern.type&&"none"===De.pattern.style?null:{color:me,width:Math.min(De.size?(0,A.F2)(De.size):.75,F),style:"pattern"in De&&(0,V.pC)(De.pattern)&&"style"===De.pattern.type?(0,U.Sp)(De.pattern.style):null,cap:"cap"in De?De.cap:null,join:"join"in De?"miter"===De.join?(0,A.F2)(2):De.join:null}:{}}function _e(De,Se,me){const ye=null!=me?.75*me:0;return{type:"linear",x1:ye?.25*ye:0,y1:ye?.5*ye:0,x2:ye||4,y2:ye?.5*ye:4,colors:[{color:De,offset:0},{color:Se,offset:1}]}}function re(De){const Se="number"==typeof De?.size?De?.size:null;return Se?(0,A.F2)(Se):null}function ge(){return(ge=(0,E.Z)(function*(De,Se){const me="mesh-3d"===De.type,ye=De.symbolLayers,we=re(Se),$e=Se&&Se.maxSize?(0,A.F2)(Se.maxSize):null,Ce=we||C,Ie=[];let je=0,Je=0,oe=!1;for(let be=0;be<ye.length;be++){const Ue=ye.getItemAt(be),Fe=[];if(me&&"fill"!==Ue.type)continue;const Ke=Q.JZ.fill[0];switch(Ue.type){case"fill":{const Ve=X(Ue),tt=Math.min(Ce,$e||D);je=Math.max(je,tt),Je=Math.max(Je,tt),oe=!0;let rt=he(Ue,0);const Ne="pattern"in Ue?Ue.pattern:null,qe=ae(Ue);!me&&(0,V.pC)(Ne)&&"style"===Ne.type&&"solid"!==Ne.style&&qe&&(rt=yield ne(Ne,qe)),Fe.push({shape:Ke,fill:rt,stroke:Ve});break}case"line":{const Ve=fe(Ue,0);if((0,V.Wi)(Ve))break;const tt={stroke:Ve,shape:Ke};je=Math.max(je,C),Je=Math.max(Je,C),Fe.push(tt);break}case"extrude":{const Ve={join:"round",width:1,...fe(Ue,-.4)},tt=he(Ue,0),rt=he(Ue,-.2),Ne=Math.min(Ce,$e||D),qe=(0,Q.EV)(Ne);Ve.width=1,Fe.push({shape:qe[0],fill:rt,stroke:Ve}),Fe.push({shape:qe[1],fill:rt,stroke:Ve}),Fe.push({shape:qe[2],fill:tt,stroke:Ve});const Xe=.7*C+.5*Ne;je=Math.max(je,C),Je=Math.max(Je,Xe);break}case"water":{const Ve=(0,V.s3)(ae(Ue)),tt=Y(Ve),rt=Y(Ve,2),Ne=Y(Ve,3),qe=(0,Q.ht)();oe=!0,Fe.push({shape:qe[0],fill:tt}),Fe.push({shape:qe[1],fill:rt}),Fe.push({shape:qe[2],fill:Ne});const ft=Math.min(Ce,$e||D);je=Math.max(je,ft),Je=Math.max(Je,ft);break}}Ie.push(Fe)}return(0,G.wh)(Ie,[je,Je],{node:Se&&Se.node,scale:oe,opacity:Se&&Se.opacity})})).apply(this,arguments)}function Ae(De,Se){if(0===De.symbolLayers.length)return Promise.reject(new x.Z("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(De.type){case"point-3d":return function ce(De,Se){const me=re(Se),ye=Se?.maxSize?(0,A.F2)(Se.maxSize):null,we=Se?.disableUpsampling??!1,$e=De.symbolLayers,Ce=[];let Ie=0,je=0;const Je=$e.getItemAt($e.length-1);let oe;return Je&&"icon"===Je.type&&(oe=Je.size&&(0,A.F2)(Je.size)),$e.forEach(be=>{if("icon"!==be.type&&"object"!==be.type)return;const Ue="icon"===be.type?be.size&&(0,A.F2)(be.size):0,Fe=me||Ue?Math.ceil(Math.min(me||Ue,ye||D)):C;if(be&&be.resource&&be.resource.href){const Ke=function q(De,Se){const me=Se&&Se.resource,ye=me&&me.href;if(De.thumbnail&&De.thumbnail.url)return Promise.resolve(De.thumbnail.url);if(ye&&"object"!==Se.type)return Promise.resolve((0,k.nf)(Se));const we=(0,T.V)("esri/images/Legend/legend3dsymboldefault.png");return De.styleOrigin&&(De.styleOrigin.styleName||De.styleOrigin.styleUrl)?(0,z.resolveWebStyleSymbol)(De.styleOrigin,{portal:De.styleOrigin.portal},"webRef").catch($e=>$e).then($e=>$e?.thumbnail?.url||we):Promise.resolve(we)}(De,be).then(Ve=>{const tt=be.get("material.color"),rt=function le(De){return"icon"===De.type?"multiply":"tint"}(be);return(0,G.rG)(Ve,Fe,tt,rt,we)}).then(Ve=>{const tt=Ve.width,rt=Ve.height;return Ie=Math.max(Ie,tt),je=Math.max(je,rt),[{shape:{type:"image",x:0,y:0,width:tt,height:rt,src:Ve.url},fill:null,stroke:null}]});Ce.push(Ke)}else{let Ke=Fe;"icon"===be.type&&oe&&me&&(Ke=Fe*(Ue/oe));const Ve="tall"===Se?.symbolConfig||Se?.symbolConfig?.isTall||"object"===be.type&&function de(De){const Se=De.depth,me=De.height,ye=De.width;return 0!==ye&&0!==Se&&0!==me&&ye===Se&&null!=ye&&null!=me&&ye<me}(be);Ie=Math.max(Ie,Ve?$:Ke),je=Math.max(je,Ke),Ce.push(Promise.resolve(function Oe(De,Se,me){const ye=[];if(!De)return ye;switch(De.type){case"icon":{const Ce=Se,Ie=Se;switch(De.resource&&De.resource.primitive||N.S){case"circle":ye.push({shape:{type:"circle",cx:0,cy:0,r:.5*Se},fill:he(De,0),stroke:X(De)});break;case"square":ye.push({shape:{type:"path",path:[{command:"M",values:[0,Ie]},{command:"L",values:[0,0]},{command:"L",values:[Ce,0]},{command:"L",values:[Ce,Ie]},{command:"Z",values:[]}]},fill:he(De,0),stroke:X(De)});break;case"triangle":ye.push({shape:{type:"path",path:[{command:"M",values:[0,Ie]},{command:"L",values:[.5*Ce,0]},{command:"L",values:[Ce,Ie]},{command:"Z",values:[]}]},fill:he(De,0),stroke:X(De)});break;case"cross":ye.push({shape:{type:"path",path:[{command:"M",values:[.5*Ce,0]},{command:"L",values:[.5*Ce,Ie]},{command:"M",values:[0,.5*Ie]},{command:"L",values:[Ce,.5*Ie]}]},stroke:te(De)});break;case"x":ye.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[Ce,Ie]},{command:"M",values:[Ce,0]},{command:"L",values:[0,Ie]}]},stroke:te(De)});break;case"kite":ye.push({shape:{type:"path",path:[{command:"M",values:[0,.5*Ie]},{command:"L",values:[.5*Ce,0]},{command:"L",values:[Ce,.5*Ie]},{command:"L",values:[.5*Ce,Ie]},{command:"Z",values:[]}]},fill:he(De,0),stroke:X(De)})}break}case"object":switch(De.resource&&De.resource.primitive||J.S){case"cone":{const we=_e(he(De,0),he(De,-.6),me?$:Se),$e=(0,Q.TE)(Se,me);ye.push({shape:$e[0],fill:we}),ye.push({shape:$e[1],fill:we});break}case"inverted-cone":{const we=he(De,0),$e=_e(we,he(De,-.6),Se),Ce=(0,Q.DY)(Se);ye.push({shape:Ce[0],fill:$e}),ye.push({shape:Ce[1],fill:we});break}case"cube":{const we=(0,Q.Pc)(Se,me);ye.push({shape:we[0],fill:he(De,0)}),ye.push({shape:we[1],fill:he(De,-.3)}),ye.push({shape:we[2],fill:he(De,-.5)});break}case"cylinder":{const we=_e(he(De,0),he(De,-.6),me?$:Se),$e=(0,Q.EB)(Se,me);ye.push({shape:$e[0],fill:we}),ye.push({shape:$e[1],fill:we}),ye.push({shape:$e[2],fill:he(De,0)});break}case"diamond":{const we=(0,Q.XX)(Se);ye.push({shape:we[0],fill:he(De,-.3)}),ye.push({shape:we[1],fill:he(De,0)}),ye.push({shape:we[2],fill:he(De,-.3)}),ye.push({shape:we[3],fill:he(De,-.7)});break}case"sphere":{const we=_e(he(De,0),he(De,-.6));we.x1=0,we.y1=0,we.x2=.25*Se,we.y2=.25*Se,ye.push({shape:{type:"circle",cx:0,cy:0,r:.5*Se},fill:we});break}case"tetrahedron":{const we=(0,Q.tp)(Se);ye.push({shape:we[0],fill:he(De,-.3)}),ye.push({shape:we[1],fill:he(De,0)}),ye.push({shape:we[2],fill:he(De,-.6)});break}}}return ye}(be,Ke,Ve)))}}),(0,W.as)(Ce).then(be=>{const Ue=[];return be.forEach(Fe=>{Fe.value?Ue.push(Fe.value):Fe.error&&se.Z.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",Fe.error)}),(0,G.wh)(Ue,[Ie,je],{node:Se&&Se.node,scale:!1,opacity:Se&&Se.opacity})})}(De,Se);case"line-3d":return function ve(De,Se){const me=De.symbolLayers,ye=[],we=(0,k.YW)(De),$e=re(Se),Ce=(Se&&Se.maxSize?(0,A.F2)(Se.maxSize):null)||F;let Ie,je=0,Je=0;return me.forEach((oe,be)=>{if(!oe||"line"!==oe.type&&"path"!==oe.type)return;const Ue=[];switch(oe.type){case"line":{const Fe=fe(oe,0);if((0,V.Wi)(Fe))break;const Ke=Fe&&Fe.width||0;0===be&&(Ie=Ke);const Ve=Math.min($e||Ke,Ce),tt=0===be?Ve:$e?Ve*(Ke/Ie):Ve,rt=tt>B/2?2*tt:B;Je=Math.max(Je,tt),je=Math.max(je,rt),Fe.width=tt,Ue.push({shape:{type:"path",path:[{command:"M",values:[0,.5*Je]},{command:"L",values:[je,.5*Je]}]},stroke:Fe});break}case"path":{const Fe=Math.min($e||C,Ce),Ke=he(oe,0),Ve=he(oe,-.2),tt=ie(oe,-.4),rt=tt?{color:tt,width:1}:{};if("quad"===oe.profile){const Ne=oe.width,qe=oe.height,ft=(0,Q.eb)(Ne&&qe?Ne/qe:1,0===qe,0===Ne),Xe={...rt,join:"bevel"};Ue.push({shape:ft[0],fill:Ve,stroke:Xe}),Ue.push({shape:ft[1],fill:Ve,stroke:Xe}),Ue.push({shape:ft[2],fill:Ke,stroke:Xe})}else Ue.push({shape:Q.JZ.pathSymbol3DLayer[0],fill:Ve,stroke:rt}),Ue.push({shape:Q.JZ.pathSymbol3DLayer[1],fill:Ke,stroke:rt});Je=Math.max(Je,Fe),je=Je}}ye.push(Ue)}),Promise.resolve((0,G.wh)(ye,[je,Je],{node:Se&&Se.node,scale:we,opacity:Se&&Se.opacity}))}(De,Se);case"polygon-3d":case"mesh-3d":return function Te(De,Se){return ge.apply(this,arguments)}(De,Se)}return Promise.reject(new x.Z("symbolPreview: swatchInfo3D","symbol not supported."))}},10532:(He,Pe,g)=>{"use strict";g.d(Pe,{DY:()=>U,EB:()=>W,EV:()=>x,JZ:()=>w,Pc:()=>V,TE:()=>A,XX:()=>N,b_:()=>T,dc:()=>G,eb:()=>Z,ht:()=>se,tp:()=>J,uH:()=>Q});var T,k,E=g(25764);(k=T||(T={}))[k.size=22]="size",k[k.lineWidth=50]="lineWidth",k[k.maxSize=120]="maxSize",k[k.maxOutlineSize=80]="maxOutlineSize",k[k.tallSymbolWidth=20]="tallSymbolWidth";const w={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function Z(k,z,C){const D=T.size;let F=D,B=D;k<1?F*=.75:k>1&&(B*=1.25);let q=D,Y=D;return z&&C&&(F=B=q=Y=0),[{type:"path",path:[{command:"M",values:[q,0]},{command:"L",values:[C?q:.875*q,0]},{command:"L",values:[C?F-.5*q:0,B-.5*Y]},{command:"L",values:[F-.5*q,B-.5*Y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[q,0]},{command:"L",values:[q,z?0:.125*Y]},{command:"L",values:[F-.5*q,z?B-.5*Y:Y]},{command:"L",values:[F-.5*q,B-.5*Y]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[F-.5*q,B-.5*Y]},{command:"L",values:[C?F-.5*q:0,B-.5*Y]},{command:"L",values:[C?F-.5*q:0,z?B-.5*Y:Y]},{command:"L",values:[F-.5*q,z?B-.5*Y:Y]},{command:"Z",values:[]}]}]}function x(k){const z=T.size,C=.5*k;return[{type:"path",path:[{command:"M",values:[0,.7*z*.5]},{command:"L",values:[.3*z,.7*z]},{command:"L",values:[.3*z,.7*z+C]},{command:"L",values:[0,.7*z+C-.7*z*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*z,.7*z]},{command:"L",values:[.3*z,.7*z+C]},{command:"L",values:[z,C]},{command:"L",values:[z,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*z,0]},{command:"L",values:[z,0]},{command:"L",values:[.3*z,.7*z]},{command:"L",values:[0,.7*z*.5]},{command:"Z",values:[]}]}]}function se(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function V(k,z){let C=z?T.tallSymbolWidth:k;const F=z?4:6;C-=C<=T.size?.5*F:F;const X=z?.35*C:.5*C;return[{type:"path",path:[{command:"M",values:[.5*C,0]},{command:"L",values:[C,.5*X]},{command:"L",values:[.5*C,X]},{command:"L",values:[0,.5*X]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*X]},{command:"L",values:[.5*C,X]},{command:"L",values:[.5*C,k]},{command:"L",values:[0,k-.5*X]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*C,X]},{command:"L",values:[.5*C,k]},{command:"L",values:[C,k-.5*X]},{command:"L",values:[C,.5*X]},{command:"Z",values:[]}]}]}function W(k,z){let C=z?T.tallSymbolWidth:k;const F=z?4:6;C-=C<=T.size?.5*F:F;const B=.5*C,$=.15*C,q=k-$;return[{type:"ellipse",cx:.5*C,cy:q,rx:B,ry:$},{type:"path",path:[{command:"M",values:[0,$]},{command:"L",values:[0,q]},{command:"L",values:[C,q]},{command:"L",values:[C,$]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*C,cy:$,rx:B,ry:$}]}function A(k,z){let C=z?T.tallSymbolWidth:k;const F=z?4:6;C-=C<=T.size?.5*F:F;const B=.15*C,$=k-B;return[{type:"ellipse",cx:.5*C,cy:$,rx:.5*C,ry:B},{type:"path",path:[{command:"M",values:[.5*C,0]},{command:"L",values:[C,$]},{command:"L",values:[0,$]},{command:"Z",values:[]}]}]}function U(k){let z=k;z-=z<T.size?3:6;const F=.15*z;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[z,0]},{command:"L",values:[.5*z,k-F]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*z,cy:0,rx:.5*z,ry:F}]}function N(k){let z=k;const C=k;z-=z<T.size?2:4;const $=z,X=C,q=Math.floor(k/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*$,0]},{command:"L",values:[$,.5*X-q]},{command:"L",values:[.45*$-q,.5*X+q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*$,0]},{command:"L",values:[.45*$-q,.5*X+q]},{command:"L",values:[0,.5*X-q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*X-q]},{command:"L",values:[.45*$-q,.5*X+q]},{command:"L",values:[.45*$,C]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*$,C]},{command:"L",values:[$,.5*X-q]},{command:"L",values:[.45*$-q,.5*X+q]},{command:"Z",values:[]}]}]}function J(k){let D=k;return D-=D<T.size?1:2,[{type:"path",path:[{command:"M",values:[.45*k,0]},{command:"L",values:[k,D]},{command:"L",values:[.45*k,.6*D]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*k,0]},{command:"L",values:[.45*k,.6*D]},{command:"L",values:[0,D]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,D]},{command:"L",values:[.45*k,.6*D]},{command:"L",values:[k,D]},{command:"Z",values:[]}]}]}function Q(k,z){return Math.round(Math.min(Math.max(k+255*z*.75,0),255))}function G(k,z){if(null==k)return new E.Z;if("type"in k&&("linear"===k.type||"pattern"===k.type))return k;const C=new E.Z(k);return new E.Z([Q(C.r,z),Q(C.g,z),Q(C.b,z),C.a])}},31319:(He,Pe,g)=>{"use strict";g.d(Pe,{rG:()=>C,wh:()=>J});var E=g(84489),T=g(1897),w=g(44660),Z=g(32995),x=g(67087),V=(g(29969),g(47508)),W=g(33484),A=g(80065);const U=(0,V.E)();function J(D,F,B){const $=Math.ceil(F[0]),X=Math.ceil(F[1]);if(!D.some(Y=>!!Y.length))return null;const q=B&&B.node||document.createElement("div");return null!=B.opacity&&(q.style.opacity=B.opacity.toString()),null!=B.effectView&&(q.style.filter=(0,A.wJ)(B.effectView)),function N(D,F){U.append(D,F),U.detach(F)}(q,()=>(0,W.KB)(D,$,X,B)),q}function z(D,F,B,$,X){switch(X){case"multiply":D[F+0]*=B[0],D[F+1]*=B[1],D[F+2]*=B[2],D[F+3]*=B[3];break;default:{const q=(0,w._Y)({r:D[F+0],g:D[F+1],b:D[F+2]});q.h=$.h,q.s=$.s,q.v=q.v/100*$.v;const Y=(0,w.xr)(q);D[F+0]=Y.r,D[F+1]=Y.g,D[F+2]=Y.b,D[F+3]*=B[3];break}}}function C(D,F,B,$,X){return function G(D,F,B){return D?(0,T.default)(D,{responseType:"image"}).then($=>{const X=$.data,q=X.width,Y=X.height,ae=q/Y;let he=F;if(B){const ne=Math.max(q,Y);he=Math.min(he,ne)}return{image:X,width:ae<=1?Math.ceil(he*ae):he,height:ae<=1?he:Math.ceil(he/ae)}}):Promise.reject(new Z.Z("renderUtils: imageDataSize","href not provided."))}(D,F,X).then(q=>{const Y=q.width?q.width:F,ae=q.height?q.height:F;if(q.image&&function k(D,F){return!(!D||"ignore"===F||"multiply"===F&&255===D.r&&255===D.g&&255===D.b&&1===D.a)}(B,$)){let he=q.image.width,ne=q.image.height;(0,x.Z)("edge")&&/\.svg$/i.test(D)&&(he-=1,ne-=1);const ue=function Q(D,F){D=Math.ceil(D),F=Math.ceil(F);const B=document.createElement("canvas");B.width=D,B.height=F,B.style.width=D+"px",B.style.height=F+"px";const $=B.getContext("2d");return $.clearRect(0,0,D,F),$}(Y,ae);ue.drawImage(q.image,0,0,he,ne,0,0,Y,ae);const te=ue.getImageData(0,0,Y,ae),ie=[B.r/255,B.g/255,B.b/255,B.a],fe=(0,w._Y)(B);for(let _e=0;_e<te.data.length;_e+=4)z(te.data,_e,ie,fe,$);ue.putImageData(te,0,0),D=ue.canvas.toDataURL("image/png")}else{const he=E.id&&E.id.findCredential(D);if(he&&he.token){const ne=D.includes("?")?"&":"?";D=`${D}${ne}token=${he.token}`}}return{url:D,width:Y,height:ae}}).catch(()=>({url:D,width:F,height:F}))}},32569:(He,Pe,g)=>{"use strict";g.d(Pe,{EJ:()=>F,KV:()=>C,n2:()=>z,v9:()=>D,wm:()=>X});var E=g(71670),T=g(1897),w=g(32995),Z=g(53661),x=g(30801),se=g(55050),V=g(37753),W=g(6602),A=g(51319);let U={};function J(){return(J=(0,E.Z)(function*(q,Y){try{return{data:(yield F(q,Y)).data,baseUrl:(0,se.Yd)(q),styleUrl:q}}catch(ae){return(0,x.r9)(ae),null}})).apply(this,arguments)}function z(q,Y,ae){return q&&(0,Z.pC)(q.styleUrl)?function N(q,Y){return J.apply(this,arguments)}(q.styleUrl,ae):q&&(0,Z.pC)(q.styleName)?function Q(q,Y,ae){const he=(0,Z.pC)(Y.portal)?Y.portal:V.Z.getDefault();let ne;const ue=`${he.url} - ${he.user&&he.user.username} - ${q}`;return U[ue]||(U[ue]=function k(q,Y,ae){return Y.load(ae).then(()=>{const he=new W.Z({disableExtraQuery:!0,query:`owner:${B} AND type:${$} AND typekeywords:"${q}"`});return Y.queryItems(he,ae)}).then(({results:he})=>{let ne=null;const ue=q.toLowerCase();if(he&&Array.isArray(he))for(const te of he)if(te.typeKeywords?.some(fe=>fe.toLowerCase()===ue)&&te.type===$&&te.owner===B){ne=te;break}if(!ne)throw new w.Z("symbolstyleutils:style-not-found",`The style '${q}' could not be found`,{styleName:q});return ne.load(ae)})}(q,he,ae).then(te=>(ne=te,te.fetchData())).then(te=>({data:te,baseUrl:ne.itemUrl??"",styleName:q}))),U[ue]}(q.styleName,Y,ae):Promise.reject(new w.Z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function C(q){return null===q||"CIMSymbolReference"===q.type?q:{type:"CIMSymbolReference",symbol:q}}function D(q,Y){if("cimRef"===Y)return q.cimRef;if(q.formatInfos&&!(0,A.K3)())for(const ae of q.formatInfos)if("gltf"===ae.type)return ae.href;return q.webRef}function F(q,Y){const ae={responseType:"json",query:{f:"json"},...Y};return(0,T.default)((0,se.Fv)(q),ae)}const B="esri_en",$="Style",X="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},33484:(He,Pe,g)=>{"use strict";g.d(Pe,{KB:()=>Te});var E=g(25764),T=g(67087),w=g(53661),Z=g(80309),x=g(53072),V=(g(89400),g(22609));const W="http://www.w3.org/2000/svg";let A=0,U=0;const N=(0,T.Z)("android"),J=(0,T.Z)("chrome")||N&&N>=4?"auto":"optimizeLegibility",Q={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},G=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let k={},z={};const C={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},D=Math.PI;let F=1;function B(ge,Ae){const De=ge*(D/180);return Math.abs(Ae*Math.sin(De))+Math.abs(Ae*Math.cos(De))}function $(ge){return ge.map(Ae=>`${Ae.command} ${Ae.values.join(" ")}`).join(" ").trim()}function X(ge,Ae,De,Se){if(ge){if("circle"===ge.type)return(0,V.u)("circle",{fill:Ae,"fill-rule":"evenodd",stroke:De.color,"stroke-width":De.width,"stroke-linecap":De.cap,"stroke-linejoin":De.join,"stroke-dasharray":De.dashArray,"stroke-dashoffset":De.dashOffset,"stroke-miterlimit":"4",cx:ge.cx,cy:ge.cy,r:ge.r});if("ellipse"===ge.type)return(0,V.u)("ellipse",{fill:Ae,"fill-rule":"evenodd",stroke:De.color,"stroke-width":De.width,"stroke-linecap":De.cap,"stroke-linejoin":De.join,"stroke-dasharray":De.dashArray,"stroke-miterlimit":"4",cx:ge.cx,cy:ge.cy,rx:ge.rx,ry:ge.ry});if("rect"===ge.type)return(0,V.u)("rect",{fill:Ae,"fill-rule":"evenodd",stroke:De.color,"stroke-width":De.width,"stroke-linecap":De.cap,"stroke-linejoin":De.join,"stroke-dasharray":De.dashArray,"stroke-miterlimit":"4",x:ge.x,y:ge.y,width:ge.width,height:ge.height});if("image"===ge.type)return(0,V.u)("image",{href:ge.src,x:ge.x,y:ge.y,width:ge.width,height:ge.height,preserveAspectRatio:"none"});if("path"===ge.type){const me="string"!=typeof ge.path?$(ge.path):ge.path;return(0,V.u)("path",{fill:Ae,"fill-rule":"evenodd",stroke:De.color,"stroke-width":De.width,"stroke-linecap":De.cap,"stroke-linejoin":De.join,"stroke-dasharray":De.dashArray,"stroke-miterlimit":"4",d:me})}if("text"===ge.type)return(0,w.O3)(Se),(0,V.u)("text",{"dominant-baseline":Se.dominantBaseline,fill:Ae,"fill-rule":"evenodd",stroke:De.color,"stroke-width":De.width,"stroke-linecap":De.cap,"stroke-linejoin":De.join,"stroke-dasharray":De.dashArray,"stroke-miterlimit":"4","text-anchor":Se.align,"text-decoration":Se.decoration,kerning:Se.kerning,rotate:Se.rotate,"text-rendering":J,"font-style":Se.font.style,"font-variant":Se.font.variant,"font-weight":Se.font.weight,"font-size":Se.font.size,"font-family":Se.font.family,x:ge.x,y:ge.y},ge.text)}return null}function q(ge){const Ae={fill:"none",pattern:null,linearGradient:null};if(ge)if("type"in ge&&"pattern"===ge.type){const De="patternId-"+ ++A;Ae.fill=`url(#${De})`,Ae.pattern={id:De,x:ge.x,y:ge.y,width:ge.width,height:ge.height,image:{x:0,y:0,width:ge.width,height:ge.height,href:ge.src}}}else if("type"in ge&&"linear"===ge.type){const De="linearGradientId-"+ ++U;Ae.fill=`url(#${De})`,Ae.linearGradient={id:De,x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,stops:ge.colors.map(Se=>({offset:Se.offset,color:Se.color&&new E.Z(Se.color).toString()}))}}else if(ge){const De=new E.Z(ge);Ae.fill=De.toString()}return Ae}function Y(ge){const Ae={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(ge&&(null!=ge.width&&(Ae.width=ge.width),ge.cap&&(Ae.cap=ge.cap),ge.join&&(Ae.join=ge.join.toString()),ge.color&&(Ae.color=new E.Z(ge.color).toString()),ge.dashArray&&(Ae.dashArray=ge.dashArray),ge.dashArray&&(Ae.dashOffset=ge.dashoffset),ge.style)){let De=null;if(ge.style in C&&(De=C[ge.style]),Array.isArray(De)){De=De.slice(0);const Se=ge.width??0;for(let me=0;me<De.length;++me)De[me]*=Se;if("butt"!==ge.cap){for(let me=0;me<De.length;me+=2)De[me]-=Se,De[me]<1&&(De[me]=1);for(let me=1;me<De.length;me+=2)De[me]+=Se}De=De.join(",")}Ae.dashArray=De}return Ae}function ae(ge,Ae){const De={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(ge){const Se=ge.alignBaseline,me="baseline"===Se?"auto":"top"===Se?"text-top":"bottom"===Se?"hanging":Se;De.align=ge.align,De.dominantBaseline=me,De.decoration=ge.decoration,De.kerning=ge.kerning?"auto":"0",De.rotate=ge.rotated?"90":"0",(0,w.O3)(Ae),De.font.style=Ae.style||"normal",De.font.variant=Ae.variant||"normal",De.font.weight=Ae.weight||"normal",De.font.size=Ae.size&&Ae.size.toString()||"10pt",De.font.family=Ae.family||"serif"}return De}function he(ge){const{pattern:Ae,linearGradient:De}=ge;if(Ae)return(0,V.u)("pattern",{id:Ae.id,patternUnits:"userSpaceOnUse",x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height},(0,V.u)("image",{x:Ae.image.x,y:Ae.image.y,width:Ae.image.width,height:Ae.image.height,href:Ae.image.href}));if(De){const Se=De.stops.map((me,ye)=>(0,V.u)("stop",{key:`${ye}-stop`,offset:me.offset,"stop-color":me.color}));return(0,V.u)("linearGradient",{id:De.id,gradientUnits:"userSpaceOnUse",x1:De.x1,y1:De.y1,x2:De.x2,y2:De.y2},Se)}return null}function ne(ge,Ae){if(!ge)return null;const De=[];for(const Se of ge){const{shape:me,fill:ye,stroke:we,font:$e}=Se,Ce=q(ye),Ie=Y(we),je="text"===me.type?ae(me,$e):null,Je=X(me,Ce.fill,Ie,je);Je&&De.push(Je)}return(0,V.u)("mask",{id:Ae,maskUnits:"userSpaceOnUse"},(0,V.u)("g",null,De))}function ue(ge,Ae,De){return(0,x.t)(ge,(0,x.i)(ge),[Ae,De])}function te(ge,Ae,De,Se,me){return(0,x.s)(ge,(0,x.i)(ge),[Ae,De]),ge[4]=ge[4]*Ae-Se*Ae+Se,ge[5]=ge[5]*De-me*De+me,ge}function fe(ge,Ae){k&&"left"in k?(null!=k.left&&k.left>ge&&(k.left=ge),(null==k.right||k.right<ge)&&(k.right=ge),(null==k.top||k.top>Ae)&&(k.top=Ae),(null==k.bottom||k.bottom<Ae)&&(k.bottom=Ae)):k={left:ge,bottom:Ae,right:ge,top:Ae}}function _e(ge){const Ae=ge.args,De=Ae.length;let Se;switch(ge.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(Se=0;Se<De;Se+=2)fe(Ae[Se],Ae[Se+1]);z.x=Ae[De-2],z.y=Ae[De-1];break;case"H":for(Se=0;Se<De;++Se)fe(Ae[Se],z.y);z.x=Ae[De-1];break;case"V":for(Se=0;Se<De;++Se)fe(z.x,Ae[Se]);z.y=Ae[De-1];break;case"m":{let me=0;for(("x"in z||(fe(z.x=Ae[0],z.y=Ae[1]),me=2),Se=me);Se<De;Se+=2)fe(z.x+=Ae[Se],z.y+=Ae[Se+1]);break}case"l":case"t":for(Se=0;Se<De;Se+=2)fe(z.x+=Ae[Se],z.y+=Ae[Se+1]);break;case"h":for(Se=0;Se<De;++Se)fe(z.x+=Ae[Se],z.y);break;case"v":for(Se=0;Se<De;++Se)fe(z.x,z.y+=Ae[Se]);break;case"c":for(Se=0;Se<De;Se+=6)fe(z.x+Ae[Se],z.y+Ae[Se+1]),fe(z.x+Ae[Se+2],z.y+Ae[Se+3]),fe(z.x+=Ae[Se+4],z.y+=Ae[Se+5]);break;case"s":case"q":for(Se=0;Se<De;Se+=4)fe(z.x+Ae[Se],z.y+Ae[Se+1]),fe(z.x+=Ae[Se+2],z.y+=Ae[Se+3]);break;case"A":for(Se=0;Se<De;Se+=7)fe(Ae[Se+5],Ae[Se+6]);z.x=Ae[De-2],z.y=Ae[De-1];break;case"a":for(Se=0;Se<De;Se+=7)fe(z.x+=Ae[Se+5],z.y+=Ae[Se+6])}}function de(ge,Ae,De){const Se=Q[ge.toLowerCase()];let me;"number"==typeof Se&&(Se?Ae.length>=Se&&(me={action:ge,args:Ae.slice(0,Ae.length-Ae.length%Se)},De.push(me),_e(me)):(me={action:ge,args:[]},De.push(me),_e(me)))}function re(ge){const Ae={x:0,y:0,width:0,height:0};if("circle"===ge.type)Ae.x=ge.cx-ge.r,Ae.y=ge.cy-ge.r,Ae.width=2*ge.r,Ae.height=2*ge.r;else if("ellipse"===ge.type)Ae.x=ge.cx-ge.rx,Ae.y=ge.cy-ge.ry,Ae.width=2*ge.rx,Ae.height=2*ge.ry;else if("image"===ge.type||"rect"===ge.type)Ae.x=ge.x,Ae.y=ge.y,Ae.width=ge.width,Ae.height=ge.height;else if("path"===ge.type){const De=(0,w.s3)(function Oe(ge){const Ae=("string"!=typeof ge.path?$(ge.path):ge.path).match(G),De=[];if(k={},z={},!Ae)return null;let Se="",me=[];const ye=Ae.length;for(let $e=0;$e<ye;++$e){const Ce=Ae[$e],Ie=parseFloat(Ce);isNaN(Ie)?(Se&&de(Se,me,De),me=[],Se=Ce):me.push(Ie)}de(Se,me,De);const we={x:0,y:0,width:0,height:0};return k&&"left"in k&&(we.x=k.left,we.y=k.top,we.width=k.right-k.left,we.height=k.bottom-k.top),we}(ge));Ae.x=De.x,Ae.y=De.y,Ae.width=De.width,Ae.height=De.height}return Ae}function le(ge){const Ae={x:0,y:0,width:0,height:0};let De=null,Se=Number.NEGATIVE_INFINITY,me=Number.NEGATIVE_INFINITY;for(const ye of ge)De?(De.x=Math.min(De.x,ye.x),De.y=Math.min(De.y,ye.y),Se=Math.max(Se,ye.x+ye.width),me=Math.max(me,ye.y+ye.height)):(De=Ae,De.x=ye.x,De.y=ye.y,Se=ye.x+ye.width,me=ye.y+ye.height);return De&&(De.width=Se-De.x,De.height=me-De.y),De}function ce(ge,Ae,De,Se,me,ye,we,$e,Ce){let Ie=(we&&ye?B(ye,Ae):Ae)/2,je=(we&&ye?B(ye,De):De)/2;if(Ce){const tt=Ce[0],rt=Ce[1];Ie=(we&&ye?B(ye,tt):tt)/2,je=(we&&ye?B(ye,rt):rt)/2}const Je=ge.width+Se,oe=ge.height+Se,be=(0,Z.c)(),Ue=(0,Z.c)();let Fe=!1;if(me&&0!==Je&&0!==oe){const tt=Ae!==De?Ae/De:Je/oe,rt=Ae>De?Ae:De;let Ne=1,qe=1;isNaN(rt)||(tt>1?(Ne=rt/Je,qe=rt/tt/oe):(qe=rt/oe,Ne=rt*tt/Je)),(0,x.m)(Ue,Ue,te(be,Ne,qe,Ie,je)),Fe=!0}const Ke=ge.x+(Je-Se)/2,Ve=ge.y+(oe-Se)/2;if((0,x.m)(Ue,Ue,ue(be,Ie-Ke,je-Ve)),!Fe&&(Je>Ae||oe>De)){const tt=Je/Ae>oe/De,rt=(tt?Ae:De)/(tt?Je:oe);(0,x.m)(Ue,Ue,te(be,rt,rt,Ke,Ve))}return ye&&(0,x.m)(Ue,Ue,function ie(ge,Ae,De,Se){const me=Ae%360*Math.PI/180;(0,x.r)(ge,(0,x.i)(ge),me);const ye=Math.cos(me),we=Math.sin(me),$e=ge[4],Ce=ge[5];return ge[4]=$e*ye-Ce*we+Se*we-De*ye+De,ge[5]=Ce*ye+$e*we-De*we-Se*ye+Se,ge}(be,ye,Ke,Ve)),$e&&(0,x.m)(Ue,Ue,ue(be,$e[0],$e[1])),`matrix(${Ue[0]},${Ue[1]},${Ue[2]},${Ue[3]},${Ue[4]},${Ue[5]})`}function Te(ge,Ae,De,Se={}){const me=[],ye=[],we=++F,$e=function ve(ge,Ae,De){const Se=ge?.effects.find(Ie=>"bloom"===Ie.type);if(!Se)return null;const{strength:me,radius:ye}=Se,we=me>0?ye:0,$e=(me+we)*Ae,Ce=4*me+1;return(0,V.u)("filter",{id:`bloom${De}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},(0,V.u)("feMorphology",{operator:"dilate",radius:(me+.5*we)*(5**(Ae/100)*(.4+Ae/100)),in:"SourceGraphic",result:"dilate"}),(0,V.u)("feGaussianBlur",{in:"dilate",stdDeviation:$e/25,result:"blur"}),(0,V.u)("feGaussianBlur",{in:"blur",stdDeviation:$e/50,result:"intensityBlur"}),(0,V.u)("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},(0,V.u)("feFuncR",{type:"linear",slope:Ce}),(0,V.u)("feFuncG",{type:"linear",slope:Ce}),(0,V.u)("feFuncB",{type:"linear",slope:Ce})),(0,V.u)("feMerge",null,(0,V.u)("feMergeNode",{in:"intensityBlur"}),(0,V.u)("feMergeNode",{in:"intensityBrightness"}),(0,V.u)("feGaussianBlur",{stdDeviation:me/10})))}(Se.effectView,Ae,we);let Ce=null;if($e){const Ie=Se.effectView?.effects.find(be=>"bloom"===be.type),je=(Ie.strength?Ie.strength+Ie.radius/2:0)/3,oe=De+De*je;Ce=[Math.max(Ae+Ae*je,10),Math.max(oe,10)]}for(let Ie=0;Ie<ge.length;Ie++){const je=ge[Ie],Je=[],oe=[];let be=0,Ue=0,Fe=0;for(const tt of je){const{shape:rt,fill:Ne,stroke:qe,font:ft,offset:Xe}=tt;Se.ignoreStrokeWidth||(be+=qe&&qe.width||0);const dt=q(Ne),Qe=Y(qe),ot="text"===rt.type?ae(rt,ft):null;me.push(he(dt)),Je.push(X(rt,dt.fill,Qe,ot)),oe.push(re(rt)),Xe&&(Ue+=Xe[0],Fe+=Xe[1])}const Ke=ce((0,w.s3)(le(oe)),Ae,De,be,Se.scale??!1,Se.rotation,Se.useRotationSize??!1,[Ue,Fe],Ce);let Ve=null;if(Se.masking){const tt=`mask-${Ie}`;me.push(ne(Se.masking[Ie],tt)),Ve=`url(#${tt})`}ye.push(Ve?(0,V.u)("g",{mask:Ve},(0,V.u)("g",{transform:Ke},Je)):(0,V.u)("g",{transform:Ke},Je))}return Se.useRotationSize&&Se.rotation&&(Ae=B(Se.rotation,Ae),De=B(Se.rotation,De)),$e&&((0,w.O3)(Ce),Ae=Ce[0],De=Ce[1]),(0,V.u)("svg",{xmlns:W,width:Ae,height:De,style:"display: block;"},$e,(0,V.u)("defs",null,me),$e?(0,V.u)("g",{filter:`url(#bloom${we})`},ye):ye)}},16434:(He,Pe,g)=>{"use strict";g.d(Pe,{$K:()=>Z,Hc:()=>A,KW:()=>U,Uz:()=>W,w2:()=>N}),g(67087);var T=g(77765),w=g(73327);function Z(J,{isPrimitive:Q,width:G,depth:k,height:z}){const C=Q?10:1;if(null==G&&null==z&&null==k)return[C*J[0],C*J[1],C*J[2]];const D=(0,T.f)(G,k,z);let F;for(let B=0;B<3;B++){const $=D[B];if(null!=$){F=$/J[B];break}}for(let B=0;B<3;B++)null==D[B]&&(D[B]=J[B]*F);return D}const x=(0,w.al)(-.5,-.5,-.5,.5,.5,.5),se=(0,w.al)(-.5,-.5,0,.5,.5,1),V=(0,w.al)(-.5,-.5,0,.5,.5,.5);function W(J){switch(J){case"sphere":case"cube":case"diamond":return x;case"cylinder":case"cone":case"inverted-cone":return se;case"tetrahedron":return V;default:return}}const A=["butt","square","round"],U=[...A,"none"],N=["miter","bevel","round"]},6713:(He,Pe,g)=>{"use strict";g.d(Pe,{Ck:()=>se,JT:()=>w,Nj:()=>U,g6:()=>Z,vC:()=>x,x0:()=>A});var E=g(93142),T=g(83382);const w=["none","underline","line-through"],Z=["normal","italic","oblique"],x=["normal","lighter","bold","bolder"],se={type:Number,cast:N=>{const J=(0,T.q9)(N);return 0===J?1:(0,E.uZ)(J,.1,4)},nonNullable:!0},A={type:["left","right","center"],nonNullable:!0},U={type:["baseline","top","middle","bottom"],nonNullable:!0}},55821:(He,Pe,g)=>{"use strict";g.d(Pe,{Z7:()=>w,f9:()=>x});var E=g(1611);function w(se){return 1/(E.a[se]||1)}const x=function Z(){const se=Object.keys(E.a);return se.sort(),se}()},36214:(He,Pe,g)=>{"use strict";g.d(Pe,{Ds:()=>V,KA:()=>se});var E=g(55050),T=g(29184);function Z(A,U){return function W(A){return!(null==A||"service"!==A.origin&&"portal-item"!==A.origin||"feature"!==A.layer?.type&&"stream"!==A.layer?.type)}(U)&&!(0,E.YP)(A)&&U?.layer?.parsedUrl?(0,E.v_)(U.layer.parsedUrl.path,"images",A):(0,T.f)(A,U)}const se={json:{read:{source:["imageData","url"],reader:function w(A,U,N){return U.imageData?(0,E._l)({mediaType:U.contentType||"image/png",isBase64:!0,data:U.imageData}):Z(U.url,N)}},write:{writer(A,U,N,J){!function x(A,U,N,J){if((0,E.HK)(A)){const Q=(0,E.sJ)(A);if(!Q)return;U.contentType=Q.mediaType,U.imageData=Q.data,N&&N.imageData===U.imageData&&N.url&&(0,T.w)(N.url,U,"url",J)}else(0,T.w)(A,U,"url",J)}(A,U,this.source,J)}}}},V={readOnly:!0,json:{read:{source:["imageData","url"],reader(A,U,N){const J={};return U.imageData&&(J.imageData=U.imageData),U.contentType&&(J.contentType=U.contentType),U.url&&(J.url=Z(U.url,N)),J}}}}},80065:(He,Pe,g)=>{"use strict";g.d(Pe,{BR:()=>Te,Q8:()=>De,YW:()=>G,_h:()=>z,e3:()=>ce,nf:()=>k,tb:()=>$,wJ:()=>ge});var E=g(71670),T=g(25764),w=g(97708),Z=g(11823),se=(g(67087),g(53661)),V=g(77765),W=g(10632),U=(g(64702),g(15935));const N=new T.Z("white");function G(me){if((0,se.Wi)(me)||!("symbolLayers"in me)||(0,se.Wi)(me.symbolLayers))return!1;switch(me.type){case"point-3d":return me.symbolLayers.some(ye=>"object"===ye.type);case"line-3d":return me.symbolLayers.some(ye=>"path"===ye.type);case"polygon-3d":return me.symbolLayers.some(ye=>"object"===ye.type||"extrude"===ye.type);default:return!1}}function k(me){return(0,se.s3)(me.resource).href}function z(me,ye){if(!me)return null;let we=null;return(0,w.dU)(me)?we=function C(me){const ye=me.symbolLayers;if(!ye)return null;let we=null;return ye.forEach($e=>{"object"===$e.type&&null!=$e.resource?.href||(we="water"===$e.type?(0,se.Wg)($e.color):(0,se.pC)($e.material)?(0,se.Wg)($e.material.color):null)}),we?new T.Z(we):null}(me):(0,w.cT)(me)&&(we=me.color?new T.Z(me.color):null),we?D(we,ye):null}function D(me,ye){if(null==ye||null==me)return me;const we=me.toRgba();return we[3]=we[3]*ye,new T.Z(we)}function $(me,ye,we){me&&(ye||null!=we)&&(ye&&(ye=new T.Z(ye)),(0,w.dU)(me)?function F(me,ye,we){const $e=me.symbolLayers;if(!$e)return;const Ce=Ie=>{const je=(0,se.pC)(Ie)?Ie:null;return D(ye=ye??je??(null!=we?N:null),we)};$e.forEach(Ie=>{if("object"!==Ie.type||null==Ie.resource?.href||ye)if("water"===Ie.type)Ie.color=Ce(Ie.color);else{const je=(0,se.pC)(Ie.material)?Ie.material.color:null,Je=Ce(je);(0,se.Wi)(Ie.material)?Ie.material=new U.b({color:Je}):Ie.material.color=Je,null!=we&&"outline"in Ie&&(0,se.pC)(Ie.outline)&&(0,se.pC)(Ie.outline.color)&&(Ie.outline.color=D(Ie.outline.color,we))}})}(me,ye,we):(0,w.cT)(me)&&function B(me,ye,we){(ye=ye??me.color)&&(me.color=D(ye,we)),null!=we&&"outline"in me&&me.outline&&me.outline.color&&(me.outline.color=D(me.outline.color,we))}(me,ye,we))}function q(){return q=(0,E.Z)(function*(me,ye){const we=me.symbolLayers;we&&(yield(0,Z.Ed)(we,function(){var $e=(0,E.Z)(function*(Ce){return function Y(me,ye){return ae.apply(this,arguments)}(Ce,ye)});return function(Ce){return $e.apply(this,arguments)}}()))}),q.apply(this,arguments)}function ae(){return ae=(0,E.Z)(function*(me,ye){switch(me.type){case"extrude":!function ue(me,ye){me.size="number"==typeof ye[2]?ye[2]:0}(me,ye);break;case"icon":case"line":case"text":!function he(me,ye){const we=ne(ye);(0,se.pC)(we)&&(me.size=we)}(me,ye);break;case"path":!function fe(me,ye){const we=_e(ye,V.O,[me.width,void 0,me.height]);me.width=re(ye[0],me.width,1,we),me.height=re(ye[2],me.height,1,we)}(me,ye);break;case"object":yield function te(me,ye){return ie.apply(this,arguments)}(me,ye)}}),ae.apply(this,arguments)}function ne(me){for(const ye of me)if("number"==typeof ye)return ye;return null}function ie(){return ie=(0,E.Z)(function*(me,ye){const{resourceSize:we,symbolSize:$e}=yield function de(me){return Oe.apply(this,arguments)}(me),Ce=_e(ye,we,$e);me.width=re(ye[0],$e[0],we[0],Ce),me.depth=re(ye[1],$e[1],we[1],Ce),me.height=re(ye[2],$e[2],we[2],Ce)}),ie.apply(this,arguments)}function _e(me,ye,we){for(let $e=0;$e<3;$e++){const Ce=me[$e];switch(Ce){case"symbol-value":{const Ie=we[$e];return null!=Ie?Ie/ye[$e]:1}case"proportional":break;default:if(Ce&&ye[$e])return Ce/ye[$e]}}return 1}function Oe(){return(Oe=(0,E.Z)(function*(me){const ye=yield g.e(4210).then(g.bind(g,74210)),we=yield ye.computeObjectLayerResourceSize(me,10),{width:$e,height:Ce,depth:Ie}=me,je=[$e,Ie,Ce];let Je=1;for(let oe=0;oe<3;oe++){const be=je[oe];if(null!=be){Je=be/we[oe];break}}for(let oe=0;oe<3;oe++)null==je[oe]&&(je[oe]=we[oe]*Je);return{resourceSize:we,symbolSize:je}})).apply(this,arguments)}function re(me,ye,we,$e){switch(me){case"proportional":return we*$e;case"symbol-value":return ye??we;default:return me}}function ce(me,ye){return ve.apply(this,arguments)}function ve(){return ve=(0,E.Z)(function*(me,ye){if(me&&ye)return(0,w.dU)(me)?function X(me,ye){return q.apply(this,arguments)}(me,ye):void((0,w.cT)(me)&&function le(me,ye){const we=ne(ye);if(!(0,se.Wi)(we))switch(me.type){case"simple-marker":me.size=we;break;case"picture-marker":{const $e=me.width/me.height;$e>1?(me.width=we,me.height=we*$e):(me.width=we*$e,me.height=we);break}case"simple-line":me.width=we;break;case"text":me.font.size=we}}(me,ye))}),ve.apply(this,arguments)}function Te(me,ye,we){if(me&&null!=ye)if((0,w.dU)(me)){const $e=me.symbolLayers;$e&&$e.forEach(Ce=>{if(Ce&&"object"===Ce.type)switch(we){case"tilt":Ce.tilt=ye;break;case"roll":Ce.roll=ye;break;default:Ce.heading=ye}})}else(0,w.cT)(me)&&("simple-marker"!==me.type&&"picture-marker"!==me.type&&"text"!==me.type||(me.angle=ye))}function ge(me){if(!me)return null;const ye=me.effects.filter(we=>"bloom"!==we.type).map(we=>we.toJSON());return(0,W.rM)(ye)}function De(me,ye){return Se.apply(this,arguments)}function Se(){return(Se=(0,E.Z)(function*(me,ye){return(yield me.fetchSymbol(ye))||me.fetchCIMSymbol(ye)})).apply(this,arguments)}},73858:(He,Pe,g)=>{"use strict";g.r(Pe),g.d(Pe,{fetchSymbolFromStyle:()=>Q,resolveWebStyleSymbol:()=>J});var E=g(97708),T=g(29322),w=g(32995),Z=g(53661),x=g(55050),se=g(37753),V=g(29184),W=g(55018),A=g(62094),U=g(32569),N=g(79232);function J(k,z,C,D){return k.name?k.styleName&&"Esri2DPointSymbolsStyle"===k.styleName?function G(k,z,C){const D=U.wm.replace(/\{SymbolName\}/gi,k.name),F=(0,Z.pC)(z.portal)?z.portal:se.Z.getDefault();return(0,U.EJ)(D,C).then(B=>{const $=(0,U.KV)(B.data);return(0,W.im)($,{portal:F,url:(0,x.mN)((0,x.Yd)(D)),origin:"portal-item"})})}(k,z,D):(0,U.n2)(k,z,D).then(F=>Q((0,Z.s3)(F),k.name,z,C,D)):Promise.reject(new w.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function Q(k,z,C,D,F){const B=k.data,$=C&&(0,Z.pC)(C.portal)?C.portal:se.Z.getDefault(),X={portal:$,url:(0,x.mN)(k.baseUrl),origin:"portal-item"},q=B.items.find(ue=>ue.name===z);if(!q)return Promise.reject(new w.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${z}' could not be found`,{symbolName:z}));let Y=(0,V.f)((0,U.v9)(q,D),X),ae=q.thumbnail?.href??null;const he=q.thumbnail&&q.thumbnail.imageData;(0,T.XO)()&&(Y=(0,T.pJ)(Y)??"",ae=(0,T.pJ)(ae));const ne={portal:$,url:(0,x.mN)((0,x.Yd)(Y)),origin:"portal-item"};return(0,U.EJ)(Y,F).then(ue=>{const te="cimRef"===D?(0,U.KV)(ue.data):ue.data,ie=(0,W.im)(te,ne);if(ie&&(0,E.dU)(ie)){if(ae){const fe=(0,V.f)(ae,X);ie.thumbnail=new N.p({url:fe})}else he&&(ie.thumbnail=new N.p({url:`data:image/png;base64,${he}`}));k.styleUrl?ie.styleOrigin=new A.Z({portal:C.portal,styleUrl:k.styleUrl,name:z}):k.styleName&&(ie.styleOrigin=new A.Z({portal:C.portal,styleName:k.styleName,name:z}))}return ie})}},27655:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Q});var E=g(18100),T=g(94904),w=g(44480),Z=g(53661),x=g(9497),W=(g(83382),g(19420),g(66508)),A=g(20891),U=g(70425),N=g(8127);let J=class extends((0,T.J)(w.wq)){constructor(G){super(G),this.legacy=null,this.timeZone="system"}readLegacy(G,k){const{timeZone:z,respectsDaylightSaving:C}=k;return{timeZone:z,respectsDaylightSaving:C}}readTimeZone(G,k){return"timeZoneIANA"in k?k.timeZoneIANA:(0,N.G)(k)}writeTimeZone(G,k){k.timeZoneIANA=G}equals(G){return!((0,Z.Wi)(G)||(0,Z.Wi)(this.timeZone)||(0,Z.Wi)(G.timeZone))&&this.timeZone===G.timeZone}};(0,E._)([(0,x.Cb)()],J.prototype,"legacy",void 0),(0,E._)([(0,W.r)("legacy",["timeZone"])],J.prototype,"readLegacy",null),(0,E._)([(0,x.Cb)({type:String,nonNullable:!0})],J.prototype,"timeZone",void 0),(0,E._)([(0,W.r)("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],J.prototype,"readTimeZone",null),(0,E._)([(0,U.c)("timeZone")],J.prototype,"writeTimeZone",null),J=(0,E._)([(0,A.j)("esri.time.TimeReference")],J);const Q=J},8127:(He,Pe,g)=>{"use strict";g.d(Pe,{G:()=>w});const E=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Chihuahua"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);var T=g(64626);function w(se,V="system"){if(!se||!E.has(se.timeZone))return V;const W=E.get(se.timeZone);return function x(se){return se.startsWith("UTC")}(se.timeZone)||se.respectsDaylightSaving?W:function Z(se){const V=T.ou.local().setZone(se),W=Math.min(V.set({month:1,day:1}).offset,V.set({month:5}).offset);return 0===W?"Etc/UTC":`Etc/GMT${T.Qf.instance(-W).formatOffset(0,"narrow")}`}(W)}},43908:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>G});var E=g(95442),T=g(67087),w=g(34662),Z=g(93113),x=g(10465),se=g(6848),V=g(42806),W=g(67026);class A{constructor(z,C){this.key=new W.Z(0,0,0,0),this.bounds=(0,se.Ue)(),this.objectIds=new Set,this.key.set(C);const D=z.getLODInfoAt(this.key);this.tileInfoView=z,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=D.resolution,this.scale=D.scale,this.level=D.level}get id(){return this.key.id}get extent(){return x.Z.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const z=this.key.getChildKeys(),C=Z.Z.acquire();for(let D=0;D<z.length;D++)C[D]=new A(this.tileInfoView,z[D]);return C}getQuantizationParameters(){return V.Z.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}var U=g(97726);const N={added:[],removed:[]},J=new Set,Q=new W.Z(0,0,0,0);class G extends E.Z{constructor(z){super(),this._tiles=new Map,this._index=(0,w.r)(9,(0,T.Z)("esri-csp-restrictions")?C=>({minX:C.bounds[0],minY:C.bounds[1],maxX:C.bounds[2],maxY:C.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=z}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(z){return this._tiles.has(z)}get(z){return this._tiles.get(z)}boundsIntersections(z){return this._index.search({minX:z[0],minY:z[1],maxX:z[2],maxY:z[3]})}updateTiles(z){const C={added:[],removed:[]};for(const D of z.added)if(!this.has(D)){const F=new A(this.tileScheme,D);this._tiles.set(D,F),this._index.insert(F),C.added.push(F)}for(const D of z.removed)if(this.has(D)){const F=this.get(D);this._tiles.delete(D),this._index.remove(F),C.removed.push(F)}this.tiles.length=0,this._tiles.forEach(D=>this.tiles.push(D)),(C.added.length||C.removed.length)&&this.emit("update",C)}setViewState(z){const C=this.tileScheme.getTileCoverage(z,0);if(!C)return;const{spans:D,lodInfo:F}=C,{level:B}=F;if(D.length>0)for(const{row:$,colFrom:X,colTo:q}of D)for(let Y=X;Y<=q;Y++){const ae=Q.set(B,$,F.normalizeCol(Y),F.getWorldForColumn(Y)).id;if(J.add(ae),!this.has(ae)){const he=new A(this.tileScheme,ae);this._tiles.set(ae,he),this._index.insert(he),this.tiles.push(he),N.added.push(he)}}for(let $=this.tiles.length-1;$>=0;$--){const X=this.tiles[$];J.has(X.id)||(this._tiles.delete(X.id),this.tiles.splice($,1),this._index.remove(X),N.removed.push(X))}(N.added.length||N.removed.length)&&this.emit("update",N),U.Z.pool.release(C),J.clear(),N.added.length=0,N.removed.length=0}}},72720:(He,Pe,g)=>{"use strict";g.d(Pe,{aV:()=>he,S1:()=>X,os:()=>q,st:()=>Y,yR:()=>ne});var D,E=g(32995),T=g(67087),w=g(28191),Z=g(53661),x=g(95409),se=g(39717),V=g(98687),W=g(60754),A=g(16563),U=g(73326),N=g(18100),J=g(88684),Q=g(9497),k=(g(83382),g(20891)),z=g(70425),C=g(72902);let F=D=class extends A.Z{writeLevels(fe,_e,de){for(const Oe in fe)return void(_e.stops=this.levels[Oe])}clone(){return new D({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,C.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,C.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(fe=>fe.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:(0,J.d9)(this.levels)})}};(0,N._)([(0,Q.Cb)()],F.prototype,"levels",void 0),(0,N._)([(0,z.c)("levels")],F.prototype,"writeLevels",null),F=D=(0,N._)([(0,k.j)("esri.views.2d.engine.LevelDependentSizeVariable")],F);const B=w.Z.getLogger("esri.views.2d.layers.support.clusterUtils");T.Z.add("esri-cluster-arcade-enabled",!0);const $=(0,T.Z)("esri-cluster-arcade-enabled"),X=(fe,_e,de,Oe,re)=>{const le=_e.clone();if(!ne(le))return le;if(le.authoringInfo||(le.authoringInfo=new W.Z),le.authoringInfo.isAutoGenerated=!0,"visualVariables"in le){const ce=(le.visualVariables||[]).filter(Te=>"$view.scale"!==Te.valueExpression),ve=q(ce);ce.forEach(Te=>{"rotation"===Te.type?Te.field?Te.field=ie(fe,Te.field,"avg_angle","number"):Te.valueExpression&&(Te.field=te(fe,Te.valueExpression,"avg_angle","number"),Te.valueExpression=null):Te.normalizationField?(Te.field=ie(fe,Te.field,"avg_norm","number",Te.normalizationField),Te.normalizationField=null):Te.field?Te.field=ie(fe,Te.field,"avg","number"):Te.valueExpression&&(Te.field=te(fe,Te.valueExpression,"avg","number"),Te.valueExpression=null)}),(0,Z.Wi)(ve)&&!ae(ce)&&re&&(ce.push(he(de,Oe)),le.dynamicClusterSize=!0),le.visualVariables=ce}switch(le.type){case"simple":break;case"pie-chart":for(const ce of le.attributes)ce.field?ce.field=ie(fe,ce.field,"sum","number"):ce.valueExpression&&(ce.field=te(fe,ce.valueExpression,"sum","number"),ce.valueExpression=null);break;case"unique-value":le.field?le.field=ie(fe,le.field,"mode","string"):le.valueExpression&&(le.field=te(fe,le.valueExpression,"mode","string"),le.valueExpression=null);break;case"class-breaks":le.normalizationField?(le.field=ie(fe,le.field,"avg_norm","number",le.normalizationField),le.normalizationField=null):le.field?le.field=ie(fe,le.field,"avg","number"):le.valueExpression&&(le.field=te(fe,le.valueExpression,"avg","number"),le.valueExpression=null)}return le},q=fe=>{for(const _e of fe)if("size"===_e.type)return _e;return null};function Y(fe,_e,de){const Oe=fe.clone();let re=!1;if("visualVariables"in Oe){const le=(Oe.visualVariables||[]).filter(ve=>"$view.scale"!==ve.valueExpression),ce=q(le);(0,Z.Wi)(ce)&&(Oe.visualVariables||(Oe.visualVariables=[]),Oe.visualVariables.push(he(_e,de)),Oe.dynamicClusterSize=!0,re=!0)}return{renderer:Oe,didInject:re}}const ae=fe=>{for(const _e of fe)if("cluster_count"===_e.field)return!0;return!1},he=(fe,_e)=>{const de=[new U.Z({value:0,size:0}),new U.Z({value:1})];if((0,Z.Wi)(_e))return new A.Z({field:"cluster_count",stops:[...de,new U.Z({value:2,size:0})]});const Oe=Object.keys(_e).reduce((re,le)=>({...re,[le]:[...de,new U.Z({value:Math.max(2,_e[le].minValue),size:fe.clusterMinSize}),new U.Z({value:Math.max(3,_e[le].maxValue),size:fe.clusterMaxSize})]}),{});return new F({field:"cluster_count",levels:Oe})},ne=fe=>{const _e=de=>B.error(new E.Z("Unsupported-renderer",de,{renderer:fe}));switch(fe.type){case"unique-value":if(fe.field2||fe.field3)return _e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(fe.normalizationField){const de=fe.normalizationType;if("field"!==de)return _e(`FeatureReductionCluster does not support a normalizationType of ${de}`),!1}break;case"simple":case"pie-chart":break;default:return _e(`FeatureReductionCluster does not support renderers of type ${fe.type}`),!1}if(!$){if("valueExpression"in fe&&fe.valueExpression)return _e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in fe&&fe.visualVariables||[]).some(de=>!(!("valueExpression"in de)||!de.valueExpression)))return _e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function te(fe,_e,de,Oe){const re=(0,x.F)(_e),le="mode"===de?`cluster_type_${re}`:"sum"===de?`cluster_sum_${re}`:`cluster_avg_${re}`;return fe.some(ce=>ce.name===le)||fe.push(new se.Z({name:le,isAutoGenerated:!0,onStatisticExpression:new V.Z({expression:_e,returnType:Oe}),statisticType:de})),le}function ie(fe,_e,de,Oe,re){if("cluster_count"===_e||fe.some(ce=>ce.name===_e))return _e;const le=function ue(fe,_e,de){switch(fe){case"sum":return`cluster_sum_${_e}`;case"avg":case"avg_angle":return`cluster_avg_${_e}`;case"mode":return`cluster_type_${_e}`;case"avg_norm":{const Oe=de,re="field",le=_e.toLowerCase()+",norm:"+re+","+Oe.toLowerCase();return"cluster_avg_"+(0,x.F)(le)}}}(de,_e,re);return fe.some(ce=>ce.name===le)||fe.push(new se.Z("avg_norm"===de?{name:le,isAutoGenerated:!0,onStatisticExpression:new V.Z({expression:`$feature.${_e} / $feature.${re}`,returnType:Oe}),statisticType:"avg"}:{name:le,isAutoGenerated:!0,onStatisticField:_e,statisticType:de})),le}},21795:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>A});var E=g(18100),T=g(25764),w=g(6365),Z=g(9497),V=(g(83382),g(19420),g(20891));let W=class extends w.Z{constructor(){super(...arguments),this.color=new T.Z([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(U){return this.color.equals(U.color)&&(this.haloColor||this.color).equals(U.haloColor||U.color)&&this.haloOpacity===U.haloOpacity&&this.fillOpacity===U.fillOpacity}};(0,E._)([(0,Z.Cb)({type:T.Z})],W.prototype,"color",void 0),(0,E._)([(0,Z.Cb)({type:T.Z})],W.prototype,"haloColor",void 0),(0,E._)([(0,Z.Cb)()],W.prototype,"haloOpacity",void 0),(0,E._)([(0,Z.Cb)()],W.prototype,"fillOpacity",void 0),W=(0,E._)([(0,V.j)("esri.views.2d.support.HighlightOptions")],W);const A=W},86508:(He,Pe,g)=>{"use strict";g.d(Pe,{T:()=>T});class T{constructor(){this._names=new Map}begin(Z){this._names.has(Z)||(this._names.set(Z,!1),Z.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${Z}.Start`))}end(Z){this._names.has(Z)&&!this._names.get(Z)&&(this._names.set(Z,!0),performance.mark(`Esri.${Z}.End`))}record(Z){this._names.has(Z)||(this._names.set(Z,!0),performance.mark(`Esri.${Z}`))}}},22504:(He,Pe,g)=>{"use strict";var E=g(18100),T=g(6365),w=g(53661),Z=g(9497),V=(g(83382),g(19420),g(20891)),W=g(80775),A=g(67532);const N=new Set,J=[],Q=new Map,G=[0,0];let k=class extends T.Z{constructor(C){super(C),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:C,process:D}=this;this._queue=new A.e({concurrency:C,process:(F,B)=>{const $=this._keyToItem.get(F);return D($,{signal:B})},peeker:F=>F.values().next().value})}destroy(){this.clear(),this._queue=(0,w.SC)(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(C){this._queue.abort("string"==typeof C?C:C.id)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(C){return this._keyToItem.has("string"==typeof C?C:C.id)}isOngoing(C){const D="string"==typeof C?C:C.id;return this.has(D)&&this._queue.isOngoing(D)}pause(){this._queue.pause()}push(C,D){const F=C.key.id+"-"+D;if(this.has(F))return this.get(F);const B=this._queue.push(F),$=()=>{this._keyToItem.delete(F),this.notifyChange("updating")};return this._keyToItem.set(F,C),B.then($,$),this.notifyChange("updating"),B}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(C){if(!this.state)return C.values().next().value;const D=this.tileInfoView;let F=Number.NEGATIVE_INFINITY,B=Number.POSITIVE_INFINITY;C.forEach(he=>{const ne=this._keyToItem.get(he),ue=this.tileInfoView.getTileScale(ne.key);Q.has(ue)||(Q.set(ue,[]),F=Math.max(ue,F),B=Math.min(ue,B)),Q.get(ue).push(ne.key),N.add(ue)});let $=this.state.scale;Q.has($)||(function U(C,D){C.length=0,D.forEach(F=>C.push(F))}(J,N),J.sort((he,ne)=>he-ne),$=J.reduce((he,ne)=>Math.abs(ne-$)<Math.abs(he-$)?ne:he,J[0])),$=Math.min($,F),$=Math.max($,B);const X=Q.get($),q=D.getClosestInfoForScale($),Y=q.getColumnForX(this.state.center[0]),ae=q.getRowForY(this.state.center[1]);return X.sort((he,ne)=>{const ue=q.denormalizeCol(he.col,he.world),te=q.denormalizeCol(ne.col,ne.world);return Math.sqrt((Y-ue)*(Y-ue)+(ae-he.row)*(ae-he.row))-Math.sqrt((Y-te)*(Y-te)+(ae-ne.row)*(ae-ne.row))}),N.clear(),Q.clear(),X[0].id}_peekByCenterFirst(C){if(!this.state)return C.values().next().value;const D=this.tileInfoView,F=this.state.center;let B,$=Number.POSITIVE_INFINITY;return C.forEach(X=>{const q=this._keyToItem.get(X);D.getTileCoords(G,q.key);const Y=(0,W.d)(G,F);Y<$&&($=Y,B=q.key)}),B.id}};(0,E._)([(0,Z.Cb)({constructOnly:!0})],k.prototype,"concurrency",void 0),(0,E._)([(0,Z.Cb)({constructOnly:!0})],k.prototype,"process",void 0),(0,E._)([(0,Z.Cb)()],k.prototype,"state",void 0),(0,E._)([(0,Z.Cb)({constructOnly:!0})],k.prototype,"strategy",void 0),(0,E._)([(0,Z.Cb)({constructOnly:!0})],k.prototype,"tileInfoView",void 0),(0,E._)([(0,Z.Cb)({readOnly:!0})],k.prototype,"updating",null),k=(0,E._)([(0,V.j)("esri.views.2d.tiling.PagedTileQueue")],k)},97726:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>T});var E=g(5261);class T{constructor(){this.spans=[]}acquire(Z){this.lodInfo=Z}release(){this.lodInfo=null,this.spans.length=0}forEach(Z,x){const{spans:se,lodInfo:V}=this,{level:W}=V;if(0!==se.length)for(const{row:A,colFrom:U,colTo:N}of se)for(let J=U;J<=N;J++)Z.call(x,W,A,V.normalizeCol(J),V.getWorldForColumn(J))}}T.pool=new E.Z(T)},45396:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>k});var E=g(53492),T=g(53661),w=g(67026);function Z(z,C){return[z,C]}function x(z,C,D){return z[0]=C,z[1]=D,z}const V=new w.Z("0/0/0/0");class W{static create(C,D,F=null){const B=(0,E.C5)(C.spatialReference),$=D.origin||Z(C.origin.x,C.origin.y),X=Z(C.size[0]*D.resolution,C.size[1]*D.resolution),q=Z(-1/0,-1/0),Y=Z(1/0,1/0),ae=Z(1/0,1/0);(0,T.pC)(F)&&(x(q,Math.max(0,Math.floor((F.xmin-$[0])/X[0])),Math.max(0,Math.floor(($[1]-F.ymax)/X[1]))),x(Y,Math.max(0,Math.floor((F.xmax-$[0])/X[0])),Math.max(0,Math.floor(($[1]-F.ymin)/X[1]))),x(ae,Y[0]-q[0]+1,Y[1]-q[1]+1));const{cols:he,rows:ne}=D;let ue,te,ie,fe;return!F&&he&&ne&&(x(q,he[0],ne[0]),x(Y,he[1],ne[1]),x(ae,he[1]-he[0]+1,ne[1]-ne[0]+1)),C.isWrappable?(ue=Z(Math.ceil(Math.round((B.valid[1]-B.valid[0])/D.resolution)/C.size[0]),ae[1]),te=Z(Math.floor((B.origin[0]-$[0])/X[0]),q[1]),ie=Z(ue[0]+te[0]-1,Y[1]),fe=!0):(te=q,ie=Y,ue=ae,fe=!1),new W(D.level,D.resolution,D.scale,$,q,Y,ae,X,te,ie,ue,fe)}constructor(C,D,F,B,$,X,q,Y,ae,he,ne,ue){this.level=C,this.resolution=D,this.scale=F,this.origin=B,this.first=$,this.last=X,this.size=q,this.norm=Y,this.worldStart=ae,this.worldEnd=he,this.worldSize=ne,this.wrap=ue}normalizeCol(C){if(!this.wrap)return C;const D=this.worldSize[0];return C<0?D-1-Math.abs((C+1)%D):C%D}denormalizeCol(C,D){return this.wrap?this.worldSize[0]*D+C:C}getWorldForColumn(C){return this.wrap?Math.floor(C/this.worldSize[0]):0}getFirstColumnForWorld(C){return C*this.worldSize[0]+this.first[0]}getLastColumnForWorld(C){return C*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(C){return(C-this.origin[0])/this.norm[0]}getXForColumn(C){return this.origin[0]+C*this.norm[0]}getRowForY(C){return(this.origin[1]-C)/this.norm[1]}getYForRow(C){return this.origin[1]-C*this.norm[1]}getTileBounds(C,D,F=!1){V.set(D);const B=F?V.col:this.denormalizeCol(V.col,V.world),$=V.row;return function se(z,C,D,F,B){z[0]=C,z[1]=D,z[2]=F,z[3]=B}(C,this.getXForColumn(B),this.getYForRow($+1),this.getXForColumn(B+1),this.getYForRow($)),C}getTileCoords(C,D,F=!1){V.set(D);const B=F?V.col:this.denormalizeCol(V.col,V.world);return Array.isArray(C)?x(C,this.getXForColumn(B),this.getYForRow(V.row)):(C.x=this.getXForColumn(B),C.y=this.getYForRow(V.row)),C}}var A=g(97726);class U{constructor(C,D,F){this.row=C,this.colFrom=D,this.colTo=F}}const N=new w.Z("0/0/0/0");class J{static create(C,D){C[1]>D[1]&&([C,D]=[D,C]);const[F,B]=C,[$,X]=D,q=$-F,Y=X-B,ae=0!==Y?q/Y:0,he=(Math.ceil(B)-B)*ae,ne=(Math.floor(B)-B)*ae;return new J(F,Math.floor(B),Math.ceil(X),ae,q<0?he:ne,q<0?ne:he,q<0?$:F,q<0?F:$)}constructor(C,D,F,B,$,X,q,Y){this.x=C,this.ymin=D,this.ymax=F,this.invM=B,this.leftAdjust=$,this.rightAdjust=X,this.leftBound=q,this.rightBound=Y}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const Q=[[0,0],[0,0],[0,0],[0,0]];class k{constructor(C,D=null){this.tileInfo=C,this.fullExtent=D,this.scales=[],this._infoByScale={},this._infoByLevel={};const F=C.lods.slice();F.sort(($,X)=>X.scale-$.scale);const B=this._lodInfos=F.map($=>W.create(C,$,D));F.forEach(($,X)=>{this._infoByLevel[$.level]=B[X],this._infoByScale[$.scale]=B[X],this.scales[X]=$.scale},this),this._wrap=C.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(C){return this._infoByLevel["number"==typeof C?C:C.level]}getTileBounds(C,D,F=!1){N.set(D);const B=this._infoByLevel[N.level];return B?B.getTileBounds(C,N,F):C}getTileCoords(C,D,F=!1){N.set(D);const B=this._infoByLevel[N.level];return B?B.getTileCoords(C,N,F):C}getTileCoverage(C,D=192,F="closest"){const B="closest"===F?this.getClosestInfoForScale(C.scale):this.getSmallestInfoForScale(C.scale),$=A.Z.pool.acquire(B),X=this._wrap;let q,Y,ae,he=1/0,ne=-1/0;const ue=$.spans;Q[0][0]=Q[0][1]=Q[1][1]=Q[3][0]=-D,Q[1][0]=Q[2][0]=C.size[0]+D,Q[2][1]=Q[3][1]=C.size[1]+D;for(const _e of Q)C.toMap(_e,_e),_e[0]=B.getColumnForX(_e[0]),_e[1]=B.getRowForY(_e[1]);const te=[];let ie=3;for(let _e=0;_e<4;_e++){if(Q[_e][1]===Q[ie][1]){ie=_e;continue}const de=J.create(Q[_e],Q[ie]);he=Math.min(de.ymin,he),ne=Math.max(de.ymax,ne),void 0===te[de.ymin]&&(te[de.ymin]=[]),te[de.ymin].push(de),ie=_e}if(null==he||null==ne||ne-he>100)return null;let fe=[];for(q=he;q<ne;){null!=te[q]&&(fe=fe.concat(te[q])),Y=1/0,ae=-1/0;for(let _e=fe.length-1;_e>=0;_e--){const de=fe[_e];Y=Math.min(Y,de.getLeftCol()),ae=Math.max(ae,de.getRightCol())}if(Y=Math.floor(Y),ae=Math.floor(ae),q>=B.first[1]&&q<=B.last[1])if(X)if(B.size[0]<B.worldSize[0]){const _e=Math.floor(ae/B.worldSize[0]);for(let de=Math.floor(Y/B.worldSize[0]);de<=_e;de++)ue.push(new U(q,Math.max(B.getFirstColumnForWorld(de),Y),Math.min(B.getLastColumnForWorld(de),ae)))}else ue.push(new U(q,Y,ae));else Y>B.last[0]||ae<B.first[0]||(Y=Math.max(Y,B.first[0]),ae=Math.min(ae,B.last[0]),ue.push(new U(q,Y,ae)));q+=1;for(let _e=fe.length-1;_e>=0;_e--){const de=fe[_e];de.ymax>=q?de.incrRow():fe.splice(_e,1)}}return $}getTileParentId(C){N.set(C);const F=this._lodInfos.indexOf(this._infoByLevel[N.level])-1;return F<0?null:(this._getTileIdAtLOD(N,this._lodInfos[F],N),N.id)}getTileResolution(C){const D=this._infoByLevel["object"==typeof C?C.level:C];return D?D.resolution:-1}getTileScale(C){const D=this._infoByLevel[C.level];return D?D.scale:-1}intersects(C,D){N.set(D);const F=this._infoByLevel[N.level],B=C.lodInfo;if(B.resolution>F.resolution){this._getTileIdAtLOD(N,B,N);const X=B.denormalizeCol(N.col,N.world);for(const q of C.spans)if(q.row===N.row&&q.colFrom<=X&&q.colTo>=X)return!0}if(B.resolution<F.resolution){const[X,q,Y,ae]=C.spans.reduce((fe,_e)=>(fe[0]=Math.min(fe[0],_e.row),fe[1]=Math.max(fe[1],_e.row),fe[2]=Math.min(fe[2],_e.colFrom),fe[3]=Math.max(fe[3],_e.colTo),fe),[1/0,-1/0,1/0,-1/0]),he=F.denormalizeCol(N.col,N.world),ne=B.getColumnForX(F.getXForColumn(he)),ue=B.getRowForY(F.getYForRow(N.row)),te=B.getColumnForX(F.getXForColumn(he+1))-1,ie=B.getRowForY(F.getYForRow(N.row+1))-1;return!(ne>ae||te<Y||ue>q||ie<X)}const $=B.denormalizeCol(N.col,N.world);return C.spans.some(X=>X.row===N.row&&X.colFrom<=$&&X.colTo>=$)}normalizeBounds(C,D,F){if(C[0]=D[0],C[1]=D[1],C[2]=D[2],C[3]=D[3],this._wrap){const B=(0,E.C5)(this.tileInfo.spatialReference),$=-F*(B.valid[1]-B.valid[0]);C[0]+=$,C[2]+=$}return C}getSmallestInfoForScale(C){const D=this.scales;if(this._infoByScale[C])return this._infoByScale[C];if(C>D[0])return this._infoByScale[D[0]];for(let F=1;F<D.length-1;F++)if(C>D[F]+1e-6)return this._infoByScale[D[F-1]];return this._infoByScale[D[D.length-1]]}getClosestInfoForScale(C){const D=this.scales;return this._infoByScale[C]||(C=D.reduce((F,B)=>Math.abs(B-C)<Math.abs(F-C)?B:F,D[0])),this._infoByScale[C]}scaleToLevel(C){const D=this.scales;if(this._infoByScale[C])return this._infoByScale[C].level;for(let F=D.length-1;F>=0;F--)if(C<D[F])return F===D.length-1?this._infoByScale[D[D.length-1]].level:this._infoByScale[D[F]].level+(D[F]-C)/(D[F]-D[F+1]);return this._infoByScale[D[0]].level}scaleToZoom(C){return this.tileInfo.scaleToZoom(C)}_getTileIdAtLOD(C,D,F){const B=this._infoByLevel[F.level];return C.set(F),D.resolution<B.resolution?null:(D.resolution===B.resolution||(C.level=D.level,C.col=Math.floor(F.col*B.resolution/D.resolution+.01),C.row=Math.floor(F.row*B.resolution/D.resolution+.01)),C)}}},67026:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>T});var E=g(5261);class T{static getId(Z,x,se,V){return"object"==typeof Z?`${Z.level}/${Z.row}/${Z.col}/${Z.world}`:`${Z}/${x}/${se}/${V}`}constructor(Z,x,se,V){this.set(Z,x,se,V)}get key(){return this}get id(){return this.toString()}set id(Z){this.set(Z)}get hash(){return(3&this.world)<<30|(4095&this.col)<<22|(4095&this.row)<<8|63&this.level}acquire(Z,x,se,V){this.set(Z,x,se,V)}contains(Z){const x=Z.level-this.level;return x>=0&&this.row===Z.row>>x&&this.col===Z.col>>x&&this.world===Z.world}equals(Z){return this.level===Z.level&&this.row===Z.row&&this.col===Z.col&&this.world===Z.world}clone(){return new T(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(Z,x,se,V){if(null==Z)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof Z)this.level=Z.level||0,this.row=Z.row||0,this.col=Z.col||0,this.world=Z.world||0;else if("string"==typeof Z){const[W,A,U,N]=Z.split("/");this.level=parseFloat(W),this.row=parseFloat(A),this.col=parseFloat(U),this.world=parseFloat(N)}else this.level=+Z,this.row=+x,this.col=+se,this.world=+V||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new T(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const Z=this.level+1,x=this.row<<1,se=this.col<<1,V=this.world;return[new T(Z,x,se,V),new T(Z,x,se+1,V),new T(Z,x+1,se,V),new T(Z,x+1,se+1,V)]}compareRowMajor(Z){return this.row<Z.row?-1:this.row>Z.row?1:this.col<Z.col?-1:this.col>Z.col?1:0}}T.pool=new E.Z(T,null,null,25,50)},90026:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>z});var E=g(18100),T=g(6365),w=g(53661),Z=g(9497),V=(g(83382),g(19420),g(20891)),W=g(80775),A=g(67532);const N=new Set,J=[],Q=new Map,G=[0,0];let k=class extends T.Z{constructor(C){super(C),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:C,process:D,strategy:F}=this;this._queue=new A.e({concurrency:C,process:(B,$)=>{const X=this._keyToItem.get(B);return D(X,{signal:$})},peeker:"scale-first"===F?B=>this._peekByScaleFirst(B):B=>this._peekByCenterFirst(B)})}destroy(){this.clear(),this._queue=(0,w.SC)(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(C){this._queue.abort("string"==typeof C?C:C.id)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(C){return this._keyToItem.has("string"==typeof C?C:C.id)}isOngoing(C){const D="string"==typeof C?C:C.id;return this.has(D)&&this._queue.isOngoing(D)}pause(){this._queue.pause()}push(C){const D=C.key.id;if(this._queue.has(D))return this._queue.get(D);const F=this._queue.push(D),B=()=>{this._keyToItem.delete(D),this.notifyChange("updating")};return this._keyToItem.set(D,C),F.then(B,B),this.notifyChange("updating"),F}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(C){if(!this.state)return C.values().next().value;const D=this.tileInfoView;let F=Number.NEGATIVE_INFINITY,B=Number.POSITIVE_INFINITY;C.forEach(he=>{const ne=this._keyToItem.get(he),ue=this.tileInfoView.getTileScale(ne.key);Q.has(ue)||(Q.set(ue,[]),F=Math.max(ue,F),B=Math.min(ue,B)),Q.get(ue).push(ne.key),N.add(ue)});let $=this.state.scale;Q.has($)||(function U(C,D){C.length=0,D.forEach(F=>C.push(F))}(J,N),J.sort((he,ne)=>he-ne),$=J.reduce((he,ne)=>Math.abs(ne-$)<Math.abs(he-$)?ne:he,J[0])),$=Math.min($,F),$=Math.max($,B);const X=Q.get($),q=D.getClosestInfoForScale($),Y=q.getColumnForX(this.state.center[0]),ae=q.getRowForY(this.state.center[1]);return X.sort((he,ne)=>{const ue=q.denormalizeCol(he.col,he.world),te=q.denormalizeCol(ne.col,ne.world);return Math.sqrt((Y-ue)*(Y-ue)+(ae-he.row)*(ae-he.row))-Math.sqrt((Y-te)*(Y-te)+(ae-ne.row)*(ae-ne.row))}),N.clear(),Q.clear(),X[0].id}_peekByCenterFirst(C){if(!this.state)return C.values().next().value;const D=this.tileInfoView,F=this.state.center;let B,$=Number.POSITIVE_INFINITY;return C.forEach(X=>{const q=this._keyToItem.get(X);D.getTileCoords(G,q.key);const Y=(0,W.d)(G,F);Y<$&&($=Y,B=q.key)}),B.id}};(0,E._)([(0,Z.Cb)({constructOnly:!0})],k.prototype,"concurrency",void 0),(0,E._)([(0,Z.Cb)({constructOnly:!0})],k.prototype,"process",void 0),(0,E._)([(0,Z.Cb)()],k.prototype,"state",void 0),(0,E._)([(0,Z.Cb)({constructOnly:!0})],k.prototype,"strategy",void 0),(0,E._)([(0,Z.Cb)({constructOnly:!0})],k.prototype,"tileInfoView",void 0),(0,E._)([(0,Z.Cb)({readOnly:!0})],k.prototype,"updating",null),k=(0,E._)([(0,V.j)("esri.views.2d.tiling.TileQueue")],k);const z=k},58988:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>N});var E=g(6848),T=g(80775);class w{constructor(Q,G,k){this.maxSize=Q,this._tileInfoView=G,this._removedFunc=k,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(Q){return this._tilePerId.has(Q)}get(Q){return this._tilePerId.get(Q)}pop(Q){const G=this._tilePerId.get(Q);if(!G)return;const z=this._tileKeysPerLevel[G.key.level];Z(this._tilePerId,Q);for(let C=0;C<z.length;C++)if(z[C].id===Q){z.splice(C,1);break}return G.visible=!0,G}add(Q){Q.visible=!1;const G=Q.key,k=G.id;if(this._tilePerId.has(k))return;this._tilePerId.set(k,Q);const z=G.level;this._tileKeysPerLevel[z]||(this._tileKeysPerLevel[z]=[]),this._tileKeysPerLevel[z].push(G)}prune(Q,G,k){let z=this._tilePerId.size;if(z<=this.maxSize)return;let C=this._tileKeysPerLevel.length-1;for(;z>this.maxSize&&C>=0;)C!==Q&&(z=this._pruneAroundCenterTile(z,G,k,C)),C--;z>this.maxSize&&(z=this._pruneAroundCenterTile(z,G,k,Q))}_pruneAroundCenterTile(Q,G,k,z){const C=this._tileKeysPerLevel[z];if(!C||0===C.length)return Q;const{size:D,origin:F}=this._tileInfoView.tileInfo,B=k*D[0],$=k*D[1],X=[0,0],q=[0,0];for(C.sort((Y,ae)=>(X[0]=F.x+B*(Y.col+.5),X[1]=F.y-$*(Y.row+.5),q[0]=F.x+B*(ae.col+.5),q[1]=F.y-$*(ae.row+.5),(0,T.k)(X,G)-(0,T.k)(q,G)));C.length>0;){const Y=C.pop();if(this._removeTile(Y.id),--Q===this.maxSize)break}return Q}_removeTile(Q){const G=this._tilePerId.get(Q);this._removedFunc&&G&&this._removedFunc(G),Z(this._tilePerId,Q)}}function Z(J,Q){J.delete(Q)}var x=g(97726);const V=new(g(67026).Z)(0,0,0,0),W=new Map,A=[],U=[];class N{constructor(Q){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=Q.acquireTile,this.releaseTile=Q.releaseTile,this.tileInfoView=Q.tileInfoView,this.resampling=null==Q.resampling||!!Q.resampling,Q.cachePolicy&&(this.cachePolicy=Q.cachePolicy),Q.coveragePolicy&&(this.coveragePolicy=Q.coveragePolicy),null!=Q.buffer&&(this.buffer=Q.buffer),Q.cacheSize&&(this._tileCache=new w(Q.cacheSize,this.tileInfoView,G=>{this.releaseTile(G)}))}destroy(){this.tileIndex.clear()}update(Q){const{resampling:G,tileIndex:k}=this,z=this.tileInfoView.getTileCoverage(Q.state,this.buffer,this.coveragePolicy);if(U.length=0,A.length=0,W.clear(),!z)return;const{minScale:C,maxScale:D}=this.tileInfoView.tileInfo,{spans:F,lodInfo:B}=z,{level:$}=B,{scale:X,center:q,resolution:Y}=Q.state,ae=!Q.stationary&&X>this._previousScale;if(this._previousScale=X,this.tiles.length=0,!G&&(X>C||X<D))return this.tiles.length=0,W.clear(),k.forEach(te=>{this.releaseTile(te)}),k.clear(),U.length=0,A.length=0,W.clear(),x.Z.pool.release(z),!0;k.forEach(te=>te.visible=!0);let he=0,ne=0;if(F.length>0)for(const{row:te,colFrom:ie,colTo:fe}of F)for(let _e=ie;_e<=fe;_e++){he++;const de=V.set($,te,B.normalizeCol(_e),B.getWorldForColumn(_e)).id;if(k.has(de)){const Oe=k.get(de);Oe.isReady?(W.set(de,Oe),ne++):ae||this._addParentTile(de,W)}else{let Oe;if(this._tileCache&&this._tileCache.has(de)){if(Oe=this._tileCache.pop(de),this.tileIndex.set(de,Oe),Oe.isReady){W.set(de,Oe),ne++;continue}}else Oe=this.acquireTile(V),this.tileIndex.set(de,Oe);ae||this._addParentTile(de,W)}}const ue=ne===he;k.forEach((te,ie)=>{if(V.set(ie),W.has(ie))return;const fe=this.tileInfoView.intersects(z,V),_e="purge"===this.cachePolicy?V.level!==$:V.level>$;!fe||!ae&&ue?!_e&&fe||A.push(ie):te.isReady?_e&&"purge"===this.cachePolicy&&this._hasReadyAncestor(V,$)?A.push(ie):U.push(ie):_e&&A.push(ie)});for(const te of U){const ie=k.get(te);ie&&ie.isReady&&W.set(te,ie)}for(const te of A){const ie=k.get(te);this._tileCache?this._tileCache.add(ie):this.releaseTile(ie),k.delete(te)}return W.forEach(te=>this.tiles.push(te)),k.forEach(te=>{W.has(te.key.id)||(te.visible=!1)}),this._tileCache&&this._tileCache.prune($,q,Y),x.Z.pool.release(z),W.clear(),ue}clear(Q=!0){const{tileIndex:G}=this;Q&&G.forEach(k=>{this.releaseTile(k)}),G.clear()}updateCacheSize(Q){this._tileCache&&(this._tileCache.maxSize=Q)}_addParentTile(Q,G){let k=Q,z=null;for(;k=this.tileInfoView.getTileParentId(k),k;)if(this.tileIndex.has(k)){if(z=this.tileIndex.get(k),z&&z.isReady){G.has(z.key.id)||G.set(z.key.id,z);break}}else if(this._tileCache&&this._tileCache.has(k)&&(z=this._tileCache.pop(k),this.tileIndex.set(k,z),z&&z.isReady)){G.has(z.key.id)||G.set(z.key.id,z);break}}_hasReadyAncestor(Q,G){const k=(0,E.Ue)();this.tileInfoView.getTileBounds(k,Q,!0);for(const z of this.tileIndex.values())if(z.isReady&&z.key.level>=G&&z.key.level<Q.level){const C=(0,E.Ue)();if(this.tileInfoView.getTileBounds(C,z.key,!0),(0,E.r3)(C,k))return!0}return!1}}},52978:(He,Pe,g)=>{"use strict";function E(x,se,V,W){const A=3*x,U=3*(V-x)-A,N=1-A-U,J=3*se,Q=3*(W-se)-J,G=1-J-Q;function k(F){return((N*F+U)*F+A)*F}function C(F){return(3*N*F+2*U)*F+A}return function(F,B=1e-6){return function z(F){return((G*F+Q)*F+J)*F}(function D(F,B){let $,X,q,Y,ae,he;for(q=F,he=0;he<8;he++){if(Y=k(q)-F,Math.abs(Y)<B)return q;if(ae=C(q),Math.abs(ae)<1e-6)break;q-=Y/ae}if($=0,X=1,q=F,q<$)return $;if(q>X)return X;for(;$<X;){if(Y=k(q),Math.abs(Y-F)<B)return q;F>Y?$=q:X=q,q=.5*(X-$)+$}return q}(F,B))}}g.d(Pe,{LI:()=>w,Qc:()=>Z,n_:()=>E});const T=/^cubic-bezier\((.*)\)/,w={};function Z(x){let se=w[x]||null;if(!se){const V=T.exec(x);if(V){const W=V[1].split(",").map(A=>parseFloat(A.trim()));4!==W.length||W.some(A=>isNaN(A))||(se=E.apply(E,W))}}return se}w.ease=E(.25,.1,.25,1),w.linear=E(0,0,1,1),w.easeIn=w["ease-in"]=E(.42,0,1,1),w.easeOut=w["ease-out"]=E(0,0,.58,1),w.easeInOut=w["ease-in-out"]=E(.42,0,.58,1)},63056:(He,Pe,g)=>{"use strict";g.d(Pe,{$H:()=>Je,Ck:()=>Se,Dq:()=>re,EK:()=>q,H4:()=>Ce,Hy:()=>Ue,JG:()=>ie,Jp:()=>me,L2:()=>we,Rb:()=>De,Rx:()=>rt,SI:()=>je,UZ:()=>Fe,Ue:()=>ue,YQ:()=>oe,bk:()=>_e,dI:()=>$e,gG:()=>Ke,ni:()=>fe,o2:()=>Ie,qf:()=>de,uG:()=>ce,ut:()=>ye});var E=g(71670),T=g(50231),w=g(97621),Z=g(53661),x=g(82769),se=g(33980),V=g(53072),W=g(7562),A=g(80775),U=g(83457),N=g(10465),J=g(70535),Q=g(35787),G=g(21789),k=g(68230),z=g(53492);const C=96,D=39.37,F=180/Math.PI;function B(Ne){return Ne.wkid?Ne:Ne.spatialReference||k.Z.WGS84}function $(Ne,qe){return qe.type?(0,A.s)(Ne,qe.x,qe.y):(0,A.c)(Ne,qe)}function X(Ne){return(0,x.c9)(Ne)}function q(Ne,qe){const ft=Math.max(1,qe[0]),Xe=Math.max(1,qe[1]);return Math.max(Ne.width/ft,Ne.height/Xe)*function ge(Ne){return(0,z.JY)(Ne)?X(Ne)*D*C:1}(Ne.spatialReference)}function Y(Ne,qe,ft,Xe){return ae.apply(this,arguments)}function ae(){return(ae=(0,E.Z)(function*(Ne,qe,ft,Xe){let dt,Qe;if(!Ne||Array.isArray(Ne)&&!Ne.length)return null;if(w.Z.isCollection(Ne)&&(Ne=Ne.toArray()),Array.isArray(Ne)&&Ne.length&&"object"==typeof Ne[0]){const ct=Ne.every(qt=>"attributes"in qt),_t=Ne.some(qt=>!qt.geometry);let Rt=Ne;if(ct&&_t&&qe&&qe.allLayerViews){const qt=new Map;for(const Wt of Ne){const as=Wt.layer,ys=qt.get(as)||[],bt=Wt.attributes[as.objectIdField];null!=bt&&ys.push(bt),qt.set(as,ys)}const rs=[];qt.forEach((Wt,as)=>{const ys=qe.allLayerViews.find(bt=>bt.layer.id===as.id);if(ys&&"queryFeatures"in ys){const bt=as.createQuery();bt.objectIds=Wt,bt.returnGeometry=!0,rs.push(ys.queryFeatures(bt))}});const ss=yield Promise.all(rs),vs=[];for(const Wt of ss)if(Wt&&Wt.features&&Wt.features.length)for(const as of Wt.features)(0,Z.pC)(as.geometry)&&vs.push(as.geometry);Rt=vs}for(const qt of Rt)Xe=yield Y(qt,qe,ft,Xe);return Xe}if(Array.isArray(Ne)&&2===Ne.length&&"number"==typeof Ne[0]&&"number"==typeof Ne[1])dt=new Q.Z(Ne);else if(Ne instanceof J.Z)dt=Ne;else if("geometry"in Ne)if(Ne.geometry)dt=Ne.geometry;else if(Ne.layer){const ct=Ne.layer,_t=qe.allLayerViews.find(Rt=>Rt.layer.id===ct.id);if(_t&&"queryFeatures"in _t){const Rt=ct.createQuery();Rt.objectIds=[Ne.attributes[ct.objectIdField]],Rt.returnGeometry=!0;const qt=yield _t.queryFeatures(Rt);dt=(0,Z.U2)(qt,"features",0,"geometry")}}if((0,Z.Wi)(dt)||(Qe="point"===dt.type?new N.Z({xmin:dt.x,ymin:dt.y,xmax:dt.x,ymax:dt.y,spatialReference:dt.spatialReference}):dt.extent,!Qe))return null;(0,G.kR)()||(0,G.Up)(Qe.spatialReference,ft)||(yield(0,G.zD)());const ot=(0,G.iV)(Qe,ft);return ot?Xe=Xe?Xe.union(ot):ot:null})).apply(this,arguments)}function ne(Ne,qe){return(0,z.fS)(B(Ne),qe)?Ne:(0,G.iV)(Ne,qe)}function ue(Ne,qe){return te.apply(this,arguments)}function te(){return(te=(0,E.Z)(function*(Ne,qe){if(!Ne||!qe)return new T.Z({targetGeometry:new Q.Z,scale:0,rotation:0});let ft=qe.spatialReference;const{constraints:Xe,padding:dt,viewpoint:Qe,size:ot}=qe,ct=[dt?ot[0]-dt.left-dt.right:ot[0],dt?ot[1]-dt.top-dt.bottom:ot[1]];let _t=null;Ne instanceof T.Z?_t=Ne:Ne.viewpoint?_t=Ne.viewpoint:Ne.target&&"esri.Viewpoint"===Ne.target.declaredClass&&(_t=Ne.target);let Rt=null;_t&&_t.targetGeometry?Rt=_t.targetGeometry:Ne instanceof N.Z?Rt=Ne:(Ne||Ne&&("center"in Ne||"extent"in Ne||"target"in Ne))&&(Rt=(yield Y(Ne.center,qe,ft))||(yield Y(Ne.extent,qe,ft))||(yield Y(Ne.target,qe,ft))||(yield Y(Ne,qe,ft))),!Rt&&Qe&&Qe.targetGeometry?Rt=Qe.targetGeometry:!Rt&&qe.extent&&(Rt=qe.extent),ft||(ft=B(qe.spatialReference||qe.extent||Rt)),(0,G.kR)()||(0,z.fS)(Rt.spatialReference,ft)||(0,G.Up)(Rt,ft)||(yield(0,G.zD)());const qt=ne(Rt.center?Rt.center:Rt,ft);let rs=0;if(_t&&(0,Z.pC)(_t.targetGeometry)&&"point"===_t.targetGeometry.type)rs=_t.scale;else if("scale"in Ne&&Ne.scale)rs=Ne.scale;else if("zoom"in Ne&&-1!==Ne.zoom&&Xe&&Xe.effectiveLODs)rs=Xe.zoomToScale(Ne.zoom);else if(Array.isArray(Rt)||"point"===Rt.type||"extent"===Rt.type&&0===Rt.width&&0===Rt.height){const as=ne(qe.extent,ft);rs=(0,Z.pC)(as)?q(as,ct):qe.extent?q(qe.extent,ct):Qe.scale}else rs=q(ne(Rt.extent,ft),ct);const ss=function he(Ne){if(Ne&&(!Array.isArray(Ne)||"number"!=typeof Ne[0])&&("object"==typeof Ne||Array.isArray(Ne)&&"object"==typeof Ne[0])){if("layer"in Ne&&Ne.layer&&Ne.layer.minScale&&Ne.layer.maxScale){const qe=Ne.layer;return{min:qe.minScale,max:qe.maxScale}}if(Array.isArray(Ne)&&Ne.length&&Ne.every(qe=>"layer"in qe)){let qe=0,ft=0;for(const Xe of Ne){const dt=Xe.layer;dt&&dt.minScale&&dt.maxScale&&(qe=dt.minScale<qe?dt.minScale:qe,ft=dt.maxScale>ft?dt.maxScale:ft)}return qe&&ft?{min:qe,max:ft}:null}}}(Ne);ss&&(ss.min&&ss.min>rs?rs=ss.min:ss.max&&ss.max<rs&&(rs=ss.max));let vs=0;_t?vs=_t.rotation:Ne.hasOwnProperty("rotation")?vs=Ne.rotation:Qe&&(vs=Qe.rotation);let Wt=new T.Z({targetGeometry:qt,scale:rs,rotation:vs});return Xe&&(Wt=Xe.fit(Wt),Xe.constrainByGeometry(Wt),Xe.rotationEnabled||(Wt.rotation=vs)),Wt})).apply(this,arguments)}function ie(Ne,qe){const ft=Ne.targetGeometry,Xe=qe.targetGeometry;return ft.x=Xe.x,ft.y=Xe.y,ft.spatialReference=Xe.spatialReference,Ne.scale=qe.scale,Ne.rotation=qe.rotation,Ne}function fe(Ne,qe,ft){return ft?(0,A.s)(Ne,.5*(qe[0]-ft.right+ft.left),.5*(qe[1]-ft.bottom+ft.top)):(0,A.b)(Ne,qe,.5)}const _e=function(){const Ne=(0,U.a)();return function(qe,ft,Xe){const dt=ft.targetGeometry;$(Ne,dt);const Qe=.5*ce(ft);return qe.xmin=Ne[0]-Qe*Xe[0],qe.ymin=Ne[1]-Qe*Xe[1],qe.xmax=Ne[0]+Qe*Xe[0],qe.ymax=Ne[1]+Qe*Xe[1],qe.spatialReference=dt.spatialReference,qe}}();function de(Ne,qe,ft,Xe,dt){return Ie(Ne,qe,ft.center),Ne.scale=q(ft,Xe),dt&&dt.constraints&&dt.constraints.constrain(Ne),Ne}const re=function(){const Ne=(0,U.a)();return function(qe,ft,Xe){return(0,A.e)(qe,function Ae(Ne,qe){return(0,A.b)(Ne,qe,.5)}(qe,ft),fe(Ne,ft,Xe))}}(),le=function(){const Ne=(0,W.c)(),qe=(0,U.a)();return function(ft,Xe,dt,Qe){const ot=ce(Xe),ct=Te(Xe);return(0,A.s)(qe,ot,ot),(0,V.f)(Ne,qe),(0,V.r)(Ne,Ne,ct),(0,V.t)(Ne,Ne,re(qe,dt,Qe)),(0,V.t)(Ne,Ne,[0,Qe.top-Qe.bottom]),(0,A.s)(ft,Ne[4],Ne[5])}}();function ce(Ne){return Ne.scale*function ve(Ne){return(0,Z.pC)(Ne)&&(0,z.JY)(Ne.spatialReference)?1/(X(Ne.spatialReference)*D*C):1}(Ne.targetGeometry)}function Te(Ne){return(0,se.t)(Ne.rotation)||0}const De=function(){const Ne=(0,U.a)(),qe=(0,U.a)(),ft=(0,U.a)();return function(Xe,dt,Qe,ot,ct,_t){return(0,A.n)(Ne,dt),(0,A.b)(qe,Qe,.5*_t),(0,A.s)(ft,1/ot*_t,-1/ot*_t),(0,V.a)(Xe,qe),ct&&(0,V.r)(Xe,Xe,ct),(0,V.s)(Xe,Xe,ft),(0,V.t)(Xe,Xe,Ne),Xe}}(),Se=function(){const Ne=(0,U.a)();return function(qe,ft,Xe,dt){const Qe=ce(ft),ot=Te(ft);return $(Ne,ft.targetGeometry),De(qe,Ne,Xe,Qe,ot,dt)}}(),me=function(){const Ne=(0,U.a)();return function(qe,ft,Xe,dt){const Qe=ce(ft);return $(Ne,ft.targetGeometry),De(qe,Ne,Xe,Qe,0,dt)}}();function ye(Ne){const qe=(0,z.C5)(Ne);return qe?qe.valid[1]-qe.valid[0]:0}function we(Ne,qe){return Math.round(ye(Ne)/qe)}const $e=function(){const Ne=(0,U.a)(),qe=(0,U.a)(),ft=[0,0,0];return function(Xe,dt,Qe){(0,A.a)(Ne,Xe,dt),(0,A.f)(Ne,Ne),(0,A.a)(qe,Xe,Qe),(0,A.f)(qe,qe),(0,A.g)(ft,Ne,qe);let ot=Math.acos((0,A.h)(Ne,qe)/((0,A.i)(Ne)*(0,A.i)(qe)))*F;return ft[2]<0&&(ot=-ot),isNaN(ot)&&(ot=0),ot}}(),Ce=function(){const Ne=(0,U.a)();return function(qe,ft,Xe,dt){const Qe=qe.targetGeometry;return ie(qe,ft),le(Ne,ft,Xe,dt),Qe.x+=Ne[0],Qe.y+=Ne[1],qe}}(),Ie=function(Ne,qe,ft){ie(Ne,qe);const Xe=Ne.targetGeometry;return Xe.x=ft.x,Xe.y=ft.y,Xe.spatialReference=ft.spatialReference,Ne},je=function(){const Ne=(0,U.a)();return function(qe,ft,Xe,dt,Qe){Qe||(Qe="center"),(0,A.e)(Ne,Xe,dt),(0,A.b)(Ne,Ne,.5);const ot=Ne[0],ct=Ne[1];switch(Qe){case"center":(0,A.s)(Ne,0,0);break;case"left":(0,A.s)(Ne,-ot,0);break;case"top":(0,A.s)(Ne,0,ct);break;case"right":(0,A.s)(Ne,ot,0);break;case"bottom":(0,A.s)(Ne,0,-ct);break;case"top-left":(0,A.s)(Ne,-ot,ct);break;case"bottom-left":(0,A.s)(Ne,-ot,-ct);break;case"top-right":(0,A.s)(Ne,ot,ct);break;case"bottom-right":(0,A.s)(Ne,ot,-ct)}return rt(qe,ft,Ne),qe}}();function Je(Ne,qe,ft){return ie(Ne,qe),Ne.rotation+=ft,Ne}function oe(Ne,qe,ft){return ie(Ne,qe),Ne.rotation=ft,Ne}const be=function(){const Ne=(0,U.a)();return function(qe,ft,Xe,dt,Qe){return ie(qe,ft),isNaN(Xe)||0===Xe||(Ve(Ne,dt,ft,Qe),qe.scale=ft.scale*Xe,tt(Ne,Ne,qe,Qe),rt(qe,qe,(0,A.s)(Ne,Ne[0]-dt[0],dt[1]-Ne[1]))),qe}}();function Ue(Ne,qe,ft){return ie(Ne,qe),Ne.scale=ft,Ne}const Fe=function(){const Ne=(0,U.a)();return function(qe,ft,Xe,dt,Qe,ot){return ie(qe,ft),isNaN(Xe)||0===Xe||(Ve(Ne,Qe,ft,ot),qe.scale=ft.scale*Xe,qe.rotation+=dt,tt(Ne,Ne,qe,ot),rt(qe,qe,(0,A.s)(Ne,Ne[0]-Qe[0],Qe[1]-Ne[1]))),qe}}(),Ke=function(){const Ne=(0,U.a)(),qe=(0,U.a)();return function(ft,Xe,dt,Qe,ot,ct,_t){return re(qe,ct,_t),(0,A.j)(Ne,ot,qe),Qe?Fe(ft,Xe,dt,Qe,Ne,ct):be(ft,Xe,dt,Ne,ct)}}(),Ve=function(){const Ne=(0,W.c)();return function(qe,ft,Xe,dt){return(0,A.t)(qe,ft,function Oe(Ne,qe,ft,Xe){return Se(Ne,qe,ft,Xe),(0,V.c)(Ne,Ne)}(Ne,Xe,dt,1))}}(),tt=function(){const Ne=(0,W.c)();return function(qe,ft,Xe,dt){return(0,A.t)(qe,ft,Se(Ne,Xe,dt,1))}}(),rt=function(){const Ne=(0,U.a)(),qe=(0,W.c)();return function(ft,Xe,dt){ie(ft,Xe);const Qe=ce(Xe),ot=ft.targetGeometry;return(0,V.b)(qe,Te(Xe)),(0,V.s)(qe,qe,(0,U.f)(Qe,Qe)),(0,A.t)(Ne,dt,qe),ot.x+=Ne[0],ot.y+=Ne[1],ft}}()},56108:(He,Pe,g)=>{"use strict";var E,Z;g.d(Pe,{JY:()=>E}),(Z=E||(E={}))[Z.Global=1]="Global",Z[Z.Local=2]="Local"},15237:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>Z});var E=g(28191);class T{constructor(W,A=[]){this.eventType=W,this.keyModifiers=A}matches(W){if(W.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;const A=W.modifiers;for(const U of this.keyModifiers)if(!A.has(U))return!1;return!0}}const w=E.Z.getLogger("esri.views.input.InputHandler");class Z{constructor(W){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=W}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const W in this._incoming){const A=this._incoming[W];for(const U of A)this._incomingEventMatches.push(U.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(W=>W.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(W){this._manager?w.error("This InputHandler has already been registered with an InputManager"):(W.setEventCallback(A=>this._handleEvent(A)),W.setUninstallCallback(()=>this._onUninstall()),this._manager=W)}onUninstall(){}registerIncoming(W,A,U){let N;"function"==typeof A?(U=A,N=[]):N=A||[];const J="string"==typeof W?new T(W,N):W,Q=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},G=C=>{const D=this._incoming[C.match.eventType];if(D){const F=D.indexOf(C);D.splice(F,1),Q(),this._manager&&this._manager.updateDependencies()}},k=new x(J,U,{onPause:G,onRemove:G,onResume:C=>{const D=this._incoming[C.match.eventType];D&&!D.includes(C)&&(D.push(C),Q(),this._manager&&this._manager.updateDependencies())}});let z=this._incoming[J.eventType];return z||(z=[],this._incoming[J.eventType]=z),z.push(k),Q(),this._manager&&this._manager.updateDependencies(),k}registerOutgoing(W){if(this._outgoing[W])throw new Error("There is already a callback registered for this outgoing InputEvent: "+W);const A=new se(W,{onEmit:(U,N,J,Q)=>{this._manager?.emit(U.eventType,N,J,Q)},onRemove:U=>{delete this._outgoing[U.eventType],this._manager?.updateDependencies()}});return this._outgoing[W]=A,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),A}startCapturingPointer(W){this._manager?.setPointerCapture(W,!0)}stopCapturingPointer(W){this._manager?.setPointerCapture(W,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):w.error("This InputHandler is not registered with an InputManager")}_handleEvent(W){const A=this._incoming[W.type];if(A)for(const U of A)if(U.match.matches(W)&&(U.callback?.(W),W.shouldStopPropagation()))break}}class x{constructor(W,A,U){this.match=W,this._callback=A,this._handler=U}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class se{constructor(W,A){this.eventType=W,this._removed=!1,this._handler=A}emit(W,A,U){this._removed||this._handler.onEmit(this,W,A,U)}remove(){this._removed=!0,this._handler.onRemove(this)}}},88682:(He,Pe,g)=>{"use strict";g.d(Pe,{$:()=>D,f:()=>$});var E=g(18100),T=g(6365),w=g(28191),Z=g(53661),x=g(20834),se=g(9497),A=(g(83382),g(19420),g(20891)),U=g(16734),N=g(11225);class J{constructor(ae,he){this._owner=he,this._properties={},this._afterDispatchHandle=null;for(const ne in ae){const te=new U.e(ae[ne],void 0,void 0,2,2);this._properties[ne]={pool:te,acquired:[]}}this._afterDispatchHandle=(0,N.Fs)(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const ae in this._properties){const he=this._properties[ae];for(const ne of he.acquired)(0,N.NC)(ne)||he.pool.release(ne);he.pool.destroy(),he.pool=null,he.acquired=null}this._properties=null,this._owner=null}get(ae){const he=this._owner._get(ae),ne=this._properties[ae];let ue=ne.pool.acquire();for(ne.acquired.push(ue);ue===he;)ne.acquired.push(ue),ue=ne.pool.acquire();return ue}_release(){for(const ae in this._properties){const he=this._properties[ae];let ne=0;for(const ue of he.acquired)(0,N.NC)(ue)?he.acquired[ne++]=ue:he.pool.release(ue);he.acquired.length=ne}}}var Q=g(52010),G=g(15237);class k extends G.a{constructor(ae){super(!0),this._onChange=ae,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",he=>{this._update(he.data)})}_update(ae){const he="touch"===ae.native.pointerType?"touch":"mouse",{x:ne,y:ue}=ae;he===this._value&&this._x===ne&&this._y===ue||(this._value=he,this._x=ne,this._y=ue,this._onChange(he,ne,ue))}}var z=g(64540);class C extends G.a{get multiTouchActive(){return this._multiTouchActive.get()}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new z.f(!1),this._onPointerAdd=({data:ae})=>{"touch"===ae.pointerType&&(this._activeTouchPointerIds.add(ae.native.pointerId),this._update())},this._onPointerRemove=({data:ae})=>{"touch"===ae.pointerType&&(this._activeTouchPointerIds.delete(ae.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}}let D=class extends T.Z{constructor(Y){super(Y),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Q.CK,this._latestPointerType="mouse",this._propertiesPool=new J({latestPointerLocation:q},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const Y=Object.keys(this._nameToGroup);for(const ae of Y)this.uninstallHandlers(ae);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(Y=>Y.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(Y,ae,he=$.INTERNAL){if(this._nameToGroup[Y])return void w.Z.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+Y+"`");if(0===ae.length)return void w.Z.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const ne={name:Y,handlers:ae.map(ue=>({handler:ue,active:!0,removed:!1,priorityIndex:0,groupPriority:he,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[Y]=ne;for(let ue=ne.handlers.length-1;ue>=0;ue--){const te=ne.handlers[ue];this._handlers.push(te),te.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(ie,fe,_e,de,Oe)=>{this._emitInputEvent(te.priorityIndex+1,ie,fe,_e,Oe,de)},setPointerCapture:(ie,fe)=>{this._setPointerCapture(ne,te,ie,fe)},setEventCallback:ie=>{te.eventCallback=ie},setUninstallCallback:ie=>{te.uninstallCallback=ie},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(Y){const ae=this._nameToGroup[Y];ae?(ae.handlers.forEach(he=>{he.removed=!0,he.uninstallCallback?.()}),delete this._nameToGroup[Y],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):w.Z.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+Y+"`")}hasHandlers(Y){return void 0!==this._nameToGroup[Y]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const Y=new Set,ae=new Set;this._handlersPriority=[];for(let he=this._handlers.length-1;he>=0;he--){const ne=this._handlers[he];ne.priorityIndex=he,this._handlersPriority.push(ne)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let he=this._handlersPriority.length-1;he>=0;he--){const ne=this._handlersPriority[he];ne.priorityIndex=he;let ue=ne.handler.hasSideEffects;if(!ue)for(const te of ne.handler.outgoingEventTypes)if(Y.has(te)){ue=!0;break}if(ue)for(const te of ne.handler.incomingEventMatches){Y.add(te.eventType);for(const ie of te.keyModifiers)(0,Q.wj)(ie)||ae.add(ie)}ne.active=ue}this._sourceEvents=Y,this._keyModifiers=ae,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(Y,ae,he){this._latestPointerType=Y;const ne=this._get("latestPointerLocation");if((0,Z.Wi)(ne)||ne.x!==ae||ne.y!==he){const ue=this._propertiesPool.get("latestPointerLocation");ue.x=ae,ue.y=he,this._set("latestPointerLocation",ue)}}_onEventReceived(Y,ae){"pointer-capture-lost"===Y&&this._pointerCaptures.delete(ae.native.pointerId),this._updateKeyModifiers(Y,ae),this._emitInputEventFromSource(Y,ae,null!=this.test.timestamp?this.test.timestamp:ae.native?ae.native.timestamp:void 0,ae.native?ae.native.cancelable:void 0)}_updateKeyModifiers(Y,ae){if(!ae)return;let he=!1;const ne=()=>{if(!he){const ie=new Set;this._activeKeyModifiers.forEach(fe=>{ie.add(fe)}),this._activeKeyModifiers=ie,he=!0}},ue=(ie,fe)=>{fe&&!this._activeKeyModifiers.has(ie)?(ne(),this._activeKeyModifiers.add(ie)):!fe&&this._activeKeyModifiers.has(ie)&&(ne(),this._activeKeyModifiers.delete(ie))};if("key-down"===Y||"key-up"===Y){const ie=ae.key;this._keyModifiers.has(ie)&&ue(ie,"key-down"===Y)}const te=ae.native;ue("Alt",!(!te||!te.altKey)),ue("Ctrl",!(!te||!te.ctrlKey)),ue("Shift",!(!te||!te.shiftKey)),ue("Meta",!(!te||!te.metaKey)),ue("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new k((Y,ae,he)=>this._setLatestPointer(Y,ae,he)),this._multiTouchHandler=new C,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],$.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,$.INTERNAL)}_setPointerCapture(Y,ae,he,ne){const ue=Y.name+"-"+ae.priorityIndex,te=this._pointerCaptures.get(he.pointerId)||new Set;this._pointerCaptures.set(he.pointerId,te),ne?(te.add(ue),1===te.size&&this.eventSource&&this.eventSource.setPointerCapture(he,!0)):te.has(ue)&&(te.delete(ue),0===te.size&&(this._pointerCaptures.delete(he.pointerId),this.eventSource&&this.eventSource.setPointerCapture(he,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(Y=>!Y.removed),this.updateDependencies()}_emitInputEventFromSource(Y,ae,he,ne){this._emitInputEvent(0,Y,ae,he,ne)}_emitInputEvent(Y,ae,he,ne,ue,te){const ie=void 0!==ne?ne:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),_e={event:new F(ae,he,ie,te||this._activeKeyModifiers,void 0!==ue&&ue),priorityIndex:Y};this._currentPropagation?this._currentPropagation.events.push(_e):this._doNewPropagation(_e)}_doNewPropagation(Y){this._currentPropagation={events:new x.Z,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:Y.event.timestamp},this._currentPropagation.events.push(Y),this._continuePropagation()}_continuePropagation(){const Y=(0,Z.s3)(this._currentPropagation);for(;Y.events.length>0;){const{event:ae,priorityIndex:he}=Y.events.pop(),ne=ae.data&&ae.data.eventId;if(null==ne||!this._stoppedPropagationEventIds.has(ne))for(Y.currentHandler=this._handlersPriority[he];Y.currentHandler;){if(Y.currentHandler.removed)Y.needsHandlerGarbageCollect=!0;else{if(Y.currentHandler.active&&!ae.shouldStopPropagation()&&Y.currentHandler.eventCallback?.(ae),ae.shouldStopPropagation()){null!=ne&&this._stoppedPropagationEventIds.add(ne);break}if(ae.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:ae,priorityIndex:Y.currentHandler.priorityIndex+1})}Y.currentHandler=this._handlersPriority[Y.currentHandler.priorityIndex+1]}}Y.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(Y){const ae=new x.Z;ae.push(Y);const he=this._currentPropagation;if(he){for(;he.events.length;)ae.push(he.events.pop());he.events=ae,he.currentHandler=null}}_compareHandlerPriority(Y,ae){if(Y.handler.hasSideEffects!==ae.handler.hasSideEffects)return Y.handler.hasSideEffects?1:-1;if(Y.groupPriority!==ae.groupPriority)return Y.groupPriority>ae.groupPriority?-1:1;for(const he of Y.handler.incomingEventMatches)for(const ne of ae.handler.incomingEventMatches){if(he.eventType!==ne.eventType)continue;const ue=he.keyModifiers.filter(te=>ne.keyModifiers.includes(te));if(ue.length===he.keyModifiers.length!=(ue.length===ne.keyModifiers.length))return he.keyModifiers.length>ne.keyModifiers.length?-1:1}return Y.priorityIndex>ae.priorityIndex?-1:1}_sortHandlersPriority(Y){const ae=[];for(const he of Y){let ne=0;for(;ne<ae.length&&this._compareHandlerPriority(he,ae[ne])>=0;)ne++;ae.splice(ne,0,he)}return ae}get debug(){const Y=ae=>{const he=this._setPointerCapture;this._setPointerCapture=()=>{},ae(),this._setPointerCapture=he};return{injectEvent:(ae,he)=>{Y(()=>{this._onEventReceived(ae,he)})},disablePointerCapture:Y}}};(0,E._)([(0,se.Cb)({readOnly:!0})],D.prototype,"hasPendingInputs",null),(0,E._)([(0,se.Cb)({constructOnly:!0})],D.prototype,"eventSource",void 0),(0,E._)([(0,se.Cb)({constructOnly:!0})],D.prototype,"recognizers",void 0),(0,E._)([(0,se.Cb)()],D.prototype,"_latestPointerType",void 0),(0,E._)([(0,se.Cb)()],D.prototype,"latestPointerType",null),(0,E._)([(0,se.Cb)()],D.prototype,"multiTouchActive",null),(0,E._)([(0,se.Cb)({readOnly:!0})],D.prototype,"latestPointerLocation",void 0),D=(0,E._)([(0,A.j)("esri.views.input.InputManager")],D);class F{constructor(ae,he,ne,ue,te){this.type=ae,this.data=he,this.timestamp=ne,this.modifiers=ue,this.cancelable=te,this._propagationState=B.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=B.STOPPED}shouldStopPropagation(){return 0!=(this._propagationState&B.STOPPED)}async(ae){this._propagationState|=B.PAUSED;const he=(ne,ue)=>{this._propagationState&=~B.PAUSED;const te=this._resumeCallback;if(this._resumeCallback=null,te&&te(),ue)throw ne;return ne};return("function"==typeof ae?ae():ae).then(ne=>he(ne,!1),ne=>he(ne,!0))}shouldPausePropagation(ae){return!!(this._propagationState&B.PAUSED)&&(this._resumeCallback=ae,!0)}preventDefault(){this.data.native.preventDefault()}}var B,Y;(Y=B||(B={}))[Y.NONE=0]="NONE",Y[Y.STOPPED=1]="STOPPED",Y[Y.PAUSED=2]="PAUSED";const $={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},q=class X{}},52010:(He,Pe,g)=>{"use strict";g.d(Pe,{CK:()=>w,kK:()=>x,wj:()=>se});var E=g(83627);const w=(0,g(67087).Z)("mac")?"Meta":"Ctrl",Z={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let V=48;V<58;V++)Z[V]=String.fromCharCode(V);for(let V=1;V<25;V++)Z[111+V]=`F${V}`;for(let V=65;V<91;V++)Z[V]=[String.fromCharCode(V+32),String.fromCharCode(V)];function x(V){if(void 0!==V.key)return(0,E.kK)(V);const W=Z[V.keyCode];return Array.isArray(W)?V.shiftKey?W[1]:W[0]:W}function se(V){switch(V){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}},67532:(He,Pe,g)=>{"use strict";g.d(Pe,{e:()=>se});var E=g(53661),T=g(30801),w=g(20834),Z=g(91409);class x{constructor(W,A){this.item=W,this.controller=A,this.promise=null}}class se{constructor(W){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,W.concurrency&&(this.concurrency=W.concurrency),this._queue=new w.Z(W.peeker),this.process=W.process;const A=W.scheduler;W.priority&&(0,E.pC)(A)&&(this._task=A.registerTask(W.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(W){const A=this._controllers.get(W);A&&A.abort()}clear(){this._queue.clear();const W=[];this._controllers.forEach(A=>W.push(A)),this._controllers.clear(),W.forEach(A=>A.abort()),this._processingItems.clear(),this._cancelNext()}forEach(W){this._deferreds.forEach((A,U)=>W(U))}get(W){const A=this._deferreds.get(W);return A?A.promise:void 0}isOngoing(W){return this._processingItems.has(W)}has(W){return this._deferreds.has(W)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(W,A){const U=this.get(W);if(U)return U;const N=new AbortController;let J=null;A&&(J=(0,T.fu)(A,()=>N.abort()));const G=()=>{k.remove(),(0,E.pC)(J)&&J.remove(),this._deferreds.delete(W),this._controllers.delete(W),this._queue.remove(W),this._processingItems.delete(W),this._scheduleNext()},k=(0,T.$F)(N.signal,()=>{const C=this._processingItems.get(W);C&&C.controller.abort(),G(),z.reject((0,T.zE)())}),z=(0,T.dD)();return this._deferreds.set(W,z),this._controllers.set(W,N),z.promise.then(G,G),this._queue.push(W),this._scheduleNext(),z.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const W=[];this._processingItems.forEach(A=>W.push(A)),this._processingItems.clear();for(const A of W)this._queue.push(A.item),A.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const W=[];for(;this._queue.length;)W.push(this._queue.pop());return this.clear(),W}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(W){for(;!W.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),W.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=(0,Z.Os)(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(W,A){this._canProcessFulfillment(W)&&(this._scheduleNext(),this._deferreds.get(W.item).resolve(A))}_processError(W,A){this._canProcessFulfillment(W)&&(this._scheduleNext(),this._deferreds.get(W.item).reject(A))}_canProcessFulfillment(W){return!!this._deferreds.get(W.item)&&this._processingItems.get(W.item)===W}_process(W){if((0,E.Wi)(W))return;let A;const U=new AbortController,N=new x(W,U);this._processingItems.set(W,N);try{A=this.process(W,U.signal)}catch(J){this._processError(N,J)}(0,T.y8)(A)?(N.promise=A,A.then(J=>this._processResult(N,J),J=>this._processError(N,J))):this._processResult(N,A)}get test(){return{update:W=>this.runTask(W)}}}},81905:(He,Pe,g)=>{"use strict";g.d(Pe,{sq:()=>ve,T8:()=>Y,G5:()=>le});var E=g(40070),w=(g(67087),g(28191)),Z=g(53661),x=g(43701),se=g(22286),V=g(30801),W=g(7521),A=g(69354),U=g(64540);class N{constructor(){this._tasks=new Array,this._running=new U.f(!1)}get length(){return this._tasks.length}get running(){return this._running.get()}destroy(){this.cancelAll()}runTask(ge){for(;!ge.done&&this._process(ge);)ge.madeProgress()}push(ge,Ae,De){return this._running.set(!0),new Promise((Se,me)=>this._tasks.push(new J(Se,me,ge,Ae,De)))}unshift(ge,Ae,De){return this._running.set(!0),new Promise((Se,me)=>this._tasks.unshift(new J(Se,me,ge,Ae,De)))}_process(ge){if(0===this._tasks.length)return!1;const Ae=this._tasks.shift();try{const De=(0,V.Hc)(Ae.signal);if(De&&!Ae.abortCallback)Ae.reject((0,V.zE)());else{const Se=De?Ae.abortCallback?.((0,V.zE)()):Ae.callback(ge);(0,V.y8)(Se)?Se.then(Ae.resolve,Ae.reject):Ae.resolve(Se)}}catch(De){Ae.reject(De)}return this._running.set(this._tasks.length>0),!0}cancelAll(){const ge=(0,V.zE)();for(const Ae of this._tasks)if(Ae.abortCallback){const De=Ae.abortCallback(ge);Ae.resolve(De)}else Ae.reject(ge);this._tasks.length=0,this._running.set(!1)}}class J{constructor(ge,Ae,De,Se,me){this.resolve=ge,this.reject=Ae,this.callback=De,this.signal=Se,this.abortCallback=me}}var Q=g(18100),G=g(6365),k=g(9497),D=(g(83382),g(19420),g(20891));let F=class extends G.Z{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,Q._)([(0,k.Cb)()],F.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,Q._)([(0,k.Cb)()],F.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),F=(0,Q._)([(0,D.j)("esri.views.support.DebugFlags")],F);const B=new F;var $,Te,q,Y;(Te=$||($={}))[Te.ANIMATING=0]="ANIMATING",Te[Te.INTERACTING=1]="INTERACTING",Te[Te.IDLE=2]="IDLE",function(Te){Te[Te.YIELD=1]="YIELD"}(q||(q={})),function(Te){Te.RESOURCE_CONTROLLER_IMMEDIATE="immediate",Te.RESOURCE_CONTROLLER="schedule",Te.SLIDE="slide",Te.STREAM_DATA_LOADER="stream loader",Te.ELEVATION_QUERY="elevation query",Te.TERRAIN_SURFACE="terrain",Te.SURFACE_GEOMETRY_UPDATES="surface geometry updates",Te.LOD_RENDERER="LoD renderer",Te.GRAPHICS_CORE="Graphics3D",Te.I3S_CONTROLLER="I3S",Te.POINT_CLOUD_LAYER="point cloud",Te.FEATURE_TILE_FETCHER="feature fetcher",Te.OVERLAY="overlay",Te.STAGE="stage",Te.GRAPHICS_DECONFLICTOR="graphics deconflictor",Te.FILTER_VISIBILITY="Graphics3D filter visibility",Te.SCALE_VISIBILITY="Graphics3D scale visibility",Te.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",Te.POINT_OF_INTEREST_FREQUENT="POI frequent",Te.POINT_OF_INTEREST_INFREQUENT="POI infrequent",Te.LABELER="labeler",Te.FEATURE_QUERY_ENGINE="feature query",Te.FEATURE_TILE_TREE="feature tile tree",Te.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",Te.ELEVATION_ALIGNMENT="elevation alignment",Te.TEXT_TEXTURE_ATLAS="text texture atlas",Te.TEXTURE_UNLOAD="texture unload",Te.LINE_OF_SIGHT_TOOL="line of sight tool",Te.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",Te.ELEVATION_PROFILE="elevation profile",Te.SNAPPING="snapping",Te.SHADOW_ACCUMULATOR="shadow accumulator",Te.CLOUDS_GENERATOR="clouds generator",Te[Te.TEST_PRIO=1]="TEST_PRIO"}(Y||(Y={}));const he=new Map([[Y.RESOURCE_CONTROLLER_IMMEDIATE,0],[Y.RESOURCE_CONTROLLER,4],[Y.SLIDE,0],[Y.STREAM_DATA_LOADER,0],[Y.ELEVATION_QUERY,0],[Y.TERRAIN_SURFACE,1],[Y.SURFACE_GEOMETRY_UPDATES,1],[Y.LOD_RENDERER,2],[Y.GRAPHICS_CORE,2],[Y.I3S_CONTROLLER,2],[Y.POINT_CLOUD_LAYER,2],[Y.FEATURE_TILE_FETCHER,2],[Y.OVERLAY,4],[Y.STAGE,4],[Y.GRAPHICS_DECONFLICTOR,4],[Y.FILTER_VISIBILITY,4],[Y.SCALE_VISIBILITY,4],[Y.FRUSTUM_VISIBILITY,4],[Y.CLOUDS_GENERATOR,4],[Y.POINT_OF_INTEREST_FREQUENT,6],[Y.POINT_OF_INTEREST_INFREQUENT,30],[Y.LABELER,8],[Y.FEATURE_QUERY_ENGINE,8],[Y.FEATURE_TILE_TREE,16],[Y.FEATURE_TILE_TREE_ACTIVE,0],[Y.ELEVATION_ALIGNMENT,12],[Y.TEXT_TEXTURE_ATLAS,12],[Y.TEXTURE_UNLOAD,12],[Y.LINE_OF_SIGHT_TOOL,16],[Y.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[Y.SNAPPING,0],[Y.SHADOW_ACCUMULATOR,30]]);function ne(Te){return he.has(Te)?he.get(Te):"number"==typeof Te?Te:1}const ue=(0,A.HA)(6.5),te=(0,A.HA)(1),ie=(0,A.HA)(30),fe=(0,A.HA)(1e3/30),_e=(0,A.HA)(100);var Oe,re;(function(Te){Te.Scheduler=class ge{get updating(){return this._updating.get()}_updatingChanged(){this._updating.set(this._tasks.some(me=>me.needsUpdate))}constructor(){this._updating=new U.f(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new x.Z("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new De,this._state=$.INTERACTING,this._tasks=new se.Z,this._runQueue=new se.Z,this._load=0,this._idleStateCallbacks=new se.Z,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,W.YP)(()=>B.SCHEDULER_LOG_SLOW_TASKS,ye=>this._debug=ye,W.nn);for(const ye of Object.keys(Y))this.performanceInfo.tasks.set(Y[ye],new x.Z(Y[ye]));const me=this;this._test={FRAME_SAFETY_BUDGET:ue,INTERACTING_BUDGET:fe,IDLE_BUDGET:_e,get availableBudget(){return me._budget.budget},usedBudget:0,getBudget:()=>me._budget,setBudget:ye=>me._budget=ye,updateTask:ye=>this._updateTask(ye),getState:ye=>this._getState(ye),getRuntime:ye=>this._getRuntime(ye),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(me=>me.remove()),this._tasks.clear(),(0,Z.hw)(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(me){this._updatingChanged(),me&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(me,ye){const we=ne(me),$e=new Ae(this,me,ye,we);return this._tasks.push($e),this._updatingChanged(),this.performanceInfo.tasks.has(me)||this.performanceInfo.tasks.set(me,new x.Z(me)),$e}registerIdleStateCallbacks(me,ye){const we={idleBegin:me,idleEnd:ye};this._idleStateCallbacks.push(we),this.state===$.IDLE&&this._idleUpdatesStartFired&&we.idleBegin();const $e=this;return{remove:()=>this._removeIdleStateCallbacks(we),set idleBegin(Ce){$e._idleUpdatesStartFired&&(we.idleEnd(),$e._state===$.IDLE&&Ce()),we.idleBegin=Ce},set idleEnd(Ce){we.idleEnd=Ce}}}get load(){return this._load}set state(me){this._state!==me&&(this._state=me,this.state!==$.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(ye=>ye.idleEnd())))}get state(){return this._state}updateBudget(me){this._test.usedBudget=0,++this._frameNumber;let ye=ue,we=me.frameDuration,$e=te;switch(this.state){case $.IDLE:ye=(0,A.HA)(0),we=(0,A.HA)(Math.max(_e,me.frameDuration)),$e=ie;break;case $.INTERACTING:we=(0,A.HA)(Math.max(fe,me.frameDuration))}return we=(0,A.HA)(we-me.elapsedFrameTime-ye),this.state!==$.IDLE&&we<te&&!this._forceTask?(this._forceTask=!0,!1):(we=(0,A.HA)(Math.max(we,$e)),this._budget.reset(we,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case $.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(me=>me.idleBegin())),this._runIdle();break;case $.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset((0,A.HA)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(me){this._idleUpdatesStartFired&&me.idleEnd(),this._idleStateCallbacks.removeUnordered(me)}removeTask(me){this._tasks.removeUnordered(me),this._runQueue.removeUnordered(me),this._updatingChanged()}_updateTask(me){this._tasks.forAll(ye=>{ye.name===me&&ye.setPriority(me)})}_getState(me){if(this._runQueue.some(we=>we.name===me))return re.SCHEDULED;let ye=re.IDLE;return this._tasks.forAll(we=>{we.name===me&&we.needsUpdate&&(we.schedulePriority<=1?ye=re.READY:ye!==re.READY&&(ye=re.WAITING))}),ye}_getRuntime(me){let ye=0;return this._tasks.forAll(we=>{we.name===me&&(ye+=we.runtime)}),ye}_resetRuntimes(){this._tasks.forAll(me=>me.runtime=0)}_getRunning(){const me=new Map;if(this._tasks.forAll(we=>{we.needsUpdate&&me.set(we.name,(me.get(we.name)||0)+1)}),0===me.size)return null;let ye="";return me.forEach((we,$e)=>{ye+=we>1?` ${we}x ${$e}`:` ${$e}`}),ye}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const me=this._tasks.reduce((ye,we)=>we.needsUpdate?++ye:ye,0);this._load=.9*this._load+me*(1-.9)}_schedule(){for(this._runQueue.filterInPlace(me=>!!me.needsUpdate||(me.schedulePriority=me.basePriority,!1)),this._tasks.forAll(me=>{0===me.basePriority&&me.needsUpdate&&!this._runQueue.includes(me)&&me.blockFrame!==this._frameNumber&&this._runQueue.unshift(me)});0===this._runQueue.length;){let me=!1,ye=0;if(this._tasks.forAll(we=>{we.needsUpdate&&0!==we.schedulePriority&&0!==we.basePriority&&we.blockFrame!==this._frameNumber&&(me=!0,ye=Math.max(ye,we.basePriority),1===we.schedulePriority?(we.schedulePriority=0,this._runQueue.push(we)):--we.schedulePriority)}),!me)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const me=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const ye=this._budget.now(),we=this._runQueue.pop();this._budget.resetProgress();try{we.task.runTask(this._budget)===q.YIELD&&(we.blockFrame=this._frameNumber)}catch(Ce){w.Z.getLogger("esri.views.support.Scheduler").error(`Exception in task "${we.name}"`,Ce)}!this._budget.hasProgressed&&we.blockFrame!==this._frameNumber&&we.needsUpdate&&(we.blockFrame=this._frameNumber),we.schedulePriority=we.basePriority;const $e=this._budget.now()-ye;if(we.runtime+=$e,this._frameTaskTimes.set(we.priority,this._frameTaskTimes.get(we.priority)+$e),this._debug&&$e>2*this._budget.budget&&console.log("Task",we.name,"used",$e,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-me)}}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-me)}_startFrameTaskTimes(){for(const me of Object.keys(Y))this._frameTaskTimes.set(Y[me],0)}_recordFrameTaskTimes(me){this._frameTaskTimes.forEach((ye,we)=>this.performanceInfo.tasks.get(we).record(ye)),this.performanceInfo.total.record(me)}get test(){return this._test}};class Ae{get task(){return this._task.get()}get updating(){return this._queue.running}constructor(me,ye,we,$e){this._scheduler=me,this.name=ye,this._basePriority=$e,this.blockFrame=0,this.runtime=0,this._queue=new N,this._handles=new E.Z,this.schedulePriority=this._basePriority,this._task=new U.f((0,Z.pC)(we)?we:this._queue),this._handles.add((0,W.gx)(()=>this.task.running,Ce=>me.taskRunningChanged(Ce)))}remove(){this.processQueue(le),this._scheduler.removeTask(this),this.schedule=ve.schedule,this.reschedule=ve.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(me){this.name=me;const ye=ne(me);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=ye),this._basePriority=ye}get priority(){return this.name}set priority(me){this.setPriority(me)}get needsUpdate(){return this.updating||this.task.running}schedule(me,ye,we){return this._queue.push(me,ye,we)}reschedule(me,ye,we){return this._queue.unshift(me,ye,we)}processQueue(me){this._queue.runTask(me)}}class De{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=$.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(me){return!this.done&&(!0===me()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(me){this._enabled=me}reset(me,ye){this._begin=this.now(),this._budget=me,this._state=ye,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}Te.Budget=De})(Oe||(Oe={})),function(Te){Te.SCHEDULED="s",Te.READY="r",Te.WAITING="w",Te.IDLE="i"}(re||(re={}));const le=(()=>{const Te=new Oe.Budget;return Te.enabled=!1,Te})(),ve=new class ce{remove(){}processQueue(){}schedule(ge,Ae,De){try{if((0,V.Hc)(Ae)){const Se=(0,V.zE)();return De?Promise.resolve(De(Se)):Promise.reject(Se)}return(0,V.gx)(ge(le))}catch(Se){return Promise.reject(Se)}}reschedule(ge,Ae,De){return this.schedule(ge,Ae,De)}}},24465:(He,Pe,g)=>{"use strict";g.d(Pe,{LI:()=>z,RZ:()=>C,TT:()=>D,cv:()=>A,v8:()=>U}),g(67087);var T=g(93142),w=g(53661);function A(de,Oe,re){const{ctx:le,canvas:ce}=N(de,re),ve=le.getImageData(0,0,de.width,de.height),Te=function k(de,Oe){return de.toDataURL(ue[Oe.format],Oe.quality/100)}(ce,Oe);return J(ce),{dataUrl:Te,data:ve}}function U(de,Oe){const{ctx:re,canvas:le}=N(de,Oe),ce=re.getImageData(0,0,de.width,de.height);return J(le),ce}function N(de,Oe){const re=function Q(){return(0,w.Wi)(G)&&(G=document.createElement("canvas")),G}();Oe.premultipliedAlpha&&function ne(de){const Oe=de.data,re=Oe.length;for(let le=0;le<re;le+=4){const ce=Oe[le+3];if(255!==ce&&ce>0){const ve=255/ce;Oe[le+0]=Oe[le+0]*ve,Oe[le+1]=Oe[le+1]*ve,Oe[le+2]=Oe[le+2]*ve}}}(de),re.width=de.width,re.height=de.height;const le=re.getContext("2d",{willReadFrequently:!0});return le.putImageData(de,0,0),Oe.flipY&&function he(de){de.save(),de.globalCompositeOperation="copy",de.scale(1,-1),de.translate(0,-de.canvas.height),de.drawImage(de.canvas,0,0),de.restore()}(le),{ctx:le,canvas:re}}function J(de){de.width=0,de.height=0}let G=null;function z(de,Oe){const re=function ae(de){switch(de){case"png":case"jpg":case"jpeg":return de;default:return ie}}(de);return{format:re,quality:(0,T.uZ)(Oe??fe[re],0,100)}}function C(de,Oe){return Oe/Math.max(de[0],de[1])}function D(de,Oe,re,le=0,ce=0,ve=de.width-le,Te=de.height-ce,ge=!1){const{data:Ae}=de,{width:De,height:Se,data:me}=Oe,ye=ve/De,we=Te/Se,$e=Math.ceil(ye/2),Ce=Math.ceil(we/2),Ie=de.width;for(let je=0;je<Se;je++)for(let Je=0;Je<De;Je++){const oe=4*(Je+(ge?Se-je-1:je)*De);let be=0,Ue=0,Fe=0,Ke=0,Ve=0,tt=0;const rt=(je+.5)*we;for(let Ne=Math.floor(je*we);Ne<(je+1)*we;Ne++){const qe=Math.abs(rt-(Ne+.5))/Ce,ft=(Je+.5)*ye,Xe=qe*qe;for(let dt=Math.floor(Je*ye);dt<(Je+1)*ye;dt++){const Qe=Math.abs(ft-(dt+.5))/$e,ot=Math.sqrt(Xe+Qe*Qe);if(ot>=1)continue;let ct=2*ot*ot*ot-3*ot*ot+1;const _t=4*(le+dt+(ce+Ne)*Ie);tt+=ct*Ae[_t+3],Ue+=ct,!re&&Ae[_t+3]<255&&(ct=ct*Ae[_t+3]/255),Fe+=ct*Ae[_t],Ke+=ct*Ae[_t+1],Ve+=ct*Ae[_t+2],be+=ct}}me[oe]=Fe/be,me[oe+1]=Ke/be,me[oe+2]=Ve/be,me[oe+3]=tt/Ue}return Oe}const ue={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},ie="png",fe={png:100,jpg:98,jpeg:98}},86626:(He,Pe,g)=>{"use strict";g.d(Pe,{hc:()=>x});var E=g(53661),T=g(87652);let w,Z;function x(k){const z=(0,T.Sh)(k);for(;z.length>1;){const C=se(z.shift());if(C.available)return C}return se(z.shift())}function se(k){switch(k){case T.zO.WEBGL1:return function V(){return w||(w=function Q(){const k=new U,z=J(T.zO.WEBGL1,k);return(0,E.Wi)(z)||(k.supportsElementIndexUint=null!==z.getExtension("OES_element_index_uint"),k.supportsStandardDerivatives=null!==z.getExtension("OES_standard_derivatives"),k.supportsInstancedArrays=null!==z.getExtension("ANGLE_instanced_arrays"),k.supportsTextureFloat=null!==z.getExtension("OES_texture_float"),k.supportsTextureHalfFloat=null!==z.getExtension("OES_texture_half_float"),k.supportsColorBufferFloat=null!==z.getExtension("WEBGL_color_buffer_float"),k.supportsColorBufferFloatBlend=null!==z.getExtension("EXT_float_blend"),k.supportsColorBufferHalfFloat=null!==z.getExtension("EXT_color_buffer_half_float")),k}()),w}();case T.zO.WEBGL2:return function W(){return Z||(Z=function G(){const k=new N,z=J(T.zO.WEBGL2,k);return(0,E.Wi)(z)||(k.supportsColorBufferFloat=null!==z.getExtension("EXT_color_buffer_float"),k.supportsColorBufferFloatBlend=null!==z.getExtension("EXT_float_blend"),k.supportsColorBufferHalfFloat=k.supportsColorBufferFloat||null!==z.getExtension("EXT_color_buffer_half_float")),k}()),Z}()}}class A{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class U extends A{constructor(){super(...arguments),this.type=T.zO.WEBGL1}}class N extends A{constructor(){super(...arguments),this.type=T.zO.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function J(k,z){if(k===T.zO.WEBGL1&&typeof WebGLRenderingContext>"u"||k===T.zO.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const C=document.createElement("canvas");if(!C)return null;let D=(0,T.kr)(C,k,{failIfMajorPerformanceCaveat:!0});if((0,E.Wi)(D)&&(D=(0,T.kr)(C,k),(0,E.pC)(D)&&(z.majorPerformanceCaveat=!0)),(0,E.Wi)(D))return D;if(k===T.zO.WEBGL1){const B=D.getParameter(D.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(B){const $=parseFloat(B[1]);z.available=$>=.94}}else z.available=!0;z.maxTextureSize=D.getParameter(D.MAX_TEXTURE_SIZE),z.supportsVertexShaderSamplers=D.getParameter(D.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const F=D.getShaderPrecisionFormat(D.FRAGMENT_SHADER,D.HIGH_FLOAT);return F&&(z.supportsHighPrecisionFragment=F.precision>0),D}},87652:(He,Pe,g)=>{"use strict";g.d(Pe,{Sh:()=>x,kr:()=>V,sj:()=>Z,zO:()=>w});var w,N,E=g(67087),T=g(53661);function Z(N,J,Q={}){const G=x(N);for(;G.length>1;){const k=V(J,G.shift(),Q);if((0,T.pC)(k))return k}return function se(N,J,Q={}){if(!window.WebGLRenderingContext)return W(N,A),null;const G=V(N,J,Q);return(0,T.Wi)(G)&&W(N,U),G}(J,G.shift(),Q)}function x(N){const J=(0,E.Z)("esri-force-webgl");if(J===w.WEBGL1||J===w.WEBGL2)return[J];switch(N){case"2d":return(0,E.Z)("mac")&&(0,E.Z)("chrome")?[w.WEBGL1,w.WEBGL2]:[w.WEBGL2,w.WEBGL1];case"3d":return[w.WEBGL2,w.WEBGL1]}}function V(N,J,Q={}){const G=J===w.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let k=null;for(const z of G){try{k=N.getContext(z,Q)}catch{}if(k)break}return k}function W(N,J){const Q=N.parentNode;Q&&(Q.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+J+"</div></div></td></tr></table>")}(N=w||(w={}))[N.WEBGL1=1]="WEBGL1",N[N.WEBGL2=2]="WEBGL2";const A='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',U='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},7721:(He,Pe,g)=>{"use strict";g.d(Pe,{a:()=>T,b:()=>w});var E=g(83382);function T(Z){const x=(0,E.vU)(100*(1-Z));return Math.max(0,Math.min(x,100))}function w(Z){return Math.max(0,Math.min(1-Z/100,1))}},97946:(He,Pe,g)=>{"use strict";g.d(Pe,{Nw:()=>z});var E=g(32995),T=g(88684),w=g(53661),Z=g(44054),x=g(9106),se=g(63719);const V=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),W=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function G(C,D){"maxScale"in C&&(D.maxScale=(0,x.k)(C.maxScale)??void 0),"minScale"in C&&(D.minScale=(0,x.k)(C.minScale)??void 0)}function z(C,D,F){if(!("write"in C)||!C.write)return F&&F.messages&&F.messages.push(new E.Z("layer:unsupported",`Layers (${C.title}, ${C.id}) of type '${C.declaredClass}' cannot be persisted`,{layer:C})),null;if(function J(C,D){if(D.restrictedWebMapWriting){const F=function N(C){return"basemap"===C.layerContainerType?V:"operational-layers"===C.layerContainerType?W:null}(D);return!(0,w.pC)(F)||F.has(C.type)&&!(0,se.rQ)(C)}return!0}(C,F)){const B={};return C.write(B,F)?B:null}return(0,w.pC)(D)&&function k(C,D){if(function Q(C,D){if(D)if((0,se.rQ)(C)){const F=(0,Z.hS)("featureCollection.layers",D),B=F&&F[0]&&F[0].layerDefinition;B&&G(C,B)}else"stream"===C.type?G(C,D.layerDefinition=D.layerDefinition||{}):"group"!==C.type&&G(C,D)}(C,D),D&&("blendMode"in C&&(D.blendMode=C.blendMode,"normal"===D.blendMode&&delete D.blendMode),D.opacity=(0,x.k)(C.opacity)??void 0,D.title=C.title||"Layer",D.visibility=C.visible,"legendEnabled"in C&&"wmts"!==C.type))if((0,se.rQ)(C)){const F=D.featureCollection;F&&(F.showLegend=C.legendEnabled)}else D.showLegend=C.legendEnabled}(C,D=(0,T.d9)(D)),D}},85698:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>Ke});var E=g(71670),T=g(18100),Z=(g(25288),g(15079)),x=g(95442),se=g(83627),V=g(40070),A=(g(67087),g(88684)),U=g(28191),N=g(53661),J=g(99508),Q=g(30801),G=g(7521),k=g(28772),z=g(9497),C=g(36734),D=g(20891),F=g(64137),B=g(95781),$=g(79201);g(47508);const q={handleInterceptedEvent:(Ve,tt,rt,Ne)=>(Ve.scheduleRender(),tt.properties[`on${Ne.type}`].apply(tt.properties.bind||rt,[Ne]))},Y={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(Ve,tt,rt)=>{Ve.style[tt]=rt}},ue=(Ve,tt,rt=!1)=>{let Ne=Ve;return tt.forEach((qe,ft)=>{const Xe=Ne?.children?((Ve,tt)=>Ve.find(dt=>dt.domNode===qe))(Ne.children):void 0;rt&&!Xe&&ft!==tt.length-1||(Ne=Xe)}),Ne};var ie=g(80970),fe=g(7499);function _e(){const{classList:Ve}=document.body,tt=window.matchMedia("(prefers-color-scheme: dark)").matches,rt=()=>Ve.contains(fe.d)||Ve.contains(fe.a)&&tt?"dark":"light",Ne=Xe=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:Xe}})),qe=Xe=>{ft!==Xe&&Ne(Xe),ft=Xe};let ft=rt();Ne(ft),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Xe=>qe(Xe.matches?"dark":"light")),new MutationObserver(()=>qe(rt())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}!function de(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&("interactive"===document.readyState?_e():document.addEventListener("DOMContentLoaded",()=>_e(),{once:!0}))}();var re=g(74792),le=g(55050);let ce;ce="components/assets";var Te=g(60567),ge=g(91503);const Ae=new Set;var Ce,me=g(89010),ye=g(89400),we=g(92051),$e=g(59680);let je=0;function oe(Ve,tt){for(const rt in tt)null!=Ve[rt]&&("object"==typeof Ve[rt]&&"object"==typeof tt[rt]?oe(Ve[rt],tt?.[rt]):Ve[rt]=tt[rt]);return Ve}const be=(Ve=>{let tt;const rt={...q,...Ve},Ne=(Ve=>({...Y,...Ve}))(rt),qe=Ne.performanceLogger;let ft,Xe=!0,dt=!1;const Qe=[],ot=[],ct=(Rt,qt,rs)=>{let ss;Ne.eventHandlerInterceptor=(Wt,as,ys,bt)=>function(Ts){let nt;qe("domEvent",Ts);const mt=((Ve,tt)=>{const rt=[];for(;Ve&&Ve!==tt;)rt.push(Ve),Ve=Ve.parentNode;return rt})(Ts.currentTarget,ss.domNode),Tt=mt.some(Zt=>customElements.get(Zt?.tagName?.toLowerCase()));if(Ts.eventPhase!==Event.CAPTURING_PHASE&&Tt){const Zt=Ts.composedPath(),Kt=Zt.slice(Zt.indexOf(Ts.currentTarget),Zt.indexOf(ss.domNode)).filter(Vt=>Vt.getRootNode()===Vt.ownerDocument).reverse();nt=ue(ss.getLastRender(),Kt,!0)}else mt.reverse(),nt=ue(ss.getLastRender(),mt);let It;return nt&&(It=rt.handleInterceptedEvent(tt,nt,this,Ts)),qe("domEventProcessed",Ts),It},rt.postProcessProjectionOptions?.(Ne);const vs=rs();ss=Rt(qt,vs,Ne),Qe.push(ss),ot.push(rs),rt.afterFirstVNodeRendered&&rt.afterFirstVNodeRendered(ss,vs)};let _t=()=>{if(ft=void 0,Xe){Xe=!1,qe("renderStart",void 0);for(let Rt=0;Rt<Qe.length;Rt++){const qt=ot[Rt]();qe("rendered",void 0),Qe[Rt].update(qt),qe("patched",void 0)}qe("renderDone",void 0),Xe=!0}};return rt.modifyDoRenderImplementation&&(_t=rt.modifyDoRenderImplementation(_t,Qe,ot)),tt={renderNow:_t,scheduleRender:()=>{ft||dt||(ft=requestAnimationFrame(_t))},stop:()=>{ft&&(cancelAnimationFrame(ft),ft=void 0),dt=!0},resume:()=>{dt=!1,Xe=!0,tt.scheduleRender()},append:(Rt,qt)=>{ct($.v.append,Rt,qt)},insertBefore:(Rt,qt)=>{ct($.v.insertBefore,Rt,qt)},merge:(Rt,qt)=>{ct($.v.merge,Rt,qt)},replace:(Rt,qt)=>{ct($.v.replace,Rt,qt)},detach:Rt=>{for(let qt=0;qt<ot.length;qt++)if(ot[qt]===Rt)return ot.splice(qt,1),Qe.splice(qt,1)[0];throw new Error("renderFunction was not found")}},tt})({postProcessProjectionOptions(Ve){const tt=Ve.eventHandlerInterceptor,rt=/capture$/i;Ve.eventHandlerInterceptor=(Ne,qe,ft,Xe)=>{const dt=tt?.(Ne,qe,ft,Xe),Qe=rt.test(Ne);if(!((Ne=Ne.replace(rt,"")).toLowerCase()in ft)||Qe){const ot=Ne[2].toLowerCase()+Ne.slice(3),ct=qt=>dt?.call(ft,qt);ft.addEventListener(ot,ct,Qe);const _t=()=>ft.removeEventListener(ot,ct,Qe),Rt=Xe.afterRemoved;Xe.afterRemoved=qt=>{Rt?.(qt),_t()}}return dt}},handleInterceptedEvent(Ve,tt,rt,Ne){const{eventPhase:qe,type:ft}=Ne,Xe=qe===Event.CAPTURING_PHASE;let dt=`on${ft}${Xe?"capture":""}`;const Qe=tt.properties;(Qe&&dt in Qe||(dt=`on${ft[0].toUpperCase()}${ft.slice(1)}${Xe?"Capture":""}`,Qe&&dt in Qe))&&((0,me.Uy)(),Ve.scheduleRender(),Qe[dt].call(Qe.bind||rt,Ne))}});let Ue=!1,Fe=class extends((0,J.v)(x.Z.EventedAccessor)){constructor(Ve,tt){var rt;super(Ve,tt),rt=this,this._attached=!1,this._internalHandles=new V.Z,this._projector=be,this._readyForTrueRender=!1,this.iconClass="esri-icon-checkbox-unchecked",this.key=this,this._loadLocale=(0,Q.Ds)((0,E.Z)(function*(){if(rt._messageBundleProps&&rt._messageBundleProps.length){const Xe=yield(0,Q.as)(rt._messageBundleProps.map(function(){var dt=(0,E.Z)(function*({bundlePath:Qe,propertyName:ot}){let ct=yield(0,$e.ME)(Qe);rt.uiStrings&&Object.keys(rt.uiStrings)&&(ct=oe((0,A.d9)(ct),rt.uiStrings)),rt[ot]=ct});return function(Qe){return dt.apply(this,arguments)}}()));for(const dt of Xe)dt.error&&U.Z.getLogger(rt.declaredClass).error("widget-intl:locale-error",rt.declaredClass,dt.error)}yield rt.loadLocale()})),function ve(){(0,ie.YY)((0,le.hF)((0,re.V)("components/assets")))}();const Ne="esri-widget-uid-"+(0,k.D)(),qe=this.render.bind(this);this._trackingTarget=new B.M(()=>this.scheduleRender());const ft=()=>{if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:Ne,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const Xe=qe();let{properties:dt}=Xe;dt||(Xe.properties=dt={});let{key:Qe,styles:ot}=dt;Qe||(dt.key=Ne),ot||(dt.styles=ot={}),ot.display||(ot.display="");let ct=0;return Xe.children?.forEach(_t=>{if((0,Te.Z)(_t.vnodeSelector))return;let{properties:Rt}=_t;Rt||(_t.properties=Rt={}),Rt.key||(Rt.key=`${this.id}--${ct++}`)}),(0,Te.d)(this,Xe)};this.render=()=>{if(Ue)return ft();let Xe=(0,me.O9)(this)??null;if(Xe)return Xe;this._trackingTarget.clear(),Ue=!0;try{Xe=(0,F.LJ)(this._trackingTarget,ft)}catch(dt){throw console.error(dt),dt}finally{Ue=!1}return Xe&&(0,me.KF)(this,Xe),Xe},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),function De(Ve){Ae.add(Ve),Ve.finally(()=>Ae.delete(Ve))}(this._resourcesFetch)}normalizeCtorArgs(Ve,tt){const rt={...Ve};return tt&&(rt.container=tt),rt}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(Q.H9)}loadDependencies(){return(0,E.Z)(function*(){})()}loadLocale(){return(0,E.Z)(function*(){})()}destroy(){this.destroyed||((0,N.SC)(this._trackingTarget),(0,N.SC)(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,(0,me.w7)(this))}set container(Ve){this._get("container")||this._set("container",Ve)}castContainer(Ve){return(0,Z.L7)(Ve)}get domNode(){return this.container}set domNode(Ve){this.container=Ve}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+je++}set id(Ve){Ve&&this._set("id",Ve)}get label(){return this.declaredClass.split(".").pop()}set label(Ve){this._overrideIfSome("label",Ve)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(Ve){this._set("visible",Ve)}get[(Ce=ge.$,ge.r)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||((0,me.w7)(this),this._projector.scheduleRender())}classes(...Ve){return ye.Sh.apply(this,Ve)}renderNow(){(0,me.w7)(this),this._projector.renderNow()}_postInitialize(){var Ve=this;if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this._internalHandles.add((0,G.YP)(()=>this.viewModel,(rt,Ne)=>{Ne&&this._internalHandles.remove("delegated-events"),rt&&(0,se.vT)(rt)&&this._internalHandles.add(this._delegatedEventNames.map(qe=>(0,se.on)(rt,qe,ft=>{this.emit(qe,ft)})),"delegated-events")},G.nn)),this.postInitialize();const tt=function(){var rt=(0,E.Z)(function*(){yield Ve._loadLocale().catch(Q.H9),Ve.scheduleRender()});return function(){return rt.apply(this,arguments)}}();this._internalHandles.add([(0,we.qe)(tt),(0,G.YP)(()=>this.uiStrings,tt),(0,G.gx)(()=>this.container,rt=>{this.destroyed||this._attach(rt)},{initial:!0,once:!0})])}_attach(Ve){Ve&&(this._projector.merge(Ve,this.render),this._attached=!0)}_detach(Ve){this._attached&&(this._projector.detach(this.render),this._attached=!1),Ve?.parentNode?.removeChild(Ve)}};Fe[Ce]=!0,(0,T._)([(0,z.Cb)()],Fe.prototype,"_readyForTrueRender",void 0),(0,T._)([(0,z.Cb)({value:null})],Fe.prototype,"container",null),(0,T._)([(0,C.p)("container")],Fe.prototype,"castContainer",null),(0,T._)([(0,z.Cb)()],Fe.prototype,"iconClass",void 0),(0,T._)([(0,z.Cb)()],Fe.prototype,"id",null),(0,T._)([(0,z.Cb)()],Fe.prototype,"label",null),(0,T._)([(0,z.Cb)()],Fe.prototype,"renderable",null),(0,T._)([(0,z.Cb)()],Fe.prototype,"uiStrings",void 0),(0,T._)([(0,z.Cb)()],Fe.prototype,"viewModel",void 0),(0,T._)([(0,z.Cb)({value:!0})],Fe.prototype,"visible",null),(0,T._)([(0,z.Cb)()],Fe.prototype,"key",void 0),(0,T._)([(0,z.Cb)()],Fe.prototype,"children",void 0),(0,T._)([(0,z.Cb)()],Fe.prototype,"afterCreate",void 0),(0,T._)([(0,z.Cb)()],Fe.prototype,"afterUpdate",void 0),(0,T._)([(0,z.Cb)()],Fe.prototype,"afterRemoved",void 0),Fe=(0,T._)([(0,D.j)("esri.widgets.Widget")],Fe);const Ke=Fe},6408:(He,Pe,g)=>{"use strict";g.d(Pe,{h:()=>T});var E=g(89400);function T(){return function(x,se){if(!x[se])throw new TypeError(`Cannot auto bind undefined function '${se}'`);return{value:Z(x[se])}}}function Z(x){return function(se,...V){!function w(x){const se=x?.type;return x instanceof KeyboardEvent||"keyup"===se||"keydown"===se||"keypress"===se}(se)?x.call(this,se,...V):(0,E.pf)(se.key)&&(se.preventDefault(),se.stopPropagation(),se.target.click())}}},10432:(He,Pe,g)=>{"use strict";function E(T){return(w,Z)=>{w.hasOwnProperty("_messageBundleProps")||(w._messageBundleProps=w._messageBundleProps?w._messageBundleProps.slice():[]),w._messageBundleProps.push({bundlePath:T,propertyName:Z})}}g.d(Pe,{H:()=>E})},22609:(He,Pe,g)=>{"use strict";g.d(Pe,{u:()=>x});var E=g(60567),T=function(V){return{vnodeSelector:"",properties:void 0,children:void 0,text:V.toString(),domNode:null}},w=function(V,W){for(var A=0,U=V.length;A<U;A++){var N=V[A];Array.isArray(N)?w(N,W):null!=N&&!1!==N&&(N.hasOwnProperty("vnodeSelector")||(N=T(N)),W.push(N))}},Z=function(V,W){for(var A=[],U=2;U<arguments.length;U++)A[U-2]=arguments[U];if(1===A.length&&"string"==typeof A[0])return{vnodeSelector:V,properties:W||void 0,children:void 0,text:A[0],domNode:null};var N=[];return w(A,N),{vnodeSelector:V,properties:W||void 0,children:N,text:void 0,domNode:null}};function x(V,W,...A){return"function"!=typeof V||(0,E.Z)(V)?Z(V,W,...A):V(W,...A)}},60567:(He,Pe,g)=>{"use strict";g.d(Pe,{Z:()=>U,d:()=>se});var E=g(70120),T=g(91503);const w=[],Z={},x=new WeakMap;function se(N,J){let Q=J.children;if(Q&&Q.length)for(let k=0;k<Q.length;++k)Q[k]=se(N,Q[k]);else Q=w;const G=J.vnodeSelector;if(U(G)){const k=J.properties||Z,z=k.key||G;return{vnodeSelector:"div",properties:{key:z,afterCreate:V,afterUpdate:W,afterRemoved:A,parentWidget:N,widgetConstructor:G,widgetProperties:{...k,key:z,children:Q}},children:void 0,text:void 0,domNode:null}}return J}function V(N,J,Q,{parentWidget:G,widgetConstructor:k,widgetProperties:z}){const C=new k(z);C.container=N,x.set(N,C),C.afterCreate?.(C,N),G._internalHandles.add((0,E.kB)(()=>A(N)))}function W(N,J,Q,{widgetProperties:G}){const k=x.get(N);k&&(k.set(G),k.afterUpdate?.(k,N))}function A(N){const J=x.get(N);J&&(J.afterRemoved?.(J,N),J.destroy(),x.delete(N))}function U(N){return"function"==typeof N&&N[T.$]}},91503:(He,Pe,g)=>{"use strict";g.d(Pe,{$:()=>E,r:()=>T});const E=Symbol("widget"),T=Symbol("widget-test-data")},89010:(He,Pe,g)=>{"use strict";g.d(Pe,{KF:()=>Z,O9:()=>w,Uy:()=>T,w7:()=>x});const E=new Map;function T(){E.clear()}function w(se){return E.get(se)}function Z(se,V){E.set(se,V)}function x(se){E.delete(se)}},2404:(He,Pe,g)=>{"use strict";function Z(se){return se&&"function"==typeof se.render}function x(se){return se&&"function"==typeof se.postMixInProperties&&"function"==typeof se.buildRendering&&"function"==typeof se.postCreate&&"function"==typeof se.startup}g.d(Pe,{Qd:()=>Z,o:()=>x}),g(6408),g(22609),g(89400)},89400:(He,Pe,g)=>{"use strict";g.d(Pe,{Sh:()=>pt,vU:()=>Bt,pV:()=>et,pf:()=>fs,dZ:()=>jt,_q:()=>mr,w3:()=>Us,Yo:()=>At});var T={exports:{}},w={},Z={exports:{}},x={};function se(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var A=/javascript\s*\:/gim;x.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},x.getDefaultWhiteList=se,x.onAttr=function V(Le,wt,We){},x.onIgnoreAttr=function W(Le,wt,We){},x.safeAttrValue=function U(Le,wt){return A.test(wt)?"":wt};var J_trim=function(Le){return String.prototype.trim?Le.trim():Le.replace(/(^\s*)|(\s*$)/g,"")},J_trimRight=function(Le){return String.prototype.trimRight?Le.trimRight():Le.replace(/(\s*$)/g,"")},k=x;function C(Le){return null==Le}function F(Le){(Le=function D(Le){var wt={};for(var We in Le)wt[We]=Le[We];return wt}(Le||{})).whiteList=Le.whiteList||k.whiteList,Le.onAttr=Le.onAttr||k.onAttr,Le.onIgnoreAttr=Le.onIgnoreAttr||k.onIgnoreAttr,Le.safeAttrValue=Le.safeAttrValue||k.safeAttrValue,this.options=Le}F.prototype.process=function(Le){if(!(Le=(Le=Le||"").toString()))return"";var We=this.options,ke=We.whiteList,Et=We.onAttr,Ut=We.onIgnoreAttr,es=We.safeAttrValue;return function Q(Le,wt){";"!==(Le=J_trimRight(Le))[Le.length-1]&&(Le+=";");var We=Le.length,ke=!1,Et=0,Ut=0,es="";function is(){if(!ke){var $s=J_trim(Le.slice(Et,Ut)),As=$s.indexOf(":");if(-1!==As){var Gs=J_trim($s.slice(0,As)),nr=J_trim($s.slice(As+1));if(Gs){var Er=wt(Et,es.length,Gs,nr,$s);Er&&(es+=Er+"; ")}}}Et=Ut+1}for(;Ut<We;Ut++){var _s=Le[Ut];if("/"===_s&&"*"===Le[Ut+1]){var Zs=Le.indexOf("*/",Ut+2);if(-1===Zs)break;Et=(Ut=Zs+1)+1,ke=!1}else"("===_s?ke=!0:")"===_s?ke=!1:";"===_s?ke||is():"\n"===_s&&is()}return J_trim(es)}(Le,function(_s,Zs,$s,As,Gs){var nr=ke[$s],Er=!1;if(!0===nr?Er=nr:"function"==typeof nr?Er=nr(As):nr instanceof RegExp&&(Er=nr.test(As)),!0!==Er&&(Er=!1),As=es($s,As)){var wr,dr={position:Zs,sourcePosition:_s,source:Gs,isWhite:Er};if(Er)return C(wr=Et($s,As,dr))?$s+":"+As:wr;if(!C(wr=Ut($s,As,dr)))return wr}})};var B=F;!function(Le,wt){var We=x,ke=B;for(var Ut in(wt=Le.exports=function Et(es,is){return new ke(is).process(es)}).FilterCSS=ke,We)wt[Ut]=We[Ut]}(Z,Z.exports);var $={indexOf:function(Le,wt){var We,ke;if(Array.prototype.indexOf)return Le.indexOf(wt);for(We=0,ke=Le.length;We<ke;We++)if(Le[We]===wt)return We;return-1},forEach:function(Le,wt,We){var ke,Et;if(Array.prototype.forEach)return Le.forEach(wt,We);for(ke=0,Et=Le.length;ke<Et;ke++)wt.call(We,Le[ke],ke,Le)},trim:function(Le){return String.prototype.trim?Le.trim():Le.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(Le){var We=/\s|\n|\t/.exec(Le);return We?We.index:-1}},q=Z.exports.getDefaultWhiteList,Y=$;var he=new(0,Z.exports.FilterCSS);function fe(Le){return Le.replace(de,"&lt;").replace(Oe,"&gt;")}var de=/</g,Oe=/>/g,re=/"/g,le=/&quot;/g,ce=/&#([a-zA-Z0-9]*);?/gim,ve=/&colon;?/gim,Te=/&newline;?/gim,ge=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Ae=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,De=/u\s*r\s*l\s*\(.*/gi;function Se(Le){return Le.replace(re,"&quot;")}function me(Le){return Le.replace(le,'"')}function ye(Le){return Le.replace(ce,function(We,ke){return String.fromCharCode("x"===ke[0]||"X"===ke[0]?parseInt(ke.substr(1),16):parseInt(ke,10))})}function we(Le){return Le.replace(ve,":").replace(Te," ")}function $e(Le){for(var wt="",We=0,ke=Le.length;We<ke;We++)wt+=Le.charCodeAt(We)<32?" ":Le.charAt(We);return Y.trim(wt)}function Ce(Le){return $e(Le=we(Le=ye(Le=me(Le))))}function Ie(Le){return fe(Le=Se(Le))}w.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},w.getDefaultWhiteList=function ae(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},w.onTag=function ne(Le,wt,We){},w.onIgnoreTag=function ue(Le,wt,We){},w.onTagAttr=function te(Le,wt,We){},w.onIgnoreTagAttr=function ie(Le,wt,We){},w.safeAttrValue=function _e(Le,wt,We,ke){if(We=Ce(We),"href"===wt||"src"===wt){if("#"===(We=Y.trim(We)))return"#";if("http://"!==We.substr(0,7)&&"https://"!==We.substr(0,8)&&"mailto:"!==We.substr(0,7)&&"tel:"!==We.substr(0,4)&&"data:image/"!==We.substr(0,11)&&"ftp://"!==We.substr(0,6)&&"./"!==We.substr(0,2)&&"../"!==We.substr(0,3)&&"#"!==We[0]&&"/"!==We[0])return""}else if("background"===wt){if(ge.lastIndex=0,ge.test(We))return""}else if("style"===wt){if(Ae.lastIndex=0,Ae.test(We)||(De.lastIndex=0,De.test(We)&&(ge.lastIndex=0,ge.test(We))))return"";!1!==ke&&(We=(ke=ke||he).process(We))}return Ie(We)},w.escapeHtml=fe,w.escapeQuote=Se,w.unescapeQuote=me,w.escapeHtmlEntities=ye,w.escapeDangerHtml5Entities=we,w.clearNonPrintableCharacter=$e,w.friendlyAttrValue=Ce,w.escapeAttrValue=Ie,w.onIgnoreTagStripAll=function je(){return""},w.StripTagBody=function Je(Le,wt){"function"!=typeof wt&&(wt=function(){});var We=!Array.isArray(Le),Et=[],Ut=!1;return{onIgnoreTag:function(es,is,_s){if(function ke(es){return!!We||-1!==Y.indexOf(Le,es)}(es)){if(_s.isClosing){return Et.push([!1!==Ut?Ut:_s.position,_s.position+10]),Ut=!1,"[/removed]"}return Ut||(Ut=_s.position),"[removed]"}return wt(es,is,_s)},remove:function(es){var is="",_s=0;return Y.forEach(Et,function(Zs){is+=es.slice(_s,Zs[0]),_s=Zs[1]}),is+=es.slice(_s)}}},w.stripCommentTag=function oe(Le){for(var wt="",We=0;We<Le.length;){var ke=Le.indexOf("\x3c!--",We);if(-1===ke){wt+=Le.slice(We);break}wt+=Le.slice(We,ke);var Et=Le.indexOf("--\x3e",ke);if(-1===Et)break;We=Et+3}return wt},w.stripBlankChar=function be(Le){var wt=Le.split("");return(wt=wt.filter(function(We){var ke=We.charCodeAt(0);return!(127===ke||ke<=31&&10!==ke&&13!==ke)})).join("")},w.cssFilter=he,w.getDefaultCSSWhiteList=q;var Ue={},Fe=$;function Ke(Le){var We,wt=Fe.spaceIndex(Le);return We=Le.slice(1,-1===wt?-1:wt+1),"/"===(We=Fe.trim(We).toLowerCase()).slice(0,1)&&(We=We.slice(1)),"/"===We.slice(-1)&&(We=We.slice(0,-1)),We}function Ve(Le){return"</"===Le.slice(0,2)}var rt=/[^a-zA-Z0-9\\_:.-]/gim;function qe(Le,wt){for(;wt<Le.length;wt++){var We=Le[wt];if(" "!==We)return"="===We?wt:-1}}function ft(Le,wt){for(;wt<Le.length;wt++){var We=Le[wt];if(" "!==We)return"'"===We||'"'===We?wt:-1}}function Xe(Le,wt){for(;wt>0;wt--){var We=Le[wt];if(" "!==We)return"="===We?wt:-1}}function Qe(Le){return function dt(Le){return'"'===Le[0]&&'"'===Le[Le.length-1]||"'"===Le[0]&&"'"===Le[Le.length-1]}(Le)?Le.substr(1,Le.length-2):Le}Ue.parseTag=function tt(Le,wt,We){var ke="",Et=0,Ut=!1,es=!1,is=0,_s=Le.length,Zs="",$s="";e:for(is=0;is<_s;is++){var As=Le.charAt(is);if(!1===Ut){if("<"===As){Ut=is;continue}}else if(!1===es){if("<"===As){ke+=We(Le.slice(Et,is)),Ut=is,Et=is;continue}if(">"===As){ke+=We(Le.slice(Et,Ut)),Zs=Ke($s=Le.slice(Ut,is+1)),ke+=wt(Ut,ke.length,Zs,$s,Ve($s)),Et=is+1,Ut=!1;continue}if('"'===As||"'"===As)for(var Gs=1,nr=Le.charAt(is-Gs);""===nr.trim()||"="===nr;){if("="===nr){es=As;continue e}nr=Le.charAt(is-++Gs)}}else if(As===es){es=!1;continue}}return Et<Le.length&&(ke+=We(Le.substr(Et))),ke},Ue.parseAttr=function Ne(Le,wt){var We=0,ke=0,Et=[],Ut=!1,es=Le.length;function is(Gs,nr){if(!((Gs=(Gs=Fe.trim(Gs)).replace(rt,"").toLowerCase()).length<1)){var Er=wt(Gs,nr||"");Er&&Et.push(Er)}}for(var _s=0;_s<es;_s++){var As,Zs=Le.charAt(_s);if(!1!==Ut||"="!==Zs)if(!1===Ut||_s!==ke){if(/\s|\n|\t/.test(Zs)){if(Le=Le.replace(/\s|\n|\t/g," "),!1===Ut){if(-1===(As=qe(Le,_s))){is(Fe.trim(Le.slice(We,_s))),Ut=!1,We=_s+1;continue}_s=As-1;continue}if(-1===(As=Xe(Le,_s-1))){is(Ut,Qe(Fe.trim(Le.slice(We,_s)))),Ut=!1,We=_s+1;continue}}}else{if(-1===(As=Le.indexOf(Zs,_s+1)))break;is(Ut,Fe.trim(Le.slice(ke+1,As))),Ut=!1,We=(_s=As)+1}else Ut=Le.slice(We,_s),ke='"'===Le.charAt(We=_s+1)||"'"===Le.charAt(We)?We:ft(Le,_s+1)}return We<Le.length&&(!1===Ut?is(Le.slice(We)):is(Ut,Qe(Fe.trim(Le.slice(We))))),Fe.trim(Et.join(" "))};var ot=Z.exports.FilterCSS,ct=w,Rt=Ue.parseTag,qt=Ue.parseAttr,rs=$;function ss(Le){return null==Le}function ys(Le){(Le=function Wt(Le){var wt={};for(var We in Le)wt[We]=Le[We];return wt}(Le||{})).stripIgnoreTag&&(Le.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),Le.onIgnoreTag=ct.onIgnoreTagStripAll),Le.whiteList=Le.whiteList||Le.allowList?function as(Le){var wt={};for(var We in Le)Array.isArray(Le[We])?wt[We.toLowerCase()]=Le[We].map(function(ke){return ke.toLowerCase()}):wt[We.toLowerCase()]=Le[We];return wt}(Le.whiteList||Le.allowList):ct.whiteList,Le.onTag=Le.onTag||ct.onTag,Le.onTagAttr=Le.onTagAttr||ct.onTagAttr,Le.onIgnoreTag=Le.onIgnoreTag||ct.onIgnoreTag,Le.onIgnoreTagAttr=Le.onIgnoreTagAttr||ct.onIgnoreTagAttr,Le.safeAttrValue=Le.safeAttrValue||ct.safeAttrValue,Le.escapeHtml=Le.escapeHtml||ct.escapeHtml,this.options=Le,!1===Le.css?this.cssFilter=!1:(Le.css=Le.css||{},this.cssFilter=new ot(Le.css))}ys.prototype.process=function(Le){if(!(Le=(Le=Le||"").toString()))return"";var We=this.options,ke=We.whiteList,Et=We.onTag,Ut=We.onIgnoreTag,es=We.onTagAttr,is=We.onIgnoreTagAttr,_s=We.safeAttrValue,Zs=We.escapeHtml,$s=this.cssFilter;We.stripBlankChar&&(Le=ct.stripBlankChar(Le)),We.allowCommentTag||(Le=ct.stripCommentTag(Le));var As=!1;We.stripIgnoreTagBody&&(As=ct.StripTagBody(We.stripIgnoreTagBody,Ut),Ut=As.onIgnoreTag);var Gs=Rt(Le,function(nr,Er,dr,wr,wn){var pn={sourcePosition:nr,position:Er,isClosing:wn,isWhite:Object.prototype.hasOwnProperty.call(ke,dr)},Yr=Et(dr,wr,pn);if(!ss(Yr))return Yr;if(pn.isWhite){if(pn.isClosing)return"</"+dr+">";var Hn=function vs(Le){var wt=rs.spaceIndex(Le);if(-1===wt)return{html:"",closing:"/"===Le[Le.length-2]};var We="/"===(Le=rs.trim(Le.slice(wt+1,-1)))[Le.length-1];return We&&(Le=rs.trim(Le.slice(0,-1))),{html:Le,closing:We}}(wr),zt=ke[dr],br=qt(Hn.html,function(Xs,cr){var ir=-1!==rs.indexOf(zt,Xs),bs=es(dr,Xs,cr,ir);return ss(bs)?ir?(cr=_s(dr,Xs,cr,$s))?Xs+'="'+cr+'"':Xs:ss(bs=is(dr,Xs,cr,ir))?void 0:bs:bs});return wr="<"+dr,br&&(wr+=" "+br),Hn.closing&&(wr+=" /"),wr+">"}return ss(Yr=Ut(dr,wr,pn))?Zs(wr):Yr},Zs);return As&&(Gs=As.remove(Gs)),Gs};var bt=ys;!function(Le,wt){var We=w,ke=Ue,Et=bt;function Ut(is,_s){return new Et(_s).process(is)}(wt=Le.exports=Ut).filterXSS=Ut,wt.FilterXSS=Et,function(){for(var is in We)wt[is]=We[is];for(var _s in ke)wt[_s]=ke[_s]}(),function es(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}()&&(self.filterXSS=Le.exports)}(T,T.exports);var Kt,Vt,Ts=function(){function Le(wt,We){var Et,ke=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(Ut,es,is,_s){return"a"===Ut&&"href"===es||("img"===Ut||"source"===Ut)&&"src"===es?ke.sanitizeUrl(is):T.exports.safeAttrValue(Ut,es,is,_s)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"},wt&&!We?Et=wt:wt&&We?(Et=Object.create(this.arcgisFilterOptions),Object.keys(wt).forEach(function(Ut){"whiteList"===Ut?Et.whiteList=ke._extendObjectOfArrays([ke.arcgisWhiteList,wt.whiteList||{}]):Et[Ut]=wt[Ut]})):(Et=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=Et,this._xssFilter=new T.exports.FilterXSS(Et)}return Le.prototype.sanitize=function(wt,We){switch(void 0===We&&(We={}),typeof wt){case"number":return isNaN(wt)||!isFinite(wt)?null:wt;case"boolean":return wt;case"string":return this._xssFilter.process(wt);case"object":return this._iterateOverObject(wt,We);default:return We.allowUndefined&&typeof wt>"u"?void 0:null}},Le.prototype.sanitizeUrl=function(wt,We){var ke=(We??{}).isProtocolRequired,Et=void 0===ke||ke,Ut=this._trim(wt.substring(0,wt.indexOf(":"))),es="/"===wt,is=/^#/.test(wt),_s=Ut&&this.allowedProtocols.indexOf(Ut.toLowerCase())>-1;return es||is||_s?T.exports.escapeAttrValue(wt):Ut||Et?"":T.exports.escapeAttrValue("https://".concat(wt))},Le.prototype.sanitizeHTMLAttribute=function(wt,We,ke,Et){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(wt,We,ke,Et):T.exports.safeAttrValue(wt,We,ke,Et)},Le.prototype.validate=function(wt,We){void 0===We&&(We={});var ke=this.sanitize(wt,We);return{isValid:wt===ke,sanitized:ke}},Le.prototype.encodeHTML=function(wt){var We=this;return String(wt).replace(/[&<>"'\/]/g,function(ke){return We._entityMap[ke]})},Le.prototype.encodeAttrValue=function(wt){var We=/^[a-zA-Z0-9]$/;return String(wt).replace(/[\x00-\xFF]/g,function(ke,Et){return We.test(ke)?ke:"&#x".concat(Number(wt.charCodeAt(Et)).toString(16),";")})},Le.prototype._extendObjectOfArrays=function(wt){var We={};return wt.forEach(function(ke){Object.keys(ke).forEach(function(Et){We[Et]=Array.isArray(ke[Et])&&Array.isArray(We[Et])?We[Et].concat(ke[Et]):ke[Et]})}),We},Le.prototype._iterateOverObject=function(wt,We){var ke=this;void 0===We&&(We={});try{var Et=!1,Ut=void 0;if(Array.isArray(wt))Ut=wt.reduce(function(is,_s){var Zs=ke.validate(_s,We);return Zs.isValid?is.concat([_s]):(Et=!0,is.concat([Zs.sanitized]))},[]);else{if(!function(Le){if("object"!=typeof Le||null===Le||"[object Object]"!==Object.prototype.toString.call(Le))return!1;var wt=Object.getPrototypeOf(Le);if(null===wt)return!0;for(;null!==Object.getPrototypeOf(wt);)wt=Object.getPrototypeOf(wt);return Object.getPrototypeOf(Le)===wt}(wt))return We.allowUndefined&&typeof wt>"u"?void 0:null;Ut=Object.keys(wt).reduce(function(is,_s){var Zs=wt[_s],$s=ke.validate(Zs,We);return $s.isValid?is[_s]=Zs:(Et=!0,is[_s]=$s.sanitized),is},{})}return Et?Ut:wt}catch{return null}},Le.prototype._trim=function(wt){return String.prototype.trim?wt.trim():wt.replace(/(^\s*)|(\s*$)/g,"")},Le}(),nt=g(93113),It=(g(70120),g(67087),g(28191)),Zt=g(89010),ls=function(Le){Kt||function(Le){if("WebkitTransition"in Le.style)Kt="webkitTransitionEnd",Vt="webkitAnimationEnd";else{if(!("transition"in Le.style))throw new Error("Your browser is not supported!");Kt="transitionend",Vt="animationend"}}(Le)},ts=function(Le,wt){return void 0===wt&&(wt=Le+"-active"),function(We){ls(We);var ke=!1,Et=function(Ut){ke||(ke=!0,We.removeEventListener(Kt,Et),We.removeEventListener(Vt,Et),We.classList.remove(Le),We.classList.remove(wt))};We.classList.add(Le),We.addEventListener(Kt,Et),We.addEventListener(Vt,Et),requestAnimationFrame(function(){We.classList.add(wt)})}},ms=function(Le,wt){return void 0===wt&&(wt=Le+"-active"),function(We,ke){ls(We);var Et=!1,Ut=function(es){Et||(Et=!0,We.removeEventListener(Kt,Ut),We.removeEventListener(Vt,Ut),ke())};We.classList.add(Le),We.addEventListener(Kt,Ut),We.addEventListener(Vt,Ut),requestAnimationFrame(function(){We.classList.add(wt)})}};It.Z.getLogger("esri.widgets.support.widgetUtils");function pt(Le){const wt=nt.Z.acquire();for(let ke=0;ke<arguments.length;ke++){const Et=arguments[ke],Ut=typeof Et;if("string"===Ut)wt.push(Et);else if(Array.isArray(Et))wt.push.apply(wt,Et);else if("object"===Ut)for(const es in Et)Et[es]&&wt.push(es)}const We=wt.join(" ");return nt.Z.release(wt),We}function jt(Le){const wt=Le?.closest("[dir]");return null!==wt&&wt instanceof HTMLElement&&"rtl"===wt.dir||"rtl"===document.dir}function et(Le){this[Le.getAttribute("data-node-ref")]=null}function At(Le){this[Le.getAttribute("data-node-ref")]=Le}function Bt(Le,wt){return("enter"===Le?ts:ms)(wt)}(()=>{const Le=new Map;new ResizeObserver(We=>{(0,Zt.Uy)();for(const ke of We)Le.get(ke.target)?.(ke)})})();const cs=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce((Le,wt)=>(Le[wt]=[],Le),{}),Rs=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Us=new Ts({whiteList:cs,onTagAttr:(Le,wt,We)=>{const ke=`${wt}="${We}"`;if(Rs.includes(wt))return ke},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function mr(Le,wt){const We=Le.getBoundingClientRect(),ke=wt.getBoundingClientRect();(We.top+We.height>ke.top+ke.height||We.top<ke.top)&&Le.scrollIntoView({block:"end"})}function fs(Le){return"Enter"===Le||" "===Le}},7499:(He,Pe,g)=>{"use strict";g.d(Pe,{A:()=>re,C:()=>x,a:()=>T,b:()=>be,c:()=>Te,d:()=>w,e:()=>tt,g:()=>ge,h:()=>Ie,i:()=>Xe,j:()=>Je,r:()=>me,s:()=>qe,t:()=>Ne,u:()=>Se,v:()=>$e,w:()=>ie,x:()=>fe,y:()=>_e,z:()=>Oe});var E=g(71670);const T="calcite-mode-auto",w="calcite-mode-dark",x={autoMode:T,darkMode:w,lightMode:"calcite-mode-light",rtl:"calcite--rtl"};var se=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],V=se.join(","),W=typeof Element>"u",A=W?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,U=!W&&Element.prototype.getRootNode?function(Qe){return Qe.getRootNode()}:function(Qe){return Qe.ownerDocument},N=function(ot,ct,_t){var Rt=Array.prototype.slice.apply(ot.querySelectorAll(V));return ct&&A.call(ot,V)&&Rt.unshift(ot),Rt.filter(_t)},J=function Qe(ot,ct,_t){for(var Rt=[],qt=Array.from(ot);qt.length;){var rs=qt.shift();if("SLOT"===rs.tagName){var ss=rs.assignedElements(),Wt=Qe(ss.length?ss:rs.children,!0,_t);_t.flatten?Rt.push.apply(Rt,Wt):Rt.push({scopeParent:rs,candidates:Wt})}else{A.call(rs,V)&&_t.filter(rs)&&(ct||!ot.includes(rs))&&Rt.push(rs);var ys=rs.shadowRoot||"function"==typeof _t.getShadowRoot&&_t.getShadowRoot(rs),bt=!_t.shadowRootFilter||_t.shadowRootFilter(rs);if(ys&&bt){var Ts=Qe(!0===ys?rs.children:ys.children,!0,_t);_t.flatten?Rt.push.apply(Rt,Ts):Rt.push({scopeParent:rs,candidates:Ts})}else qt.unshift.apply(qt,rs.children)}}return Rt},Q=function(ot,ct){return ot.tabIndex<0&&(ct||/^(AUDIO|VIDEO|DETAILS)$/.test(ot.tagName)||ot.isContentEditable)&&isNaN(parseInt(ot.getAttribute("tabindex"),10))?0:ot.tabIndex},G=function(ot,ct){return ot.tabIndex===ct.tabIndex?ot.documentOrder-ct.documentOrder:ot.tabIndex-ct.tabIndex},k=function(ot){return"INPUT"===ot.tagName},q=function(ot){var ct=ot.getBoundingClientRect();return 0===ct.width&&0===ct.height},he=function(ot,ct){return!(ct.disabled||function(ot){return k(ot)&&"hidden"===ot.type}(ct)||function(ot,ct){var _t=ct.displayCheck,Rt=ct.getShadowRoot;if("hidden"===getComputedStyle(ot).visibility)return!0;var qt=A.call(ot,"details>summary:first-of-type");if(A.call(qt?ot.parentElement:ot,"details:not([open]) *"))return!0;if(_t&&"full"!==_t&&"legacy-full"!==_t){if("non-zero-area"===_t)return q(ot)}else{if("function"==typeof Rt){for(var ss=ot;ot;){var vs=ot.parentElement,Wt=U(ot);if(vs&&!vs.shadowRoot&&!0===Rt(vs))return q(ot);ot=ot.assignedSlot?ot.assignedSlot:vs||Wt===ot.ownerDocument?vs:Wt.host}ot=ss}if(function(ot){for(var ct,_t=U(ot).host,Rt=!!(null!==(ct=_t)&&void 0!==ct&&ct.ownerDocument.contains(_t)||ot.ownerDocument.contains(ot));!Rt&&_t;){var qt;Rt=!(null===(qt=_t=U(_t).host)||void 0===qt||!qt.ownerDocument.contains(_t))}return Rt}(ot))return!ot.getClientRects().length;if("legacy-full"!==_t)return!0}return!1}(ct,ot)||function(ot){return"DETAILS"===ot.tagName&&Array.prototype.slice.apply(ot.children).some(function(_t){return"SUMMARY"===_t.tagName})}(ct)||function(ot){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(ot.tagName))for(var ct=ot.parentElement;ct;){if("FIELDSET"===ct.tagName&&ct.disabled){for(var _t=0;_t<ct.children.length;_t++){var Rt=ct.children.item(_t);if("LEGEND"===Rt.tagName)return!!A.call(ct,"fieldset[disabled] *")||!Rt.contains(ot)}return!0}ct=ct.parentElement}return!1}(ct))},ne=function(ot,ct){return!(function(ot){return function(ot){return k(ot)&&"radio"===ot.type}(ot)&&!function(ot){if(!ot.name)return!0;var Rt,ct=ot.form||U(ot),_t=function(ss){return ct.querySelectorAll('input[type="radio"][name="'+ss+'"]')};if(typeof window<"u"&&typeof window.CSS<"u"&&"function"==typeof window.CSS.escape)Rt=_t(window.CSS.escape(ot.name));else try{Rt=_t(ot.name)}catch(rs){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",rs.message),!1}var qt=function(ot,ct){for(var _t=0;_t<ot.length;_t++)if(ot[_t].checked&&ot[_t].form===ct)return ot[_t]}(Rt,ot.form);return!qt||qt===ot}(ot)}(ct)||Q(ct)<0||!he(ot,ct))},ue=function(ot){var ct=parseInt(ot.getAttribute("tabindex"),10);return!!(isNaN(ct)||ct>=0)},te=function Qe(ot){var ct=[],_t=[];return ot.forEach(function(Rt,qt){var rs=!!Rt.scopeParent,ss=rs?Rt.scopeParent:Rt,vs=Q(ss,rs),Wt=rs?Qe(Rt.candidates):ss;0===vs?rs?ct.push.apply(ct,Wt):ct.push(ss):_t.push({documentOrder:qt,tabIndex:vs,item:Rt,isScope:rs,content:Wt})}),_t.sort(G).reduce(function(Rt,qt){return qt.isScope?Rt.push.apply(Rt,qt.content):Rt.push(qt.content),Rt},[]).concat(ct)},ie=function(ot,ct){var _t;return _t=(ct=ct||{}).getShadowRoot?J([ot],ct.includeContainer,{filter:ne.bind(null,ct),flatten:!1,getShadowRoot:ct.getShadowRoot,shadowRootFilter:ue}):N(ot,ct.includeContainer,ne.bind(null,ct)),te(_t)},fe=function(ot,ct){return(ct=ct||{}).getShadowRoot?J([ot],ct.includeContainer,{filter:he.bind(null,ct),flatten:!0,getShadowRoot:ct.getShadowRoot}):N(ot,ct.includeContainer,he.bind(null,ct))},_e=function(ot,ct){if(ct=ct||{},!ot)throw new Error("No node provided");return!1!==A.call(ot,V)&&ne(ct,ot)},de=se.concat("iframe").join(","),Oe=function(ot,ct){if(ct=ct||{},!ot)throw new Error("No node provided");return!1!==A.call(ot,de)&&he(ct,ot)};const re={getShadowRoot:!0};function Te(Qe){const _t=me(Qe,"[dir]");return _t?_t.getAttribute("dir"):"ltr"}function ge(Qe,ot,ct){const Rt=Qe.closest(`[${ot}]`);return Rt?Rt.getAttribute(ot):ct}function Ae(Qe){return Qe.getRootNode()}function De(Qe){return Qe.host||null}function Se(Qe,{selector:ot,id:ct}){return function _t(Rt){if(!Rt)return null;Rt.assignedSlot&&(Rt=Rt.assignedSlot);const qt=Ae(Rt),rs=ct?"getElementById"in qt?qt.getElementById(ct):null:ot?qt.querySelector(ot):null,ss=De(qt);return rs||(ss?_t(ss):null)}(Qe)}function me(Qe,ot){return function ct(_t){return _t?_t.closest(ot)||ct(De(Ae(_t))):null}(Qe)}function ye(Qe,ot){return we(Qe,ot)}function we(Qe,ot){if(!Qe)return;const ct=ot(Qe);if(void 0!==ct)return ct;const{parentNode:_t}=Qe;return we(_t instanceof ShadowRoot?_t.host:_t,ot)}function $e(Qe,ot){return!!ye(ot,ct=>ct===Qe||void 0)}function Ie(Qe){return je.apply(this,arguments)}function je(){return(je=(0,E.Z)(function*(Qe){if(Qe)return function Ce(Qe){return"function"==typeof Qe?.setFocus}(Qe)?Qe.setFocus():Qe.focus()})).apply(this,arguments)}function Je(Qe){(ie(Qe,re)[0]||Qe).focus()}const oe=":not([slot])";function be(Qe,ot,ct){ot&&!Array.isArray(ot)&&"string"!=typeof ot&&(ct=ot,ot=null);const _t=ot?Array.isArray(ot)?ot.map(Rt=>`[slot="${Rt}"]`).join(","):`[slot="${ot}"]`:oe;return ct?.all?function Fe(Qe,ot,ct){let _t=ot===oe?Ue(Qe,oe):Array.from(Qe.querySelectorAll(ot));_t=ct&&!1===ct.direct?_t:_t.filter(qt=>qt.parentElement===Qe),_t=ct?.matches?_t.filter(qt=>qt?.matches(ct.matches)):_t;const Rt=ct?.selector;return Rt?_t.map(qt=>Array.from(qt.querySelectorAll(Rt))).reduce((qt,rs)=>[...qt,...rs],[]).filter(qt=>!!qt):_t}(Qe,_t,ct):function Ke(Qe,ot,ct){let _t=ot===oe?Ue(Qe,oe)[0]||null:Qe.querySelector(ot);_t=ct&&!1===ct.direct||_t?.parentElement===Qe?_t:null,_t=ct?.matches?_t?.matches(ct.matches)?_t:null:_t;const Rt=ct?.selector;return Rt?_t?.querySelector(Rt):_t}(Qe,_t,ct)}function Ue(Qe,ot){return Qe?Array.from(Qe.children||[]).filter(ct=>ct?.matches(ot)):[]}function tt(Qe,ot,ct){return"string"==typeof ot&&""!==ot?ot:""===ot?Qe[ct]:void 0}function Ne(Qe){return(!!Qe).toString()}function qe(Qe){return!!function ft(Qe){return Qe.target.assignedElements({flatten:!0})}(Qe).length}function Xe(Qe){return!(!Qe.isPrimary||0!==Qe.button)}},64626:(He,Pe,g)=>{"use strict";g.d(Pe,{ou:()=>sr,Qf:()=>Qe,vF:()=>Se,ld:()=>Oe});class E extends Error{}class T extends E{constructor(Ee){super(`Invalid DateTime: ${Ee.toMessage()}`)}}class w extends E{constructor(Ee){super(`Invalid Interval: ${Ee.toMessage()}`)}}class Z extends E{constructor(Ee){super(`Invalid Duration: ${Ee.toMessage()}`)}}class x extends E{}class se extends E{constructor(Ee){super(`Invalid unit ${Ee}`)}}class V extends E{}class W extends E{constructor(){super("Zone is an abstract class")}}const A="numeric",U="short",N="long",J={year:A,month:A,day:A},Q={year:A,month:U,day:A},G={year:A,month:U,day:A,weekday:U},k={year:A,month:N,day:A},z={year:A,month:N,day:A,weekday:N},C={hour:A,minute:A},D={hour:A,minute:A,second:A},F={hour:A,minute:A,second:A,timeZoneName:U},B={hour:A,minute:A,second:A,timeZoneName:N},$={hour:A,minute:A,hourCycle:"h23"},X={hour:A,minute:A,second:A,hourCycle:"h23"},q={hour:A,minute:A,second:A,hourCycle:"h23",timeZoneName:U},Y={hour:A,minute:A,second:A,hourCycle:"h23",timeZoneName:N},ae={year:A,month:A,day:A,hour:A,minute:A},he={year:A,month:A,day:A,hour:A,minute:A,second:A},ne={year:A,month:U,day:A,hour:A,minute:A},ue={year:A,month:U,day:A,hour:A,minute:A,second:A},te={year:A,month:U,day:A,weekday:U,hour:A,minute:A},ie={year:A,month:N,day:A,hour:A,minute:A,timeZoneName:U},fe={year:A,month:N,day:A,hour:A,minute:A,second:A,timeZoneName:U},_e={year:A,month:N,day:A,weekday:N,hour:A,minute:A,timeZoneName:N},de={year:A,month:N,day:A,weekday:N,hour:A,minute:A,second:A,timeZoneName:N};class Oe{get type(){throw new W}get name(){throw new W}get ianaName(){return this.name}get isUniversal(){throw new W}offsetName(Ee,Re){throw new W}formatOffset(Ee,Re){throw new W}offset(Ee){throw new W}equals(Ee){throw new W}get isValid(){throw new W}}let re=null;class le extends Oe{static get instance(){return null===re&&(re=new le),re}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(Ee,{format:Re,locale:Ge}){return cs(Ee,Re,Ge)}formatOffset(Ee,Re){return fs(this.offset(Ee),Re)}offset(Ee){return-new Date(Ee).getTimezoneOffset()}equals(Ee){return"system"===Ee.type}get isValid(){return!0}}let ce={};const Te={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let De={};class Se extends Oe{static create(Ee){return De[Ee]||(De[Ee]=new Se(Ee)),De[Ee]}static resetCache(){De={},ce={}}static isValidSpecifier(Ee){return this.isValidZone(Ee)}static isValidZone(Ee){if(!Ee)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:Ee}).format(),!0}catch{return!1}}constructor(Ee){super(),this.zoneName=Ee,this.valid=Se.isValidZone(Ee)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(Ee,{format:Re,locale:Ge}){return cs(Ee,Re,Ge,this.name)}formatOffset(Ee,Re){return fs(this.offset(Ee),Re)}offset(Ee){const Re=new Date(Ee);if(isNaN(Re))return NaN;const Ge=function ve(Be){return ce[Be]||(ce[Be]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:Be,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),ce[Be]}(this.name);let[ht,Lt,St,Jt,os,Es,ur]=Ge.formatToParts?function Ae(Be,Ee){const Re=Be.formatToParts(Ee),Ge=[];for(let ht=0;ht<Re.length;ht++){const{type:Lt,value:St}=Re[ht],Jt=Te[Lt];"era"===Lt?Ge[Jt]=St:ys(Jt)||(Ge[Jt]=parseInt(St,10))}return Ge}(Ge,Re):function ge(Be,Ee){const Re=Be.format(Ee).replace(/\u200E/g,""),Ge=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(Re),[,ht,Lt,St,Jt,os,Es,ur]=Ge;return[St,ht,Lt,Jt,os,Es,ur]}(Ge,Re);"BC"===Jt&&(ht=1-Math.abs(ht));let er=+Re;const Lr=er%1e3;return er-=Lr>=0?Lr:1e3+Lr,(At({year:ht,month:Lt,day:St,hour:24===os?0:os,minute:Es,second:ur,millisecond:0})-er)/6e4}equals(Ee){return"iana"===Ee.type&&Ee.name===this.name}get isValid(){return this.valid}}let me={},we={};function $e(Be,Ee={}){const Re=JSON.stringify([Be,Ee]);let Ge=we[Re];return Ge||(Ge=new Intl.DateTimeFormat(Be,Ee),we[Re]=Ge),Ge}let Ce={},je={},oe=null;function tt(Be,Ee,Re,Ge,ht){const Lt=Be.listingMode(Re);return"error"===Lt?null:"en"===Lt?Ge(Ee):ht(Ee)}class Ne{constructor(Ee,Re,Ge){this.padTo=Ge.padTo||0,this.floor=Ge.floor||!1;const{padTo:ht,floor:Lt,...St}=Ge;if(!Re||Object.keys(St).length>0){const Jt={useGrouping:!1,...Ge};Ge.padTo>0&&(Jt.minimumIntegerDigits=Ge.padTo),this.inf=function Ie(Be,Ee={}){const Re=JSON.stringify([Be,Ee]);let Ge=Ce[Re];return Ge||(Ge=new Intl.NumberFormat(Be,Ee),Ce[Re]=Ge),Ge}(Ee,Jt)}}format(Ee){if(this.inf){const Re=this.floor?Math.floor(Ee):Ee;return this.inf.format(Re)}return ts(this.floor?Math.floor(Ee):Pt(Ee,3),this.padTo)}}class qe{constructor(Ee,Re,Ge){let ht;if(this.opts=Ge,Ee.zone.isUniversal){const St=Ee.offset/60*-1,Jt=St>=0?`Etc/GMT+${St}`:`Etc/GMT${St}`;0!==Ee.offset&&Se.create(Jt).valid?(ht=Jt,this.dt=Ee):(ht="UTC",this.dt=Ge.timeZoneName||0===Ee.offset?Ee:sr.fromMillis(Ee.ts+60*Ee.offset*1e3))}else"system"===Ee.zone.type?this.dt=Ee:(this.dt=Ee,ht=Ee.zone.name);const Lt={...this.opts};Lt.timeZone=Lt.timeZone||ht,this.dtf=$e(Re,Lt)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class ft{constructor(Ee,Re,Ge){this.opts={style:"long",...Ge},!Re&&Tt()&&(this.rtf=function Je(Be,Ee={}){const{base:Re,...Ge}=Ee,ht=JSON.stringify([Be,Ge]);let Lt=je[ht];return Lt||(Lt=new Intl.RelativeTimeFormat(Be,Ee),je[ht]=Lt),Lt}(Ee,Ge))}format(Ee,Re){return this.rtf?this.rtf.format(Ee,Re):function Yr(Be,Ee,Re="always",Ge=!1){const ht={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},Lt=-1===["hours","minutes","seconds"].indexOf(Be);if("auto"===Re&&Lt){const xr="days"===Be;switch(Ee){case 1:return xr?"tomorrow":`next ${ht[Be][0]}`;case-1:return xr?"yesterday":`last ${ht[Be][0]}`;case 0:return xr?"today":`this ${ht[Be][0]}`}}const St=Object.is(Ee,-0)||Ee<0,Jt=Math.abs(Ee),os=1===Jt,Es=ht[Be],ur=Ge?os?Es[1]:Es[2]||Es[1]:os?ht[Be][0]:Be;return St?`${Jt} ${ur} ago`:`in ${Jt} ${ur}`}(Re,Ee,this.opts.numeric,"long"!==this.opts.style)}formatToParts(Ee,Re){return this.rtf?this.rtf.formatToParts(Ee,Re):[]}}class Xe{static fromOpts(Ee){return Xe.create(Ee.locale,Ee.numberingSystem,Ee.outputCalendar,Ee.defaultToEN)}static create(Ee,Re,Ge,ht=!1){const Lt=Ee||as.defaultLocale,St=Lt||(ht?"en-US":function be(){return oe||(oe=(new Intl.DateTimeFormat).resolvedOptions().locale,oe)}());return new Xe(St,Re||as.defaultNumberingSystem,Ge||as.defaultOutputCalendar,Lt)}static resetCache(){oe=null,we={},Ce={},je={}}static fromObject({locale:Ee,numberingSystem:Re,outputCalendar:Ge}={}){return Xe.create(Ee,Re,Ge)}constructor(Ee,Re,Ge,ht){const[Lt,St,Jt]=function Ue(Be){const Ee=Be.indexOf("-x-");-1!==Ee&&(Be=Be.substring(0,Ee));const Re=Be.indexOf("-u-");if(-1===Re)return[Be];{let Ge,ht;try{Ge=$e(Be).resolvedOptions(),ht=Be}catch{const os=Be.substring(0,Re);Ge=$e(os).resolvedOptions(),ht=os}const{numberingSystem:Lt,calendar:St}=Ge;return[ht,Lt,St]}}(Ee);this.locale=Lt,this.numberingSystem=Re||St||null,this.outputCalendar=Ge||Jt||null,this.intl=function Fe(Be,Ee,Re){return(Re||Ee)&&(Be.includes("-u-")||(Be+="-u"),Re&&(Be+=`-ca-${Re}`),Ee&&(Be+=`-nu-${Ee}`)),Be}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=ht,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function rt(Be){return(!Be.numberingSystem||"latn"===Be.numberingSystem)&&("latn"===Be.numberingSystem||!Be.locale||Be.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(Be.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}listingMode(){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"}clone(Ee){return Ee&&0!==Object.getOwnPropertyNames(Ee).length?Xe.create(Ee.locale||this.specifiedLocale,Ee.numberingSystem||this.numberingSystem,Ee.outputCalendar||this.outputCalendar,Ee.defaultToEN||!1):this}redefaultToEN(Ee={}){return this.clone({...Ee,defaultToEN:!0})}redefaultToSystem(Ee={}){return this.clone({...Ee,defaultToEN:!1})}months(Ee,Re=!1,Ge=!0){return tt(this,Ee,Ge,Ut,()=>{const ht=Re?{month:Ee,day:"numeric"}:{month:Ee},Lt=Re?"format":"standalone";return this.monthsCache[Lt][Ee]||(this.monthsCache[Lt][Ee]=function Ke(Be){const Ee=[];for(let Re=1;Re<=12;Re++){const Ge=sr.utc(2016,Re,1);Ee.push(Be(Ge))}return Ee}(St=>this.extract(St,ht,"month"))),this.monthsCache[Lt][Ee]})}weekdays(Ee,Re=!1,Ge=!0){return tt(this,Ee,Ge,Zs,()=>{const ht=Re?{weekday:Ee,year:"numeric",month:"long",day:"numeric"}:{weekday:Ee},Lt=Re?"format":"standalone";return this.weekdaysCache[Lt][Ee]||(this.weekdaysCache[Lt][Ee]=function Ve(Be){const Ee=[];for(let Re=1;Re<=7;Re++){const Ge=sr.utc(2016,11,13+Re);Ee.push(Be(Ge))}return Ee}(St=>this.extract(St,ht,"weekday"))),this.weekdaysCache[Lt][Ee]})}meridiems(Ee=!0){return tt(this,void 0,Ee,()=>$s,()=>{if(!this.meridiemCache){const Re={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[sr.utc(2016,11,13,9),sr.utc(2016,11,13,19)].map(Ge=>this.extract(Ge,Re,"dayperiod"))}return this.meridiemCache})}eras(Ee,Re=!0){return tt(this,Ee,Re,Er,()=>{const Ge={era:Ee};return this.eraCache[Ee]||(this.eraCache[Ee]=[sr.utc(-40,1,1),sr.utc(2017,1,1)].map(ht=>this.extract(ht,Ge,"era"))),this.eraCache[Ee]})}extract(Ee,Re,Ge){const St=this.dtFormatter(Ee,Re).formatToParts().find(Jt=>Jt.type.toLowerCase()===Ge);return St?St.value:null}numberFormatter(Ee={}){return new Ne(this.intl,Ee.forceSimple||this.fastNumbers,Ee)}dtFormatter(Ee,Re={}){return new qe(Ee,this.intl,Re)}relFormatter(Ee={}){return new ft(this.intl,this.isEnglish(),Ee)}listFormatter(Ee={}){return function ye(Be,Ee={}){const Re=JSON.stringify([Be,Ee]);let Ge=me[Re];return Ge||(Ge=new Intl.ListFormat(Be,Ee),me[Re]=Ge),Ge}(this.intl,Ee)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(Ee){return this.locale===Ee.locale&&this.numberingSystem===Ee.numberingSystem&&this.outputCalendar===Ee.outputCalendar}}let dt=null;class Qe extends Oe{static get utcInstance(){return null===dt&&(dt=new Qe(0)),dt}static instance(Ee){return 0===Ee?Qe.utcInstance:new Qe(Ee)}static parseSpecifier(Ee){if(Ee){const Re=Ee.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(Re)return new Qe(Rs(Re[1],Re[2]))}return null}constructor(Ee){super(),this.fixed=Ee}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${fs(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${fs(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(Ee,Re){return fs(this.fixed,Re)}get isUniversal(){return!0}offset(){return this.fixed}equals(Ee){return"fixed"===Ee.type&&Ee.fixed===this.fixed}get isValid(){return!0}}class ot extends Oe{constructor(Ee){super(),this.zoneName=Ee}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ct(Be,Ee){if(ys(Be)||null===Be)return Ee;if(Be instanceof Oe)return Be;if(function nt(Be){return"string"==typeof Be}(Be)){const Ge=Be.toLowerCase();return"default"===Ge?Ee:"local"===Ge||"system"===Ge?le.instance:"utc"===Ge||"gmt"===Ge?Qe.utcInstance:Qe.parseSpecifier(Ge)||Se.create(Be)}return bt(Be)?Qe.instance(Be):"object"==typeof Be&&Be.offset&&"number"==typeof Be.offset?Be:new ot(Be)}let Wt,_t=()=>Date.now(),Rt="system",qt=null,rs=null,ss=null,vs=60;class as{static get now(){return _t}static set now(Ee){_t=Ee}static set defaultZone(Ee){Rt=Ee}static get defaultZone(){return ct(Rt,le.instance)}static get defaultLocale(){return qt}static set defaultLocale(Ee){qt=Ee}static get defaultNumberingSystem(){return rs}static set defaultNumberingSystem(Ee){rs=Ee}static get defaultOutputCalendar(){return ss}static set defaultOutputCalendar(Ee){ss=Ee}static get twoDigitCutoffYear(){return vs}static set twoDigitCutoffYear(Ee){vs=Ee%100}static get throwOnInvalid(){return Wt}static set throwOnInvalid(Ee){Wt=Ee}static resetCaches(){Xe.resetCache(),Se.resetCache()}}function ys(Be){return typeof Be>"u"}function bt(Be){return"number"==typeof Be}function Ts(Be){return"number"==typeof Be&&Be%1==0}function Tt(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Zt(Be,Ee,Re){if(0!==Be.length)return Be.reduce((Ge,ht)=>{const Lt=[Ee(ht),ht];return Ge&&Re(Ge[0],Lt[0])===Ge[0]?Ge:Lt},null)[1]}function Vt(Be,Ee){return Object.prototype.hasOwnProperty.call(Be,Ee)}function Nt(Be,Ee,Re){return Ts(Be)&&Be>=Ee&&Be<=Re}function ts(Be,Ee=2){let Ge;return Ge=Be<0?"-"+(""+-Be).padStart(Ee,"0"):(""+Be).padStart(Ee,"0"),Ge}function ms(Be){if(!ys(Be)&&null!==Be&&""!==Be)return parseInt(Be,10)}function Os(Be){if(!ys(Be)&&null!==Be&&""!==Be)return parseFloat(Be)}function pt(Be){if(!ys(Be)&&null!==Be&&""!==Be){const Ee=1e3*parseFloat("0."+Be);return Math.floor(Ee)}}function Pt(Be,Ee,Re=!1){const Ge=10**Ee;return(Re?Math.trunc:Math.round)(Be*Ge)/Ge}function jt(Be){return Be%4==0&&(Be%100!=0||Be%400==0)}function us(Be){return jt(Be)?366:365}function et(Be,Ee){const Re=function ls(Be,Ee){return Be-Ee*Math.floor(Be/Ee)}(Ee-1,12)+1;return 2===Re?jt(Be+(Ee-Re)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][Re-1]}function At(Be){let Ee=Date.UTC(Be.year,Be.month-1,Be.day,Be.hour,Be.minute,Be.second,Be.millisecond);return Be.year<100&&Be.year>=0&&(Ee=new Date(Ee),Ee.setUTCFullYear(Ee.getUTCFullYear()-1900)),+Ee}function Bt(Be){const Ee=(Be+Math.floor(Be/4)-Math.floor(Be/100)+Math.floor(Be/400))%7,Re=Be-1,Ge=(Re+Math.floor(Re/4)-Math.floor(Re/100)+Math.floor(Re/400))%7;return 4===Ee||3===Ge?53:52}function Ht(Be){return Be>99?Be:Be>as.twoDigitCutoffYear?1900+Be:2e3+Be}function cs(Be,Ee,Re,Ge=null){const ht=new Date(Be),Lt={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};Ge&&(Lt.timeZone=Ge);const St={timeZoneName:Ee,...Lt},Jt=new Intl.DateTimeFormat(Re,St).formatToParts(ht).find(os=>"timezonename"===os.type.toLowerCase());return Jt?Jt.value:null}function Rs(Be,Ee){let Re=parseInt(Be,10);Number.isNaN(Re)&&(Re=0);const Ge=parseInt(Ee,10)||0;return 60*Re+(Re<0||Object.is(Re,-0)?-Ge:Ge)}function Us(Be){const Ee=Number(Be);if("boolean"==typeof Be||""===Be||Number.isNaN(Ee))throw new V(`Invalid unit value ${Be}`);return Ee}function mr(Be,Ee){const Re={};for(const Ge in Be)if(Vt(Be,Ge)){const ht=Be[Ge];if(null==ht)continue;Re[Ee(Ge)]=Us(ht)}return Re}function fs(Be,Ee){const Re=Math.trunc(Math.abs(Be/60)),Ge=Math.trunc(Math.abs(Be%60)),ht=Be>=0?"+":"-";switch(Ee){case"short":return`${ht}${ts(Re,2)}:${ts(Ge,2)}`;case"narrow":return`${ht}${Re}${Ge>0?`:${Ge}`:""}`;case"techie":return`${ht}${ts(Re,2)}${ts(Ge,2)}`;default:throw new RangeError(`Value format ${Ee} is out of range for property format`)}}function Le(Be){return function Kt(Be,Ee){return Ee.reduce((Re,Ge)=>(Re[Ge]=Be[Ge],Re),{})}(Be,["hour","minute","second","millisecond"])}const We=["January","February","March","April","May","June","July","August","September","October","November","December"],ke=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Et=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ut(Be){switch(Be){case"narrow":return[...Et];case"short":return[...ke];case"long":return[...We];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const es=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],is=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],_s=["M","T","W","T","F","S","S"];function Zs(Be){switch(Be){case"narrow":return[..._s];case"short":return[...is];case"long":return[...es];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const $s=["AM","PM"],As=["Before Christ","Anno Domini"],Gs=["BC","AD"],nr=["B","A"];function Er(Be){switch(Be){case"narrow":return[...nr];case"short":return[...Gs];case"long":return[...As];default:return null}}function zt(Be,Ee){let Re="";for(const Ge of Be)Re+=Ge.literal?Ge.val:Ee(Ge.val);return Re}const br={D:J,DD:Q,DDD:k,DDDD:z,t:C,tt:D,ttt:F,tttt:B,T:$,TT:X,TTT:q,TTTT:Y,f:ae,ff:ne,fff:ie,ffff:_e,F:he,FF:ue,FFF:fe,FFFF:de};class Xs{static create(Ee,Re={}){return new Xs(Ee,Re)}static parseFormat(Ee){let Re=null,Ge="",ht=!1;const Lt=[];for(let St=0;St<Ee.length;St++){const Jt=Ee.charAt(St);"'"===Jt?(Ge.length>0&&Lt.push({literal:ht,val:Ge}),Re=null,Ge="",ht=!ht):ht||Jt===Re?Ge+=Jt:(Ge.length>0&&Lt.push({literal:!1,val:Ge}),Ge=Jt,Re=Jt)}return Ge.length>0&&Lt.push({literal:ht,val:Ge}),Lt}static macroTokenToFormatOpts(Ee){return br[Ee]}constructor(Ee,Re){this.opts=Re,this.loc=Ee,this.systemLoc=null}formatWithSystemDefault(Ee,Re){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(Ee,{...this.opts,...Re}).format()}formatDateTime(Ee,Re={}){return this.loc.dtFormatter(Ee,{...this.opts,...Re}).format()}formatDateTimeParts(Ee,Re={}){return this.loc.dtFormatter(Ee,{...this.opts,...Re}).formatToParts()}formatInterval(Ee,Re={}){return this.loc.dtFormatter(Ee.start,{...this.opts,...Re}).dtf.formatRange(Ee.start.toJSDate(),Ee.end.toJSDate())}resolvedOptions(Ee,Re={}){return this.loc.dtFormatter(Ee,{...this.opts,...Re}).resolvedOptions()}num(Ee,Re=0){if(this.opts.forceSimple)return ts(Ee,Re);const Ge={...this.opts};return Re>0&&(Ge.padTo=Re),this.loc.numberFormatter(Ge).format(Ee)}formatDateTimeFromString(Ee,Re){const Ge="en"===this.loc.listingMode(),ht=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,Lt=(er,Lr)=>this.loc.extract(Ee,er,Lr),St=er=>Ee.isOffsetFixed&&0===Ee.offset&&er.allowZ?"Z":Ee.isValid?Ee.zone.formatOffset(Ee.ts,er.format):"",os=(er,Lr)=>Ge?function wn(Be,Ee){return Ut(Ee)[Be.month-1]}(Ee,er):Lt(Lr?{month:er}:{month:er,day:"numeric"},"month"),Es=(er,Lr)=>Ge?function wr(Be,Ee){return Zs(Ee)[Be.weekday-1]}(Ee,er):Lt(Lr?{weekday:er}:{weekday:er,month:"long",day:"numeric"},"weekday"),ur=er=>{const Lr=Xs.macroTokenToFormatOpts(er);return Lr?this.formatWithSystemDefault(Ee,Lr):er},xr=er=>Ge?function pn(Be,Ee){return Er(Ee)[Be.year<0?0:1]}(Ee,er):Lt({era:er},"era");return zt(Xs.parseFormat(Re),er=>{switch(er){case"S":return this.num(Ee.millisecond);case"u":case"SSS":return this.num(Ee.millisecond,3);case"s":return this.num(Ee.second);case"ss":return this.num(Ee.second,2);case"uu":return this.num(Math.floor(Ee.millisecond/10),2);case"uuu":return this.num(Math.floor(Ee.millisecond/100));case"m":return this.num(Ee.minute);case"mm":return this.num(Ee.minute,2);case"h":return this.num(Ee.hour%12==0?12:Ee.hour%12);case"hh":return this.num(Ee.hour%12==0?12:Ee.hour%12,2);case"H":return this.num(Ee.hour);case"HH":return this.num(Ee.hour,2);case"Z":return St({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return St({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return St({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return Ee.zone.offsetName(Ee.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return Ee.zone.offsetName(Ee.ts,{format:"long",locale:this.loc.locale});case"z":return Ee.zoneName;case"a":return Ge?function dr(Be){return $s[Be.hour<12?0:1]}(Ee):Lt({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return ht?Lt({day:"numeric"},"day"):this.num(Ee.day);case"dd":return ht?Lt({day:"2-digit"},"day"):this.num(Ee.day,2);case"c":case"E":return this.num(Ee.weekday);case"ccc":return Es("short",!0);case"cccc":return Es("long",!0);case"ccccc":return Es("narrow",!0);case"EEE":return Es("short",!1);case"EEEE":return Es("long",!1);case"EEEEE":return Es("narrow",!1);case"L":return ht?Lt({month:"numeric",day:"numeric"},"month"):this.num(Ee.month);case"LL":return ht?Lt({month:"2-digit",day:"numeric"},"month"):this.num(Ee.month,2);case"LLL":return os("short",!0);case"LLLL":return os("long",!0);case"LLLLL":return os("narrow",!0);case"M":return ht?Lt({month:"numeric"},"month"):this.num(Ee.month);case"MM":return ht?Lt({month:"2-digit"},"month"):this.num(Ee.month,2);case"MMM":return os("short",!1);case"MMMM":return os("long",!1);case"MMMMM":return os("narrow",!1);case"y":return ht?Lt({year:"numeric"},"year"):this.num(Ee.year);case"yy":return ht?Lt({year:"2-digit"},"year"):this.num(Ee.year.toString().slice(-2),2);case"yyyy":return ht?Lt({year:"numeric"},"year"):this.num(Ee.year,4);case"yyyyyy":return ht?Lt({year:"numeric"},"year"):this.num(Ee.year,6);case"G":return xr("short");case"GG":return xr("long");case"GGGGG":return xr("narrow");case"kk":return this.num(Ee.weekYear.toString().slice(-2),2);case"kkkk":return this.num(Ee.weekYear,4);case"W":return this.num(Ee.weekNumber);case"WW":return this.num(Ee.weekNumber,2);case"o":return this.num(Ee.ordinal);case"ooo":return this.num(Ee.ordinal,3);case"q":return this.num(Ee.quarter);case"qq":return this.num(Ee.quarter,2);case"X":return this.num(Math.floor(Ee.ts/1e3));case"x":return this.num(Ee.ts);default:return ur(er)}})}formatDurationFromString(Ee,Re){const Ge=os=>{switch(os[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},Lt=Xs.parseFormat(Re),St=Lt.reduce((os,{literal:Es,val:ur})=>Es?os:os.concat(ur),[]);return zt(Lt,(os=>Es=>{const ur=Ge(Es);return ur?this.num(os.get(ur),Es.length):Es})(Ee.shiftTo(...St.map(Ge).filter(os=>os))))}}class cr{constructor(Ee,Re){this.reason=Ee,this.explanation=Re}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ir=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function bs(...Be){const Ee=Be.reduce((Re,Ge)=>Re+Ge.source,"");return RegExp(`^${Ee}$`)}function hr(...Be){return Ee=>Be.reduce(([Re,Ge,ht],Lt)=>{const[St,Jt,os]=Lt(Ee,ht);return[{...Re,...St},Jt||Ge,os]},[{},null,1]).slice(0,2)}function xs(Be,...Ee){if(null==Be)return[null,null];for(const[Re,Ge]of Ee){const ht=Re.exec(Be);if(ht)return Ge(ht)}return[null,null]}function qr(...Be){return(Ee,Re)=>{const Ge={};let ht;for(ht=0;ht<Be.length;ht++)Ge[Be[ht]]=ms(Ee[Re+ht]);return[Ge,null,Re+ht]}}const lt=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,it=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Dt=RegExp(`${it.source}(?:${lt.source}?(?:\\[(${ir.source})\\])?)?`),kt=RegExp(`(?:T${Dt.source})?`),Ds=qr("weekYear","weekNumber","weekDay"),Vs=qr("year","ordinal"),Qs=RegExp(`${it.source} ?(?:${lt.source}|(${ir.source}))?`),_r=RegExp(`(?: ${Qs.source})?`);function tr(Be,Ee,Re){const Ge=Be[Ee];return ys(Ge)?Re:ms(Ge)}function js(Be,Ee){return[{hours:tr(Be,Ee,0),minutes:tr(Be,Ee+1,0),seconds:tr(Be,Ee+2,0),milliseconds:pt(Be[Ee+3])},null,Ee+4]}function zr(Be,Ee){const Re=!Be[Ee]&&!Be[Ee+1],Ge=Rs(Be[Ee+1],Be[Ee+2]);return[{},Re?null:Qe.instance(Ge),Ee+3]}function Dr(Be,Ee){return[{},Be[Ee]?Se.create(Be[Ee]):null,Ee+1]}const Cn=RegExp(`^T?${it.source}$`),Dn=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Br(Be){const[Ee,Re,Ge,ht,Lt,St,Jt,os,Es]=Be,ur="-"===Ee[0],xr=os&&"-"===os[0],Zr=(er,Lr=!1)=>void 0!==er&&(Lr||er&&ur)?-er:er;return[{years:Zr(Os(Re)),months:Zr(Os(Ge)),weeks:Zr(Os(ht)),days:Zr(Os(Lt)),hours:Zr(Os(St)),minutes:Zr(Os(Jt)),seconds:Zr(Os(os),"-0"===os),milliseconds:Zr(pt(Es),xr)}]}const tn={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Nr(Be,Ee,Re,Ge,ht,Lt,St){const Jt={year:2===Ee.length?Ht(ms(Ee)):ms(Ee),month:ke.indexOf(Re)+1,day:ms(Ge),hour:ms(ht),minute:ms(Lt)};return St&&(Jt.second=ms(St)),Be&&(Jt.weekday=Be.length>3?es.indexOf(Be)+1:is.indexOf(Be)+1),Jt}const yt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Xt(Be){const[,Ee,Re,Ge,ht,Lt,St,Jt,os,Es,ur,xr]=Be,Zr=Nr(Ee,ht,Ge,Re,Lt,St,Jt);let er;return er=os?tn[os]:Es?0:Rs(ur,xr),[Zr,new Qe(er)]}const Fs=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Cr=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,yr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function kr(Be){const[,Ee,Re,Ge,ht,Lt,St,Jt]=Be;return[Nr(Ee,ht,Ge,Re,Lt,St,Jt),Qe.utcInstance]}function rn(Be){const[,Ee,Re,Ge,ht,Lt,St,Jt]=Be;return[Nr(Ee,Jt,Re,Ge,ht,Lt,St),Qe.utcInstance]}const Ze=bs(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,kt),Ye=bs(/(\d{4})-?W(\d\d)(?:-?(\d))?/,kt),at=bs(/(\d{4})-?(\d{3})/,kt),vt=bs(Dt),Ot=hr(function en(Be,Ee){return[{year:tr(Be,Ee),month:tr(Be,Ee+1,1),day:tr(Be,Ee+2,1)},null,Ee+3]},js,zr,Dr),xt=hr(Ds,js,zr,Dr),$t=hr(Vs,js,zr,Dr),Qt=hr(js,zr,Dr),qs=hr(js),fn=bs(/(\d{4})-(\d\d)-(\d\d)/,_r),mn=bs(Qs),Gr=hr(js,zr,Dr),nn={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},ta={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...nn},yn=365.2425,ti=30.436875,Sl={years:{quarters:4,months:12,weeks:yn/7,days:yn,hours:24*yn,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:yn/28,days:yn/4,hours:24*yn/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:ti/7,days:ti,hours:24*ti,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...nn},kn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Tl=kn.slice(0).reverse();function Wn(Be,Ee,Re=!1){const Ge={values:Re?Ee.values:{...Be.values,...Ee.values||{}},loc:Be.loc.clone(Ee.loc),conversionAccuracy:Ee.conversionAccuracy||Be.conversionAccuracy,matrix:Ee.matrix||Be.matrix};return new vr(Ge)}function Ta(Be,Ee,Re,Ge,ht){const Lt=Be[ht][Re],St=Ee[Re]/Lt,os=Math.sign(St)!==Math.sign(Ge[ht])&&0!==Ge[ht]&&Math.abs(St)<=1?function Jn(Be){return Be<0?Math.floor(Be):Math.ceil(Be)}(St):Math.trunc(St);Ge[ht]+=os,Ee[Re]-=os*Lt}class vr{constructor(Ee){const Re="longterm"===Ee.conversionAccuracy||!1;let Ge=Re?Sl:ta;Ee.matrix&&(Ge=Ee.matrix),this.values=Ee.values,this.loc=Ee.loc||Xe.create(),this.conversionAccuracy=Re?"longterm":"casual",this.invalid=Ee.invalid||null,this.matrix=Ge,this.isLuxonDuration=!0}static fromMillis(Ee,Re){return vr.fromObject({milliseconds:Ee},Re)}static fromObject(Ee,Re={}){if(null==Ee||"object"!=typeof Ee)throw new V("Duration.fromObject: argument expected to be an object, got "+(null===Ee?"null":typeof Ee));return new vr({values:mr(Ee,vr.normalizeUnit),loc:Xe.fromObject(Re),conversionAccuracy:Re.conversionAccuracy,matrix:Re.matrix})}static fromDurationLike(Ee){if(bt(Ee))return vr.fromMillis(Ee);if(vr.isDuration(Ee))return Ee;if("object"==typeof Ee)return vr.fromObject(Ee);throw new V(`Unknown duration argument ${Ee} of type ${typeof Ee}`)}static fromISO(Ee,Re){const[Ge]=function Ls(Be){return xs(Be,[Dn,Br])}(Ee);return Ge?vr.fromObject(Ge,Re):vr.invalid("unparsable",`the input "${Ee}" can't be parsed as ISO 8601`)}static fromISOTime(Ee,Re){const[Ge]=function Ir(Be){return xs(Be,[Cn,qs])}(Ee);return Ge?vr.fromObject(Ge,Re):vr.invalid("unparsable",`the input "${Ee}" can't be parsed as ISO 8601`)}static invalid(Ee,Re=null){if(!Ee)throw new V("need to specify a reason the Duration is invalid");const Ge=Ee instanceof cr?Ee:new cr(Ee,Re);if(as.throwOnInvalid)throw new Z(Ge);return new vr({invalid:Ge})}static normalizeUnit(Ee){const Re={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[Ee&&Ee.toLowerCase()];if(!Re)throw new se(Ee);return Re}static isDuration(Ee){return Ee&&Ee.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(Ee,Re={}){const Ge={...Re,floor:!1!==Re.round&&!1!==Re.floor};return this.isValid?Xs.create(this.loc,Ge).formatDurationFromString(this,Ee):"Invalid Duration"}toHuman(Ee={}){const Re=kn.map(Ge=>{const ht=this.values[Ge];return ys(ht)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...Ee,unit:Ge.slice(0,-1)}).format(ht)}).filter(Ge=>Ge);return this.loc.listFormatter({type:"conjunction",style:Ee.listStyle||"narrow",...Ee}).format(Re)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let Ee="P";return 0!==this.years&&(Ee+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(Ee+=this.months+3*this.quarters+"M"),0!==this.weeks&&(Ee+=this.weeks+"W"),0!==this.days&&(Ee+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(Ee+="T"),0!==this.hours&&(Ee+=this.hours+"H"),0!==this.minutes&&(Ee+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(Ee+=Pt(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===Ee&&(Ee+="T0S"),Ee}toISOTime(Ee={}){if(!this.isValid)return null;const Re=this.toMillis();if(Re<0||Re>=864e5)return null;Ee={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...Ee};const Ge=this.shiftTo("hours","minutes","seconds","milliseconds");let ht="basic"===Ee.format?"hhmm":"hh:mm";(!Ee.suppressSeconds||0!==Ge.seconds||0!==Ge.milliseconds)&&(ht+="basic"===Ee.format?"ss":":ss",(!Ee.suppressMilliseconds||0!==Ge.milliseconds)&&(ht+=".SSS"));let Lt=Ge.toFormat(ht);return Ee.includePrefix&&(Lt="T"+Lt),Lt}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(Ee){if(!this.isValid)return this;const Re=vr.fromDurationLike(Ee),Ge={};for(const ht of kn)(Vt(Re.values,ht)||Vt(this.values,ht))&&(Ge[ht]=Re.get(ht)+this.get(ht));return Wn(this,{values:Ge},!0)}minus(Ee){if(!this.isValid)return this;const Re=vr.fromDurationLike(Ee);return this.plus(Re.negate())}mapUnits(Ee){if(!this.isValid)return this;const Re={};for(const Ge of Object.keys(this.values))Re[Ge]=Us(Ee(this.values[Ge],Ge));return Wn(this,{values:Re},!0)}get(Ee){return this[vr.normalizeUnit(Ee)]}set(Ee){return this.isValid?Wn(this,{values:{...this.values,...mr(Ee,vr.normalizeUnit)}}):this}reconfigure({locale:Ee,numberingSystem:Re,conversionAccuracy:Ge,matrix:ht}={}){return Wn(this,{loc:this.loc.clone({locale:Ee,numberingSystem:Re}),matrix:ht,conversionAccuracy:Ge})}as(Ee){return this.isValid?this.shiftTo(Ee).get(Ee):NaN}normalize(){if(!this.isValid)return this;const Ee=this.toObject();return function Ia(Be,Ee){Tl.reduce((Re,Ge)=>ys(Ee[Ge])?Re:(Re&&Ta(Be,Ee,Re,Ee,Ge),Ge),null)}(this.matrix,Ee),Wn(this,{values:Ee},!0)}rescale(){return this.isValid?Wn(this,{values:function Il(Be){const Ee={};for(const[Re,Ge]of Object.entries(Be))0!==Ge&&(Ee[Re]=Ge);return Ee}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(...Ee){if(!this.isValid)return this;if(0===Ee.length)return this;Ee=Ee.map(St=>vr.normalizeUnit(St));const Re={},Ge={},ht=this.toObject();let Lt;for(const St of kn)if(Ee.indexOf(St)>=0){Lt=St;let Jt=0;for(const Es in Ge)Jt+=this.matrix[Es][St]*Ge[Es],Ge[Es]=0;bt(ht[St])&&(Jt+=ht[St]);const os=Math.trunc(Jt);Re[St]=os,Ge[St]=(1e3*Jt-1e3*os)/1e3;for(const Es in ht)kn.indexOf(Es)>kn.indexOf(St)&&Ta(this.matrix,ht,Es,Re,St)}else bt(ht[St])&&(Ge[St]=ht[St]);for(const St in Ge)0!==Ge[St]&&(Re[Lt]+=St===Lt?Ge[St]:Ge[St]/this.matrix[Lt][St]);return Wn(this,{values:Re},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const Ee={};for(const Re of Object.keys(this.values))Ee[Re]=0===this.values[Re]?0:-this.values[Re];return Wn(this,{values:Ee},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(Ee){if(!this.isValid||!Ee.isValid||!this.loc.equals(Ee.loc))return!1;function Re(Ge,ht){return void 0===Ge||0===Ge?void 0===ht||0===ht:Ge===ht}for(const Ge of kn)if(!Re(this.values[Ge],Ee.values[Ge]))return!1;return!0}}const ai="Invalid Interval";class Ur{constructor(Ee){this.s=Ee.start,this.e=Ee.end,this.invalid=Ee.invalid||null,this.isLuxonInterval=!0}static invalid(Ee,Re=null){if(!Ee)throw new V("need to specify a reason the Interval is invalid");const Ge=Ee instanceof cr?Ee:new cr(Ee,Re);if(as.throwOnInvalid)throw new w(Ge);return new Ur({invalid:Ge})}static fromDateTimes(Ee,Re){const Ge=di(Ee),ht=di(Re),Lt=function wl(Be,Ee){return Be&&Be.isValid?Ee&&Ee.isValid?Ee<Be?Ur.invalid("end before start",`The end of an interval must be after its start, but you had start=${Be.toISO()} and end=${Ee.toISO()}`):null:Ur.invalid("missing or invalid end"):Ur.invalid("missing or invalid start")}(Ge,ht);return Lt??new Ur({start:Ge,end:ht})}static after(Ee,Re){const Ge=vr.fromDurationLike(Re),ht=di(Ee);return Ur.fromDateTimes(ht,ht.plus(Ge))}static before(Ee,Re){const Ge=vr.fromDurationLike(Re),ht=di(Ee);return Ur.fromDateTimes(ht.minus(Ge),ht)}static fromISO(Ee,Re){const[Ge,ht]=(Ee||"").split("/",2);if(Ge&&ht){let Lt,St,Jt,os;try{Lt=sr.fromISO(Ge,Re),St=Lt.isValid}catch{St=!1}try{Jt=sr.fromISO(ht,Re),os=Jt.isValid}catch{os=!1}if(St&&os)return Ur.fromDateTimes(Lt,Jt);if(St){const Es=vr.fromISO(ht,Re);if(Es.isValid)return Ur.after(Lt,Es)}else if(os){const Es=vr.fromISO(Ge,Re);if(Es.isValid)return Ur.before(Jt,Es)}}return Ur.invalid("unparsable",`the input "${Ee}" can't be parsed as ISO 8601`)}static isInterval(Ee){return Ee&&Ee.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(Ee="milliseconds"){return this.isValid?this.toDuration(Ee).get(Ee):NaN}count(Ee="milliseconds"){if(!this.isValid)return NaN;const Re=this.start.startOf(Ee),Ge=this.end.startOf(Ee);return Math.floor(Ge.diff(Re,Ee).get(Ee))+1}hasSame(Ee){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,Ee))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(Ee){return!!this.isValid&&this.s>Ee}isBefore(Ee){return!!this.isValid&&this.e<=Ee}contains(Ee){return!!this.isValid&&this.s<=Ee&&this.e>Ee}set({start:Ee,end:Re}={}){return this.isValid?Ur.fromDateTimes(Ee||this.s,Re||this.e):this}splitAt(...Ee){if(!this.isValid)return[];const Re=Ee.map(di).filter(St=>this.contains(St)).sort(),Ge=[];let{s:ht}=this,Lt=0;for(;ht<this.e;){const St=Re[Lt]||this.e,Jt=+St>+this.e?this.e:St;Ge.push(Ur.fromDateTimes(ht,Jt)),ht=Jt,Lt+=1}return Ge}splitBy(Ee){const Re=vr.fromDurationLike(Ee);if(!this.isValid||!Re.isValid||0===Re.as("milliseconds"))return[];let Lt,{s:Ge}=this,ht=1;const St=[];for(;Ge<this.e;){const Jt=this.start.plus(Re.mapUnits(os=>os*ht));Lt=+Jt>+this.e?this.e:Jt,St.push(Ur.fromDateTimes(Ge,Lt)),Ge=Lt,ht+=1}return St}divideEqually(Ee){return this.isValid?this.splitBy(this.length()/Ee).slice(0,Ee):[]}overlaps(Ee){return this.e>Ee.s&&this.s<Ee.e}abutsStart(Ee){return!!this.isValid&&+this.e==+Ee.s}abutsEnd(Ee){return!!this.isValid&&+Ee.e==+this.s}engulfs(Ee){return!!this.isValid&&this.s<=Ee.s&&this.e>=Ee.e}equals(Ee){return!(!this.isValid||!Ee.isValid)&&this.s.equals(Ee.s)&&this.e.equals(Ee.e)}intersection(Ee){if(!this.isValid)return this;const Re=this.s>Ee.s?this.s:Ee.s,Ge=this.e<Ee.e?this.e:Ee.e;return Re>=Ge?null:Ur.fromDateTimes(Re,Ge)}union(Ee){return this.isValid?Ur.fromDateTimes(this.s<Ee.s?this.s:Ee.s,this.e>Ee.e?this.e:Ee.e):this}static merge(Ee){const[Re,Ge]=Ee.sort((ht,Lt)=>ht.s-Lt.s).reduce(([ht,Lt],St)=>Lt?Lt.overlaps(St)||Lt.abutsStart(St)?[ht,Lt.union(St)]:[ht.concat([Lt]),St]:[ht,St],[[],null]);return Ge&&Re.push(Ge),Re}static xor(Ee){let Re=null,Ge=0;const ht=[],Lt=Ee.map(os=>[{time:os.s,type:"s"},{time:os.e,type:"e"}]),Jt=Array.prototype.concat(...Lt).sort((os,Es)=>os.time-Es.time);for(const os of Jt)Ge+="s"===os.type?1:-1,1===Ge?Re=os.time:(Re&&+Re!=+os.time&&ht.push(Ur.fromDateTimes(Re,os.time)),Re=null);return Ur.merge(ht)}difference(...Ee){return Ur.xor([this].concat(Ee)).map(Re=>this.intersection(Re)).filter(Re=>Re&&!Re.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:ai}toLocaleString(Ee=J,Re={}){return this.isValid?Xs.create(this.s.loc.clone(Re),Ee).formatInterval(this):ai}toISO(Ee){return this.isValid?`${this.s.toISO(Ee)}/${this.e.toISO(Ee)}`:ai}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ai}toISOTime(Ee){return this.isValid?`${this.s.toISOTime(Ee)}/${this.e.toISOTime(Ee)}`:ai}toFormat(Ee,{separator:Re=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(Ee)}${Re}${this.e.toFormat(Ee)}`:ai}toDuration(Ee,Re){return this.isValid?this.e.diff(this.s,Ee,Re):vr.invalid(this.invalidReason)}mapEndpoints(Ee){return Ur.fromDateTimes(Ee(this.s),Ee(this.e))}}class Eo{static hasDST(Ee=as.defaultZone){const Re=sr.now().setZone(Ee).set({month:12});return!Ee.isUniversal&&Re.offset!==Re.set({month:6}).offset}static isValidIANAZone(Ee){return Se.isValidZone(Ee)}static normalizeZone(Ee){return ct(Ee,as.defaultZone)}static months(Ee="long",{locale:Re=null,numberingSystem:Ge=null,locObj:ht=null,outputCalendar:Lt="gregory"}={}){return(ht||Xe.create(Re,Ge,Lt)).months(Ee)}static monthsFormat(Ee="long",{locale:Re=null,numberingSystem:Ge=null,locObj:ht=null,outputCalendar:Lt="gregory"}={}){return(ht||Xe.create(Re,Ge,Lt)).months(Ee,!0)}static weekdays(Ee="long",{locale:Re=null,numberingSystem:Ge=null,locObj:ht=null}={}){return(ht||Xe.create(Re,Ge,null)).weekdays(Ee)}static weekdaysFormat(Ee="long",{locale:Re=null,numberingSystem:Ge=null,locObj:ht=null}={}){return(ht||Xe.create(Re,Ge,null)).weekdays(Ee,!0)}static meridiems({locale:Ee=null}={}){return Xe.create(Ee).meridiems()}static eras(Ee="short",{locale:Re=null}={}){return Xe.create(Re,null,"gregory").eras(Ee)}static features(){return{relative:Tt()}}}function sa(Be,Ee){const Re=ht=>ht.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),Ge=Re(Ee)-Re(Be);return Math.floor(vr.fromMillis(Ge).as("days"))}const sn={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},bo={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Aa=sn.hanidec.replace(/[\[|\]]/g,"").split("");function xn({numberingSystem:Be},Ee=""){return new RegExp(`${sn[Be||"latn"]}${Ee}`)}function Hs(Be,Ee=(Re=>Re)){return{regex:Be,deser:([Re])=>Ee(function xa(Be){let Ee=parseInt(Be,10);if(isNaN(Ee)){Ee="";for(let Re=0;Re<Be.length;Re++){const Ge=Be.charCodeAt(Re);if(-1!==Be[Re].search(sn.hanidec))Ee+=Aa.indexOf(Be[Re]);else for(const ht in bo){const[Lt,St]=bo[ht];Ge>=Lt&&Ge<=St&&(Ee+=Ge-Lt)}}return parseInt(Ee,10)}return Ee}(Re))}}const ra=`[ ${String.fromCharCode(160)}]`,gr=new RegExp(ra,"g");function li(Be){return Be.replace(/\./g,"\\.?").replace(gr,ra)}function Cs(Be){return Be.replace(/\./g,"").replace(gr," ").toLowerCase()}function gn(Be,Ee){return null===Be?null:{regex:RegExp(Be.map(li).join("|")),deser:([Re])=>Be.findIndex(Ge=>Cs(Re)===Cs(Ge))+Ee}}function Qr(Be,Ee){return{regex:Be,deser:([,Re,Ge])=>Rs(Re,Ge),groups:Ee}}function na(Be){return{regex:Be,deser:([Ee])=>Ee}}function Qi(Be){return Be.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}const Dl={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Xi=null;function Ra(Be,Ee){return Array.prototype.concat(...Be.map(Re=>function Mo(Be,Ee){if(Be.literal)return Be;const Ge=ui(Xs.macroTokenToFormatOpts(Be.val),Ee);return null==Ge||Ge.includes(void 0)?Be:Ge}(Re,Ee)))}function Ln(Be,Ee,Re){const Ge=Ra(Xs.parseFormat(Re),Be),ht=Ge.map(St=>function ia(Be,Ee){const Re=xn(Ee),Ge=xn(Ee,"{2}"),ht=xn(Ee,"{3}"),Lt=xn(Ee,"{4}"),St=xn(Ee,"{6}"),Jt=xn(Ee,"{1,2}"),os=xn(Ee,"{1,3}"),Es=xn(Ee,"{1,6}"),ur=xn(Ee,"{1,9}"),xr=xn(Ee,"{2,4}"),Zr=xn(Ee,"{4,6}"),er=Rn=>({regex:RegExp(Qi(Rn.val)),deser:([la])=>la,literal:!0}),hi=(Rn=>{if(Be.literal)return er(Rn);switch(Rn.val){case"G":return gn(Ee.eras("short",!1),0);case"GG":return gn(Ee.eras("long",!1),0);case"y":return Hs(Es);case"yy":case"kk":return Hs(xr,Ht);case"yyyy":case"kkkk":return Hs(Lt);case"yyyyy":return Hs(Zr);case"yyyyyy":return Hs(St);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Hs(Jt);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Hs(Ge);case"MMM":return gn(Ee.months("short",!0,!1),1);case"MMMM":return gn(Ee.months("long",!0,!1),1);case"LLL":return gn(Ee.months("short",!1,!1),1);case"LLLL":return gn(Ee.months("long",!1,!1),1);case"o":case"S":return Hs(os);case"ooo":case"SSS":return Hs(ht);case"u":return na(ur);case"uu":return na(Jt);case"uuu":case"E":case"c":return Hs(Re);case"a":return gn(Ee.meridiems(),0);case"EEE":return gn(Ee.weekdays("short",!1,!1),1);case"EEEE":return gn(Ee.weekdays("long",!1,!1),1);case"ccc":return gn(Ee.weekdays("short",!0,!1),1);case"cccc":return gn(Ee.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Qr(new RegExp(`([+-]${Jt.source})(?::(${Ge.source}))?`),2);case"ZZZ":return Qr(new RegExp(`([+-]${Jt.source})(${Ge.source})?`),2);case"z":return na(/[a-z_+-/]{1,256}?/i);default:return er(Rn)}})(Be)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return hi.token=Be,hi}(St,Be)),Lt=ht.find(St=>St.invalidReason);if(Lt)return{input:Ee,tokens:Ge,invalidReason:Lt.invalidReason};{const[St,Jt]=function La(Be){return[`^${Be.map(Re=>Re.regex).reduce((Re,Ge)=>`${Re}(${Ge.source})`,"")}$`,Be]}(ht),os=RegExp(St,"i"),[Es,ur]=function fc(Be,Ee,Re){const Ge=Be.match(Ee);if(Ge){const ht={};let Lt=1;for(const St in Re)if(Vt(Re,St)){const Jt=Re[St],os=Jt.groups?Jt.groups+1:1;!Jt.literal&&Jt.token&&(ht[Jt.token.val[0]]=Jt.deser(Ge.slice(Lt,Lt+os))),Lt+=os}return[Ge,ht]}return[Ge,{}]}(Ee,os,Jt),[xr,Zr,er]=ur?function aa(Be){let Ge,Re=null;return ys(Be.z)||(Re=Se.create(Be.z)),ys(Be.Z)||(Re||(Re=new Qe(Be.Z)),Ge=Be.Z),ys(Be.q)||(Be.M=3*(Be.q-1)+1),ys(Be.h)||(Be.h<12&&1===Be.a?Be.h+=12:12===Be.h&&0===Be.a&&(Be.h=0)),0===Be.G&&Be.y&&(Be.y=-Be.y),ys(Be.u)||(Be.S=pt(Be.u)),[Object.keys(Be).reduce((Lt,St)=>{const Jt=(Lt=>{switch(Lt){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(St);return Jt&&(Lt[Jt]=Be[St]),Lt},{}),Re,Ge]}(ur):[null,null,void 0];if(Vt(ur,"a")&&Vt(ur,"H"))throw new x("Can't include meridiem when specifying 24-hour format");return{input:Ee,tokens:Ge,regex:os,rawMatches:Es,matches:ur,result:xr,zone:Zr,specificOffset:er}}}function ui(Be,Ee){return Be?Xs.create(Ee,Be).formatDateTimeParts(function Ti(){return Xi||(Xi=sr.fromMillis(1555555555555)),Xi}()).map(ht=>function oa(Be,Ee){const{type:Re,value:Ge}=Be;if("literal"===Re)return{literal:!0,val:Ge};let Lt=Dl[Re];return"object"==typeof Lt&&(Lt=Lt[Ee[Re]]),Lt?{literal:!1,val:Lt}:void 0}(ht,Be)):null}const Yn=[0,31,59,90,120,151,181,212,243,273,304,334],qi=[0,31,60,91,121,152,182,213,244,274,305,335];function un(Be,Ee){return new cr("unit out of range",`you specified ${Ee} (of type ${typeof Ee}) as a ${Be}, which is invalid`)}function Co(Be,Ee,Re){const Ge=new Date(Date.UTC(Be,Ee-1,Re));Be<100&&Be>=0&&Ge.setUTCFullYear(Ge.getUTCFullYear()-1900);const ht=Ge.getUTCDay();return 0===ht?7:ht}function Oo(Be,Ee,Re){return Re+(jt(Be)?qi:Yn)[Ee-1]}function ci(Be,Ee){const Re=jt(Be)?qi:Yn,Ge=Re.findIndex(Lt=>Lt<Ee);return{month:Ge+1,day:Ee-Re[Ge]}}function Ii(Be){const{year:Ee,month:Re,day:Ge}=Be,ht=Oo(Ee,Re,Ge),Lt=Co(Ee,Re,Ge);let Jt,St=Math.floor((ht-Lt+10)/7);return St<1?(Jt=Ee-1,St=Bt(Jt)):St>Bt(Ee)?(Jt=Ee+1,St=1):Jt=Ee,{weekYear:Jt,weekNumber:St,weekday:Lt,...Le(Be)}}function ja(Be){const{weekYear:Ee,weekNumber:Re,weekday:Ge}=Be,ht=Co(Ee,1,4),Lt=us(Ee);let Jt,St=7*Re+Ge-ht-3;St<1?(Jt=Ee-1,St+=us(Jt)):St>Lt?(Jt=Ee+1,St-=us(Ee)):Jt=Ee;const{month:os,day:Es}=ci(Jt,St);return{year:Jt,month:os,day:Es,...Le(Be)}}function Po(Be){const{year:Ee,month:Re,day:Ge}=Be;return{year:Ee,ordinal:Oo(Ee,Re,Ge),...Le(Be)}}function Nn(Be){const{year:Ee,ordinal:Re}=Be,{month:Ge,day:ht}=ci(Ee,Re);return{year:Ee,month:Ge,day:ht,...Le(Be)}}function Ua(Be){const Ee=Ts(Be.year),Re=Nt(Be.month,1,12),Ge=Nt(Be.day,1,et(Be.year,Be.month));return Ee?Re?!Ge&&un("day",Be.day):un("month",Be.month):un("year",Be.year)}function Fa(Be){const{hour:Ee,minute:Re,second:Ge,millisecond:ht}=Be,Lt=Nt(Ee,0,23)||24===Ee&&0===Re&&0===Ge&&0===ht,St=Nt(Re,0,59),Jt=Nt(Ge,0,59),os=Nt(ht,0,999);return Lt?St?Jt?!os&&un("millisecond",ht):un("second",Ge):un("minute",Re):un("hour",Ee)}const wi="Invalid DateTime",Di=864e13;function cn(Be){return new cr("unsupported zone",`the zone "${Be.name}" is not supported`)}function To(Be){return null===Be.weekData&&(Be.weekData=Ii(Be.c)),Be.weekData}function Qn(Be,Ee){const Re={ts:Be.ts,zone:Be.zone,c:Be.c,o:Be.o,loc:Be.loc,invalid:Be.invalid};return new sr({...Re,...Ee,old:Re})}function Ba(Be,Ee,Re){let Ge=Be-60*Ee*1e3;const ht=Re.offset(Ge);if(Ee===ht)return[Ge,Ee];Ge-=60*(ht-Ee)*1e3;const Lt=Re.offset(Ge);return ht===Lt?[Ge,ht]:[Be-60*Math.min(ht,Lt)*1e3,Math.max(ht,Lt)]}function Wa(Be,Ee){const Re=new Date(Be+=60*Ee*1e3);return{year:Re.getUTCFullYear(),month:Re.getUTCMonth()+1,day:Re.getUTCDate(),hour:Re.getUTCHours(),minute:Re.getUTCMinutes(),second:Re.getUTCSeconds(),millisecond:Re.getUTCMilliseconds()}}function Io(Be,Ee,Re){return Ba(At(Be),Ee,Re)}function Na(Be,Ee){const Re=Be.o,Ge=Be.c.year+Math.trunc(Ee.years),ht=Be.c.month+Math.trunc(Ee.months)+3*Math.trunc(Ee.quarters),Lt={...Be.c,year:Ge,month:ht,day:Math.min(Be.c.day,et(Ge,ht))+Math.trunc(Ee.days)+7*Math.trunc(Ee.weeks)},St=vr.fromObject({years:Ee.years-Math.trunc(Ee.years),quarters:Ee.quarters-Math.trunc(Ee.quarters),months:Ee.months-Math.trunc(Ee.months),weeks:Ee.weeks-Math.trunc(Ee.weeks),days:Ee.days-Math.trunc(Ee.days),hours:Ee.hours,minutes:Ee.minutes,seconds:Ee.seconds,milliseconds:Ee.milliseconds}).as("milliseconds"),Jt=At(Lt);let[os,Es]=Ba(Jt,Re,Be.zone);return 0!==St&&(os+=St,Es=Be.zone.offset(os)),{ts:os,o:Es}}function Ai(Be,Ee,Re,Ge,ht,Lt){const{setZone:St,zone:Jt}=Re;if(Be&&0!==Object.keys(Be).length){const os=Ee||Jt,Es=sr.fromObject(Be,{...Re,zone:os,specificOffset:Lt});return St?Es:Es.setZone(Jt)}return sr.invalid(new cr("unparsable",`the input "${ht}" can't be parsed as ${Ge}`))}function wo(Be,Ee,Re=!0){return Be.isValid?Xs.create(Xe.create("en-US"),{allowZ:Re,forceSimple:!0}).formatDateTimeFromString(Be,Ee):null}function Za(Be,Ee){const Re=Be.c.year>9999||Be.c.year<0;let Ge="";return Re&&Be.c.year>=0&&(Ge+="+"),Ge+=ts(Be.c.year,Re?6:4),Ee?(Ge+="-",Ge+=ts(Be.c.month),Ge+="-",Ge+=ts(Be.c.day)):(Ge+=ts(Be.c.month),Ge+=ts(Be.c.day)),Ge}function $a(Be,Ee,Re,Ge,ht,Lt){let St=ts(Be.c.hour);return Ee?(St+=":",St+=ts(Be.c.minute),(0!==Be.c.second||!Re)&&(St+=":")):St+=ts(Be.c.minute),(0!==Be.c.second||!Re)&&(St+=ts(Be.c.second),(0!==Be.c.millisecond||!Ge)&&(St+=".",St+=ts(Be.c.millisecond,3))),ht&&(Be.isOffsetFixed&&0===Be.offset&&!Lt?St+="Z":Be.o<0?(St+="-",St+=ts(Math.trunc(-Be.o/60)),St+=":",St+=ts(Math.trunc(-Be.o%60))):(St+="+",St+=ts(Math.trunc(Be.o/60)),St+=":",St+=ts(Math.trunc(Be.o%60)))),Lt&&(St+="["+Be.zone.ianaName+"]"),St}const Ka={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},mc={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},On={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Ll=["year","month","day","hour","minute","second","millisecond"],Rl=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],jl=["year","ordinal","hour","minute","second","millisecond"];function Va(Be){const Ee={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[Be.toLowerCase()];if(!Ee)throw new se(Be);return Ee}function za(Be,Ee){const Re=ct(Ee.zone,as.defaultZone),Ge=Xe.fromObject(Ee),ht=as.now();let Lt,St;if(ys(Be.year))Lt=ht;else{for(const Es of Ll)ys(Be[Es])&&(Be[Es]=Ka[Es]);const Jt=Ua(Be)||Fa(Be);if(Jt)return sr.invalid(Jt);const os=Re.offset(ht);[Lt,St]=Io(Be,os,Re)}return new sr({ts:Lt,zone:Re,loc:Ge,o:St})}function Ga(Be,Ee,Re){const Ge=!!ys(Re.round)||Re.round,ht=(St,Jt)=>(St=Pt(St,Ge||Re.calendary?0:2,!0),Ee.loc.clone(Re).relFormatter(Re).format(St,Jt)),Lt=St=>Re.calendary?Ee.hasSame(Be,St)?0:Ee.startOf(St).diff(Be.startOf(St),St).get(St):Ee.diff(Be,St).get(St);if(Re.unit)return ht(Lt(Re.unit),Re.unit);for(const St of Re.units){const Jt=Lt(St);if(Math.abs(Jt)>=1)return ht(Jt,St)}return ht(Be>Ee?-0:0,Re.units[Re.units.length-1])}function Ul(Be){let Re,Ee={};return Be.length>0&&"object"==typeof Be[Be.length-1]?(Ee=Be[Be.length-1],Re=Array.from(Be).slice(0,Be.length-1)):Re=Array.from(Be),[Ee,Re]}class sr{constructor(Ee){const Re=Ee.zone||as.defaultZone;let Ge=Ee.invalid||(Number.isNaN(Ee.ts)?new cr("invalid input"):null)||(Re.isValid?null:cn(Re));this.ts=ys(Ee.ts)?as.now():Ee.ts;let ht=null,Lt=null;if(!Ge)if(Ee.old&&Ee.old.ts===this.ts&&Ee.old.zone.equals(Re))[ht,Lt]=[Ee.old.c,Ee.old.o];else{const Jt=Re.offset(this.ts);ht=Wa(this.ts,Jt),Ge=Number.isNaN(ht.year)?new cr("invalid input"):null,ht=Ge?null:ht,Lt=Ge?null:Jt}this._zone=Re,this.loc=Ee.loc||Xe.create(),this.invalid=Ge,this.weekData=null,this.c=ht,this.o=Lt,this.isLuxonDateTime=!0}static now(){return new sr({})}static local(){const[Ee,Re]=Ul(arguments),[Ge,ht,Lt,St,Jt,os,Es]=Re;return za({year:Ge,month:ht,day:Lt,hour:St,minute:Jt,second:os,millisecond:Es},Ee)}static utc(){const[Ee,Re]=Ul(arguments),[Ge,ht,Lt,St,Jt,os,Es]=Re;return Ee.zone=Qe.utcInstance,za({year:Ge,month:ht,day:Lt,hour:St,minute:Jt,second:os,millisecond:Es},Ee)}static fromJSDate(Ee,Re={}){const Ge=function mt(Be){return"[object Date]"===Object.prototype.toString.call(Be)}(Ee)?Ee.valueOf():NaN;if(Number.isNaN(Ge))return sr.invalid("invalid input");const ht=ct(Re.zone,as.defaultZone);return ht.isValid?new sr({ts:Ge,zone:ht,loc:Xe.fromObject(Re)}):sr.invalid(cn(ht))}static fromMillis(Ee,Re={}){if(bt(Ee))return Ee<-Di||Ee>Di?sr.invalid("Timestamp out of range"):new sr({ts:Ee,zone:ct(Re.zone,as.defaultZone),loc:Xe.fromObject(Re)});throw new V(`fromMillis requires a numerical input, but received a ${typeof Ee} with value ${Ee}`)}static fromSeconds(Ee,Re={}){if(bt(Ee))return new sr({ts:1e3*Ee,zone:ct(Re.zone,as.defaultZone),loc:Xe.fromObject(Re)});throw new V("fromSeconds requires a numerical input")}static fromObject(Ee,Re={}){Ee=Ee||{};const Ge=ct(Re.zone,as.defaultZone);if(!Ge.isValid)return sr.invalid(cn(Ge));const ht=as.now(),Lt=ys(Re.specificOffset)?Ge.offset(ht):Re.specificOffset,St=mr(Ee,Va),Jt=!ys(St.ordinal),os=!ys(St.year),Es=!ys(St.month)||!ys(St.day),ur=os||Es,xr=St.weekYear||St.weekNumber,Zr=Xe.fromObject(Re);if((ur||Jt)&&xr)throw new x("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Es&&Jt)throw new x("Can't mix ordinal dates with month/day");const er=xr||St.weekday&&!ur;let Lr,hi,Rn=Wa(ht,Lt);er?(Lr=Rl,hi=mc,Rn=Ii(Rn)):Jt?(Lr=jl,hi=On,Rn=Po(Rn)):(Lr=Ll,hi=Ka);let la=!1;for(const xi of Lr)ys(St[xi])?St[xi]=la?hi[xi]:Rn[xi]:la=!0;const _n=er?function So(Be){const Ee=Ts(Be.weekYear),Re=Nt(Be.weekNumber,1,Bt(Be.weekYear)),Ge=Nt(Be.weekday,1,7);return Ee?Re?!Ge&&un("weekday",Be.weekday):un("week",Be.week):un("weekYear",Be.weekYear)}(St):Jt?function xl(Be){const Ee=Ts(Be.year),Re=Nt(Be.ordinal,1,us(Be.year));return Ee?!Re&&un("ordinal",Be.ordinal):un("year",Be.year)}(St):Ua(St),Do=_n||Fa(St);if(Do)return sr.invalid(Do);const Fl=er?ja(St):Jt?Nn(St):St,[ua,Bl]=Io(Fl,Lt,Ge),Ha=new sr({ts:ua,zone:Ge,o:Bl,loc:Zr});return St.weekday&&ur&&Ee.weekday!==Ha.weekday?sr.invalid("mismatched weekday",`you can't specify both a weekday of ${St.weekday} and a date of ${Ha.toISO()}`):Ha}static fromISO(Ee,Re={}){const[Ge,ht]=function Yt(Be){return xs(Be,[Ze,Ot],[Ye,xt],[at,$t],[vt,Qt])}(Ee);return Ai(Ge,ht,Re,"ISO 8601",Ee)}static fromRFC2822(Ee,Re={}){const[Ge,ht]=function ns(Be){return xs(function ds(Be){return Be.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(Be),[yt,Xt])}(Ee);return Ai(Ge,ht,Re,"RFC 2822",Ee)}static fromHTTP(Ee,Re={}){const[Ge,ht]=function Ss(Be){return xs(Be,[Fs,kr],[Cr,kr],[yr,rn])}(Ee);return Ai(Ge,ht,Re,"HTTP",Re)}static fromFormat(Ee,Re,Ge={}){if(ys(Ee)||ys(Re))throw new V("fromFormat requires an input string and a format");const{locale:ht=null,numberingSystem:Lt=null}=Ge,St=Xe.fromOpts({locale:ht,numberingSystem:Lt,defaultToEN:!0}),[Jt,os,Es,ur]=function Al(Be,Ee,Re){const{result:Ge,zone:ht,specificOffset:Lt,invalidReason:St}=Ln(Be,Ee,Re);return[Ge,ht,Lt,St]}(St,Ee,Re);return ur?sr.invalid(ur):Ai(Jt,os,Ge,`format ${Re}`,Ee,Es)}static fromString(Ee,Re,Ge={}){return sr.fromFormat(Ee,Re,Ge)}static fromSQL(Ee,Re={}){const[Ge,ht]=function ei(Be){return xs(Be,[fn,Ot],[mn,Gr])}(Ee);return Ai(Ge,ht,Re,"SQL",Ee)}static invalid(Ee,Re=null){if(!Ee)throw new V("need to specify a reason the DateTime is invalid");const Ge=Ee instanceof cr?Ee:new cr(Ee,Re);if(as.throwOnInvalid)throw new T(Ge);return new sr({invalid:Ge})}static isDateTime(Ee){return Ee&&Ee.isLuxonDateTime||!1}static parseFormatForOpts(Ee,Re={}){const Ge=ui(Ee,Xe.fromObject(Re));return Ge?Ge.map(ht=>ht?ht.val:null).join(""):null}static expandFormat(Ee,Re={}){return Ra(Xs.parseFormat(Ee),Xe.fromObject(Re)).map(ht=>ht.val).join("")}get(Ee){return this[Ee]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?To(this).weekYear:NaN}get weekNumber(){return this.isValid?To(this).weekNumber:NaN}get weekday(){return this.isValid?To(this).weekday:NaN}get ordinal(){return this.isValid?Po(this.c).ordinal:NaN}get monthShort(){return this.isValid?Eo.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Eo.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Eo.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Eo.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}get isInLeapYear(){return jt(this.year)}get daysInMonth(){return et(this.year,this.month)}get daysInYear(){return this.isValid?us(this.year):NaN}get weeksInWeekYear(){return this.isValid?Bt(this.weekYear):NaN}resolvedLocaleOptions(Ee={}){const{locale:Re,numberingSystem:Ge,calendar:ht}=Xs.create(this.loc.clone(Ee),Ee).resolvedOptions(this);return{locale:Re,numberingSystem:Ge,outputCalendar:ht}}toUTC(Ee=0,Re={}){return this.setZone(Qe.instance(Ee),Re)}toLocal(){return this.setZone(as.defaultZone)}setZone(Ee,{keepLocalTime:Re=!1,keepCalendarTime:Ge=!1}={}){if((Ee=ct(Ee,as.defaultZone)).equals(this.zone))return this;if(Ee.isValid){let ht=this.ts;if(Re||Ge){const Lt=Ee.offset(this.ts),St=this.toObject();[ht]=Io(St,Lt,Ee)}return Qn(this,{ts:ht,zone:Ee})}return sr.invalid(cn(Ee))}reconfigure({locale:Ee,numberingSystem:Re,outputCalendar:Ge}={}){return Qn(this,{loc:this.loc.clone({locale:Ee,numberingSystem:Re,outputCalendar:Ge})})}setLocale(Ee){return this.reconfigure({locale:Ee})}set(Ee){if(!this.isValid)return this;const Re=mr(Ee,Va),Ge=!ys(Re.weekYear)||!ys(Re.weekNumber)||!ys(Re.weekday),ht=!ys(Re.ordinal),Lt=!ys(Re.year),St=!ys(Re.month)||!ys(Re.day);if((Lt||St||ht)&&(Re.weekYear||Re.weekNumber))throw new x("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(St&&ht)throw new x("Can't mix ordinal dates with month/day");let Es;Ge?Es=ja({...Ii(this.c),...Re}):ys(Re.ordinal)?(Es={...this.toObject(),...Re},ys(Re.day)&&(Es.day=Math.min(et(Es.year,Es.month),Es.day))):Es=Nn({...Po(this.c),...Re});const[ur,xr]=Io(Es,this.o,this.zone);return Qn(this,{ts:ur,o:xr})}plus(Ee){return this.isValid?Qn(this,Na(this,vr.fromDurationLike(Ee))):this}minus(Ee){return this.isValid?Qn(this,Na(this,vr.fromDurationLike(Ee).negate())):this}startOf(Ee){if(!this.isValid)return this;const Re={},Ge=vr.normalizeUnit(Ee);switch(Ge){case"years":Re.month=1;case"quarters":case"months":Re.day=1;case"weeks":case"days":Re.hour=0;case"hours":Re.minute=0;case"minutes":Re.second=0;case"seconds":Re.millisecond=0}if("weeks"===Ge&&(Re.weekday=1),"quarters"===Ge){const ht=Math.ceil(this.month/3);Re.month=3*(ht-1)+1}return this.set(Re)}endOf(Ee){return this.isValid?this.plus({[Ee]:1}).startOf(Ee).minus(1):this}toFormat(Ee,Re={}){return this.isValid?Xs.create(this.loc.redefaultToEN(Re)).formatDateTimeFromString(this,Ee):wi}toLocaleString(Ee=J,Re={}){return this.isValid?Xs.create(this.loc.clone(Re),Ee).formatDateTime(this):wi}toLocaleParts(Ee={}){return this.isValid?Xs.create(this.loc.clone(Ee),Ee).formatDateTimeParts(this):[]}toISO({format:Ee="extended",suppressSeconds:Re=!1,suppressMilliseconds:Ge=!1,includeOffset:ht=!0,extendedZone:Lt=!1}={}){if(!this.isValid)return null;const St="extended"===Ee;let Jt=Za(this,St);return Jt+="T",Jt+=$a(this,St,Re,Ge,ht,Lt),Jt}toISODate({format:Ee="extended"}={}){return this.isValid?Za(this,"extended"===Ee):null}toISOWeekDate(){return wo(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:Ee=!1,suppressSeconds:Re=!1,includeOffset:Ge=!0,includePrefix:ht=!1,extendedZone:Lt=!1,format:St="extended"}={}){return this.isValid?(ht?"T":"")+$a(this,"extended"===St,Re,Ee,Ge,Lt):null}toRFC2822(){return wo(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return wo(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Za(this,!0):null}toSQLTime({includeOffset:Ee=!0,includeZone:Re=!1,includeOffsetSpace:Ge=!0}={}){let ht="HH:mm:ss.SSS";return(Re||Ee)&&(Ge&&(ht+=" "),Re?ht+="z":Ee&&(ht+="ZZ")),wo(this,ht,!0)}toSQL(Ee={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(Ee)}`:null}toString(){return this.isValid?this.toISO():wi}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(Ee={}){if(!this.isValid)return{};const Re={...this.c};return Ee.includeConfig&&(Re.outputCalendar=this.outputCalendar,Re.numberingSystem=this.loc.numberingSystem,Re.locale=this.loc.locale),Re}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(Ee,Re="milliseconds",Ge={}){if(!this.isValid||!Ee.isValid)return vr.invalid("created by diffing an invalid DateTime");const ht={locale:this.locale,numberingSystem:this.numberingSystem,...Ge},Lt=function It(Be){return Array.isArray(Be)?Be:[Be]}(Re).map(vr.normalizeUnit),St=Ee.valueOf()>this.valueOf(),Es=function Da(Be,Ee,Re,Ge){let[ht,Lt,St,Jt]=function wa(Be,Ee,Re){const Ge=[["years",(os,Es)=>Es.year-os.year],["quarters",(os,Es)=>Es.quarter-os.quarter+4*(Es.year-os.year)],["months",(os,Es)=>Es.month-os.month+12*(Es.year-os.year)],["weeks",(os,Es)=>{const ur=sa(os,Es);return(ur-ur%7)/7}],["days",sa]],ht={},Lt=Be;let St,Jt;for(const[os,Es]of Ge)Re.indexOf(os)>=0&&(St=os,ht[os]=Es(Be,Ee),Jt=Lt.plus(ht),Jt>Ee?(ht[os]--,Be=Lt.plus(ht)):Be=Jt);return[Be,ht,Jt,St]}(Be,Ee,Re);const os=Ee-ht,Es=Re.filter(xr=>["hours","minutes","seconds","milliseconds"].indexOf(xr)>=0);0===Es.length&&(St<Ee&&(St=ht.plus({[Jt]:1})),St!==ht&&(Lt[Jt]=(Lt[Jt]||0)+os/(St-ht)));const ur=vr.fromObject(Lt,Ge);return Es.length>0?vr.fromMillis(os,Ge).shiftTo(...Es).plus(ur):ur}(St?this:Ee,St?Ee:this,Lt,ht);return St?Es.negate():Es}diffNow(Ee="milliseconds",Re={}){return this.diff(sr.now(),Ee,Re)}until(Ee){return this.isValid?Ur.fromDateTimes(this,Ee):this}hasSame(Ee,Re){if(!this.isValid)return!1;const Ge=Ee.valueOf(),ht=this.setZone(Ee.zone,{keepLocalTime:!0});return ht.startOf(Re)<=Ge&&Ge<=ht.endOf(Re)}equals(Ee){return this.isValid&&Ee.isValid&&this.valueOf()===Ee.valueOf()&&this.zone.equals(Ee.zone)&&this.loc.equals(Ee.loc)}toRelative(Ee={}){if(!this.isValid)return null;const Re=Ee.base||sr.fromObject({},{zone:this.zone}),Ge=Ee.padding?this<Re?-Ee.padding:Ee.padding:0;let ht=["years","months","days","hours","minutes","seconds"],Lt=Ee.unit;return Array.isArray(Ee.unit)&&(ht=Ee.unit,Lt=void 0),Ga(Re,this.plus(Ge),{...Ee,numeric:"always",units:ht,unit:Lt})}toRelativeCalendar(Ee={}){return this.isValid?Ga(Ee.base||sr.fromObject({},{zone:this.zone}),this,{...Ee,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...Ee){if(!Ee.every(sr.isDateTime))throw new V("min requires all arguments be DateTimes");return Zt(Ee,Re=>Re.valueOf(),Math.min)}static max(...Ee){if(!Ee.every(sr.isDateTime))throw new V("max requires all arguments be DateTimes");return Zt(Ee,Re=>Re.valueOf(),Math.max)}static fromFormatExplain(Ee,Re,Ge={}){const{locale:ht=null,numberingSystem:Lt=null}=Ge;return Ln(Xe.fromOpts({locale:ht,numberingSystem:Lt,defaultToEN:!0}),Ee,Re)}static fromStringExplain(Ee,Re,Ge={}){return sr.fromFormatExplain(Ee,Re,Ge)}static get DATE_SHORT(){return J}static get DATE_MED(){return Q}static get DATE_MED_WITH_WEEKDAY(){return G}static get DATE_FULL(){return k}static get DATE_HUGE(){return z}static get TIME_SIMPLE(){return C}static get TIME_WITH_SECONDS(){return D}static get TIME_WITH_SHORT_OFFSET(){return F}static get TIME_WITH_LONG_OFFSET(){return B}static get TIME_24_SIMPLE(){return $}static get TIME_24_WITH_SECONDS(){return X}static get TIME_24_WITH_SHORT_OFFSET(){return q}static get TIME_24_WITH_LONG_OFFSET(){return Y}static get DATETIME_SHORT(){return ae}static get DATETIME_SHORT_WITH_SECONDS(){return he}static get DATETIME_MED(){return ne}static get DATETIME_MED_WITH_SECONDS(){return ue}static get DATETIME_MED_WITH_WEEKDAY(){return te}static get DATETIME_FULL(){return ie}static get DATETIME_FULL_WITH_SECONDS(){return fe}static get DATETIME_HUGE(){return _e}static get DATETIME_HUGE_WITH_SECONDS(){return de}}function di(Be){if(sr.isDateTime(Be))return Be;if(Be&&Be.valueOf&&bt(Be.valueOf()))return sr.fromJSDate(Be);if(Be&&"object"==typeof Be)return sr.fromObject(Be);throw new V(`Unknown datetime argument: ${Be}, of type ${typeof Be}`)}}}]);
//# sourceMappingURL=7943.90d40d5b97803df9.js.map