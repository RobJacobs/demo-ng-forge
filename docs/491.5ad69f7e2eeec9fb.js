"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[491],{4635:(T,v,i)=>{i.d(v,{U:()=>b});var u=i(2235),p=i(9736),h=i(4135),t=i(5162),C=i(1699),m=i(4860);let b=(()=>{class g{constructor(s){this.httpClient=s}getProfile(){return this.httpClient.get("mock-data/profile.json")}getPeople(s){return this.httpClient.get("mock-data/people.json").pipe((0,p.U)(c=>{let d=c.length;return s&&(s.filters?.length&&(d=(c=t.c.filterData(c,s.filters.map(_=>({key:_.property,value:_.value,strict:"gender"===_.property||"id"===_.property})))).length),s.sort&&(c=t.c.sortData(c,s.sort.property,"string",s.sort.direction)),(0,h.hj)(s.skip)&&(0,h.hj)(s.take)&&(c=c.slice(s.skip,s.skip+s.take))),{count:d,data:c}}))}getPerson(s){return this.httpClient.get("mock-data/people.json").pipe((0,p.U)(c=>c.find(d=>d.id.toString()===s.toString())))}getSearches(s){return new u.y(c=>{let d=localStorage.getItem(s);(0,h.$K)(d)&&(d=JSON.parse(d)),c.next(d),c.complete()})}saveSearches(s,c){return new u.y(d=>{localStorage.setItem(s,JSON.stringify(c)),d.next(!0),d.complete()})}getLongRequest(){return this.httpClient.get("http://localhost:5000/long-request")}static#t=this.\u0275fac=function(c){return new(c||g)(C.LFG(m.eN))};static#e=this.\u0275prov=C.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},7491:(T,v,i)=>{i.r(v),i.d(v,{TestModule:()=>w});var u=i(6575),p=i(1076),h=i(2542),t=i(1699);let C=(()=>{class n{constructor(){}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-test"]],decls:1,vars:0,template:function(o,r){1&o&&t._UZ(0,"router-outlet")},dependencies:[p.lC],styles:["[_nghost-%COMP%]{display:block;overflow:hidden}"]})}return n})();var m=i(8071),b=i(5043),g=i(9422),x=i(9736),s=i(3738),c=i(274),d=i(4635),_=i(9476);function O(n,f){if(1&n&&(t.TgZ(0,"th",12)(1,"div",13)(2,"span",14),t._uU(3),t.qZA()()()),2&n){const e=f.$implicit;t.xp6(3),t.Oqu(e.title)}}function $(n,f){if(1&n){const e=t.EpF();t.TgZ(0,"forge-icon-button",20)(1,"button",2),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.toggleLeaf(r))}),t._UZ(2,"forge-icon",21),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("name",e.isExpanded?"keyboard_arrow_down":"keyboard_arrow_right")}}function P(n,f){if(1&n&&(t.TgZ(0,"td",17)(1,"div",18),t.YNc(2,$,3,1,"forge-icon-button",19),t._uU(3),t.qZA()()),2&n){const e=f.$implicit,o=f.index,r=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",0===o),t.xp6(1),t.hij(" ",r[e.key]," ")}}function M(n,f){if(1&n&&(t.TgZ(0,"tr",15),t.YNc(1,P,4,2,"td",16),t.qZA()),2&n){const e=f.$implicit,o=t.oxw();t.Udp("--level",e.level),t.xp6(1),t.Q6J("ngForOf",o.tableDef.columns)}}const U=[{path:"",component:C,children:[{path:"parent",component:(()=>{class n{constructor(e,o,r){this.router=e,this.appDataService=o,this.appCache=r,this.recordset=(0,t.tdS)([{id:-1,description:""}]),this.record=(0,t.tdS)({id:-1}),this.recordset$=new m.X([]),this.record$=new m.X({id:-1}),this.recordsetTotal=0,this.recordsetTotalComputed=(0,t.Flj)(()=>(console.log("computed"),this.recordset().length)),(0,t.cEC)(()=>{console.log("effect"),this.recordsetTotal=this.recordset().length}),this.recordset$.pipe((0,b.O)(void 0),(0,g.G)(),(0,x.U)(([l,a])=>({prev:l,curr:a}))).subscribe(l=>{console.log(l)}),this.record$.pipe((0,b.O)(void 0),(0,g.G)(),(0,x.U)(([l,a])=>({prev:l,curr:a}))).subscribe(l=>{console.log(l)})}onNavigate(e){this.router.navigate([e])}onMakeRequest(){this.recordset()[0].description="description",this.record().description="description";const e=[...this.recordset$.value],o=this.recordset$.value.length,r=o+100;for(let a=o;a<r;a++)e.push({id:a,description:`${a} - Description`});this.recordset$.next(e),this.record$.next({id:o,description:`${o} - Description`})}getLongRequest(){return this.appDataService.getLongRequest().pipe((0,s.b)({next:e=>console.log(e),error:e=>console.log(e)}),(0,c.R)(this.appCache.cancelHttpRequests))}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(p.F0),t.Y36(d.U),t.Y36(_.g))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-parent"]],decls:20,vars:7,consts:[[1,"header"],["slot","start",1,"forge-typography--title"],[1,"body"],["type","raised"],["type","button",3,"click"],["type","raised",2,"margin","16px"]],template:function(o,r){1&o&&(t.TgZ(0,"forge-toolbar",0)(1,"h2",1),t._uU(2,"Parent"),t.qZA()(),t.TgZ(3,"div",2)(4,"p"),t._uU(5,"Parent content"),t.qZA(),t.TgZ(6,"forge-button",3)(7,"button",4),t.NdJ("click",function(){return r.onNavigate("test/child")}),t._uU(8,"View child"),t.qZA()(),t.TgZ(9,"forge-button",5)(10,"button",4),t.NdJ("click",function(){return r.onMakeRequest()}),t._uU(11,"Make request"),t.qZA()(),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.ALo(16,"json"),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.ALo(19,"json"),t.qZA()()),2&o&&(t.xp6(13),t.hij(" ",r.recordsetTotal," "),t.xp6(2),t.hij(" ",t.lcZ(16,3,r.recordset())," "),t.xp6(3),t.hij(" ",t.lcZ(19,5,r.record())," "))},dependencies:[u.Ts],styles:["[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px}"]})}return n})()},{path:"child",component:(()=>{class n{constructor(e){this.router=e,this.tableDef={columns:[{title:"Id",key:"id"},{title:"Description",key:"description"}]},this.recordset$=new m.X([]),this.getRecords()}onNavigate(e){this.router.navigate([e])}toggleLeaf(e){const o=this.recordset$.value.indexOf(e)+1,r=[...this.recordset$.value];if(e.isExpanded){let l=0;for(let a=o;a<r.length&&!(r[a].level<=e.level);a++)l+=1;r.splice(o,l)}else{const l=e.level+1,a=[];for(let y=0;y<10;y++)a.push({id:`${l}-${y}`,description:`${l}-${y} description`,expandable:!0,level:l});r.splice(o,0,...a)}e.isExpanded=!e.isExpanded,this.recordset$.next(r)}getRecords(){const e=this.recordset$.value.length,o=[...this.recordset$.value];for(let r=e;r<e+10;r++)o.push({id:`0-${r}`,description:`0-${r} description`,expandable:!0,level:0});this.recordset$.next(o)}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(p.F0))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-child"]],decls:16,vars:2,consts:[[1,"header"],["slot","start"],["type","button",3,"click"],["name","arrow_back"],[1,"forge-typography--title"],[1,"body"],["itemSize","48"],[1,"forge-table"],["table",""],[1,"forge-table-row","forge-table-head__row"],["class","forge-table-cell forge-table-head__cell",4,"ngFor","ngForOf"],["class","forge-table-row forge-table-body__row",3,"--level",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"forge-table-cell","forge-table-head__cell"],[1,"forge-table-head__cell-container"],[1,"forge-table-head__cell-text"],[1,"forge-table-row","forge-table-body__row"],["class","forge-table-cell forge-table-body__cell",4,"ngFor","ngForOf"],[1,"forge-table-cell","forge-table-body__cell"],[1,"forge-table-cell__container"],["dense","",4,"ngIf"],["dense",""],[3,"name"]],template:function(o,r){1&o&&(t.TgZ(0,"forge-toolbar",0)(1,"div",1)(2,"forge-icon-button")(3,"button",2),t.NdJ("click",function(){return r.onNavigate("test/parent")}),t._UZ(4,"forge-icon",3),t.qZA()(),t.TgZ(5,"h2",4),t._uU(6,"Child"),t.qZA()()(),t.TgZ(7,"div",5)(8,"cdk-virtual-scroll-viewport",6)(9,"table",7,8)(11,"thead")(12,"tr",9),t.YNc(13,O,4,1,"th",10),t.qZA()(),t.TgZ(14,"tbody"),t.YNc(15,M,2,3,"tr",11),t.qZA()()()()),2&o&&(t.xp6(13),t.Q6J("ngForOf",r.tableDef.columns),t.xp6(2),t.Q6J("cdkVirtualForOf",r.recordset$))},dependencies:[u.sg,u.O5,h.xd,h.x0,h.N7],styles:["\n\n\n\n\n[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%}  .forge-table-body__row{height:48px}  .forge-table-body__cell:first-child .forge-table-cell__container{padding-left:calc(var(--level) * 16px)}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px}cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:480px}"]})}return n})()},{path:"",redirectTo:"parent",pathMatch:"full"}]}];let w=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[u.ez,p.Bz.forChild(U),h.Cl,p.Bz]})}return n})()}}]);
//# sourceMappingURL=491.5ad69f7e2eeec9fb.js.map