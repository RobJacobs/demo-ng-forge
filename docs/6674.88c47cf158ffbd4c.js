"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[6674],{16674:(U,y,t)=>{t.r(y),t.d(y,{createLabelFunction:()=>T,formatField:()=>v});var D=t(71670),c=t(32995),O=t(28191),M=t(53661),h=t(84836),P=t(39634),C=t(21230),p=t(60802),W=t(77238);const E=O.Z.getLogger("esri.layers.support.labelFormatUtils"),g={type:"simple",evaluate:()=>null},L={getAttribute:(r,n)=>r.field(n)};function T(r,n,e){return m.apply(this,arguments)}function m(){return(m=(0,D.Z)(function*(r,n,e){if(!r||!r.symbol||!n)return g;const s=r.where,o=(0,p.hV)(r),_=s?yield t.e(753).then(t.bind(t,30753)):null;let i;if("arcade"===o.type){const a=yield(0,W.WW)(o.expression,e,n);if((0,M.Wi)(a))return g;i={type:"arcade",evaluate(u){try{const l=a.evaluate({$feature:"attributes"in u?a.repurposeFeature(u):u});if(null!=l)return l.toString()}catch{E.error(new c.Z("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:u,expression:o}))}return null},needsHydrationToEvaluate:()=>null==(0,p.el)(o.expression)}}else i={type:"simple",evaluate:a=>o.expression.replace(/{[^}]*}/g,u=>{const l=u.slice(1,-1),d=n.get(l);if(!d)return u;let f=null;return"attributes"in a?a&&a.attributes&&(f=a.attributes[d.name]):f=a.field(d.name),null==f?"":v(f,d)})};if(s){let a;try{a=_.WhereClause.create(s,n)}catch(l){return E.error(new c.Z("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:s,error:l})),g}const u=i.evaluate;i.evaluate=l=>{const d="attributes"in l?void 0:L;try{if(a.testFeature(l,d))return u(l)}catch(f){E.error(new c.Z("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:s,feature:l,error:f}))}return null}}return i})).apply(this,arguments)}function v(r,n){if(null==r)return"";const e=n.domain;if(e)if("codedValue"===e.type||"coded-value"===e.type){const o=r;for(const _ of e.codedValues)if(_.code===o)return _.name}else if("range"===e.type){const o=+r;if(("range"in e?e.range[0]:e.minValue)<=o&&o<=("range"in e?e.range[1]:e.maxValue))return e.name}let s=r;return"date"===n.type||"esriFieldTypeDate"===n.type?s=(0,h.p6)(s,(0,h.Ze)("short-date")):(0,C.H7)(n)&&(s=(0,P.uf)(+s)),s||""}}}]);
//# sourceMappingURL=6674.88c47cf158ffbd4c.js.map