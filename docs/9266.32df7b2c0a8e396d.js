"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[9266],{59266:(k,N,u)=>{u.d(N,{q:()=>I});var d=u(71670),b=u(19420),M=u(32995),Y=u(88684),f=u(53661),T=u(9029),V=u(30801),R=u(82769),v=u(73327),x=u(6848),m=u(71949),y=u(71182),_=u(42758),p=u(53492),B=u(50805),P=u(96290),F=u(19482),q=u(29374),C=u(13831),L=u(72190),X=u(22262),D=u(21272),ee=u(19346),te=u(77238),$=u(81905);const z="feature-store:unsupported-query",c=new T.WJ(2e6);let g=0;class I{constructor(e){this._geometryQueryCache=null,this._changeHandle=null,this.capabilities={query:q.g},this.geometryType=e.geometryType,this.hasM=!!e.hasM,this.hasZ=!!e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache()),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new T.Xq(g+++"$$",c)),this.fieldsIndex=new ee.Z(e.fields),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=(0,f.hw)(this._frameTask),this.clearCache(),(0,f.SC)(this._geometryQueryCache),this._changeHandle=(0,f.hw)(this._changeHandle),(0,f.SC)(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear(),this._allFeaturesPromise=null,this._timeExtentPromise=null}executeQuery(e,r){var t=this;return(0,d.Z)(function*(){try{return(yield t._executeQuery(e,{},r)).createQueryResponse()}catch(i){if(i!==D.vF)throw i;return new C.y([],e,t).createQueryResponse()}})()}executeQueryForCount(e={},r){var t=this;return(0,d.Z)(function*(){try{return(yield t._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},r)).createQueryResponseForCount()}catch(i){if(i!==D.vF)throw i;return 0}})()}executeQueryForExtent(e,r){var t=this;return(0,d.Z)(function*(){const i=e.outSR;try{const s=yield t._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},r),n=s.size;return n?{count:n,extent:yield t._getBounds(s.items,s.spatialReference,i||t.spatialReference)}:{count:0,extent:null}}catch(s){if(s===D.vF)return{count:0,extent:null};throw s}})()}executeQueryForIds(e,r){var t=this;return(0,d.Z)(function*(){return t.executeQueryForIdSet(e,r).then(i=>Array.from(i))})()}executeQueryForIdSet(e,r){var t=this;return(0,d.Z)(function*(){try{const i=yield t._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},r),s=i.items,n=new Set;return yield t._reschedule(()=>{for(const a of s)n.add(i.featureAdapter.getObjectId(a))},r),n}catch(i){if(i===D.vF)return new Set;throw i}})()}executeQueryForSnapping(e,r){var t=this;return(0,d.Z)(function*(){const{point:i,distance:s,types:n}=e;if(n===C.r.NONE)return{candidates:[]};const a=yield t._reschedule(()=>t._checkQuerySupport(e.query),r),o=!(0,p.fS)(i.spatialReference,t.spatialReference);o&&(yield(0,F._W)(i.spatialReference,t.spatialReference));const S="number"==typeof s?s:s.x,h="number"==typeof s?s:s.y,E={xmin:i.x-S,xmax:i.x+S,ymin:i.y-h,ymax:i.y+h,spatialReference:i.spatialReference},A=o?(0,F.iV)(E,t.spatialReference):E;if(!A)return{candidates:[]};const U=(yield(0,_.aX)((0,y.im)(i),null,{signal:r}))[0],W=(yield(0,_.aX)((0,y.im)(A),null,{signal:r}))[0];if((0,f.Wi)(U)||(0,f.Wi)(W))return{candidates:[]};const K=new C.y(yield t._reschedule(()=>t._searchFeatures(t._getQueryBBoxes(W.toJSON())),r),a,t);yield t._reschedule(()=>t._executeObjectIdsQuery(K),r),yield t._reschedule(()=>t._executeTimeQuery(K),r),yield t._reschedule(()=>t._executeAttributesQuery(K),r);const Q=U.toJSON(),G=o?(0,F.iV)(Q,t.spatialReference):Q,w=o?Math.max(A.xmax-A.xmin,A.ymax-A.ymin)/2:s;return K.createSnappingResponse({...e,point:G,distance:w},i.spatialReference)})()}executeQueryForLatestObservations(e,r){var t=this;return(0,d.Z)(function*(){if(!t.timeInfo||!t.timeInfo.trackIdField)throw new M.Z(z,"Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:t.timeInfo});try{const i=yield t._executeQuery(e,{},r);return yield t._reschedule(()=>t._filterLatest(i),r),i.createQueryResponse()}catch(i){if(i!==D.vF)throw i;return new C.y([],e,t).createQueryResponse()}})()}executeQueryForSummaryStatistics(e={},r,t){var i=this;return(0,d.Z)(function*(){const{field:s,normalizationField:n,valueExpression:a}=r;return(yield i._getQueryEngineResultForStats(e,{field:s,normalizationField:n,valueExpression:a},t)).createSummaryStatisticsResponse(r)})()}executeQueryForUniqueValues(e={},r,t){var i=this;return(0,d.Z)(function*(){const{field:s,field2:n,field3:a,valueExpression:o}=r;return(yield i._getQueryEngineResultForStats(e,{field:s,field2:n,field3:a,valueExpression:o},t)).createUniqueValuesResponse(r)})()}executeQueryForClassBreaks(e={},r,t){var i=this;return(0,d.Z)(function*(){const{field:s,normalizationField:n,valueExpression:a}=r;return(yield i._getQueryEngineResultForStats(e,{field:s,normalizationField:n,valueExpression:a},t)).createClassBreaksResponse(r)})()}executeQueryForHistogram(e={},r,t){var i=this;return(0,d.Z)(function*(){const{field:s,normalizationField:n,valueExpression:a}=r;return(yield i._getQueryEngineResultForStats(e,{field:s,normalizationField:n,valueExpression:a},t)).createHistogramResponse(r)})()}fetchRecomputedExtents(e){var r=this;return(0,d.Z)(function*(){const[t,i]=yield Promise.all(["getFullExtent"in r.featureStore&&r.featureStore.getFullExtent?Promise.resolve(r.featureStore.getFullExtent(r.spatialReference)):r._getBounds(yield r._getAllFeatures(),r.spatialReference,r.spatialReference),(0,f.pC)(r._timeExtentPromise)?r._timeExtentPromise:r._timeExtentPromise=(0,X.R)(r.timeInfo,r.featureStore)]);return(0,V.k_)(e),{fullExtent:t,timeExtent:i}})()}_getBounds(e,r,t){var i=this;return(0,d.Z)(function*(){const s=(0,v.t8)((0,v.Ue)(),v.Gv);yield i.featureStore.forEachBounds(e,o=>(0,v.TC)(s,o));const n={xmin:s[0],ymin:s[1],xmax:s[3],ymax:s[4],spatialReference:(0,D.S2)(i.spatialReference)};i.hasZ&&isFinite(s[2])&&isFinite(s[5])&&(n.zmin=s[2],n.zmax=s[5]);const a=(0,F.iV)(n,r,t);if(a.spatialReference=(0,D.S2)(t),a.xmax-a.xmin==0){const o=(0,R.c9)(a.spatialReference);a.xmin-=o,a.xmax+=o}if(a.ymax-a.ymin==0){const o=(0,R.c9)(a.spatialReference);a.ymin-=o,a.ymax+=o}if(i.hasZ&&null!=a.zmin&&null!=a.zmax&&a.zmax-a.zmin==0){const o=(0,R.c9)(a.spatialReference);a.zmin-=o,a.zmax+=o}return a})()}_schedule(e,r){var t=this;return(0,d.Z)(function*(){return(0,f.pC)(t._frameTask)?t._frameTask.schedule(e,r):e($.G5)})()}_reschedule(e,r){var t=this;return(0,d.Z)(function*(){return(0,f.pC)(t._frameTask)?t._frameTask.reschedule(e,r):e($.G5)})()}_getAllFeaturesQueryEngineResult(e){var r=this;return(0,d.Z)(function*(){return new C.y(yield r._getAllFeatures(),e,r)})()}_getAllFeatures(){var e=this;return(0,d.Z)(function*(){if((0,f.Wi)(e._allFeaturesPromise)){const i=[];e._allFeaturesPromise=(0,d.Z)(function*(){yield e.featureStore.forEach(s=>i.push(s))})().then(()=>i)}const r=e._allFeaturesPromise,t=yield r;return r===e._allFeaturesPromise?t.slice():e._getAllFeatures()})()}_executeQuery(e,r,t){var i=this;return(0,d.Z)(function*(){e=(0,Y.d9)(e),e=yield i._schedule(()=>(0,D.Up)(e,i.definitionExpression,i.spatialReference),t),e=yield i._reschedule(()=>i._checkQuerySupport(e),t),e={...e,...r};const s=yield i._reschedule(()=>i._executeSceneFilterQuery(e,t),t),n=yield i._reschedule(()=>i._executeGeometryQuery(e,s,t),t);return yield i._reschedule(()=>i._executeAggregateIdsQuery(n),t),yield i._reschedule(()=>i._executeObjectIdsQuery(n),t),yield i._reschedule(()=>i._executeTimeQuery(n),t),yield i._reschedule(()=>i._executeAttributesQuery(n),t),n})()}_executeSceneFilterQuery(e,r){var t=this;return(0,d.Z)(function*(){if((0,f.Wi)(e.sceneFilter))return null;const{outSR:i,returnGeometry:s,returnCentroid:n}=e,a=t.featureStore.featureSpatialReference,o=e.sceneFilter.geometry,S=(0,f.Wi)(a)||(0,p.fS)(a,o.spatialReference)?o:(0,F.iV)(o,a);if(!S)return null;const h=s||n,E=(0,p.JY)(i)&&!(0,p.fS)(t.spatialReference,i)&&h?function(){var Q=(0,d.Z)(function*(G){return t._project(G,i)});return function(G){return Q.apply(this,arguments)}}():Q=>Q,A=t.featureAdapter,U=yield t._reschedule(()=>t._searchFeatures(t._getQueryBBoxes(S)),r);if("disjoint"===e.sceneFilter.spatialRelationship){if(!U.length)return null;const Q=new Set;for(const J of U)Q.add(A.getObjectId(J));const G=yield t._reschedule(()=>t._getAllFeatures(),r);return E(yield t._reschedule((0,d.Z)(function*(){const J=yield(0,L.cW)("esriSpatialRelDisjoint",S,t.geometryType,t.hasZ,t.hasM),j=yield t._runSpatialFilter(G,Z=>!Q.has(A.getObjectId(Z))||J(A.getGeometry(Z)),r);return new C.y(j,e,t)}),r))}if(!U.length)return new C.y([],e,t);if(t._canExecuteSinglePass(S,e))return E(new C.y(U,e,t));const W=yield(0,L.cW)("esriSpatialRelContains",S,t.geometryType,t.hasZ,t.hasM),K=yield t._runSpatialFilter(U,Q=>W(A.getGeometry(Q)),r);return E(new C.y(K,e,t))})()}_executeGeometryQuery(e,r,t){var i=this;return(0,d.Z)(function*(){if((0,f.pC)(r)&&0===r.items.length)return r;e=(0,f.pC)(r)?r.query:e;const{geometry:s,outSR:n,spatialRel:a,returnGeometry:o,returnCentroid:S}=e,h=i.featureStore.featureSpatialReference,E=!s||(0,f.Wi)(h)||(0,p.fS)(h,s.spatialReference)?s:(0,F.iV)(s,h),A=o||S,U=(0,p.JY)(n)&&!(0,p.fS)(i.spatialReference,n),W=i._geometryQueryCache&&(0,f.Wi)(r)?JSON.stringify(U&&A?{originalFilterGeometry:s,spatialRelationship:a,outSpatialReference:n}:{originalFilterGeometry:s,spatialRelationship:a}):null,K=W?i._geometryQueryCache.get(W):null;if((0,f.pC)(K))return new C.y(K,e,i);const Q=function(){var j=(0,d.Z)(function*(Z){return U&&A&&(yield i._project(Z,n)),W&&i._geometryQueryCache.put(W,Z.items,Z.items.length+1),Z});return function(se){return j.apply(this,arguments)}}();if(!E)return Q((0,f.pC)(r)?r:yield i._getAllFeaturesQueryEngineResult(e));const G=i.featureAdapter;let w=yield i._reschedule(()=>i._searchFeatures(i._getQueryBBoxes(s)),t);if("esriSpatialRelDisjoint"===a){if(!w.length)return Q((0,f.pC)(r)?r:yield i._getAllFeaturesQueryEngineResult(e));const j=new Set;for(const ie of w)j.add(G.getObjectId(ie));const Z=(0,f.pC)(r)?r.items:yield i._reschedule(()=>i._getAllFeatures(),t);return Q(yield i._reschedule((0,d.Z)(function*(){const ie=yield(0,L.cW)(a,E,i.geometryType,i.hasZ,i.hasM),oe=yield i._runSpatialFilter(Z,ne=>!j.has(G.getObjectId(ne))||ie(G.getGeometry(ne)),t);return new C.y(oe,e,i)}),t))}if((0,f.pC)(r)){const j=new b.SO;w=w.filter(Z=>(0,b.cq)(r.items,Z,r.items.length,j)>=0)}if(!w.length){const j=new C.y([],e,i);return W&&i._geometryQueryCache.put(W,j.items,1),j}if(i._canExecuteSinglePass(E,e))return Q(new C.y(w,e,i));const J=yield(0,L.cW)(a,E,i.geometryType,i.hasZ,i.hasM),re=yield i._runSpatialFilter(w,j=>J(G.getGeometry(j)),t);return Q(new C.y(re,e,i))})()}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds||!e.query.aggregateIds.length||(0,f.Wi)(this.aggregateAdapter))return;const r=new Set;for(const i of e.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(i).forEach(s=>r.add(s));const t=this.featureAdapter.getObjectId;e.items=e.items.filter(i=>r.has(t(i)))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds||!e.query.objectIds.length)return;const r=new Set(e.query.objectIds),t=this.featureAdapter.getObjectId;e.items=e.items.filter(i=>r.has(t(i)))}_executeTimeQuery(e){if(0===e.items.length)return;const r=(0,X.y)(this.timeInfo,e.query.timeExtent,this.featureAdapter);(0,f.Wi)(r)||(e.items=e.items.filter(r))}_executeAttributesQuery(e){if(0===e.items.length)return;const r=(0,P.Jc)(e.query.where,this.fieldsIndex);if(r){if(!r.isStandardized)throw new TypeError("Where clause is not standardized");e.items=e.items.filter(t=>r.testFeature(t,this.featureAdapter))}}_runSpatialFilter(e,r,t){var i=this;return(0,d.Z)(function*(){if(!r)return e;if((0,f.Wi)(i._frameTask))return e.filter(o=>r(o));let s=0;const n=new Array,a=function(){var o=(0,d.Z)(function*(S){for(;s<e.length;){const h=e[s++];r(h)&&(n.push(h),S.madeProgress()),S.done&&(yield i._reschedule(E=>a(E),t))}});return function(h){return o.apply(this,arguments)}}();return i._reschedule(o=>a(o),t).then(()=>n)})()}_filterLatest(e){const{trackIdField:r,startTimeField:t,endTimeField:i}=this.timeInfo,s=i||t,n=new Map,a=this.featureAdapter.getAttribute;for(const o of e.items){const S=a(o,r),h=a(o,s),E=n.get(S);(!E||h>a(E,s))&&n.set(S,o)}e.items=Array.from(n.values())}_canExecuteSinglePass(e,r){const{spatialRel:t}=r;return(0,L.hN)(e)&&("esriSpatialRelEnvelopeIntersects"===t||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===t||"esriSpatialRelContains"===t||"esriSpatialRelWithin"===t))}_project(e,r){var t=this;return(0,d.Z)(function*(){if(!r||(0,p.fS)(t.spatialReference,r))return e;const i=t.featureAdapter,s=yield(0,F.oj)(e.items.map(n=>(0,D.Op)(t.geometryType,t.hasZ,t.hasM,i.getGeometry(n))),t.spatialReference,r);return e.items=s.map((n,a)=>i.cloneWithGeometry(e.items[a],(0,B.GH)(n,t.hasZ,t.hasM))),e})()}_getQueryBBoxes(e){if((0,L.hN)(e)){if((0,y.YX)(e))return[(0,x.al)(e.xmin,e.ymin,e.xmax,e.ymax)];if((0,y.oU)(e))return e.rings.map(r=>(0,x.al)(Math.min(r[0][0],r[2][0]),Math.min(r[0][1],r[2][1]),Math.max(r[0][0],r[2][0]),Math.max(r[0][1],r[2][1])))}return[(0,m.$P)((0,x.Ue)(),e)]}_searchFeatures(e){var r=this;return(0,d.Z)(function*(){const t=new Set;yield Promise.all(e.map(s=>r.featureStore.forEachInBounds(s,n=>t.add(n))));const i=Array.from(t.values());return t.clear(),i})()}_checkStatisticsSupport(e,r){var t=this;return(0,d.Z)(function*(){if((e.distance??0)<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text||e.outStatistics||e.groupByFieldsForStatistics||e.having||e.orderByFields)throw new M.Z(z,"Unsupported query options",{query:e});return t._checkAttributesQuerySupport(e),Promise.all([t._checkStatisticsParamsSupport(r),(0,L.P0)(e,t.geometryType,t.spatialReference),(0,F._W)(t.spatialReference,e.outSR)]).then(()=>e)})()}_checkStatisticsParamsSupport(e){var r=this;return(0,d.Z)(function*(){let t=[];if(e.valueExpression){const{arcadeUtils:i}=yield(0,te.LC)();t=i.extractFieldNames(e.valueExpression)}if(e.field&&t.push(e.field),e.field2&&t.push(e.field2),e.field3&&t.push(e.field3),e.normalizationField&&t.push(e.normalizationField),!t.length)throw new M.Z(z,"params should have at least a field or valueExpression",{params:e});(0,P.Of)(r.fieldsIndex,t,"params contains missing fields")})()}_checkQuerySupport(e){var r=this;return(0,d.Z)(function*(){if((e.distance??0)<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new M.Z(z,"Unsupported query options",{query:e});return r._checkAttributesQuerySupport(e),r._checkStatisticsQuerySupport(e),Promise.all([(0,L.P0)(e,r.geometryType,r.spatialReference),(0,F._W)(r.spatialReference,e.outSR)]).then(()=>e)})()}_checkAttributesQuerySupport(e){const{outFields:r,orderByFields:t,returnDistinctValues:i,outStatistics:s}=e,n=s?s.map(a=>a.outStatisticFieldName&&a.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(t&&t.length>0){const a=" asc",o=" desc",S=t.map(h=>{const E=h.toLowerCase();return E.includes(a)?E.split(a)[0]:E.includes(o)?E.split(o)[0]:h}).filter(h=>!n.includes(h));(0,P.Of)(this.fieldsIndex,S,"orderByFields contains missing fields")}if(r&&r.length>0)(0,P.Of)(this.fieldsIndex,r,"outFields contains missing fields");else if(i)throw new M.Z(z,"outFields should be specified for returnDistinctValues",{query:e});(0,P.hO)(this.fieldsIndex,e.where)}_checkStatisticsQuerySupport(e){const{outStatistics:r,groupByFieldsForStatistics:t,having:i}=e,s=t&&t.length,n=r&&r.length;if(i){if(!s||!n)throw new M.Z(z,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});(0,P.z4)(this.fieldsIndex,i,r)}if(n){if(!function H(O){return null!=O&&O.every(e=>"exceedslimit"!==e.statisticType)}(r))return;const a=r.map(o=>o.onStatisticField).filter(Boolean);(0,P.Of)(this.fieldsIndex,a,"onStatisticFields contains missing fields"),s&&(0,P.Of)(this.fieldsIndex,t,"groupByFieldsForStatistics contains missing fields");for(const o of r){const{onStatisticField:S,statisticType:h}=o;if("percentile_disc"!==h&&"percentile_cont"!==h||!("statisticParameters"in o)){if("count"!==h&&S&&(0,P.G3)(S,this.fieldsIndex))throw new M.Z(z,"outStatistics contains non-numeric fields",{definition:o,query:e})}else{const{statisticParameters:E}=o;if(!E)throw new M.Z(z,"statisticParamters should be set for percentile type",{definition:o,query:e})}}}}_getQueryEngineResultForStats(e,r,t){var i=this;return(0,d.Z)(function*(){e=(0,Y.d9)(e);try{e=yield i._schedule(()=>(0,D.Up)(e,i.definitionExpression,i.spatialReference),t),e=yield i._reschedule(()=>i._checkStatisticsSupport(e,r),t);const s=yield i._reschedule(()=>i._executeSceneFilterQuery(e,t),t),n=yield i._reschedule(()=>i._executeGeometryQuery(e,s,t),t);return yield i._reschedule(()=>i._executeAggregateIdsQuery(n),t),yield i._reschedule(()=>i._executeObjectIdsQuery(n),t),yield i._reschedule(()=>i._executeTimeQuery(n),t),yield i._reschedule(()=>i._executeAttributesQuery(n),t),n}catch(s){if(s!==D.vF)throw s;return new C.y([],e,i)}})()}}},29374:(k,N,u)=>{u.d(N,{g:()=>d});const d={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},72190:(k,N,u)=>{u.d(N,{hN:()=>z,P0:()=>$,cW:()=>te});var d=u(71670),b=u(32995),M=u(30446),Y=u(76438),T=u(71182),V=u(53492);function R(l,c){return l?c?4:3:c?3:2}function m(l,c,g,I,O){if(!l)return!1;const e=R(c,g),{coords:r,lengths:t}=l;let i=!1,s=0;for(const n of t)i=y(i,r,e,s,n,I,O),s+=n*e;return i}function y(l,c,g,I,O,e,r){let t=l,i=I;for(let s=I,n=I+O*g;s<n;s+=g){i=s+g,i===n&&(i=I);const a=c[s],o=c[s+1],h=c[i+1];(o<r&&h>=r||h<r&&o>=r)&&a+(r-o)/(h-o)*(c[i]-a)<e&&(t=!t)}return t}var _=u(50805),p=u(93846),B=u(19482),P=u(21272);const F="feature-store:unsupported-query",q={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},C={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function te(l,c,g,I,O){if((0,T.oU)(c)&&"esriGeometryPoint"===g&&("esriSpatialRelIntersects"===l||"esriSpatialRelContains"===l)){const e=(0,_.Uy)(new p.Z,c,!1,!1);return Promise.resolve(r=>function v(l,c,g,I){return m(l,c,g,I.coords[0],I.coords[1])}(e,!1,!1,r))}if((0,T.oU)(c)&&"esriGeometryMultipoint"===g){const e=(0,_.Uy)(new p.Z,c,!1,!1);if("esriSpatialRelContains"===l)return Promise.resolve(r=>function x(l,c,g,I,O,e){const r=R(O,e),{coords:t,lengths:i}=I;if(!i)return!1;for(let s=0,n=0;s<i.length;s++,n+=r)if(!m(l,c,g,t[n],t[n+1]))return!1;return!0}(e,!1,!1,r,I,O))}if((0,T.YX)(c)&&"esriGeometryPoint"===g&&("esriSpatialRelIntersects"===l||"esriSpatialRelContains"===l))return Promise.resolve(e=>(0,M.aV)(c,(0,P.Op)(g,I,O,e)));if((0,T.YX)(c)&&"esriGeometryMultipoint"===g&&"esriSpatialRelContains"===l)return Promise.resolve(e=>(0,M.lQ)(c,(0,P.Op)(g,I,O,e)));if((0,T.YX)(c)&&"esriSpatialRelIntersects"===l){const e=function f(l){return"mesh"===l?Y.h_:(0,Y.IY)(l)}(g);return Promise.resolve(r=>e(c,(0,P.Op)(g,I,O,r)))}return function ee(){return Promise.all([u.e(7640),u.e(8592)]).then(u.bind(u,15390))}().then(e=>{const r=e[q[l]].bind(null,c.spatialReference,c);return t=>r((0,P.Op)(g,I,O,t))})}function $(l,c,g){return H.apply(this,arguments)}function H(){return(H=(0,d.Z)(function*(l,c,g){const{spatialRel:I,geometry:O}=l;if(O){if(!function L(l){return null!=l&&!0===C.spatialRelationship[l]}(I))throw new b.Z(F,"Unsupported query spatial relationship",{query:l});if((0,V.JY)(O.spatialReference)&&(0,V.JY)(g)){if(!function X(l){return null!=l&&!0===C.queryGeometry[(0,T.Ji)(l)]}(O))throw new b.Z(F,"Unsupported query geometry type",{query:l});if(!function D(l){return null!=l&&!0===C.layerGeometry[l]}(c))throw new b.Z(F,"Unsupported layer geometry type",{query:l});if(l.outSR)return(0,B._W)(l.geometry&&l.geometry.spatialReference,l.outSR)}}})).apply(this,arguments)}function z(l){if((0,T.YX)(l))return!0;if((0,T.oU)(l)){for(const c of l.rings)if(5!==c.length||c[0][0]!==c[1][0]||c[0][0]!==c[4][0]||c[2][0]!==c[3][0]||c[0][1]!==c[3][1]||c[0][1]!==c[4][1]||c[1][1]!==c[2][1])return!1;return!0}return!1}},22262:(k,N,u)=>{u.d(N,{R:()=>b,y:()=>Y});var d=u(71670);function b(R,v){return M.apply(this,arguments)}function M(){return(M=(0,d.Z)(function*(R,v){if(!R)return null;const x=v.featureAdapter,{startTimeField:m,endTimeField:y}=R;let _=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;if(m&&y)yield v.forEach(B=>{const P=x.getAttribute(B,m),F=x.getAttribute(B,y);null==P||isNaN(P)||(_=Math.min(_,P)),null==F||isNaN(F)||(p=Math.max(p,F))});else{const B=m||y;yield v.forEach(P=>{const F=x.getAttribute(P,B);null==F||isNaN(F)||(_=Math.min(_,F),p=Math.max(p,F))})}return{start:_,end:p}})).apply(this,arguments)}function Y(R,v,x){if(!v||!R)return null;const{startTimeField:m,endTimeField:y}=R;if(!m&&!y)return null;const{start:_,end:p}=v;return null===_&&null===p?null:void 0===_&&void 0===p?()=>!1:m&&y?function f(R,v,x,m,y){return null!=m&&null!=y?_=>{const p=R.getAttribute(_,v),B=R.getAttribute(_,x);return(null==p||p<=y)&&(null==B||B>=m)}:null!=m?_=>{const p=R.getAttribute(_,x);return null==p||p>=m}:null!=y?_=>{const p=R.getAttribute(_,v);return null==p||p<=y}:void 0}(x,m,y,_,p):function T(R,v,x,m){return null!=x&&null!=m&&x===m?y=>R.getAttribute(y,v)===x:null!=x&&null!=m?y=>{const _=R.getAttribute(y,v);return _>=x&&_<=m}:null!=x?y=>R.getAttribute(y,v)>=x:null!=m?y=>R.getAttribute(y,v)<=m:void 0}(x,m||y,_,p)}}}]);
//# sourceMappingURL=9266.32df7b2c0a8e396d.js.map