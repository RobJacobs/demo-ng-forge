"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[2478,3918,7409],{43918:(Bt,Ot,L)=>{var D,C;L.d(Ot,{Hy:()=>st,OF:()=>q,TD:()=>it,Tu:()=>w,VO:()=>ot,aV:()=>at,kq:()=>gt,rH:()=>D}),(C=D||(D={})).AsyncNotEnabled="AsyncNotEnabled",C.ModulesNotSupported="ModulesNotSupported",C.CircularModules="CircularModules",C.NeverReach="NeverReach",C.UnsupportedHashType="UnsupportedHashType",C.InvalidParameter="InvalidParameter",C.UnexpectedToken="UnexpectedToken",C.Unrecognised="Unrecognised",C.UnrecognisedType="UnrecognisedType",C.MaximumCallDepth="MaximumCallDepth",C.BooleanConditionRequired="BooleanConditionRequired",C.TypeNotAllowedInFeature="TypeNotAllowedInFeature",C.KeyMustBeString="KeyMustBeString",C.WrongNumberOfParameters="WrongNumberOfParameters",C.CallNonFunction="CallNonFunction",C.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",C.NoFunctionInDictionary="NoFunctionInDictionary",C.NoFunctionInArray="NoFunctionInArray",C.AssignModuleFunction="AssignModuleFunction",C.LogicExpressionOrAnd="LogicExpressionOrAnd",C.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",C.FuncionNotFound="FunctionNotFound",C.InvalidMemberAccessKey="InvalidMemberAccessKey",C.UnsupportedUnaryOperator="UnsupportUnaryOperator",C.InvalidIdentifier="InvalidIdentifier",C.MemberOfNull="MemberOfNull",C.UnsupportedOperator="UnsupportedOperator",C.Cancelled="Cancelled",C.ModuleAccessorMustBeString="ModuleAccessorMustBeString",C.ModuleExportNotFound="ModuleExportNotFound",C.Immutable="Immutable",C.OutOfBounds="OutOfBounds",C.IllegalResult="IllegalResult",C.FieldNotFound="FieldNotFound",C.PortalRequired="PortalRequired",C.LogicError="LogicError",C.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",C.KeyAccessorMustBeString="KeyAccessorMustBeString",C.WrongSpatialReference="WrongSpatialReference";const ht={[D.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[D.LogicError]:"Logic error - {reason}",[D.NeverReach]:"Encountered unreachable logic",[D.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[D.ModuleAccessorMustBeString]:"Module accessor must be a string",[D.ModuleExportNotFound]:"Module has no export with provided identifier",[D.ModulesNotSupported]:"Current profile does not support modules",[D.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[D.FuncionNotFound]:"Function not found",[D.FieldNotFound]:"Key not found - {key}",[D.CircularModules]:"Circular module dependencies are not allowed",[D.Cancelled]:"Execution cancelled",[D.UnsupportedHashType]:"Type not supported in hash function",[D.IllegalResult]:"Value is not a supported return type",[D.PortalRequired]:"Portal is required",[D.InvalidParameter]:"Invalid parameter",[D.WrongNumberOfParameters]:"Call with wrong number of parameters",[D.Unrecognised]:"Unrecognised code structure",[D.UnrecognisedType]:"Unrecognised type",[D.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[D.BooleanConditionRequired]:"Conditions must use booleans",[D.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[D.NoFunctionInArray]:"Arrays cannot contain functions.",[D.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[D.KeyAccessorMustBeString]:"Accessor must be a string",[D.KeyMustBeString]:"Object keys must be a string",[D.Immutable]:"Object is immutable",[D.InvalidParameter]:"Invalid parameter",[D.UnexpectedToken]:"Unexpected token",[D.MemberOfNull]:"Cannot access property of null object",[D.MaximumCallDepth]:"Exceeded maximum function depth",[D.OutOfBounds]:"Out of bounds",[D.InvalidIdentifier]:"Identifier not recognised",[D.FuncionNotFound]:"Function not found",[D.CallNonFunction]:"Expression is not a function",[D.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[D.AssignModuleFunction]:"Cannot assign function to module variable",[D.UnsupportedUnaryOperator]:"Unsupported unary operator",[D.UnsupportedOperator]:"Unsupported operator",[D.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[D.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&"};class rt extends Error{constructor(...Q){super(...Q)}}class lt extends rt{constructor(Q,U){super(Z(U)+Q.message,{cause:Q}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,lt),U&&U.loc&&(this.loc=U.loc)}}class at extends Error{constructor(Q,U,V,K){super("Execution error - "+Z(V)+st(ht[U],K)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,at),V&&V.loc&&(this.loc=V.loc)}}function Z(C){return C&&C.loc?`Line : ${C.loc.start?.line}, ${C.loc.start?.column}: `:""}class q extends Error{constructor(Q,U,V,K){super("Compilation error - "+Z(V)+st(ht[U],K)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,q),V&&V.loc&&(this.loc=V.loc)}}class gt extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,gt)}}function st(C,Q){try{if(!Q)return C;for(const U in Q){let V=Q[U];V||(V=""),C=C.replace("{"+U+"}",Q[U])}}catch{}return C}function ot(C,Q,U){return"esri.arcade.arcadeexecutionerror"===U.declaredRootClass||"esri.arcade.arcadecompilationerror"===U.declaredRootClass?null===U.loc&&Q&&Q.loc?new lt(U,{cause:U}):U:Q&&Q.loc?new lt(U,{cause:U}):U}var it;!function(C){C.UnrecognisedUri="UnrecognisedUri",C.UnsupportedUriProtocol="UnsupportedUriProtocol"}(it||(it={}));const J={[it.UnrecognisedUri]:"Unrecognised uri - {uri}",[it.UnsupportedUriProtocol]:"Unrecognised uri protocol"};class w extends Error{constructor(Q,U){super(st(J[Q],U)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,w)}}},53251:(Bt,Ot,L)=>{function D(){return[1,0,0,0,1,0,0,0,1]}function rt(Z,q,gt,st,ot,it,J,w,z){return[Z,q,gt,st,ot,it,J,w,z]}function lt(Z,q){return new Float64Array(Z,q,9)}L.d(Ot,{a:()=>lt,c:()=>D,f:()=>rt}),Object.freeze(Object.defineProperty({__proto__:null,clone:function ht(Z){return[Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],Z[8]]},create:D,createView:lt,fromValues:rt},Symbol.toStringTag,{value:"Module"}))},23160:(Bt,Ot,L)=>{function D(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ht(q){return[q[0],q[1],q[2],q[3],q[4],q[5],q[6],q[7],q[8],q[9],q[10],q[11],q[12],q[13],q[14],q[15]]}function lt(q,gt){return new Float64Array(q,gt,16)}L.d(Ot,{I:()=>at,a:()=>lt,b:()=>ht,c:()=>D});const at=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:at,clone:ht,create:D,createView:lt,fromValues:function rt(q,gt,st,ot,it,J,w,z,C,Q,U,V,K,H,X,ft){return[q,gt,st,ot,it,J,w,z,C,Q,U,V,K,H,X,ft]}},Symbol.toStringTag,{value:"Module"}))},29042:(Bt,Ot,L)=>{function D(){return[0,0,0,1]}function ht(q){return[q[0],q[1],q[2],q[3]]}function lt(q,gt){return new Float64Array(q,gt,4)}L.d(Ot,{I:()=>at,a:()=>D,b:()=>ht,c:()=>lt});const at=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:at,clone:ht,create:D,createView:lt,fromValues:function rt(q,gt,st,ot){return[q,gt,st,ot]}},Symbol.toStringTag,{value:"Module"}))},33659:(Bt,Ot,L)=>{L.d(Ot,{a:()=>H,c:()=>z,g:()=>X,h:()=>C,j:()=>an,m:()=>Lt}),L(67087);var ot,p,ht=L(28191),rt=L(93142),lt=L(53661),at=L(64544),Z=L(92950),q=L(77765),gt=L(71943),st=L(91746);(p=ot||(ot={}))[p.X=0]="X",p[p.Y=1]="Y",p[p.Z=2]="Z";var it=L(32684),J=L(84877),w=L(82309);function z(){return(0,st.c)()}function C(p,b=z()){return(0,gt.c)(b,p)}function H(p){return p[3]}function X(p){return p}function Rt(p,b,S){if((0,lt.Wi)(b))return!1;const{origin:$,direction:k}=b,j=$t;j[0]=$[0]-p[0],j[1]=$[1]-p[1],j[2]=$[2]-p[2];const Et=k[0]*k[0]+k[1]*k[1]+k[2]*k[2];if(0===Et)return!1;const _t=2*(k[0]*j[0]+k[1]*j[1]+k[2]*j[2]),Ft=_t*_t-4*Et*(j[0]*j[0]+j[1]*j[1]+j[2]*j[2]-p[3]*p[3]);if(Ft<0)return!1;const Yt=Math.sqrt(Ft);let Gt=(-_t-Yt)/(2*Et);const cn=(-_t+Yt)/(2*Et);return(Gt<0||cn<Gt&&cn>0)&&(Gt=cn),!(Gt<0||(S&&(S[0]=$[0]+k[0]*Gt,S[1]=$[1]+k[1]*Gt,S[2]=$[2]+k[2]*Gt),0))}const $t=(0,q.c)();function an(p,b){return Rt(p,b,null)}function Jt(p,b,S){const $=w.WM.get(),k=w.MP.get();(0,Z.f)($,b.origin,b.direction);const j=H(p);(0,Z.f)(S,$,b.origin),(0,Z.g)(S,S,1/(0,Z.l)(S)*j);const Et=on(p,b.origin),_t=(0,J.EU)(b.origin,S);return(0,at.d)(k,_t+Et,$),(0,Z.m)(S,S,k),S}function Zt(p,b,S){const $=(0,Z.b)(w.WM.get(),b,p),k=(0,Z.g)(w.WM.get(),$,p[3]/(0,Z.l)($));return(0,Z.a)(S,k,p)}function on(p,b){const S=(0,Z.b)(w.WM.get(),b,p),$=(0,Z.l)(S),k=H(p),j=k+Math.abs(k-$);return(0,rt.ZF)(k/j)}const wt=(0,q.c)();function sn(p,b,S,$){const k=(0,Z.b)(wt,b,p);switch(S){case ot.X:{const j=(0,rt.jE)(k,wt)[2];return(0,Z.s)($,-Math.sin(j),Math.cos(j),0)}case ot.Y:{const j=(0,rt.jE)(k,wt),Et=j[1],_t=j[2],Ft=Math.sin(Et);return(0,Z.s)($,-Ft*Math.cos(_t),-Ft*Math.sin(_t),Math.cos(Et))}case ot.Z:return(0,Z.n)($,k);default:return}}function Ct(p,b){const S=(0,Z.b)(Ut,b,p);return(0,Z.l)(S)-p[3]}function Lt(p,b){const S=(0,Z.d)(p,b),$=H(p);return S<=$*$}const Ut=(0,q.c)(),I=z();Object.freeze(Object.defineProperty({__proto__:null,altitudeAt:Ct,angleToSilhouette:on,axisAt:sn,clear:function V(p){p[0]=p[1]=p[2]=p[3]=0},closestPoint:function ln(p,b,S){return Rt(p,b,S)?S:((0,it.JI)(b,p,S),Zt(p,S,S))},closestPointOnSilhouette:Jt,containsPoint:Lt,copy:C,create:z,distanceToSilhouette:function qt(p,b){const S=(0,Z.b)(w.WM.get(),b,p),$=(0,Z.p)(S);return Math.sqrt(Math.abs($-p[3]*p[3]))},elevate:function Mt(p,b,S){return p!==S&&(0,Z.c)(S,p),S[3]=p[3]+b,S},fromCenterAndRadius:function Q(p,b){return(0,st.f)(p[0],p[1],p[2],b)},fromRadius:function K(p,b){return p[0]=p[1]=p[2]=0,p[3]=b,p},fromValues:function ft(p,b,S,$){return(0,st.f)(p,b,S,$)},getCenter:X,getRadius:H,intersectRay:Rt,intersectRayClosestSilhouette:function un(p,b,S){if(Rt(p,b,S))return S;const $=Jt(p,b,w.WM.get());return(0,Z.a)(S,b.origin,(0,Z.g)(w.WM.get(),b.direction,(0,Z.i)(b.origin,$)/(0,Z.l)(b.direction))),S},intersectsRay:an,projectPoint:Zt,setAltitudeAt:function Wt(p,b,S,$){const k=Ct(p,b),j=sn(p,b,ot.Z,Ut),Et=(0,Z.g)(Ut,j,S-k);return(0,Z.a)($,b,Et)},setExtent:function yt(p,b,S){return ht.Z.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),p===S?S:C(p,S)},tmpSphere:I,wrap:function U(p){return p}},Symbol.toStringTag,{value:"Module"}))},93668:(Bt,Ot,L)=>{L.d(Ot,{x:()=>ht});var D=L(16746);class ht{constructor(at){this._allocator=at,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,D.Y)(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const at=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*rt);this._items.length=Math.min(at,this._items.length),this._itemsPtr=0}_grow(){for(let at=0;at<Math.max(8,Math.min(this._items.length,rt));at++)this._items.push(this._allocator())}}const rt=1024},17409:(Bt,Ot,L)=>{L.d(Ot,{N:()=>D});const D={convertToGEGeometry:function ht(w,z){return null==z?null:w.convertJSONToGeometry(z)},exportPoint:function lt(w,z,C){const Q=new rt(w.getPointX(z),w.getPointY(z),C),U=w.hasZ(z),V=w.hasM(z);return U&&(Q.z=w.getPointZ(z)),V&&(Q.m=w.getPointM(z)),Q},exportPolygon:function Z(w,z,C){return new at(w.exportPaths(z),C,w.hasZ(z),w.hasM(z))},exportPolyline:function gt(w,z,C){return new q(w.exportPaths(z),C,w.hasZ(z),w.hasM(z))},exportMultipoint:function ot(w,z,C){return new st(w.exportPoints(z),C,w.hasZ(z),w.hasM(z))},exportExtent:function J(w,z,C){const Q=w.hasZ(z),U=w.hasM(z),V=new it(w.getXMin(z),w.getYMin(z),w.getXMax(z),w.getYMax(z),C);if(Q){const K=w.getZExtent(z);V.zmin=K.vmin,V.zmax=K.vmax}if(U){const K=w.getMExtent(z);V.mmin=K.vmin,V.mmax=K.vmax}return V}};class rt{constructor(z,C,Q){this.x=z,this.y=C,this.spatialReference=Q,this.z=void 0,this.m=void 0}}class at{constructor(z,C,Q,U){this.rings=z,this.spatialReference=C,this.hasZ=void 0,this.hasM=void 0,Q&&(this.hasZ=Q),U&&(this.hasM=U)}}class q{constructor(z,C,Q,U){this.paths=z,this.spatialReference=C,this.hasZ=void 0,this.hasM=void 0,Q&&(this.hasZ=Q),U&&(this.hasM=U)}}class st{constructor(z,C,Q,U){this.points=z,this.spatialReference=C,this.hasZ=void 0,this.hasM=void 0,Q&&(this.hasZ=Q),U&&(this.hasM=U)}}class it{constructor(z,C,Q,U,V){this.xmin=z,this.ymin=C,this.xmax=Q,this.ymax=U,this.spatialReference=V,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},62085:(Bt,Ot,L)=>{L(93142),L(92950);var St,T,rt=L(77765);L(33659),L(84877),L(82309),(0,rt.c)(),(0,rt.c)(),(0,rt.c)(),(0,rt.c)(),(0,rt.c)(),(0,rt.c)(),(0,rt.c)(),(0,rt.c)(),(0,rt.c)(),(0,rt.c)(),(T=St||(St={}))[T.NONE=0]="NONE",T[T.CLAMP=1]="CLAMP",T[T.INFINITE_MIN=4]="INFINITE_MIN",T[T.INFINITE_MAX=8]="INFINITE_MAX"},6099:(Bt,Ot,L)=>{L.d(Ot,{G6:()=>Ut,Ie:()=>Lt,J9:()=>Ct,RF:()=>Zt,U1:()=>Wt,vY:()=>q,ym:()=>wt});var D=L(53661),ht=L(71182);const lt=(I,v,p)=>[v,p],at=(I,v,p)=>[v,p,I[2]],Z=(I,v,p)=>[v,p,I[2],I[3]];function q(I){return I?{originPosition:"upper-left"===I.originPosition?"upperLeft":"lower-left"===I.originPosition?"lowerLeft":I.originPosition,scale:I.tolerance?[I.tolerance,I.tolerance]:[1,1],translate:(0,D.pC)(I.extent)?[I.extent.xmin,I.extent.ymax]:[0,0]}:null}function st({scale:I,translate:v},p){return Math.round((p-v[0])/I[0])}function ot({scale:I,translate:v},p){return Math.round((v[1]-p)/I[1])}function it(I,v,p){const b=[];let S,$,k,j;for(let Et=0;Et<p.length;Et++){const _t=p[Et];Et>0?(k=st(I,_t[0]),j=ot(I,_t[1]),k===S&&j===$||(b.push(v(_t,k-S,j-$)),S=k,$=j)):(S=st(I,_t[0]),$=ot(I,_t[1]),b.push(v(_t,S,$)))}return b.length>0?b:null}function Q({scale:I,translate:v},p){return p*I[0]+v[0]}function U({scale:I,translate:v},p){return v[1]-p*I[1]}function V(I,v,p){const b=new Array(p.length);if(!p.length)return b;const[S,$]=I.scale;let k=Q(I,p[0][0]),j=U(I,p[0][1]);b[0]=v(p[0],k,j);for(let Et=1;Et<p.length;Et++){const _t=p[Et];k+=_t[0]*S,j-=_t[1]*$,b[Et]=v(_t,k,j)}return b}function K(I,v,p){const b=new Array(p.length);for(let S=0;S<p.length;S++)b[S]=V(I,v,p[S]);return b}function Zt(I,v,p,b,S){return v.x=st(I,p.x),v.y=ot(I,p.y),v!==p&&(b&&(v.z=p.z),S&&(v.m=p.m)),v}function wt(I,v){return I&&v?(0,ht.wp)(v)?Zt(I,{},v,!1,!1):(0,ht.l9)(v)?function on(I,v,p,b,S){const $=function C(I,v,p,b){const S=[],$=p?b?Z:at:b?at:lt;for(let k=0;k<v.length;k++){const j=it(I,$,v[k]);j&&j.length>=2&&S.push(j)}return S.length?S:null}(I,p.paths,b,S);return $?(v.paths=$,v):null}(I,{},v,!1,!1):(0,ht.oU)(v)?function qt(I,v,p,b,S){const $=function z(I,v,p,b){const S=[],$=p?b?Z:at:b?at:lt;for(let k=0;k<v.length;k++){const j=it(I,$,v[k]);j&&j.length>=3&&S.push(j)}return S.length?S:null}(I,p.rings,b,S);return $?(v.rings=$,v):null}(I,{},v,!1,!1):(0,ht.aW)(v)?function ln(I,v,p,b,S){return v.points=function w(I,v,p,b){return it(I,p?b?Z:at:b?at:lt,v)}(I,p.points,b,S)??[],v}(I,{},v,!1,!1):(0,ht.YX)(v)?function Jt(I,v,p,b,S){return v.xmin=st(I,p.xmin),v.ymin=ot(I,p.ymin),v.xmax=st(I,p.xmax),v.ymax=ot(I,p.ymax),v!==p&&(b&&(v.zmin=p.zmin,v.zmax=p.zmax),S&&(v.mmin=p.mmin,v.mmax=p.mmax)),v}(I,{},v,!1,!1):null:null}function Ct(I,v,p,b,S){return(0,D.pC)(p)&&(v.points=function X(I,v,p,b){return V(I,p?b?Z:at:b?at:lt,v)}(I,p.points,b,S)),v}function Wt(I,v,p,b,S){return(0,D.Wi)(p)||(v.x=Q(I,p.x),v.y=U(I,p.y),v!==p&&(b&&(v.z=p.z),S&&(v.m=p.m))),v}function Lt(I,v,p,b,S){return(0,D.pC)(p)&&(v.rings=function Mt(I,v,p,b){return K(I,p?b?Z:at:b?at:lt,v)}(I,p.rings,b,S)),v}function Ut(I,v,p,b,S){return(0,D.pC)(p)&&(v.paths=function ft(I,v,p,b){return K(I,p?b?Z:at:b?at:lt,v)}(I,p.paths,b,S)),v}},32684:(Bt,Ot,L)=>{L.d(Ot,{JI:()=>C,Ue:()=>Z,re:()=>st}),L(19420);var ht=L(93668),rt=L(92950),lt=L(77765);function Z(U){return U?q((0,lt.a)(U.origin),(0,lt.a)(U.direction)):q((0,lt.c)(),(0,lt.c)())}function q(U,V){return{origin:U,direction:V}}function st(U,V){const K=Q.get();return K.origin=U,K.direction=V,K}function C(U,V,K){const H=(0,rt.e)(U.direction,(0,rt.b)(K,V,U.origin));return(0,rt.a)(K,U.origin,(0,rt.g)(K,U.direction,H)),K}L(82309);const Q=new ht.x(()=>Z())},84877:(Bt,Ot,L)=>{L.d(Ot,{EU:()=>Z});var D=L(93142),ht=L(92950),rt=L(77765);function Z(ot,it){const J=(0,ht.e)(ot,it)/((0,ht.l)(ot)*(0,ht.l)(it));return-(0,D.ZF)(J)}(0,rt.c)(),(0,rt.c)()},82309:(Bt,Ot,L)=>{L.d(Ot,{MP:()=>C,WM:()=>J});var D=L(84625),ht=L(16746),rt=L(53251),lt=L(23160),at=L(29042),Z=L(83457),q=L(77765),gt=L(91746);class st{constructor(V,K,H){this._itemByteSize=V,this._itemCreate=K,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(H/this._itemByteSize)}get(){0===this._itemsPtr&&(0,ht.Y)(()=>this._reset());const V=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=V;){const K=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let H=0;H<this._itemsPerBuffer;++H)this._items.push(this._itemCreate(K,H*this._itemByteSize));this._buffers.push(K)}return this._items[this._itemsPtr++]}_reset(){const V=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>V;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(V=ot){return new st(16,Z.c,V)}static createVec3f64(V=ot){return new st(24,q.b,V)}static createVec4f64(V=ot){return new st(32,gt.a,V)}static createMat3f64(V=ot){return new st(72,rt.a,V)}static createMat4f64(V=ot){return new st(128,lt.a,V)}static createQuatf64(V=ot){return new st(32,at.c,V)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const ot=4*D.Y8.KILOBYTES,J=(st.createVec2f64(),st.createVec3f64()),C=(st.createVec4f64(),st.createMat3f64(),st.createMat4f64());st.createQuatf64()},19482:(Bt,Ot,L)=>{L.d(Ot,{_W:()=>it,iV:()=>C,oj:()=>V});var D=L(71670),ht=L(53661),rt=L(21789),lt=L(17409),at=L(53492),Z=L(83550);const q=[0,0];function gt(K,H){if(!H)return null;if("x"in H){const X={x:0,y:0};return[X.x,X.y]=K(H.x,H.y,q),null!=H.z&&(X.z=H.z),null!=H.m&&(X.m=H.m),X}if("xmin"in H){const X={xmin:0,ymin:0,xmax:0,ymax:0};return[X.xmin,X.ymin]=K(H.xmin,H.ymin,q),[X.xmax,X.ymax]=K(H.xmax,H.ymax,q),H.hasZ&&(X.zmin=H.zmin,X.zmax=H.zmax,X.hasZ=!0),H.hasM&&(X.mmin=H.mmin,X.mmax=H.mmax,X.hasM=!0),X}return"rings"in H?{rings:st(H.rings,K),hasM:H.hasM,hasZ:H.hasZ}:"paths"in H?{paths:st(H.paths,K),hasM:H.hasM,hasZ:H.hasZ}:"points"in H?{points:ot(H.points,K),hasM:H.hasM,hasZ:H.hasZ}:null}function st(K,H){const X=[];for(const ft of K)X.push(ot(ft,H));return X}function ot(K,H){const X=[];for(const ft of K){const Mt=H(ft[0],ft[1],[0,0]);X.push(Mt),ft.length>2&&Mt.push(ft[2]),ft.length>3&&Mt.push(ft[3])}return X}function it(K,H){return J.apply(this,arguments)}function J(){return(J=(0,D.Z)(function*(K,H){if(!K||!H)return;const X=Array.isArray(K)?K.map(ft=>(0,ht.pC)(ft.geometry)?ft.geometry.spatialReference:null).filter(ht.pC):[K];yield(0,rt.iQ)(X.map(ft=>({source:ft,dest:H})))})).apply(this,arguments)}const w=gt.bind(null,Z.hG),z=gt.bind(null,Z.R6);function C(K,H,X,ft){if(!K||(X||(X=H,H=K.spatialReference),!(0,at.JY)(H)||!(0,at.JY)(X)||(0,at.fS)(H,X)))return K;if((0,Z.Q8)(H,X)){const Mt=(0,at.sS)(X)?w(K):z(K);return Mt.spatialReference=X,Mt}return(0,rt.oj)(lt.N,[K],H,X,null,ft)[0]}const U=new class Q{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}push(H,X,ft){var Mt=this;return(0,D.Z)(function*(){if(!H||!H.length||!X||!ft||(0,at.fS)(X,ft))return H;const yt={geometries:H,inSpatialReference:X,outSpatialReference:ft,resolve:null};return Mt._jobs.push(yt),new Promise(Rt=>{yt.resolve=Rt,null===Mt._timer&&(Mt._timer=setTimeout(Mt._process,10))})})()}_process(){this._timer=null;const H=this._jobs.shift();if(!H)return;const{geometries:X,inSpatialReference:ft,outSpatialReference:Mt,resolve:yt}=H;(0,Z.Q8)(ft,Mt)?(0,at.sS)(Mt)?yt(X.map(w)):yt(X.map(z)):yt((0,rt.oj)(lt.N,X,ft,Mt,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function V(K,H,X){return U.push(K,H,X)}},48485:(Bt,Ot,L)=>{L.r(Ot),L.d(Ot,{default:()=>Nn});var k,j,x,_t,Ft,D=L(71670),ht=L(18100),rt=L(53661),lt=L(30801),ot=(L(28191),L(83382),L(19420),L(32995),L(67087),L(20891)),it=L(92950),J=L(77765),w=L(19511),z=L(33659),C=L(13831),Q=L(5261),U=L(22286),V=L(93668),X=(L(64544),L(71943),L(91746)),ft=L(32684);function Mt(x){return x?{ray:(0,ft.Ue)(x.ray),c0:x.c0,c1:x.c1}:{ray:(0,ft.Ue)(),c0:0,c1:Number.MAX_VALUE}}function I(x,l){for(let d=0;d<_t.NUM;d++){const E=x[d];if(E[0]*l[0]+E[1]*l[1]+E[2]*l[2]+E[3]>=l[3])return!1}return!0}new V.x(()=>Mt()),L(62085),L(82309),(x=k||(k={}))[x.LEFT=0]="LEFT",x[x.RIGHT=1]="RIGHT",x[x.BOTTOM=2]="BOTTOM",x[x.TOP=3]="TOP",x[x.NEAR=4]="NEAR",x[x.FAR=5]="FAR",function(x){x[x.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",x[x.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",x[x.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",x[x.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",x[x.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",x[x.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",x[x.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",x[x.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(j||(j={})),function(x){x[x.NUM=6]="NUM"}(_t||(_t={})),function(x){x[x.NUM=8]="NUM"}(Ft||(Ft={})),(0,X.f)(-1,-1,-1,1),(0,X.f)(1,-1,-1,1),(0,X.f)(1,1,-1,1),(0,X.f)(-1,1,-1,1),(0,X.f)(-1,-1,1,1),(0,X.f)(1,-1,1,1),(0,X.f)(1,1,1,1),(0,X.f)(-1,1,1,1),new V.x(Mt),function Ct(){(0,J.c)(),(0,J.c)(),(0,J.c)(),(0,J.c)(),(0,J.c)(),(0,J.c)(),(0,J.c)(),(0,J.c)()}();var fn=L(12042);class tn{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(l,d){this._objectToBoundingSphere=l,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new Tt,this._objectCount=0,d&&(void 0!==d.maximumObjectsPerNode&&(this._maximumObjectsPerNode=d.maximumObjectsPerNode),void 0!==d.maximumDepth&&(this._maximumDepth=d.maximumDepth))}destroy(){this._degenerateObjects.clear(),Tt.clearPool(),W[0]=null,At.prune(),rn.prune()}add(l,d=l.length){this._objectCount+=d,this._grow(l,d);const E=Tt.acquire();for(let F=0;F<d;F++){const Y=l[F];this._isDegenerate(Y)?this._degenerateObjects.add(Y):(E.init(this._root),this._add(Y,E))}Tt.release(E)}remove(l,d=null){this._objectCount-=l.length;const E=Tt.acquire();for(const F of l){const Y=(0,rt.pC)(d)?d:(0,z.h)(this._objectToBoundingSphere(F),jt);en(Y[3])?(E.init(this._root),this._remove(F,Y,E)):this._degenerateObjects.delete(F)}Tt.release(E),this._shrink()}update(l,d){if(!en(d[3])&&this._isDegenerate(l))return;const E=function tt(x){return W[0]=x,W}(l);this.remove(E,d),this.add(E)}forEachAlongRay(l,d,E){const F=(0,ft.re)(l,d);this._forEachNode(this._root,Y=>{if(!this._intersectsNode(F,Y))return!1;const et=Y.node;return et.terminals.forAll(ut=>{this._intersectsObject(F,ut)&&E(ut)}),null!==et.residents&&et.residents.forAll(ut=>{this._intersectsObject(F,ut)&&E(ut)}),!0})}forEachAlongRayWithVerticalOffset(l,d,E,F){const Y=(0,ft.re)(l,d);this._forEachNode(this._root,et=>{if(!this._intersectsNodeWithOffset(Y,et,F))return!1;const ut=et.node;return ut.terminals.forAll(nt=>{this._intersectsObjectWithOffset(Y,nt,F)&&E(nt)}),null!==ut.residents&&ut.residents.forAll(nt=>{this._intersectsObjectWithOffset(Y,nt,F)&&E(nt)}),!0})}forEach(l){this._forEachNode(this._root,d=>{const E=d.node;return E.terminals.forAll(l),null!==E.residents&&E.residents.forAll(l),!0}),this._degenerateObjects.forEach(l)}forEachDegenerateObject(l){this._degenerateObjects.forEach(l)}findClosest(l,d,E,F=(()=>!0),Y=1/0){let et=1/0,ut=1/0,nt=null;const xt=St(l,d),vt=Nt=>{if(--Y,!F(Nt))return;const Pt=this._objectToBoundingSphere(Nt);if(!I(E,Pt))return;const Kt=Vt(l,d,(0,z.g)(Pt)),hn=Kt-Pt[3];hn<et&&(et=hn,ut=Kt+Pt[3],nt=Nt)};return this._forEachNodeDepthOrdered(this._root,Nt=>{if(Y<=0||!I(E,Nt.bounds)||((0,it.g)(ct,xt,Nt.halfSize),(0,it.a)(ct,ct,Nt.bounds),Vt(l,d,ct)>ut))return!1;const Pt=Nt.node;return Pt.terminals.forAll(Kt=>vt(Kt)),null!==Pt.residents&&Pt.residents.forAll(Kt=>vt(Kt)),!0},l,d),nt}forEachInDepthRange(l,d,E,F,Y,et,ut){let nt=-1/0,xt=1/0;const vt={setRange:It=>{E===tn.DepthOrder.FRONT_TO_BACK?(nt=Math.max(nt,It.near),xt=Math.min(xt,It.far)):(nt=Math.max(nt,-It.far),xt=Math.min(xt,-It.near))}};vt.setRange(F);const Nt=Vt(d,E,l),Pt=St(d,E),Kt=St(d,-E),hn=It=>{if(!ut(It))return;const Qt=this._objectToBoundingSphere(It),dn=(0,z.g)(Qt),Tn=Vt(d,E,dn)-Nt;Tn-Qt[3]>xt||Tn+Qt[3]<nt||!I(et,Qt)||Y(It,vt)};this._forEachNodeDepthOrdered(this._root,It=>{if(!I(et,It.bounds)||((0,it.g)(ct,Pt,It.halfSize),(0,it.a)(ct,ct,It.bounds),Vt(d,E,ct)-Nt>xt)||((0,it.g)(ct,Kt,It.halfSize),(0,it.a)(ct,ct,It.bounds),Vt(d,E,ct)-Nt<nt))return!1;const Qt=It.node;return Qt.terminals.forAll(dn=>hn(dn)),null!==Qt.residents&&Qt.residents.forAll(dn=>hn(dn)),!0},d,E)}forEachNode(l){this._forEachNode(this._root,d=>l(d.node,d.bounds,d.halfSize))}forEachNeighbor(l,d){const E=(0,z.a)(d),F=(0,z.g)(d),Y=nt=>{const xt=this._objectToBoundingSphere(nt),vt=(0,z.a)(xt),Nt=E+vt;return!((0,it.d)((0,z.g)(xt),F)-Nt*Nt<=0)||l(nt)};let et=!0;const ut=nt=>{et&&(et=Y(nt))};this._forEachNode(this._root,nt=>{const xt=(0,z.a)(nt.bounds),vt=E+xt;if((0,it.d)((0,z.g)(nt.bounds),F)-vt*vt>0)return!1;const Nt=nt.node;return Nt.terminals.forAll(ut),et&&null!==Nt.residents&&Nt.residents.forAll(ut),et}),et&&this.forEachDegenerateObject(ut)}_intersectsNode(l,d){return Xt(d.bounds,2*-d.halfSize,mt),Xt(d.bounds,2*d.halfSize,dt),(0,fn.yK)(l.origin,l.direction,mt,dt)}_intersectsNodeWithOffset(l,d,E){return Xt(d.bounds,2*-d.halfSize,mt),Xt(d.bounds,2*d.halfSize,dt),E.applyToMinMax(mt,dt),(0,fn.yK)(l.origin,l.direction,mt,dt)}_intersectsObject(l,d){const E=this._objectToBoundingSphere(d);return!(E[3]>0)||(0,z.j)(E,l)}_intersectsObjectWithOffset(l,d,E){const F=this._objectToBoundingSphere(d);return!(F[3]>0)||(0,z.j)(E.applyToBoundingSphere(F),l)}_forEachNode(l,d){let E=Tt.acquire().init(l);const F=[E];for(;0!==F.length;){if(E=F.pop(),d(E)&&!E.isLeaf())for(let Y=0;Y<E.node.children.length;Y++)E.node.children[Y]&&F.push(Tt.acquire().init(E).advance(Y));Tt.release(E)}}_forEachNodeDepthOrdered(l,d,E,F=tn.DepthOrder.FRONT_TO_BACK){let Y=Tt.acquire().init(l);const et=[Y];for(function nn(x,l,d){if(!rn.length)for(let E=0;E<8;++E)rn.push({index:0,distance:0});for(let E=0;E<8;++E){const F=T[E];rn.data[E].index=E,rn.data[E].distance=Vt(x,l,F)}rn.sort((E,F)=>E.distance-F.distance);for(let E=0;E<8;++E)d[E]=rn.data[E].index}(E,F,gn);0!==et.length;){if(Y=et.pop(),d(Y)&&!Y.isLeaf())for(let ut=7;ut>=0;--ut){const nt=gn[ut];Y.node.children[nt]&&et.push(Tt.acquire().init(Y).advance(nt))}Tt.release(Y)}}_remove(l,d,E){At.clear();const F=E.advanceTo(d,(Y,et)=>{At.push(Y.node),At.push(et)})?E.node.terminals:E.node.residents;if(F.removeUnordered(l),0===F.length)for(let Y=At.length-2;Y>=0&&this._purge(At.data[Y],At.data[Y+1]);Y-=2);}_nodeIsEmpty(l){if(0!==l.terminals.length)return!1;if(null!==l.residents)return 0===l.residents.length;for(let d=0;d<l.children.length;d++)if(l.children[d])return!1;return!0}_purge(l,d){return d>=0&&(l.children[d]=null),!!this._nodeIsEmpty(l)&&(null===l.residents&&(l.residents=new U.Z({shrink:!0})),!0)}_add(l,d){d.advanceTo(this._objectToBoundingSphere(l))?d.node.terminals.push(l):(d.node.residents.push(l),d.node.residents.length>this._maximumObjectsPerNode&&d.depth<this._maximumDepth&&this._split(d))}_split(l){const d=l.node.residents;l.node.residents=null;for(let E=0;E<d.length;E++){const F=Tt.acquire().init(l);this._add(d.getItemAt(E),F),Tt.release(F)}}_grow(l,d){if(0!==d&&(mn(l,d,E=>this._objectToBoundingSphere(E),bt),en(bt[3])&&!this._fitsInsideTree(bt)))if(this._nodeIsEmpty(this._root.node))(0,z.h)(bt,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const E=this._rootBoundsForRootAsSubNode(bt);this._placingRootViolatesMaxDepth(E)?this._rebuildTree(bt,E):this._growRootAsSubNode(E),Tt.release(E)}}_rebuildTree(l,d){(0,it.c)(Ht,d.bounds),Ht[3]=d.halfSize,mn([l,Ht],2,F=>F,zt);const E=Tt.acquire().init(this._root);this._root.initFrom(null,zt,zt[3]),this._root.increaseHalfSize(1.25),this._forEachNode(E,F=>(this.add(F.node.terminals.data,F.node.terminals.length),null!==F.node.residents&&this.add(F.node.residents.data,F.node.residents.length),!0)),Tt.release(E)}_placingRootViolatesMaxDepth(l){const d=Math.log(l.halfSize/this._root.halfSize)*Math.LOG2E;let E=0;return this._forEachNode(this._root,F=>(E=Math.max(E,F.depth),E+d<=this._maximumDepth)),E+d>this._maximumDepth}_rootBoundsForRootAsSubNode(l){const d=l[3],E=l;let F=-1/0;const Y=this._root.bounds,et=this._root.halfSize;for(let nt=0;nt<3;nt++){const vt=E[nt]+d-(Y[nt]+et),Nt=Math.max(0,Math.ceil((Y[nt]-et-(E[nt]-d))/(2*et))),Pt=Math.max(0,Math.ceil(vt/(2*et)))+1,Kt=2**Math.ceil(Math.log(Nt+Pt)*Math.LOG2E);F=Math.max(F,Kt),Dt[nt].min=Nt,Dt[nt].max=Pt}for(let nt=0;nt<3;nt++){let xt=Dt[nt].min,vt=Dt[nt].max;const Nt=(F-(xt+vt))/2;xt+=Math.ceil(Nt),vt+=Math.floor(Nt),pt[nt]=Y[nt]-et-xt*et*2+(vt+xt)*et}const ut=F*et;return pt[3]=ut*P,Tt.acquire().initFrom(null,pt,ut,0)}_growRootAsSubNode(l){const d=this._root.node;(0,it.c)(bt,this._root.bounds),bt[3]=this._root.halfSize,this._root.init(l),l.advanceTo(bt,null,!0),l.node.children=d.children,l.node.residents=d.residents,l.node.terminals=d.terminals}_shrink(){for(;;){const l=this._findShrinkIndex();if(-1===l)break;this._root.advance(l),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let l=null;const d=this._root.node.children;let E=0,F=0;for(;F<d.length&&null==l;)E=F++,l=d[E];for(;F<d.length;)if(d[F++])return-1;return E}_isDegenerate(l){return!en(this._objectToBoundingSphere(l)[3])}_fitsInsideTree(l){const d=this._root.bounds,E=this._root.halfSize;return l[3]<=E&&l[0]>=d[0]-E&&l[0]<=d[0]+E&&l[1]>=d[1]-E&&l[1]<=d[1]+E&&l[2]>=d[2]-E&&l[2]<=d[2]+E}}class Tt{constructor(){this.bounds=(0,z.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(l){return this.initFrom(l.node,l.bounds,l.halfSize,l.depth)}initFrom(l,d,E,F=this.depth){return this.node=(0,rt.pC)(l)?l:Tt.createEmptyNode(),(0,rt.pC)(d)&&(0,z.h)(d,this.bounds),this.halfSize=E,this.depth=F,this}increaseHalfSize(l){this.halfSize*=l,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*P}advance(l){let d=this.node.children[l];d||(d=Tt.createEmptyNode(),this.node.children[l]=d),this.node=d,this.halfSize/=2,this.depth++;const E=T[l];return this.bounds[0]+=E[0]*this.halfSize,this.bounds[1]+=E[1]*this.halfSize,this.bounds[2]+=E[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(l,d,E=!1){for(;;){if(this.isTerminalFor(l))return d&&d(this,-1),!0;if(this.isLeaf()){if(!E)return d&&d(this,-1),!1;this.node.residents=null}const F=this._childIndex(l);d&&d(this,F),this.advance(F)}}isLeaf(){return null!=this.node.residents}isTerminalFor(l){return l[3]>this.halfSize/2}_childIndex(l){const d=this.bounds;return(d[0]<l[0]?1:0)+(d[1]<l[1]?2:0)+(d[2]<l[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new U.Z({shrink:!0}),residents:new U.Z({shrink:!0})}}static acquire(){return Tt._pool.acquire()}static release(l){Tt._pool.release(l)}static clearPool(){Tt._pool.prune()}}function pn(x,l){x[0]=Math.min(x[0],l[0]-l[3]),x[1]=Math.min(x[1],l[1]-l[3]),x[2]=Math.min(x[2],l[2]-l[3])}function kt(x,l){x[0]=Math.max(x[0],l[0]+l[3]),x[1]=Math.max(x[1],l[1]+l[3]),x[2]=Math.max(x[2],l[2]+l[3])}function Xt(x,l,d){d[0]=x[0]+l,d[1]=x[1]+l,d[2]=x[2]+l}function mn(x,l,d,E){if(1===l){const F=d(x[0]);(0,z.h)(F,E)}else{mt[0]=1/0,mt[1]=1/0,mt[2]=1/0,dt[0]=-1/0,dt[1]=-1/0,dt[2]=-1/0;for(let F=0;F<l;F++){const Y=d(x[F]);en(Y[3])&&(pn(mt,Y),kt(dt,Y))}(0,it.h)(E,mt,dt,.5),E[3]=Math.max(dt[0]-mt[0],dt[1]-mt[1],dt[2]-mt[2])/2}}function St(x,l){let d,E=1/0;for(let F=0;F<8;++F){const Y=Vt(x,l,y[F]);Y<E&&(E=Y,d=y[F])}return d}function Vt(x,l,d){return l*(x[0]*d[0]+x[1]*d[1]+x[2]*d[2])}function en(x){return!isNaN(x)&&x!==-1/0&&x!==1/0&&x>0}Tt._pool=new Q.Z(Tt),function(x){var l;(l=x.DepthOrder||(x.DepthOrder={}))[l.FRONT_TO_BACK=1]="FRONT_TO_BACK",l[l.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(tn||(tn={}));const T=[(0,J.f)(-1,-1,-1),(0,J.f)(1,-1,-1),(0,J.f)(-1,1,-1),(0,J.f)(1,1,-1),(0,J.f)(-1,-1,1),(0,J.f)(1,-1,1),(0,J.f)(-1,1,1),(0,J.f)(1,1,1)],y=[(0,J.f)(-1,-1,-1),(0,J.f)(-1,-1,1),(0,J.f)(-1,1,-1),(0,J.f)(-1,1,1),(0,J.f)(1,-1,-1),(0,J.f)(1,-1,1),(0,J.f)(1,1,-1),(0,J.f)(1,1,1)],P=Math.sqrt(3),W=[null],pt=(0,z.c)(),ct=(0,J.c)(),mt=(0,J.c)(),dt=(0,J.c)(),At=new U.Z,jt=(0,z.c)(),bt=(0,z.c)(),Ht=(0,z.c)(),zt=(0,z.c)(),Dt=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],rn=new U.Z,gn=[0,0,0,0,0,0,0,0],Mn=tn;var On=L(29758);function xn(x,l,d){const E=(0,z.c)(),F=(0,z.g)(E);return(0,it.z)(F,F,x,.5),(0,it.z)(F,F,l,.5),E[3]=(0,it.i)(F,x),(0,it.a)(F,F,d),E}let _n=class{constructor(){this._idToComponent=new Map,this._components=new Mn(x=>x.bounds),this._edges=new Mn(x=>x.bounds),this._tmpLineSegment=(0,w.Ue)(),this._tmpP1=(0,J.c)(),this._tmpP2=(0,J.c)(),this._tmpP3=(0,J.c)(),this.remoteClient=null}fetchCandidates(x,l){var d=this;return(0,D.Z)(function*(){yield Promise.resolve(),(0,lt.k_)(l),yield d._ensureEdgeLocations(x,l);const E=[];return d._edges.forEachNeighbor(F=>(d._addCandidates(x,F,E),E.length<1e3),x.bounds),{result:{candidates:E}}})()}_ensureEdgeLocations(x,l){var d=this;return(0,D.Z)(function*(){const E=[];if(d._components.forEachNeighbor(et=>{if((0,rt.Wi)(et.info)){const{id:ut,uid:nt}=et;E.push({id:ut,uid:nt})}return!0},x.bounds),!E.length)return;const F={components:E},Y=yield d.remoteClient.invoke("fetchAllEdgeLocations",F,(0,rt.Pt)(l,{}));for(const et of Y.components)d._setFetchEdgeLocations(et)})()}add(x){var l=this;return(0,D.Z)(function*(){const d=new yn(x.id,x.bounds);return l._idToComponent.set(d.id,d),l._components.add([d]),{result:{}}})()}remove(x){var l=this;return(0,D.Z)(function*(){const d=l._idToComponent.get(x.id);if(d){const E=[];l._edges.forEachNeighbor(F=>(F.component===d&&E.push(F),!0),d.bounds),l._edges.remove(E),l._components.remove([d]),l._idToComponent.delete(d.id)}return{result:{}}})()}_setFetchEdgeLocations(x){const l=this._idToComponent.get(x.id);if((0,rt.Wi)(l)||x.uid!==l.uid)return;const d=On.n_.createView(x.locations),E=new Array(d.count),F=(0,J.c)(),Y=(0,J.c)();for(let nt=0;nt<d.count;nt++){d.position0.getVec(nt,F),d.position1.getVec(nt,Y);const xt=xn(F,Y,x.origin),vt=new Rn(l,nt,xt);E[nt]=vt}this._edges.add(E);const{objectIds:et,origin:ut}=x;l.info={locations:d,objectIds:et,origin:ut}}_addCandidates(x,l,d){const{info:E}=l.component,{origin:F,objectIds:Y}=E,et=E.locations,ut=et.position0.getVec(l.index,this._tmpP1),nt=et.position1.getVec(l.index,this._tmpP2);(0,it.a)(ut,ut,F),(0,it.a)(nt,nt,F);const xt=Y[et.componentIndex.get(l.index)];this._addEdgeCandidate(x,xt,ut,nt,d),this._addVertexCandidate(x,xt,ut,d),this._addVertexCandidate(x,xt,nt,d)}_addEdgeCandidate(x,l,d,E,F){if(!(x.types&C.r.EDGE))return;const Y=(0,z.g)(x.bounds),et=(0,w.zk)(d,E,this._tmpLineSegment),ut=(0,w.nF)(et,Y,this._tmpP3);(0,z.m)(x.bounds,ut)&&F.push({type:"edge",objectId:l,target:(0,J.a)(ut),distance:(0,it.i)(Y,ut),start:(0,J.a)(d),end:(0,J.a)(E)})}_addVertexCandidate(x,l,d,E){if(!(x.types&C.r.VERTEX))return;const F=(0,z.g)(x.bounds);(0,z.m)(x.bounds,d)&&E.push({type:"vertex",objectId:l,target:(0,J.a)(d),distance:(0,it.i)(F,d)})}};_n=(0,ht._)([(0,ot.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],_n);const Nn=_n;let yn=(()=>{class x{constructor(d,E){this.id=d,this.bounds=E,this.info=null,this.uid=++x.uid}}return x.uid=0,x})();class Rn{constructor(l,d,E){this.component=l,this.index=d,this.bounds=E}}}}]);
//# sourceMappingURL=2478.65b32e8a77238be6.js.map