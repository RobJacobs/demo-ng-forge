import{h as zi}from"./chunk-PSWJZLWW.js";import{a as Wi}from"./chunk-M7T5ZGL3.js";import{$c as Mi,Ab as we,Ac as Fi,Ad as Ni,B as yt,Bb as fe,Bc as _i,Bd as Ui,C as ri,Cb as ci,Cd as $i,Dd as me,Eb as di,Ed as ue,Gc as tt,Hb as He,Hc as it,Ic as ot,Jb as Q,Jc as rt,Jd as qi,Kd as Qi,Nb as et,Qb as A,Rb as fi,Yc as xi,Zc as Ei,_c as Ti,c as ti,dc as mi,dd as ki,e as Je,ec as ui,ed as Di,f as ii,fd as Oi,gd as wi,hd as Si,i as Oe,id as Ri,jd as Ai,kd as Ii,lb as ni,lc as hi,ld as Pi,md as Vi,nc as yi,ob as si,oc as gi,pd as ji,qd as Li,sb as de,t as oi,ub as ne,vb as ai,vc as bi,wb as q,xb as li,xd as Gi,yb as pi,yc as Ci,yd as Bi,zb as gt,zc as vi,zd as Hi}from"./chunk-LZIMIDFQ.js";import{$a as Ye,$b as ie,Aa as se,Ab as E,Bb as C,Cb as v,Db as N,E as Rt,Eb as U,F as lt,Fb as $,Gb as m,Gc as ei,Hb as p,Hc as re,Ib as c,J as At,Jb as R,K as It,Kb as zt,Kc as Ze,L as Qe,Lb as Yt,M as Pt,N as Vt,Nb as Xt,Ob as Kt,Qb as Fe,R as pt,S as ct,Sa as qt,T as H,Tb as L,U as jt,Ub as g,V as We,Va as l,Vb as Xe,Wb as Ke,Xb as ft,Yb as mt,Z as Ee,Zb as je,_ as Te,_b as Le,aa as Lt,ab as Pe,ac as oe,ba as Me,bc as ce,ca as b,cb as dt,d as St,db as j,e as S,ec as Zt,fc as u,gc as T,ha as Ce,hc as z,ia as ve,ib as Ve,ja as Gt,ka as Bt,la as Ht,lb as f,mb as De,na as Nt,nb as ae,nc as ut,o as D,oa as Ut,pa as $t,pb as h,pc as Jt,q as be,qb as Qt,rb as Wt,u as G,uc as Ge,vc as Be,wa as ze,xa as ke,ya as y,yb as K,zb as x,zc as ht}from"./chunk-DDV7S3RG.js";import{a as B,b as Ie,c as wt,d as qe}from"./chunk-NCBA65HR.js";var w=(()=>{class o{constructor(){this.formMessage=new S}validateField(e,t){let i={invalid:!1,message:`Error from server: ${e}`};return D(i).pipe(Qe(1e3))}getFieldHelp(e,t){if(t.filters?.length)return D({count:0,data:[]}).pipe(Qe(1e3));{let i=[];for(let n=t.skip;n<t.skip+t.take;n++)i.push({id:n,address:`${n} street`,city:`${n} city`,state:`${n} state`});return D({count:75,data:i}).pipe(Qe(1e3))}}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac})}}return o})();var Mo=[{props:{label:"Container",type:"grid",attributes:{columns:2}},fieldGroup:[{key:"name",type:"input",props:{label:"Name",type:"string",format:"###-##-####",required:!0,description:"Persons name",attributes:{width:480}}},{key:"age",type:"input",props:{label:"Age",type:"number",format:"#,###,###,##&.&&",required:!0,description:"Persons age",attributes:{width:480}}}]}],ko=[{props:{label:"Container",type:"grid",attributes:{columns:2}},fieldGroup:[{key:"firstName",type:"input",props:{label:"First name",required:!0,description:"Persons first name",attributes:{width:480}}},{key:"lastName",type:"input",props:{label:"Last name",description:"Persons last name",attributes:{width:320,column:1,row:2}}},{key:"age",type:"input",defaultValue:18,props:{label:"Age",type:"number"}},{key:"isActive",type:"checkbox",props:{label:"Is active"}},{key:"birthDate",type:"date-picker",props:{label:"DOB",description:"Persons date of birth",required:!0}},{key:"gender",type:"select",props:{label:"Gender",options:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}]}},{key:"comment",type:"textarea",props:{label:"Comment",required:!0}},{key:"size",type:"radio",props:{label:"Size",description:"What is your size?",options:[{label:"Small",value:"sm"},{label:"Medium",value:"md"},{label:"Large",value:"lg"}],required:!0}},{key:"officeLocation",type:"input-help",props:{label:"Office location",description:"What is your office location",optionsKey:"id",options:[{label:"Address",property:"address"},{label:"City",property:"city"},{label:"State",property:"state"}]}}]},{className:"form-divider",template:'<forge-divider style="margin: 16px 0"></forge-divider>',props:{safeHtml:!0}},{props:{type:"group",label:"Address"},fieldGroup:[{props:{type:"hbox"},fieldGroup:[{key:"address.street",type:"input",props:{label:"Street"}},{key:"address.city",type:"input",props:{label:"City"}},{key:"address.state",type:"input",props:{label:"State"}}]}]},{type:"tab",fieldGroup:[{props:{label:"Tab 1"},fieldGroup:[{props:{type:"hbox"},fieldGroup:[{key:"tab.field1",type:"input",props:{label:"Field 1"}},{key:"tab.field2",type:"input",props:{label:"Field 2"}}]}]},{props:{label:"Tab 2"},fieldGroup:[{props:{type:"vbox"},fieldGroup:[{key:"tab.field3",type:"input",props:{label:"Field 3"}},{key:"tab.field4",type:"input",props:{label:"Field 4"}}]}]}]},{key:"children",type:"table",props:{columns:[{label:"First name",key:"firstName",defaultValue:null},{label:"Last name",key:"lastName",defaultValue:null}]},fieldArray:{fieldGroup:[{key:"firstName",type:"input",props:{required:!0}},{key:"lastName",type:"input"}]}}],Do=[{props:{type:"vbox"},fieldGroup:[{props:{type:"grid",attributes:{width:83,height:10}},fieldGroup:[{props:{type:"group",attributes:{posX:1,posY:1,gridWidth:83,gridHeight:6}},fieldGroup:[{type:"label",props:{label:"Year",attributes:{posX:2,posY:2,gridWidth:4}}},{key:"tax_year",type:"input",defaultValue:"2023",props:{type:"number",disabled:!0,attributes:{posX:20,posY:2,gridWidth:4,width:4}}},{key:"which_value",type:"radio",props:{description:"Value to use on report.",options:[{label:"Original full value",value:"O"},{label:"Current full value",value:"C"}],required:!0,attributes:{posX:2,posY:3,gridWidth:31,width:31}}},{type:"label",props:{label:"Minimum value",required:!0,attributes:{posX:2,posY:4,gridWidth:13}}},{key:"min_val",type:"input",props:{type:"number",required:!0,attributes:{posX:20,posY:4,gridWidth:13,width:13}}},{type:"label",props:{label:"Sort vehicles by",required:!0,attributes:{posX:2,posY:5,gridWidth:17}}},{key:"seq_sw",type:"select",props:{required:!0,options:[{label:"Sequence number",value:"S"},{label:"Owner name",value:"O"}],attributes:{posX:20,posY:5,gridWidth:17,width:15}}}]}]}]}],Yi={formDefinitionBasic:Mo,formDefinitionAll:ko,formDefinitionLayout:Do};var Oo=["container"];function wo(o,r){}function So(o,r){}var Ro=["*"];function Ao(o,r){if(o&1&&(p(0,"formly-field",0),x(),c()),o&2){let e=r.$implicit;E(e)}}function Io(o,r){let e=o._updateTreeValidity.bind(o);o._updateTreeValidity=()=>{},r(),o._updateTreeValidity=e}function Po(o,r,e){if(r.id)return r.id;let t=r.type;return!t&&r.template&&(t="template"),t instanceof ze&&(t=t.prototype.constructor.name),[o,t,r.key,e].join("_")}function M(o){return!ye(o.key)&&o.key!==""&&(!Array.isArray(o.key)||o.key.length>0)}function xe(o){if(!M(o))return[];if(o._keyPath?.key!==o.key){let r=[];if(typeof o.key=="string"){let e=o.key.indexOf("[")===-1?o.key:o.key.replace(/\[(\w+)\]/g,".$1");r=e.indexOf(".")!==-1?e.split("."):[e]}else Array.isArray(o.key)?r=o.key.slice(0):r=[`${o.key}`];P(o,"_keyPath",{key:o.key,path:r})}return o._keyPath.path.slice(0)}var Tt=["required","pattern","minLength","maxLength","min","max"];function Re(o,r){let e=xe(o);if(e.length===0)return;let t=o;for(;t.parent;)t=t.parent,e=[...xe(t),...e];if(r===void 0&&o.resetOnHide){let i=e.pop(),n=e.reduce((s,a)=>s[a]||{},t.model);delete n[i];return}Vo(t.model,e,r)}function Vo(o,r,e){for(let t=0;t<r.length-1;t++){let i=r[t];(!o[i]||!te(o[i]))&&(o[i]=/^\d+$/.test(r[t+1])?[]:{}),o=o[i]}o[r[r.length-1]]=Z(e)}function he(o){let r=o.parent?o.parent.model:o.model;for(let e of xe(o)){if(!r)return r;r=r[e]}return r}function Se(o,...r){return r.forEach(e=>{for(let t in e)ye(o[t])||jo(o[t])?o[t]=Z(e[t]):Lo(o[t],e[t])&&Se(o[t],e[t])}),o}function ye(o){return o==null}function nt(o){return o===void 0}function jo(o){return o===""}function bt(o){return typeof o=="function"}function Lo(o,r){return te(o)&&te(r)&&Object.getPrototypeOf(o)===Object.getPrototypeOf(r)&&!(Array.isArray(o)||Array.isArray(r))}function te(o){return o!=null&&typeof o=="object"}function Go(o){return!!o&&typeof o.then=="function"}function Z(o){if(!te(o)||be(o)||o instanceof Ye||o.changingThisBreaksApplicationSecurity||["RegExp","FileList","File","Blob"].indexOf(o.constructor?.name)!==-1)return o;if(o instanceof Set)return new Set(o);if(o instanceof Map)return new Map(o);if(o instanceof Uint8Array)return new Uint8Array(o);if(o instanceof Uint16Array)return new Uint16Array(o);if(o instanceof Uint32Array)return new Uint32Array(o);if(o._isAMomentObject&&bt(o.clone))return o.clone();if(o instanceof pi)return null;if(o instanceof Date)return new Date(o.getTime());if(Array.isArray(o))return o.slice(0).map(t=>Z(t));let r=Object.getPrototypeOf(o),e=Object.create(r);return e=Object.setPrototypeOf(e,r),Object.keys(o).reduce((t,i)=>{let n=Object.getOwnPropertyDescriptor(o,i);return n.get?Object.defineProperty(t,i,n):t[i]=Z(o[i]),t},e)}function P(o,r,e){Object.defineProperty(o,r,{enumerable:!1,writable:!0,configurable:!0}),o[r]=e}function Mt(o,r,e){let t=[],i=()=>{t.forEach(s=>s()),t=[]},n=I(o,r,({firstChange:s,currentValue:a})=>{!s&&e(),i(),te(a)&&a.constructor.name==="Object"&&Object.keys(a).forEach(d=>{t.push(Mt(o,[...r,d],e))})});return()=>{n.unsubscribe(),i()}}function I(o,r,e){o._observers||P(o,"_observers",{});let t=o;for(let a=0;a<r.length-1;a++)(!t[r[a]]||!te(t[r[a]]))&&(t[r[a]]=/^\d+$/.test(r[a+1])?[]:{}),t=t[r[a]];let i=r[r.length-1],n=r.join(".");o._observers[n]||(o._observers[n]={value:t[i],onChange:[]});let s=o._observers[n];if(t[i]!==s.value&&(s.value=t[i]),e&&s.onChange.indexOf(e)===-1&&(s.onChange.push(e),e({currentValue:s.value,firstChange:!0}),s.onChange.length>=1&&te(t))){let{enumerable:a}=Object.getOwnPropertyDescriptor(t,i)||{enumerable:!0};Object.defineProperty(t,i,{enumerable:a,configurable:!0,get:()=>s.value,set:d=>{if(d!==s.value){let k=s.value;s.value=d,s.onChange.forEach(X=>X({previousValue:k,currentValue:d,firstChange:!1}))}}})}return{setValue(a,d=!0){if(a===s.value)return;let k=s.value;s.value=a,s.onChange.forEach(X=>{X!==e&&d&&X({previousValue:k,currentValue:a,firstChange:!1})})},unsubscribe(){s.onChange=s.onChange.filter(a=>a!==e),s.onChange.length===0&&delete o._observers[n]}}}function Ji(o,r){if(r=Array.isArray(r)?r.join("."):r,!!o.fieldGroup)for(let e=0,t=o.fieldGroup.length;e<t;e++){let i=o.fieldGroup[e],n=Array.isArray(i.key)?i.key.join("."):i.key;if(n===r)return i;if(i.fieldGroup&&(ye(n)||r.indexOf(`${n}.`)===0)){let s=Ji(i,ye(n)?r:r.slice(n.length+1));if(s)return s}}}function Ct(o){o._componentRefs?.forEach(r=>{r instanceof Pe?r.injector.get(Ze).markForCheck():r.markForCheck()})}function Bo(o){return o instanceof $t}function eo(o){let r=t=>t.hide||t.expressions?.hide||t.hideExpression,e=!o.resetOnHide||!r(o);if(!r(o)&&o.resetOnHide){let t=o.parent;for(;t&&!r(t);)t=t.parent;e=!t||!r(t)}return!e}function at(){return+We.major>18||+We.major>=18&&+We.minor>=1}function Ho(o,r){try{return Function(...r,`return ${o};`)}catch(e){console.error(e)}}function No(o,r,e){return typeof o=="function"?o.apply(r,e):!!o}function vt(o,r=!1){let e=o.formControl,t=e._fields?e._fields.indexOf(o):-1;t!==-1&&e._fields.splice(t,1);let i=e.parent;if(!i)return;let n={emitEvent:r};if(i instanceof He){let s=i.controls.findIndex(a=>a===e);s!==-1&&i.removeAt(s,n)}else if(i instanceof we){let s=xe(o),a=s[s.length-1];i.get([a])===e&&i.removeControl(a,n)}e.setParent(null)}function to(o){return o.formControl?o.formControl:o.shareFormControl===!1?null:o.form?.get(xe(o))}function kt(o,r,e=!1){if(r=r||o.formControl,r._fields||P(r,"_fields",[]),r._fields.indexOf(o)===-1&&r._fields.push(o),!o.formControl&&r){P(o,"formControl",r),r.setValidators(null),r.setAsyncValidators(null),o.props.disabled=!!o.props.disabled;let a=I(o,["props","disabled"],({firstChange:d,currentValue:k})=>{d||(k?o.formControl.disable():o.formControl.enable())});r instanceof fe&&r.registerOnDisabledChange(a.setValue)}if(!o.form||!M(o))return;let t=o.form,i=xe(o),n=he(o);!(ye(r.value)&&ye(n))&&r.value!==n&&r instanceof fe&&r.patchValue(n);for(let a=0;a<i.length-1;a++){let d=i[a];t.get([d])||t.setControl(d,new we({}),{emitEvent:e}),t=t.get([d])}let s=i[i.length-1];!o._hide&&t.get([s])!==r&&t.setControl(s,r,{emitEvent:e})}function Ne(o,r=!1){let e=o.status,t=o.value;o.updateValueAndValidity({emitEvent:!1,onlySelf:r}),e!==o.status&&o.statusChanges.emit(o.status),t!==o.value&&o.valueChanges.emit(o.value)}function io(o){delete o?._fields,o.setValidators(null),o.setAsyncValidators(null),(o instanceof we||o instanceof He)&&Object.values(o.controls).forEach(r=>io(r))}var Ft=class{onPopulate(r){if(r._expressions)return;P(r,"_expressions",{}),I(r,["hide"],({currentValue:t,firstChange:i})=>{P(r,"_hide",!!t),(!i||i&&t===!0)&&(r.props.hidden=t,r.options._hiddenFieldsForCheck.push({field:r}))}),r.hideExpression&&I(r,["hideExpression"],({currentValue:t})=>{r._expressions.hide=this.parseExpressions(r,"hide",typeof t=="boolean"?()=>t:t)});let e=(t,i)=>{typeof i=="string"||bt(i)?r._expressions[t]=this.parseExpressions(r,t,i):i instanceof St&&(r._expressions[t]={value$:i.pipe(jt(n=>{this.evalExpr(r,t,n),r.options._detectChanges(r)}))})};r.expressions=r.expressions||{};for(let t of Object.keys(r.expressions))I(r,["expressions",t],({currentValue:i})=>{e(t,bt(i)?(...n)=>i(r,n[3]):i)});r.expressionProperties=r.expressionProperties||{};for(let t of Object.keys(r.expressionProperties))I(r,["expressionProperties",t],({currentValue:i})=>e(t,i))}postPopulate(r){if(!r.parent&&!r.options.checkExpressions){let e=!1;r.options.checkExpressions=(t,i)=>{if(e)return;e=!0;let n=this.checkExpressions(t,i),s=r.options;s._hiddenFieldsForCheck.sort(a=>a.field.hide?-1:1).forEach(a=>this.changeHideState(a.field,a.field.hide??a.default,!i)),s._hiddenFieldsForCheck=[],n&&this.checkExpressions(r),e=!1}}}parseExpressions(r,e,t){let i;if(r.parent&&["hide","props.disabled"].includes(e)){let s=a=>e==="hide"?a.hide:a.props.disabled;i=()=>{let a=r.parent;for(;a.parent&&!s(a);)a=a.parent;return s(a)}}t=t||(()=>!1),typeof t=="string"&&(t=Ho(t,["model","formState","field"]));let n;return{callback:s=>{try{let a=No(i?(...d)=>i(r)||t(...d):t,{field:r},[r.model,r.options.formState,r,s]);return s||n!==a&&(!te(a)||be(a)||JSON.stringify(a)!==JSON.stringify(n))?(n=a,this.evalExpr(r,e,a),!0):!1}catch(a){throw a.message=`[Formly Error] [Expression "${e}"] ${a.message}`,a}}}}checkExpressions(r,e=!1){if(!r)return!1;let t=!1;if(r._expressions)for(let i of Object.keys(r._expressions))r._expressions[i].callback?.(e)&&(t=!0);return r.fieldGroup?.forEach(i=>this.checkExpressions(i,e)&&(t=!0)),t}changeDisabledState(r,e){r.fieldGroup&&r.fieldGroup.filter(t=>!t._expressions.hasOwnProperty("props.disabled")).forEach(t=>this.changeDisabledState(t,e)),M(r)&&r.props.disabled!==e&&(r.props.disabled=e)}changeHideState(r,e,t){if(r.fieldGroup&&r.fieldGroup.filter(i=>i&&!i._expressions.hide).forEach(i=>this.changeHideState(i,e,t)),r.formControl&&M(r)){P(r,"_hide",!!(e||r.hide));let i=r.formControl;i._fields?.length>1&&Ne(i),e===!0&&(!i._fields||i._fields.every(n=>!!n._hide))?(vt(r,!0),t&&r.resetOnHide&&(Re(r,void 0),r.formControl.reset({value:void 0,disabled:r.formControl.disabled}),r.options.fieldChanges.next({value:void 0,field:r,type:"valueChanges"}),r.fieldGroup&&r.formControl instanceof He&&(r.fieldGroup.length=0))):e===!1&&(r.resetOnHide&&!nt(r.defaultValue)&&nt(he(r))&&Re(r,r.defaultValue),kt(r,void 0,!0),r.resetOnHide&&r.fieldArray&&r.fieldGroup?.length!==r.model?.length&&r.options.build(r))}r.options.fieldChanges&&r.options.fieldChanges.next({field:r,type:"hidden",value:e})}evalExpr(r,e,t){if(e.indexOf("model.")===0){let i=e.replace(/^model\./,""),n=r.fieldGroup?r:r.parent,s=r?.key===i?r.formControl:r.form.get(i);!s&&r.get(i)&&(s=r.get(i).formControl),Re({key:i,parent:n,model:r.model},t),s&&!(ye(s.value)&&ye(t))&&s.value!==t&&s.patchValue(t)}else{try{let i=r,n=this._evalExpressionPath(r,e),s=n.length-1;for(let a=0;a<s;a++)i=i[n[a]];i[n[s]]=t}catch(i){throw i.message=`[Formly Error] [Expression "${e}"] ${i.message}`,i}["templateOptions.disabled","props.disabled"].includes(e)&&M(r)&&this.changeDisabledState(r,t)}this.emitExpressionChanges(r,e,t)}emitExpressionChanges(r,e,t){r.options.fieldChanges&&r.options.fieldChanges.next({field:r,type:"expressionChanges",property:e,value:t})}_evalExpressionPath(r,e){if(r._expressions[e]&&r._expressions[e].paths)return r._expressions[e].paths;let t=[];return e.indexOf("[")===-1?t=e.split("."):e.split(/[[\]]{1,2}/).filter(i=>i).forEach(i=>{let n=i.match(/['|"](.*?)['|"]/);n?t.push(n[1]):t.push(...i.split(".").filter(s=>s))}),r._expressions[e]&&(r._expressions[e].paths=t),t}},_t=class{constructor(r){this.config=r,this.formId=0}prePopulate(r){let e=r.parent;this.initRootOptions(r),this.initFieldProps(r),e&&(Object.defineProperty(r,"options",{get:()=>e.options,configurable:!0}),Object.defineProperty(r,"model",{get:()=>M(r)&&r.fieldGroup?he(r):e.model,configurable:!0})),Object.defineProperty(r,"get",{value:t=>Ji(r,t),configurable:!0}),this.getFieldComponentInstance(r).prePopulate?.(r)}onPopulate(r){this.initFieldOptions(r),this.getFieldComponentInstance(r).onPopulate?.(r),r.fieldGroup&&r.fieldGroup.forEach((e,t)=>{e&&(Object.defineProperty(e,"parent",{get:()=>r,configurable:!0}),Object.defineProperty(e,"index",{get:()=>t,configurable:!0})),this.formId++})}postPopulate(r){this.getFieldComponentInstance(r).postPopulate?.(r)}initFieldProps(r){r.props??=r.templateOptions,Object.defineProperty(r,"templateOptions",{get:()=>r.props,set:e=>r.props=e,configurable:!0})}initRootOptions(r){if(r.parent)return;let e=r.options;r.options.formState=r.options.formState||{},e.showError||(e.showError=this.config.extras.showError),e.fieldChanges||P(e,"fieldChanges",new S),e._hiddenFieldsForCheck||(e._hiddenFieldsForCheck=[]),e._detectChanges=t=>{t._componentRefs&&Ct(t),t.fieldGroup?.forEach(i=>i&&e._detectChanges(i))},e.detectChanges=t=>{t.options.checkExpressions?.(t),e._detectChanges(t)},e.resetModel=t=>{t=Z(t??e._initialModel),r.model&&(Object.keys(r.model).forEach(i=>delete r.model[i]),Object.assign(r.model,t||{})),at()||I(e,["parentForm","submitted"]).setValue(!1,!1),e.build(r),r.form.reset(r.model)},e.updateInitialValue=t=>e._initialModel=Z(t??r.model),r.options.updateInitialValue()}initFieldOptions(r){Se(r,{id:Po(`formly_${this.formId}`,r,r.index),hooks:{},modelOptions:{},validation:{messages:{}},props:!r.type||!M(r)?{}:{label:"",placeholder:"",disabled:!1}}),this.config.extras.resetFieldOnHide&&r.resetOnHide!==!1&&(r.resetOnHide=!0),r.type!=="formly-template"&&(r.template||r.expressions?.template||r.expressionProperties?.template)&&(r.type="formly-template"),!r.type&&r.fieldGroup&&(r.type="formly-group"),r.type&&this.config.getMergedField(r),M(r)&&!nt(r.defaultValue)&&nt(he(r))&&!eo(r)&&Re(r,r.defaultValue),r.wrappers=r.wrappers||[]}getFieldComponentInstance(r){let e=()=>{let t=this.config.resolveFieldTypeRef(r),i=r._componentRefs?.slice(-1)[0];return i instanceof Pe&&i?.componentType===t?.componentType&&(t=i),t?.instance};return r._proxyInstance||P(r,"_proxyInstance",new Proxy({},{get:(t,i)=>e()?.[i],set:(t,i,n)=>e()[i]=n})),r._proxyInstance}},xt=class{prePopulate(r){this.root||(this.root=r),r.parent&&Object.defineProperty(r,"form",{get:()=>r.parent.formControl,configurable:!0})}onPopulate(r){r.hasOwnProperty("fieldGroup")&&!M(r)?P(r,"formControl",r.form):this.addFormControl(r)}postPopulate(r){if(this.root!==r)return;if(this.root=null,this.setValidators(r)&&r.parent){let t=r.parent;for(;t;)(M(t)||!t.parent)&&Ne(t.formControl,!0),t=t.parent}}addFormControl(r){let e=to(r);if(!r.fieldArray){if(e){if(e instanceof fe){let t=M(r)?he(r):r.defaultValue;e.defaultValue=t}}else{let t={updateOn:r.modelOptions.updateOn};if(r.fieldGroup)e=new we({},t);else{let i=M(r)?he(r):r.defaultValue;e=new ci({value:i,disabled:!!r.props.disabled},Ie(B({},t),{initialValueIsDefault:!0}))}}kt(r,e)}}setValidators(r,e=!1){e===!1&&M(r)&&r.props?.disabled&&(e=!0);let t=!1;if(r.fieldGroup?.forEach(i=>i&&this.setValidators(i,e)&&(t=!0)),M(r)||!r.parent||!M(r)&&!r.fieldGroup){let{formControl:i}=r;if(i&&(M(r)&&i instanceof fe&&(e&&i.enabled&&(i.disable({emitEvent:!1,onlySelf:!0}),t=!0),!e&&i.disabled&&(i.enable({emitEvent:!1,onlySelf:!0}),t=!0)),i.validator===null&&this.hasValidators(r,"_validators")&&(i.setValidators(()=>{let n=ne.compose(this.mergeValidators(r,"_validators"));return n?n(i):null}),t=!0),i.asyncValidator===null&&this.hasValidators(r,"_asyncValidators")&&(i.setAsyncValidators(()=>{let n=ne.composeAsync(this.mergeValidators(r,"_asyncValidators"));return n?n(i):D(null)}),t=!0),t)){Ne(i,!0);let n=i.parent;for(let s=1;s<xe(r).length;s++)n&&(Ne(n,!0),n=n.parent)}}return t}hasValidators(r,e){let t=r.formControl;return t?._fields?.length>1&&t._fields.some(i=>i[e].length>0)||r[e].length>0?!0:r.fieldGroup?.some(i=>i?.fieldGroup&&!M(i)&&this.hasValidators(i,e))}mergeValidators(r,e){let t=[],i=r.formControl;return i?._fields?.length>1?i._fields.filter(n=>!n._hide).forEach(n=>t.push(...n[e])):r[e]&&t.push(...r[e]),r.fieldGroup&&r.fieldGroup.filter(n=>n?.fieldGroup&&!M(n)).forEach(n=>t.push(...this.mergeValidators(n,e))),t}},Et=class{constructor(r){this.config=r}onPopulate(r){this.initFieldValidation(r,"validators"),this.initFieldValidation(r,"asyncValidators")}initFieldValidation(r,e){let t=[];if(e==="validators"&&!(r.hasOwnProperty("fieldGroup")&&!M(r))&&t.push(this.getPredefinedFieldValidation(r)),r[e])for(let i of Object.keys(r[e]))i==="validation"?t.push(...r[e].validation.map(n=>this.wrapNgValidatorFn(r,n))):t.push(this.wrapNgValidatorFn(r,r[e][i],i));P(r,"_"+e,t)}getPredefinedFieldValidation(r){let e=[];return Tt.forEach(t=>I(r,["props",t],({currentValue:i,firstChange:n})=>{e=e.filter(s=>s!==t),t==="required"&&i!=null&&typeof i!="boolean"&&console.warn(`Formly: Invalid prop 'required' of type '${typeof i}', expected 'boolean' (Field:${r.key}).`),i!=null&&i!==!1&&e.push(t),!n&&r.formControl&&Ne(r.formControl)})),t=>e.length===0?null:ne.compose(e.map(i=>()=>{let n=r.props[i];switch(i){case"required":return ne.required(t);case"pattern":return ne.pattern(n)(t);case"minLength":let s=ne.minLength(n)(t),a=this.config.getValidatorMessage("minlength")||r.validation?.messages?.minlength?"minlength":"minLength";return s?{[a]:s.minlength}:null;case"maxLength":let d=ne.maxLength(n)(t),k=this.config.getValidatorMessage("maxlength")||r.validation?.messages?.maxlength?"maxlength":"maxLength";return d?{[k]:d.maxlength}:null;case"min":return ne.min(n)(t);case"max":return ne.max(n)(t);default:return null}}))(t)}wrapNgValidatorFn(r,e,t){let i;if(typeof e=="string"&&(i=Z(this.config.getValidator(e))),typeof e=="object"&&e.name&&(i=Z(this.config.getValidator(e.name)),e.options&&(i.options=e.options)),typeof e=="object"&&e.expression){let n=e,{expression:s}=n,a=qe(n,["expression"]);i={name:t,validation:s,options:Object.keys(a).length>0?a:null}}return typeof e=="function"&&(i={name:t,validation:e}),s=>{let a=i.validation(s,r,i.options);return Go(a)?a.then(d=>this.handleResult(r,t?!!d:d,i)):be(a)?a.pipe(G(d=>this.handleResult(r,t?!!d:d,i))):this.handleResult(r,t?!!a:a,i)}}handleResult(r,e,{name:t,options:i}){typeof e=="boolean"&&(e=e?null:{[t]:i||!0});let n=r.formControl;return n?._childrenErrors?.[t]?.(),te(e)&&Object.keys(e).forEach(s=>{let a=e[s].errorPath?e[s].errorPath:i?.errorPath,d=a?r.formControl.get(a):null;if(d){let k=e[s],{errorPath:X}=k,V=qe(k,["errorPath"]);d.setErrors(Ie(B({},d.errors||{}),{[s]:V})),!n._childrenErrors&&P(n,"_childrenErrors",{}),n._childrenErrors[s]=()=>{let Ot=d.errors||{},{[s]:pe}=Ot,Dt=qe(Ot,[wt(s)]);d.setErrors(Object.keys(Dt).length===0?null:Dt)}}}),e}},_=(()=>{class o{constructor(){this.field={}}set _formlyControls(e){let t=this.field;t._localFields=e.map(i=>i.control._fields||[]).flat().filter(i=>i.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options?.formState||{}}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275dir=ae({type:o,viewQuery:function(t,i){if(t&1&&mt(ai,5),t&2){let n;je(n=Le())&&(i._formlyControls=n)}},inputs:{field:"field"},standalone:!1})}}return o})(),Uo=(()=>{class o extends _{get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}constructor(e){super(),this.sanitizer=e,this.innerHtml={}}static{this.\u0275fac=function(t){return new(t||o)(j(oi))}}static{this.\u0275cmp=f({type:o,selectors:[["formly-template"]],standalone:!1,features:[h],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(t,i){t&1&&R(0,"div",0),t&2&&m("innerHtml",i.template,qt)},encapsulation:2,changeDetection:0})}}return o})(),_e=(()=>{class o{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError(e){return e.formControl?.invalid&&(e.formControl?.touched||e.options.parentForm?.submitted||!!e.field.validation?.show)}},this.extensions={},this.presets={},this.extensionsByPriority={},this.componentRefs={}}addConfig(e){if(Array.isArray(e)){e.forEach(t=>this.addConfig(t));return}e.types&&e.types.forEach(t=>this.setType(t)),e.validators&&e.validators.forEach(t=>this.setValidator(t)),e.wrappers&&e.wrappers.forEach(t=>this.setWrapper(t)),e.validationMessages&&e.validationMessages.forEach(t=>this.addValidatorMessage(t.name,t.message)),e.extensions&&this.setSortedExtensions(e.extensions),e.extras&&(this.extras=B(B({},this.extras),e.extras)),e.presets&&(this.presets=B(B({},this.presets),e.presets.reduce((t,i)=>Ie(B({},t),{[i.name]:i.config}),{})))}setType(e){Array.isArray(e)?e.forEach(t=>this.setType(t)):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions","wrappers"].forEach(t=>{e.hasOwnProperty(t)&&(this.types[e.name][t]=e[t])}))}getType(e,t=!1){if(e instanceof ze)return{component:e,name:e.prototype.constructor.name};if(!this.types[e]){if(t)throw new Error(`[Formly Error] The type "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(e),this.types[e]}getMergedField(e={}){let t=this.getType(e.type);if(!t)return;t.defaultOptions&&Se(e,t.defaultOptions);let i=t.extends&&this.getType(t.extends).defaultOptions;i&&Se(e,i),e?.optionsTypes&&e.optionsTypes.forEach(s=>{let a=this.getType(s).defaultOptions;a&&Se(e,a)});let n=this.resolveFieldTypeRef(e);n?.instance?.defaultOptions&&Se(e,n.instance.defaultOptions),!e.wrappers&&t.wrappers&&(e.wrappers=[...t.wrappers])}resolveFieldTypeRef(e={}){let t=this.getType(e.type);if(!t||!t.component)return null;if(!this.componentRefs[t.name]){let{_viewContainerRef:i,_injector:n}=e.options;if(!i||!n)return null;let s=i.createComponent(t.component,{injector:n});this.componentRefs[t.name]=s;try{s.destroy()}catch(a){console.error(`An error occurred while destroying the Formly component type "${e.type}"`,a)}}return this.componentRefs[t.name]}clearRefs(){this.componentRefs={}}setWrapper(e){this.wrappers[e.name]=e,e.types&&e.types.forEach(t=>{this.setTypeWrapper(t,e.name)})}getWrapper(e){if(e instanceof ze)return{component:e,name:e.prototype.constructor.name};if(!this.wrappers[e])throw new Error(`[Formly Error] The wrapper "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[e]}setTypeWrapper(e,t){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),this.types[e].wrappers.indexOf(t)===-1&&this.types[e].wrappers.push(t)}setValidator(e){this.validators[e.name]=e}getValidator(e){if(!this.validators[e])throw new Error(`[Formly Error] The validator "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[e]}addValidatorMessage(e,t){this.messages[e]=t}getValidatorMessage(e){return this.messages[e]}setSortedExtensions(e){e.forEach(t=>{let i=t.priority??1;this.extensionsByPriority[i]=Ie(B({},this.extensionsByPriority[i]),{[t.name]:t.extension})}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((t,i)=>t-i).reduce((t,i)=>B(B({},t),this.extensionsByPriority[i]),{})}mergeExtendedType(e){if(!this.types[e].extends)return;let t=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=t.component),this.types[e].wrappers||(this.types[e].wrappers=t.wrappers)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),oo=(()=>{class o{constructor(e){this.ref=e}ngOnChanges(){this.name=this.name||"formly-group"}static{this.\u0275fac=function(t){return new(t||o)(j(Ye))}}static{this.\u0275dir=ae({type:o,selectors:[["","formlyTemplate",""]],inputs:{name:[0,"formlyTemplate","name"]},features:[ke]})}}return o})(),$o=(()=>{class o extends oo{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275dir=ae({type:o,selectors:[["","formlyTemplate",""]],standalone:!1,features:[h]})}}return o})(),st=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac})}}return o})(),ro=(()=>{class o{get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof Pe?this.componentRefs[0].location:null}constructor(e,t,i,n,s){this.config=e,this.renderer=t,this._elementRef=i,this.hostContainerRef=n,this.form=s,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(e=>e.unsubscribe()),this.hooksObservers.forEach(e=>e()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(e,t,i=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),i=this.field?.wrappers),i?.length>0){let[n,...s]=i,{component:a}=this.config.getWrapper(n),d=e.createComponent(a);this.attachComponentRef(d,t),I(d.instance,["fieldComponent"],({currentValue:k,previousValue:X,firstChange:V})=>{if(k){if(X&&X._lContainer===k._lContainer)return;let pe=X?X.detach():null;pe&&!pe.destroyed?k.insert(pe):this.renderField(k,t,s),!V&&d.changeDetectorRef.detectChanges()}})}else if(t?.type){let n=this.form?.templates?.find(a=>a.name===t.type),s;if(n)s=e.createEmbeddedView(n.ref,{$implicit:t});else{let{component:a}=this.config.getType(t.type,!0);s=e.createComponent(a)}this.attachComponentRef(s,t)}}triggerHook(e,t){if((e==="onInit"||e==="onChanges"&&t.field&&!t.field.firstChange)&&(this.valueChangesUnsubscribe(),this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[e]&&(!t||t.field)){let i=this.field.hooks[e](this.field);if(be(i)&&["onInit","afterContentInit","afterViewInit"].indexOf(e)!==-1){let n=i.subscribe();this.hooksObservers.push(()=>n.unsubscribe())}}e==="onChanges"&&t.field&&(this.resetRefs(t.field.previousValue),this.render())}attachComponentRef(e,t){this.componentRefs.push(e),t._componentRefs.push(e),e instanceof Pe&&Object.assign(e.instance,{field:t})}render(){if(this.field){if(!this.field.options){this.detectFieldBuild=!0;return}if(this.detectFieldBuild=!1,this.hostObservers.forEach(e=>e.unsubscribe()),this.hostObservers=[I(this.field,["hide"],({firstChange:e,currentValue:t})=>{let i=this.containerRef;this.config.extras.lazyRender===!1?(e&&this.renderField(i,this.field),(!e||e&&t)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",t?"none":"")):t?(i.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(i,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!e&&this.field.options.detectChanges(this.field)}),I(this.field,["className"],({firstChange:e,currentValue:t})=>{(!e||e&&t)&&(!this.config.extras.lazyRender||this.field.hide!==!0)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",t)})],!at())["touched","pristine","status"].forEach(e=>this.hostObservers.push(I(this.field,["formControl",e],({firstChange:t})=>!t&&Ct(this.field))));else if(this.field.formControl){let e=this.field.formControl.events.subscribe(()=>Ct(this.field));this.hostObservers.push(e)}}}resetRefs(e){e&&(e._localFields?e._localFields=[]:P(this.field,"_localFields",[]),e._componentRefs?e._componentRefs=e._componentRefs.filter(t=>this.componentRefs.indexOf(t)===-1):P(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(e){if(!e)return()=>{};let t=Mt(e,["props"],()=>e.options.detectChanges(e)),i=[()=>{t()}];for(let s of Object.keys(e._expressions||{})){let a=I(e,["_expressions",s],({currentValue:d,previousValue:k})=>{k?.subscription&&(k.subscription.unsubscribe(),k.subscription=null),be(d.value$)&&(d.subscription=d.value$.subscribe())});i.push(()=>{e._expressions[s]?.subscription&&e._expressions[s].subscription.unsubscribe(),a.unsubscribe()})}for(let s of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){let a=I(e,s,({firstChange:d})=>!d&&e.options.detectChanges(e));i.push(()=>a.unsubscribe())}if(e.formControl&&!e.fieldGroup){let s=e.formControl,a=s.valueChanges.pipe(G(V=>(e.parsers?.map(pe=>V=pe(V,e)),Object.is(V,e.formControl.value)||e.formControl.setValue(V),V)),Pt((V,pe)=>!(V!==pe||Array.isArray(V)||te(V))));s.value!==he(e)&&(a=a.pipe(pt(s.value)));let{updateOn:d,debounce:k}=e.modelOptions;(!d||d==="change")&&k?.default>0&&(a=a.pipe(At(k.default)));let X=a.subscribe(V=>{s._fields?.length>1&&s instanceof fe&&s.patchValue(V,{emitEvent:!1,onlySelf:!0}),M(e)&&Re(e,V),e.options.fieldChanges.next({value:V,field:e,type:"valueChanges"})});i.push(()=>X.unsubscribe())}let n=[];return I(e,["_localFields"],({currentValue:s})=>{n.forEach(a=>a()),n=(s||[]).map(a=>this.fieldChanges(a))}),()=>{i.forEach(s=>s()),n.forEach(s=>s())}}static{this.\u0275fac=function(t){return new(t||o)(j(_e),j(dt),j(se),j(Ve),j(st,8))}}static{this.\u0275cmp=f({type:o,selectors:[["formly-field"]],viewQuery:function(t,i){if(t&1&&mt(Oo,7,Ve),t&2){let n;je(n=Le())&&(i.viewContainerRef=n.first)}},inputs:{field:"field"},features:[ke],decls:2,vars:0,consts:[["container",""]],template:function(t,i){t&1&&Wt(0,wo,0,0,"ng-template",null,0,ht)},styles:["[_nghost-%COMP%]:empty{display:none}"]})}}return o})(),J=(()=>{class o extends ro{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["formly-field"]],standalone:!1,features:[h],decls:2,vars:0,consts:[["container",""]],template:function(t,i){t&1&&Qt(0,So,0,0,"ng-template",null,0,ht)},styles:["[_nghost-%COMP%]:empty{display:none}"]})}}return o})(),qo=(()=>{class o extends _{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["formly-group"]],hostVars:2,hostBindings:function(t,i){t&2&&Zt(i.field.fieldGroupClassName||"")},standalone:!1,features:[h],ngContentSelectors:Ro,decls:3,vars:0,consts:[[3,"field"]],template:function(t,i){t&1&&(Xe(),U(0,Ao,1,2,"formly-field",0,N),Ke(2)),t&2&&$(i.field.fieldGroup)},dependencies:[J],encapsulation:2,changeDetection:0})}}return o})(),Ue=new Lt("FORMLY_CONFIG");function Xi(o){return{types:[{name:"formly-group",component:qo},{name:"formly-template",component:Uo}],extensions:[{name:"core",extension:new _t(o),priority:-250},{name:"field-validation",extension:new Et(o),priority:-200},{name:"field-form",extension:new xt,priority:-150},{name:"field-expression",extension:new Ft,priority:-100}]}}var Ki=(o=[])=>({provide:Ue,multi:!0,useFactory:()=>{let r=b(Ue,{skipSelf:!0,optional:!0});return r?(r.push(o),r):o}}),$e=(()=>{class o{constructor(e,t,i,n,s=[]){this.config=e,this.injector=t,this.viewContainerRef=i,this.parentForm=n,s&&s.forEach(a=>e.addConfig(a))}buildForm(e,t=[],i,n){this.build({fieldGroup:t,model:i,form:e,options:n})}build(e){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");e.parent||this._setOptions(e),Io(e.form,()=>{if(this._build(e),!e.parent||e.fieldArray){let t=e.options;e.parent&&eo(e)&&t._hiddenFieldsForCheck?.push({field:e,default:!1}),t.checkExpressions?.(e,!0),t._detectChanges?.(e)}})}_build(e){if(!e)return;let t=Object.values(this.config.extensions);t.forEach(i=>i.prePopulate?.(e)),t.forEach(i=>i.onPopulate?.(e)),e.fieldGroup?.forEach(i=>this._build(i)),t.forEach(i=>i.postPopulate?.(e))}_setOptions(e){e.form=e.form||new we({}),e.model=e.model||{},e.options=e.options||{};let t=e.options;t._viewContainerRef||P(t,"_viewContainerRef",this.viewContainerRef),t._injector||P(t,"_injector",this.injector),t.build||(t.build=(i=e)=>(this.build(i),i)),!t.parentForm&&this.parentForm&&(P(t,"parentForm",this.parentForm),at()||I(t,["parentForm","submitted"],({firstChange:i})=>{i||t.detectChanges(e)}))}static{this.\u0275fac=function(t){return new(t||o)(Me(_e),Me(Gt),Me(Ve,8),Me(et,8),Me(Ue,8))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Qo=(()=>{class o{set form(e){this.field.form=e}get form(){return this.field.form}set model(e){this.config.extras.immutable&&this._modelChangeValue===e||this.setField({model:e})}get model(){return this.field.model}set fields(e){this.setField({fieldGroup:e})}get fields(){return this.field.fieldGroup}set options(e){this.setField({options:e})}get options(){return this.field.options}set templates(e){this.fieldTemplates.templates=e}constructor(e,t,i,n){this.builder=e,this.config=t,this.ngZone=i,this.fieldTemplates=n,this.modelChange=new Nt,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}ngDoCheck(){this.config.extras.checkExpressionOn==="changeDetectionCheck"&&this.checkExpressionChange()}ngOnChanges(e){e.fields&&this.form&&io(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe(),this.config.clearRefs()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();let e=null;if(at()){let n=this.options?.parentForm?.submitted;e=this.form.events.subscribe(()=>{n!==this.options?.parentForm?.submitted&&(this.options.detectChanges(this.field),n=this.options?.parentForm?.submitted)})}let t=[Mt(this.field.options,["formState"],()=>this.field.options.detectChanges(this.field))],i=this.field.options.fieldChanges.pipe(lt(({field:n,type:s})=>M(n)&&s==="valueChanges"),ct(()=>Bo(this.ngZone)?D(null):this.ngZone.onStable.asObservable().pipe(It(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=Z(this.model))}));return()=>{t.forEach(n=>n()),e?.unsubscribe(),i.unsubscribe()}}setField(e){this.config.extras.immutable?this.field=B(B({},this.field),Z(e)):Object.keys(e).forEach(t=>this.field[t]=e[t])}static{this.\u0275fac=function(t){return new(t||o)(j($e),j(_e),j(Ut),j(st))}}static{this.\u0275cmp=f({type:o,selectors:[["formly-form"]],contentQueries:function(t,i,n){if(t&1&&ft(n,oo,4),t&2){let s;je(s=Le())&&(i.templates=s)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[ut([$e,st]),ke],decls:1,vars:2,consts:[[3,"field"]],template:function(t,i){t&1&&(p(0,"formly-field",0),x(),c()),t&2&&E(i.field)},dependencies:[ro],encapsulation:2,changeDetection:0})}}return o})(),no=(()=>{class o extends Qo{set templates(e){this.fieldTemplates.templates=e}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["formly-form"]],contentQueries:function(t,i,n){if(t&1&&ft(n,$o,4),t&2){let s;je(s=Le())&&(i.templates=s)}},standalone:!1,features:[ut([$e,st]),h],decls:1,vars:2,consts:[[3,"field"]],template:function(t,i){t&1&&(p(0,"formly-field",0),x(),c()),t&2&&E(i.field)},dependencies:[J],encapsulation:2,changeDetection:0})}}return o})(),Wo=(()=>{class o{get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}constructor(e,t,i){this.renderer=e,this.elementRef=t,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change","wheel"],callback:(n,s)=>{switch(n){case"focus":return this.onFocus(s);case"blur":return this.onBlur(s);case"change":return this.onChange(s);default:return this.props[n](this.field,s)}}},this.document=i}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(t=>t()),this.uiEvents.events.forEach(t=>{(this.props?.[t]||["focus","blur","change"].indexOf(t)!==-1)&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,t,i=>this.uiEvents.callback(t,i)))}),this.props?.attributes&&I(this.field,["props","attributes"],({currentValue:t,previousValue:i})=>{i&&Object.keys(i).forEach(n=>this.removeAttribute(n)),t&&Object.keys(t).forEach(n=>{t[n]!=null&&this.setAttribute(n,t[n])})}),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),this.fieldAttrElements.length===1&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=I(this.field,["focus"],({currentValue:t})=>{this.toggleFocus(t)}))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){let e=this.elementRef.nativeElement;this.uiAttributes=[...Tt,"tabindex","placeholder","readonly","disabled","step"].filter(t=>!e.hasAttribute||!e.hasAttribute(t))}for(let e=0;e<this.uiAttributes.length;e++){let t=this.uiAttributes[e],i=this.props[t];this.uiAttributesCache[t]!==i&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(t.toLowerCase()))&&(this.uiAttributesCache[t]=i,i||i===0?this.setAttribute(t,i===!0?t:`${i}`):this.removeAttribute(t))}}ngOnDestroy(){this.uiEvents.listeners.forEach(e=>e()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(e){let t=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!t||!t.nativeElement.focus)return;let i=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:n})=>this.document.activeElement===n||n.contains(this.document.activeElement));e&&!i?Promise.resolve().then(()=>t.nativeElement.focus()):!e&&i&&Promise.resolve().then(()=>t.nativeElement.blur())}onFocus(e){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,e)}onBlur(e){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,e)}onHostChange(e){e instanceof Event||this.onChange(e)}onChange(e){this.props.change?.(this.field,e),this.field.formControl?.markAsDirty()}attachElementRef(e){e&&(e._elementRefs?.indexOf(this.elementRef)===-1?e._elementRefs.push(this.elementRef):P(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){let t=e?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;t!==-1&&e._elementRefs.splice(t,1)}setAttribute(e,t){this.renderer.setAttribute(this.elementRef.nativeElement,e,t)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}static{this.\u0275fac=function(t){return new(t||o)(j(dt),j(se),j(Bt))}}static{this.\u0275dir=ae({type:o,selectors:[["","formlyAttributes",""]],hostBindings:function(t,i){t&1&&L("change",function(s){return i.onHostChange(s)})},inputs:{field:[0,"formlyAttributes","field"],id:"id"},features:[ke]})}}return o})(),W=(()=>{class o extends Wo{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275dir=ae({type:o,selectors:[["","formlyAttributes",""]],hostBindings:function(t,i){t&1&&L("change",function(s){return i.onHostChange(s)})},standalone:!1,features:[h]})}}return o})(),zo=(()=>{class o{constructor(e){this.config=e}ngOnChanges(){let e=Tt.map(t=>`templateOptions.${t}`);this.errorMessage$=Rt(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe(lt(({field:t,type:i,property:n})=>t===this.field&&i==="expressionChanges"&&(n.indexOf("validation")!==-1||e.indexOf(n)!==-1))):D(null)).pipe(pt(null),ct(()=>be(this.errorMessage)?this.errorMessage:D(this.errorMessage)))}get errorMessage(){let e=this.field.formControl;for(let t in e.errors)if(e.errors.hasOwnProperty(t)){let i=this.config.getValidatorMessage(t);if(te(e.errors[t])){if(e.errors[t].errorPath)return;e.errors[t].message&&(i=e.errors[t].message)}return this.field.validation?.messages?.[t]&&(i=this.field.validation.messages[t]),this.field.validators?.[t]?.message&&(i=this.field.validators[t].message),this.field.asyncValidators?.[t]?.message&&(i=this.field.asyncValidators[t].message),typeof i=="function"?i(e.errors[t],this.field):i}}static{this.\u0275fac=function(t){return new(t||o)(j(_e))}}static{this.\u0275cmp=f({type:o,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[ke],decls:2,vars:3,template:function(t,i){t&1&&(u(0),Ge(1,"async")),t&2&&T(Be(1,1,i.errorMessage$))},dependencies:[Je],encapsulation:2,changeDetection:0})}}return o})(),ee=(()=>{class o extends zo{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["formly-validation-message"]],standalone:!1,features:[h],decls:2,vars:3,template:function(t,i){t&1&&(u(0),Ge(1,"async")),t&2&&T(Be(1,1,i.errorMessage$))},dependencies:[Je],encapsulation:2,changeDetection:0})}}return o})(),so=(()=>{class o extends _{onPopulate(e){if(M(e)){let i=to(e);kt(e,i||new He([],{updateOn:e.modelOptions.updateOn}))}e.fieldGroup=e.fieldGroup||[];let t=Array.isArray(e.model)?e.model.length:0;if(e.fieldGroup.length>t)for(let i=e.fieldGroup.length-1;i>=t;--i)vt(e.fieldGroup[i],!0),e.fieldGroup.splice(i,1);for(let i=e.fieldGroup.length;i<t;i++){let n=B({},Z(typeof e.fieldArray=="function"?e.fieldArray(e):e.fieldArray));n.key!==null&&(n.key=`${i}`),e.fieldGroup.push(n)}}add(e,t,{markAsDirty:i}={markAsDirty:!0}){i&&this.formControl.markAsDirty(),e=e??this.field.fieldGroup.length,this.model||Re(this.field,[]),this.model.splice(e,0,t?Z(t):void 0),this.markFieldForCheck(this.field.fieldGroup[e]),this._build()}remove(e,{markAsDirty:t}={markAsDirty:!0}){t&&this.formControl.markAsDirty(),this.model.splice(e,1);let i=this.field.fieldGroup[e];this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach((n,s)=>this.updateArrayElementKey(n,`${s}`)),vt(i,!0),this._build()}_build(){(this.field.formControl._fields??[this.field]).forEach(t=>this.options.build(t)),this.options.fieldChanges.next({field:this.field,value:he(this.field),type:"valueChanges"})}updateArrayElementKey(e,t){if(M(e)){e.key=t;return}if(e.fieldGroup?.length)for(let i=0;i<e.fieldGroup.length;i++)this.updateArrayElementKey(e.fieldGroup[i],t)}markFieldForCheck(e){e&&(e.fieldGroup?.forEach(t=>this.markFieldForCheck(t)),e.hide===!1&&this.options._hiddenFieldsForCheck.push({field:e}))}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275dir=ae({type:o,standalone:!1,features:[h]})}}return o})();var F=(()=>{class o{static forRoot(e={}){return{ngModule:o,providers:[{provide:Ue,multi:!0,useFactory:Xi,deps:[_e]},Ki(e),_e,$e]}}static forChild(e={}){return{ngModule:o,providers:[{provide:Ue,multi:!0,useFactory:Xi,deps:[_e]},Ki(e),$e]}}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=De({type:o})}static{this.\u0275inj=Te({imports:[Oe]})}}return o})();function Yo(o,r){if(o&1&&(R(0,"formly-form",4),p(1,"p"),u(2),Ge(3,"json"),c()),o&2){let e=g();m("form",e.formGroup)("model",e.model)("fields",e.formDefinition)("options",e.formOptions),l(2),z(" ",Be(3,5,e.formGroup.value)," ")}}var ao=(()=>{class o{constructor(){this.changeDetectorRef=b(Ze),this.destroyRef=b(Ht),this.moduleService=b(w),this.formGroup=new gt({}),this.formOptions={},this.model={},this.moduleService.formMessage.pipe(fi(this.destroyRef)).subscribe({next:e=>{this.formMessage=e}})}ngOnInit(){this.formDefinition=Yi.formDefinitionAll,this.changeDetectorRef.detectChanges()}getFormErrors(e){if(e instanceof fe)return e.errors?e:null;if(e instanceof gt){let t=e.errors?{groupError:e}:{};return Object.keys(e.controls).forEach(i=>{let n=this.getFormErrors(e.get(i));n&&(t[i]=n)}),Object.keys(t).length>0?t:null}return null}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-demo"]],standalone:!1,decls:6,vars:3,consts:[[1,"body"],["novalidate","","autocomplete","off",1,"form",3,"formGroup"],["inverted","",1,"footer"],["slot","start",1,"forge-typography--label1"],[3,"form","model","fields","options"]],template:function(t,i){t&1&&(p(0,"div",0)(1,"form",1),C(2,Yo,4,7),c()(),p(3,"forge-toolbar",2)(4,"span",3),u(5),c()()),t&2&&(l(),m("formGroup",i.formGroup),l(),v(i.formDefinition?2:-1),l(3),z(" ",i.formMessage==null?null:i.formMessage.message," "))},dependencies:[di,li,et,no,ii],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:1fr auto;overflow:hidden}  formly-form,   formly-group,   formly-field{display:block}.body[_ngcontent-%COMP%]{padding:24px;overflow:auto}.form[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border:1px solid var(--forge-theme-outline);padding:16px;min-width:680px;width:fit-content;height:fit-content;margin-left:auto;margin-right:auto}






/*# sourceMappingURL=formly-demo.component-THIG33M5.css.map */`]})}}return o})();var Xo=["formlyField"],lo=(()=>{class o{constructor(){this.elementRef=b(se),this.formlyField=re("formlyField",{}),this.field=ei(void 0,{})}ngOnInit(){}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-field"]],viewQuery:function(t,i){t&1&&ie(i.formlyField,Xo,5),t&2&&oe()},inputs:{field:[1,"field"]},decls:2,vars:2,consts:[["formlyField",""],[3,"field"]],template:function(t,i){t&1&&(p(0,"formly-field",1,0),x(),c()),t&2&&E(i.field())},dependencies:[F,J],encapsulation:2})}}return o})();var Ae=(()=>{class o{constructor(){this.elementRef=b(se),this.moduleService=b(w)}ngOnInit(){let e=this.elementRef.nativeElement;this.field?.props?.attributes&&(this.field.props.attributes&&this.field.props.attributes.width&&(e.style.width=`${this.field.props.attributes.width}px`),this.field.props.attributes.column&&(e.style.gridColumn=`${this.field.props.attributes.column}`),this.field.props.attributes.row&&(e.style.gridRow=`${this.field.props.attributes.row}`)),this.field?.props?.description?.length&&(e.addEventListener("focusin",()=>{this.moduleService.formMessage.next({id:this.field?.id,message:this.field?.props?.description})}),e.addEventListener("focusout",()=>{this.moduleService.formMessage.next({id:this.field?.id,message:""})})),this.field?.props?.required&&(this.field.validation.messages={required:`A ${this.field.props.label||"value"} is required`})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275dir=ae({type:o,selectors:[["","formlyFieldDirective",""]],inputs:{field:"field",formlyFieldDirective:"formlyFieldDirective"}})}}return o})();var Ko=["fieldContainer"],Zo=["*"];function Jo(o,r){if(o&1&&(p(0,"div",2),u(1),c()),o&2){let e=g();l(),T(e.props.label)}}function er(o,r){if(o&1&&(p(0,"formly-field",3,1),x(),c()),o&2){let e=r.$implicit,t=ce(1);E(e),m("formlyFieldDirective",t)}}var po=(()=>{class o extends _{constructor(){super(...arguments),this.elementRef=b(se),this.fieldContainer=re("fieldContainer",{})}ngOnInit(){let e=this.fieldContainer()?.nativeElement;switch(this.field.props?.type){case"grid":e.classList.add("form-grid"),this.props.attributes&&this.props.attributes.width&&(e.style.gridTemplateColumns=`repeat(${this.props.attributes.width}, 8px)`);break;case"vbox":e.classList.add("form-vbox");break;case"hbox":e.classList.add("form-hbox");break;case"group":e.classList.add("form-group"),this.props.attributes&&(this.props.attributes.gridWidth||this.props.attributes.gridHeight)&&(e.classList.add("form-grid"),this.props.attributes.gridWidth&&(e.style.gridTemplateColumns=`repeat(${this.props.attributes.gridWidth}, 8px)`));break}}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-group"]],viewQuery:function(t,i){t&1&&ie(i.fieldContainer,Ko,5),t&2&&oe()},features:[h],ngContentSelectors:Zo,decls:6,vars:1,consts:[["fieldContainer",""],["formlyField",""],[1,"label"],[3,"field","formlyFieldDirective"]],template:function(t,i){t&1&&(Xe(),C(0,Jo,2,1,"div",2),p(1,"div",null,0),U(3,er,2,3,"formly-field",3,N),Ke(5),c()),t&2&&(v(i.props.label!=null&&i.props.label.length&&(i.field.parent==null?null:i.field.parent.type)!=="tab"?0:-1),l(3),$(i.field.fieldGroup))},dependencies:[F,J,Ae],styles:[`[_nghost-%COMP%]{display:block;height:fit-content}[_nghost-%COMP%]     .form-grid{display:grid!important;row-gap:8px!important}[_nghost-%COMP%]     .form-vbox{display:flex;flex-direction:column;row-gap:16px}[_nghost-%COMP%]     .form-hbox{display:flex;flex-direction:row;column-gap:16px}[_nghost-%COMP%]     .form-group{display:flex;flex-direction:column;row-gap:16px;border:var(--forge-theme-outline);border-radius:4px;padding:16px}.label[_ngcontent-%COMP%]{padding-bottom:8px}
/*# sourceMappingURL=group-type.component-A5ELVCTH.css.map */`]})}}return o})();function tr(o,r){if(o&1&&u(0),o&2){let e=g();z(" ",e.props.label," ")}}function ir(o,r){if(o&1&&(p(0,"span",1),u(1),c()),o&2){let e=g();l(),T(e.props.description)}}var co=(()=>{class o extends _{constructor(){super(...arguments),this.moduleService=b(w),this.unsubscribe=new S}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(H(this.unsubscribe),G(t=>t.invalid?{server:{message:t.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-checkbox"]],features:[h],decls:3,vars:6,consts:[[3,"id","readonly","formControl","formlyAttributes"],["slot","helper-text"]],template:function(t,i){t&1&&(p(0,"forge-checkbox",0),C(1,tr,1,1),C(2,ir,2,1,"span",1),c()),t&2&&(m("id",i.id)("readonly",i.props.readonly)("formControl",i.formControl)("formlyAttributes",i.field),l(),v(i.props.label?1:-1),l(),v(i.props.description?2:-1))},dependencies:[A,q,Q,F,W,gi,yi,hi],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=checkbox-type.component-DQTQGDAR.css.map */`]})}}return o})();function or(o,r){if(o&1&&(p(0,"label",3),u(1),c()),o&2){let e=g();K("for",e.id),l(),T(e.props.label)}}function rr(o,r){if(o&1&&(p(0,"span",4)(1,"formly-validation-message",5),x(),c()()),o&2){let e=g();l(),E(e.field)}}var fo=(()=>{class o extends _{constructor(){super(...arguments),this.moduleService=b(w),this.unsubscribe=new S}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):e.value&&!zi(new Date(e.value))&&(e.setValue(null),this.field.props.required)?D({required:!0}):this.moduleService.validateField(this.field.key,e.value).pipe(H(this.unsubscribe),G(t=>t.invalid?{server:{message:t.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-date-picker"]],features:[h],decls:5,vars:11,consts:[[3,"max","min"],[3,"required","invalid"],["type","text",3,"id","placeholder","readonly","formControl","formlyAttributes"],["slot","label"],["slot","helper-text"],[3,"field"]],template:function(t,i){t&1&&(p(0,"forge-date-picker",0)(1,"forge-text-field",1),R(2,"input",2),C(3,or,2,2,"label",3),C(4,rr,2,2,"span",4),c()()),t&2&&(m("max",i.props.max)("min",i.props.min),l(),m("required",i.props.required)("invalid",i.showError),l(),m("id",i.id)("placeholder",i.props.placeholder)("readonly",i.props.readonly)("formControl",i.formControl)("formlyAttributes",i.field),l(),v(i.props.label?3:-1),l(),v(i.showError?4:-1))},dependencies:[A,de,q,Q,F,W,ee,Ci,bi,ue,me],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=date-picker-type.component-AJLZJT6L.css.map */`]})}}return o})();function nr(o,r){if(o&1&&(p(0,"label",2),u(1),c()),o&2){let e=g();K("for",e.id),l(),T(e.props.label)}}function sr(o,r){if(o&1&&(p(0,"span",3)(1,"formly-validation-message",4),x(),c()()),o&2){let e=g();l(),E(e.field)}}var mo=(()=>{class o extends _{constructor(){super(),this.moduleService=b(w),this.unsubscribe=new S,this.defaultOptions={props:{cols:1,rows:3}}}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(H(this.unsubscribe),G(t=>t.invalid?{server:{message:t.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-textarea"]],features:[h],decls:5,vars:10,consts:[[3,"required","invalid"],[3,"id","cols","rows","readonly","formControl","formlyAttributes"],["slot","label"],["slot","helper-text"],[3,"field"]],template:function(t,i){t&1&&(p(0,"forge-text-field",0)(1,"textarea",1),u(2,"      "),c(),C(3,nr,2,2,"label",2),C(4,sr,2,2,"span",3),c()),t&2&&(m("required",i.props.required)("invalid",i.showError),l(),m("id",i.id)("cols",i.props.cols)("rows",i.props.rows)("readonly",i.props.readonly)("formControl",i.formControl)("formlyAttributes",i.field),l(2),v(i.props.label?3:-1),l(),v(i.showError?4:-1))},dependencies:[A,de,q,Q,F,W,ee,ue,me],styles:[`[_nghost-%COMP%]{display:block}textarea[_ngcontent-%COMP%]{resize:none}
/*# sourceMappingURL=textarea-type.component-VUCGEPIX.css.map */`]})}}return o})();function ar(o,r){if(o&1){let e=Fe();p(0,"forge-tab",3),L("forge-tab-select",function(){let i=Ce(e).$implicit,n=g();return ve(n.onTabSelected(i))}),u(1),c()}if(o&2){let e=r.$implicit;l(),z(" ",e.props==null?null:e.props.label," ")}}var uo=(()=>{class o extends _{constructor(){super(...arguments),this.moduleService=b(w),this.activeTab=0}ngOnInit(){this.activeField=this.field.fieldGroup[0]}onTabSelected(e){this.activeField=e}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-tab"]],features:[h],decls:5,vars:4,consts:[["formlyField",""],["secondary","",3,"activeTab"],[3,"field","formlyFieldDirective"],[3,"forge-tab-select"]],template:function(t,i){if(t&1&&(p(0,"forge-tab-bar",1),U(1,ar,2,1,"forge-tab",null,N),c(),p(3,"formly-field",2,0),x(),c()),t&2){let n=ce(4);m("activeTab",i.activeTab),l(),$(i.field.fieldGroup),l(2),E(i.activeField),m("formlyFieldDirective",n)}},dependencies:[A,F,J,Ni,Hi,Gi,Bi],styles:[`[_nghost-%COMP%]{display:block}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab-bar[_ngcontent-%COMP%]{margin:16px 0}forge-tab[_ngcontent-%COMP%]{min-width:240px}
/*# sourceMappingURL=tab-type.component-AAT7W2GO.css.map */`]})}}return o})();var lr=["table"];function pr(o,r){if(o&1&&(p(0,"th",4)(1,"div",8)(2,"span",9),u(3),c()()()),o&2){let e=r.$implicit;l(3),T(e.label)}}function cr(o,r){if(o&1&&(p(0,"td",10)(1,"formly-field",14,1),x(),c()()),o&2){let e=r.$implicit,t=ce(2);l(),E(e),m("formlyFieldDirective",t)}}function dr(o,r){if(o&1){let e=Fe();p(0,"tr",6),U(1,cr,3,3,"td",10,N),p(3,"td",11)(4,"forge-icon-button",12),L("click",function(){let i=Ce(e).$index,n=g();return ve(n.onRemove(i))}),R(5,"forge-icon",13),c()()()}if(o&2){let e=r.$implicit;l(),$(e.fieldGroup)}}var ho=(()=>{class o extends so{constructor(){super(...arguments),this.tableElement=re("table",{})}onAdd(){let e=this.props.columns.filter(t=>t.key?.length).map(t=>[t.key,t.defaultValue]);this.add(this.formControl.length,Object.fromEntries(e)),requestAnimationFrame(()=>{let t=Array.from(this.tableElement()?.nativeElement.querySelectorAll("tbody > tr")).reverse()[0];if(t){let i=t.querySelector(`[id*="${e[0][0]}"]`);i&&i.focus()}})}onRemove(e){this.remove(e)}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-table"]],viewQuery:function(t,i){t&1&&ie(i.tableElement,lr,5),t&2&&oe()},features:[h],decls:15,vars:0,consts:[["table",""],["formlyField",""],[1,"forge-table"],[1,"forge-table-row","forge-table-head__row"],["scope","col",1,"forge-table-cell","forge-table-head__cell"],[1,"forge-table-cell","forge-table-head__cell","forge-table-cell__button"],[1,"forge-table-row","forge-table-body__row"],[3,"click"],[1,"forge-table-head__cell-container"],[1,"forge-table-head__cell-text"],[1,"forge-table-cell","forge-table-body__cell"],[1,"forge-table-cell","forge-table-body__cell","forge-table-cell__button"],["aria-label","Delete",3,"click"],["name","delete"],[3,"field","formlyFieldDirective"]],template:function(t,i){if(t&1){let n=Fe();p(0,"table",2,0)(2,"thead")(3,"tr",3),U(4,pr,4,1,"th",4,N),R(6,"th",5),c()(),p(7,"tbody"),U(8,dr,6,0,"tr",6,N),c(),p(10,"tfoot")(11,"tr")(12,"td")(13,"forge-button",7),L("click",function(){return Ce(n),ve(i.onAdd())}),u(14,"Add"),c()()()()()}t&2&&(l(4),$(i.props.columns),l(4),$(i.field.fieldGroup))},dependencies:[F,J,Ae],styles:[`[_nghost-%COMP%]{display:block}.forge-table-cell[_ngcontent-%COMP%]{padding-right:24px}.forge-table-cell[_ngcontent-%COMP%]:first-child{padding-left:0}.forge-table-cell[_ngcontent-%COMP%]:last-child{padding-right:0}.forge-table-cell__button[_ngcontent-%COMP%]{width:48px}.forge-table-body__cell[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px;vertical-align:top}.forge-table-body__cell[_ngcontent-%COMP%]   formly-field[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface)}
/*# sourceMappingURL=table-type.component-TMREJAMB.css.map */`]})}}return o})();var fr=o=>({"app--hidden":o});function mr(o,r){o&1&&(p(0,"forge-page-state"),R(1,"img",8),p(2,"div",9),u(3,"No records were found."),c()())}function ur(o,r){o&1&&(Xt(0),R(1,"forge-skeleton",10)(2,"forge-skeleton",10)(3,"forge-skeleton",10)(4,"forge-skeleton",10),Kt())}var yo=(()=>{class o{constructor(){this.dialogConfig=b(vi),this.dialogRef=b(Fi),this.id=Wi.elementId("app-"),this.data=[],this.paginator={pageIndex:0,pageSize:25,total:0},this.isBusy=!1,this.unsubscribe=new S,this.sort={property:"",direction:si.Ascending},this.filters=[],this.dialogTitle=this.dialogConfig.title||"",this.columnConfigurations=this.dialogConfig.columnConfigurations||[],this.dataObservable=this.dialogConfig.dataObservable,this.key=this.dialogConfig.key||"",this.sort.property=this.columnConfigurations.find(e=>e.initialSort)?.property||this.columnConfigurations[0].property,this.dialogRef.nativeElement.setAttribute("aria-labelledby",`${this.id}--title`),this.getData()}onClose(){this.dialogRef.close()}onPaginatorChange(e){this.paginator.pageIndex=e.pageIndex,this.paginator.pageSize=e.pageSize,this.getData()}onTableSort(e){this.sort.property=this.columnConfigurations[e.columnIndex].property,this.sort.direction=e.direction,this.paginator.pageIndex=0,this.getData()}onTableFilter(e){let t=this.columnConfigurations[e.columnIndex].property;if(ri(e.value)&&e.value?.toString().length)this.filters.push({property:t,value:e.value});else{let i=this.filters.findIndex(n=>n.property===t);i!==-1&&this.filters.splice(i,1)}this.paginator.pageIndex=0,this.getData()}onTableRowClick(e){this.dialogRef.close(e.data[this.key])}getData(){this.unsubscribe.next(),this.unsubscribe.complete(),this.isBusy=!0;let e={filters:this.filters,sort:this.sort,skip:this.paginator.pageIndex*this.paginator.pageSize,take:this.paginator.pageSize};this.dataObservable(e).pipe(Vt(()=>this.isBusy=!1),H(this.unsubscribe)).subscribe(t=>{this.data=t.data,this.paginator.total=t.count})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-field-help-dialog"]],decls:12,vars:13,consts:[["slot","header"],["slot","start",1,"forge-typography--heading4",3,"id"],["slot","end","aria-label","Close",1,"header__close",3,"click"],["name","close"],["slot","body"],["allow-row-click","","filter","true",3,"forge-table-row-click","forge-table-sort","forge-table-filter","ngClass","data","columnConfigurations"],["slot","footer","inverted","true"],["slot","end",3,"forge-paginator-change","pageIndex","pageSize","total","disabled"],["src","https://cdn.forge.tylertech.com/v1/images/spot/no-search-results-spot.svg","slot","graphic","alt","No records found"],["slot","message"],["list-item",""]],template:function(t,i){t&1&&(p(0,"forge-scaffold")(1,"forge-toolbar",0)(2,"h2",1),u(3),c(),p(4,"forge-icon-button",2),L("click",function(){return i.onClose()}),R(5,"forge-icon",3),c()(),p(6,"div",4)(7,"forge-table",5),L("forge-table-row-click",function(s){return i.onTableRowClick(s.detail)})("forge-table-sort",function(s){return i.onTableSort(s.detail)})("forge-table-filter",function(s){return i.onTableFilter(s.detail)}),c(),C(8,mr,4,0,"forge-page-state"),C(9,ur,5,0,"ng-container"),c(),p(10,"forge-toolbar",6)(11,"forge-paginator",7),L("forge-paginator-change",function(s){return i.onPaginatorChange(s.detail)}),c()()()),t&2&&(l(2),m("id",i.id+"--title"),l(),z(" ",i.dialogTitle," "),l(4),m("ngClass",Jt(11,fr,i.isBusy))("data",i.data)("columnConfigurations",i.columnConfigurations),l(),v(!i.isBusy&&!i.data.length?8:-1),l(),v(i.isBusy?9:-1),l(2),m("pageIndex",i.paginator.pageIndex)("pageSize",i.paginator.pageSize)("total",i.paginator.total)("disabled",i.isBusy||!i.data.length))},dependencies:[Oe,ti,rt,ot,tt,it,Ei,xi,Mi,Ti,Ai,Ri,Li,ji,$i,Ui,Qi,qi],styles:[`[_nghost-%COMP%]{display:contents}forge-scaffold[_ngcontent-%COMP%]{height:90vh;width:90vw}






/*# sourceMappingURL=field-help-dialog.component-MQRN24RO.css.map */`]})}}return o})();function hr(o,r){if(o&1&&(p(0,"label",3),u(1),c()),o&2){let e=g();K("for",e.id),l(),T(e.props.label)}}function yr(o,r){if(o&1&&(p(0,"span",6)(1,"formly-validation-message",7),x(),c()()),o&2){let e=g();l(),E(e.field)}}var go=(()=>{class o extends _{constructor(){super(...arguments),this.dialogService=b(_i),this.moduleService=b(w),this.unsubscribe=new S}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(H(this.unsubscribe),G(t=>t.invalid?{server:{message:t.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onShowDialog(){this.dialogService.open(yo,{data:{columnConfigurations:this.props.options.map(e=>({header:e.label,property:e.property,sortable:!0,filter:!0,filterDelegate:new ni})),dataObservable:e=>this.moduleService.getFieldHelp(this.key,e),key:this.props.optionsKey,title:`Select a ${this.props.label}`}}).afterClosed.subscribe({next:e=>{e&&this.formControl.setValue(e)}})}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-input-help"]],features:[h],decls:7,vars:10,consts:[["input",""],[3,"required","invalid"],["type","text",3,"id","placeholder","readonly","formControl","formlyAttributes"],["slot","label"],["slot","addon-end","dense","","aria-label","Browse options",3,"click","disabled"],["name","more_horiz"],["slot","helper-text"],[3,"field"]],template:function(t,i){if(t&1){let n=Fe();p(0,"forge-text-field",1),R(1,"input",2,0),C(3,hr,2,2,"label",3),p(4,"forge-icon-button",4),L("click",function(){return Ce(n),ve(i.onShowDialog())}),R(5,"forge-icon",5),c(),C(6,yr,2,2,"span",6),c()}t&2&&(m("required",i.props.required)("invalid",i.showError),l(),m("id",i.id)("placeholder",i.props.placeholder)("readonly",i.props.readonly)("formControl",i.formControl)("formlyAttributes",i.field),l(2),v(i.props.label?3:-1),l(),m("disabled",i.formControl.disabled),l(2),v(i.showError?6:-1))},dependencies:[A,de,q,Q,F,W,ee,rt,ot,tt,it,ue,me],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=input-help-type.component-CLCRKSDP.css.map */`]})}}return o})();var bo=(()=>{class o extends _{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-label"]],features:[h],decls:2,vars:2,consts:[[1,"forge-typography--body1"]],template:function(t,i){t&1&&(zt(0,"label",0),u(1),Yt()),t&2&&(K("for",i.id),l(),T(i.props.label))},dependencies:[F],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=label-type.component-X32ALPUZ.css.map */`]})}}return o})();function gr(o,r){if(o&1&&(p(0,"label",0),u(1),c()),o&2){let e=g();K("for",e.id),l(),T(e.props.label)}}function br(o,r){if(o&1&&u(0),o&2){let e=g().$implicit;z(" ",e.label," ")}}function Cr(o,r){if(o&1&&(p(0,"forge-radio",2),C(1,br,1,1),c()),o&2){let e=r.$implicit,t=r.$index,i=g();m("id",i.id+"-"+t)("name",i.id+"-radio-group")("value",e.value)("formControl",i.formControl)("formlyAttributes",i.field),l(),v(e.label?1:-1)}}function vr(o,r){if(o&1&&(p(0,"div",3)(1,"formly-validation-message",4),x(),c()()),o&2){let e=g();l(),E(e.field)}}var Co=(()=>{class o extends _{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-radio"]],features:[h],decls:5,vars:3,consts:[["slot","label"],[3,"name"],[3,"id","name","value","formControl","formlyAttributes"],[1,"forge-typography--label1"],[3,"field"]],template:function(t,i){t&1&&(C(0,gr,2,2,"label",0),p(1,"forge-radio-group",1),U(2,Cr,2,6,"forge-radio",2,N),c(),C(4,vr,2,2,"div",3)),t&2&&(v(i.props.label?0:-1),l(),m("name",i.id+"-radio-group"),l(),$(i.props.options),l(2),v(i.showError?4:-1))},dependencies:[A,q,Q,F,W,ee,Si,wi,Di,Oi,ki],styles:[`[_nghost-%COMP%]{display:block}[role=radiogroup][_ngcontent-%COMP%]{margin-left:-8px;display:flex;column-gap:16px;flex-direction:column}forge-radio[_ngcontent-%COMP%]::part(container){padding:4px}.forge-typography--label1[_ngcontent-%COMP%]{color:var(--forge-theme-error)}
/*# sourceMappingURL=radio-type.component-GNLV5QNE.css.map */`]})}}return o})();function Fr(o,r){if(o&1&&(p(0,"span",1)(1,"formly-validation-message",2),x(),c()()),o&2){let e=g();l(),E(e.field)}}var vo=(()=>{class o extends _{constructor(){super(...arguments),this.moduleService=b(w),this.unsubscribe=new S}ngOnInit(){this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(H(this.unsubscribe),G(t=>t.invalid?{server:{message:t.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-select"]],features:[h],decls:2,vars:8,consts:[[3,"id","options","label","placeholder","invalid","formControl","formlyAttributes"],["slot","helper-text"],[3,"field"]],template:function(t,i){t&1&&(p(0,"forge-select",0),C(1,Fr,2,2,"span",1),c()),t&2&&(m("id",i.id)("options",i.props.options)("label",i.props.label)("placeholder",i.props.placeholder)("invalid",i.showError)("formControl",i.formControl)("formlyAttributes",i.field),l(),v(i.showError?1:-1))},dependencies:[A,q,Q,F,W,ee,Vi,Pi,Ii],styles:[`[_nghost-%COMP%]{display:block}
/*# sourceMappingURL=select-type.component-OSAQDJMJ.css.map */`]})}}return o})();var Fo={prePopulate(o){switch(o.type){case"date-picker":case"input":case"select":case"textarea":}}};var _o=(()=>{class o extends _{onClick(e){console.log(e)}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-button"]],features:[h],decls:2,vars:1,consts:[["variant","filled",3,"click"]],template:function(t,i){t&1&&(p(0,"forge-button",0),L("click",function(s){return i.onClick(s)}),u(1),c()),t&2&&(l(),z(" ",i.props.label," "))},dependencies:[ui,mi],encapsulation:2})}}return o})();var _r=["fieldContainer"];function xr(o,r){if(o&1&&(p(0,"div",2),u(1),c()),o&2){let e=g();l(),T(e.props.label)}}function Er(o,r){if(o&1&&(p(0,"formly-field",3,1),x(),c()),o&2){let e=r.$implicit,t=ce(1);E(e),m("formlyFieldDirective",t)}}var xo=(()=>{class o extends _{constructor(){super(...arguments),this.fieldContainer=re("fieldContainer",{})}ngOnInit(){let e=this.fieldContainer()?.nativeElement;switch(this.field.props?.type){case"grid":e.classList.add("form-grid"),this.props.attributes.columns&&(e.style.gridTemplateColumns=`repeat(${this.props.attributes.columns}, auto)`);break;case"vbox":e.classList.add("form-vbox");break;case"hbox":e.classList.add("form-hbox");break;case"group":e.classList.add("form-group");break}}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-container"]],viewQuery:function(t,i){t&1&&ie(i.fieldContainer,_r,5),t&2&&oe()},features:[h],decls:5,vars:1,consts:[["fieldContainer",""],["formlyField",""],[1,"label"],[3,"field","formlyFieldDirective"]],template:function(t,i){t&1&&(C(0,xr,2,1,"div",2),p(1,"div",null,0),U(3,Er,2,3,"formly-field",3,N),c()),t&2&&(v(i.props.label?0:-1),l(3),$(i.field.fieldGroup))},dependencies:[F,J,Ae],styles:[`[_nghost-%COMP%]{display:inline-block}  .form-grid{display:grid;gap:16px}  .form-vbox{display:flex;flex-direction:column;row-gap:16px}  .form-hbox{display:flex;flex-direction:row;column-gap:16px}  .form-group{display:flex;flex-direction:column;row-gap:16px;border:1px solid #e6e6e6;border-radius:4px;padding:16px}.label[_ngcontent-%COMP%]{padding:8px}
/*# sourceMappingURL=container-type.component-MQ3N6MD3.css.map */`]})}}return o})();var Tr=["input"];function Mr(o,r){if(o&1&&(p(0,"label",3),u(1),c()),o&2){let e=g();K("for",e.id),l(),T(e.props.label)}}function kr(o,r){if(o&1&&(p(0,"span",4)(1,"formly-validation-message",5),x(),c()()),o&2){let e=g();l(),E(e.field)}}var Eo=(()=>{class o extends _{constructor(){super(...arguments),this.unsubscribe=new S,this.moduleService=b(w),this.inputElement=re("input",{}),this.inputType="text"}ngOnInit(){this.inputType=this.props?.type||"text",this.formControl.addAsyncValidators(e=>(this.unsubscribe.next(),this.unsubscribe.complete(),e.pristine?D(null):this.moduleService.validateField(this.field.key,e.value).pipe(H(this.unsubscribe),G(t=>t.invalid?{server:{message:t.message}}:null))))}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=y(o)))(i||o)}})()}static{this.\u0275cmp=f({type:o,selectors:[["app-formly-input"]],viewQuery:function(t,i){t&1&&ie(i.inputElement,Tr,5),t&2&&oe()},features:[h],decls:5,vars:10,consts:[["input",""],[3,"required","invalid"],[3,"id","type","placeholder","readonly","formControl","formlyAttributes"],["slot","label"],["slot","helper-text"],[3,"field"]],template:function(t,i){t&1&&(p(0,"forge-text-field",1),R(1,"input",2,0),C(3,Mr,2,2,"label",3),C(4,kr,2,2,"span",4),c()),t&2&&(m("required",i.props.required)("invalid",i.showError),l(),m("id",i.id)("type",i.inputType)("placeholder",i.props.placeholder)("readonly",i.props.readonly)("formControl",i.formControl)("formlyAttributes",i.field),l(2),v(i.props.label?3:-1),l(),v(i.showError?4:-1))},dependencies:[A,de,q,Q,F,W,ee,ue,me],styles:[`[_nghost-%COMP%]{display:block}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
/*# sourceMappingURL=input-type.component-W6SSNVSO.css.map */`]})}}return o})();var To=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=De({type:o})}static{this.\u0275inj=Te({imports:[F.forRoot({extensions:[{name:"formly-field-extension",extension:Fo}],types:[{name:"checkbox",component:co},{name:"date-picker",component:fo},{name:"input",component:Eo},{name:"input-help",component:go},{name:"radio",component:Co},{name:"select",component:vo},{name:"textarea",component:mo},{name:"button",component:_o},{name:"container",component:xo},{name:"formly-group",component:po},{name:"tab",component:uo},{name:"table",component:ho},{name:"label",component:bo}]}),F]})}}return o})();var Dr=[{path:"**",component:ao}],Aa=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=De({type:o})}static{this.\u0275inj=Te({providers:[w],imports:[Oe,yt.forChild(Dr),A,To,lo,yt]})}}return o})();export{Aa as FormlyDemoModule};
//# sourceMappingURL=chunk-GJZGOMLO.js.map
