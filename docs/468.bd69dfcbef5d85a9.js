"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[468],{7724:(O,C,i)=>{i.r(C),i.d(C,{QueryBuilderComponent:()=>F});var v=i(5056),u=i(4064),m=i(6260),s=i(2395),p=i(2504),d=i(3872),e=i(4896);function t(l,f){1&l&&e.C_f(0)}const r=(l,f)=>({formGroup:l,index:f});function o(l,f){if(1&l&&(e.I0R(0,"div",7),e.yuY(1,t,1,0,"ng-container",8),e.C$Y()),2&l){const n=f.$implicit,c=f.$index;e.GaO();const _=e.Gew(12);e.yG2(),e.E7m("ngTemplateOutlet",_)("ngTemplateOutletContext",e.IBC(2,r,n,c))}}function a(l,f){1&l&&e.C_f(0)}const h=l=>({formGroup:l});function D(l,f){if(1&l&&e.yuY(0,a,1,0,"ng-container",8),2&l){const n=e.GaO().formGroup;e.GaO();const c=e.Gew(14);e.E7m("ngTemplateOutlet",c)("ngTemplateOutletContext",e.S45(2,h,n))}}function T(l,f){if(1&l&&(e.I0R(0,"forge-option",24),e.OEk(1),e.C$Y()),2&l){const n=f.$implicit;e.E7m("value",n.value),e.yG2(),e.cNF(n.label)}}function g(l,f){if(1&l&&(e.I0R(0,"div",25)(1,"forge-text-field",12),e.wR5(2,"input",26),e.I0R(3,"label",27),e.OEk(4,"Minimum"),e.C$Y(),e.I0R(5,"span",16),e.OEk(6,"A minimum value is required"),e.C$Y()(),e.I0R(7,"forge-text-field",12),e.wR5(8,"input",28),e.I0R(9,"label",27),e.OEk(10,"Maximum"),e.C$Y(),e.I0R(11,"span",16),e.OEk(12),e.C$Y()()()),2&l){const n=e.GaO(),c=n.formGroup,_=n.index;e.yG2(),e.E7m("appFormControlInvalid",c.controls.minValue),e.yG2(),e._6D("id","app--query-builder--filter-min-"+_),e.yG2(),e._6D("for","app--query-builder--filter-min-"+_),e.yG2(4),e.E7m("appFormControlInvalid",c.controls.maxValue),e.yG2(),e._6D("id","app--query-builder--filter-max-"+_),e.yG2(),e._6D("for","app--query-builder--filter-max-"+_),e.yG2(3),e.oRS(" ",c.controls.maxValue.errors.required?"A maximum value is required":c.controls.maxValue.errors.range?"Max value must be greater or equal to min value":""," ")}}function E(l,f){if(1&l&&(e.I0R(0,"forge-text-field",12),e.wR5(1,"input",29),e.I0R(2,"label",27),e.OEk(3,"Value"),e.C$Y(),e.I0R(4,"span",16),e.OEk(5,"A value is required"),e.C$Y()()),2&l){const n=e.GaO(),_=n.index;e.E7m("appFormControlInvalid",n.formGroup.controls.value),e.yG2(),e._6D("id","app--query-builder--filter-value-"+_),e.yG2(),e._6D("for","app--query-builder--filter-value-"+_)}}function y(l,f){1&l&&e.C_f(0)}function G(l,f){1&l&&e.C_f(0)}function b(l,f){if(1&l&&(e.yuY(0,y,1,0,"ng-container",8),e.I0R(1,"div",7),e.yuY(2,G,1,0,"ng-container",8),e.C$Y()),2&l){const n=f.$implicit,c=f.$index;e.GaO(3);const _=e.Gew(14),x=e.Gew(12);e.E7m("ngTemplateOutlet",_)("ngTemplateOutletContext",e.S45(4,h,n)),e.yG2(2),e.E7m("ngTemplateOutlet",x)("ngTemplateOutletContext",e.IBC(6,r,n,c))}}function R(l,f){if(1&l&&(e.SAx(0,1),e.c53(1,b,3,9,null,null,e.wJt),e.k70()),2&l){const n=e.GaO().formGroup;e.yG2(),e.oho(n.controls.filters.controls)}}function I(l,f){if(1&l){const n=e.KQA();e.yuY(0,D,1,4,"ng-container"),e.SAx(1,9),e.I0R(2,"div",10)(3,"forge-autocomplete",11)(4,"forge-text-field",12),e.wR5(5,"input",13),e.I0R(6,"label",14),e.OEk(7,"Property"),e.C$Y(),e.wR5(8,"forge-icon",15),e.I0R(9,"span",16),e.OEk(10,"A property is required"),e.C$Y()()(),e.I0R(11,"forge-select",17),e.c53(12,T,2,2,"forge-option",24,e.wJt),e.I0R(14,"span",16),e.OEk(15,"An operator is required"),e.C$Y()(),e.yuY(16,g,13,7,"div",18)(17,E,6,3),e.I0R(18,"div",19)(19,"forge-menu",20),e.qCj("forge-menu-select",function(_){const M=e.usT(n).formGroup,A=e.GaO();return e.CGJ(A.onAddFilter(M,_.detail.value))}),e.I0R(20,"forge-icon-button")(21,"button",21),e.wR5(22,"forge-icon",4),e.C$Y()()(),e.I0R(23,"forge-icon-button")(24,"button",22),e.qCj("click",function(){const x=e.usT(n).formGroup,M=e.GaO();return e.CGJ(M.onDeleteFilter(x))}),e.wR5(25,"forge-icon",23),e.C$Y()()()(),e.yuY(26,R,3,0,"ng-container",1),e.k70()}if(2&l){const n=f.formGroup,c=f.index,_=e.GaO();e.C0Y(0,c>0?0:-1),e.yG2(),e.E7m("formGroup",n),e.yG2(2),e.E7m("filter",_.propertyFilter),e.yG2(),e.E7m("appFormControlInvalid",n.controls.property),e.yG2(),e._6D("id","app--query-builder--filter-property"+c),e.yG2(),e._6D("for","app--query-builder--filter-property"+c),e.yG2(5),e.E7m("appFormControlInvalid",n.controls.operator),e.yG2(),e.oho(_.operatorOptions),e.yG2(4),e.C0Y(16,6===n.controls.operator.value?16:17),e.yG2(3),e.E7m("options",_.filterOptions),e.yG2(7),e.C0Y(26,null!=n.controls.filters.controls&&n.controls.filters.controls.length?26:-1)}}function P(l,f){if(1&l&&(e.I0R(0,"forge-option",24),e.OEk(1),e.C$Y()),2&l){const n=f.$implicit;e.E7m("value",n.value),e.yG2(),e.cNF(n.label)}}function w(l,f){if(1&l&&(e.I0R(0,"div",30)(1,"forge-select",31),e.c53(2,P,2,2,"forge-option",24,e.wJt),e.C$Y()()),2&l){const n=f.formGroup,c=e.GaO();e.yG2(),e.E7m("formControl",n.get("condition")),e.yG2(),e.oho(c.conditionOptions)}}let F=(()=>{class l{constructor(){this.formGroup=new u.WC({filters:new u.Sg([this.buildFilterFormGroup()])}),this.conditionOptions=[{value:"and",label:"And"},{value:"or",label:"Or"}],this.propertyOptions=[{value:"firstName",label:"First name"},{value:"lastName",label:"Last name"},{value:"dateOfBirth",label:"Date of birth"},{value:"gender",label:"Gender"},{value:"occupation",label:"Occupation"}],this.operatorOptions=[{value:0,label:"Equal"},{value:1,label:"Not equal"},{value:2,label:"Greater than"},{value:3,label:"Less than"},{value:4,label:"Greater than equal to"},{value:5,label:"Less than equal to"},{value:6,label:"Range"},{value:7,label:"Contains"},{value:8,label:"Not contains"},{value:9,label:"Empty"}],this.filterOptions=[{value:"condition",label:"Add condition"},{value:"group",label:"Add group"}],this.propertyFilter=n=>p.q.filterData(this.propertyOptions,[{key:"label",value:n}])}onAddFilter(n,c){if(n===this.formGroup)this.formGroup.controls.filters.push(this.buildFilterFormGroup());else switch(c){case"condition":{const _=n.parent.controls.indexOf(n)+1;n.parent.insert(_,this.buildFilterFormGroup());break}case"group":n.get("filters").push(this.buildFilterFormGroup())}}onDeleteFilter(n){const c=n.parent,_=c.controls.indexOf(n);-1!==_&&c.removeAt(_)}buildFilterFormGroup(n){return new u.WC({property:new u.Ku(n?.property,{validators:[u.AQ.required]}),condition:new u.Ku(n?.condition||"and",{validators:[u.AQ.required]}),operator:new u.Ku(n?.operator,{validators:[u.AQ.required]}),value:new u.Ku(n?.value,{validators:[this.validateFilterValue("value")]}),minValue:new u.Ku(n?.minValue,{validators:[this.validateFilterValue("minValue")]}),maxValue:new u.Ku(n?.minValue,{validators:[this.validateFilterValue("maxValue")]}),filters:new u.Sg([])})}validateFilterValue(n){return c=>{const _=c.parent;if(!_)return null;const x=_.value.operator;if(!(0,m.Ks)(x))return null;if(6===x){if("value"===n)return null;if(!(0,m.Ks)(c.value)||!c.value.toString().length)return{required:!0};const M=_.value.minValue,A=_.value.maxValue;if("minValue"===n&&(0,m.Ks)(A)&&M.localeCompare(A,navigator.language,{numeric:!0,ignorePunctuation:!0})<1&&_.get("maxValue")?.setErrors(null),"maxValue"===n){if(!(0,m.Ks)(M))return null;if(M.localeCompare(A,navigator.language,{numeric:!0,ignorePunctuation:!0})>0)return{range:!0}}return null}return"minValue"===n||"maxValue"===n||(0,m.Ks)(c.value)&&c.value.toString().length?null:{required:!0}}}static#e=this.\u0275fac=function(c){return new(c||l)};static#t=this.\u0275cmp=e.In1({type:l,selectors:[["app-query-builder"]],standalone:!0,features:[e.UHJ],decls:15,vars:4,consts:[["novalidate","","autocomplete","off",3,"formGroup"],["formArrayName","filters"],[1,"filter__group__add"],["type","button",3,"click"],["name","add_circle"],["filterFormTemplate",""],["filterHeaderTemplate",""],[1,"filter__group"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"formGroup"],[1,"filter__form"],["formControlName","property",3,"filter"],["required","",3,"appFormControlInvalid"],["type","text",3,"id"],[3,"for"],["slot","trailing","name","arrow_drop_down",1,"forge-dropdown-icon"],["slot","helper-text",1,"app-form-control-invalid"],["formControlName","operator","label","Operator","required","",3,"appFormControlInvalid"],["class","filter__form__range"],[1,"filter__form__action"],[3,"options","forge-menu-select"],["type","button","aria-label","add filter item"],["type","button","aria-label","Delete filter",3,"click"],["name","delete"],[3,"value"],[1,"filter__form__range"],["type","text","formControlName","minValue",3,"id"],["slot","label",3,"for"],["type","text","formControlName","maxValue",3,"id"],["type","text","formControlName","value",3,"id"],[1,"filter__header"],[1,"filter__header__condition",3,"formControl"],["class","filter__group"]],template:function(c,_){1&c&&(e.I0R(0,"form",0)(1,"div",1),e.c53(2,o,2,5,"div",32,e.wJt),e.C$Y(),e.I0R(4,"forge-button",2)(5,"button",3),e.qCj("click",function(){return _.onAddFilter(_.formGroup,"condition")}),e.wR5(6,"forge-icon",4),e.OEk(7," Add a new condition "),e.C$Y()(),e.I0R(8,"p"),e.OEk(9),e.wVc(10,"json"),e.C$Y()(),e.yuY(11,I,27,10,"ng-template",null,5,e.gJz)(13,w,4,1,"ng-template",null,6,e.gJz)),2&c&&(e.E7m("formGroup",_.formGroup),e.yG2(2),e.oho(_.formGroup.controls.filters.controls),e.yG2(7),e.cNF(e.kDX(10,2,_.formGroup.getRawValue())))},dependencies:[v.MD,v.XV,v.ED,u.sl,u.sz,u.ot,u.ue,u.u,u.eJ,u.ug,u.uW,u.Wo,u.uE,s.Avr,s.ojv,s.yXs,s.CCH,s.kVC,s.Yz$,s.io2,s.gFQ,s.mkN,s.T0p,s.Swo,s.EDF,s.e0s,s.Wyy,s.ITH,s.YDl,s.cB7,s.QPL,d.e],styles:["\n\n\n\n\n[_nghost-%COMP%]{display:block;padding:24px}.filter__header[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;margin:8px 0}.filter__header__condition[_ngcontent-%COMP%]{width:96px;background-color:#eee;border-radius:4px}.filter__header__condition[_ngcontent-%COMP%]::part(container):before{border:none}.filter__header__condition[_ngcontent-%COMP%]::part(text){padding:0 16px}.filter__form[_ngcontent-%COMP%]{display:grid;grid-gap:0 16px;grid-template-columns:216px 168px minmax(400px,1fr) 96px;align-items:start}.filter__form__range[_ngcontent-%COMP%]{display:grid;grid-gap:0 16px;grid-template-columns:minmax(192px,1fr) minmax(192px,1fr);align-items:start}.filter__form__action[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.filter__group[_ngcontent-%COMP%]{background-color:#fff;background-color:var(--mdc-theme-surface, #ffffff);border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);border:1px solid var(--forge-theme-border-color);padding:16px;border-left:4px solid #3f51b5;margin:16px 0}.filter__group[_ngcontent-%COMP%]   .filter__group[_ngcontent-%COMP%]{border:1px dashed #9e9e9e;margin:8px 0;padding:8px 16px}.filter__group[_ngcontent-%COMP%]:first-of-type{margin-top:0}.filter__group__add[_ngcontent-%COMP%]{border:1px dashed #9e9e9e;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);background-color:#f5f5f5;width:100%}.filter__group__add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:flex-start;padding:16px;height:auto}.app-form-control-invalid[_ngcontent-%COMP%]{display:none}.app-form-control-invalid[invalid][_ngcontent-%COMP%], .app-form-control-invalid[invalid][_ngcontent-%COMP%]   .app-form-control-invalid[_ngcontent-%COMP%]{display:block}"]})}return l})()},2504:(O,C,i)=>{i.d(C,{q:()=>p});var v=i(5056),u=i(1332),m=i(4019),s=i(6260);class p{static sortData(e,t,r,o){return e&&e.length?(r=r||"string","DESC"!==o&&(o="ASC"),e.slice().sort((a,h)=>(a=(0,m.ne)(a,t),h=(0,m.ne)(h,t),"DESC"===o?this.comparator(h,a,r):this.comparator(a,h,r)))):e}static groupData(e,t){return(0,s.c7)(e)&&e.length&&t?.length?e.reduce((r,o)=>{const a=o[t];return r[a]||(r[a]=[]),r[a].push(o),r},{}):e}static filterData(e,t){if(!((0,s.c7)(e)&&e.length&&(0,s.c7)(t)&&t.length))return e;t=t.map(o=>{if((0,s.ct)(o.value)&&o.value.length){let a;if("<>"===o.value.substring(0,2)){if(2===o.value.length)return o.value="",o;a=o.value.substring(0,2),o.value=o.value.substring(2)}else if("<"===o.value.substring(0,1)||">"===o.value.substring(0,1)){if(1===o.value.length)return o.value="",o;a=o.value.substring(0,1),o.value=o.value.substring(1)}a&&Object.defineProperty(o,"operator",{value:a})}return o.value=(""+o.value).toLowerCase(),o});const r=o=>t.every(a=>{if(!a.value.length)return!0;const h=(""+(0,m.ne)(o,a.key)).toLowerCase();if(!h.length)return!1;if(a.strict)return h===a.value;switch(a.operator){case"<>":return 0!==this.comparator(h,a.value,a.type);case">":return this.comparator(h,a.value,a.type)>0;case"<":return this.comparator(h,a.value,a.type)<0;default:return h.indexOf(a.value)>-1}});return e.filter(o=>r(o))}static comparator(e,t,r="string"){if(e==t)return 0;if(!(0,s.Ks)(e))return-1;if(!(0,s.Ks)(t))return 1;switch(r){case"boolean":return e?-1:1;case"date":if(e=new Date(e).getTime(),isNaN(e))return-1;if(t=new Date(t).getTime(),isNaN(t))return 1;break;case"number":if(e=parseFloat(e),isNaN(e))return-1;if(t=parseFloat(t),isNaN(t))return 1;break;default:return isNaN(parseFloat(e))||isNaN(parseFloat(t))?(""+e).localeCompare(""+t):(""+e).localeCompare(""+t,navigator.language,{numeric:!0})}return e<t?-1:e>t?1:0}static navigateBack(e,t,r){1===e.getState()?.navigationId?t.navigate(r):e.back()}static elementId(e){return e+Math.random().toString(36).replace(/[^a-z]+/g,"")}static formatDate(e,t="MM/dd/yyyy"){return(0,s.Ks)(e)?(0,v._m)(e,t,navigator.language):""}static formatNumber(e,t="1.2-2"){return(0,v.iy)(e,navigator.language,t)}static uniqueId(){return Math.random().toString(36).substring(2)}static parseQueryStringParameters(){const e={};if(window.location.search.length){const t=new u.i4({fromString:window.location.search.substring(1)});t.keys().forEach(r=>{const o=t.getAll(r);o.length&&Object.defineProperty(e,r.toLowerCase(),{value:1===o.length?o[0]:o,enumerable:!0,writable:!0})})}return e}static reduceObject(e){const t={};return Object.keys(e).forEach(r=>{(0,s.Ks)(e[r])&&((0,s.c7)(e[r])?e[r].length&&(t[r]=e[r]):(e[r]+"").trim().length&&(t[r]="string"==typeof e[r]?e[r].trim():e[r]))}),t}}},3244:(O,C,i)=>{i.d(C,{w:()=>o});var v=i(7456),u=i(1296),m=i(9240),s=i(5184),p=i(640),d=i(1444);const e=["addListener","removeListener"],t=["addEventListener","removeEventListener"],r=["on","off"];function o(g,E,y,G){if((0,p.m)(y)&&(G=y,y=void 0),G)return o(g,E,y).pipe((0,d.j)(G));const[b,R]=function T(g){return(0,p.m)(g.addEventListener)&&(0,p.m)(g.removeEventListener)}(g)?t.map(I=>P=>g[I](E,P,y)):function h(g){return(0,p.m)(g.addListener)&&(0,p.m)(g.removeListener)}(g)?e.map(a(g,E)):function D(g){return(0,p.m)(g.on)&&(0,p.m)(g.off)}(g)?r.map(a(g,E)):[];if(!b&&(0,s.G)(g))return(0,m.O)(I=>o(I,E,y))((0,v.Uv)(g));if(!b)throw new TypeError("Invalid event target");return new u._(I=>{const P=(...w)=>I.next(1<w.length?w:w[0]);return b(P),()=>R(P)})}function a(g,E){return y=>G=>g[y](E,G)}},9936:(O,C,i)=>{i.d(C,{k:()=>p});var v=i(1296),u=i(9256),m=i(2965);function p(d=0,e,t=u.a){let r=-1;return null!=e&&((0,m.G)(e)?t=e:r=e),new v._(o=>{let a=function s(d){return d instanceof Date&&!isNaN(d)}(d)?+d-t.now():d;a<0&&(a=0);let h=0;return t.schedule(function(){o.closed||(o.next(h++),0<=r?this.schedule(void 0,r):o.complete())},a)})}},1484:(O,C,i)=>{i.d(C,{a:()=>s});var v=i(2428),u=i(5976),m=i(3192);function s(d,e=v.Z){return d=d??p,(0,u.i)((t,r)=>{let o,a=!0;t.subscribe((0,m.e)(r,h=>{const D=e(h);(a||!d(o,D))&&(a=!1,o=D,r.next(h))}))})}function p(d,e){return d===e}},5828:(O,C,i)=>{i.d(C,{m:()=>p});var v=i(5128);class u extends v.wH{constructor(e,t){super()}schedule(e,t=0){return this}}const m={setInterval(d,e,...t){const{delegate:r}=m;return r?.setInterval?r.setInterval(d,e,...t):setInterval(d,e,...t)},clearInterval(d){const{delegate:e}=m;return(e?.clearInterval||clearInterval)(d)},delegate:void 0};var s=i(6616);class p extends u{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const o=this.id,a=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(a,o,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(e,t,r=0){return m.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&m.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o,r=!1;try{this.work(e)}catch(a){r=!0,o=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,s.k)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}},3956:(O,C,i)=>{i.d(C,{k:()=>m});var v=i(8784);class u{constructor(p,d=u.now){this.schedulerActionCtor=p,this.now=d}schedule(p,d=0,e){return new this.schedulerActionCtor(this,p).schedule(e,d)}}u.now=v.K.now;class m extends u{constructor(p,d=u.now){super(p,d),this.actions=[],this._active=!1}flush(p){const{actions:d}=this;if(this._active)return void d.push(p);let e;this._active=!0;do{if(e=p.execute(p.state,p.delay))break}while(p=d.shift());if(this._active=!1,e){for(;p=d.shift();)p.unsubscribe();throw e}}}},9256:(O,C,i)=>{i.d(C,{M:()=>m,a:()=>s});var v=i(5828);const m=new(i(3956).k)(v.m),s=m},8784:(O,C,i)=>{i.d(C,{K:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}}}]);
//# sourceMappingURL=468.bd69dfcbef5d85a9.js.map