import{l as $,o as ee}from"./chunk-4BJHX2DN.js";import{a as Z}from"./chunk-6OEGGUQA.js";import"./chunk-TMLBYOLU.js";import{a as X}from"./chunk-JCG3AHUO.js";import"./chunk-5G5LBANU.js";import{a as Q}from"./chunk-AGZOMTSQ.js";import{Dc as V,Ob as N,Pb as C,Uc as Y,Xb as U,j as y,jd as H,kd as x,mc as J,nc as z,oc as G,pc as K,pd as w,qd as v,y as q,z as k}from"./chunk-T54VJELX.js";import{Ib as a,Jb as p,Kb as h,Rb as _,Z as L,_ as I,a as W,b as D,ba as A,bc as f,d as E,g as F,h as j,ha as u,hb as b,j as S,xa as B}from"./chunk-5VCAQWVT.js";import"./chunk-NCBA65HR.js";var te=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=b({type:t,selectors:[["app-test"]],decls:1,vars:0,template:function(e,i){e&1&&h(0,"router-outlet")},dependencies:[q],styles:[`[_nghost-%COMP%]{display:block;overflow:hidden}
/*# sourceMappingURL=test.component-73MJ2LX3.css.map */`]})}}return t})();var ie={url:"",deserializer:t=>JSON.parse(t.data),serializer:t=>JSON.stringify(t)},se="WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }",M=class t extends j{constructor(n,o){if(super(),this._socket=null,n instanceof E)this.destination=o,this.source=n;else{let e=this._config=Object.assign({},ie);if(this._output=new F,typeof n=="string")e.url=n;else for(let i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);if(!e.WebSocketCtor&&WebSocket)e.WebSocketCtor=WebSocket;else if(!e.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new S}}lift(n){let o=new t(this._config,this.destination);return o.operator=n,o.source=this,o}_resetState(){this._socket=null,this.source||(this.destination=new S),this._output=new F}multiplex(n,o,e){let i=this;return new E(r=>{try{i.next(n())}catch(l){r.error(l)}let s=i.subscribe({next:l=>{try{e(l)&&r.next(l)}catch(c){r.error(c)}},error:l=>r.error(l),complete:()=>r.complete()});return()=>{try{i.next(o())}catch(l){r.error(l)}s.unsubscribe()}})}_connectSocket(){let{WebSocketCtor:n,protocol:o,url:e,binaryType:i}=this._config,r=this._output,s=null;try{s=o?new n(e,o):new n(e),this._socket=s,i&&(this._socket.binaryType=i)}catch(c){r.error(c);return}let l=new W(()=>{this._socket=null,s&&s.readyState===1&&s.close()});s.onopen=c=>{let{_socket:d}=this;if(!d){s.close(),this._resetState();return}let{openObserver:P}=this._config;P&&P.next(c);let T=this.destination;this.destination=D.create(m=>{if(s.readyState===1)try{let{serializer:g}=this._config;s.send(g(m))}catch(g){this.destination.error(g)}},m=>{let{closingObserver:g}=this._config;g&&g.next(void 0),m&&m.code?s.close(m.code,m.reason):r.error(new TypeError(se)),this._resetState()},()=>{let{closingObserver:m}=this._config;m&&m.next(void 0),s.close(),this._resetState()}),T&&T instanceof S&&l.add(T.subscribe(this.destination))},s.onerror=c=>{this._resetState(),r.error(c)},s.onclose=c=>{s===this._socket&&this._resetState();let{closeObserver:d}=this._config;d&&d.next(c),c.wasClean?r.complete():r.error(c)},s.onmessage=c=>{try{let{deserializer:d}=this._config;r.next(d(c))}catch(d){r.error(d)}}}_subscribe(n){let{source:o}=this;return o?o.subscribe(n):(this._socket||this._connectSocket(),this._output.subscribe(n),n.add(()=>{let{_socket:e}=this;this._output.observers.length===0&&(e&&(e.readyState===1||e.readyState===0)&&e.close(),this._resetState())}),n)}unsubscribe(){let{_socket:n}=this;n&&(n.readyState===1||n.readyState===0)&&n.close(),this._resetState(),super.unsubscribe()}};function O(t){return new M(t)}var oe=(()=>{class t{constructor(){this.webSocketSubject=O("http://localhost:5001")}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ne=(()=>{class t{constructor(){this.router=u(k),this.destroyRef=u(B),this.appDataService=u(X),this.appWebSocketService=u(oe),this.appCache=u(Q)}onNavigate(o){this.router.navigate([o],{state:{id:0,name:"name"}})}onMakeRequest(){this.getLongRequest().subscribe()}onSendMessage(){this.appWebSocketService.webSocketSubject.next({data:"message from front end.",date:new Date})}getLongRequest(){return this.appDataService.getLongRequest().pipe(I({next:o=>console.log(o),error:o=>console.log(o)}),L(this.appCache.cancelHttpRequests))}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=b({type:t,selectors:[["app-test-parent"]],decls:13,vars:0,consts:[[1,"header"],["slot","start",1,"forge-typography--subheading4"],[1,"body"],[2,"display","flex","column-gap","16px"],["variant","raised",3,"click"]],template:function(e,i){e&1&&(a(0,"forge-toolbar",0)(1,"h2",1),f(2,"Parent"),p()(),a(3,"div",2)(4,"p"),f(5,"Parent content"),p(),a(6,"div",3)(7,"forge-button",4),_("click",function(){return i.onNavigate("test/child")}),f(8,"View child"),p(),a(9,"forge-button",4),_("click",function(){return i.onSendMessage()}),f(10,"Send message"),p(),a(11,"forge-button",4),_("click",function(){return i.onMakeRequest()}),f(12,"Make request"),p()()())},dependencies:[y,v,w,x,C,N],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto 1fr;overflow:hidden;height:100%}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:16px;padding:16px}
/*# sourceMappingURL=parent.component-LGLPRWEC.css.map */`]})}}return t})();var re=(()=>{class t{constructor(){this.router=u(k)}onNavigate(o){this.router.navigate([o])}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=b({type:t,selectors:[["app-test-child"]],decls:13,vars:0,consts:[[1,"header"],["slot","start"],["aria-label","Go back",3,"click"],["name","arrow_back"],[1,"forge-typography--subheading4"],["cdkTrapFocus","",1,"body"],["type","text","appAutoFocus",""],["type","text"]],template:function(e,i){e&1&&(a(0,"forge-toolbar",0)(1,"div",1)(2,"forge-icon-button",2),_("click",function(){return i.onNavigate("test/parent")}),h(3,"forge-icon",3),p(),a(4,"h2",4),f(5,"Child"),p()()(),a(6,"div",5)(7,"forge-text-field"),h(8,"input",6),p(),a(9,"forge-text-field"),h(10,"input",7),p(),a(11,"forge-text-field"),h(12,"input",7),p()())},dependencies:[y,ee,$,C,K,G,J,z,v,w,x,H,Y,V,U,Z],styles:[`[_nghost-%COMP%]{display:grid;grid-template-rows:auto auto 1fr;overflow:hidden;height:100%}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}.body[_ngcontent-%COMP%]{overflow:auto;padding:24px;display:flex;flex-direction:column;row-gap:16px}






/*# sourceMappingURL=child.component-3J2QYY3E.css.map */`]})}}return t})();var Ke=[{path:"",component:te,children:[{path:"parent",component:ne},{path:"child",component:re},{path:"",redirectTo:"parent",pathMatch:"full"}]}];export{Ke as TEST_ROUTES};
//# sourceMappingURL=chunk-IDBB5D3M.js.map
