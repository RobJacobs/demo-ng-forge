import{a as l}from"./chunk-WPAM5E2U.js";import{b as w}from"./chunk-YF5MWJQS.js";import{C as y,E as a,o as b,p as S}from"./chunk-LAD3HRCK.js";import{F as u,I as g,L as h,O as d,P as f,ca as C,d as s,g as c,ha as k,w as m,x as p}from"./chunk-BPFPFXGP.js";var D=(()=>{let n=class n{constructor(){this.httpClient=k(S)}getProfile(){return this.httpClient.get("mock-data/profile.json")}getPeople(t){return this.httpClient.get("mock-data/people.json").pipe(f(1e3),p(e=>{let r=e.length;return t&&(t.filters?.length&&(e=l.filterData(e,t.filters.map(o=>({key:o.property,value:o.value,strict:o.property==="gender"||o.property==="id"}))),r=e.length),t.sort&&(e=l.sortData(e,t.sort.property,"string",t.sort.direction)),a(t.skip)&&a(t.take)&&(e=e.slice(t.skip,t.skip+t.take))),{count:r,data:e}}))}getPerson(t){return this.httpClient.get("mock-data/people.json").pipe(p(e=>e.find(r=>r.id.toString()===t.toString())))}getSearches(t){return new s(e=>{let r=localStorage.getItem(t);y(r)&&(r=JSON.parse(r)),e.next(r),e.complete()})}saveSearches(t,e){return new s(r=>{localStorage.setItem(t,JSON.stringify(e)),r.next(!0),r.complete()})}getLongRequest(){return this.httpClient.get("http://localhost:5000/long-request",{context:new b().set(w,!0)})}getFile(t){return this.httpClient.get(`mock-data/${t}`,{responseType:"blob"})}pollingRequest(t){let e=0,r=new c;return u(0,100).pipe(h(()=>(e++,this.getPerson(e))),g(o=>o.lastName?.toLowerCase()===t.toLowerCase()||o.firstName?.toLowerCase()===t.toLowerCase()),d(1),m(6e4)).subscribe({next:o=>{r.next(o),r.complete()},error:o=>{r.error(o),r.complete()}}),r}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=C({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();export{D as a};
//# sourceMappingURL=chunk-7ANSU654.js.map
