import{b as Hr,j as Lo,s as qn}from"./chunk-MQ3GSWWI.js";import{a as B}from"./chunk-3RMJ5DR6.js";import{Ac as Do,Bc as No,D as ot,G as yt,J as vo,Mb as To,Nb as Co,Qc as Io,Rc as Ro,Sc as Eo,bd as Oo,cd as $o,dd as Po,ed as Fo,ib as _o,j as Re,nb as bo,nd as zo,od as Ho,sc as Mo,tc as ko,uc as Ao,vc as So,xb as wo,zb as Xt}from"./chunk-2RH24LFJ.js";import{C as uo,Fb as Ne,G as Or,Gb as je,Lb as ue,Mb as le,Nb as ce,Pb as at,Qb as Vn,Sb as mo,Tb as go,Ub as xo,Vb as yo,Wb as Ie,_ as lo,_a as rt,c as so,ea as $r,ja as De,lb as Fr,ob as pt,pb as co,sb as zr,tb as fo,ub as ho,vb as po,wb as j,xb as J,yb as Qt,z as Ut,za as Pr}from"./chunk-6LYE5EFI.js";import{a as Lt,b as Gt}from"./chunk-NCBA65HR.js";var vt="app-chart",Pl={CHART_PREFIX:vt,CHART_ROOT:`${vt}__root`,CHART_YAXIS:`${vt}__yaxis`,CHART_XAXIS:`${vt}__xaxis`,CHART_NODE:`${vt}__node`,CHART_TEXT:`${vt}__text`,CHART_LEGEND:`${vt}__legend`,CHART_METER:`${vt}__meter`,CHART_POPOVER:`${vt}__popover`,CHART_CLIP:`${vt}__clip`,CHART_TEXT_LABEL:`${vt}__text-label`,CHART_TEXT_VALUE:`${vt}__text-value`,LEGEND_TEXT:`${vt}__legend-text`,LEGEND_TEXT_LABEL:`${vt}__legend-text-label`,LEGEND_TEXT_VALUE:`${vt}__legend-text-value`},Fl={TRANSITION_DURATION:500},zl={FONT_FAMILY:"Roboto",FONT_SIZE_SMALL:"10px",FONT_SIZE:"16px"},Hl={amber600:"#ffb300",cyan400:"#26c6da",purple300:"#ba68c8",indigoA200:"#536dfe",green400:"#66bb6a",deepOrangeA200:"#ff6e40",amberA200:"#ffd740",purple200:"#ce93d8",indigo200:"#9fa8da",lightBlue200:"#81d4fa",green200:"#a5d6a7",lime200:"#e6ee9c",amber200:"#ffe082",deepOrange200:"#ffab91",grey400:"#bdbdbd"},Ll={textHigh:"var(--forge-theme-text-high, rgba(0, 0, 0, 0.87))",textMedium:"var(--forge-theme-text-medium, rgba(0, 0, 0, 0.6))",textInverse:"var(--forge-theme-on-surface-inverse, #ffffff)",outline:"var(--forge-theme-outline, #e0e0e0)",outlineMedium:"var(--forge-theme-outline-medium, #757575)",surface:"var(--forge-theme-surface, #ffffff)",surfaceDim:"var(--forge-theme-surface-dim, #f5f5f5)"},_={classes:Pl,numbers:Fl,strings:zl,chartPalette:Hl,chartTheme:Ll};function fe(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bn(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function he(t){let e,r,n;t.length!==2?(e=fe,r=(s,l)=>fe(t(s),l),n=(s,l)=>t(s)-l):(e=t===fe||t===Bn?t:Ul,r=t,n=t);function a(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{let h=u+f>>>1;r(s[h],l)<0?u=h+1:f=h}while(u<f)}return u}function o(s,l,u=0,f=s.length){if(u<f){if(e(l,l)!==0)return f;do{let h=u+f>>>1;r(s[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function i(s,l,u=0,f=s.length){let h=a(s,l,u,f-1);return h>u&&n(s[h-1],l)>-n(s[h],l)?h-1:h}return{left:a,center:i,right:o}}function Ul(){return 0}function Wn(t){return t===null?NaN:+t}var Uo=he(fe),Xo=Uo.right,Xl=Uo.left,Yl=he(Wn).center,Zn=Xo;function pe(t,e){let r,n;if(e===void 0)for(let a of t)a!=null&&(r===void 0?a>=a&&(r=n=a):(r>a&&(r=a),n<a&&(n=a)));else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&(r===void 0?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)))}return[r,n]}var Ee=class extends Map{constructor(e,r=Bl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let[n,a]of e)this.set(n,a)}get(e){return super.get(Yo(this,e))}has(e){return super.has(Yo(this,e))}set(e,r){return super.set(Vl(this,e),r)}delete(e){return super.delete(ql(this,e))}};function Yo({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):r}function Vl({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function ql({_intern:t,_key:e},r){let n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Bl(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Wl=Math.sqrt(50),Zl=Math.sqrt(10),Gl=Math.sqrt(2);function Lr(t,e,r){let n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),o=n/Math.pow(10,a),i=o>=Wl?10:o>=Zl?5:o>=Gl?2:1,s,l,u;return a<0?(u=Math.pow(10,-a)/i,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,a)*i,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=r&&r<2?Lr(t,e,r*2):[s,l,u]}function Ur(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[a,o,i]=n?Lr(e,t,r):Lr(t,e,r);if(!(o>=a))return[];let s=o-a+1,l=new Array(s);if(n)if(i<0)for(let u=0;u<s;++u)l[u]=(o-u)/-i;else for(let u=0;u<s;++u)l[u]=(o-u)*i;else if(i<0)for(let u=0;u<s;++u)l[u]=(a+u)/-i;else for(let u=0;u<s;++u)l[u]=(a+u)*i;return l}function Je(t,e,r){return e=+e,t=+t,r=+r,Lr(t,e,r)[2]}function Oe(t,e,r){e=+e,t=+t,r=+r;let n=e<t,a=n?Je(e,t,r):Je(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function Xr(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(a);++n<a;)o[n]=t+n*r;return o}function Vo(t){return t}var Yr=1,Gn=2,Qn=3,Ke=4,qo=1e-6;function Ql(t){return"translate("+t+",0)"}function jl(t){return"translate(0,"+t+")"}function Jl(t){return e=>+t(e)}function Kl(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function tc(){return!this.__axis}function jn(t,e){var r=[],n=null,a=null,o=6,i=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Yr||t===Ke?-1:1,f=t===Ke||t===Gn?"x":"y",h=t===Yr||t===Qn?Ql:jl;function c(p){var x=n??(e.ticks?e.ticks.apply(e,r):e.domain()),v=a??(e.tickFormat?e.tickFormat.apply(e,r):Vo),m=Math.max(o,0)+s,d=e.range(),M=+d[0]+l,S=+d[d.length-1]+l,b=(e.bandwidth?Kl:Jl)(e.copy(),l),A=p.selection?p.selection():p,C=A.selectAll(".domain").data([null]),F=A.selectAll(".tick").data(x,e).order(),E=F.exit(),I=F.enter().append("g").attr("class","tick"),O=F.select("line"),y=F.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(I),O=O.merge(I.append("line").attr("stroke","currentColor").attr(f+"2",u*o)),y=y.merge(I.append("text").attr("fill","currentColor").attr(f,u*m).attr("dy",t===Yr?"0em":t===Qn?"0.71em":"0.32em")),p!==A&&(C=C.transition(p),F=F.transition(p),O=O.transition(p),y=y.transition(p),E=E.transition(p).attr("opacity",qo).attr("transform",function(N){return isFinite(N=b(N))?h(N+l):this.getAttribute("transform")}),I.attr("opacity",qo).attr("transform",function(N){var w=this.parentNode.__axis;return h((w&&isFinite(w=w(N))?w:b(N))+l)})),E.remove(),C.attr("d",t===Ke||t===Gn?i?"M"+u*i+","+M+"H"+l+"V"+S+"H"+u*i:"M"+l+","+M+"V"+S:i?"M"+M+","+u*i+"V"+l+"H"+S+"V"+u*i:"M"+M+","+l+"H"+S),F.attr("opacity",1).attr("transform",function(N){return h(b(N)+l)}),O.attr(f+"2",u*o),y.attr(f,u*m).text(v),A.filter(tc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Gn?"start":t===Ke?"end":"middle"),A.each(function(){this.__axis=b})}return c.scale=function(p){return arguments.length?(e=p,c):e},c.ticks=function(){return r=Array.from(arguments),c},c.tickArguments=function(p){return arguments.length?(r=p==null?[]:Array.from(p),c):r.slice()},c.tickValues=function(p){return arguments.length?(n=p==null?null:Array.from(p),c):n&&n.slice()},c.tickFormat=function(p){return arguments.length?(a=p,c):a},c.tickSize=function(p){return arguments.length?(o=i=+p,c):o},c.tickSizeInner=function(p){return arguments.length?(o=+p,c):o},c.tickSizeOuter=function(p){return arguments.length?(i=+p,c):i},c.tickPadding=function(p){return arguments.length?(s=+p,c):s},c.offset=function(p){return arguments.length?(l=+p,c):l},c}function Jn(t){return jn(Yr,t)}function tr(t){return jn(Qn,t)}function er(t){return jn(Ke,t)}var ec={value:()=>{}};function Wo(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Vr(r)}function Vr(t){this._=t}function rc(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Vr.prototype=Wo.prototype={constructor:Vr,on:function(t,e){var r=this._,n=rc(t+"",r),a,o=-1,i=n.length;if(arguments.length<2){for(;++o<i;)if((a=(t=n[o]).type)&&(a=nc(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<i;)if(a=(t=n[o]).type)r[a]=Bo(r[a],t.name,e);else if(e==null)for(a in r)r[a]=Bo(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Vr(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,o;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],n=0,a=o.length;n<a;++n)o[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],a=0,o=n.length;a<o;++a)n[a].value.apply(e,r)}};function nc(t,e){for(var r=0,n=t.length,a;r<n;++r)if((a=t[r]).name===e)return a.value}function Bo(t,e,r){for(var n=0,a=t.length;n<a;++n)if(t[n].name===e){t[n]=ec,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var rr=Wo;var qr="http://www.w3.org/1999/xhtml",Kn={svg:"http://www.w3.org/2000/svg",xhtml:qr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yt(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),Kn.hasOwnProperty(e)?{space:Kn[e],local:t}:t}function ac(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===qr&&e.documentElement.namespaceURI===qr?e.createElement(t):e.createElementNS(r,t)}}function oc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Br(t){var e=Yt(t);return(e.local?oc:ac)(e)}function ic(){}function me(t){return t==null?ic:function(){return this.querySelector(t)}}function Zo(t){typeof t!="function"&&(t=me(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=new Array(i),l,u,f=0;f<i;++f)(l=o[f])&&(u=t.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new nt(n,this._parents)}function ta(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function sc(){return[]}function nr(t){return t==null?sc:function(){return this.querySelectorAll(t)}}function uc(t){return function(){return ta(t.apply(this,arguments))}}function Go(t){typeof t=="function"?t=uc(t):t=nr(t);for(var e=this._groups,r=e.length,n=[],a=[],o=0;o<r;++o)for(var i=e[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&(n.push(t.call(l,l.__data__,u,i)),a.push(l));return new nt(n,a)}function ar(t){return function(){return this.matches(t)}}function Wr(t){return function(e){return e.matches(t)}}var lc=Array.prototype.find;function cc(t){return function(){return lc.call(this.children,t)}}function fc(){return this.firstElementChild}function Qo(t){return this.select(t==null?fc:cc(typeof t=="function"?t:Wr(t)))}var hc=Array.prototype.filter;function pc(){return Array.from(this.children)}function mc(t){return function(){return hc.call(this.children,t)}}function jo(t){return this.selectAll(t==null?pc:mc(typeof t=="function"?t:Wr(t)))}function Jo(t){typeof t!="function"&&(t=ar(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],l,u=0;u<i;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new nt(n,this._parents)}function Zr(t){return new Array(t.length)}function Ko(){return new nt(this._enter||this._groups.map(Zr),this._parents)}function or(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}or.prototype={constructor:or,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ti(t){return function(){return t}}function dc(t,e,r,n,a,o){for(var i=0,s,l=e.length,u=o.length;i<u;++i)(s=e[i])?(s.__data__=o[i],n[i]=s):r[i]=new or(t,o[i]);for(;i<l;++i)(s=e[i])&&(a[i]=s)}function gc(t,e,r,n,a,o,i){var s,l,u=new Map,f=e.length,h=o.length,c=new Array(f),p;for(s=0;s<f;++s)(l=e[s])&&(c[s]=p=i.call(l,l.__data__,s,e)+"",u.has(p)?a[s]=l:u.set(p,l));for(s=0;s<h;++s)p=i.call(t,o[s],s,o)+"",(l=u.get(p))?(n[s]=l,l.__data__=o[s],u.delete(p)):r[s]=new or(t,o[s]);for(s=0;s<f;++s)(l=e[s])&&u.get(c[s])===l&&(a[s]=l)}function xc(t){return t.__data__}function ei(t,e){if(!arguments.length)return Array.from(this,xc);var r=e?gc:dc,n=this._parents,a=this._groups;typeof t!="function"&&(t=ti(t));for(var o=a.length,i=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var f=n[u],h=a[u],c=h.length,p=yc(t.call(f,f&&f.__data__,u,n)),x=p.length,v=s[u]=new Array(x),m=i[u]=new Array(x),d=l[u]=new Array(c);r(f,h,v,m,d,p,e);for(var M=0,S=0,b,A;M<x;++M)if(b=v[M]){for(M>=S&&(S=M+1);!(A=m[S])&&++S<x;);b._next=A||null}}return i=new nt(i,n),i._enter=s,i._exit=l,i}function yc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ri(){return new nt(this._exit||this._groups.map(Zr),this._parents)}function ni(t,e,r){var n=this.enter(),a=this,o=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?o.remove():r(o),n&&a?n.merge(a).order():a}function ai(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,a=r.length,o=n.length,i=Math.min(a,o),s=new Array(a),l=0;l<i;++l)for(var u=r[l],f=n[l],h=u.length,c=s[l]=new Array(h),p,x=0;x<h;++x)(p=u[x]||f[x])&&(c[x]=p);for(;l<a;++l)s[l]=r[l];return new nt(s,this._parents)}function oi(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],a=n.length-1,o=n[a],i;--a>=0;)(i=n[a])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function ii(t){t||(t=vc);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var r=this._groups,n=r.length,a=new Array(n),o=0;o<n;++o){for(var i=r[o],s=i.length,l=a[o]=new Array(s),u,f=0;f<s;++f)(u=i[f])&&(l[f]=u);l.sort(e)}return new nt(a,this._parents).order()}function vc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function si(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ui(){return Array.from(this)}function li(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length;a<o;++a){var i=n[a];if(i)return i}return null}function ci(){let t=0;for(let e of this)++t;return t}function fi(){return!this.node()}function hi(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var a=e[r],o=0,i=a.length,s;o<i;++o)(s=a[o])&&t.call(s,s.__data__,o,a);return this}function _c(t){return function(){this.removeAttribute(t)}}function bc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wc(t,e){return function(){this.setAttribute(t,e)}}function Tc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Cc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Mc(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function pi(t,e){var r=Yt(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?bc:_c:typeof e=="function"?r.local?Mc:Cc:r.local?Tc:wc)(r,e))}function Gr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function kc(t){return function(){this.style.removeProperty(t)}}function Ac(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Sc(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function mi(t,e,r){return arguments.length>1?this.each((e==null?kc:typeof e=="function"?Sc:Ac)(t,e,r??"")):jt(this.node(),t)}function jt(t,e){return t.style.getPropertyValue(e)||Gr(t).getComputedStyle(t,null).getPropertyValue(e)}function Dc(t){return function(){delete this[t]}}function Nc(t,e){return function(){this[t]=e}}function Ic(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function di(t,e){return arguments.length>1?this.each((e==null?Dc:typeof e=="function"?Ic:Nc)(t,e)):this.node()[t]}function gi(t){return t.trim().split(/^|\s+/)}function ea(t){return t.classList||new xi(t)}function xi(t){this._node=t,this._names=gi(t.getAttribute("class")||"")}xi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function yi(t,e){for(var r=ea(t),n=-1,a=e.length;++n<a;)r.add(e[n])}function vi(t,e){for(var r=ea(t),n=-1,a=e.length;++n<a;)r.remove(e[n])}function Rc(t){return function(){yi(this,t)}}function Ec(t){return function(){vi(this,t)}}function Oc(t,e){return function(){(e.apply(this,arguments)?yi:vi)(this,t)}}function _i(t,e){var r=gi(t+"");if(arguments.length<2){for(var n=ea(this.node()),a=-1,o=r.length;++a<o;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?Oc:e?Rc:Ec)(r,e))}function $c(){this.textContent=""}function Pc(t){return function(){this.textContent=t}}function Fc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function bi(t){return arguments.length?this.each(t==null?$c:(typeof t=="function"?Fc:Pc)(t)):this.node().textContent}function zc(){this.innerHTML=""}function Hc(t){return function(){this.innerHTML=t}}function Lc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function wi(t){return arguments.length?this.each(t==null?zc:(typeof t=="function"?Lc:Hc)(t)):this.node().innerHTML}function Uc(){this.nextSibling&&this.parentNode.appendChild(this)}function Ti(){return this.each(Uc)}function Xc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ci(){return this.each(Xc)}function Mi(t){var e=typeof t=="function"?t:Br(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Yc(){return null}function ki(t,e){var r=typeof t=="function"?t:Br(t),n=e==null?Yc:typeof e=="function"?e:me(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Vc(){var t=this.parentNode;t&&t.removeChild(this)}function Ai(){return this.each(Vc)}function qc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Bc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Si(t){return this.select(t?Bc:qc)}function Di(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Wc(t){return function(e){t.call(this,e,this.__data__)}}function Zc(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Gc(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,a=e.length,o;r<a;++r)o=e[r],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++n]=o;++n?e.length=n:delete this.__on}}}function Qc(t,e,r){return function(){var n=this.__on,a,o=Wc(e);if(n){for(var i=0,s=n.length;i<s;++i)if((a=n[i]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=r),a.value=e;return}}this.addEventListener(t.type,o,r),a={type:t.type,name:t.name,value:e,listener:o,options:r},n?n.push(a):this.__on=[a]}}function Ni(t,e,r){var n=Zc(t+""),a,o=n.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(a=0,f=s[l];a<o;++a)if((i=n[a]).type===f.type&&i.name===f.name)return f.value}return}for(s=e?Qc:Gc,a=0;a<o;++a)this.each(s(n[a],e,r));return this}function Ii(t,e,r){var n=Gr(t),a=n.CustomEvent;typeof a=="function"?a=new a(e,r):(a=n.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function jc(t,e){return function(){return Ii(this,t,e)}}function Jc(t,e){return function(){return Ii(this,t,e.apply(this,arguments))}}function Ri(t,e){return this.each((typeof e=="function"?Jc:jc)(t,e))}function*Ei(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],a=0,o=n.length,i;a<o;++a)(i=n[a])&&(yield i)}var ra=[null];function nt(t,e){this._groups=t,this._parents=e}function Oi(){return new nt([[document.documentElement]],ra)}function Kc(){return this}nt.prototype=Oi.prototype={constructor:nt,select:Zo,selectAll:Go,selectChild:Qo,selectChildren:jo,filter:Jo,data:ei,enter:Ko,exit:ri,join:ni,merge:ai,selection:Kc,order:oi,sort:ii,call:si,nodes:ui,node:li,size:ci,empty:fi,each:hi,attr:pi,style:mi,property:di,classed:_i,text:bi,html:wi,raise:Ti,lower:Ci,append:Mi,insert:ki,remove:Ai,clone:Si,datum:Di,on:Ni,dispatch:Ri,[Symbol.iterator]:Ei};var Vt=Oi;function Z(t){return typeof t=="string"?new nt([[document.querySelector(t)]],[document.documentElement]):new nt([[t]],ra)}function $i(t){let e;for(;e=t.sourceEvent;)t=e;return t}function qt(t,e){if(t=$i(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}var Qr={capture:!0,passive:!1};function jr(t){t.preventDefault(),t.stopImmediatePropagation()}function na(t){var e=t.document.documentElement,r=Z(t).on("dragstart.drag",jr,Qr);"onselectstart"in e?r.on("selectstart.drag",jr,Qr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function aa(t,e){var r=t.document.documentElement,n=Z(t).on("dragstart.drag",null);e&&(n.on("click.drag",jr,Qr),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function Jr(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function oa(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ur(){}var ir=.7,en=1/ir,$e="\\s*([+-]?\\d+)\\s*",sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tf=/^#([0-9a-f]{3,8})$/,ef=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),rf=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),nf=new RegExp(`^rgba\\(${$e},${$e},${$e},${sr}\\)$`),af=new RegExp(`^rgba\\(${$t},${$t},${$t},${sr}\\)$`),of=new RegExp(`^hsl\\(${sr},${$t},${$t}\\)$`),sf=new RegExp(`^hsla\\(${sr},${$t},${$t},${sr}\\)$`),Pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jr(ur,Dt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fi,formatHex:Fi,formatHex8:uf,formatHsl:lf,formatRgb:zi,toString:zi});function Fi(){return this.rgb().formatHex()}function uf(){return this.rgb().formatHex8()}function lf(){return Vi(this).formatHsl()}function zi(){return this.rgb().formatRgb()}function Dt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=tf.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Hi(e):r===3?new Ct(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Kr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Kr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ef.exec(t))?new Ct(e[1],e[2],e[3],1):(e=rf.exec(t))?new Ct(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nf.exec(t))?Kr(e[1],e[2],e[3],e[4]):(e=af.exec(t))?Kr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=of.exec(t))?Xi(e[1],e[2]/100,e[3]/100,1):(e=sf.exec(t))?Xi(e[1],e[2]/100,e[3]/100,e[4]):Pi.hasOwnProperty(t)?Hi(Pi[t]):t==="transparent"?new Ct(NaN,NaN,NaN,0):null}function Hi(t){return new Ct(t>>16&255,t>>8&255,t&255,1)}function Kr(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ct(t,e,r,n)}function cf(t){return t instanceof ur||(t=Dt(t)),t?(t=t.rgb(),new Ct(t.r,t.g,t.b,t.opacity)):new Ct}function Pe(t,e,r,n){return arguments.length===1?cf(t):new Ct(t,e,r,n??1)}function Ct(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Jr(Ct,Pe,oa(ur,{brighter(t){return t=t==null?en:Math.pow(en,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ir:Math.pow(ir,t),new Ct(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ct(ge(this.r),ge(this.g),ge(this.b),rn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Li,formatHex:Li,formatHex8:ff,formatRgb:Ui,toString:Ui}));function Li(){return`#${de(this.r)}${de(this.g)}${de(this.b)}`}function ff(){return`#${de(this.r)}${de(this.g)}${de(this.b)}${de((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ui(){let t=rn(this.opacity);return`${t===1?"rgb(":"rgba("}${ge(this.r)}, ${ge(this.g)}, ${ge(this.b)}${t===1?")":`, ${t})`}`}function rn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ge(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function de(t){return t=ge(t),(t<16?"0":"")+t.toString(16)}function Xi(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new St(t,e,r,n)}function Vi(t){if(t instanceof St)return new St(t.h,t.s,t.l,t.opacity);if(t instanceof ur||(t=Dt(t)),!t)return new St;if(t instanceof St)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),o=Math.max(e,r,n),i=NaN,s=o-a,l=(o+a)/2;return s?(e===o?i=(r-n)/s+(r<n)*6:r===o?i=(n-e)/s+2:i=(e-r)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new St(i,s,l,t.opacity)}function qi(t,e,r,n){return arguments.length===1?Vi(t):new St(t,e,r,n??1)}function St(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Jr(St,qi,oa(ur,{brighter(t){return t=t==null?en:Math.pow(en,t),new St(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ir:Math.pow(ir,t),new St(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Ct(ia(t>=240?t-240:t+120,a,n),ia(t,a,n),ia(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new St(Yi(this.h),tn(this.s),tn(this.l),rn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=rn(this.opacity);return`${t===1?"hsl(":"hsla("}${Yi(this.h)}, ${tn(this.s)*100}%, ${tn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Yi(t){return t=(t||0)%360,t<0?t+360:t}function tn(t){return Math.max(0,Math.min(1,t||0))}function ia(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function sa(t,e,r,n,a){var o=t*t,i=o*t;return((1-3*t+3*o-i)*e+(4-6*o+3*i)*r+(1+3*t+3*o-3*i)*n+i*a)/6}function Bi(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),a=t[n],o=t[n+1],i=n>0?t[n-1]:2*a-o,s=n<e-1?t[n+2]:2*o-a;return sa((r-n/e)*e,i,a,o,s)}}function Wi(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),a=t[(n+e-1)%e],o=t[n%e],i=t[(n+1)%e],s=t[(n+2)%e];return sa((r-n/e)*e,a,o,i,s)}}var lr=t=>()=>t;function hf(t,e){return function(r){return t+r*e}}function pf(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Zi(t){return(t=+t)==1?nn:function(e,r){return r-e?pf(e,r,t):lr(isNaN(e)?r:e)}}function nn(t,e){var r=e-t;return r?hf(t,r):lr(isNaN(t)?e:t)}var xe=function t(e){var r=Zi(e);function n(a,o){var i=r((a=Pe(a)).r,(o=Pe(o)).r),s=r(a.g,o.g),l=r(a.b,o.b),u=nn(a.opacity,o.opacity);return function(f){return a.r=i(f),a.g=s(f),a.b=l(f),a.opacity=u(f),a+""}}return n.gamma=t,n}(1);function Gi(t){return function(e){var r=e.length,n=new Array(r),a=new Array(r),o=new Array(r),i,s;for(i=0;i<r;++i)s=Pe(e[i]),n[i]=s.r||0,a[i]=s.g||0,o[i]=s.b||0;return n=t(n),a=t(a),o=t(o),s.opacity=1,function(l){return s.r=n(l),s.g=a(l),s.b=o(l),s+""}}}var mf=Gi(Bi),df=Gi(Wi);function Qi(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(o){for(a=0;a<r;++a)n[a]=t[a]*(1-o)+e[a]*o;return n}}function ji(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ji(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),o=new Array(r),i;for(i=0;i<n;++i)a[i]=Bt(t[i],e[i]);for(;i<r;++i)o[i]=e[i];return function(s){for(i=0;i<n;++i)o[i]=a[i](s);return o}}function Ki(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function lt(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function ts(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Bt(t[a],e[a]):n[a]=e[a];return function(o){for(a in r)n[a]=r[a](o);return n}}var la=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ua=new RegExp(la.source,"g");function gf(t){return function(){return t}}function xf(t){return function(e){return t(e)+""}}function cr(t,e){var r=la.lastIndex=ua.lastIndex=0,n,a,o,i=-1,s=[],l=[];for(t=t+"",e=e+"";(n=la.exec(t))&&(a=ua.exec(e));)(o=a.index)>r&&(o=e.slice(r,o),s[i]?s[i]+=o:s[++i]=o),(n=n[0])===(a=a[0])?s[i]?s[i]+=a:s[++i]=a:(s[++i]=null,l.push({i,x:lt(n,a)})),r=ua.lastIndex;return r<e.length&&(o=e.slice(r),s[i]?s[i]+=o:s[++i]=o),s.length<2?l[0]?xf(l[0].x):gf(e):(e=l.length,function(u){for(var f=0,h;f<e;++f)s[(h=l[f]).i]=h.x(u);return s.join("")})}function Bt(t,e){var r=typeof e,n;return e==null||r==="boolean"?lr(e):(r==="number"?lt:r==="string"?(n=Dt(e))?(e=n,xe):cr:e instanceof Dt?xe:e instanceof Date?Ki:ji(e)?Qi:Array.isArray(e)?Ji:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ts:lt)(t,e)}function ca(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var es=180/Math.PI,an={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fa(t,e,r,n,a,o){var i,s,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),t*n<e*r&&(t=-t,e=-e,l=-l,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(e,t)*es,skewX:Math.atan(l)*es,scaleX:i,scaleY:s}}var on;function rs(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?an:fa(e.a,e.b,e.c,e.d,e.e,e.f)}function ns(t){return t==null?an:(on||(on=document.createElementNS("http://www.w3.org/2000/svg","g")),on.setAttribute("transform",t),(t=on.transform.baseVal.consolidate())?(t=t.matrix,fa(t.a,t.b,t.c,t.d,t.e,t.f)):an)}function as(t,e,r,n){function a(u){return u.length?u.pop()+" ":""}function o(u,f,h,c,p,x){if(u!==h||f!==c){var v=p.push("translate(",null,e,null,r);x.push({i:v-4,x:lt(u,h)},{i:v-2,x:lt(f,c)})}else(h||c)&&p.push("translate("+h+e+c+r)}function i(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(a(h)+"rotate(",null,n)-2,x:lt(u,f)})):f&&h.push(a(h)+"rotate("+f+n)}function s(u,f,h,c){u!==f?c.push({i:h.push(a(h)+"skewX(",null,n)-2,x:lt(u,f)}):f&&h.push(a(h)+"skewX("+f+n)}function l(u,f,h,c,p,x){if(u!==h||f!==c){var v=p.push(a(p)+"scale(",null,",",null,")");x.push({i:v-4,x:lt(u,h)},{i:v-2,x:lt(f,c)})}else(h!==1||c!==1)&&p.push(a(p)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,c),i(u.rotate,f.rotate,h,c),s(u.skewX,f.skewX,h,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(p){for(var x=-1,v=c.length,m;++x<v;)h[(m=c[x]).i]=m.x(p);return h.join("")}}}var ha=as(rs,"px, ","px)","deg)"),pa=as(ns,", ",")",")");var yf=1e-12;function os(t){return((t=Math.exp(t))+1/t)/2}function vf(t){return((t=Math.exp(t))-1/t)/2}function _f(t){return((t=Math.exp(2*t))-1)/(t+1)}var ma=function t(e,r,n){function a(o,i){var s=o[0],l=o[1],u=o[2],f=i[0],h=i[1],c=i[2],p=f-s,x=h-l,v=p*p+x*x,m,d;if(v<yf)d=Math.log(c/u)/e,m=function(F){return[s+F*p,l+F*x,u*Math.exp(e*F*d)]};else{var M=Math.sqrt(v),S=(c*c-u*u+n*v)/(2*u*r*M),b=(c*c-u*u-n*v)/(2*c*r*M),A=Math.log(Math.sqrt(S*S+1)-S),C=Math.log(Math.sqrt(b*b+1)-b);d=(C-A)/e,m=function(F){var E=F*d,I=os(A),O=u/(r*M)*(I*_f(e*E+A)-vf(A));return[s+O*p,l+O*x,u*I/os(e*E+A)]}}return m.duration=d*1e3*e/Math.SQRT2,m}return a.rho=function(o){var i=Math.max(.001,+o),s=i*i,l=s*s;return t(i,s,l)},a}(Math.SQRT2,2,4);var Fe=0,hr=0,fr=0,ss=1e3,sn,pr,un=0,ye=0,ln=0,mr=typeof performance=="object"&&performance.now?performance:Date,us=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function gr(){return ye||(us(bf),ye=mr.now()+ln)}function bf(){ye=0}function dr(){this._call=this._time=this._next=null}dr.prototype=cn.prototype={constructor:dr,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?gr():+r)+(e==null?0:+e),!this._next&&pr!==this&&(pr?pr._next=this:sn=this,pr=this),this._call=t,this._time=r,da()},stop:function(){this._call&&(this._call=null,this._time=1/0,da())}};function cn(t,e,r){var n=new dr;return n.restart(t,e,r),n}function ls(){gr(),++Fe;for(var t=sn,e;t;)(e=ye-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Fe}function is(){ye=(un=mr.now())+ln,Fe=hr=0;try{ls()}finally{Fe=0,Tf(),ye=0}}function wf(){var t=mr.now(),e=t-un;e>ss&&(ln-=e,un=t)}function Tf(){for(var t,e=sn,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:sn=r);pr=t,da(n)}function da(t){if(!Fe){hr&&(hr=clearTimeout(hr));var e=t-ye;e>24?(t<1/0&&(hr=setTimeout(is,t-mr.now()-ln)),fr&&(fr=clearInterval(fr))):(fr||(un=mr.now(),fr=setInterval(wf,ss)),Fe=1,us(is))}}function fn(t,e,r){var n=new dr;return e=e==null?0:+e,n.restart(a=>{n.stop(),t(a+e)},e,r),n}var Cf=rr("start","end","cancel","interrupt"),Mf=[],hs=0,cs=1,pn=2,hn=3,fs=4,mn=5,xr=6;function Jt(t,e,r,n,a,o){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;kf(t,r,{name:e,index:n,group:a,on:Cf,tween:Mf,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:hs})}function yr(t,e){var r=it(t,e);if(r.state>hs)throw new Error("too late; already scheduled");return r}function ct(t,e){var r=it(t,e);if(r.state>hn)throw new Error("too late; already running");return r}function it(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function kf(t,e,r){var n=t.__transition,a;n[e]=r,r.timer=cn(o,0,r.time);function o(u){r.state=cs,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var f,h,c,p;if(r.state!==cs)return l();for(f in n)if(p=n[f],p.name===r.name){if(p.state===hn)return fn(i);p.state===fs?(p.state=xr,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete n[f]):+f<e&&(p.state=xr,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete n[f])}if(fn(function(){r.state===hn&&(r.state=fs,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=pn,r.on.call("start",t,t.__data__,r.index,r.group),r.state===pn){for(r.state=hn,a=new Array(c=r.tween.length),f=0,h=-1;f<c;++f)(p=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(a[++h]=p);a.length=h+1}}function s(u){for(var f=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=mn,1),h=-1,c=a.length;++h<c;)a[h].call(t,f);r.state===mn&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=xr,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function Kt(t,e){var r=t.__transition,n,a,o=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){o=!1;continue}a=n.state>pn&&n.state<mn,n.state=xr,n.timer.stop(),n.on.call(a?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}o&&delete t.__transition}}function ps(t){return this.each(function(){Kt(this,t)})}function Af(t,e){var r,n;return function(){var a=ct(this,t),o=a.tween;if(o!==r){n=r=o;for(var i=0,s=n.length;i<s;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function Sf(t,e,r){var n,a;if(typeof r!="function")throw new Error;return function(){var o=ct(this,t),i=o.tween;if(i!==n){a=(n=i).slice();for(var s={name:e,value:r},l=0,u=a.length;l<u;++l)if(a[l].name===e){a[l]=s;break}l===u&&a.push(s)}o.tween=a}}function ms(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=it(this.node(),r).tween,a=0,o=n.length,i;a<o;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((e==null?Af:Sf)(r,t,e))}function ze(t,e,r){var n=t._id;return t.each(function(){var a=ct(this,n);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return it(a,n).value[e]}}function dn(t,e){var r;return(typeof e=="number"?lt:e instanceof Dt?xe:(r=Dt(e))?(e=r,xe):cr)(t,e)}function Df(t){return function(){this.removeAttribute(t)}}function Nf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function If(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttribute(t);return i===a?null:i===n?o:o=e(n=i,r)}}function Rf(t,e,r){var n,a=r+"",o;return function(){var i=this.getAttributeNS(t.space,t.local);return i===a?null:i===n?o:o=e(n=i,r)}}function Ef(t,e,r){var n,a,o;return function(){var i,s=r(this),l;return s==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=s+"",i===l?null:i===n&&l===a?o:(a=l,o=e(n=i,s)))}}function Of(t,e,r){var n,a,o;return function(){var i,s=r(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=s+"",i===l?null:i===n&&l===a?o:(a=l,o=e(n=i,s)))}}function ds(t,e){var r=Yt(t),n=r==="transform"?pa:dn;return this.attrTween(t,typeof e=="function"?(r.local?Of:Ef)(r,n,ze(this,"attr."+t,e)):e==null?(r.local?Nf:Df)(r):(r.local?Rf:If)(r,n,e))}function $f(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Pf(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Ff(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&Pf(t,o)),r}return a._value=e,a}function zf(t,e){var r,n;function a(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&$f(t,o)),r}return a._value=e,a}function gs(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Yt(t);return this.tween(r,(n.local?Ff:zf)(n,e))}function Hf(t,e){return function(){yr(this,t).delay=+e.apply(this,arguments)}}function Lf(t,e){return e=+e,function(){yr(this,t).delay=e}}function xs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Hf:Lf)(e,t)):it(this.node(),e).delay}function Uf(t,e){return function(){ct(this,t).duration=+e.apply(this,arguments)}}function Xf(t,e){return e=+e,function(){ct(this,t).duration=e}}function ys(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Uf:Xf)(e,t)):it(this.node(),e).duration}function Yf(t,e){if(typeof e!="function")throw new Error;return function(){ct(this,t).ease=e}}function vs(t){var e=this._id;return arguments.length?this.each(Yf(e,t)):it(this.node(),e).ease}function Vf(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;ct(this,t).ease=r}}function _s(t){if(typeof t!="function")throw new Error;return this.each(Vf(this._id,t))}function bs(t){typeof t!="function"&&(t=ar(t));for(var e=this._groups,r=e.length,n=new Array(r),a=0;a<r;++a)for(var o=e[a],i=o.length,s=n[a]=[],l,u=0;u<i;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new _t(n,this._parents,this._name,this._id)}function ws(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,a=r.length,o=Math.min(n,a),i=new Array(n),s=0;s<o;++s)for(var l=e[s],u=r[s],f=l.length,h=i[s]=new Array(f),c,p=0;p<f;++p)(c=l[p]||u[p])&&(h[p]=c);for(;s<n;++s)i[s]=e[s];return new _t(i,this._parents,this._name,this._id)}function qf(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Bf(t,e,r){var n,a,o=qf(e)?yr:ct;return function(){var i=o(this,t),s=i.on;s!==n&&(a=(n=s).copy()).on(e,r),i.on=a}}function Ts(t,e){var r=this._id;return arguments.length<2?it(this.node(),r).on.on(t):this.each(Bf(r,t,e))}function Wf(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Cs(){return this.on("end.remove",Wf(this._id))}function Ms(t){var e=this._name,r=this._id;typeof t!="function"&&(t=me(t));for(var n=this._groups,a=n.length,o=new Array(a),i=0;i<a;++i)for(var s=n[i],l=s.length,u=o[i]=new Array(l),f,h,c=0;c<l;++c)(f=s[c])&&(h=t.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,Jt(u[c],e,r,c,u,it(f,r)));return new _t(o,this._parents,e,r)}function ks(t){var e=this._name,r=this._id;typeof t!="function"&&(t=nr(t));for(var n=this._groups,a=n.length,o=[],i=[],s=0;s<a;++s)for(var l=n[s],u=l.length,f,h=0;h<u;++h)if(f=l[h]){for(var c=t.call(f,f.__data__,h,l),p,x=it(f,r),v=0,m=c.length;v<m;++v)(p=c[v])&&Jt(p,e,r,v,c,x);o.push(c),i.push(f)}return new _t(o,i,e,r)}var Zf=Vt.prototype.constructor;function As(){return new Zf(this._groups,this._parents)}function Gf(t,e){var r,n,a;return function(){var o=jt(this,t),i=(this.style.removeProperty(t),jt(this,t));return o===i?null:o===r&&i===n?a:a=e(r=o,n=i)}}function Ss(t){return function(){this.style.removeProperty(t)}}function Qf(t,e,r){var n,a=r+"",o;return function(){var i=jt(this,t);return i===a?null:i===n?o:o=e(n=i,r)}}function jf(t,e,r){var n,a,o;return function(){var i=jt(this,t),s=r(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),jt(this,t))),i===l?null:i===n&&l===a?o:(a=l,o=e(n=i,s))}}function Jf(t,e){var r,n,a,o="style."+e,i="end."+o,s;return function(){var l=ct(this,t),u=l.on,f=l.value[o]==null?s||(s=Ss(e)):void 0;(u!==r||a!==f)&&(n=(r=u).copy()).on(i,a=f),l.on=n}}function Ds(t,e,r){var n=(t+="")=="transform"?ha:dn;return e==null?this.styleTween(t,Gf(t,n)).on("end.style."+t,Ss(t)):typeof e=="function"?this.styleTween(t,jf(t,n,ze(this,"style."+t,e))).each(Jf(this._id,t)):this.styleTween(t,Qf(t,n,e),r).on("end.style."+t,null)}function Kf(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function th(t,e,r){var n,a;function o(){var i=e.apply(this,arguments);return i!==a&&(n=(a=i)&&Kf(t,i,r)),n}return o._value=e,o}function Ns(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,th(t,e,r??""))}function eh(t){return function(){this.textContent=t}}function rh(t){return function(){var e=t(this);this.textContent=e??""}}function Is(t){return this.tween("text",typeof t=="function"?rh(ze(this,"text",t)):eh(t==null?"":t+""))}function nh(t){return function(e){this.textContent=t.call(this,e)}}function ah(t){var e,r;function n(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&nh(a)),e}return n._value=t,n}function Rs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ah(t))}function Es(){for(var t=this._name,e=this._id,r=gn(),n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,l,u=0;u<s;++u)if(l=i[u]){var f=it(l,e);Jt(l,t,r,u,i,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new _t(n,this._parents,t,r)}function Os(){var t,e,r=this,n=r._id,a=r.size();return new Promise(function(o,i){var s={value:i},l={value:function(){--a===0&&o()}};r.each(function(){var u=ct(this,n),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),a===0&&o()})}var oh=0;function _t(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function $s(t){return Vt().transition(t)}function gn(){return++oh}var Wt=Vt.prototype;_t.prototype=$s.prototype={constructor:_t,select:Ms,selectAll:ks,selectChild:Wt.selectChild,selectChildren:Wt.selectChildren,filter:bs,merge:ws,selection:As,transition:Es,call:Wt.call,nodes:Wt.nodes,node:Wt.node,size:Wt.size,empty:Wt.empty,each:Wt.each,on:Ts,attr:ds,attrTween:gs,style:Ds,styleTween:Ns,text:Is,textTween:Rs,remove:Cs,tween:ms,delay:xs,duration:ys,ease:vs,easeVarying:_s,end:Os,[Symbol.iterator]:Wt[Symbol.iterator]};function xn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ih={time:null,delay:0,duration:250,ease:xn};function sh(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Ps(t){var e,r;t instanceof _t?(e=t._id,t=t._name):(e=gn(),(r=ih).time=gr(),t=t==null?null:t+"");for(var n=this._groups,a=n.length,o=0;o<a;++o)for(var i=n[o],s=i.length,l,u=0;u<s;++u)(l=i[u])&&Jt(l,t,e,u,i,r||sh(l,e));return new _t(n,this._parents,t,e)}Vt.prototype.interrupt=ps;Vt.prototype.transition=Ps;var{abs:zv,max:Hv,min:Lv}=Math;function Fs(t){return[+t[0],+t[1]]}function uh(t){return[Fs(t[0]),Fs(t[1])]}var Uv={name:"x",handles:["w","e"].map(ga),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Xv={name:"y",handles:["n","s"].map(ga),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Yv={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ga),input:function(t){return t==null?null:uh(t)},output:function(t){return t}};function ga(t){return{type:t}}var xa=Math.PI,ya=2*xa,ve=1e-6,lh=ya-ve;function zs(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function ch(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return zs;let r=10**e;return function(n){this._+=n[0];for(let a=1,o=n.length;a<o;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}var _e=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?zs:ch(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,o,i){this._append`C${+e},${+r},${+n},${+a},${this._x1=+o},${this._y1=+i}`}arcTo(e,r,n,a,o){if(e=+e,r=+r,n=+n,a=+a,o=+o,o<0)throw new Error(`negative radius: ${o}`);let i=this._x1,s=this._y1,l=n-e,u=a-r,f=i-e,h=s-r,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(c>ve)if(!(Math.abs(h*l-u*f)>ve)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let p=n-i,x=a-s,v=l*l+u*u,m=p*p+x*x,d=Math.sqrt(v),M=Math.sqrt(c),S=o*Math.tan((xa-Math.acos((v+c-m)/(2*d*M)))/2),b=S/M,A=S/d;Math.abs(b-1)>ve&&this._append`L${e+b*f},${r+b*h}`,this._append`A${o},${o},0,0,${+(h*p>f*x)},${this._x1=e+A*l},${this._y1=r+A*u}`}}arc(e,r,n,a,o,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(a),l=n*Math.sin(a),u=e+s,f=r+l,h=1^i,c=i?a-o:o-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>ve||Math.abs(this._y1-f)>ve)&&this._append`L${u},${f}`,n&&(c<0&&(c=c%ya+ya),c>lh?this._append`A${n},${n},0,1,${h},${e-s},${r-l}A${n},${n},0,1,${h},${this._x1=u},${this._y1=f}`:c>ve&&this._append`A${n},${n},0,${+(c>=xa)},${h},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}};function Hs(){return new _e}Hs.prototype=_e.prototype;function Ls(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function be(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Pt(t){return t=be(Math.abs(t)),t?t[1]:NaN}function Us(t,e){return function(r,n){for(var a=r.length,o=[],i=0,s=t[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),o.push(r.substring(a-=s,a+s)),!((l+=s+1)>n));)s=t[i=(i+1)%t.length];return o.reverse().join(e)}}function Xs(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var fh=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function te(t){if(!(e=fh.exec(t)))throw new Error("invalid format: "+t);var e;return new yn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}te.prototype=yn.prototype;function yn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}yn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ys(t){t:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var va;function Vs(t,e){var r=be(t,e);if(!r)return t+"";var n=r[0],a=r[1],o=a-(va=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+be(t,Math.max(0,e+o-1))[0]}function _a(t,e){var r=be(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}var ba={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ls,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>_a(t*100,e),r:_a,s:Vs,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function wa(t){return t}var qs=Array.prototype.map,Bs=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ws(t){var e=t.grouping===void 0||t.thousands===void 0?wa:Us(qs.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?wa:Xs(qs.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=te(h);var c=h.fill,p=h.align,x=h.sign,v=h.symbol,m=h.zero,d=h.width,M=h.comma,S=h.precision,b=h.trim,A=h.type;A==="n"?(M=!0,A="g"):ba[A]||(S===void 0&&(S=12),b=!0,A="g"),(m||c==="0"&&p==="=")&&(m=!0,c="0",p="=");var C=v==="$"?r:v==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",F=v==="$"?n:/[%p]/.test(A)?i:"",E=ba[A],I=/[defgprs%]/.test(A);S=S===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function O(y){var N=C,w=F,g,k,T;if(A==="c")w=E(y)+w,y="";else{y=+y;var R=y<0||1/y<0;if(y=isNaN(y)?l:E(Math.abs(y),S),b&&(y=Ys(y)),R&&+y==0&&x!=="+"&&(R=!1),N=(R?x==="("?x:s:x==="-"||x==="("?"":x)+N,w=(A==="s"?Bs[8+va/3]:"")+w+(R&&x==="("?")":""),I){for(g=-1,k=y.length;++g<k;)if(T=y.charCodeAt(g),48>T||T>57){w=(T===46?a+y.slice(g+1):y.slice(g))+w,y=y.slice(0,g);break}}}M&&!m&&(y=e(y,1/0));var z=N.length+y.length+w.length,H=z<d?new Array(d-z+1).join(c):"";switch(M&&m&&(y=e(H+y,H.length?d-w.length:1/0),H=""),p){case"<":y=N+y+w+H;break;case"=":y=N+H+y+w;break;case"^":y=H.slice(0,z=H.length>>1)+N+y+w+H.slice(z);break;default:y=H+N+y+w;break}return o(y)}return O.toString=function(){return h+""},O}function f(h,c){var p=u((h=te(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Pt(c)/3)))*3,v=Math.pow(10,-x),m=Bs[8+x/3];return function(d){return p(v*d)+m}}return{format:u,formatPrefix:f}}var vn,mt,_n;Ta({thousands:",",grouping:[3],currency:["$",""]});function Ta(t){return vn=Ws(t),mt=vn.format,_n=vn.formatPrefix,vn}function Ca(t){return Math.max(0,-Pt(Math.abs(t)))}function Ma(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pt(e)/3)))*3-Pt(Math.abs(t)))}function ka(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Pt(e)-Pt(t))+1}function hh(t){var e=0,r=t.children,n=r&&r.length;if(!n)e=1;else for(;--n>=0;)e+=r[n].value;t.value=e}function Zs(){return this.eachAfter(hh)}function Gs(t,e){let r=-1;for(let n of this)t.call(e,n,++r,this);return this}function Qs(t,e){for(var r=this,n=[r],a,o,i=-1;r=n.pop();)if(t.call(e,r,++i,this),a=r.children)for(o=a.length-1;o>=0;--o)n.push(a[o]);return this}function js(t,e){for(var r=this,n=[r],a=[],o,i,s,l=-1;r=n.pop();)if(a.push(r),o=r.children)for(i=0,s=o.length;i<s;++i)n.push(o[i]);for(;r=a.pop();)t.call(e,r,++l,this);return this}function Js(t,e){let r=-1;for(let n of this)if(t.call(e,n,++r,this))return n}function Ks(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,n=e.children,a=n&&n.length;--a>=0;)r+=n[a].value;e.value=r})}function tu(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function eu(t){for(var e=this,r=ph(e,t),n=[e];e!==r;)e=e.parent,n.push(e);for(var a=n.length;t!==r;)n.splice(a,0,t),t=t.parent;return n}function ph(t,e){if(t===e)return t;var r=t.ancestors(),n=e.ancestors(),a=null;for(t=r.pop(),e=n.pop();t===e;)a=t,t=r.pop(),e=n.pop();return a}function ru(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function nu(){return Array.from(this)}function au(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function ou(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*iu(){var t=this,e,r=[t],n,a,o;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,n=t.children)for(a=0,o=n.length;a<o;++a)r.push(n[a]);while(r.length)}function Ft(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=gh)):e===void 0&&(e=dh);for(var r=new we(t),n,a=[r],o,i,s,l;n=a.pop();)if((i=e(n.data))&&(l=(i=Array.from(i)).length))for(n.children=i,s=l-1;s>=0;--s)a.push(o=i[s]=new we(i[s])),o.parent=n,o.depth=n.depth+1;return r.eachBefore(yh)}function mh(){return Ft(this).eachBefore(xh)}function dh(t){return t.children}function gh(t){return Array.isArray(t)?t[1]:null}function xh(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function yh(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function we(t){this.data=t,this.depth=this.height=0,this.parent=null}we.prototype=Ft.prototype={constructor:we,count:Zs,each:Gs,eachAfter:js,eachBefore:Qs,find:Js,sum:Ks,sort:tu,path:eu,ancestors:ru,descendants:nu,leaves:au,links:ou,copy:mh,[Symbol.iterator]:iu};function su(t){return t==null?null:Aa(t)}function Aa(t){if(typeof t!="function")throw new Error;return t}function Zt(){return 0}function ee(t){return function(){return t}}function uu(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function lu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function cu(t,e){let r=t.length,n,a;for(;r;)a=e()*r--|0,n=t[r],t[r]=t[a],t[a]=n;return t}function fu(t,e){for(var r=0,n=(t=cu(Array.from(t),e)).length,a=[],o,i;r<n;)o=t[r],i&&hu(i,o)?++r:(i=_h(a=vh(a,o)),r=0);return i}function vh(t,e){var r,n;if(Sa(e,t))return[e];for(r=0;r<t.length;++r)if(bn(e,t[r])&&Sa(vr(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(n=r+1;n<t.length;++n)if(bn(vr(t[r],t[n]),e)&&bn(vr(t[r],e),t[n])&&bn(vr(t[n],e),t[r])&&Sa(pu(t[r],t[n],e),t))return[t[r],t[n],e];throw new Error}function bn(t,e){var r=t.r-e.r,n=e.x-t.x,a=e.y-t.y;return r<0||r*r<n*n+a*a}function hu(t,e){var r=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function Sa(t,e){for(var r=0;r<e.length;++r)if(!hu(t,e[r]))return!1;return!0}function _h(t){switch(t.length){case 1:return bh(t[0]);case 2:return vr(t[0],t[1]);case 3:return pu(t[0],t[1],t[2])}}function bh(t){return{x:t.x,y:t.y,r:t.r}}function vr(t,e){var r=t.x,n=t.y,a=t.r,o=e.x,i=e.y,s=e.r,l=o-r,u=i-n,f=s-a,h=Math.sqrt(l*l+u*u);return{x:(r+o+l/h*f)/2,y:(n+i+u/h*f)/2,r:(h+a+s)/2}}function pu(t,e,r){var n=t.x,a=t.y,o=t.r,i=e.x,s=e.y,l=e.r,u=r.x,f=r.y,h=r.r,c=n-i,p=n-u,x=a-s,v=a-f,m=l-o,d=h-o,M=n*n+a*a-o*o,S=M-i*i-s*s+l*l,b=M-u*u-f*f+h*h,A=p*x-c*v,C=(x*b-v*S)/(A*2)-n,F=(v*m-x*d)/A,E=(p*S-c*b)/(A*2)-a,I=(c*d-p*m)/A,O=F*F+I*I-1,y=2*(o+C*F+E*I),N=C*C+E*E-o*o,w=-(Math.abs(O)>1e-6?(y+Math.sqrt(y*y-4*O*N))/(2*O):N/y);return{x:n+C+F*w,y:a+E+I*w,r:w}}function mu(t,e,r){var n=t.x-e.x,a,o,i=t.y-e.y,s,l,u=n*n+i*i;u?(o=e.r+r.r,o*=o,l=t.r+r.r,l*=l,o>l?(a=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-a*a)),r.x=t.x-a*n-s*i,r.y=t.y-a*i+s*n):(a=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-a*a)),r.x=e.x+a*n-s*i,r.y=e.y+a*i+s*n)):(r.x=e.x+r.r,r.y=e.y)}function du(t,e){var r=t.r+e.r-1e-6,n=e.x-t.x,a=e.y-t.y;return r>0&&r*r>n*n+a*a}function gu(t){var e=t._,r=t.next._,n=e.r+r.r,a=(e.x*r.r+r.x*e.r)/n,o=(e.y*r.r+r.y*e.r)/n;return a*a+o*o}function wn(t){this._=t,this.next=null,this.previous=null}function xu(t,e){if(!(o=(t=lu(t)).length))return 0;var r,n,a,o,i,s,l,u,f,h,c;if(r=t[0],r.x=0,r.y=0,!(o>1))return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,!(o>2))return r.r+n.r;mu(n,r,a=t[2]),r=new wn(r),n=new wn(n),a=new wn(a),r.next=a.previous=n,n.next=r.previous=a,a.next=n.previous=r;t:for(l=3;l<o;++l){mu(r._,n._,a=t[l]),a=new wn(a),u=n.next,f=r.previous,h=n._.r,c=r._.r;do if(h<=c){if(du(u._,a._)){n=u,r.next=n,n.previous=r,--l;continue t}h+=u._.r,u=u.next}else{if(du(f._,a._)){r=f,r.next=n,n.previous=r,--l;continue t}c+=f._.r,f=f.previous}while(u!==f.next);for(a.previous=r,a.next=n,r.next=n.previous=n=a,i=gu(r);(a=a.next)!==n;)(s=gu(a))<i&&(r=a,i=s);n=r.next}for(r=[n._],a=n;(a=a.next)!==n;)r.push(a._);for(a=fu(r,e),l=0;l<o;++l)r=t[l],r.x-=a.x,r.y-=a.y;return a.r}function wh(t){return Math.sqrt(t.value)}function Na(){var t=null,e=1,r=1,n=Zt;function a(o){let i=uu();return o.x=e/2,o.y=r/2,t?o.eachBefore(yu(t)).eachAfter(Da(n,.5,i)).eachBefore(vu(1)):o.eachBefore(yu(wh)).eachAfter(Da(Zt,1,i)).eachAfter(Da(n,o.r/Math.min(e,r),i)).eachBefore(vu(Math.min(e,r)/(2*o.r))),o}return a.radius=function(o){return arguments.length?(t=su(o),a):t},a.size=function(o){return arguments.length?(e=+o[0],r=+o[1],a):[e,r]},a.padding=function(o){return arguments.length?(n=typeof o=="function"?o:ee(+o),a):n},a}function yu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Da(t,e,r){return function(n){if(a=n.children){var a,o,i=a.length,s=t(n)*e||0,l;if(s)for(o=0;o<i;++o)a[o].r+=s;if(l=xu(a,r),s)for(o=0;o<i;++o)a[o].r-=s;n.r=l+s}}}function vu(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function _u(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function bu(t,e,r,n,a){for(var o=t.children,i,s=-1,l=o.length,u=t.value&&(n-e)/t.value;++s<l;)i=o[s],i.y0=r,i.y1=a,i.x0=e,i.x1=e+=i.value*u}function Th(t,e){return t.parent===e.parent?1:2}function Ia(t){var e=t.children;return e?e[0]:t.t}function Ra(t){var e=t.children;return e?e[e.length-1]:t.t}function Ch(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function Mh(t){for(var e=0,r=0,n=t.children,a=n.length,o;--a>=0;)o=n[a],o.z+=e,o.m+=e,e+=o.s+(r+=o.c)}function kh(t,e,r){return t.a.parent===e.parent?t.a:r}function Tn(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Tn.prototype=Object.create(we.prototype);function Ah(t){for(var e=new Tn(t,0),r,n=[e],a,o,i,s;r=n.pop();)if(o=r._.children)for(r.children=new Array(s=o.length),i=s-1;i>=0;--i)n.push(a=r.children[i]=new Tn(o[i],i)),a.parent=r;return(e.parent=new Tn(null,0)).children=[e],e}function Ea(){var t=Th,e=1,r=1,n=null;function a(u){var f=Ah(u);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(i),n)u.eachBefore(l);else{var h=u,c=u,p=u;u.eachBefore(function(M){M.x<h.x&&(h=M),M.x>c.x&&(c=M),M.depth>p.depth&&(p=M)});var x=h===c?1:t(h,c)/2,v=x-h.x,m=e/(c.x+x+v),d=r/(p.depth||1);u.eachBefore(function(M){M.x=(M.x+v)*m,M.y=M.depth*d})}return u}function o(u){var f=u.children,h=u.parent.children,c=u.i?h[u.i-1]:null;if(f){Mh(u);var p=(f[0].z+f[f.length-1].z)/2;c?(u.z=c.z+t(u._,c._),u.m=u.z-p):u.z=p}else c&&(u.z=c.z+t(u._,c._));u.parent.A=s(u,c,u.parent.A||h[0])}function i(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,f,h){if(f){for(var c=u,p=u,x=f,v=c.parent.children[0],m=c.m,d=p.m,M=x.m,S=v.m,b;x=Ra(x),c=Ia(c),x&&c;)v=Ia(v),p=Ra(p),p.a=u,b=x.z+M-c.z-m+t(x._,c._),b>0&&(Ch(kh(x,u,h),u,b),m+=b,d+=b),M+=x.m,m+=c.m,S+=v.m,d+=p.m;x&&!Ra(p)&&(p.t=x,p.m+=M-d),c&&!Ia(v)&&(v.t=c,v.m+=m-S,h=u)}return h}function l(u){u.x*=e,u.y=u.depth*r}return a.separation=function(u){return arguments.length?(t=u,a):t},a.size=function(u){return arguments.length?(n=!1,e=+u[0],r=+u[1],a):n?null:[e,r]},a.nodeSize=function(u){return arguments.length?(n=!0,e=+u[0],r=+u[1],a):n?[e,r]:null},a}function wu(t,e,r,n,a){for(var o=t.children,i,s=-1,l=o.length,u=t.value&&(a-r)/t.value;++s<l;)i=o[s],i.x0=e,i.x1=n,i.y0=r,i.y1=r+=i.value*u}var Sh=(1+Math.sqrt(5))/2;function Dh(t,e,r,n,a,o){for(var i=[],s=e.children,l,u,f=0,h=0,c=s.length,p,x,v=e.value,m,d,M,S,b,A,C;f<c;){p=a-r,x=o-n;do m=s[h++].value;while(!m&&h<c);for(d=M=m,A=Math.max(x/p,p/x)/(v*t),C=m*m*A,b=Math.max(M/C,C/d);h<c;++h){if(m+=u=s[h].value,u<d&&(d=u),u>M&&(M=u),C=m*m*A,S=Math.max(M/C,C/d),S>b){m-=u;break}b=S}i.push(l={value:m,dice:p<x,children:s.slice(f,h)}),l.dice?bu(l,r,n,a,v?n+=x*m/v:o):wu(l,r,n,v?r+=p*m/v:a,o),v-=m,f=h}return i}var Tu=function t(e){function r(n,a,o,i,s){Dh(e,n,a,o,i,s)}return r.ratio=function(n){return t((n=+n)>1?n:1)},r}(Sh);function Oa(){var t=Tu,e=!1,r=1,n=1,a=[0],o=Zt,i=Zt,s=Zt,l=Zt,u=Zt;function f(c){return c.x0=c.y0=0,c.x1=r,c.y1=n,c.eachBefore(h),a=[0],e&&c.eachBefore(_u),c}function h(c){var p=a[c.depth],x=c.x0+p,v=c.y0+p,m=c.x1-p,d=c.y1-p;m<x&&(x=m=(x+m)/2),d<v&&(v=d=(v+d)/2),c.x0=x,c.y0=v,c.x1=m,c.y1=d,c.children&&(p=a[c.depth+1]=o(c)/2,x+=u(c)-p,v+=i(c)-p,m-=s(c)-p,d-=l(c)-p,m<x&&(x=m=(x+m)/2),d<v&&(v=d=(v+d)/2),t(c,x,v,m,d))}return f.round=function(c){return arguments.length?(e=!!c,f):e},f.size=function(c){return arguments.length?(r=+c[0],n=+c[1],f):[r,n]},f.tile=function(c){return arguments.length?(t=Aa(c),f):t},f.padding=function(c){return arguments.length?f.paddingInner(c).paddingOuter(c):f.paddingInner()},f.paddingInner=function(c){return arguments.length?(o=typeof c=="function"?c:ee(+c),f):o},f.paddingOuter=function(c){return arguments.length?f.paddingTop(c).paddingRight(c).paddingBottom(c).paddingLeft(c):f.paddingTop()},f.paddingTop=function(c){return arguments.length?(i=typeof c=="function"?c:ee(+c),f):i},f.paddingRight=function(c){return arguments.length?(s=typeof c=="function"?c:ee(+c),f):s},f.paddingBottom=function(c){return arguments.length?(l=typeof c=="function"?c:ee(+c),f):l},f.paddingLeft=function(c){return arguments.length?(u=typeof c=="function"?c:ee(+c),f):u},f}function re(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var Cu=Symbol("implicit");function Cn(){var t=new Ee,e=[],r=[],n=Cu;function a(o){let i=t.get(o);if(i===void 0){if(n!==Cu)return n;t.set(o,i=e.push(o)-1)}return r[i%r.length]}return a.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Ee;for(let i of o)t.has(i)||t.set(i,e.push(i)-1);return a},a.range=function(o){return arguments.length?(r=Array.from(o),a):r.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.copy=function(){return Cn(e,r).unknown(n)},re.apply(a,arguments),a}function _r(){var t=Cn().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,o,i,s=!1,l=0,u=0,f=.5;delete t.unknown;function h(){var c=e().length,p=a<n,x=p?a:n,v=p?n:a;o=(v-x)/Math.max(1,c-l+u*2),s&&(o=Math.floor(o)),x+=(v-x-o*(c-l))*f,i=o*(1-l),s&&(x=Math.round(x),i=Math.round(i));var m=Xr(c).map(function(d){return x+o*d});return r(p?m.reverse():m)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([n,a]=c,n=+n,a=+a,h()):[n,a]},t.rangeRound=function(c){return[n,a]=c,n=+n,a=+a,s=!0,h()},t.bandwidth=function(){return i},t.step=function(){return o},t.round=function(c){return arguments.length?(s=!!c,h()):s},t.padding=function(c){return arguments.length?(l=Math.min(1,u=+c),h()):l},t.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),h()):l},t.paddingOuter=function(c){return arguments.length?(u=+c,h()):u},t.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},t.copy=function(){return _r(e(),[n,a]).round(s).paddingInner(l).paddingOuter(u).align(f)},re.apply(h(),arguments)}function $a(t){return function(){return t}}function Pa(t){return+t}var Mu=[0,1];function He(t){return t}function Fa(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:$a(isNaN(e)?NaN:.5)}function Nh(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Ih(t,e,r){var n=t[0],a=t[1],o=e[0],i=e[1];return a<n?(n=Fa(a,n),o=r(i,o)):(n=Fa(n,a),o=r(o,i)),function(s){return o(n(s))}}function Rh(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),o=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)a[i]=Fa(t[i],t[i+1]),o[i]=r(e[i],e[i+1]);return function(s){var l=Zn(t,s,1,n)-1;return o[l](a[l](s))}}function Mn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Eh(){var t=Mu,e=Mu,r=Bt,n,a,o,i=He,s,l,u;function f(){var c=Math.min(t.length,e.length);return i!==He&&(i=Nh(t[0],t[c-1])),s=c>2?Rh:Ih,l=u=null,h}function h(c){return c==null||isNaN(c=+c)?o:(l||(l=s(t.map(n),e,r)))(n(i(c)))}return h.invert=function(c){return i(a((u||(u=s(e,t.map(n),lt)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,Pa),f()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),f()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),r=ca,f()},h.clamp=function(c){return arguments.length?(i=c?!0:He,f()):i!==He},h.interpolate=function(c){return arguments.length?(r=c,f()):r},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,p){return n=c,a=p,f()}}function br(){return Eh()(He,He)}function za(t,e,r,n){var a=Oe(t,e,r),o;switch(n=te(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=Ma(a,i))&&(n.precision=o),_n(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=ka(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=Ca(a))&&(n.precision=o-(n.type==="%")*2);break}}return mt(n)}function Oh(t){var e=t.domain;return t.ticks=function(r){var n=e();return Ur(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return za(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,o=n.length-1,i=n[a],s=n[o],l,u,f=10;for(s<i&&(u=i,i=s,s=u,u=a,a=o,o=u);f-- >0;){if(u=Je(i,s,r),u===l)return n[a]=i,n[o]=s,e(n);if(u>0)i=Math.floor(i/u)*u,s=Math.ceil(s/u)*u;else if(u<0)i=Math.ceil(i*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function At(){var t=br();return t.copy=function(){return Mn(t,At())},re.apply(t,arguments),Oh(t)}function Ha(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],o=t[n],i;return o<a&&(i=r,r=n,n=i,i=a,a=o,o=i),t[r]=e.floor(a),t[n]=e.ceil(o),t}var La=new Date,Ua=new Date;function G(t,e,r,n){function a(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return a.floor=o=>(t(o=new Date(+o)),o),a.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),a.round=o=>{let i=a(o),s=a.ceil(o);return o-i<s-o?i:s},a.offset=(o,i)=>(e(o=new Date(+o),i==null?1:Math.floor(i)),o),a.range=(o,i,s)=>{let l=[];if(o=a.ceil(o),s=s==null?1:Math.floor(s),!(o<i)||!(s>0))return l;let u;do l.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<i);return l},a.filter=o=>G(i=>{if(i>=i)for(;t(i),!o(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;e(i,-1),!o(i););else for(;--s>=0;)for(;e(i,1),!o(i););}),r&&(a.count=(o,i)=>(La.setTime(+o),Ua.setTime(+i),t(La),t(Ua),Math.floor(r(La,Ua))),a.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?a.filter(n?i=>n(i)%o===0:i=>a.count(0,i)%o===0):a)),a}var wr=G(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);wr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?G(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):wr);var xb=wr.range;var zt=G(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*1e3)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),ku=zt.range;var Le=G(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getMinutes()),$h=Le.range,kn=G(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*6e4)},(t,e)=>(e-t)/6e4,t=>t.getUTCMinutes()),Ph=kn.range;var Ue=G(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getHours()),Fh=Ue.range,An=G(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*36e5)},(t,e)=>(e-t)/36e5,t=>t.getUTCHours()),zh=An.range;var Nt=G(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),Hh=Nt.range,Cr=G(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>t.getUTCDate()-1),Lh=Cr.range,Sn=G(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/864e5,t=>Math.floor(t/864e5)),Uh=Sn.range;function Me(t){return G(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}var It=Me(0),Xe=Me(1),Su=Me(2),Du=Me(3),ne=Me(4),Nu=Me(5),Iu=Me(6),Ru=It.range,Xh=Xe.range,Yh=Su.range,Vh=Du.range,qh=ne.range,Bh=Nu.range,Wh=Iu.range;function ke(t){return G(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/6048e5)}var Ae=ke(0),Ye=ke(1),Eu=ke(2),Ou=ke(3),ae=ke(4),$u=ke(5),Pu=ke(6),Fu=Ae.range,Zh=Ye.range,Gh=Eu.range,Qh=Ou.range,jh=ae.range,Jh=$u.range,Kh=Pu.range;var oe=G(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),tp=oe.range,Dn=G(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),ep=Dn.range;var bt=G(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());bt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:G(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});var rp=bt.range,Rt=G(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Rt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:G(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});var np=Rt.range;function Hu(t,e,r,n,a,o){let i=[[zt,1,1e3],[zt,5,5*1e3],[zt,15,15*1e3],[zt,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[a,1,36e5],[a,3,3*36e5],[a,6,6*36e5],[a,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[e,1,2592e6],[e,3,3*2592e6],[t,1,31536e6]];function s(u,f,h){let c=f<u;c&&([u,f]=[f,u]);let p=h&&typeof h.range=="function"?h:l(u,f,h),x=p?p.range(u,+f+1):[];return c?x.reverse():x}function l(u,f,h){let c=Math.abs(f-u)/h,p=he(([,,m])=>m).right(i,c);if(p===i.length)return t.every(Oe(u/31536e6,f/31536e6,h));if(p===0)return wr.every(Math.max(Oe(u,f,h),1));let[x,v]=i[c/i[p-1][2]<i[p][2]/c?p-1:p];return x.every(v)}return[s,l]}var[op,ip]=Hu(Rt,Dn,Ae,Sn,An,kn),[Xa,Ya]=Hu(bt,oe,It,Nt,Ue,Le);function Va(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function qa(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Mr(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Ba(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,o=t.days,i=t.shortDays,s=t.months,l=t.shortMonths,u=kr(a),f=Ar(a),h=kr(o),c=Ar(o),p=kr(i),x=Ar(i),v=kr(s),m=Ar(s),d=kr(l),M=Ar(l),S={a:R,A:z,b:H,B:L,c:null,d:qu,e:qu,f:Dp,g:Hp,G:Up,H:kp,I:Ap,j:Sp,L:Qu,m:Np,M:Ip,p:V,q:W,Q:Zu,s:Gu,S:Rp,u:Ep,U:Op,V:$p,w:Pp,W:Fp,x:null,X:null,y:zp,Y:Lp,Z:Xp,"%":Wu},b={a:ht,A:tt,b:et,B:gt,c:null,d:Bu,e:Bu,f:Bp,g:rm,G:am,H:Yp,I:Vp,j:qp,L:Ju,m:Wp,M:Zp,p:ut,q:xt,Q:Zu,s:Gu,S:Gp,u:Qp,U:jp,V:Jp,w:Kp,W:tm,x:null,X:null,y:em,Y:nm,Z:om,"%":Wu},A={a:O,A:y,b:N,B:w,c:g,d:Yu,e:Yu,f:wp,g:Xu,G:Uu,H:Vu,I:Vu,j:yp,L:bp,m:xp,M:vp,p:I,q:gp,Q:Cp,s:Mp,S:_p,u:fp,U:hp,V:pp,w:cp,W:mp,x:k,X:T,y:Xu,Y:Uu,Z:dp,"%":Tp};S.x=C(r,S),S.X=C(n,S),S.c=C(e,S),b.x=C(r,b),b.X=C(n,b),b.c=C(e,b);function C($,U){return function(Y){var D=[],Tt=-1,Q=0,Mt=$.length,kt,se,io;for(Y instanceof Date||(Y=new Date(+Y));++Tt<Mt;)$.charCodeAt(Tt)===37&&(D.push($.slice(Q,Tt)),(se=Lu[kt=$.charAt(++Tt)])!=null?kt=$.charAt(++Tt):se=kt==="e"?" ":"0",(io=U[kt])&&(kt=io(Y,se)),D.push(kt),Q=Tt+1);return D.push($.slice(Q,Tt)),D.join("")}}function F($,U){return function(Y){var D=Mr(1900,void 0,1),Tt=E(D,$,Y+="",0),Q,Mt;if(Tt!=Y.length)return null;if("Q"in D)return new Date(D.Q);if("s"in D)return new Date(D.s*1e3+("L"in D?D.L:0));if(U&&!("Z"in D)&&(D.Z=0),"p"in D&&(D.H=D.H%12+D.p*12),D.m===void 0&&(D.m="q"in D?D.q:0),"V"in D){if(D.V<1||D.V>53)return null;"w"in D||(D.w=1),"Z"in D?(Q=qa(Mr(D.y,0,1)),Mt=Q.getUTCDay(),Q=Mt>4||Mt===0?Ye.ceil(Q):Ye(Q),Q=Cr.offset(Q,(D.V-1)*7),D.y=Q.getUTCFullYear(),D.m=Q.getUTCMonth(),D.d=Q.getUTCDate()+(D.w+6)%7):(Q=Va(Mr(D.y,0,1)),Mt=Q.getDay(),Q=Mt>4||Mt===0?Xe.ceil(Q):Xe(Q),Q=Nt.offset(Q,(D.V-1)*7),D.y=Q.getFullYear(),D.m=Q.getMonth(),D.d=Q.getDate()+(D.w+6)%7)}else("W"in D||"U"in D)&&("w"in D||(D.w="u"in D?D.u%7:"W"in D?1:0),Mt="Z"in D?qa(Mr(D.y,0,1)).getUTCDay():Va(Mr(D.y,0,1)).getDay(),D.m=0,D.d="W"in D?(D.w+6)%7+D.W*7-(Mt+5)%7:D.w+D.U*7-(Mt+6)%7);return"Z"in D?(D.H+=D.Z/100|0,D.M+=D.Z%100,qa(D)):Va(D)}}function E($,U,Y,D){for(var Tt=0,Q=U.length,Mt=Y.length,kt,se;Tt<Q;){if(D>=Mt)return-1;if(kt=U.charCodeAt(Tt++),kt===37){if(kt=U.charAt(Tt++),se=A[kt in Lu?U.charAt(Tt++):kt],!se||(D=se($,Y,D))<0)return-1}else if(kt!=Y.charCodeAt(D++))return-1}return D}function I($,U,Y){var D=u.exec(U.slice(Y));return D?($.p=f.get(D[0].toLowerCase()),Y+D[0].length):-1}function O($,U,Y){var D=p.exec(U.slice(Y));return D?($.w=x.get(D[0].toLowerCase()),Y+D[0].length):-1}function y($,U,Y){var D=h.exec(U.slice(Y));return D?($.w=c.get(D[0].toLowerCase()),Y+D[0].length):-1}function N($,U,Y){var D=d.exec(U.slice(Y));return D?($.m=M.get(D[0].toLowerCase()),Y+D[0].length):-1}function w($,U,Y){var D=v.exec(U.slice(Y));return D?($.m=m.get(D[0].toLowerCase()),Y+D[0].length):-1}function g($,U,Y){return E($,e,U,Y)}function k($,U,Y){return E($,r,U,Y)}function T($,U,Y){return E($,n,U,Y)}function R($){return i[$.getDay()]}function z($){return o[$.getDay()]}function H($){return l[$.getMonth()]}function L($){return s[$.getMonth()]}function V($){return a[+($.getHours()>=12)]}function W($){return 1+~~($.getMonth()/3)}function ht($){return i[$.getUTCDay()]}function tt($){return o[$.getUTCDay()]}function et($){return l[$.getUTCMonth()]}function gt($){return s[$.getUTCMonth()]}function ut($){return a[+($.getUTCHours()>=12)]}function xt($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var U=C($+="",S);return U.toString=function(){return $},U},parse:function($){var U=F($+="",!1);return U.toString=function(){return $},U},utcFormat:function($){var U=C($+="",b);return U.toString=function(){return $},U},utcParse:function($){var U=F($+="",!0);return U.toString=function(){return $},U}}}var Lu={"-":"",_:" ",0:"0"},st=/^\s*\d+/,sp=/^%/,up=/[\\^$*+?|[\]().{}]/g;function q(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",o=a.length;return n+(o<r?new Array(r-o+1).join(e)+a:a)}function lp(t){return t.replace(up,"\\$&")}function kr(t){return new RegExp("^(?:"+t.map(lp).join("|")+")","i")}function Ar(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function cp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function fp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function hp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function pp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function mp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function Uu(t,e,r){var n=st.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Xu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function dp(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function gp(t,e,r){var n=st.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function xp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Yu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function yp(t,e,r){var n=st.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function Vu(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function vp(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function _p(t,e,r){var n=st.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function bp(t,e,r){var n=st.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function wp(t,e,r){var n=st.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Tp(t,e,r){var n=sp.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Cp(t,e,r){var n=st.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function Mp(t,e,r){var n=st.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function qu(t,e){return q(t.getDate(),e,2)}function kp(t,e){return q(t.getHours(),e,2)}function Ap(t,e){return q(t.getHours()%12||12,e,2)}function Sp(t,e){return q(1+Nt.count(bt(t),t),e,3)}function Qu(t,e){return q(t.getMilliseconds(),e,3)}function Dp(t,e){return Qu(t,e)+"000"}function Np(t,e){return q(t.getMonth()+1,e,2)}function Ip(t,e){return q(t.getMinutes(),e,2)}function Rp(t,e){return q(t.getSeconds(),e,2)}function Ep(t){var e=t.getDay();return e===0?7:e}function Op(t,e){return q(It.count(bt(t)-1,t),e,2)}function ju(t){var e=t.getDay();return e>=4||e===0?ne(t):ne.ceil(t)}function $p(t,e){return t=ju(t),q(ne.count(bt(t),t)+(bt(t).getDay()===4),e,2)}function Pp(t){return t.getDay()}function Fp(t,e){return q(Xe.count(bt(t)-1,t),e,2)}function zp(t,e){return q(t.getFullYear()%100,e,2)}function Hp(t,e){return t=ju(t),q(t.getFullYear()%100,e,2)}function Lp(t,e){return q(t.getFullYear()%1e4,e,4)}function Up(t,e){var r=t.getDay();return t=r>=4||r===0?ne(t):ne.ceil(t),q(t.getFullYear()%1e4,e,4)}function Xp(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+q(e/60|0,"0",2)+q(e%60,"0",2)}function Bu(t,e){return q(t.getUTCDate(),e,2)}function Yp(t,e){return q(t.getUTCHours(),e,2)}function Vp(t,e){return q(t.getUTCHours()%12||12,e,2)}function qp(t,e){return q(1+Cr.count(Rt(t),t),e,3)}function Ju(t,e){return q(t.getUTCMilliseconds(),e,3)}function Bp(t,e){return Ju(t,e)+"000"}function Wp(t,e){return q(t.getUTCMonth()+1,e,2)}function Zp(t,e){return q(t.getUTCMinutes(),e,2)}function Gp(t,e){return q(t.getUTCSeconds(),e,2)}function Qp(t){var e=t.getUTCDay();return e===0?7:e}function jp(t,e){return q(Ae.count(Rt(t)-1,t),e,2)}function Ku(t){var e=t.getUTCDay();return e>=4||e===0?ae(t):ae.ceil(t)}function Jp(t,e){return t=Ku(t),q(ae.count(Rt(t),t)+(Rt(t).getUTCDay()===4),e,2)}function Kp(t){return t.getUTCDay()}function tm(t,e){return q(Ye.count(Rt(t)-1,t),e,2)}function em(t,e){return q(t.getUTCFullYear()%100,e,2)}function rm(t,e){return t=Ku(t),q(t.getUTCFullYear()%100,e,2)}function nm(t,e){return q(t.getUTCFullYear()%1e4,e,4)}function am(t,e){var r=t.getUTCDay();return t=r>=4||r===0?ae(t):ae.ceil(t),q(t.getUTCFullYear()%1e4,e,4)}function om(){return"+0000"}function Wu(){return"%"}function Zu(t){return+t}function Gu(t){return Math.floor(+t/1e3)}var Ve,dt,tl,el,rl;Wa({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wa(t){return Ve=Ba(t),dt=Ve.format,tl=Ve.parse,el=Ve.utcFormat,rl=Ve.utcParse,Ve}function im(t){return new Date(t)}function sm(t){return t instanceof Date?+t:+new Date(+t)}function nl(t,e,r,n,a,o,i,s,l,u){var f=br(),h=f.invert,c=f.domain,p=u(".%L"),x=u(":%S"),v=u("%I:%M"),m=u("%I %p"),d=u("%a %d"),M=u("%b %d"),S=u("%B"),b=u("%Y");function A(C){return(l(C)<C?p:s(C)<C?x:i(C)<C?v:o(C)<C?m:n(C)<C?a(C)<C?d:M:r(C)<C?S:b)(C)}return f.invert=function(C){return new Date(h(C))},f.domain=function(C){return arguments.length?c(Array.from(C,sm)):c().map(im)},f.ticks=function(C){var F=c();return t(F[0],F[F.length-1],C??10)},f.tickFormat=function(C,F){return F==null?A:u(F)},f.nice=function(C){var F=c();return(!C||typeof C.range!="function")&&(C=e(F[0],F[F.length-1],C??10)),C?c(Ha(F,C)):f},f.copy=function(){return Mn(f,nl(t,e,r,n,a,o,i,s,l,u))},f}function Sr(){return re.apply(nl(Xa,Ya,bt,oe,It,Nt,Ue,Le,zt,dt).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function K(t){return function(){return t}}var Za=Math.abs,ft=Math.atan2,ie=Math.cos,al=Math.max,Nn=Math.min,Et=Math.sin,Se=Math.sqrt,wt=1e-12,qe=Math.PI,Dr=qe/2,Be=2*qe;function ol(t){return t>1?0:t<-1?qe:Math.acos(t)}function Ga(t){return t>=1?Dr:t<=-1?-Dr:Math.asin(t)}function In(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new _e(e)}function um(t){return t.innerRadius}function lm(t){return t.outerRadius}function cm(t){return t.startAngle}function fm(t){return t.endAngle}function hm(t){return t&&t.padAngle}function pm(t,e,r,n,a,o,i,s){var l=r-t,u=n-e,f=i-a,h=s-o,c=h*l-f*u;if(!(c*c<wt))return c=(f*(e-o)-h*(t-a))/c,[t+c*l,e+c*u]}function Rn(t,e,r,n,a,o,i){var s=t-r,l=e-n,u=(i?o:-o)/Se(s*s+l*l),f=u*l,h=-u*s,c=t+f,p=e+h,x=r+f,v=n+h,m=(c+x)/2,d=(p+v)/2,M=x-c,S=v-p,b=M*M+S*S,A=a-o,C=c*v-x*p,F=(S<0?-1:1)*Se(al(0,A*A*b-C*C)),E=(C*S-M*F)/b,I=(-C*M-S*F)/b,O=(C*S+M*F)/b,y=(-C*M+S*F)/b,N=E-m,w=I-d,g=O-m,k=y-d;return N*N+w*w>g*g+k*k&&(E=O,I=y),{cx:E,cy:I,x01:-f,y01:-h,x11:E*(a/A-1),y11:I*(a/A-1)}}function Qa(){var t=um,e=lm,r=K(0),n=null,a=cm,o=fm,i=hm,s=null,l=In(u);function u(){var f,h,c=+t.apply(this,arguments),p=+e.apply(this,arguments),x=a.apply(this,arguments)-Dr,v=o.apply(this,arguments)-Dr,m=Za(v-x),d=v>x;if(s||(s=f=l()),p<c&&(h=p,p=c,c=h),!(p>wt))s.moveTo(0,0);else if(m>Be-wt)s.moveTo(p*ie(x),p*Et(x)),s.arc(0,0,p,x,v,!d),c>wt&&(s.moveTo(c*ie(v),c*Et(v)),s.arc(0,0,c,v,x,d));else{var M=x,S=v,b=x,A=v,C=m,F=m,E=i.apply(this,arguments)/2,I=E>wt&&(n?+n.apply(this,arguments):Se(c*c+p*p)),O=Nn(Za(p-c)/2,+r.apply(this,arguments)),y=O,N=O,w,g;if(I>wt){var k=Ga(I/c*Et(E)),T=Ga(I/p*Et(E));(C-=k*2)>wt?(k*=d?1:-1,b+=k,A-=k):(C=0,b=A=(x+v)/2),(F-=T*2)>wt?(T*=d?1:-1,M+=T,S-=T):(F=0,M=S=(x+v)/2)}var R=p*ie(M),z=p*Et(M),H=c*ie(A),L=c*Et(A);if(O>wt){var V=p*ie(S),W=p*Et(S),ht=c*ie(b),tt=c*Et(b),et;if(m<qe)if(et=pm(R,z,ht,tt,V,W,H,L)){var gt=R-et[0],ut=z-et[1],xt=V-et[0],$=W-et[1],U=1/Et(ol((gt*xt+ut*$)/(Se(gt*gt+ut*ut)*Se(xt*xt+$*$)))/2),Y=Se(et[0]*et[0]+et[1]*et[1]);y=Nn(O,(c-Y)/(U-1)),N=Nn(O,(p-Y)/(U+1))}else y=N=0}F>wt?N>wt?(w=Rn(ht,tt,R,z,p,N,d),g=Rn(V,W,H,L,p,N,d),s.moveTo(w.cx+w.x01,w.cy+w.y01),N<O?s.arc(w.cx,w.cy,N,ft(w.y01,w.x01),ft(g.y01,g.x01),!d):(s.arc(w.cx,w.cy,N,ft(w.y01,w.x01),ft(w.y11,w.x11),!d),s.arc(0,0,p,ft(w.cy+w.y11,w.cx+w.x11),ft(g.cy+g.y11,g.cx+g.x11),!d),s.arc(g.cx,g.cy,N,ft(g.y11,g.x11),ft(g.y01,g.x01),!d))):(s.moveTo(R,z),s.arc(0,0,p,M,S,!d)):s.moveTo(R,z),!(c>wt)||!(C>wt)?s.lineTo(H,L):y>wt?(w=Rn(H,L,V,W,c,-y,d),g=Rn(R,z,ht,tt,c,-y,d),s.lineTo(w.cx+w.x01,w.cy+w.y01),y<O?s.arc(w.cx,w.cy,y,ft(w.y01,w.x01),ft(g.y01,g.x01),!d):(s.arc(w.cx,w.cy,y,ft(w.y01,w.x01),ft(w.y11,w.x11),!d),s.arc(0,0,c,ft(w.cy+w.y11,w.cx+w.x11),ft(g.cy+g.y11,g.cx+g.x11),d),s.arc(g.cx,g.cy,y,ft(g.y11,g.x11),ft(g.y01,g.x01),!d))):s.arc(0,0,c,A,b,d)}if(s.closePath(),f)return s=null,f+""||null}return u.centroid=function(){var f=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-qe/2;return[ie(h)*f,Et(h)*f]},u.innerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:K(+f),u):t},u.outerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:K(+f),u):e},u.cornerRadius=function(f){return arguments.length?(r=typeof f=="function"?f:K(+f),u):r},u.padRadius=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:K(+f),u):n},u.startAngle=function(f){return arguments.length?(a=typeof f=="function"?f:K(+f),u):a},u.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:K(+f),u):o},u.padAngle=function(f){return arguments.length?(i=typeof f=="function"?f:K(+f),u):i},u.context=function(f){return arguments.length?(s=f??null,u):s},u}var Tw=Array.prototype.slice;function En(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function il(t){this._context=t}il.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function sl(t){return new il(t)}function ul(t){return t[0]}function ll(t){return t[1]}function We(t,e){var r=K(!0),n=null,a=sl,o=null,i=In(s);t=typeof t=="function"?t:t===void 0?ul:K(t),e=typeof e=="function"?e:e===void 0?ll:K(e);function s(l){var u,f=(l=En(l)).length,h,c=!1,p;for(n==null&&(o=a(p=i())),u=0;u<=f;++u)!(u<f&&r(h=l[u],u,l))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,u,l),+e(h,u,l));if(p)return o=null,p+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:K(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:K(+l),s):e},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:K(!!l),s):r},s.curve=function(l){return arguments.length?(a=l,n!=null&&(o=a(n)),s):a},s.context=function(l){return arguments.length?(l==null?n=o=null:o=a(n=l),s):n},s}function cl(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function fl(t){return t}function ja(){var t=fl,e=cl,r=null,n=K(0),a=K(Be),o=K(0);function i(s){var l,u=(s=En(s)).length,f,h,c=0,p=new Array(u),x=new Array(u),v=+n.apply(this,arguments),m=Math.min(Be,Math.max(-Be,a.apply(this,arguments)-v)),d,M=Math.min(Math.abs(m)/u,o.apply(this,arguments)),S=M*(m<0?-1:1),b;for(l=0;l<u;++l)(b=x[p[l]=l]=+t(s[l],l,s))>0&&(c+=b);for(e!=null?p.sort(function(A,C){return e(x[A],x[C])}):r!=null&&p.sort(function(A,C){return r(s[A],s[C])}),l=0,h=c?(m-u*S)/c:0;l<u;++l,v=d)f=p[l],b=x[f],d=v+(b>0?b*h:0)+S,x[f]={data:s[f],index:l,value:b,startAngle:v,endAngle:d,padAngle:M};return x}return i.value=function(s){return arguments.length?(t=typeof s=="function"?s:K(+s),i):t},i.sortValues=function(s){return arguments.length?(e=s,r=null,i):e},i.sort=function(s){return arguments.length?(r=s,e=null,i):r},i.startAngle=function(s){return arguments.length?(n=typeof s=="function"?s:K(+s),i):n},i.endAngle=function(s){return arguments.length?(a=typeof s=="function"?s:K(+s),i):a},i.padAngle=function(s){return arguments.length?(o=typeof s=="function"?s:K(+s),i):o},i}var Nr=t=>()=>t;function Ja(t,{sourceEvent:e,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Ot(t,e,r){this.k=t,this.x=e,this.y=r}Ot.prototype={constructor:Ot,scale:function(t){return t===1?this:new Ot(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ot(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ir=new Ot(1,0,0);Ka.prototype=Ot.prototype;function Ka(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ir;return t.__zoom}function On(t){t.stopImmediatePropagation()}function Ze(t){t.preventDefault(),t.stopImmediatePropagation()}function mm(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function dm(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function hl(){return this.__zoom||Ir}function gm(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function xm(){return navigator.maxTouchPoints||"ontouchstart"in this}function ym(t,e,r){var n=t.invertX(e[0][0])-r[0][0],a=t.invertX(e[1][0])-r[1][0],o=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function to(){var t=mm,e=dm,r=ym,n=gm,a=xm,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=ma,u=rr("start","zoom","end"),f,h,c,p=500,x=150,v=0,m=10;function d(g){g.property("__zoom",hl).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",O).filter(a).on("touchstart.zoom",y).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",w).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.transform=function(g,k,T,R){var z=g.selection?g.selection():g;z.property("__zoom",hl),g!==z?A(g,k,T,R):z.interrupt().each(function(){C(this,arguments).event(R).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},d.scaleBy=function(g,k,T,R){d.scaleTo(g,function(){var z=this.__zoom.k,H=typeof k=="function"?k.apply(this,arguments):k;return z*H},T,R)},d.scaleTo=function(g,k,T,R){d.transform(g,function(){var z=e.apply(this,arguments),H=this.__zoom,L=T==null?b(z):typeof T=="function"?T.apply(this,arguments):T,V=H.invert(L),W=typeof k=="function"?k.apply(this,arguments):k;return r(S(M(H,W),L,V),z,i)},T,R)},d.translateBy=function(g,k,T,R){d.transform(g,function(){return r(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof T=="function"?T.apply(this,arguments):T),e.apply(this,arguments),i)},null,R)},d.translateTo=function(g,k,T,R,z){d.transform(g,function(){var H=e.apply(this,arguments),L=this.__zoom,V=R==null?b(H):typeof R=="function"?R.apply(this,arguments):R;return r(Ir.translate(V[0],V[1]).scale(L.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof T=="function"?-T.apply(this,arguments):-T),H,i)},R,z)};function M(g,k){return k=Math.max(o[0],Math.min(o[1],k)),k===g.k?g:new Ot(k,g.x,g.y)}function S(g,k,T){var R=k[0]-T[0]*g.k,z=k[1]-T[1]*g.k;return R===g.x&&z===g.y?g:new Ot(g.k,R,z)}function b(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function A(g,k,T,R){g.on("start.zoom",function(){C(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(R).end()}).tween("zoom",function(){var z=this,H=arguments,L=C(z,H).event(R),V=e.apply(z,H),W=T==null?b(V):typeof T=="function"?T.apply(z,H):T,ht=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),tt=z.__zoom,et=typeof k=="function"?k.apply(z,H):k,gt=l(tt.invert(W).concat(ht/tt.k),et.invert(W).concat(ht/et.k));return function(ut){if(ut===1)ut=et;else{var xt=gt(ut),$=ht/xt[2];ut=new Ot($,W[0]-xt[0]*$,W[1]-xt[1]*$)}L.zoom(null,ut)}})}function C(g,k,T){return!T&&g.__zooming||new F(g,k)}function F(g,k){this.that=g,this.args=k,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,k),this.taps=0}F.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,k){return this.mouse&&g!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var k=Z(this.that).datum();u.call(g,this.that,new Ja(g,{sourceEvent:this.sourceEvent,target:d,type:g,transform:this.that.__zoom,dispatch:u}),k)}};function E(g,...k){if(!t.apply(this,arguments))return;var T=C(this,k).event(g),R=this.__zoom,z=Math.max(o[0],Math.min(o[1],R.k*Math.pow(2,n.apply(this,arguments)))),H=qt(g);if(T.wheel)(T.mouse[0][0]!==H[0]||T.mouse[0][1]!==H[1])&&(T.mouse[1]=R.invert(T.mouse[0]=H)),clearTimeout(T.wheel);else{if(R.k===z)return;T.mouse=[H,R.invert(H)],Kt(this),T.start()}Ze(g),T.wheel=setTimeout(L,x),T.zoom("mouse",r(S(M(R,z),T.mouse[0],T.mouse[1]),T.extent,i));function L(){T.wheel=null,T.end()}}function I(g,...k){if(c||!t.apply(this,arguments))return;var T=g.currentTarget,R=C(this,k,!0).event(g),z=Z(g.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",ht,!0),H=qt(g,T),L=g.clientX,V=g.clientY;na(g.view),On(g),R.mouse=[H,this.__zoom.invert(H)],Kt(this),R.start();function W(tt){if(Ze(tt),!R.moved){var et=tt.clientX-L,gt=tt.clientY-V;R.moved=et*et+gt*gt>v}R.event(tt).zoom("mouse",r(S(R.that.__zoom,R.mouse[0]=qt(tt,T),R.mouse[1]),R.extent,i))}function ht(tt){z.on("mousemove.zoom mouseup.zoom",null),aa(tt.view,R.moved),Ze(tt),R.event(tt).end()}}function O(g,...k){if(t.apply(this,arguments)){var T=this.__zoom,R=qt(g.changedTouches?g.changedTouches[0]:g,this),z=T.invert(R),H=T.k*(g.shiftKey?.5:2),L=r(S(M(T,H),R,z),e.apply(this,k),i);Ze(g),s>0?Z(this).transition().duration(s).call(A,L,R,g):Z(this).call(d.transform,L,R,g)}}function y(g,...k){if(t.apply(this,arguments)){var T=g.touches,R=T.length,z=C(this,k,g.changedTouches.length===R).event(g),H,L,V,W;for(On(g),L=0;L<R;++L)V=T[L],W=qt(V,this),W=[W,this.__zoom.invert(W),V.identifier],z.touch0?!z.touch1&&z.touch0[2]!==W[2]&&(z.touch1=W,z.taps=0):(z.touch0=W,H=!0,z.taps=1+!!f);f&&(f=clearTimeout(f)),H&&(z.taps<2&&(h=W[0],f=setTimeout(function(){f=null},p)),Kt(this),z.start())}}function N(g,...k){if(this.__zooming){var T=C(this,k).event(g),R=g.changedTouches,z=R.length,H,L,V,W;for(Ze(g),H=0;H<z;++H)L=R[H],V=qt(L,this),T.touch0&&T.touch0[2]===L.identifier?T.touch0[0]=V:T.touch1&&T.touch1[2]===L.identifier&&(T.touch1[0]=V);if(L=T.that.__zoom,T.touch1){var ht=T.touch0[0],tt=T.touch0[1],et=T.touch1[0],gt=T.touch1[1],ut=(ut=et[0]-ht[0])*ut+(ut=et[1]-ht[1])*ut,xt=(xt=gt[0]-tt[0])*xt+(xt=gt[1]-tt[1])*xt;L=M(L,Math.sqrt(ut/xt)),V=[(ht[0]+et[0])/2,(ht[1]+et[1])/2],W=[(tt[0]+gt[0])/2,(tt[1]+gt[1])/2]}else if(T.touch0)V=T.touch0[0],W=T.touch0[1];else return;T.zoom("touch",r(S(L,V,W),T.extent,i))}}function w(g,...k){if(this.__zooming){var T=C(this,k).event(g),R=g.changedTouches,z=R.length,H,L;for(On(g),c&&clearTimeout(c),c=setTimeout(function(){c=null},p),H=0;H<z;++H)L=R[H],T.touch0&&T.touch0[2]===L.identifier?delete T.touch0:T.touch1&&T.touch1[2]===L.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(L=qt(L,this),Math.hypot(h[0]-L[0],h[1]-L[1])<m)){var V=Z(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return d.wheelDelta=function(g){return arguments.length?(n=typeof g=="function"?g:Nr(+g),d):n},d.filter=function(g){return arguments.length?(t=typeof g=="function"?g:Nr(!!g),d):t},d.touchable=function(g){return arguments.length?(a=typeof g=="function"?g:Nr(!!g),d):a},d.extent=function(g){return arguments.length?(e=typeof g=="function"?g:Nr([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),d):e},d.scaleExtent=function(g){return arguments.length?(o[0]=+g[0],o[1]=+g[1],d):[o[0],o[1]]},d.translateExtent=function(g){return arguments.length?(i[0][0]=+g[0][0],i[1][0]=+g[1][0],i[0][1]=+g[0][1],i[1][1]=+g[1][1],d):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},d.constrain=function(g){return arguments.length?(r=g,d):r},d.duration=function(g){return arguments.length?(s=+g,d):s},d.interpolate=function(g){return arguments.length?(l=g,d):l},d.on=function(){var g=u.on.apply(u,arguments);return g===u?d:g},d.clickDistance=function(g){return arguments.length?(v=(g=+g)*g,d):Math.sqrt(v)},d.tapDistance=function(g){return arguments.length?(m=+g,d):m},d}var X=(()=>{class t{static{this.svgNS="http://www.w3.org/2000/svg"}static get bodyFont(){if(!this._bodyFont){let r=getComputedStyle(document.body);this._bodyFont=`${r.fontSize} ${r.fontFamily}`}return this._bodyFont}static chartSize(r){if(!r)return{width:0,height:0};let n=r.parentNode;if(!n)return{width:0,height:0};let a=getComputedStyle(n);return{height:Math.round(n.clientHeight-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)),width:Math.round(n.clientWidth-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight))}}static xScale(r,n,a=!0,o=!1){let i;return o?i=Sr().domain(pe(r)):i=At().domain(pe(r)),a?i.rangeRound([0,n]):i.range([0,n]),i}static yScale(r,n,a=!0,o=!1){let i;return o?i=Sr().domain([0,Math.max(...r)]):i=At().domain([0,Math.max(...r)]),a?i.rangeRound([n,0]):i.range([n,0]),i}static colorScale(r,n){return n instanceof Array?At().domain(pe(r)).range([n[0],n[1]]):At().domain(pe(r)).rangeRound([0,n-1])}static arcTween(r,n,a){let o=Bt({startAngle:r.startAngle,endAngle:r.endAngle},{startAngle:n.startAngle,endAngle:n.endAngle});return i=>a(o(i))}static transitionsComplete(r,n){let a=0;r.each(()=>{a++}).on("end",()=>{a--,a===0&&n()})}static convertData(r,n){return r.map(a=>{let o=typeof a[n.value.toString()]=="number"?a[n.value.toString()]:a[n.value.toString()]instanceof Date?a[n.value.toString()].valueOf():parseInt(a[n.value.toString()],10);return{id:a[n.id],value:o,category:ot(n.category)?a[n.category]:void 0,label:ot(n.label)?a[n.label]:void 0,color:ot(n.color)?a[n.color]:void 0}})}static getTextWidth(r,n=this.bodyFont){if(!ot(r)||!r.length)return 0;let o=document.createElement("canvas").getContext("2d");return o.font=n,Math.ceil(o.measureText(r).width)}static getMaxTextWidth(r,n){if(!ot(r)||!r.length)return 0;let a=0;return r.forEach(o=>{let i=this.getTextWidth(o,n);i>a&&(a=i)}),a}static trimText(r,n,a=!0,o=this.bodyFont){if(!ot(r)||!r.length)return r;let s=document.createElement("canvas").getContext("2d");s.font=o;let l=Math.ceil(s.measureText(r).width);for(;l>n;)a?r=`${r.substring(0,r.length-4)}...`:r=r.slice(0,-1),l=Math.ceil(s.measureText(r).width);return r}static wrapText(r,n,a=this.bodyFont){if(!ot(r)||!r.length)return r;let o=[],s=document.createElement("canvas").getContext("2d");s.font=a;let l=Math.ceil(s.measureText(r).width);if(l<n)return[r];let u="";for(let f of r)u+=f,l=Math.ceil(s.measureText(u).width),l>n&&(o.push(u.slice(0,-1)),u=f);return u.length&&o.push(u),o}}return t})();var $n=class{static buildBarChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.valueTicks=e.valueTicks||5;let a=0,o=Math.max(...e.data.map(b=>b.value))||0,i=Z(e.container),s=e.palette&&e.palette.length?X.colorScale(e.data.map(b=>b.value),e.palette.length===2?e.palette:e.palette.length):void 0,l=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,u=yt(e.valueTickValues)?e.valueTickValues:e.data.map(b=>ot(l)?l(b.value):b.value.toString()),f=ot(e.barPadding)?e.barPadding:20,h=ot(e.barWidth)?e.barWidth:20,c={top:16,bottom:16,left:16+X.getMaxTextWidth(u,`${_.strings.FONT_SIZE_SMALL} ${_.strings.FONT_FAMILY}`),right:16},p=X.chartSize(e.container);p.width=e.data.length*(h+f);let x=X.yScale(e.data.map(b=>b.value),p.height-c.top-c.bottom).nice(),v=er(x).ticks(e.valueTicks).tickSize(-p.width);if(yt(e.valueTickValues)){let b=At().domain([0,e.valueTickValues.length-1]).range([a,o]);e.valueTicks=[],e.valueTickValues?.forEach((A,C)=>{e.valueTicks.push(b(C))}),v.tickFormat((A,C)=>e.valueTickValues[C]||"")}yt(e.valueTicks)?v.tickValues(e.valueTicks):v.ticks(e.valueTicks),e.valueFormat?.length&&v.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&v.tickFormat(dt(e.valueDateFormat));let m=i.select(`g.${_.classes.CHART_ROOT}`);if(m.node()||(m=i.append("g").classed(_.classes.CHART_ROOT,!0),m.append("g").classed(_.classes.CHART_YAXIS,!0),m.append("g").classed(_.classes.CHART_XAXIS,!0),m.append("g").classed(`${_.classes.CHART_PREFIX}__chart`,!0).classed(`${_.classes.CHART_PREFIX}__bar`,!0)),i.attr("width",p.width+c.left),i.attr("height",p.height),i.select(`g.${_.classes.CHART_YAXIS}`).attr("transform",`translate(${c.left}, ${c.top})`).call(v),i.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${c.left}, ${p.height-c.bottom})`),yt(e.categoryTickValues)&&e.categoryTickValues?.length){let b=tr(_r().domain(e.categoryTickValues).range([0,p.width]));i.select(`g.${_.classes.CHART_XAXIS}`).call(b)}let d=m.select(`g.${_.classes.CHART_PREFIX}__bar`);d.attr("transform",`translate(${c.left}, -${c.bottom-c.top})`);let M=d.selectAll("rect").data(e.data,b=>b.id);M.exit().transition().duration(_.numbers.TRANSITION_DURATION).attr("y",b=>p.height-c.top).attr("height",0),M.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let S=M.enter();S.append("rect").attr("x",(b,A)=>A*(h+f)+f/2).attr("y",p.height-c.top).attr("width",b=>h).attr("height",0).merge(M).attr("id",b=>`${_.classes.CHART_PREFIX}__node-${b.id}`).transition().call(X.transitionsComplete,()=>{r()}).duration(_.numbers.TRANSITION_DURATION).attr("y",b=>b.value?x(b.value)+c.bottom:0).attr("height",b=>b.value?p.height-c.top-c.bottom-x(b.value):0).attr("fill",b=>b.color?b.color:s&&b.value&&e.palette?e.palette.length===2?s(b.value):e.palette[s(b.value)]:"#fff"),e.selectedCallback&&S.selectAll("rect").on("click",(b,A)=>e.selectedCallback(A,b.target)),e.hoverCallback&&(S.selectAll("rect").on("mouseenter",(b,A)=>e.hoverCallback(!0,A,b.target)),S.selectAll("rect").on("mouseleave",(b,A)=>e.hoverCallback(!1,A,b.target)))})}};var Pn=class{static buildBubbleChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=Z(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(m=>m.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=10,l=X.chartSize(e.container),u=Ft({children:e.data}).sum(m=>m.value).sort((m,d)=>d.value-m.value);Na().size([Math.min(l.width,l.height),Math.min(l.width,l.height)])(u);let h=a.select(`g.${_.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(_.classes.CHART_ROOT,!0),h.append("g").classed(`${_.classes.CHART_PREFIX}__chart`,!0).classed(`${_.classes.CHART_PREFIX}__bubble`,!0)),a.attr("width",l.width),a.attr("height",l.height);let p=h.select(`g.${_.classes.CHART_PREFIX}__bubble`).selectAll("g").data(u.leaves(),m=>m.data.id);p.exit().select("text").remove(),p.exit().select("circle").transition().duration(_.numbers.TRANSITION_DURATION).attr("r",0),p.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("circle"),x.append("clipPath").attr("id",m=>`${_.classes.CHART_CLIP}-${m.data.id}`).append("circle"),x.append("text").classed(_.classes.CHART_TEXT,!0).attr("clip-path",m=>`url(#${_.classes.CHART_CLIP}-${m.data.id})`).style("text-anchor","middle"),e.selectedCallback&&x.on("click",(m,d)=>e.selectedCallback(d.data,m.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(m,d)=>e.hoverCallback(!0,d.data,m.target)),x.on("mouseleave",(m,d)=>e.hoverCallback(!1,d.data,m.target)));let v=x.merge(p);v.select("text").style("display","none").attr("y",".35em").text(m=>i?i(m.data.value):m.data.value),v.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",m=>"translate("+m.x+","+m.y+")"),v.select("g > circle").attr("fill",m=>m.data.color?m.data.color:o&&m.value&&e.palette?e.palette.length===2?o(m.value):e.palette[o(m.value)]:"#fff").attr("id",m=>`${_.classes.CHART_PREFIX}__node-${m.data.id}`).transition().call(X.transitionsComplete,()=>{v.select("clipPath > circle").attr("r",m=>m.r>s/2?m.r-s/2:0),v.select("text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).attr("r",m=>m.r)})}};function pl(t){return B(t).getDay()===0}function ml(t){let e;return t.forEach(function(r){let n=B(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function dl(t){let e;return t.forEach(r=>{let n=B(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function Fn(t,e){let r=B(t),n=B(e),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function gl(t,e){let r=B(t),n=B(e),a=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return a*12+o}function zn(t,e){let r=B(t),n=B(e),a=xl(r,n),o=Math.abs(Lo(r,n));r.setDate(r.getDate()-a*o);let i=+(xl(r,n)===-a),s=a*(o-i);return s===0?0:s}function xl(t,e){let r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}function yl(t){return e=>{let n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function vl(t){let e=B(t);return e.setHours(23,59,59,999),e}function _l(t){let e=B(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function bl(t){let e=B(t);return+vl(e)==+_l(e)}function wl(t,e){let r=B(t),n=B(e),a=Fn(r,n),o=Math.abs(gl(r,n)),i;if(o<1)i=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*o);let s=Fn(r,n)===-a;bl(B(t))&&o===1&&Fn(t,n)===1&&(s=!1),i=a*(o-Number(s))}return i===0?0:i}function Tl(t,e,r){let n=zn(t,e)/7;return yl(r?.roundingMethod)(n)}function Hn(t){return B(t).getDay()}function Cl(t){return B(t).getDay()===1}function Ml(t,e){return Hr(t,-e)}function kl(t,e){let r=e-Hn(t);return r<=0&&(r+=7),Hr(t,r)}function Al(t){return kl(t,0)}function Sl(t,e){let r=Hn(t)-e;return r<=0&&(r+=7),Ml(t,r)}function Dl(t){return Sl(t,1)}var Ln=class{static buildGanttChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=dl(e.data.map(I=>I.startDate));Cl(a)||(a=Dl(a));let o=ml(e.data.map(I=>I.endDate));pl(o)||(o=Al(o));let i=Z(e.container),s,l=16,u=40,f={top:16,bottom:16,left:16,right:16},h=X.chartSize(e.container);h.height=e.data.length*(u+l);let c=8,p={x:8,y:16},x=oe,v="",m=0;switch(e.categoryTimeSpan){case"year":x=bt,v="%Y";break;case"week":x=It,v="%m/%d",m=Tl(o,a);break;case"day":x=Nt,v="%m/%d",m=zn(o,a);break;default:v="%m/%y",m=wl(o,a);break}h.width<m*48&&(h.width=m*48);let d=X.xScale([a,o],h.width-f.left-f.right,!1,!0).nice(),M=Jn(d).ticks(x,v).tickSize(-h.height),S=i.select(`g.${_.classes.CHART_ROOT}`);S.node()||(S=i.append("g").classed(_.classes.CHART_ROOT,!0),S.append("g").classed(_.classes.CHART_XAXIS,!0),S.append("g").classed(`${_.classes.CHART_PREFIX}__gantt`,!0),s=Z(e.container.parentElement).append("div").classed(`${_.classes.CHART_POPOVER}`,!0)),i.attr("width",h.width),i.attr("height",h.height+f.bottom),i.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${f.left}, ${f.top})`).call(M);let b=S.select(`g.${_.classes.CHART_PREFIX}__gantt`);b.attr("transform",`translate(${f.left}, -${f.bottom-f.top})`);let A=b.selectAll("g").data(e.data,I=>I.id);A.exit().transition().duration(_.numbers.TRANSITION_DURATION).attr("width",0),A.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let C=A.enter().append("g").attr("id",I=>`${_.classes.CHART_PREFIX}__node-${I.id}`).on("mouseenter",(I,O)=>{let y=`
            <span style="grid-column: 1 / -1; font-weight: 700">${O.label}</span>
            <span>Start</span>
            <span style="justify-self: end">${qn(O.startDate,"MM/dd/yyyy")}</span>
            <span>End</span>
            <span style="justify-self: end">${qn(O.endDate,"MM/dd/yyyy")}</span>
            <span>Progress</span>
            <span style="justify-self: end">${O.progress||0}%</span>
          `;O.description?.length&&(y+=`<span style="grid-column: 1 / -1; font-size: .75rem;">${O.description}</span>`),s.html(y).style("top",`${I.layerY}px`).style("left",`${I.layerX}px`).style("visibility","visible"),e.hoverCallback&&e.hoverCallback(!0,O,I.target)}).on("mouseleave",(I,O)=>{s.style("visibility",null),e.hoverCallback&&e.hoverCallback(!1,O,I.target)});e.selectedCallback&&C.on("click",(I,O)=>e.selectedCallback(O,I.target.parentElement));let F=C.append("defs").append("linearGradient").attr("id",(I,O)=>`meter-gradient--${O}`);F.append("stop").attr("offset","0%").attr("stop-color",_.chartPalette.indigoA200),F.append("stop").attr("offset",I=>`${I.progress||0}%`).attr("stop-color",_.chartPalette.indigoA200),F.append("stop").attr("offset",I=>`${I.progress||0}%`).attr("stop-color",_.chartPalette.indigo200),F.append("stop").attr("offset","100%").attr("stop-color",_.chartPalette.indigo200),C.append("rect").classed(_.classes.CHART_NODE,!0).attr("width",0).attr("height",u).attr("rx",4).style("stroke",I=>I.color?.length?I.color:_.chartTheme.outlineMedium).style("fill",_.chartTheme.surfaceDim),C.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",p.x).attr("y",p.y).style("font-size",".85rem").style("stroke",_.chartTheme.surfaceDim).style("stroke-width",".5rem").style("fill",_.chartTheme.textHigh).style("paint-order","stroke").style("stroke-linejoin","round").style("display","none"),C.append("rect").classed(_.classes.CHART_METER,!0).attr("x",p.x).attr("y",u-c-p.x).attr("width",0).attr("height",c).style("fill",(I,O)=>`url(#meter-gradient--${O})`);let E=C.merge(A);E.attr("transform",(I,O)=>`translate(${d(I.startDate)}, ${O*(u+l)+f.top+l/2})`),E.select(`g > .${_.classes.CHART_NODE}`).transition().duration(_.numbers.TRANSITION_DURATION).attr("width",I=>{let O=d(I.endDate)-d(I.startDate);return O>0?O:0}),E.select(`g > .${_.classes.CHART_METER}`).transition().duration(_.numbers.TRANSITION_DURATION).attr("width",I=>{let O=d(I.endDate)-d(I.startDate)-p.x*2;return O>0?O:0}),E.select("g > text").transition().call(X.transitionsComplete,()=>{E.select("g > text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).text((I,O,y)=>`${I.label}`)})}};function Nl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nl(Object(r),!0).forEach(function(n){_m(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rr(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rr=function(e){return typeof e}:Rr=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(t)}function _m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Un(){return Un=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Un.apply(this,arguments)}function bm(t,e){if(t){if(typeof t=="string")return Il(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Il(t,e)}}function Il(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ol(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=bm(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,i=!1,s;return{s:function(){r=r.call(t)},n:function(){var l=r.next();return o=l.done,l},e:function(l){i=!0,s=l},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(i)throw s}}}}function wm(t,e){var r=[],n=[];function a(o,i){if(o.length===1)r.push(o[0]),n.push(o[0]);else{for(var s=Array(o.length-1),l=0;l<s.length;l++)l===0&&r.push(o[0]),l===s.length-1&&n.push(o[l+1]),s[l]=[(1-i)*o[l][0]+i*o[l+1][0],(1-i)*o[l][1]+i*o[l+1][1]];a(s,i)}}return t.length&&a(t,e),{left:r,right:n.reverse()}}function Tm(t){var e={};return t.length===4&&(e.x2=t[2][0],e.y2=t[2][1]),t.length>=3&&(e.x1=t[1][0],e.y1=t[1][1]),e.x=t[t.length-1][0],e.y=t[t.length-1][1],t.length===4?e.type="C":t.length===3?e.type="Q":e.type="L",e}function Cm(t,e){e=e||2;for(var r=[],n=t,a=1/e,o=0;o<e-1;o++){var i=a/(1-a*o),s=wm(n,i);r.push(s.left),n=s.right}return r.push(n),r}function Mm(t,e,r){var n=[[t.x,t.y]];return e.x1!=null&&n.push([e.x1,e.y1]),e.x2!=null&&n.push([e.x2,e.y2]),n.push([e.x,e.y]),Cm(n,r).map(Tm)}var km=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,Ge={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(Ge).forEach(function(t){Ge[t.toLowerCase()]=Ge[t]});function eo(t,e){for(var r=Array(t),n=0;n<t;n++)r[n]=e;return r}function Am(t){return"".concat(t.type).concat(Ge[t.type].map(function(e){return t[e]}).join(","))}function Sm(t,e){var r={x1:"x",y1:"y",x2:"x",y2:"y"},n=["xAxisRotation","largeArcFlag","sweepFlag"];if(t.type!==e.type&&e.type.toUpperCase()!=="M"){var a={};Object.keys(e).forEach(function(o){var i=e[o],s=t[o];s===void 0&&(n.includes(o)?s=i:(s===void 0&&r[o]&&(s=t[r[o]]),s===void 0&&(s=0))),a[o]=s}),a.type=e.type,t=a}return t}function Dm(t,e,r){var n=[];if(e.type==="L"||e.type==="Q"||e.type==="C")n=n.concat(Mm(t,e,r));else{var a=Un({},t);a.type==="M"&&(a.type="L"),n=n.concat(eo(r-1).map(function(){return a})),n.push(e)}return n}function Rl(t,e,r){var n=t.length-1,a=e.length-1,o=n/a,i=eo(a).reduce(function(l,u,f){var h=Math.floor(o*f);if(r&&h<t.length-1&&r(t[h],t[h+1])){var c=o*f%1<.5;l[h]&&(c?h>0?h-=1:h<t.length-1&&(h+=1):h<t.length-1?h+=1:h>0&&(h-=1))}return l[h]=(l[h]||0)+1,l},[]),s=i.reduce(function(l,u,f){if(f===t.length-1){var h=eo(u,Un({},t[t.length-1]));return h[0].type==="M"&&h.forEach(function(c){c.type="L"}),l.concat(h)}return l.concat(Dm(t[f],t[f+1],u))},[]);return s.unshift(t[0]),s}function El(t){for(var e=(t||"").match(km)||[],r=[],n,a,o=0;o<e.length;++o)if(n=Ge[e[o]],n){a={type:e[o]};for(var i=0;i<n.length;++i)a[n[i]]=+e[o+i+1];o+=n.length,r.push(a)}return r}function Nm(t,e,r){var n=t==null?[]:t.slice(),a=e==null?[]:e.slice(),o=Rr(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return[]};var l=(n.length===0||n[n.length-1].type==="Z")&&(a.length===0||a[a.length-1].type==="Z");n.length>0&&n[n.length-1].type==="Z"&&n.pop(),a.length>0&&a[a.length-1].type==="Z"&&a.pop(),n.length?a.length||a.push(n[0]):n.push(a[0]);var u=Math.abs(a.length-n.length);u!==0&&(a.length>n.length?n=Rl(n,a,i):a.length<n.length&&(a=Rl(a,n,i))),n=n.map(function(h,c){return Sm(h,a[c])});var f=n.map(function(h){return vm({},h)});return l&&(f.push({type:"Z"}),n.push({type:"Z"})),function(c){if(c===1&&s)return e??[];if(c===0)return n;for(var p=0;p<f.length;++p){var x=n[p],v=a[p],m=f[p],d=Ol(Ge[m.type]),M;try{for(d.s();!(M=d.n()).done;){var S=M.value;m[S]=(1-c)*x[S]+c*v[S],(S==="largeArcFlag"||S==="sweepFlag")&&(m[S]=Math.round(m[S]))}}catch(b){d.e(b)}finally{d.f()}}return f}}function Er(t,e,r){var n=El(t),a=El(e),o=Rr(r)==="object"?r:{excludeSegment:r,snapEndsToInput:!0},i=o.excludeSegment,s=o.snapEndsToInput;if(!n.length&&!a.length)return function(){return""};var l=Nm(n,a,{excludeSegment:i,snapEndsToInput:s});return function(f){if(f===1&&s)return e??"";var h=l(f),c="",p=Ol(h),x;try{for(p.s();!(x=p.n()).done;){var v=x.value;c+=Am(v)}}catch(m){p.e(m)}finally{p.f()}return c}}var Xn=class{static buildLineChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}e.categoryTicks=e.categoryTicks||10,e.valueTicks=e.valueTicks||5;let a=e.data.map(E=>E.data).reduce((E,I)=>E.concat(I),[]),o=a.map(E=>E.value),i=a.map(E=>parseFloat(E.category)).filter((E,I,O)=>O.indexOf(E)===I).sort((E,I)=>E-I),s=Math.min(...o)||0,l=Math.max(...o)||0,u=Math.min(...i)||0,f=Math.max(...i)||0,h=Z(e.container),c=2,p={top:16,bottom:16,left:16+X.getTextWidth(l.toString(),`${_.strings.FONT_SIZE_SMALL} ${_.strings.FONT_FAMILY}`),right:16},x=X.chartSize(e.container),v=X.xScale([u,f],x.width-p.left-p.right),m=tr(v);if(yt(e.categoryTickValues)){let E=At().domain([0,e.categoryTickValues.length-1]).range([u,f]);e.categoryTicks=[],e.categoryTickValues?.forEach((I,O)=>{e.categoryTicks.push(E(O))}),m.tickFormat((I,O)=>e.categoryTickValues[O]||"")}yt(e.categoryTicks)?m.tickValues(e.categoryTicks):m.ticks(e.categoryTicks),e.categoryFormat&&m.tickFormat(mt(e.categoryFormat)),e.categoryDateFormat&&m.tickFormat(dt(e.categoryDateFormat));let d=X.yScale([s,l],x.height-p.top-p.bottom),M=er(d).tickSize(-(x.width-p.left-p.right));if(yt(e.valueTickValues)){let E=At().domain([0,e.valueTickValues.length-1]).range([s,l]);e.valueTicks=[],e.valueTickValues?.forEach((I,O)=>{e.valueTicks.push(E(O))}),M.tickFormat((I,O)=>e.valueTickValues[O]||"")}yt(e.valueTicks)?M.tickValues(e.valueTicks):M.ticks(e.valueTicks),e.valueFormat&&M.tickFormat(mt(e.valueFormat)),e.valueDateFormat&&M.tickFormat(dt(e.valueDateFormat));let S=We().x(E=>v(E.category)).y(E=>d(E.value)),b=We().x(E=>v(E.category)).y(x.height-p.top),A=h.select(`g.${_.classes.CHART_ROOT}`);A.node()||(A=h.append("g").classed(_.classes.CHART_ROOT,!0),A.append("g").classed(_.classes.CHART_XAXIS,!0),yt(e.categoryTickValues)&&A.select(`g.${_.classes.CHART_XAXIS}`).classed(`${_.classes.CHART_PREFIX}__xaxis--align-boundry-ticks`,!0),A.append("g").classed(_.classes.CHART_YAXIS,!0),A.append("g").classed(`${_.classes.CHART_PREFIX}__line`,!0)),h.attr("width",x.width),h.attr("height",x.height),h.select(`g.${_.classes.CHART_XAXIS}`).attr("transform",`translate(${p.left}, ${x.height-p.bottom})`).call(m),h.select(`g.${_.classes.CHART_YAXIS}`).attr("transform",`translate(${p.left}, ${p.top})`).call(M);let C=A.select(`g.${_.classes.CHART_PREFIX}__line`);C.attr("transform",`translate(${p.left+c}, ${p.top})`),e.data.forEach((E,I)=>{let O=C.selectAll(`path.path-${E.id}`).data([E],N=>N.id);O.exit().remove(),O.enter().append("path").classed(`path-${E.id}`,!0).style("fill","none").style("stroke-linejoin","round").style("stroke-linecap","round").attr("d",N=>b(N.data)).merge(O).attr("stroke",N=>N.color).transition().duration(_.numbers.TRANSITION_DURATION).call(X.transitionsComplete,()=>{I===e.data.length-1&&r()}).attrTween("d",(N,w,g)=>{let k=g[0].getAttribute("d"),T=S(N.data);return Er(k,T)})});let F=C.selectAll("path").nodes();if(F.length>e.data.length)for(let E=F.length;E>e.data.length;E--)F[E-1]?.remove()})}};var Qe=class{static buildPieChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=[],o=Z(e.container),i=e.palette&&e.palette.length?X.colorScale(e.data.map(d=>d.value),e.palette.length===2?e.palette:e.palette.length):void 0,s=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,l=X.chartSize(e.container),u={outer:Math.min(l.width,l.height)/2,inner:0};(e.type==="donut"||e.type==="donut-meter")&&(u.inner=u.outer-u.outer*.35);let f=Qa().outerRadius(u.outer).innerRadius(u.inner),h=ja().value(d=>d.value).sort(null),c=o.select(`g.${_.classes.CHART_ROOT}`);c.node()||(c=o.append("g").classed(_.classes.CHART_ROOT,!0),c.append("g").classed(`${_.classes.CHART_PREFIX}__${e.type}`,!0)),o.attr("width",l.width),o.attr("height",l.height);let p=c.select(`g.${_.classes.CHART_PREFIX}__${e.type}`);p.attr("transform",`translate(${u.outer}, ${u.outer})`),p.selectAll("g").select("path").each(d=>{a[d.data.id]={startAngle:d.startAngle,endAngle:d.endAngle}});let x=p.selectAll("g").data(h(e.data),d=>d.data.id);x.exit().select("path").transition().duration(_.numbers.TRANSITION_DURATION).attrTween("d",d=>X.arcTween(d,{startAngle:0,endAngle:0},f)),x.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let v=x.enter().append("g");v.append("path"),e.selectedCallback&&v.on("click",(d,M)=>e.selectedCallback(M.data,d.target.parentElement)),e.hoverCallback&&(v.on("mouseenter",(d,M)=>e.hoverCallback(!0,M.data,d.target)),v.on("mouseleave",(d,M)=>e.hoverCallback(!1,M.data,d.target))),v.merge(x).select("g > path").attr("fill",d=>d.data.color?d.data.color:i&&d.value&&e.palette?e.palette.length===2?i(d.value):e.palette[i(d.value)]:"#fff").attr("id",d=>`${_.classes.CHART_PREFIX}__node-${d.data.id}`).transition().call(X.transitionsComplete,()=>{switch(e.type){case"donut-meter":if(!e.hideLabel){let d=p.select("."+_.classes.CHART_TEXT);d.node()||(d=p.append("text").style("fill",_.chartTheme.textHigh).style("text-anchor","middle").classed(_.classes.CHART_TEXT,!0),d.append("tspan").style("font-size","2rem").classed(_.classes.CHART_TEXT_VALUE,!0),d.append("tspan").attr("x",0).attr("y",0).attr("dy","1.25em").classed(_.classes.CHART_TEXT_LABEL,!0));let M="";e.centerValue?M=e.centerValue:s?M=s(e.data[0].value):M=e.data[0].value.toString(),d.select(`tspan.${_.classes.CHART_TEXT_VALUE}`).text(M),d.select(`tspan.${_.classes.CHART_TEXT_LABEL}`).text(ot(e.data[0].label)?e.data[0].label:"");break}}r()}).duration(_.numbers.TRANSITION_DURATION).style("stroke","#fff").attrTween("d",d=>X.arcTween(a[d.data.id]||{startAngle:0,endAngle:0},d,f))})}};var $l=(()=>{class t{static{this.hasChildren=r=>r.data.children===!0||yt(r.data.children)&&r.data.children.length>0}static{this.getParentIds=r=>{let n=[],a=r.parent;for(;a;)n.push(a.data.id),a=a.parent;return n.reverse().slice(1)}}static{this.getParentDepths=r=>{let n=[],a=r.parent;for(;a;)n.push(a.depth),a=a.parent;return n.reverse().slice(1)}}static{this.nodeCenterHorizontal=(r,n,a=r.x)=>Math.round(a-n/2)}static buildTreeChart(r){return new Promise((n,a)=>{if(!r.container||r.container.tagName!=="svg"){a();return}let o=Z(r.container),i={width:0,height:0},s=[],l=8,u="#212121",f={width:o.attr("width")?parseInt(o.attr("width"),10):0,height:o.attr("height")?parseInt(o.attr("height"),10):0},h=Ft(r.data),p=Ea().nodeSize([r.node.size.width+24,r.node.size.height+r.node.margin]).separation((y,N)=>y.parent===N.parent?1:1.25)(h),x=0,v=0;p.descendants().filter(y=>y.depth>0).forEach(y=>{if(!ot(y.data.nodeId)){let N=this.getParentDepths(y),w=[];this.getParentIds(y).forEach((g,k)=>{w.push(`${N[k]}-${g}`)}),w.push(`${y.depth}-${y.data.id}`),y.data.nodeId=w.join("--")}y.y=(y.depth-1)*(r.node.size.height+r.node.margin),y.y>i.height&&(i.height=y.y),y.x>v?v=y.x:y.x<x&&(x=y.x)});let m=o.select(`g.${_.classes.CHART_ROOT}`);m.node()||(m=o.append("g").classed(_.classes.CHART_ROOT,!0),m.append("g").classed(`${_.classes.CHART_PREFIX}__tree`,!0));let d=m.node().getCTM().a;if(i.width=(Math.abs(x)+v+r.node.size.width)*d+l*2,i.height=(i.height+r.node.size.height)*d+l*2,f.width<i.width&&o.attr("width",i.width),f.height<i.height&&o.attr("height",i.height),r.zoomScale){let y=vo(o.node().parentElement,!0),N={left:0,top:0,x:0,y:0};o.style("cursor","grab"),o.call(to().scaleExtent([r.zoomScale.min,r.zoomScale.max]).on("zoom",w=>{if(w.sourceEvent.type==="mousemove")y&&(y.scrollTop=N.top+(N.y-w.sourceEvent.clientY),y.scrollLeft=N.left+(N.x-w.sourceEvent.clientX));else if(w.sourceEvent.type==="wheel"){m.attr("transform",`scale(${w.transform.k},${w.transform.k})`);let g=m.node().getBBox();i.width=g.width*w.transform.k+l*2,i.height=g.height*w.transform.k+l*2,o.attr("width",i.width),o.attr("height",i.height)}}).on("start",w=>{w.sourceEvent.type==="mousedown"&&(N={left:y.scrollLeft,top:y.scrollTop,x:w.sourceEvent.clientX,y:w.sourceEvent.clientY})}))}let M=m.select(`g.${_.classes.CHART_PREFIX}__tree`);M.attr("transform",`translate(${Math.abs(x)+Math.round(r.node.size.width/2)+l}, ${l})`);let S=M.selectAll(`.${_.classes.CHART_PREFIX}__tree__node`).data(h.descendants().filter(y=>y.depth>0),y=>y.data.nodeId),b=S.exit();b.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",y=>y.parent?`translate(${this.nodeCenterHorizontal(y,r.node.size.width,y.parent.x)}, ${y.parent.y})`:`translate(${this.nodeCenterHorizontal(y,r.node.size.width)}, ${y.y})`).remove();let A=S.enter().append("g").classed(`${_.classes.CHART_PREFIX}__tree__node`,!0).attr("transform",y=>y.parent?`translate(${this.nodeCenterHorizontal(y,r.node.size.width,y.parent.x)}, ${y.parent.y})`:`translate(${this.nodeCenterHorizontal(y,r.node.size.width)}, ${y.y})`).attr("cursor",y=>y.data.children===!0||yt(y.data.children)&&y.data.children.length?"pointer":"default");A.append("rect").attr("width",r.node.size.width).attr("height",r.node.size.height).attr("rx",4).style("stroke",_.chartTheme.outlineMedium).style("fill",y=>r.palette[y.depth-Math.trunc(y.depth/r.palette.length)*r.palette.length]),r.nodeBuilder?r.nodeBuilder(A):A.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",r.node.padding).attr("y",r.node.size.height/2).style("pointer-events","none").style("dominant-baseline","middle").text((y,N)=>{if(!ot(y.data.label))return null;let w=r.node.size.width-r.node.padding*2;return r.popoverCallback&&(w=w-24),this.hasChildren(y)&&(w=w-24),X.trimText(y.data.label,w)}),r.selectedCallback&&A.on("click",(y,N)=>r.selectedCallback(N.data,this.getParentIds(N),y.target.parentElement)),r.hoverCallback&&(A.on("mouseenter",(y,N)=>r.hoverCallback(!0,N.data,this.getParentIds(N),y.target)),A.on("mouseleave",(y,N)=>r.hoverCallback(!1,N.data,this.getParentIds(N),y.target)));let C=A.merge(S);C.transition().call(X.transitionsComplete,()=>{f.width>i.width&&o.attr("width",i.width),f.height>i.height&&o.attr("height",i.height);let y=A.nodes().length?A.data()[0].parent:b.nodes().length?b.data().sort((N,w)=>N.depth<w.depth)[0].parent:null;if(ot(y)&&y.depth>0){let N=S.filter(w=>w.data.nodeId===y.data.nodeId).node();N&&N.scrollIntoView({behavior:"smooth"})}n()}).duration(_.numbers.TRANSITION_DURATION).attr("transform",y=>`translate(${this.nodeCenterHorizontal(y,r.node.size.width)}, ${y.y})`);let F=(y,N)=>{let w=(y.y-N.y)/2;return We()([[y.x,y.y],[y.x,y.y-w],[N.x,N.y+w],[N.x,N.y]])},E=M.selectAll(`.${_.classes.CHART_PREFIX}__tree__path`).data(h.descendants().filter(y=>y.depth>1),y=>y.data.nodeId);if(E.exit().transition().duration(_.numbers.TRANSITION_DURATION).attrTween("d",(y,N,w)=>{let g=w[N].getAttribute("d"),k=F({x:Math.round(y.parent.x),y:Math.round(y.parent.y+r.node.size.height)},{x:Math.round(y.parent.x),y:Math.round(y.parent.y+r.node.size.height)});return Er(g,k)}).remove(),E.enter().insert("path").classed(`${_.classes.CHART_PREFIX}__tree__path`,!0).style("fill","none").style("stroke",_.chartTheme.outlineMedium).style("shape-rendering","crispEdges").style("stroke-width","2").merge(E).transition().call(X.transitionsComplete,()=>{M.selectAll(`.${_.classes.CHART_PREFIX}__tree__path-label`).raise()}).duration(_.numbers.TRANSITION_DURATION).attrTween("d",(y,N,w)=>{let g=w[N].getAttribute("d"),k=F({x:Math.round(y.parent.x),y:Math.round(y.parent.y+r.node.size.height)},{x:Math.round(y.x),y:Math.round(y.y)});return Er(g,k)}),r.levelLabels.length){let y=M.selectAll(`.${_.classes.CHART_PREFIX}__tree__path-label`).data(h.descendants().filter(k=>k.depth>0&&yt(k.data.children)&&k.data.children.length),k=>k.data.nodeId),N=24,w=y.enter().insert("g").classed(`${_.classes.CHART_PREFIX}__tree__path-label`,!0).attr("visibility","hidden").attr("transform",k=>`translate(${this.nodeCenterHorizontal(k,r.node.size.width)}, ${k.y+r.node.size.height+r.node.padding})`);w.append("rect").attr("width",k=>{let T=k.depth-1,R=r.levelLabels[T];return!ot(R)||!R.length?(s[T]=0,0):(s[T]||(s[T]=X.getTextWidth(R,"14px Roboto, sans-serif")+N),s[T])}).attr("transform",k=>`translate(${r.node.size.width/2-s[k.depth-1]/2}, 0)`).attr("height",N).attr("rx",N/2).style("fill",_.chartTheme.outlineMedium),w.append("text").classed(_.classes.CHART_TEXT,!0).attr("x",Math.round(r.node.size.width/2)).attr("y",N/2).style("pointer-events","none").style("dominant-baseline","middle").style("text-anchor","middle").style("font-size","14px").style("fill",_.chartTheme.textInverse).text(k=>r.levelLabels[k.depth-1]),y.exit().remove(),w.merge(y).transition().call(X.transitionsComplete,()=>{w.attr("visibility",null),n()}).duration(_.numbers.TRANSITION_DURATION).attr("transform",k=>`translate(${this.nodeCenterHorizontal(k,r.node.size.width)}, ${k.y+r.node.size.height+(r.node.margin-N)/2})`)}C.each((y,N)=>{let w=Z(C.nodes()[N]),g=Z(w.node()?.querySelector(`.${_.classes.CHART_PREFIX}__tree__node__children-icon`));if(this.hasChildren(y)?g.node()||w.append("path").classed(`${_.classes.CHART_PREFIX}__tree__node__children-icon`,!0).attr("d","M0,0L12,0L6,6,L0,0").attr("transform",`translate(${r.node.size.width-20}, ${r.node.size.height/2-4})`).style("fill",u):g.node()&&g.remove(),r.popoverCallback){let k=Z(w.node()?.querySelector(`.${_.classes.CHART_PREFIX}__tree__node__info-icon`));if(!k.node()){let T=this.hasChildren(y)?r.node.size.width-54:r.node.size.width-32;k=w.append("path").classed(`${_.classes.CHART_PREFIX}__tree__node__info-icon`,!0).attr("d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z").attr("transform",`translate(${T}, ${r.node.size.height/2-12})`).style("fill",u).attr("cursor","pointer").on("click",R=>{R.stopPropagation();let z=JSON.parse(JSON.stringify(y.data));delete z.children,delete z.nodeId,r.popoverCallback(z,this.getParentIds(y),k.node())})}}})})}}return t})();var Yn=class{static buildTreemapChart(e){return new Promise((r,n)=>{if(!e.container||e.container.tagName!=="svg"){n();return}let a=Z(e.container),o=e.palette&&e.palette.length?X.colorScale(e.data.map(m=>m.value),e.palette.length===2?e.palette:e.palette.length):void 0,i=e.valueFormat?mt(e.valueFormat):e.valueDateFormat?dt(e.valueDateFormat):void 0,s=8,l=X.chartSize(e.container),u=Ft({children:e.data}).sum(m=>m.value).sort((m,d)=>d.value-m.value);Oa().size([l.width,l.height])(u);let h=a.select(`g.${_.classes.CHART_ROOT}`);h.node()||(h=a.append("g").classed(_.classes.CHART_ROOT,!0),h.append("g").classed(`${_.classes.CHART_PREFIX}__treemap`,!0)),a.attr("width",l.width),a.attr("height",l.height);let p=h.select(`g.${_.classes.CHART_PREFIX}__treemap`).selectAll("g").data(u.leaves(),m=>m.data.id);p.exit().select("text").remove(),p.exit().select("rect").transition().duration(_.numbers.TRANSITION_DURATION).attr("width",0).attr("height",0),p.exit().transition().delay(_.numbers.TRANSITION_DURATION).remove();let x=p.enter().append("g");x.append("rect"),x.append("clipPath").attr("id",m=>`${_.classes.CHART_CLIP}-${m.data.id}`).append("rect"),x.append("text").classed(_.classes.CHART_TEXT,!0).attr("clip-path",m=>`url(#${_.classes.CHART_CLIP}-${m.data.id})`).attr("dx",5).attr("dy",20),e.selectedCallback&&x.on("click",(m,d)=>e.selectedCallback(d.data,m.target.parentElement)),e.hoverCallback&&(x.on("mouseenter",(m,d)=>e.hoverCallback(!0,d.data,m.target)),x.on("mouseleave",(m,d)=>e.hoverCallback(!1,d.data,m.target)));let v=x.merge(p);v.transition().duration(_.numbers.TRANSITION_DURATION).attr("transform",m=>`translate(${m.x0}, ${m.y0})`),v.select("text").style("display","none").text(m=>i?i(m.data.value):m.data.value),v.select("rect").attr("fill",m=>m.color?m.color:o&&m.value&&e.palette?e.palette.length===2?o(m.value):e.palette[o(m.value)]:"#fff").style("stroke","#fff").attr("id",m=>`${_.classes.CHART_PREFIX}__node-${m.data.id}`).transition().call(X.transitionsComplete,()=>{v.select("clipPath > rect").attr("x",m=>s/2).attr("y",m=>s/2).attr("width",m=>m.x1-m.x0>s?m.x1-m.x0-s:0).attr("height",m=>m.y1-m.y0>s?m.y1-m.y0-s:0),v.select("text").style("display",null),r()}).duration(_.numbers.TRANSITION_DURATION).attr("width",m=>m.x1-m.x0).attr("height",m=>m.y1-m.y0)})}};var Rm=["chartContainer"];function Em(t,e){if(t&1&&(j(0,"forge-list-item"),Qt(1,"div",5),j(2,"span"),at(3),J(),j(4,"span",6),at(5),J()()),t&2){let r=e.$implicit;rt(),co("--item-color",r.color),rt(2),Vn(r.label),rt(2),Vn(r.value)}}function Om(t,e){if(t&1&&(j(0,"div",3)(1,"forge-list",4),ho(2,Em,6,4,"forge-list-item",null,fo),J()()),t&2){let r=je();rt(2),po(r.legendData)}}var no=(()=>{class t{constructor(){this.destroyRef=$r(Pr),this.chartPalette=Object.keys(_.chartPalette).map(r=>_.chartPalette[r]),this.#t=P.bar,this.donutMeterChartData=0,this.showLegend=!1}#t;set chartType(r){this.#t=r,this.setChartData("create"),this.initializeChartContainer(),requestAnimationFrame(()=>{this.drawChart()}),this.#t===P.donutMeter||this.#t===P.gantt||this.#t===P.treemap||this.#t===P.tree?this.showLegend=!1:this.showLegend=!0}get chartType(){return this.#t}ngOnInit(){Ut(window,"resize").pipe(Xt(this.destroyRef),Or(100)).subscribe(()=>this.drawChart())}onAction(r){this.setChartData(r),this.drawChart()}initializeChartContainer(){(this.chartContainer?.nativeElement).querySelector("svg")?.remove();let r=document.createElementNS("http://www.w3.org/2000/svg","svg");(this.chartContainer?.nativeElement).appendChild(r)}setChartData(r){if(this.chartType===P.donutMeter){this.donutMeterChartData=this.randomNumber(20,80);return}switch(r){case"create":{this.chartType===P.line?this.lineChartData=[this.getData(10)]:this.chartType===P.tree?this.treeChartData={id:"0",children:[{id:"0-1",label:"Item 0-1",children:!0},{id:"0-2",label:"Item 0-2",children:!0}]}:this.chartData=this.getData(10);break}case"update":{this.chartType===P.line?this.lineChartData?.forEach((n,a)=>{this.getData(n.length).forEach((o,i)=>{n[i].value=o.value})}):this.getData(this.chartData.length).forEach((n,a)=>{this.chartData[a].value=n.value});break}case"add":{if(this.chartType===P.line)this.lineChartData?.push(this.getData(10));else{let n=Math.max(...this.chartData.map(a=>a.id))||0;n++,this.chartData=this.chartData?.concat(this.getData(10,n))}break}case"delete":{this.chartType===P.line?this.lineChartData?.pop():this.chartData.length>10&&(this.chartData=this.chartData?.slice(0,this.chartData.length-10));break}}(this.chartType===P.bubble||this.chartType===P.donut||this.chartType===P.pie||this.chartType===P.treemap)&&(this.chartData=this.chartData?.sort((n,a)=>n.category-a.category))}getData(r,n=0){let a=[],o=Date.now();for(let i=0;i<r;i++)a.push({id:i+n,value:this.randomNumber(0,1e3),label:`Item ${i+n}`,category:this.randomNumber(0,100)});return console.log(a.sort((i,s)=>i.category-s.category)),a.sort((i,s)=>i.category-s.category)}drawChart(){this.legendData=this.chartData?.map((n,a)=>({id:n.id,label:n.label,value:n.value,color:this.chartPalette[a%this.chartPalette.length]}));let r={container:this.chartContainer?.nativeElement.querySelector("svg"),data:this.chartData?.map((n,a)=>Gt(Lt({},n),{color:this.chartPalette[a%this.chartPalette.length]})),palette:this.chartPalette,selectedCallback:this.selectedCallback,hoverCallback:this.hoverCallback};switch(r.container.setAttribute("width","0"),r.container.setAttribute("height","0"),this.chartType){case P.bar:{let n=Lt({},r);$n.buildBarChart(n);break}case P.bubble:{Pn.buildBubbleChart(r);break}case P.donut:{let n=Gt(Lt({},r),{type:"donut"});Qe.buildPieChart(n);break}case P.donutMeter:{let n=Gt(Lt({},r),{type:"donut-meter",data:[{id:0,value:this.donutMeterChartData,label:"percent",color:_.chartPalette.indigoA200},{id:1,value:100-this.donutMeterChartData,color:_.chartPalette.grey400}]});Qe.buildPieChart(n);break}case P.line:{let n=this.lineChartData?.map((o,i)=>({id:i,label:`Item ${i}`,data:o,color:this.chartPalette[i%this.chartPalette.length]})),a=Gt(Lt({},r),{data:n});Xn.buildLineChart(a),this.legendData=n?.map((o,i)=>({id:o.id,color:o.color,value:null,label:o.data[0].label}));break}case P.pie:{let n=Gt(Lt({},r),{type:"pie"});Qe.buildPieChart(n);break}case P.treemap:{Yn.buildTreemapChart(r);break}case P.tree:{let n=Gt(Lt({},r),{data:this.treeChartData,node:{size:{width:200,height:48},padding:8,margin:48},palette:["#6f74dd","#8e99f3","#d1d9ff","#ede7f6","#e3f2fd","#e0f2f1","#f1f8e9","#eceff1","#f5f5f5"],levelLabels:["Level one","Level two","Level three"],zoomScale:{min:.5,max:1},selectedCallback:(a,o,i)=>{if(console.log(`selectedCallback: ${a.id}`),a.children){if(Array.isArray(a.children))a.children=!0;else{let s=this.randomNumber(5,10);a.children=[];for(let l=0;l<s;l++)a.children.push({id:`${o.length+1}-${l}`,label:`Item ${o.length+1} - ${l}`,children:!!this.randomNumber(0,10)})}this.drawChart()}}});$l.buildTreeChart(n);break}case P.gantt:{let n=Gt(Lt({},r),{data:[{id:0,label:"Item 01",startDate:new Date(2024,0,1),endDate:new Date(2024,0,31),progress:10},{id:1,label:"Item 02",startDate:new Date(2024,1,1),endDate:new Date(2024,1,10),progress:20},{id:2,label:"Item 03",startDate:new Date(2024,1,1),endDate:new Date(2024,1,20),progress:30},{id:3,label:"Item 04",startDate:new Date(2024,3,15),endDate:new Date(2024,8,20),progress:40,color:"red"},{id:4,label:"Item 05",description:"Item 05 description goes here, blah blah blah.  This description should wrap at 320px",startDate:new Date(2024,10,1),endDate:new Date(2025,10,30),progress:90}]});Ln.buildGanttChart(n);break}}}randomNumber(r,n){return Math.floor(Math.random()*(n-r+1))+r}selectedCallback(r,n){console.log(r),console.log(n)}hoverCallback(r,n,a){console.log(n),console.log(a)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=De({type:t,selectors:[["app-charts-d3-chart"]],viewQuery:function(n,a){if(n&1&&ue(Rm,7),n&2){let o;le(o=ce())&&(a.chartContainer=o.first)}},inputs:{chartType:"chartType"},standalone:!0,features:[Ie],decls:4,vars:1,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container","app-chart"],[1,"legend-container"],[1,"chart-legend"],["slot","start"],["slot","secondary-text"]],template:function(n,a){n&1&&(j(0,"div",1),Qt(1,"div",2,0),J(),Fr(3,Om,4,0,"div",3)),n&2&&(rt(3),zr(a.showLegend?3:-1))},dependencies:[Re,Ao,ko,So,Mo],styles:[`[_nghost-%COMP%]{overflow-x:auto;overflow-y:hidden;height:100%;width:100%;display:grid;grid-template-columns:1fr auto;column-gap:16px}[_nghost-%COMP%]     .app-chart{--app-chart-text-high: var(--forge-theme-text-high, rgba(0, 0, 0, .87));--app-chart-text-medium: var(--forge-theme-text-medium, rgba(0, 0, 0, .6));--app-chart-text-inverse: var(--forge-theme-on-surface-inverse, #ffffff);--app-chart-outline: var(--forge-theme-outline, #e0e0e0);--app-chart-outline-medium: var(--forge-theme-outline-medium, #757575);--app-chart-surface: var(--forge-theme-surface, #ffffff);--app-chart-surface-dim: var(--forge-theme-surface-dim, #f5f5f5)}[_nghost-%COMP%]     .app-chart__xaxis, [_nghost-%COMP%]     .app-chart__yaxis{font-family:Roboto,sans-serif;font-size:10px}[_nghost-%COMP%]     .app-chart__xaxis .domain, [_nghost-%COMP%]     .app-chart__yaxis .domain{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis .tick line, [_nghost-%COMP%]     .app-chart__yaxis .tick line{stroke:var(--app-chart-outline)}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:first-of-type>text{text-anchor:start}[_nghost-%COMP%]     .app-chart__xaxis--align-boundry-ticks .tick:last-of-type>text{text-anchor:end}[_nghost-%COMP%]     .app-chart__popover{position:absolute;border:1px solid var(--app-chart-outline);border-radius:4px;background-color:var(--app-chart-surface);padding:4px 8px;font-size:.85rem;display:grid;grid-template-columns:auto 1fr;column-gap:8px;pointer-events:none;visibility:hidden;min-width:176px;max-width:320px;word-break:break-word}.chart-card[_ngcontent-%COMP%]{padding:8px;margin:24px;background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border-color:var(--forge-theme-outline);box-shadow:var(--forge-elevation-1)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.legend-container[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;min-width:280px;max-height:100%;background-color:var(--forge-theme-surface);border-left:1px solid var(--forge-theme-outline);--forge-list-item-padding: 0;padding:16px}.legend-container[_ngcontent-%COMP%]   forge-list-item[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{background-color:var(--item-color);width:24px;height:24px}  .chart-legend [slot=leading]{width:16px;height:16px;background-color:var(--item-color)}






/*# sourceMappingURL=d3-chart.component-IVYCG7AG.css.map */`]})}}return t})();var ao=(()=>{class t{static loadGoogleChartService(){return new so(r=>{let n=document.querySelector('script[src="https://www.gstatic.com/charts/loader.js"]');n?(r.next(),r.complete()):(n=document.createElement("script"),n.type="text/javascript",n.src="https://www.gstatic.com/charts/loader.js",n.onload=()=>{r.next(),r.complete()},document.body.appendChild(n))})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=lo({token:t,factory:t.\u0275fac})}}return t})();var $m=["chartContainer"],oo=(()=>{class t{constructor(){this.destroyRef=$r(Pr),this.chartAnimation={startup:!0,duration:500},this.chartScale=1,this.googleChartsLoaded=!1,this.chartIsPanning=!1,this.#t=P.bar}#t;set chartType(r){this.#t=r,this.googleChartsLoaded&&this.drawChart("create")}get chartType(){return this.#t}ngOnInit(){ao.loadGoogleChartService().subscribe(()=>{google.charts.load("current",{packages:["corechart","treemap","orgchart","gantt"]}).then(()=>{this.googleChartsLoaded=!0,this.drawChart("create")})}),Ut(window,"resize").pipe(Xt(this.destroyRef),Or(100)).subscribe(()=>this.drawChart("redraw")),Ut(this.chartContainer?.nativeElement,"wheel").pipe(Xt(this.destroyRef)).subscribe(r=>{let n=(this.chartContainer?.nativeElement).firstElementChild;r.deltaY>0&&this.chartScale<5.05?(this.chartScale+=.05,n.style.transform=`scale(${this.chartScale})`):r.deltaY<0&&this.chartScale>.1&&(this.chartScale-=.05,n.style.transform=`scale(${this.chartScale})`)})}ngOnDestroy(){this.chart?.clearChart()}onAction(r){this.drawChart(r)}drawChart(r){r!=="redraw"&&this.setChartData(r);let n=this.chartContainer?.nativeElement.clientWidth,a=this.chartContainer?.nativeElement.clientHeight;switch(this.chartType){case P.bar:{r==="create"&&(this.chart=new google.visualization.ColumnChart(this.chartContainer?.nativeElement),this.addChartEvents());let o={title:"Bar Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,o);break}case P.bubble:{r==="create"&&(this.chart=new google.visualization.BubbleChart(this.chartContainer?.nativeElement),this.addChartEvents());let o={title:"Bubble Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,o);break}case P.donut:{r==="create"&&(this.chart=new google.visualization.PieChart(this.chartContainer?.nativeElement),this.addChartEvents());let o={title:"Donut Chart",pieHole:.5};this.chart.draw(this.chartData,o);break}case P.pie:{r==="create"&&(this.chart=new google.visualization.PieChart(this.chartContainer?.nativeElement),this.addChartEvents());let o={title:"Pie Chart"};this.chart.draw(this.chartData,o);break}case P.line:{r==="create"&&(this.chart=new google.visualization.LineChart(this.chartContainer?.nativeElement),this.addChartEvents());let o={title:"Line Chart",animation:this.chartAnimation};this.chart.draw(this.chartData,o);break}case P.treemap:{r==="create"&&(this.chart=new google.visualization.TreeMap(this.chartContainer?.nativeElement),this.addChartEvents());let o={title:"Treemap Chart"};this.chart.draw(this.chartData,o);break}case P.tree:{r==="create"&&(this.chart=new google.visualization.OrgChart(this.chartContainer?.nativeElement),this.addChartEvents());let o={allowCollapse:!0,allowHtml:!0,nodeClass:"app--chart--tree-node",selectedNodeClass:"app--chart--tree-node--selected"};this.chart.draw(this.chartData,o);break}case P.gantt:{r==="create"&&(this.chart=new google.visualization.Gantt(this.chartContainer?.nativeElement),this.addChartEvents());let o={};this.chart.draw(this.chartData,o)}}}setChartData(r){let n=this.chartData?.getNumberOfRows()||0,a=this.chartData?.getNumberOfColumns()||0;switch(r){case"create":{switch(this.chartData=new google.visualization.DataTable,this.chartType){case P.bar:case P.donut:case P.pie:this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Value","value"),this.chartData.addRows(this.getData(10,0).map(o=>[o.label,o.value]));break;case P.bubble:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Size","size");let o=[];for(let i=0;i<10;i++)o.push([i.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${i}`,this.randomNumber(0,1e3)]);this.chartData.addRows(o);break}case P.line:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("number","Line 1","line1"),this.chartData.addColumn("number","Line 2","line2"),this.chartData.addColumn("number","Line 3","line3");let o=[];for(let i=0;i<10;i++)o.push([`Item ${i}`,this.randomNumber(0,1e3),this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);this.chartData.addRows(o);break}case P.treemap:{this.chartData.addColumn("string","Label","label"),this.chartData.addColumn("string","Parent","parent"),this.chartData.addColumn("number","Value","value"),this.chartData.addColumn("number","Category","category"),this.chartData.addRow(["Root",null,0,0]),this.chartData.addRows(this.getData(20,0).map(o=>[o.label,"Root",o.value,o.category]));break}case P.tree:{this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","ParentId","parentId"),this.chartData.addRow([{v:"0",f:"Item 0"},null]),this.chartData.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}case P.gantt:this.chartData.addColumn("string","Id","id"),this.chartData.addColumn("string","Name","name"),this.chartData.addColumn("string","Resource","resource"),this.chartData.addColumn("date","Start Date","startDate"),this.chartData.addColumn("date","End Date","endDate"),this.chartData.addColumn("number","Duration","duration"),this.chartData.addColumn("number","Progress","progress"),this.chartData.addColumn("string","Dependencies","dependencies"),this.chartData.addRows([["0","Item 01","",new Date(2024,0,1),new Date(2024,0,31),null,10,null],["1","Item 02","",new Date(2024,1,1),new Date(2024,1,10),null,20,null],["2","Item 03","",new Date(2024,1,1),new Date(2024,1,20),null,30,null],["3","Item 04","",new Date(2024,3,15),new Date(2024,8,20),null,40,null],["4","Item 05","",new Date(2024,10,1),new Date(2025,10,30),null,90,null]])}break}case"update":{switch(this.chartType){case P.bar:case P.donut:case P.pie:{this.getData(n).forEach((i,s)=>{this.chartData?.setValue(s,1,i.value)});break}case P.bubble:{for(let o=0;o<n;o++)this.chartData?.setValue(o,1,this.randomNumber(0,1e3)),this.chartData?.setValue(o,2,this.randomNumber(0,1e3)),this.chartData?.setValue(o,4,this.randomNumber(0,1e3));break}case P.line:{for(let o=0;o<n;o++)for(let i=1;i<a;i++)this.chartData?.setValue(o,i,this.randomNumber(0,1e3));break}case P.treemap:{for(let o=1;o<n;o++)this.chartData?.setValue(o,2,this.randomNumber(0,1e3)),this.chartData?.setValue(o,3,this.randomNumber(0,1e3));break}case P.tree:{this.chartData?.removeRows(0,this.chartData.getNumberOfRows()),this.chartData?.addRows(this.buildTreeNodeData("0",this.randomNumber(1,5)));break}}break}case"add":{switch(this.chartType){case P.bar:case P.donut:case P.pie:{this.chartData?.addRows(this.getData(1,n).map(o=>[o.label,o.value]));break}case P.bubble:{this.chartData?.addRow([n.toString(),this.randomNumber(0,1e3),this.randomNumber(0,1e3),`Item ${n}`,this.randomNumber(0,1e3)]);break}case P.line:{this.chartData?.addColumn("number",`Line ${a}`,`line${a}`);for(let o=0;o<10;o++)this.chartData?.setValue(o,a,this.randomNumber(0,1e3));break}case P.treemap:{this.chartData?.addRow([`Item ${n}`,"Root",this.randomNumber(0,1e3),this.randomNumber(0,1e3)]);break}}break}case"delete":{if(n>1)switch(this.chartType){case P.bar:case P.bubble:case P.donut:case P.pie:case P.treemap:{this.chartData?.removeRow(n-1);break}case P.line:{this.chartData?.removeColumn(a-1);break}}break}}}getData(r,n=0){let a=[];for(let o=0;o<r;o++)a.push({id:o+n,value:this.randomNumber(0,1e3),label:`Item ${o+n}`,category:this.randomNumber(0,100)});return a}randomNumber(r,n){return Math.floor(Math.random()*(n-r+1))+r}addChartEvents(){google.visualization.events.addListener(this.chart,"ready",()=>{console.log("chart ready"),this.chartScale=1,this.addZoomPanEvents()}),google.visualization.events.addListener(this.chart,"select",()=>{console.log("chart item selected"),console.log(this.chart?.getSelection())}),google.visualization.events.addListener(this.chart,"mousedown",()=>{console.log("mousedown")})}buildTreeNodeData(r,n=1){let a=[],o=this.randomNumber(0,5);for(let i=0;i<o;i++)a.push([{v:`${r}-${i}`,f:`Item ${r}-${i}`},r]),n>1&&a.push(...this.buildTreeNodeData(`${r}-${i}`,n-1));return a}addZoomPanEvents(){let r=(this.chartContainer?.nativeElement).firstElementChild;Ut(r,"mousedown").pipe(Xt(this.destroyRef)).subscribe(n=>{this.chartIsPanning=!0,(this.chartContainer?.nativeElement).classList.add("app--chart--panning")}),Ut(r,"mousemove").pipe(Xt(this.destroyRef),uo(()=>this.chartIsPanning)).subscribe(n=>{(this.chartContainer?.nativeElement).scrollBy(n.movementX*-1,n.movementY*-1)}),Ut(r,"mouseup").pipe(Xt(this.destroyRef)).subscribe(()=>{this.chartIsPanning=!1,(this.chartContainer?.nativeElement).classList.remove("app--chart--panning")}),Ut(r,"mouseout").pipe(Xt(this.destroyRef)).subscribe(()=>{this.chartIsPanning=!1,(this.chartContainer?.nativeElement).classList.remove("app--chart--panning")})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=De({type:t,selectors:[["app-charts-google-chart"]],viewQuery:function(n,a){if(n&1&&ue($m,7),n&2){let o;le(o=ce())&&(a.chartContainer=o.first)}},inputs:{chartType:"chartType"},standalone:!0,features:[yo([ao]),Ie],decls:3,vars:0,consts:[["chartContainer",""],[1,"chart-card"],[1,"chart-container"]],template:function(n,a){n&1&&(j(0,"div",1),Qt(1,"div",2,0),J())},dependencies:[Re],styles:[`[_nghost-%COMP%]{display:block;height:100%;width:100%}  .app--chart--tree-node{border:1px solid var(--forge-theme-outline);white-space:nowrap;background-color:#e8eaf6}  .app--chart--tree-node--selected{background-color:#3f51b5;color:#fff}  .app--chart--panning{-webkit-user-select:none;user-select:none}.chart-card[_ngcontent-%COMP%]{margin:24px;height:calc(100% - 48px);background-color:var(--forge-theme-surface);border-radius:var(--forge-shape-medium);border-color:var(--forge-theme-outline);box-shadow:var(--forge-elevation-1)}.chart-card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{position:relative;height:100%}






/*# sourceMappingURL=google-chart.component-ECCW2564.css.map */`]})}}return t})();function Pm(t,e){if(t&1&&Qt(0,"app-charts-d3-chart",9),t&2){let r=je();pt("chartType",r.chartType)}}function Fm(t,e){if(t&1&&Qt(0,"app-charts-google-chart",9),t&2){let r=je();pt("chartType",r.chartType)}}var P=function(t){return t[t.bar=0]="bar",t[t.bubble=1]="bubble",t[t.donut=2]="donut",t[t.donutMeter=3]="donutMeter",t[t.gantt=4]="gantt",t[t.line=5]="line",t[t.pie=6]="pie",t[t.treemap=7]="treemap",t[t.tree=8]="tree",t}(P||{}),jM=(()=>{class t{constructor(){this.chartTypesEnum=P,this.chartType=P.bar,this.activeTab=0}onAction(r){this.activeTab===0?this.d3Chart?.onAction(r):this.activeTab===1&&this.googleChart?.onAction(r)}onTabSelected(r){this.activeTab=r}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=De({type:t,selectors:[["app-charts"]],viewQuery:function(n,a){if(n&1&&(ue(no,5),ue(oo,5)),n&2){let o;le(o=ce())&&(a.d3Chart=o.first),le(o=ce())&&(a.googleChart=o.first)}},standalone:!0,features:[Ie],decls:37,vars:15,consts:[[1,"header"],["slot","start"],[1,"forge-typography--subheading4"],["aria-label","Change chart type",3,"ngModelChange","ngModel"],[3,"value"],["variant","outlined",3,"click","disabled"],["secondary","",3,"activeTab"],[3,"forge-tab-select"],[1,"body"],[3,"chartType"]],template:function(n,a){n&1&&(j(0,"forge-toolbar",0)(1,"div",1)(2,"h2",2),at(3,"Charts"),J(),j(4,"forge-select",3),xo("ngModelChange",function(i){return go(a.chartType,i)||(a.chartType=i),i}),j(5,"forge-option",4),at(6,"Bar"),J(),j(7,"forge-option",4),at(8,"Bubble"),J(),j(9,"forge-option",4),at(10,"Donut"),J(),j(11,"forge-option",4),at(12,"Donut Meter"),J(),j(13,"forge-option",4),at(14,"Gantt"),J(),j(15,"forge-option",4),at(16,"Line"),J(),j(17,"forge-option",4),at(18,"Pie"),J(),j(19,"forge-option",4),at(20,"Treemap"),J(),j(21,"forge-option",4),at(22,"Tree"),J()(),j(23,"forge-button",5),Ne("click",function(){return a.onAction("update")}),at(24,"Update"),J(),j(25,"forge-button",5),Ne("click",function(){return a.onAction("add")}),at(26,"Add"),J(),j(27,"forge-button",5),Ne("click",function(){return a.onAction("delete")}),at(28,"Delete"),J()()(),j(29,"forge-tab-bar",6)(30,"forge-tab",7),Ne("forge-tab-select",function(){return a.onTabSelected(0)}),at(31,"D3"),J(),j(32,"forge-tab",7),Ne("forge-tab-select",function(){return a.onTabSelected(1)}),at(33,"Google"),J()(),j(34,"div",8),Fr(35,Pm,1,1,"app-charts-d3-chart",9)(36,Fm,1,1,"app-charts-google-chart",9),J()),n&2&&(rt(4),mo("ngModel",a.chartType),rt(),pt("value",a.chartTypesEnum.bar),rt(2),pt("value",a.chartTypesEnum.bubble),rt(2),pt("value",a.chartTypesEnum.donut),rt(2),pt("value",a.chartTypesEnum.donutMeter),rt(2),pt("value",a.chartTypesEnum.gantt),rt(2),pt("value",a.chartTypesEnum.line),rt(2),pt("value",a.chartTypesEnum.pie),rt(2),pt("value",a.chartTypesEnum.treemap),rt(2),pt("value",a.chartTypesEnum.tree),rt(2),pt("disabled",a.activeTab===0&&a.chartType===a.chartTypesEnum.tree||a.chartType===a.chartTypesEnum.gantt),rt(2),pt("disabled",a.chartType===a.chartTypesEnum.donutMeter||a.chartType===a.chartTypesEnum.tree||a.chartType===a.chartTypesEnum.gantt),rt(2),pt("disabled",a.chartType===a.chartTypesEnum.donutMeter||a.chartType===a.chartTypesEnum.tree||a.chartType===a.chartTypesEnum.gantt),rt(2),pt("activeTab",a.activeTab),rt(6),zr(a.activeTab===0?35:a.activeTab===1?36:-1))},dependencies:[Re,wo,_o,bo,Co,To,No,Do,Eo,Ro,Io,Fo,Po,Oo,$o,Ho,zo,no,oo],styles:[`[_nghost-%COMP%]{overflow:hidden;height:100%;display:grid;grid-template-rows:auto auto 1fr}.header[_ngcontent-%COMP%]{overflow:hidden}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:16px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]{width:320px}.header[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]   forge-select[_ngcontent-%COMP%]::part(label){display:none}forge-tab-bar[_ngcontent-%COMP%]{background-color:var(--forge-theme-surface)}forge-tab-bar[_ngcontent-%COMP%]::part(container){justify-items:flex-start}forge-tab-bar[_ngcontent-%COMP%]   forge-tab[_ngcontent-%COMP%]{min-width:240px}.body[_ngcontent-%COMP%]{overflow:hidden;height:100%}






/*# sourceMappingURL=charts.component-EMGJOCOC.css.map */`]})}}return t})();export{P as ChartTypes,jM as ChartsComponent};
//# sourceMappingURL=chunk-HOPROTTQ.js.map
