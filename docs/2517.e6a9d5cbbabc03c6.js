"use strict";(self.webpackChunkdemo_ng_forge=self.webpackChunkdemo_ng_forge||[]).push([[2517,1248],{50714:(W,h,t)=>{t.d(h,{V:()=>e});var s=t(71670),L=t(2013);function e(c,g){return u.apply(this,arguments)}function u(){return(u=(0,s.Z)(function*(c,g){const v=yield(0,L.T)(c,g);v.layers=v.layers.filter(m);const P={serviceJSON:v};if((v.currentVersion??0)<10.5)return P;const I=yield(0,L.T)(c+"/layers",g);return P.layersJSON={layers:I.layers.filter(m),tables:I.tables},P})).apply(this,arguments)}function m(c){return!c.type||"Feature Layer"===c.type}},15392:(W,h,t)=>{t.d(h,{T:()=>L});var s=t(71670);const L={BingMapsLayer:(e=(0,s.Z)(function*(){return(yield t.e(9864).then(t.bind(t,49864))).default}),function(){return e.apply(this,arguments)}),BuildingSceneLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(9605),t.e(1507),t.e(8439),t.e(5353)]).then(t.bind(t,15353))).default});return function(){return e.apply(this,arguments)}}(),CSVLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(7709).then(t.bind(t,77709))).default});return function(){return e.apply(this,arguments)}}(),DimensionLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(1645)]).then(t.bind(t,1645))).default});return function(){return e.apply(this,arguments)}}(),ElevationLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(6243)]).then(t.bind(t,16243))).default});return function(){return e.apply(this,arguments)}}(),FeatureLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.resolve().then(t.bind(t,36102))).default});return function(){return e.apply(this,arguments)}}(),GeoJSONLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(2728).then(t.bind(t,72728))).default});return function(){return e.apply(this,arguments)}}(),GeoRSSLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(4799).then(t.bind(t,4799))).default});return function(){return e.apply(this,arguments)}}(),GroupLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(2073).then(t.bind(t,22073))).default});return function(){return e.apply(this,arguments)}}(),ImageryLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(2043),t.e(921),t.e(9991),t.e(5860)]).then(t.bind(t,95860))).default});return function(){return e.apply(this,arguments)}}(),ImageryTileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(2043),t.e(3110),t.e(921),t.e(508),t.e(9991),t.e(8592),t.e(8230)]).then(t.bind(t,28230))).default});return function(){return e.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(9605),t.e(8592),t.e(4436)]).then(t.bind(t,74436))).default});return function(){return e.apply(this,arguments)}}(),KMLLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(4053)]).then(t.bind(t,44053))).default});return function(){return e.apply(this,arguments)}}(),LineOfSightLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(777)]).then(t.bind(t,25465))).default});return function(){return e.apply(this,arguments)}}(),MapImageLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(1516),t.e(8592),t.e(2598)]).then(t.bind(t,9915))).default});return function(){return e.apply(this,arguments)}}(),MapNotesLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(8645)]).then(t.bind(t,48645))).default});return function(){return e.apply(this,arguments)}}(),MediaLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(3658)]).then(t.bind(t,49122))).default});return function(){return e.apply(this,arguments)}}(),OGCFeatureLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(9264),t.e(5295)]).then(t.bind(t,36302))).default});return function(){return e.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(2035)]).then(t.bind(t,32487))).default});return function(){return e.apply(this,arguments)}}(),OrientedImageryLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(6636).then(t.bind(t,76636))).default});return function(){return e.apply(this,arguments)}}(),PointCloudLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(9605),t.e(8592),t.e(5601)]).then(t.bind(t,25601))).default});return function(){return e.apply(this,arguments)}}(),RouteLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8431),t.e(1688)]).then(t.bind(t,11688))).default});return function(){return e.apply(this,arguments)}}(),SceneLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(9605),t.e(1507),t.e(8439),t.e(8592),t.e(5039)]).then(t.bind(t,75039))).default});return function(){return e.apply(this,arguments)}}(),StreamLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(5627).then(t.bind(t,75627))).default});return function(){return e.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(9645).then(t.bind(t,59645))).default});return function(){return e.apply(this,arguments)}}(),TileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(1516),t.e(8592),t.e(2501)]).then(t.bind(t,2501))).default});return function(){return e.apply(this,arguments)}}(),UnknownLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(9228).then(t.bind(t,69228))).default});return function(){return e.apply(this,arguments)}}(),UnsupportedLayer:function(){var e=(0,s.Z)(function*(){return(yield t.e(3520).then(t.bind(t,53520))).default});return function(){return e.apply(this,arguments)}}(),VectorTileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(292),t.e(8592),t.e(5453)]).then(t.bind(t,32248))).default});return function(){return e.apply(this,arguments)}}(),VoxelLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(9605),t.e(8592),t.e(664)]).then(t.bind(t,20664))).default});return function(){return e.apply(this,arguments)}}(),WFSLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(6010),t.e(4404)]).then(t.bind(t,64404))).default});return function(){return e.apply(this,arguments)}}(),WMSLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(2259)]).then(t.bind(t,72259))).default});return function(){return e.apply(this,arguments)}}(),WMTSLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(3949)]).then(t.bind(t,3949))).default});return function(){return e.apply(this,arguments)}}(),WebTileLayer:function(){var e=(0,s.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(7062)]).then(t.bind(t,71815))).default});return function(){return e.apply(this,arguments)}}()};var e},45773:(W,h,t)=>{t.d(h,{Y:()=>u,h:()=>e});var s=t(55050),L=t(37753);function e(m){return{origin:"portal-item",url:(0,s.mN)(m.itemUrl),portal:m.portal||L.Z.getDefault(),portalItem:m,readResourcePaths:[]}}function u(m){return{origin:"portal-item",messages:[],writtenProperties:[],url:m.itemUrl?(0,s.mN)(m.itemUrl):null,portal:m.portal||L.Z.getDefault(),portalItem:m}}},21248:(W,h,t)=>{t.r(h),t.d(h,{getFirstLayerOrTableId:()=>$,getNumLayersAndTables:()=>N,getSubtypeGroupLayerIds:()=>K,load:()=>j,preprocessFSItemData:()=>C});var s=t(71670),L=t(32995),e=t(22735),u=t(4583),m=t(50714),c=t(37753),g=t(66673),v=t(45773),P=t(39712),I=t(2929),B=t(2013);function j(r,l){return D.apply(this,arguments)}function D(){return D=(0,s.Z)(function*(r,l){const a=r.instance.portalItem;if(a&&a.id)return yield a.load(l),function R(r){const l=r.instance.portalItem;if(!l?.type||!r.supportedTypes.includes(l.type))throw new L.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:l?.type,expectedType:r.supportedTypes.join(", ")})}(r),function J(r,l){return T.apply(this,arguments)}(r,l)}),D.apply(this,arguments)}function T(){return T=(0,s.Z)(function*(r,l){const a=r.instance,y=a.portalItem;if(!y)return;const{url:i,title:f}=y,n=(0,v.h)(y);if("group"===a.type)return a.read({title:f},n),function z(r,l){return E.apply(this,arguments)}(a,r);i&&a.read({url:i},n);const o=yield Z(r,l);return o&&a.read(o,n),a.resourceReferences={portalItem:y,paths:n.readResourcePaths??[]},"subtype-group"!==a.type&&a.read({title:f},n),(0,I.y)(a,n)}),T.apply(this,arguments)}function E(){return E=(0,s.Z)(function*(r,l){let a;const{portalItem:y}=r;if(!y)return;const i=y.type,f=l.layerModuleTypeMap,n=(0,P._$)(y,"Oriented Imagery Layer")??!1;switch(i){case"Feature Service":a=n?f.OrientedImageryLayer:f.FeatureLayer;break;case"Stream Service":a=f.StreamLayer;break;case"Scene Service":a=f.SceneLayer;break;case"Feature Collection":a=f.FeatureLayer;break;default:throw new L.Z("portal:unsupported-item-type-as-group",`The item type '${i}' is not supported as a 'IGroupLayer'`)}let[o,d]=yield Promise.all([a(),Z(l)]),p=()=>o;if("Feature Service"===i){if(d=y.url?yield C(d,y.url):{},K(d).length){const O=f.SubtypeGroupLayer,U=yield O();p=k=>"SubtypeGroupLayer"===k.layerType?U:o}return S(r,p,d,yield function w(r){return A.apply(this,arguments)}(y.url))}return N(d)>0?S(r,p,d):function Y(r,l){return M.apply(this,arguments)}(r,p)}),E.apply(this,arguments)}function M(){return(M=(0,s.Z)(function*(r,l){const{portalItem:a}=r;if(!a?.url)return;const y=yield(0,B.T)(a.url);y&&S(r,l,{layers:y.layers?.map(F),tables:y.tables?.map(F)})})).apply(this,arguments)}function F(r){return{id:r.id,name:r.name}}function S(r,l,a,y){let i=a.layers||[];const f=a.tables||[];if("Feature Collection"===r.portalItem?.type&&(i.forEach(n=>{"Table"===n?.layerDefinition?.type&&f.push(n)}),i=i.filter(n=>"Table"!==n?.layerDefinition?.type)),"coverage"in a){const n=function X(r){const{coverage:l}=r;if(!l)return null;const a=new URL(l);if(l.toLowerCase().includes("item.html")){const y=a.searchParams.get("id");return e.Z.fromPortalItem({portalItem:new g.default({id:y,url:a.origin})})}if((0,u.B5)(l))return e.Z.fromArcGISServerUrl({url:l});throw new L.Z("portal:oriented-imagery-layer-coverage","the provided coverage url couldn't be loaded as a layer")}(a);n&&r.add(n)}i.reverse().forEach(n=>{const o=V(r,l(n),a,n,y?.(n));r.add(o)}),f.reverse().forEach(n=>{const o=V(r,l(n),a,n,y?.(n));r.tables.add(o)})}function V(r,l,a,y,i){const f=r.portalItem,n=new l({portalItem:f.clone(),layerId:y.id});if("sourceJSON"in n&&(n.sourceJSON=i),"subtype-group"!==n.type&&(n.sublayerTitleMode="service-name"),"Feature Collection"===f.type){const o={origin:"portal-item",portal:f.portal||c.Z.getDefault()};n.read(y,o);const d=a.showLegend;null!=d&&n.read({showLegend:d},o)}return n}function Z(r,l){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)(function*(r,l){if(!1===r.supportsData)return;const a=r.instance,y=a.portalItem;if(!y)return;let i=null;try{i=yield y.fetchData("json",l)}catch{}if(function Q(r){return"stream"!==r.type&&"oriented-imagery"!==r.type&&"layerId"in r}(a)){let f=null,n=!0;if(i&&N(i)>0){if(null==a.layerId){const o=K(i);a.layerId="subtype-group"===a.type?o?.[0]:$(i)}f=function H(r,l){const{layerId:a}=l,y=r.layers?.find(i=>i.id===a)||r.tables?.find(i=>i.id===a);return y&&function b(r,l){return!("feature"===l.type&&"layerType"in r&&"SubtypeGroupLayer"===r.layerType||"subtype-group"===l.type&&!("layerType"in r))}(y,l)?y:null}(i,a),f&&(1===N(i)&&(n=!1),null!=i.showLegend&&(f.showLegend=i.showLegend))}return n&&"service-name"!==a.sublayerTitleMode&&(a.sublayerTitleMode="item-title-and-service-name"),f}return i})).apply(this,arguments)}function C(r,l){return G.apply(this,arguments)}function G(){return(G=(0,s.Z)(function*(r,l){if(null==r?.layers||null==r?.tables){const a=yield(0,B.T)(l);(r=r||{}).layers=r.layers||a?.layers,r.tables=r.tables||a?.tables}return r})).apply(this,arguments)}function $(r){const l=r.layers;if(l&&l.length)return l[0].id;const a=r.tables;return a&&a.length?a[0].id:null}function N(r){return(r?.layers?.length??0)+(r?.tables?.length??0)}function K(r){const l=[];return r?.layers?.forEach(a=>{"SubtypeGroupLayer"===a.layerType&&l.push(a.id)}),l}function A(){return(A=(0,s.Z)(function*(r){const{layersJSON:l}=yield(0,m.V)(r);if(!l)return null;const a=[...l.layers,...l.tables];return y=>a.find(i=>i.id===y.id)})).apply(this,arguments)}},22517:(W,h,t)=>{t.r(h),t.d(h,{fromItem:()=>P,selectLayerClassPath:()=>D});var s=t(71670),L=t(32995),e=t(63719),u=t(15392),m=t(66673),c=t(21248),g=t(39712),v=t(2013);function P(n){return I.apply(this,arguments)}function I(){return I=(0,s.Z)(function*(n){!n.portalItem||n.portalItem instanceof m.default||(n={...n,portalItem:new m.default(n.portalItem)});const o=yield function B(n){return j.apply(this,arguments)}(n.portalItem);return new o.constructor({portalItem:n.portalItem,...o.properties})}),I.apply(this,arguments)}function j(){return j=(0,s.Z)(function*(n){return yield n.load(),function J(n){return T.apply(this,arguments)}(yield D(n))}),j.apply(this,arguments)}function D(n){return R.apply(this,arguments)}function R(){return R=(0,s.Z)(function*(n){switch(n.type){case"Map Service":return function z(n){return E.apply(this,arguments)}(n);case"Feature Service":return function Y(n){return M.apply(this,arguments)}(n);case"Feature Collection":return function V(n){return Z.apply(this,arguments)}(n);case"Scene Service":return function F(n){return S.apply(this,arguments)}(n);case"Image Service":return function x(n){return C.apply(this,arguments)}(n);case"Stream Service":case"Feed":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"CSV":return{className:"CSVLayer"};case"KML":return{className:"KMLLayer"};case"WFS":return{className:"WFSLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:throw new L.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:n.type})}}),R.apply(this,arguments)}function T(){return(T=(0,s.Z)(function*(n){const o=u.T[n.className];return{constructor:yield o(),properties:n.properties}})).apply(this,arguments)}function E(){return E=(0,s.Z)(function*(n){return(yield function l(n){return a.apply(this,arguments)}(n))?{className:"TileLayer"}:{className:"MapImageLayer"}}),E.apply(this,arguments)}function M(){return M=(0,s.Z)(function*(n){if((0,g._$)(n,"Oriented Imagery Layer"))return function A(n){return r.apply(this,arguments)}(n);const o=yield y(n);if("object"==typeof o){const d={};return null!=o.id&&(d.layerId=o.id),{className:o.className||"FeatureLayer",properties:d}}return{className:"GroupLayer"}}),M.apply(this,arguments)}function S(){return(S=(0,s.Z)(function*(n){const o=yield y(n);if("object"==typeof o){const d={};let p;if(null!=o.id?(d.layerId=o.id,p=`${n.url}/layers/${o.id}`):p=n.url,n.typeKeywords?.length)for(const U of Object.keys(e.fb))if(n.typeKeywords.includes(U))return{className:e.fb[U]};const O=yield(0,v.T)(p);return{className:e.fb[O?.layerType]||"SceneLayer",properties:d}}return!1===o&&"Voxel"===(yield(0,v.T)(n.url))?.layerType?{className:"VoxelLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function Z(){return(Z=(0,s.Z)(function*(n){yield n.load();const o=(0,g._$)(n,"Map Notes"),d=(0,g._$)(n,"Markup");if(o||d)return{className:"MapNotesLayer"};if((0,g._$)(n,"Route Layer"))return{className:"RouteLayer"};const p=yield n.fetchData();return 1===(0,c.getNumLayersAndTables)(p)?{className:"FeatureLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function C(){return(C=(0,s.Z)(function*(n){yield n.load();const o=n.typeKeywords?.map(k=>k.toLowerCase())??[];if(o.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(o.includes("tiled imagery"))return{className:"ImageryTileLayer"};const d=(yield n.fetchData())?.layerType;if("ArcGISTiledImageServiceLayer"===d)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===d)return{className:"ImageryLayer"};const p=yield(0,v.T)(n.url),O=p.cacheType?.toLowerCase(),U=p.capabilities?.toLowerCase().includes("tilesonly");return"map"===O||U?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}})).apply(this,arguments)}function r(){return(r=(0,s.Z)(function*(n){yield n.load();const o=yield n.fetchData();return o.coverage?{className:"GroupLayer"}:{className:"OrientedImageryLayer",properties:o}})).apply(this,arguments)}function a(){return(a=(0,s.Z)(function*(n){return(yield(0,v.T)(n.url)).tileInfo})).apply(this,arguments)}function y(n){return i.apply(this,arguments)}function i(){return(i=(0,s.Z)(function*(n){const o=n.url;if(!o||o.match(/\/\d+$/))return{};yield n.load();const d=yield n.fetchData();if("Feature Service"===n.type){const p=f(yield(0,c.preprocessFSItemData)(d,o));if("object"==typeof p){const O=(0,c.getSubtypeGroupLayerIds)(d);p.className=null!=p.id&&O.includes(p.id)?"SubtypeGroupLayer":"FeatureLayer"}return p}return(0,c.getNumLayersAndTables)(d)>0?f(d):f(yield(0,v.T)(o))})).apply(this,arguments)}function f(n){return 1===(0,c.getNumLayersAndTables)(n)&&{id:(0,c.getFirstLayerOrTableId)(n)}}},2013:(W,h,t)=>{t.d(h,{T:()=>e});var s=t(71670),L=t(1897);function e(m,c){return u.apply(this,arguments)}function u(){return(u=(0,s.Z)(function*(m,c){const{data:g}=yield(0,L.default)(m,{responseType:"json",query:{f:"json",...c?.customParameters,token:c?.apiKey}});return g})).apply(this,arguments)}}}]);
//# sourceMappingURL=2517.e6a9d5cbbabc03c6.js.map