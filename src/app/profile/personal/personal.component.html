<ng-container [formGroup]="formGroup">
  <div class="form-grid">
    <forge-text-field required [appFormControlInvalid]="formGroup.controls.firstName">
      <input type="text" id="personal-form--first-name" formControlName="firstName" [appInputCasing]="'upper'" />
      <label for="personal-form--first-name" slot="label">First Name</label>
      <span slot="helper-text" class="app-form-control-invalid">First name is required {{formGroup.controls.firstName.invalid}} {{formGroup.controls.firstName.touched}}</span>
    </forge-text-field>

    <forge-text-field required [appFormControlInvalid]="formGroup.controls.lastName">
      <input type="text" id="personal-form--last-name" formControlName="lastName" />
      <label for="personal-form--last-name" slot="label">Last Name</label>
      <span slot="helper-text" class="app-form-control-invalid">Last name is required</span>
    </forge-text-field>

    <forge-select label="Gender" formControlName="gender" [options]="genderOptions"></forge-select>

    <forge-text-field required [appFormControlInvalid]="formGroup.controls.email">
      <input type="text" id="personal-form--email" formControlName="email" />
      <label for="personal-form--email" slot="label">Email</label>
      <span slot="helper-text" class="app-form-control-invalid">Email is required</span>
    </forge-text-field>

    <forge-text-field required [appFormControlInvalid]="formGroup.controls.phone">
      <input type="text" id="personal-form--phone" formControlName="phone" />
      <label for="personal-form--phone" slot="label">Phone</label>
      <span slot="helper-text" class="app-form-control-invalid">Phone number is required</span>
    </forge-text-field>

    <forge-date-picker>
      <forge-text-field>
        <input type="text" id="personal-form--dob" formControlName="dateOfBirth" />
        <label for="personal-form--dob">Date of birth</label>
      </forge-text-field>
    </forge-date-picker>

    <forge-text-field class="form-grid__comment form-grid--col-span">
      <textarea type="text" id="personal-form--comment" formControlName="comment" rows="4"></textarea>
      <label for="personal-form--comment">Comment</label>
    </forge-text-field>

    <forge-label-value>
      <span slot="label">Rank {{formGroup.value.rank}}</span>
      <div slot="value">
        <forge-slider type="discrete" min="0" max="10" formControlName="rank"></forge-slider>
      </div>
    </forge-label-value>

    <forge-label-value>
      <span slot="label">Size</span>
      <div slot="value" role="radiogroup" aria-label="Choose size option">
        @for (option of sizeOptions; track i; let i = $index) {
        <forge-radio>
          <input type="radio" id="personal-form--size-{{i}}" formControlName="size" value="{{option.value}}" />
          <label for="personal-form--size-{{i}}">{{option.label}}</label>
        </forge-radio>
        }
      </div>
    </forge-label-value>
  </div>

  <forge-divider></forge-divider>

  <div class="friends">
    <ng-container formArrayName="friends">
      @for (friend of formGroup.controls.friends.controls; track i; let i = $index) {
      <div class="friend">
        <forge-select [options]="friendOptions" [formControlName]="i" label="Friend" [appFormControlInvalid]="formGroup.controls.friends.controls[i]">
          <span slot="helper-text" class="app-form-control-invalid">A friend is required</span>
        </forge-select>
        <forge-icon-button>
          <button type="button" aria-label="Delete" (click)="onDeleteFriend(i)">
            <forge-icon name="delete"></forge-icon>
          </button>
        </forge-icon-button>
      </div>
      }
      <forge-button type="raised">
        <button type="button" (click)="onAddFriend()">Add friend</button>
      </forge-button>
    </ng-container>
  </div>
</ng-container>